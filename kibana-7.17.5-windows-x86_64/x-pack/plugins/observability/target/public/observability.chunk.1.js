/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[1],{106:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return r}));var n=i(24);const a=(e,t,i)=>{l(e,t,i),o(e,t,i),s(e)},r=(e,t,i)=>{u(e,t,i)},l=(e,t,i)=>{const a=(e=>{const t=new Map;return e.forEach((e=>{const i=t.get(e.dataType),n=(e.filters||[]).map((e=>e.field));i?i.push(...n):t.set(e.dataType,[...n])})),t})(t);[...a.keys()].forEach((t=>{(a.get(t)||[]).forEach((a=>{e({app:"observability-overview",metricType:n.a.COUNT,metric:`exploratory_view__filters__filter_${a}`}),e({app:"observability-overview",metricType:n.a.COUNT,metric:`exploratory_view__filters__report_type_${i}__data_type_${t}__filter_${a}`})}))}))},s=e=>{e({app:"observability-overview",metricType:n.a.COUNT,metric:"exploratory_view_apply_changes"})},o=(e,t,i)=>{t.map((e=>({dataType:e.dataType,metricType:e.selectedMetricField}))).forEach((({dataType:t,metricType:a})=>{i&&t&&a&&e({app:"observability-overview",metricType:n.a.COUNT,metric:`exploratory_view__report_type_${i}__data_type_${t}__metric_type_${a}`})}))},u=(e,t,i)=>{const n=function(e){if(e<0||isNaN(e))return null;if(e>=60)return"60+";if(e>=30)return"30-60";if(e>=20)return"20-30";if(e>=10)return"10-20";if(e>=5)return"5-10";return"0-5"}((i-t)/1e3);n&&d(e,n)};const d=(e,t)=>{e({app:"observability-overview",metricType:n.a.COUNT,metric:`exploratory_view__chart_loading_in_seconds_${t}`})}},107:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return u}));var n=i(1),a=i.n(n),r=i(3),l=i(6),s=i(76);function o({seriesId:e,series:t,defaultOperationType:i}){const{setSeries:n}=Object(s.f)(),r=null==t?void 0:t.operationType;return a.a.createElement(u,{onChange:i=>{n(e,{...t,operationType:i})},operationType:r||i})}function u({operationType:e,onChange:t}){const i=[{value:"average",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.average",{defaultMessage:"Average"})},{value:"median",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.median",{defaultMessage:"Median"})},{value:"sum",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.sum",{defaultMessage:"Sum"})},{value:"last_value",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.lastValue",{defaultMessage:"Last value"})},{value:"75th",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.75thPercentile",{defaultMessage:"75th Percentile"})},{value:"90th",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.90thPercentile",{defaultMessage:"90th Percentile"})},{value:"95th",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.95thPercentile",{defaultMessage:"95th Percentile"})},{value:"99th",inputDisplay:r.i18n.translate("xpack.observability.expView.operationType.99thPercentile",{defaultMessage:"99th Percentile"})}];return a.a.createElement(l.EuiSuperSelect,{fullWidth:!0,"data-test-subj":"operationTypeSelect",valueOfSelected:e,options:i,onChange:t})}},110:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i(77),a=i(27),r=i(9),l=i(81);var s=i(20);var o=i(92);function u({indexPattern:e}){return{defaultSeriesType:"bar_stacked",seriesTypes:[],reportType:n.m.KPI,xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:n.l,operationType:"median"}],hasOperationType:!1,filterFields:[r.o,r.s,r.a,r.q,{field:r.r,nested:r.u},n.f],breakdownFields:[r.r,r.s,r.a,r.q,n.h,n.e],baseFilters:[...Object(a.b)(r.n,"page-load",e),...Object(a.b)(r.h,"transaction",e)],labels:{...n.d,[r.j]:l.db},definitionFields:[r.j,r.i],metricOptions:[{field:n.j,id:n.j,label:l.O},{label:l.N,field:r.l,id:r.l,columnType:n.g},{label:l.b,field:r.m,id:r.m,columnType:n.g},{label:l.r,field:r.c,id:r.c,columnType:n.g},{label:l.Z,field:r.k,id:r.k,columnType:n.g},{label:l.y,field:r.e,id:r.e,columnType:n.g},{label:l.s,field:r.d,id:r.d,columnType:n.g},{label:l.g,field:r.b,id:r.b,columnType:n.g}]}}var d=i(6);const c={"host.os.platform":l.L,"host.os.full":l.u,"service.version":l.V,"network.carrier.icc":l.e,"network.carrier.name":l.f,"network.connection_type":l.h,"labels.device_model":l.n};const p=({reportType:e,dataType:t,indexPattern:i})=>{switch(t){case n.b.UX:return e===n.m.DISTRIBUTION?function({indexPattern:e}){return{reportType:n.m.DISTRIBUTION,defaultSeriesType:"line",seriesTypes:[],xAxisColumn:{sourceField:n.l},yAxisColumns:[{sourceField:n.k,label:l.M}],hasOperationType:!1,filterFields:[{field:r.o,isNegated:!1},r.s,r.a,r.q,{field:r.r,nested:r.u},n.f],breakdownFields:[r.r,r.s,r.a,r.q],definitionFields:[r.j,r.i],metricOptions:[{label:l.N,id:r.l,field:r.l},{label:l.b,id:r.m,field:r.m},{label:l.r,id:r.c,field:r.c},{label:l.Z,id:r.k,field:r.k},{label:l.y,id:r.e,field:r.e},{label:l.s,id:r.d,field:r.d},{label:l.g,id:r.b,field:r.b}],baseFilters:[...Object(a.b)(r.n,"page-load",e),...Object(a.b)(r.h,"transaction",e)],labels:{...n.d,[r.j]:l.db,[r.l]:l.N},query:{query:"transaction.duration.us < 60000000",language:"kuery"}}}({indexPattern:i}):e===n.m.CORE_WEB_VITAL?function({indexPattern:e}){const t=Object(d.euiPaletteForStatus)(3);return{defaultSeriesType:"bar_horizontal_percentage_stacked",reportType:n.m.CORE_WEB_VITAL,seriesTypes:["bar_horizontal_percentage_stacked"],xAxisColumn:{sourceField:n.o},yAxisColumns:[{sourceField:n.l,label:"Good"},{sourceField:n.l,label:"Average"},{sourceField:n.l,label:"Poor"}],hasOperationType:!1,filterFields:[{field:r.o,isNegated:!1},r.j,{field:r.s,nested:r.t},r.a,r.q,{field:r.r,nested:r.u},n.f],breakdownFields:[r.j,r.r,r.s,r.a,r.q,r.p],baseFilters:[...Object(a.b)(r.n,"page-load",e),...Object(a.b)(r.h,"transaction",e)],labels:{...n.d,[r.j]:"Web Application"},definitionFields:[r.j,r.i],metricOptions:[{id:r.e,label:l.y,columnType:n.c,columnFilters:[{language:"kuery",query:`${r.e} < 2500`},{language:"kuery",query:`${r.e} > 2500 and ${r.e} < 4000`},{language:"kuery",query:`${r.e} > 4000`}]},{label:l.s,id:r.d,columnType:n.c,columnFilters:[{language:"kuery",query:`${r.d} < 100`},{language:"kuery",query:`${r.d} > 100 and ${r.d} < 300`},{language:"kuery",query:`${r.d} > 300`}]},{label:l.g,id:r.b,columnType:n.c,columnFilters:[{language:"kuery",query:`${r.b} < 0.1`},{language:"kuery",query:`${r.b} > 0.1 and ${r.b} < 0.25`},{language:"kuery",query:`${r.b} > 0.25`}]}],yConfig:[{color:t[0],forAccessor:"y-axis-column"},{color:t[1],forAccessor:"y-axis-column-1"},{color:t[2],forAccessor:"y-axis-column-2"}],query:{query:'transaction.type: "page-load"',language:"kuery"}}}({indexPattern:i}):u({indexPattern:i});case n.b.SYNTHETICS:return e===n.m.DISTRIBUTION?function({series:e,indexPattern:t}){return{reportType:n.m.DISTRIBUTION,defaultSeriesType:(null==e?void 0:e.seriesType)||"line",seriesTypes:[],xAxisColumn:{sourceField:n.l},yAxisColumns:[{sourceField:n.k,label:l.Q}],hasOperationType:!1,filterFields:["monitor.type","observer.geo.name","tags"],breakdownFields:["observer.geo.name","monitor.name","monitor.id","monitor.type","tags","url.port"],baseFilters:[],definitionFields:[{field:"monitor.name",nested:"synthetics.step.name.keyword",singleSelection:!0},{field:"url.full",filters:Object(a.a)("summary.up",t)}],metricOptions:[{label:l.D,id:s.a,field:s.a},{label:l.y,field:s.f,id:s.f},{label:l.r,field:s.e,id:s.e},{label:l.k,field:s.c,id:s.c},{label:l.o,field:s.d,id:s.d},{label:l.g,field:s.b,id:s.b}],labels:{...n.d,"monitor.duration.us":l.D}}}({indexPattern:i}):Object(o.a)({indexPattern:i});case n.b.MOBILE:return e===n.m.DISTRIBUTION?function({indexPattern:e}){return{reportType:n.m.DISTRIBUTION,defaultSeriesType:"bar",seriesTypes:["line","bar"],xAxisColumn:{sourceField:n.l},yAxisColumns:[{sourceField:n.j}],hasOperationType:!1,filterFields:[...Object.keys(c),n.f],breakdownFields:Object.keys(c),baseFilters:[...Object(a.c)("agent.name",["iOS/swift","open-telemetry/swift"],e)],labels:{...n.d,...c,[r.j]:l.C},definitionFields:[r.j,r.i],metricOptions:[{label:l.T,field:r.l,id:r.l},{label:l.A,field:r.g,id:r.g},{label:l.j,field:r.f,id:r.f}]}}({indexPattern:i}):e===n.m.DEVICE_DISTRIBUTION?function({indexPattern:e}){return{reportType:n.m.DEVICE_DISTRIBUTION,defaultSeriesType:"bar",seriesTypes:["bar","bar_horizontal"],xAxisColumn:{sourceField:n.o},yAxisColumns:[{sourceField:n.l,operationType:"unique_count"}],hasOperationType:!1,filterFields:[...Object.keys(c),n.f],breakdownFields:Object.keys(c),baseFilters:[...Object(a.b)("agent.name","iOS/swift",e),...Object(a.b)("processor.event","transaction",e)],labels:{...n.d,...c,[r.j]:l.C},definitionFields:[r.j],metricOptions:[{field:"labels.device_id",id:"labels.device_id",label:l.I}]}}({indexPattern:i}):function({indexPattern:e}){return{reportType:n.m.KPI,defaultSeriesType:"line",seriesTypes:["line","bar","area"],xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:n.l,operationType:"median"}],hasOperationType:!0,filterFields:[...Object.keys(c),n.f],breakdownFields:Object.keys(c),baseFilters:[...Object(a.c)("agent.name",["iOS/swift","open-telemetry/swift"],e)],labels:{...n.d,...c,[r.l]:l.T,[r.j]:l.C,[r.g]:l.A,[r.f]:l.j},definitionFields:[r.j,r.i],metricOptions:[{label:l.T,field:r.l,id:r.l,columnType:n.g},{field:n.j,id:n.j,label:l.ab,columnFilters:[{language:"kuery",query:"processor.event: transaction"}],timeScale:"m"},{label:l.A,field:r.g,id:r.g,columnType:n.g},{label:l.j,field:r.f,id:r.f,columnType:n.g}]}}({indexPattern:i});default:return u({indexPattern:i})}}},76:function(e,t,i){"use strict";i.d(t,"d",(function(){return u})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return c})),i.d(t,"b",(function(){return p})),i.d(t,"f",(function(){return f})),i.d(t,"a",(function(){return b}));var n=i(1),a=i.n(n),r=i(24),l=i(27),s=(i(10),i(106));const o=Object(n.createContext)({});function u(e){return(null!=e?e:[]).map((e=>function(e){const{dt:t,op:i,st:n,bd:a,ft:r,time:l,rdf:s,mt:o,h:u,n:d,c:c,...p}=e;return{operationType:i,seriesType:n,breakdown:a,filters:r,time:l,reportDefinitions:s,dataType:t,selectedMetricField:o,hidden:u,name:d,color:c,...p}}(e)))}const d="sr",c="reportType";function p({children:e,storage:t}){const[i,p]=Object(n.useState)((()=>{var e;return u(null!==(e=t.get(d))&&void 0!==e?e:[])})),[f,b]=Object(n.useState)((()=>Date.now())),[y,m]=Object(n.useState)((()=>{var e;return null!==(e=t.get(c))&&void 0!==e?e:""})),[g,v]=Object(n.useState)(),x=Object(r.d)();Object(n.useEffect)((()=>{const e=null==i?void 0:i[0];v(e)}),[i,t]);const h=Object(n.useCallback)(((e,t)=>{p((i=>{const n=i.findIndex((e=>e.breakdown)),a=i.map(((i,a)=>a===e?{...t,breakdown:n===e||-1===n?t.breakdown:void 0}:i));return i.length===e?[...a,t]:[...a]}))}),[]),T=Object(n.useCallback)((e=>{p((t=>t.filter(((t,i)=>i!==e))))}),[]),k=Object(n.useCallback)((e=>i[e]),[i]),C={applyChanges:Object(n.useCallback)((e=>{const n=i.map((e=>Object(l.d)(e)));t.set(c,y),t.set(d,n),b(Date.now()),Object(s.a)(x,i,y),e&&e()}),[i,t,x,y]),storage:t,getSeries:k,setSeries:h,removeSeries:T,allSeries:i,lastRefresh:f,setLastRefresh:b,setReportType:m,reportType:y,firstSeries:g};return a.a.createElement(o.Provider,{value:C},e)}function f(){return Object(n.useContext)(o)}const b="new-series"},77:function(e,t,i){"use strict";var n=i(90);i.d(t,"a",(function(){return n.a})),i.d(t,"b",(function(){return n.b})),i.d(t,"c",(function(){return n.c})),i.d(t,"d",(function(){return n.d})),i.d(t,"e",(function(){return n.e})),i.d(t,"f",(function(){return n.f})),i.d(t,"g",(function(){return n.g})),i.d(t,"h",(function(){return n.h})),i.d(t,"i",(function(){return n.i})),i.d(t,"j",(function(){return n.j})),i.d(t,"k",(function(){return n.k})),i.d(t,"l",(function(){return n.l})),i.d(t,"m",(function(){return n.m})),i.d(t,"n",(function(){return n.n})),i.d(t,"o",(function(){return n.o}))},78:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return d}));var n=i(1),a=i.n(n),r=i(11),l=i(51),s=i(23);const o=Object(n.createContext)({});function u({children:e}){const[t,i]=Object(n.useState)({}),[u,d]=Object(n.useState)({}),[c,p]=Object(n.useState)({}),[f,b]=Object(n.useState)({infra_metrics:null,infra_logs:null,synthetics:null,ux:null,apm:null,mobile:null}),{services:{data:y}}=Object(r.useKibana)(),m=Object(n.useCallback)((async({dataType:e})=>{var n,a;if(null===f[e]&&!t[e]){i((t=>({...t,[e]:!0})));try{let t=!1,r="";switch(e){case"ux":case"synthetics":const i=await(null===(n=Object(s.a)(e))||void 0===n?void 0:n.hasData());t=Boolean(null==i?void 0:i.hasData),r=null==i?void 0:i.indices;break;case"apm":case"mobile":const l=await(null===(a=Object(s.a)("apm"))||void 0===a?void 0:a.hasData());t=Boolean(null==l?void 0:l.hasData),r=null==l?void 0:l.indices.transaction}if(b((i=>({...i,[e]:t}))),t&&r){const t=new l.a(y),i=await t.getIndexPattern(e,r);d((t=>({...t,[e]:i})))}i((t=>({...t,[e]:!1})))}catch(t){"Forbidden"===t.body.error&&p((i=>({...i,[e]:t}))),i((t=>({...t,[e]:!1})))}}}),[y,f,t]);return a.a.createElement(o.Provider,{value:{hasAppData:f,indexPatterns:u,loadIndexPattern:m,indexPatternErrors:c,loading:!!Object.values(t).find((e=>e))}},e)}const d=e=>{const{loading:t,hasAppData:i,loadIndexPattern:a,indexPatterns:r,indexPatternErrors:l}=Object(n.useContext)(o);return!e||null!=r&&r[e]||t||a({dataType:e}),Object(n.useMemo)((()=>({hasAppData:i,loading:t,indexPatterns:r,indexPatternErrors:l,indexPattern:e?null==r?void 0:r[e]:void 0,hasData:e?null==i?void 0:i[e]:void 0,loadIndexPattern:a})),[e,i,l,r,a,t])}},81:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"K",(function(){return l})),i.d(t,"z",(function(){return s})),i.d(t,"m",(function(){return o})),i.d(t,"J",(function(){return u})),i.d(t,"U",(function(){return d})),i.d(t,"q",(function(){return c})),i.d(t,"y",(function(){return p})),i.d(t,"r",(function(){return f})),i.d(t,"Z",(function(){return b})),i.d(t,"s",(function(){return y})),i.d(t,"g",(function(){return m})),i.d(t,"k",(function(){return g})),i.d(t,"o",(function(){return v})),i.d(t,"b",(function(){return x})),i.d(t,"N",(function(){return h})),i.d(t,"O",(function(){return T})),i.d(t,"M",(function(){return k})),i.d(t,"Q",(function(){return C})),i.d(t,"E",(function(){return w})),i.d(t,"G",(function(){return F})),i.d(t,"a",(function(){return O})),i.d(t,"t",(function(){return L})),i.d(t,"F",(function(){return M})),i.d(t,"H",(function(){return S})),i.d(t,"R",(function(){return _})),i.d(t,"cb",(function(){return j})),i.d(t,"Y",(function(){return P})),i.d(t,"B",(function(){return V})),i.d(t,"x",(function(){return I})),i.d(t,"v",(function(){return $})),i.d(t,"P",(function(){return D})),i.d(t,"i",(function(){return E})),i.d(t,"l",(function(){return A})),i.d(t,"w",(function(){return N})),i.d(t,"D",(function(){return B})),i.d(t,"W",(function(){return q})),i.d(t,"X",(function(){return R})),i.d(t,"db",(function(){return U})),i.d(t,"bb",(function(){return X})),i.d(t,"p",(function(){return K})),i.d(t,"f",(function(){return W})),i.d(t,"S",(function(){return z})),i.d(t,"h",(function(){return Y})),i.d(t,"u",(function(){return H})),i.d(t,"V",(function(){return G})),i.d(t,"L",(function(){return J})),i.d(t,"n",(function(){return Z})),i.d(t,"e",(function(){return Q})),i.d(t,"T",(function(){return ee})),i.d(t,"C",(function(){return te})),i.d(t,"A",(function(){return ie})),i.d(t,"j",(function(){return ne})),i.d(t,"ab",(function(){return ae})),i.d(t,"I",(function(){return re}));var n=i(3);const a=n.i18n.translate("xpack.observability.expView.fieldLabels.browserFamily",{defaultMessage:"Browser family"}),r=n.i18n.translate("xpack.observability.expView.fieldLabels.browserVersion",{defaultMessage:"Browser version"}),l=n.i18n.translate("xpack.observability.expView.fieldLabels.os",{defaultMessage:"Operating system"}),s=n.i18n.translate("xpack.observability.expView.fieldLabels.location",{defaultMessage:"Location"}),o=n.i18n.translate("xpack.observability.expView.fieldLabels.device",{defaultMessage:"Device"}),u=n.i18n.translate("xpack.observability.expView.fieldLabels.obsLocation",{defaultMessage:"Observer location"}),d=n.i18n.translate("xpack.observability.expView.fieldLabels.serviceName",{defaultMessage:"Service name"}),c=n.i18n.translate("xpack.observability.expView.fieldLabels.environment",{defaultMessage:"Environment"}),p=n.i18n.translate("xpack.observability.expView.fieldLabels.lcp",{defaultMessage:"Largest contentful paint"}),f=n.i18n.translate("xpack.observability.expView.fieldLabels.fcp",{defaultMessage:"First contentful paint"}),b=n.i18n.translate("xpack.observability.expView.fieldLabels.tbt",{defaultMessage:"Total blocking time"}),y=n.i18n.translate("xpack.observability.expView.fieldLabels.fid",{defaultMessage:"First input delay"}),m=n.i18n.translate("xpack.observability.expView.fieldLabels.cls",{defaultMessage:"Cumulative layout shift"}),g=n.i18n.translate("xpack.observability.expView.fieldLabels.dcl",{defaultMessage:"DOM content loaded"}),v=n.i18n.translate("xpack.observability.expView.fieldLabels.onload",{defaultMessage:"Document complete (onLoad)"}),x=n.i18n.translate("xpack.observability.expView.fieldLabels.backend",{defaultMessage:"Backend time"}),h=n.i18n.translate("xpack.observability.expView.fieldLabels.pageLoadTime",{defaultMessage:"Page load time"}),T=n.i18n.translate("xpack.observability.expView.fieldLabels.pageViews",{defaultMessage:"Page views"}),k=n.i18n.translate("xpack.observability.expView.fieldLabels.pagesLoaded",{defaultMessage:"Pages loaded"}),C=n.i18n.translate("xpack.observability.expView.fieldLabels.pings",{defaultMessage:"Pings"}),w=n.i18n.translate("xpack.observability.expView.fieldLabels.monitorId",{defaultMessage:"Monitor Id"}),F=n.i18n.translate("xpack.observability.expView.fieldLabels.monitorStatus",{defaultMessage:"Monitor Status"}),O=n.i18n.translate("xpack.observability.expView.fieldLabels.agentHost",{defaultMessage:"Agent host"}),L=n.i18n.translate("xpack.observability.expView.fieldLabels.hostName",{defaultMessage:"Host name"}),M=n.i18n.translate("xpack.observability.expView.fieldLabels.monitorName",{defaultMessage:"Monitor name"}),S=n.i18n.translate("xpack.observability.expView.fieldLabels.monitorType",{defaultMessage:"Monitor type"}),_=n.i18n.translate("xpack.observability.expView.fieldLabels.port",{defaultMessage:"Port"}),j=n.i18n.translate("xpack.observability.expView.fieldLabels.url",{defaultMessage:"URL"}),P=n.i18n.translate("xpack.observability.expView.fieldLabels.tags",{defaultMessage:"Tags"}),V=n.i18n.translate("xpack.observability.expView.fieldLabels.metric",{defaultMessage:"Metric"}),I=n.i18n.translate("xpack.observability.expView.fieldLabels.labels",{defaultMessage:"Labels"}),$=(n.i18n.translate("xpack.observability.expView.fieldLabels.chooseField",{defaultMessage:"Labels field"}),n.i18n.translate("xpack.observability.expView.fieldLabels.kpi",{defaultMessage:"KPI"})),D=n.i18n.translate("xpack.observability.expView.fieldLabels.performanceDistribution",{defaultMessage:"Performance distribution"}),E=n.i18n.translate("xpack.observability.expView.fieldLabels.coreWebVitals",{defaultMessage:"Core web vitals"}),A=n.i18n.translate("xpack.observability.expView.fieldLabels.deviceDistribution",{defaultMessage:"Device distribution"}),N=(n.i18n.translate("xpack.observability.expView.fieldLabels.mobileResponse",{defaultMessage:"Mobile response"}),n.i18n.translate("xpack.observability.expView.fieldLabels.memoryUsage",{defaultMessage:"System memory usage"}),n.i18n.translate("xpack.observability.expView.fieldLabels.kpiOverTime",{defaultMessage:"KPI over time"})),B=n.i18n.translate("xpack.observability.expView.fieldLabels.monitorDurationLabel",{defaultMessage:"Monitor duration"}),q=n.i18n.translate("xpack.observability.expView.fieldLabels.stepDurationLabel",{defaultMessage:"Step duration"}),R=n.i18n.translate("xpack.observability.expView.fieldLabels.stepNameLabel",{defaultMessage:"Step name"}),U=n.i18n.translate("xpack.observability.expView.fieldLabels.webApplication",{defaultMessage:"Web Application"}),X=n.i18n.translate("xpack.observability.expView.fieldLabels.upPings",{defaultMessage:"Up Pings"}),K=n.i18n.translate("xpack.observability.expView.fieldLabels.downPings",{defaultMessage:"Down Pings"}),W=n.i18n.translate("xpack.observability.expView.fieldLabels.carrierName",{defaultMessage:"Carrier Name"}),z=n.i18n.translate("xpack.observability.expView.fieldLabels.requestMethod",{defaultMessage:"Request Method"}),Y=n.i18n.translate("xpack.observability.expView.fieldLabels.connectionType",{defaultMessage:"Connection Type"}),H=n.i18n.translate("xpack.observability.expView.fieldLabels.hostOS",{defaultMessage:"Host OS"}),G=n.i18n.translate("xpack.observability.expView.fieldLabels.serviceVersion",{defaultMessage:"Service Version"}),J=n.i18n.translate("xpack.observability.expView.fieldLabels.osPlatform",{defaultMessage:"OS Platform"}),Z=n.i18n.translate("xpack.observability.expView.fieldLabels.deviceModel",{defaultMessage:"Device Model"}),Q=n.i18n.translate("xpack.observability.expView.fieldLabels.carrierLocation",{defaultMessage:"Carrier Location"}),ee=n.i18n.translate("xpack.observability.expView.fieldLabels.responseLatency",{defaultMessage:"Latency"}),te=n.i18n.translate("xpack.observability.expView.fieldLabels.mobileApp",{defaultMessage:"Mobile App"}),ie=n.i18n.translate("xpack.observability.expView.fieldLabels.mobile.memoryUsage",{defaultMessage:"Memory Usage"}),ne=n.i18n.translate("xpack.observability.expView.fieldLabels.cpuUsage",{defaultMessage:"CPU Usage"}),ae=n.i18n.translate("xpack.observability.expView.fieldLabels.transactionPerMinute",{defaultMessage:"Throughput"}),re=n.i18n.translate("xpack.observability.expView.fieldLabels.numberOfDevices",{defaultMessage:"Number of Devices"})},86:function(e,t,i){"use strict";i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return f}));var n=i(1),a=i.n(n),r=i(6),l=i(50),s=i.n(l),o=i(3),u=i(76),d=i(11),c=i(77);const p=(e,t={})=>s.a.parse(e,t);function f({seriesId:e,series:t}){var i,n;const{firstSeries:l,setSeries:s,reportType:f}=Object(u.f)(),b=Object(d.useUiSetting)("dateFormat"),y=null===(i=t.time)||void 0===i?void 0:i.from,m=null===(n=t.time)||void 0===n?void 0:n.to,{from:g,to:v}=l.time,x=p(null!=y?y:g),h=p(null!=m?m:v,{roundUp:!0}),T=()=>{const e=p(g);return p(v,{roundUp:!0}).diff(e,"millisecond")};return a.a.createElement(r.EuiDatePickerRange,{fullWidth:!0,isCustom:!0,startDateControl:a.a.createElement(r.EuiDatePicker,{fullWidth:!0,selected:x,onChange:i=>{if(f===c.m.KPI){const n=T(),a=i.toISOString(),r=i.add(n,"millisecond").toISOString();s(e,{...t,time:{from:a,to:r}})}else{const n=i.toISOString();s(e,{...t,time:{from:n,to:m}})}},startDate:x,endDate:h,isInvalid:x>h,"aria-label":o.i18n.translate("xpack.observability.expView.dateRanger.startDate",{defaultMessage:"Start date"}),dateFormat:b.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"right"}),endDateControl:a.a.createElement(r.EuiDatePicker,{fullWidth:!0,showIcon:!1,selected:h,onChange:i=>{if(f===c.m.KPI){const n=T(),a=i.toISOString(),r=i.subtract(n,"millisecond").toISOString();s(e,{...t,time:{from:r,to:a}})}else{const n=i.toISOString();s(e,{...t,time:{from:y,to:n}})}},startDate:x,endDate:h,isInvalid:x>h,"aria-label":o.i18n.translate("xpack.observability.expView.dateRanger.endDate",{defaultMessage:"End date"}),dateFormat:b.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"right"})})}},90:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"j",(function(){return s})),i.d(t,"k",(function(){return o})),i.d(t,"d",(function(){return u})),i.d(t,"m",(function(){return d})),i.d(t,"b",(function(){return c})),i.d(t,"o",(function(){return p})),i.d(t,"c",(function(){return f})),i.d(t,"n",(function(){return b})),i.d(t,"g",(function(){return y})),i.d(t,"h",(function(){return m})),i.d(t,"l",(function(){return g})),i.d(t,"i",(function(){return v})),i.d(t,"f",(function(){return x})),i.d(t,"e",(function(){return h}));var n=i(9),a=i(81),r=i(20);const l={from:"now-1h",to:"now"},s="Records",o="RecordsPercentage",u={"user_agent.name":a.c,"user_agent.version":a.d,"user_agent.os.name":a.K,"client.geo.country_name":a.z,"user_agent.device.name":a.m,"observer.geo.name":a.J,"service.name":a.U,"service.environment":a.q,[n.e]:a.y,[n.c]:a.r,[n.k]:a.Z,[n.d]:a.s,[n.b]:a.g,[r.b]:a.g,[r.c]:a.k,[r.g]:a.W,[r.f]:a.y,[r.e]:a.r,[r.d]:a.N,[n.m]:a.b,[n.l]:a.N,"monitor.id":a.E,"monitor.status":a.G,[r.a]:a.D,[r.h]:a.X,"agent.hostname":a.a,"host.hostname":a.t,"monitor.name":a.F,"monitor.type":a.H,"url.port":a.R,"url.full":a.cb,tags:a.Y,"performance.metric":a.B,"Business.KPI":a.v,"http.request.method":a.S,percentile:"Percentile",LABEL_FIELDS_FILTER:a.x,LABEL_FIELDS_BREAKDOWN:"Labels field"};a.P,a.w,a.i,a.l;let d,c;!function(e){e.KPI="kpi-over-time",e.DISTRIBUTION="data-distribution",e.CORE_WEB_VITAL="core-web-vitals",e.DEVICE_DISTRIBUTION="device-data-distribution"}(d||(d={})),function(e){e.SYNTHETICS="synthetics",e.UX="ux",e.MOBILE="mobile"}(c||(c={}));const p="USE_BREAK_DOWN_COLUMN",f="FILTER_RECORDS",b="TERMS_COLUMN",y="operation",m="percentile",g="REPORT_METRIC_FIELD",v=["99th","95th","90th","75th","50th"],x="LABEL_FIELDS_FILTER",h="LABEL_FIELDS_BREAKDOWN"},91:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return f})),i.d(t,"c",(function(){return b}));var n=i(1),a=i(0),r=i(99),l=i(76),s=i(110),o=i(78),u=i(39),d=i(28),c=i(77);const p=e=>Object.entries(null!=e?e:{}).map((([e,t])=>({field:e,values:t}))).filter((({values:e})=>!e.includes(u.a)));function f(e,t,i,n){const r=[];return e.forEach(((e,l)=>{const o=null==n?void 0:n[null==e?void 0:e.dataType];if(o&&!Object(a.isEmpty)(e.reportDefinitions)&&!e.hidden&&e.selectedMetricField){var u,d,f;const n=Object(s.a)({reportType:t,indexPattern:o,dataType:e.dataType}),a=(null!==(u=e.filters)&&void 0!==u?u:[]).concat(p(e.reportDefinitions)),b=`euiColorVis${l}`;r.push({filters:a,indexPattern:o,seriesConfig:n,time:e.time,name:e.name,breakdown:e.breakdown===c.e?void 0:e.breakdown,seriesType:e.seriesType,operationType:e.operationType,reportDefinitions:null!==(d=e.reportDefinitions)&&void 0!==d?d:{},selectedMetricField:e.selectedMetricField,color:null!==(f=e.color)&&void 0!==f?f:i.eui[b]})}})),r}const b=()=>{const{storage:e,allSeries:t,lastRefresh:i,reportType:s}=Object(l.f)(),{indexPatterns:u}=Object(o.b)(),c=Object(d.a)();return Object(n.useMemo)((()=>{var t;const n=Object(l.d)(null!==(t=e.get(l.c))&&void 0!==t?t:[]),s=e.get(l.e);if(Object(a.isEmpty)(u)||Object(a.isEmpty)(n)||!s)return null;const o=f(n,s,c,u);if(o.length<1)return null;return new r.a(o).getJSON(i)}),[u,s,e,c,i,t])}},92:function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return d}));var n=i(77),a=i(81),r=i(20),l=i(27);const s="summary.up",o="summary.down",u=e=>!!e&&[r.f,r.e,r.b,r.c,r.g,r.d].includes(e);function d({indexPattern:e}){return{reportType:n.m.KPI,defaultSeriesType:"bar_stacked",seriesTypes:[],xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:n.l,operationType:"median"}],hasOperationType:!1,filterFields:["observer.geo.name","monitor.type","tags"],breakdownFields:["observer.geo.name","monitor.type","monitor.name",r.h,n.h],baseFilters:[],palette:{type:"palette",name:"status"},definitionFields:[{field:"monitor.name",nested:r.h,singleSelection:!0},{field:"url.full",filters:Object(l.a)("summary.up",e)}],metricOptions:[{label:a.D,field:r.a,id:r.a,columnType:n.g},{field:s,id:s,label:a.bb,columnType:n.g},{field:o,id:o,label:a.p,columnType:n.g},{label:a.W,field:r.g,id:r.g,columnType:n.g,columnFilters:[p]},{label:a.y,field:r.f,id:r.f,columnType:n.g,columnFilters:c(r.f)},{label:a.r,field:r.e,id:r.e,columnType:n.g,columnFilters:c(r.e)},{label:a.k,field:r.c,id:r.c,columnType:n.g,columnFilters:c(r.c)},{label:a.N,field:r.d,id:r.d,columnType:n.g,columnFilters:c(r.d)},{label:a.g,field:r.b,id:r.b,columnType:n.g,columnFilters:c(r.b)}],labels:{...n.d,[s]:a.bb,[o]:a.p}}}const c=e=>[{language:"kuery",query:`synthetics.type: step/metrics and ${e}: *`}],p={language:"kuery",query:"synthetics.type: step/end"}},99:function(e,t,i){"use strict";i.d(t,"b",(function(){return f})),i.d(t,"a",(function(){return lens_attributes_LensAttributes}));var n=i(4),a=i.n(n),r=i(3),l=i(0),s=i(44);const o=e=>1===e.length?`${e.join(" or ")}`:`(${e.join(" or ")})`;var u=i(77),d=i(86);function c({label:e,layerId:t,columnFilter:i}){const n=`y-axis-column-${t}`;let a="count() / overall_sum(count())";i&&(a=`count(kql='${i}') / overall_sum(count(kql='${i}'))`);const r={label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:"Records",customLabel:!0,filter:{query:null!=i?i:"",language:"kuery"}};return{main:{label:e||"Percentage of records",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:a,isFormulaBroken:!1,format:{id:"percent",params:{decimals:0}}},references:[`${n}X4`]},supportingColumns:{[`${n}X0`]:r,[`${n}X1`]:r,[`${n}X2`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:`${n}X1`},references:[`${n}X1`],customLabel:!0},[`${n}X3`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"overall_sum",isBucketed:!1,scale:"ratio",references:[`${n}X2`],customLabel:!0},[`${n}X4`]:{label:"Part of count() / overall_sum(count())",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"divide",args:[`${n}X0`,`${n}X3`],location:{min:0,max:30},text:a}},references:[`${n}X0`,`${n}X3`],customLabel:!0}}}}function p(e){return{sourceField:e,dataType:"number",isBucketed:!1,scale:"ratio"}}const f=(e,t)=>{var i;let n,a,r,l;const s=null!==(i=e.metricOptions)&&void 0!==i?i:[];if(t&&s){const e=s.find((({field:e,id:i})=>e===t||i===t));n=null==e?void 0:e.columnType,a=null==e?void 0:e.columnFilters,r=null==e?void 0:e.timeScale,l=null==e?void 0:e.label}return{fieldName:t,columnType:n,columnFilters:a,timeScale:r,columnLabel:l}};class lens_attributes_LensAttributes{constructor(e){a()(this,"layers",void 0),a()(this,"visualization",void 0),a()(this,"layerConfigs",void 0),a()(this,"isMultiSeries",void 0),a()(this,"globalFilter",void 0),this.layers={},e.forEach((({seriesConfig:e,operationType:t})=>{t&&e.yAxisColumns.forEach((e=>{void 0!==typeof e.operationType&&(e.operationType=t)}))})),this.layerConfigs=e,this.isMultiSeries=e.length>1,this.globalFilter=this.getGlobalFilter(this.isMultiSeries),this.layers=this.getLayers(),this.visualization=this.getXyState()}getGlobalFilter(e){if(e)return;const t=this.layerConfigs[0].seriesConfig.query?` and ${this.layerConfigs[0].seriesConfig.query.query}`:"";return{query:`${this.getLayerFilters(this.layerConfigs[0],this.layerConfigs.length)}${t}`,language:"kuery"}}getBreakdownColumn({sourceField:e,layerId:t,labels:i,indexPattern:n}){const a=n.getFieldByName(e);return{sourceField:e,label:`Top values of ${i[e]}`,dataType:null==a?void 0:a.type,operationType:"terms",scale:"ordinal",isBucketed:!0,params:{orderBy:{type:"column",columnId:`y-axis-column-${t}`},size:10,orderDirection:"desc",otherBucket:!0,missingBucket:!1}}}getNumberRangeColumn(e,t,i){var n;return{sourceField:e,label:null!==(n=t.labels[e])&&void 0!==n?n:i,dataType:"number",operationType:"range",isBucketed:!0,scale:"interval",params:{type:"histogram",ranges:[{from:0,to:1e3,label:""}],maxBars:"auto"}}}getCardinalityColumn({sourceField:e,label:t,seriesConfig:i}){return this.getNumberOperationColumn({sourceField:e,operationType:"unique_count",label:t,seriesConfig:i})}getNumberColumn({seriesConfig:e,label:t,sourceField:i,columnType:n,columnFilter:a,operationType:r}){if("operation"===n||r){if("median"===r||"average"===r||"sum"===r||"unique_count"===r)return this.getNumberOperationColumn({sourceField:i,operationType:r,label:t,seriesConfig:e,columnFilter:a});if("last_value"===r)return this.getLastValueOperationColumn({sourceField:i,operationType:r,label:t,seriesConfig:e,columnFilter:a});if(null!=r&&r.includes("th"))return this.getPercentileNumberColumn(i,r,e)}return this.getNumberRangeColumn(i,e,t)}getLastValueOperationColumn({sourceField:e,label:t,seriesConfig:i,operationType:n,columnFilter:a}){return{...p(e),operationType:n,label:r.i18n.translate("xpack.observability.expView.columns.operation.label",{defaultMessage:"{operationType} of {sourceField}",values:{sourceField:t||i.labels[e],operationType:Object(l.capitalize)(n)}}),filter:a,params:{sortField:"@timestamp"}}}getNumberOperationColumn({sourceField:e,label:t,seriesConfig:i,operationType:n,columnFilter:a}){return{...p(e),label:r.i18n.translate("xpack.observability.expView.columns.operation.label",{defaultMessage:"{operationType} of {sourceField}",values:{sourceField:t||i.labels[e],operationType:Object(l.capitalize)(n)}}),filter:a,operationType:n}}getPercentileBreakdowns(e,t){const i=e.seriesConfig.yAxisColumns,{sourceField:n,label:a}=i[0],r={};for(let i=1;i<u.i.length;i++)r[`y-axis-column-${i}`]={...this.getColumnBasedOnType({sourceField:n,operationType:u.i[i],label:a,layerConfig:e,colIndex:i}),filter:{query:t||"",language:"kuery"}};return r}getPercentileNumberColumn(e,t,i){var n;return{...p(e),label:r.i18n.translate("xpack.observability.expView.columns.label",{defaultMessage:"{percentileValue} percentile of {sourceField}",values:{sourceField:null===(n=i.labels[e])||void 0===n?void 0:n.toLowerCase(),percentileValue:t}}),operationType:"percentile",params:{percentile:Number(t.split("th")[0])}}}getDateHistogramColumn(e){return{sourceField:e,dataType:"date",isBucketed:!0,label:"@timestamp",operationType:"date_histogram",params:{interval:"auto"},scale:"interval"}}getTermsColumn(e,t){return{operationType:"terms",sourceField:e,label:"Top values of "+t||!1,dataType:"string",isBucketed:!0,scale:"ordinal",params:{size:10,orderBy:{type:"alphabetical",fallback:!1},orderDirection:"desc"}}}getXAxis(e,t){const{xAxisColumn:i}=e.seriesConfig;return(null==i?void 0:i.sourceField)===u.o?this.getBreakdownColumn({layerId:t,indexPattern:e.indexPattern,sourceField:e.breakdown||e.seriesConfig.breakdownFields[0],labels:e.seriesConfig.labels}):this.getColumnBasedOnType({layerConfig:e,label:i.label,sourceField:i.sourceField})}getColumnBasedOnType({sourceField:e,label:t,layerConfig:i,operationType:n,colIndex:a}){const{breakdown:r,seriesConfig:l}=i,{fieldMeta:s,columnType:o,fieldName:d,columnLabel:c,timeScale:p,columnFilters:f}=this.getFieldMeta(e,i),{type:b}=null!=s?s:{};return o===u.n?this.getTermsColumn(d,c||t):d===u.j||o===u.c?this.getRecordsColumn(t||c,void 0!==a?null==f?void 0:f[a]:void 0,p):"date"===b?this.getDateHistogramColumn(d):"number"===b&&r===u.h?{...this.getPercentileNumberColumn(d,n||u.i[0],l),filter:void 0!==a?null==f?void 0:f[a]:void 0}:"number"===b?this.getNumberColumn({sourceField:d,columnType:o,columnFilter:null==f?void 0:f[0],operationType:n,label:c||t,seriesConfig:i.seriesConfig}):"unique_count"===n?this.getCardinalityColumn({sourceField:d,label:c||t,seriesConfig:i.seriesConfig}):this.getDateHistogramColumn(d)}getCustomFieldName({sourceField:e,layerConfig:t}){return f(t.seriesConfig,e)}getFieldMeta(e,t){if(e===u.l){const{fieldName:e,columnType:i,columnLabel:n,columnFilters:a,timeScale:r}=f(t.seriesConfig,t.selectedMetricField);return{fieldMeta:t.indexPattern.getFieldByName(e),fieldName:e,columnType:i,columnLabel:n,columnFilters:a,timeScale:r}}return{fieldMeta:t.indexPattern.getFieldByName(e),fieldName:e}}getMainYAxis(e,t,i){const{breakdown:n}=e,{sourceField:a,operationType:r,label:l}=e.seriesConfig.yAxisColumns[0];return a===u.k?c({label:l,layerId:t,columnFilter:i}).main:a!==u.j&&a?this.getColumnBasedOnType({sourceField:a,label:l,layerConfig:e,colIndex:0,operationType:n===u.h?u.i[0]:r}):this.getRecordsColumn(l)}getChildYAxises(e,t,i){const{breakdown:n}=e,a={},r=e.seriesConfig.yAxisColumns,{sourceField:l,label:s}=r[0];if(l===u.k&&t)return c({label:s,layerId:t,columnFilter:i}).supportingColumns;if(1===r.length&&n===u.h)return this.getPercentileBreakdowns(e,i);if(1===r.length)return a;for(let t=1;t<r.length;t++){const{sourceField:i,operationType:n,label:l}=r[t];a[`y-axis-column-${t}`]=this.getColumnBasedOnType({sourceField:i,operationType:n,label:l,layerConfig:e,colIndex:t})}return a}getRecordsColumn(e,t,i){return{dataType:"number",isBucketed:!1,label:e||"Count of records",operationType:"count",scale:"ratio",sourceField:u.j,filter:t,...i?{timeScale:i}:{}}}getLayerFilters(e,t){const{filters:i,time:n,seriesConfig:{baseFilters:a,reportType:r}}=e;let l="";r!==u.m.KPI&&t>1&&n&&(l+=`@timestamp >= ${n.from} and @timestamp <= ${n.to}`),null==a||a.forEach((e=>{var t,i,n;const a=e;if(null!==(t=a.query)&&void 0!==t&&t.match_phrase){const e=Object.keys(a.query.match_phrase)[0],t=`${e}: ${a.query.match_phrase[e]}`;l.length>0?l+=` and ${t}`:l+=t}if(null!==(i=a.query)&&void 0!==i&&null!==(n=i.bool)&&void 0!==n&&n.should){var r;const e=[];let t="";null===(r=a.query)||void 0===r||r.bool.should.forEach((i=>{i.match_phrase&&(t=Object.keys(i.match_phrase)[0],e.push(i.match_phrase[t]))}));const i=`${t}: (${e.join(" or ")})`;l.length>0?l+=` and ${i}`:l+=i}const o=e;if(Object(s.b)(o)){var u;const e=`${null===(u=o.query.exists)||void 0===u?void 0:u.field} : *`;l.length>0?l+=` and ${e}`:l+=e}}));const d=(e=>{let t="";return e.forEach((({field:e,values:i,notValues:n,wildcards:a,notWildcards:r})=>{const l=null==i?void 0:i.map((e=>`"${e}"`)),s=null==n?void 0:n.map((e=>`"${e}"`)),u=null==a?void 0:a.map((e=>`*${e}*`)),d=null==r?void 0:r.map((e=>`*${e}*`));l&&(null==l?void 0:l.length)>0&&(t.length>0&&(t+=" and "),t+=`${e}: ${o(l)}`),s&&(null==s?void 0:s.length)>0&&(t.length>0&&(t+=" and "),t+=`not (${e}: ${o(s)})`),u&&(null==u?void 0:u.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${o(u)})`),d&&(null==d?void 0:d.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${o(d)})`)})),t})(null!=i?i:[]);return l?d?`${d} and ${l}`:l:d}getTimeShift(e,t,i){if(0===i||e.seriesConfig.reportType!==u.m.KPI||!t.time)return null;const{time:{from:n}}=e,{time:{from:a}}=t,r=Object(d.b)(n),l=Object(d.b)(a),s=r&&l?Math.abs(r.diff(l,"days")):0;if(s>1)return s+"d";const o=r&&l?Math.abs(null==r?void 0:r.diff(l,"hours")):0;return 0===o?null:o+"h"}getLayers(){const e={},t=this.layerConfigs;return t.forEach(((i,n)=>{var a,r,l;const{breakdown:s,seriesConfig:o}=i,d=`layer${n}`,c=this.getLayerFilters(i,t.length),p=this.getTimeShift(this.layerConfigs[0],i,n),f=this.getMainYAxis(i,d,c),{sourceField:b}=o.xAxisColumn,y=p?`${f.label}(${p})`:f.label;let m=c||(null===(a=f.filter)||void 0===a?void 0:a.query);c&&null!==(r=f.filter)&&void 0!==r&&r.query&&(m=`${c} and ${f.filter.query}`),e[d]={columnOrder:[...s&&b!==u.o&&s!==u.h?[`breakdown-column-${d}`]:[],`x-axis-column-${d}`,`y-axis-column-${d}`,...Object.keys(this.getChildYAxises(i,d,c))],columns:{[`x-axis-column-${d}`]:this.getXAxis(i,d),[`y-axis-column-${d}`]:{...f,label:y,filter:{query:null!==(l=m)&&void 0!==l?l:"",language:"kuery"},...p?{timeShift:p}:{}},...s&&b!==u.o&&s!==u.h?{[`breakdown-column-${d}`]:this.getBreakdownColumn({layerId:d,sourceField:s,indexPattern:i.indexPattern,labels:i.seriesConfig.labels})}:{},...this.getChildYAxises(i,d,c)},incompleteColumns:{}}})),e}getXyState(){return{legend:{isVisible:!0,showSingleSeries:!0,position:"right"},valueLabels:"hide",fittingFunction:"Linear",curveType:"CURVE_MONOTONE_X",axisTitlesVisibilitySettings:{x:!0,yLeft:!this.isMultiSeries,yRight:!this.isMultiSeries},tickLabelsVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},gridlinesVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},preferredSeriesType:"line",layers:this.layerConfigs.map(((e,t)=>{var i,n;return{accessors:[`y-axis-column-layer${t}`,...Object.keys(this.getChildYAxises(e))],layerId:`layer${t}`,layerType:"data",seriesType:e.seriesType||e.seriesConfig.defaultSeriesType,palette:e.seriesConfig.palette,yConfig:e.seriesConfig.yConfig||[{forAccessor:`y-axis-column-layer${t}`,color:e.color,axisMode:(null===(i=e.indexPattern.fieldFormatMap[e.selectedMetricField])||void 0===i?void 0:i.id)===(null===(n=this.layerConfigs[0].indexPattern.fieldFormatMap[this.layerConfigs[0].selectedMetricField])||void 0===n?void 0:n.id)?"left":"right"}],xAccessor:`x-axis-column-layer${t}`,...e.breakdown&&e.breakdown!==u.h&&e.seriesConfig.xAxisColumn.sourceField!==u.o?{splitAccessor:`breakdown-column-layer${t}`}:{}}})),...this.layerConfigs[0].seriesConfig.yTitle?{yTitle:this.layerConfigs[0].seriesConfig.yTitle}:{}}}getJSON(e){const t=Array.from(new Set([...this.layerConfigs.map((({indexPattern:e})=>e.id))])),i=this.globalFilter||this.layerConfigs[0].seriesConfig.query;return{title:"Prefilled from exploratory view app",description:String(e),visualizationType:"lnsXY",references:[...t.map((e=>({id:e,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"}))),...this.layerConfigs.map((({indexPattern:e},t)=>{return{id:e.id,name:(i=`layer${t}`,`indexpattern-datasource-layer-${i}`),type:"index-pattern"};var i}))],state:{datasourceStates:{indexpattern:{layers:this.layers}},visualization:this.visualization,query:i||{query:"",language:"kuery"},filters:[]}}}}}}]);