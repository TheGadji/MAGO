/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.upgradeAssistant_bundle_jsonpfunction=window.upgradeAssistant_bundle_jsonpfunction||[]).push([[1],Array(33).concat([function(e,t,s){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),r=[];function o(e){for(var t=-1,s=0;s<r.length;s++)if(r[s].identifier===e){t=s;break}return t}function l(e,t){for(var s={},a=[],n=0;n<e.length;n++){var i=e[n],l=t.base?i[0]+t.base:i[0],u=s[l]||0,c="".concat(l," ").concat(u);s[l]=u+1;var d=o(c),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(r[d].references++,r[d].updater(p)):r.push({identifier:c,updater:b(p,t),references:1}),a.push(c)}return a}function u(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=s.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,s,a){var n=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var i=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function g(e,t,s){var a=s.css,n=s.media,i=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var x=null,j=0;function b(e,t){var s,a,n;if(t.singleton){var i=j++;s=x||(x=u(t)),a=p.bind(null,s,i,!1),n=p.bind(null,s,i,!0)}else s=u(t),a=g.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var n=o(s[a]);r[n].references--}for(var i=l(e,t),u=0;u<s.length;u++){var c=o(s[u]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}s=i}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",a=e[3];if(!a)return s;if(t&&"function"==typeof btoa){var n=(r=a,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),i=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[s].concat(i).concat([n]).join("\n")}var r,o,l;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(n[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);a&&n[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},function(e,t,s){e.exports=s(7)(2393)},function(e,t,s){e.exports=s(7)(2398)},function(e,t,s){e.exports=s(7)(2395)},function(e,t,s){e.exports=s(7)(2397)},function(e,t){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var a=new Uint8Array(16);e.exports=function(){return s(a),a}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},function(e,t){for(var s=[],a=0;a<256;++a)s[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,n=s;return[n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]]].join("")}},function(e,t,s){"use strict";function a(e){return e}function n(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=a,t.unsafeCoerce=a,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,s){return e(s,t)}},t.flow=function(e,t,s,a,n,i,r,o,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return a(s(t(e.apply(this,arguments))))};case 5:return function(){return n(a(s(t(e.apply(this,arguments)))))};case 6:return function(){return i(n(a(s(t(e.apply(this,arguments))))))};case 7:return function(){return r(i(n(a(s(t(e.apply(this,arguments)))))))};case 8:return function(){return o(r(i(n(a(s(t(e.apply(this,arguments))))))))};case 9:return function(){return l(o(r(i(n(a(s(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=n,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return e(t)}},t.pipe=function(e,t,s,a,n,i,r,o,l,u,c,d,p,g,x,j,b,f,m,h){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return a(s(t(e)));case 5:return n(a(s(t(e))));case 6:return i(n(a(s(t(e)))));case 7:return r(i(n(a(s(t(e))))));case 8:return o(r(i(n(a(s(t(e)))))));case 9:return l(o(r(i(n(a(s(t(e))))))));case 10:return u(l(o(r(i(n(a(s(t(e)))))))));case 11:return c(u(l(o(r(i(n(a(s(t(e))))))))));case 12:return d(c(u(l(o(r(i(n(a(s(t(e)))))))))));case 13:return p(d(c(u(l(o(r(i(n(a(s(t(e))))))))))));case 14:return g(p(d(c(u(l(o(r(i(n(a(s(t(e)))))))))))));case 15:return x(g(p(d(c(u(l(o(r(i(n(a(s(t(e))))))))))))));case 16:return j(x(g(p(d(c(u(l(o(r(i(n(a(s(t(e)))))))))))))));case 17:return b(j(x(g(p(d(c(u(l(o(r(i(n(a(s(t(e))))))))))))))));case 18:return f(b(j(x(g(p(d(c(u(l(o(r(i(n(a(s(t(e)))))))))))))))));case 19:return m(f(b(j(x(g(p(d(c(u(l(o(r(i(n(a(s(t(e))))))))))))))))));case 20:return h(m(f(b(j(x(g(p(d(c(u(l(o(r(i(n(a(s(t(e)))))))))))))))))))}},t.hole=n,t.bind_=function(e,t,s){var a;return Object.assign({},e,((a={})[t]=s,a))},t.bindTo_=function(e){return function(t){var s;return(s={})[e]=t,s}}},function(e,t,s){e.exports=s(7)(1075)},function(e,t,s){e.exports=s(7)(833)},function(e,t,s){"use strict";function a(e,t,s,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,a.prototype),i.expected=t,i.found=s,i.location=n,i.name="SyntaxError",i}function n(e,t,s){return s=s||" ",e.length>t?e:(t-=e.length,e+(s+=s.repeat(t)).slice(0,t))}!function(e,t){function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s}(a,Error),a.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var s,a=null;for(s=0;s<e.length;s++)if(e[s].source===this.location.source){a=e[s].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,r=this.location.source+":"+i.line+":"+i.column;if(a){var o=this.location.end,l=n("",i.line.toString().length),u=a[i.line-1],c=i.line===o.line?o.column:u.length+1;t+="\n --\x3e "+r+"\n"+l+" |\n"+i.line+" | "+u+"\n"+l+" | "+n("",i.column-1)+n("",c-i.column,"^")}else t+="\n at "+r}return t},a.buildMessage=function(e,t){var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function r(e){return s[e.type](e)}return"Expected "+function(e){var t,s,a=e.map(r);if(a.sort(),a.length>0){for(t=1,s=1;t<a.length;t++)a[t-1]!==a[t]&&(a[s]=a[t],s++);a.length=s}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:a,parse:function(e,t){var s,n={},i=(t=void 0!==t?t:{}).grammarSource,r={start:he,Literal:Fe},o=he,l=":",u="or",c="and",d="not",p='"',g="\\",x="<=",j=">=",b="@kuery-cursor@",f=/^[\\"]/,m=/^[^"]/,h=/^[\\():<>"*{}]/,v=/^[0-9a-f]/i,O=/^[ \t\r\n\xA0]/,y=pe("(",!1),E=pe(")",!1),k=pe(":",!1),C=pe("{",!1),S=pe("}",!1),T=xe("fieldName"),M=xe("value"),L=xe("OR"),w=pe("or",!0),I=xe("AND"),F=pe("and",!0),A=xe("NOT"),D=pe("not",!0),_=xe("literal"),R=pe('"',!1),P=pe("\\",!1),B=ge(["\\",'"'],!1,!1),N=ge(['"'],!0,!1),z={type:"any"},U=pe("*",!1),W=pe("\\t",!1),q=pe("\\r",!1),G=pe("\\n",!1),$=ge(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),K=pe("u",!1),Q=ge([["0","9"],["a","f"]],!1,!0),Y=pe("<=",!1),V=pe(">=",!1),H=pe("<",!1),J=pe(">",!1),Z=xe("whitespace"),X=ge([" ","\t","\r","\n"," "],!1,!1),ee=pe("@kuery-cursor@",!1),te=function(e,t){return t},se=function(e,t){return t},ae=function(e){if("cursor"===e.type)return e;!Ke&&"wildcard"===e.type&&Qe.wildcard.hasLeadingWildcard(e)&&function(e,t){throw t=void 0!==t?t:be(oe,re),function(e,t){return new a(e,null,null,t)}(e,t)}("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.");const t=Ve(!1);return s=>Ye("is",[s,e,t])},ne=function(){return Ge},ie=function(t,s,a){const{start:n,end:i}=be(oe,re);return{type:"cursor",start:n.offset,end:i.offset-s.length,prefix:t.join(""),suffix:a.join(""),text:e.substring(oe,re).replace(s,"")}},re=0,oe=0,le=[{line:1,column:1}],ue=0,ce=[],de=0;if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=r[t.startRule]}function pe(e,t){return{type:"literal",text:e,ignoreCase:t}}function ge(e,t,s){return{type:"class",parts:e,inverted:t,ignoreCase:s}}function xe(e){return{type:"other",description:e}}function je(t){var s,a=le[t];if(a)return a;for(s=t-1;!le[s];)s--;for(a={line:(a=le[s]).line,column:a.column};s<t;)10===e.charCodeAt(s)?(a.line++,a.column=1):a.column++,s++;return le[t]=a,a}function be(e,t){var s=je(e),a=je(t);return{source:i,start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:a.line,column:a.column}}}function fe(e){re<ue||(re>ue&&(ue=re,ce=[]),ce.push(e))}function me(e,t,s){return new a(a.buildMessage(e,t),e,t,s)}function he(){var e,t,s,a,i,r;for(e=re,t=[],s=We();s!==n;)t.push(s),s=We();return(s=ve())===n&&(s=null),(a=Pe())!==n?(oe=e,i=s,e="cursor"===(r=a).type?{...r,suggestionTypes:["conjunction"]}:null!==i?i:Qe.function.buildNode("is","*","*")):(re=e,e=n),e}function ve(){var e,t,s,a,i;if(e=re,(t=Oe())!==n){if(s=[],a=re,Le()!==n&&(i=Oe())!==n?(oe=a,a=te(0,i)):(re=a,a=n),a!==n)for(;a!==n;)s.push(a),a=re,Le()!==n&&(i=Oe())!==n?(oe=a,a=te(0,i)):(re=a,a=n);else s=n;s!==n?(oe=e,e=function(e,t){const s=[e,...t];return Ge&&s.find((e=>"cursor"===e.type))||Ye("or",s)}(t,s)):(re=e,e=n)}else re=e,e=n;return e===n&&(e=Oe()),e}function Oe(){var e,t,s,a,i;if(e=re,(t=ye())!==n){if(s=[],a=re,we()!==n&&(i=ye())!==n?(oe=a,a=te(0,i)):(re=a,a=n),a!==n)for(;a!==n;)s.push(a),a=re,we()!==n&&(i=ye())!==n?(oe=a,a=te(0,i)):(re=a,a=n);else s=n;s!==n?(oe=e,e=function(e,t){const s=[e,...t];return Ge&&s.find((e=>"cursor"===e.type))||Ye("and",s)}(t,s)):(re=e,e=n)}else re=e,e=n;return e===n&&(e=ye()),e}function ye(){var e,t,s;return e=re,Ie()!==n&&(t=Ee())!==n?(oe=e,e="cursor"===(s=t).type?s:Ye("not",[s])):(re=e,e=n),e===n&&(e=Ee()),e}function Ee(){var t,s,a,i,r,o,u,c;if(t=re,40===e.charCodeAt(re)?(s="(",re++):(s=n,0===de&&fe(y)),s!==n){for(a=[],i=We();i!==n;)a.push(i),i=We();(i=ve())!==n&&(r=Pe())!==n?(41===e.charCodeAt(re)?(o=")",re++):(o=n,0===de&&fe(E)),o!==n?(oe=t,u=i,t="cursor"===(c=r).type?{...c,suggestionTypes:["conjunction"]}:u):(re=t,t=n)):(re=t,t=n)}else re=t,t=n;return t===n&&(t=function(){var t,s,a,i,r,o,u,c,d,p;if(t=re,(s=ke())!==n){for(a=[],i=We();i!==n;)a.push(i),i=We();if(58===e.charCodeAt(re)?(i=":",re++):(i=n,0===de&&fe(k)),i!==n){for(r=[],o=We();o!==n;)r.push(o),o=We();if(123===e.charCodeAt(re)?(o="{",re++):(o=n,0===de&&fe(C)),o!==n){for(u=[],c=We();c!==n;)u.push(c),c=We();(c=ve())!==n&&(d=Pe())!==n?(125===e.charCodeAt(re)?(p="}",re++):(p=n,0===de&&fe(S)),p!==n?(oe=t,t=function(e,t,s){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===s.type?{...s,suggestionTypes:["conjunction"]}:Ye("nested",[e,t])}(s,c,d)):(re=t,t=n)):(re=t,t=n)}else re=t,t=n}else re=t,t=n}else re=t,t=n;t===n&&(t=function(){var t;t=function(){var t,s,a,i,r,o;if(t=re,(s=ke())!==n){for(a=[],i=We();i!==n;)a.push(i),i=We();if(i=function(){var t,s;t=re,e.substr(re,2)===x?(s=x,re+=2):(s=n,0===de&&fe(Y));s!==n&&(oe=t,s="lte");(t=s)===n&&(t=re,e.substr(re,2)===j?(s=j,re+=2):(s=n,0===de&&fe(V)),s!==n&&(oe=t,s="gte"),(t=s)===n&&(t=re,60===e.charCodeAt(re)?(s="<",re++):(s=n,0===de&&fe(H)),s!==n&&(oe=t,s="lt"),(t=s)===n&&(t=re,62===e.charCodeAt(re)?(s=">",re++):(s=n,0===de&&fe(J)),s!==n&&(oe=t,s="gt"),t=s)));return t}(),i!==n){for(r=[],o=We();o!==n;)r.push(o),o=We();(o=Fe())!==n?(oe=t,t=function(e,t,s){if("cursor"===s.type)return{...s,suggestionTypes:["conjunction"]};const a=Je(t,s);return Ye("range",[e,a])}(s,i,o)):(re=t,t=n)}else re=t,t=n}else re=t,t=n;return t}(),t===n&&(t=function(){var t,s,a,i,r,o;if(t=re,(s=ke())!==n){for(a=[],i=We();i!==n;)a.push(i),i=We();if(58===e.charCodeAt(re)?(i=l,re++):(i=n,0===de&&fe(k)),i!==n){for(r=[],o=We();o!==n;)r.push(o),o=We();(o=Ce())!==n?(oe=t,u=s,t="cursor"===(c=o).type?{...c,fieldName:u.value,suggestionTypes:["value","conjunction"]}:c(u)):(re=t,t=n)}else re=t,t=n}else re=t,t=n;var u,c;return t}(),t===n&&(t=function(){var e,t;e=re,(t=Me())!==n&&(oe=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Ve(null))}(t));return e=t}()));return t}());return t}()),t}function ke(){var e;return de++,e=Fe(),de--,e===n&&(n,0===de&&fe(T)),e}function Ce(){var t,s,a,i,r,o,l,u;if(t=re,40===e.charCodeAt(re)?(s="(",re++):(s=n,0===de&&fe(y)),s!==n){for(a=[],i=We();i!==n;)a.push(i),i=We();i=function(){var e,t,s,a,i;if(e=re,(t=Se())!==n){if(s=[],a=re,Le()!==n&&(i=Se())!==n?(oe=a,a=se(0,i)):(re=a,a=n),a!==n)for(;a!==n;)s.push(a),a=re,Le()!==n&&(i=Se())!==n?(oe=a,a=se(0,i)):(re=a,a=n);else s=n;s!==n?(oe=e,e=function(e,t){const s=[e,...t],a=Ge&&s.find((e=>"cursor"===e.type));return a?{...a,suggestionTypes:["value"]}:e=>Ye("or",s.map((t=>t(e))))}(t,s)):(re=e,e=n)}else re=e,e=n;e===n&&(e=Se());return e}(),i!==n&&(r=Pe())!==n?(41===e.charCodeAt(re)?(o=")",re++):(o=n,0===de&&fe(E)),o!==n?(oe=t,l=i,t="cursor"===(u=r).type?{...u,suggestionTypes:["conjunction"]}:l):(re=t,t=n)):(re=t,t=n)}else re=t,t=n;return t===n&&(t=Me()),t}function Se(){var e,t,s,a,i;if(e=re,(t=Te())!==n){if(s=[],a=re,we()!==n&&(i=Te())!==n?(oe=a,a=se(0,i)):(re=a,a=n),a!==n)for(;a!==n;)s.push(a),a=re,we()!==n&&(i=Te())!==n?(oe=a,a=se(0,i)):(re=a,a=n);else s=n;s!==n?(oe=e,e=function(e,t){const s=[e,...t],a=Ge&&s.find((e=>"cursor"===e.type));return a?{...a,suggestionTypes:["value"]}:e=>Ye("and",s.map((t=>t(e))))}(t,s)):(re=e,e=n)}else re=e,e=n;return e===n&&(e=Te()),e}function Te(){var e,t,s;return e=re,Ie()!==n&&(t=Ce())!==n?(oe=e,e="cursor"===(s=t).type?{...list,suggestionTypes:["value"]}:e=>Ye("not",[s(e)])):(re=e,e=n),e===n&&(e=Ce()),e}function Me(){var e,t;return de++,e=re,(t=Ae())!==n&&(oe=e,t=function(e){if("cursor"===e.type)return e;const t=Ve(!0);return s=>Ye("is",[s,e,t])}(t)),(e=t)===n&&(e=re,(t=_e())!==n&&(oe=e,t=ae(t)),e=t),de--,e===n&&(t=n,0===de&&fe(M)),e}function Le(){var t,s,a,i,r;if(de++,t=re,s=[],(a=We())!==n)for(;a!==n;)s.push(a),a=We();else s=n;if(s!==n)if("or"===e.substr(re,2).toLowerCase()?(a=e.substr(re,2),re+=2):(a=n,0===de&&fe(w)),a!==n){if(i=[],(r=We())!==n)for(;r!==n;)i.push(r),r=We();else i=n;i!==n?t=s=[s,a,i]:(re=t,t=n)}else re=t,t=n;else re=t,t=n;return de--,t===n&&(s=n,0===de&&fe(L)),t}function we(){var t,s,a,i,r;if(de++,t=re,s=[],(a=We())!==n)for(;a!==n;)s.push(a),a=We();else s=n;if(s!==n)if("and"===e.substr(re,3).toLowerCase()?(a=e.substr(re,3),re+=3):(a=n,0===de&&fe(F)),a!==n){if(i=[],(r=We())!==n)for(;r!==n;)i.push(r),r=We();else i=n;i!==n?t=s=[s,a,i]:(re=t,t=n)}else re=t,t=n;else re=t,t=n;return de--,t===n&&(s=n,0===de&&fe(I)),t}function Ie(){var t,s,a,i;if(de++,t=re,"not"===e.substr(re,3).toLowerCase()?(s=e.substr(re,3),re+=3):(s=n,0===de&&fe(D)),s!==n){if(a=[],(i=We())!==n)for(;i!==n;)a.push(i),i=We();else a=n;a!==n?t=s=[s,a]:(re=t,t=n)}else re=t,t=n;return de--,t===n&&(s=n,0===de&&fe(A)),t}function Fe(){var e;return de++,(e=Ae())===n&&(e=_e()),de--,e===n&&(n,0===de&&fe(_)),e}function Ae(){var t,s,a,i,r,o,l;if(t=re,oe=re,(s=(s=ne())?void 0:n)!==n)if(34===e.charCodeAt(re)?(a=p,re++):(a=n,0===de&&fe(R)),a!==n){for(i=[],r=De();r!==n;)i.push(r),r=De();if((r=qe())!==n){for(o=[],l=De();l!==n;)o.push(l),l=De();34===e.charCodeAt(re)?(l=p,re++):(l=n,0===de&&fe(R)),l!==n?(oe=t,t=ie(i,r,o)):(re=t,t=n)}else re=t,t=n}else re=t,t=n;else re=t,t=n;if(t===n)if(t=re,34===e.charCodeAt(re)?(s=p,re++):(s=n,0===de&&fe(R)),s!==n){for(a=[],i=De();i!==n;)a.push(i),i=De();34===e.charCodeAt(re)?(i=p,re++):(i=n,0===de&&fe(R)),i!==n?(oe=t,t=Ve(a.join(""))):(re=t,t=n)}else re=t,t=n;return t}function De(){var t,s,a;return(t=Be())===n&&(t=ze())===n&&(t=re,92===e.charCodeAt(re)?(s=g,re++):(s=n,0===de&&fe(P)),s!==n?(f.test(e.charAt(re))?(a=e.charAt(re),re++):(a=n,0===de&&fe(B)),a!==n?(oe=t,t=a):(re=t,t=n)):(re=t,t=n),t===n&&(t=re,s=re,de++,a=qe(),de--,a===n?s=void 0:(re=s,s=n),s!==n?(m.test(e.charAt(re))?(a=e.charAt(re),re++):(a=n,0===de&&fe(N)),a!==n?(oe=t,t=a):(re=t,t=n)):(re=t,t=n))),t}function _e(){var e,t,s,a,i,r;if(e=re,oe=re,(t=(t=ne())?void 0:n)!==n){for(s=[],a=Re();a!==n;)s.push(a),a=Re();if((a=qe())!==n){for(i=[],r=Re();r!==n;)i.push(r),r=Re();oe=e,e=ie(s,a,i)}else re=e,e=n}else re=e,e=n;if(e===n){if(e=re,t=[],(s=Re())!==n)for(;s!==n;)t.push(s),s=Re();else t=n;t!==n&&(oe=e,t=function(e){const t=e.join("").trim();return"null"===t?Ve(null):"true"===t?Ve(!0):"false"===t?Ve(!1):e.includes(Ze)?He(t):Ve(t)}(t)),e=t}return e}function Re(){var t,s,a,i,r;return(t=Be())===n&&(t=function(){var t,s,a;t=re,92===e.charCodeAt(re)?(s=g,re++):(s=n,0===de&&fe(P));s!==n&&(a=Ne())!==n?(oe=t,t=a):(re=t,t=n);return t}(),t===n&&(t=ze())===n&&(t=function(){var t,s,a;t=re,92===e.charCodeAt(re)?(s=g,re++):(s=n,0===de&&fe(P));s!==n?(e.substr(re,2).toLowerCase()===u?(a=e.substr(re,2),re+=2):(a=n,0===de&&fe(w)),a===n&&(e.substr(re,3).toLowerCase()===c?(a=e.substr(re,3),re+=3):(a=n,0===de&&fe(F)),a===n&&(e.substr(re,3).toLowerCase()===d?(a=e.substr(re,3),re+=3):(a=n,0===de&&fe(D)))),a!==n?(oe=t,t=a):(re=t,t=n)):(re=t,t=n);return t}(),t===n&&(t=function(){var t,s;t=re,42===e.charCodeAt(re)?(s="*",re++):(s=n,0===de&&fe(U));s!==n&&(oe=t,s=Ze);return t=s}(),t===n&&(t=re,s=re,de++,a=Ne(),de--,a===n?s=void 0:(re=s,s=n),s!==n?(a=re,de++,i=function(){var e;(e=Le())===n&&(e=we())===n&&(e=Ie());return e}(),de--,i===n?a=void 0:(re=a,a=n),a!==n?(i=re,de++,r=qe(),de--,r===n?i=void 0:(re=i,i=n),i!==n?(e.length>re?(r=e.charAt(re),re++):(r=n,0===de&&fe(z)),r!==n?(oe=t,t=r):(re=t,t=n)):(re=t,t=n)):(re=t,t=n)):(re=t,t=n))))),t}function Pe(){var e,t,s,a,i,r;if(e=re,oe=re,(t=(t=ne())?void 0:n)!==n){for(s=[],a=We();a!==n;)s.push(a),a=We();if((a=qe())!==n){for(i=[],r=We();r!==n;)i.push(r),r=We();oe=e,e=ie(s,a,i)}else re=e,e=n}else re=e,e=n;if(e===n)for(e=[],t=We();t!==n;)e.push(t),t=We();return e}function Be(){var t,s;return t=re,"\\t"===e.substr(re,2)?(s="\\t",re+=2):(s=n,0===de&&fe(W)),s!==n&&(oe=t,s="\t"),(t=s)===n&&(t=re,"\\r"===e.substr(re,2)?(s="\\r",re+=2):(s=n,0===de&&fe(q)),s!==n&&(oe=t,s="\r"),(t=s)===n&&(t=re,"\\n"===e.substr(re,2)?(s="\\n",re+=2):(s=n,0===de&&fe(G)),s!==n&&(oe=t,s="\n"),t=s)),t}function Ne(){var t;return h.test(e.charAt(re))?(t=e.charAt(re),re++):(t=n,0===de&&fe($)),t}function ze(){var t,s,a;return t=re,92===e.charCodeAt(re)?(s=g,re++):(s=n,0===de&&fe(P)),s!==n?(a=function(){var t,s,a,i,r,o,l,u;t=re,117===e.charCodeAt(re)?(s="u",re++):(s=n,0===de&&fe(K));s!==n?(a=re,i=re,(r=Ue())!==n&&(o=Ue())!==n&&(l=Ue())!==n&&(u=Ue())!==n?i=r=[r,o,l,u]:(re=i,i=n),(a=i!==n?e.substring(a,re):i)!==n?(oe=t,c=a,t=String.fromCharCode(parseInt(c,16))):(re=t,t=n)):(re=t,t=n);var c;return t}(),a!==n?(oe=t,t=a):(re=t,t=n)):(re=t,t=n),t}function Ue(){var t;return v.test(e.charAt(re))?(t=e.charAt(re),re++):(t=n,0===de&&fe(Q)),t}function We(){var t;return de++,O.test(e.charAt(re))?(t=e.charAt(re),re++):(t=n,0===de&&fe(X)),de--,t===n&&(n,0===de&&fe(Z)),t}function qe(){var t,s;return t=re,oe=re,(ne()?void 0:n)!==n?(e.substr(re,14)===b?(s=b,re+=14):(s=n,0===de&&fe(ee)),s!==n?(oe=t,t=$e):(re=t,t=n)):(re=t,t=n),t}const{parseCursor:Ge,cursorSymbol:$e,allowLeadingWildcards:Ke=!0,helpers:{nodeTypes:Qe}}=t,Ye=Qe.function.buildNodeWithArgumentNodes,Ve=Qe.literal.buildNode,He=Qe.wildcard.buildNode,Je=Qe.namedArg.buildNode,{wildcardSymbol:Ze}=Qe.wildcard;if((s=o())!==n&&re===e.length)return s;throw s!==n&&re<e.length&&fe({type:"end"}),me(ce,ue<e.length?e.charAt(ue):null,ue<e.length?be(ue,ue+1):be(ue,ue))}}},function(e,t,s){var a=s(46),n=s(47),i=n;i.v1=a,i.v4=n,e.exports=i},function(e,t,s){var a,n,i=s(39),r=s(40),o=0,l=0;e.exports=function(e,t,s){var u=t&&s||0,c=t||[],d=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:n;if(null==d||null==p){var g=i();null==d&&(d=a=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=n=16383&(g[6]<<8|g[7]))}var x=void 0!==e.msecs?e.msecs:(new Date).getTime(),j=void 0!==e.nsecs?e.nsecs:l+1,b=x-o+(j-l)/1e4;if(b<0&&void 0===e.clockseq&&(p=p+1&16383),(b<0||x>o)&&void 0===e.nsecs&&(j=0),j>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=x,l=j,n=p;var f=(1e4*(268435455&(x+=122192928e5))+j)%4294967296;c[u++]=f>>>24&255,c[u++]=f>>>16&255,c[u++]=f>>>8&255,c[u++]=255&f;var m=x/4294967296*1e4&268435455;c[u++]=m>>>8&255,c[u++]=255&m,c[u++]=m>>>24&15|16,c[u++]=m>>>16&255,c[u++]=p>>>8|128,c[u++]=255&p;for(var h=0;h<6;++h)c[u+h]=d[h];return t||r(c)}},function(e,t,s){var a=s(39),n=s(40);e.exports=function(e,t,s){var i=t&&s||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[i+o]=r[o];return t||n(r)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(49);case"v7light":return s(51);case"v8dark":return s(53);case"v8light":return s(55)}},function(e,t,s){var a=s(33),n=s(50);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(52);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(54);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(56);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgResolveStep{margin-bottom:24px}\n",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeable=t.pipe=void 0;var a=s(41);t.pipe=a.pipe;t.pipeable=function(e){var t={};if(function(e){return"function"==typeof e.map}(e)){t.map=function(t){return function(s){return e.map(s,t)}}}if(function(e){return"function"==typeof e.contramap}(e)){t.contramap=function(t){return function(s){return e.contramap(s,t)}}}if(function(e){return"function"==typeof e.mapWithIndex}(e)){t.mapWithIndex=function(t){return function(s){return e.mapWithIndex(s,t)}}}if(function(e){return"function"==typeof e.ap}(e)){t.ap=function(t){return function(s){return e.ap(s,t)}},t.apFirst=function(t){return function(s){return e.ap(e.map(s,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(s){return e.ap(e.map(s,(function(){return function(e){return e}})),t)}}}if(function(e){return"function"==typeof e.chain}(e)){t.chain=function(t){return function(s){return e.chain(s,t)}},t.chainFirst=function(t){return function(s){return e.chain(s,(function(s){return e.map(t(s),(function(){return s}))}))}},t.flatten=function(t){return e.chain(t,a.identity)}}if(function(e){return"function"==typeof e.bimap}(e)){t.bimap=function(t,s){return function(a){return e.bimap(a,t,s)}},t.mapLeft=function(t){return function(s){return e.mapLeft(s,t)}}}if(function(e){return"function"==typeof e.extend}(e)){t.extend=function(t){return function(s){return e.extend(s,t)}},t.duplicate=function(t){return e.extend(t,a.identity)}}if(function(e){return"function"==typeof e.reduce}(e)){t.reduce=function(t,s){return function(a){return e.reduce(a,t,s)}},t.foldMap=function(t){var s=e.foldMap(t);return function(e){return function(t){return s(t,e)}}},t.reduceRight=function(t,s){return function(a){return e.reduceRight(a,t,s)}}}if(function(e){return"function"==typeof e.reduceWithIndex}(e)){t.reduceWithIndex=function(t,s){return function(a){return e.reduceWithIndex(a,t,s)}},t.foldMapWithIndex=function(t){var s=e.foldMapWithIndex(t);return function(e){return function(t){return s(t,e)}}},t.reduceRightWithIndex=function(t,s){return function(a){return e.reduceRightWithIndex(a,t,s)}}}if(function(e){return"function"==typeof e.alt}(e)){t.alt=function(t){return function(s){return e.alt(s,t)}}}if(function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)){t.filter=function(t){return function(s){return e.filter(s,t)}},t.filterMap=function(t){return function(s){return e.filterMap(s,t)}},t.partition=function(t){return function(s){return e.partition(s,t)}},t.partitionMap=function(t){return function(s){return e.partitionMap(s,t)}}}if(function(e){return"function"==typeof e.filterWithIndex}(e)){t.filterWithIndex=function(t){return function(s){return e.filterWithIndex(s,t)}},t.filterMapWithIndex=function(t){return function(s){return e.filterMapWithIndex(s,t)}},t.partitionWithIndex=function(t){return function(s){return e.partitionWithIndex(s,t)}},t.partitionMapWithIndex=function(t){return function(s){return e.partitionMapWithIndex(s,t)}}}if(function(e){return"function"==typeof e.promap}(e)){t.promap=function(t,s){return function(a){return e.promap(a,t,s)}}}if(function(e){return"function"==typeof e.compose}(e)){t.compose=function(t){return function(s){return e.compose(s,t)}}}if(function(e){return"function"==typeof e.throwError}(e)){t.fromOption=function(t){return function(s){return"None"===s._tag?e.throwError(t()):e.of(s.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,s){return function(a){return t(a)?e.of(a):e.throwError(s(a))}},t.filterOrElse=function(t,s){return function(a){return e.chain(a,(function(a){return t(a)?e.of(a):e.throwError(s(a))}))}}}return t}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var a=s(59),n=s(41);function i(e,s){try{return t.right(e())}catch(e){return t.left(s(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(s){return null==s?t.left(e):t.right(s)}},t.tryCatch=i,t.parseJSON=function(e,t){return i((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return i((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(s){return"None"===s._tag?t.left(e()):t.right(s.value)}},t.fromPredicate=function(e,s){return function(a){return e(a)?t.right(a):t.left(s(a))}},t.fold=function(e,s){return function(a){return t.isLeft(a)?e(a.left):s(a.right)}},t.getOrElseW=function(e){return function(s){return t.isLeft(s)?e(s.left):s.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(s){return t.isLeft(s)?e(s.left):s}},t.filterOrElse=function(e,s){return t.chain((function(a){return e(a)?t.right(a):t.left(s(a))}))};var r=function(e,s){return n.pipe(e,t.map(s))},o=function(e,s){return n.pipe(e,t.ap(s))},l=function(e,s){return n.pipe(e,t.chain(s))},u=function(e,s,a){return n.pipe(e,t.reduce(s,a))},c=function(e){return function(s,a){var i=t.foldMap(e);return n.pipe(s,i(a))}},d=function(e,s,a){return n.pipe(e,t.reduceRight(s,a))},p=function(e){var s=t.traverse(e);return function(e,t){return n.pipe(e,s(t))}},g=function(e,s,a){return n.pipe(e,t.bimap(s,a))},x=function(e,s){return n.pipe(e,t.mapLeft(s))},j=function(e,s){return n.pipe(e,t.alt(s))},b=function(e,s){return n.pipe(e,t.extend(s))},f=function(e,s){return a.tailRec(s(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(s(e.right.left)):t.right(t.right(e.right.right))}))};function m(e){return{concat:function(s,a){return t.isLeft(s)?s:t.isLeft(a)?a:t.right(e.concat(s.right,a.right))}}}function h(e){var s=t.left(e.empty);return{URI:t.URI,_E:void 0,map:r,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?s:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:s}:{left:s,right:t.right(e.right.right)}},filter:function(e,a){return t.isLeft(e)||a(e.right)?e:s},filterMap:function(e,a){if(t.isLeft(e))return e;var n=a(e.right);return"None"===n._tag?s:t.right(n.value)},partition:function(e,a){return t.isLeft(e)?{left:e,right:e}:a(e.right)?{left:s,right:t.right(e.right)}:{left:t.right(e.right),right:s}},partitionMap:function(e,a){if(t.isLeft(e))return{left:e,right:e};var n=a(e.right);return t.isLeft(n)?{left:t.right(n.left),right:s}:{left:s,right:t.right(n.right)}}}}function v(e){return{URI:t.URI,_E:void 0,map:r,ap:function(s,a){return t.isLeft(s)?t.isLeft(a)?t.left(e.concat(s.left,a.left)):s:t.isLeft(a)?a:t.right(s.right(a.right))},of:t.of}}function O(e){return{URI:t.URI,_E:void 0,map:r,alt:function(s,a){if(t.isRight(s))return s;var n=a();return t.isLeft(n)?t.left(e.concat(s.left,n.left)):n}}}function y(e,s){return{concat:function(a,n){return t.isLeft(a)?t.isLeft(n)?t.left(e.concat(a.left,n.left)):a:t.isLeft(n)?n:t.right(s.concat(a.right,n.right))}}}t.map=function(e){return function(s){return t.isLeft(s)?s:t.right(e(s.right))}},t.bimap=function(e,s){return function(a){return t.isLeft(a)?t.left(e(a.left)):t.right(s(a.right))}},t.mapLeft=function(e){return function(s){return t.isLeft(s)?t.left(e(s.left)):s}},t.apW=function(e){return function(s){return t.isLeft(s)?s:t.isLeft(e)?e:t.right(s.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return n.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return n.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(s){return t.isLeft(s)?s:e(s.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(s){return n.pipe(s,t.chainW((function(s){return n.pipe(e(s),t.map((function(){return s})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(n.identity),t.alt=function(e){return function(s){return t.isLeft(s)?e():s}},t.extend=function(e){return function(s){return t.isLeft(s)?s:t.right(e(s))}},t.duplicate=t.extend(n.identity),t.reduce=function(e,s){return function(a){return t.isLeft(a)?e:s(e,a.right)}},t.foldMap=function(e){return function(s){return function(a){return t.isLeft(a)?e.empty:s(a.right)}}},t.reduceRight=function(e,s){return function(a){return t.isLeft(a)?e:s(a.right,e)}},t.traverse=function(e){return function(s){return function(a){return t.isLeft(a)?e.of(t.left(a.left)):e.map(s(a.right),t.right)}}},t.sequence=function(e){return function(s){return t.isLeft(s)?e.of(t.left(s.left)):e.map(s.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,s){return{show:function(a){return t.isLeft(a)?"left("+e.show(a.left)+")":"right("+s.show(a.right)+")"}}},t.getEq=function(e,s){return{equals:function(a,n){return a===n||(t.isLeft(a)?t.isLeft(n)&&e.equals(a.left,n.left):t.isRight(n)&&s.equals(a.right,n.right))}}},t.getSemigroup=function(e){return{concat:function(s,a){return t.isLeft(a)?s:t.isLeft(s)?a:t.right(e.concat(s.right,a.right))}}},t.getApplySemigroup=m,t.getApplyMonoid=function(e){return{concat:m(e).concat,empty:t.right(e.empty)}},t.getFilterable=h,t.getWitherable=function(e){var s=h(e);return{URI:t.URI,_E:void 0,map:r,compact:s.compact,separate:s.separate,filter:s.filter,filterMap:s.filterMap,partition:s.partition,partitionMap:s.partitionMap,traverse:p,sequence:t.sequence,reduce:u,foldMap:c,reduceRight:d,wither:function(e){var t=p(e);return function(a,n){return e.map(t(a,n),s.compact)}},wilt:function(e){var t=p(e);return function(a,n){return e.map(t(a,n),s.separate)}}}},t.getApplicativeValidation=v,t.getAltValidation=O,t.getValidation=function(e){var s=v(e),a=O(e);return{URI:t.URI,_E:void 0,map:r,of:t.of,chain:l,bimap:g,mapLeft:x,reduce:u,foldMap:c,reduceRight:d,extend:b,traverse:p,sequence:t.sequence,chainRec:f,throwError:t.throwError,ap:s.ap,alt:a.alt}},t.getValidationSemigroup=y,t.Functor={URI:t.URI,map:r},t.Applicative={URI:t.URI,map:r,ap:o,of:t.of},t.Monad={URI:t.URI,map:r,ap:o,of:t.of,chain:l},t.Foldable={URI:t.URI,reduce:u,foldMap:c,reduceRight:d},t.Traversable={URI:t.URI,map:r,reduce:u,foldMap:c,reduceRight:d,traverse:p,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:g,mapLeft:x},t.Alt={URI:t.URI,map:r,alt:j},t.Extend={URI:t.URI,map:r,extend:b},t.ChainRec={URI:t.URI,map:r,ap:o,chain:l,chainRec:f},t.MonadThrow={URI:t.URI,map:r,ap:o,of:t.of,chain:l,throwError:t.throwError},t.getValidationMonoid=function(e,s){return{concat:y(e,s).concat,empty:t.right(s.empty)}},t.either={URI:t.URI,map:r,of:t.of,ap:o,chain:l,reduce:u,foldMap:c,reduceRight:d,traverse:p,sequence:t.sequence,bimap:g,mapLeft:x,alt:j,extend:b,chainRec:f,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(s,a){return!t.isLeft(a)&&e.equals(s,a.right)}},t.exists=function(e){return function(s){return!t.isLeft(s)&&e(s.right)}},t.bindTo=function(e){return t.map(n.bindTo_(e))},t.bindW=function(e,s){return t.chainW((function(a){return n.pipe(s(a),t.map((function(t){return n.bind_(a,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,s){return n.flow(t.map((function(t){return function(s){return n.bind_(t,e,s)}})),t.apW(s))},t.apS=t.apSW},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var s=t(e);"Left"===s._tag;)s=t(s.left);return s.right}},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(61);case"v7light":return s(63);case"v8dark":return s(65);case"v8light":return s(67)}},function(e,t,s){var a=s(33),n=s(62);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#ff8585;background-color:#4d1f1f}.upgStepProgress__status--circle-complete{color:#97e8da;background-color:#26443f}.upgStepProgress__status--circle-paused{color:#ffd895;background-color:#4d3e25}.upgStepProgress__status--circle-cancelled{color:#ffd895;background-color:#4d3e25}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(64);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#bd271e;background-color:#f8e9e9}.upgStepProgress__status--circle-complete{color:#01776d;background-color:#e6f2f1}.upgStepProgress__status--circle-paused{color:#936400;background-color:#fef6e6}.upgStepProgress__status--circle-cancelled{color:#936400;background-color:#fef6e6}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(66);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#f98982;background-color:#4a201e}.upgStepProgress__status--circle-complete{color:#97e5e0;background-color:#264341}.upgStepProgress__status--circle-paused{color:#f5dc8d;background-color:#493f22}.upgStepProgress__status--circle-cancelled{color:#f5dc8d;background-color:#493f22}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(68);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgStepProgress__step{display:flex;align-items:center;margin-top:16px;margin-bottom:8px;line-height:16px}.upgStepProgress__status{width:16px;height:16px;margin-right:12px}.upgStepProgress__status--circle{text-align:center;border-radius:12px;line-height:14px}.upgStepProgress__status--circle-failed{color:#bd271e;background-color:#f8e9e9}.upgStepProgress__status--circle-complete{color:#007e77;background-color:#e6f9f7}.upgStepProgress__status--circle-paused{color:#8a6a0a;background-color:#fff9e8}.upgStepProgress__status--circle-cancelled{color:#8a6a0a;background-color:#fff9e8}.upgStepProgress__title--currentStep{font-weight:700}.upgStepProgress__content{display:block;margin-left:28px}\n",""]),e.exports=t},function(e,t,s){e.exports=s(7)(2384)},function(e,t,s){e.exports=s(7)(1070)},function(e,t,s){e.exports=s(7)(2391)},function(e,t,s){e.exports=s(7)(2389)},function(e,t,s){e.exports=s(7)(2401)},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(75);case"v7light":return s(77);case"v8dark":return s(79);case"v8light":return s(81)}},function(e,t,s){var a=s(33),n=s(76);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(78);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(80);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(82);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgToggleLoading>.upgLoadingItem{margin:6px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(84);case"v7light":return s(86);case"v8dark":return s(88);case"v8light":return s(90)}},function(e,t,s){var a=s(33),n=s(85);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(87);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(89);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){var a=s(33),n=s(91);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};a(n,i);e.exports=n.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".upgDeprecationIssuesPanel .euiCard__content{display:flex;flex-direction:column;justify-content:space-between}.upgDeprecationIssuesPanel__stat{height:60px;justify-content:space-between;flex-grow:1;flex-direction:column;display:flex}\n",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(22);t.default=function(e,t){var s=a.useRef((function(){}));a.useEffect((function(){s.current=e})),a.useEffect((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},function(e,t,s){"use strict";s.r(t),s.d(t,"mountManagementSection",(function(){return Xa}));var a={};s.r(a),s.d(a,"buildNode",(function(){return Gt})),s.d(a,"toElasticsearchQuery",(function(){return $t}));var n={};s.r(n),s.d(n,"wildcardSymbol",(function(){return Kt})),s.d(n,"buildNode",(function(){return Vt})),s.d(n,"test",(function(){return Ht})),s.d(n,"toElasticsearchQuery",(function(){return Jt})),s.d(n,"toQueryStringQuery",(function(){return Zt})),s.d(n,"hasLeadingWildcard",(function(){return Xt}));var i={};s.r(i),s.d(i,"buildNodeParams",(function(){return rs})),s.d(i,"toElasticsearchQuery",(function(){return os}));var r={};s.r(r),s.d(r,"buildNodeParams",(function(){return ls})),s.d(r,"toElasticsearchQuery",(function(){return us}));var o={};s.r(o),s.d(o,"buildNodeParams",(function(){return cs})),s.d(o,"toElasticsearchQuery",(function(){return ds}));var l={};s.r(l),s.d(l,"buildNodeParams",(function(){return ps})),s.d(l,"toElasticsearchQuery",(function(){return gs}));var u={};s.r(u),s.d(u,"buildNodeParams",(function(){return bs})),s.d(u,"toElasticsearchQuery",(function(){return fs}));var c={};s.r(c),s.d(c,"buildNodeParams",(function(){return hs})),s.d(c,"toElasticsearchQuery",(function(){return vs}));var d={};s.r(d),s.d(d,"buildNodeParams",(function(){return Os})),s.d(d,"toElasticsearchQuery",(function(){return ys}));var p={};s.r(p),s.d(p,"buildNodeParams",(function(){return Es})),s.d(p,"toElasticsearchQuery",(function(){return ks}));var g={};s.r(g),s.d(g,"buildNodeParams",(function(){return Cs})),s.d(g,"toElasticsearchQuery",(function(){return Ss}));var x={};s.r(x),s.d(x,"buildNode",(function(){return Ms})),s.d(x,"buildNodeWithArgumentNodes",(function(){return Ls})),s.d(x,"toElasticsearchQuery",(function(){return ws}));var j={};s.r(j),s.d(j,"buildNode",(function(){return Is})),s.d(j,"toElasticsearchQuery",(function(){return Fs}));var b=s(22),f=s.n(b),m=s(30),h=s(28),v=s(26),O=s(24),y=s(5),E=s(0),k=s(4),C=s(23);const S=Object(b.createContext)(void 0),T=({children:e,value:t})=>Object(C.jsx)(S.Provider,{value:t},e),M=()=>{const e=Object(b.useContext)(S);if(!e)throw new Error("useAppContext must be called from inside AppContext");return e};var L=s(45),w=s.n(L),I=s(3),F=s(27),A=s(6);const D=e=>I.i18n.translate("xpack.upgradeAssistant.noDeprecationsPrompt.description",{defaultMessage:"Your {deprecationType} configuration is up to date",values:{deprecationType:e}}),_=e=>Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.noDeprecationsPrompt.nextStepsDescription",defaultMessage:"Check the {overviewButton} for other Stack deprecations.",values:{overviewButton:Object(C.jsx)(O.EuiLink,{onClick:e},I.i18n.translate("xpack.upgradeAssistant.noDeprecationsPrompt.overviewLinkText",{defaultMessage:"Overview page"}))}}),R=({deprecationType:e,navigateToOverviewPage:t})=>Object(C.jsx)(O.EuiEmptyPrompt,{iconType:"check","data-test-subj":"noDeprecationsPrompt",title:Object(C.jsx)("h2",null,D(e)),body:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)("p",{"data-test-subj":"upgradeAssistantIssueSummary"},_(t)))}),P={critical:I.i18n.translate("xpack.upgradeAssistant.levelInfoTip.criticalLabel",{defaultMessage:"Critical issues must be resolved before you upgrade"}),warning:I.i18n.translate("xpack.upgradeAssistant.levelInfoTip.warningLabel",{defaultMessage:"Warning issues can be ignored at your discretion"})},B=({level:e})=>Object(C.jsx)(O.EuiIconTip,{content:P[e],position:"top",type:"iInCircle"}),N=e=>I.i18n.translate("xpack.upgradeAssistant.deprecationCount.criticalStatusLabel",{defaultMessage:"Critical: {count}",values:{count:e}}),z=e=>I.i18n.translate("xpack.upgradeAssistant.deprecationCount.warningStatusLabel",{defaultMessage:"Warning: {count}",values:{count:e}}),U=({totalCriticalDeprecations:e,totalWarningDeprecations:t})=>Object(C.jsx)(O.EuiFlexGroup,null,Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiHealth,{color:"danger","data-test-subj":"criticalDeprecationsCount"},N(e))),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(B,{level:"critical"})))),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiHealth,{color:"subdued","data-test-subj":"warningDeprecationsCount"},z(t))),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(B,{level:"warning"}))))),W={criticalBadgeLabel:I.i18n.translate("xpack.upgradeAssistant.deprecationBadge.criticalBadgeLabel",{defaultMessage:"Critical"}),resolvedBadgeLabel:I.i18n.translate("xpack.upgradeAssistant.deprecationBadge.resolvedBadgeLabel",{defaultMessage:"Resolved"}),warningBadgeLabel:I.i18n.translate("xpack.upgradeAssistant.deprecationBadge.warningBadgeLabel",{defaultMessage:"Warning"})},q=({isCritical:e,isResolved:t})=>t?Object(C.jsx)(O.EuiBadge,{color:"success","data-test-subj":"resolvedDeprecationBadge"},W.resolvedBadgeLabel):e?Object(C.jsx)(O.EuiBadge,{color:"danger","data-test-subj":"criticalDeprecationBadge"},W.criticalBadgeLabel):Object(C.jsx)(O.EuiBadge,{color:"default","data-test-subj":"warningDeprecationBadge"},W.warningBadgeLabel),G=({deprecationSource:e,message:t})=>Object(C.jsx)(O.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger","data-test-subj":"deprecationsPageLoadingError"},Object(C.jsx)(O.EuiEmptyPrompt,{iconType:"alert",title:Object(C.jsx)("h2",null,I.i18n.translate("xpack.upgradeAssistant.deprecationsPageLoadingError.title",{defaultMessage:"Could not retrieve {deprecationSource} deprecation issues",values:{deprecationSource:e}})),body:t})),$=({documentationUrl:e})=>Object(C.jsx)(O.EuiLink,{target:"_blank","data-test-subj":"documentationLink",href:e},I.i18n.translate("xpack.upgradeAssistant.deprecationFlyout.learnMoreLinkLabel",{defaultMessage:"Learn more"})),K={cluster_settings:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterDeprecationTypeLabel",{defaultMessage:"Cluster"}),index_settings:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexDeprecationTypeLabel",{defaultMessage:"Index"}),node_settings:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.nodeDeprecationTypeLabel",{defaultMessage:"Node"}),ml_settings:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlDeprecationTypeLabel",{defaultMessage:"Machine Learning"})},Q={initialPageSize:50,pageSizeOptions:[50,100,200]},Y={manualCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.manualCellLabel",{defaultMessage:"Manual"}),manualCellTooltipLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.manualCellTooltipLabel",{defaultMessage:"This issue needs to be resolved manually."}),automatedCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automatedCellLabel",{defaultMessage:"Automated"}),automationInProgressCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automationInProgressCellLabel",{defaultMessage:"Resolution in progress…"}),automationCompleteCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automationCompleteCellLabel",{defaultMessage:"Resolved"}),automationFailedCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automationFailedCellLabel",{defaultMessage:"Resolution failed"}),automatedCellTooltipLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.automatedCellTooltipLabel",{defaultMessage:"This issue can be resolved automatically."})},V=({deprecationId:e,isAutomated:t,deprecationResolutionState:s})=>{if(t){if((null==s?void 0:s.id)===e){const{resolveDeprecationStatus:e}=s;switch(e){case"in_progress":return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Y.automationInProgressCellLabel)));case"fail":return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Y.automationFailedCellLabel)));default:return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check",color:"success"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Y.automationCompleteCellLabel)))}}return Object(C.jsx)(O.EuiToolTip,{position:"top",content:Y.automatedCellTooltipLabel},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"resolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"indexSettings"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Y.automatedCellLabel))))}return Object(C.jsx)(O.EuiToolTip,{position:"top",content:Y.manualCellTooltipLabel,"data-test-subj":"resolutionStatusCell"},Object(C.jsx)(O.EuiText,{size:"s",color:"subdued"},Y.manualCellLabel))},H={refreshButtonLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.refreshButtonLabel",{defaultMessage:"Refresh"}),statusColumnTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.statusColumnTitle",{defaultMessage:"Status"}),issueColumnTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.issueColumnTitle",{defaultMessage:"Issue"}),typeColumnTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.typeColumnTitle",{defaultMessage:"Type"}),resolutionColumnTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.resolutionColumnTitle",{defaultMessage:"Resolution"}),configDeprecationTypeCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.configDeprecationTypeCellLabel",{defaultMessage:"Config"}),featureDeprecationTypeCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.featureDeprecationTypeCellLabel",{defaultMessage:"Feature"}),unknownDeprecationTypeCellLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.unknownDeprecationTypeCellLabel",{defaultMessage:"Uncategorized"}),typeFilterLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.typeFilterLabel",{defaultMessage:"Type"}),criticalFilterLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.criticalFilterLabel",{defaultMessage:"Critical"}),searchPlaceholderLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.table.searchPlaceholderLabel",{defaultMessage:"Filter"})},J=({deprecations:e,reload:t,toggleFlyout:s,deprecationResolutionState:a})=>{const n=[{field:"level",name:H.statusColumnTitle,width:"5%",truncateText:!0,sortable:!0,render:e=>Object(C.jsx)(q,{isCritical:"critical"===e})},{field:"title",width:"40%",name:H.issueColumnTitle,truncateText:!0,sortable:!0,render:(e,t)=>Object(C.jsx)(O.EuiLink,{onClick:()=>s(t),"data-test-subj":"deprecationDetailsLink"},e)},{field:"filterType",name:H.typeColumnTitle,width:"20%",truncateText:!0,sortable:!0,render:e=>{switch(e){case"config":return H.configDeprecationTypeCellLabel;case"feature":return H.featureDeprecationTypeCellLabel;default:return H.unknownDeprecationTypeCellLabel}}},{field:"correctiveActions",name:H.resolutionColumnTitle,width:"30%",truncateText:!0,sortable:!0,render:(e,t)=>Object(C.jsx)(V,{deprecationId:t.id,isAutomated:Boolean(null==e?void 0:e.api),deprecationResolutionState:a})}],i={filters:[{type:"field_value_toggle",name:H.criticalFilterLabel,field:"level",value:"critical"},{type:"field_value_selection",field:"filterType",name:H.typeFilterLabel,multiSelect:!1,options:[{value:"config",name:H.configDeprecationTypeCellLabel},{value:"feature",name:H.featureDeprecationTypeCellLabel},{value:"uncategorized",name:H.unknownDeprecationTypeCellLabel}]}],box:{incremental:!0,placeholder:H.searchPlaceholderLabel},toolsRight:[Object(C.jsx)(O.EuiButton,{iconType:"refresh",onClick:t,"data-test-subj":"refreshButton",key:"refreshButton"},H.refreshButtonLabel)]};return Object(C.jsx)(O.EuiInMemoryTable,{items:e||[],itemId:"name",columns:n,search:i,sorting:{sort:{field:"level",direction:"asc"}},pagination:Q,rowProps:()=>({"data-test-subj":"row"}),cellProps:(e,t)=>({"data-test-subj":`${((null==t?void 0:t.name)||"table").toLowerCase()}Cell`}),"data-test-subj":"kibanaDeprecationsTable",tableLayout:"auto"})};s(48);const Z={closeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.closeButtonLabel",{defaultMessage:"Close"}),quickResolveButtonLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveButtonLabel",{defaultMessage:"Quick resolve"}),retryQuickResolveButtonLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.retryQuickResolveButtonLabel",{defaultMessage:"Try again"}),resolvedButtonLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.resolvedButtonLabel",{defaultMessage:"Resolved"}),quickResolveInProgressButtonLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveInProgressButtonLabel",{defaultMessage:"Resolution in progress…"}),quickResolveCalloutTitle:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveCalloutTitle",defaultMessage:"Click {quickResolve} to fix this issue automatically.",values:{quickResolve:Object(C.jsx)("strong",null,I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveText",{defaultMessage:"Quick resolve"}))}}),quickResolveErrorTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.quickResolveErrorTitle",{defaultMessage:"Error resolving issue"}),manualFixTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.flyout.manualFixTitle",{defaultMessage:"How to fix"})},X=({deprecation:e,closeFlyout:t,resolveDeprecation:s,deprecationResolutionState:a})=>{const{documentationUrl:n,message:i,correctiveActions:r,title:o}=e,l=(null==a?void 0:a.id)===e.id&&"ok"===(null==a?void 0:a.resolveDeprecationStatus),u=Object(b.useCallback)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.i),s(e)}),[e,s]);return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutHeader,{hasBorder:!0},Object(C.jsx)(q,{isCritical:"critical"===e.level,isResolved:l}),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(C.jsx)("h2",{id:"kibanaDeprecationDetailsFlyoutTitle",className:"eui-textBreakWord"},o))),Object(C.jsx)(O.EuiFlyoutBody,null,"fail"===(null==a?void 0:a.resolveDeprecationStatus)&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:Z.quickResolveErrorTitle,color:"danger",iconType:"alert","data-test-subj":"quickResolveError"},a.resolveDeprecationError),Object(C.jsx)(O.EuiSpacer,null)),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",{className:"eui-textBreakWord"},i),n&&Object(C.jsx)("p",null,Object(C.jsx)($,{documentationUrl:n}))),Object(C.jsx)(O.EuiSpacer,null),!l&&Object(C.jsx)("div",{"data-test-subj":"resolveSection"},r.api&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:Z.quickResolveCalloutTitle,color:"primary",iconType:"iInCircle","data-test-subj":"quickResolveCallout"}),Object(C.jsx)(O.EuiSpacer,null)),r.manualSteps.length>0&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"manualStepsTitle"},Object(C.jsx)("h3",null,Z.manualFixTitle)),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiText,null,1===r.manualSteps.length?Object(C.jsx)("p",{"data-test-subj":"manualStep",className:"eui-textBreakWord"},r.manualSteps[0]):Object(C.jsx)("ol",{"data-test-subj":"manualStepsList"},r.manualSteps.map(((e,t)=>Object(C.jsx)("li",{"data-test-subj":"manualStepsListItem",key:`step-${t}`,className:"upgResolveStep eui-textBreakWord"},e)))))))),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{onClick:t,flush:"left"},Z.closeButtonLabel)),r.api&&!l&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{fill:!0,"data-test-subj":"resolveButton",onClick:u,isLoading:Boolean("in_progress"===(null==a?void 0:a.resolveDeprecationStatus))},(e=>"in_progress"===(null==e?void 0:e.resolveDeprecationStatus)?Z.quickResolveInProgressButtonLabel:"ok"===(null==e?void 0:e.resolveDeprecationStatus)?Z.resolvedButtonLabel:null!=e&&e.resolveDeprecationError?Z.retryQuickResolveButtonLabel:Z.quickResolveButtonLabel)(a))))))},{useGlobalFlyout:ee}=k.c,te={pageTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.pageTitle",{defaultMessage:"Kibana deprecation issues"}),pageDescription:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.pageDescription",{defaultMessage:"Resolve all critical issues before upgrading."}),docLinkText:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.docLinkText",{defaultMessage:"Documentation"}),deprecationLabel:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.deprecationLabel",{defaultMessage:"Kibana"}),isLoading:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.loadingText",{defaultMessage:"Loading deprecation issues…"}),kibanaDeprecationErrorTitle:I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.kibanaDeprecationErrorTitle",{defaultMessage:"List of deprecation issues might be incomplete"}),getKibanaDeprecationErrorDescription:e=>I.i18n.translate("xpack.upgradeAssistant.kibanaDeprecations.kibanaDeprecationErrorDescription",{defaultMessage:"Failed to get deprecation issues for {pluginCount, plural, one {this plugin} other {these plugins}}: {pluginIds}. Check the Kibana server logs for more information.",values:{pluginCount:e.length,pluginIds:e.join(", ")}})},se=Object(h.withRouter)((({history:e})=>{const[t,s]=Object(b.useState)(void 0),[a,n]=Object(b.useState)([]),[i,r]=Object(b.useState)(!1),[o,l]=Object(b.useState)(void 0),[u,c]=Object(b.useState)(void 0),[d,p]=Object(b.useState)(void 0),{services:{core:{deprecations:g},breadcrumbs:x}}=M(),{addContent:j,removeContent:m}=ee(),h=Object(b.useCallback)((async()=>{r(!0);try{const e=await g.getAllDeprecations(),t=[],a=[];e.forEach((e=>{var s;if("fetch_error"!==e.level)t.push({...e,id:w.a.v4(),filterType:null!==(s=e.deprecationType)&&void 0!==s?s:"uncategorized"});else{!1===a.includes(e.domainId)&&a.push(e.domainId)}})),s(t),n(a)}catch(e){l(e)}r(!1)}),[g]),v=Object(b.useMemo)((()=>(e=>{const t=[],s=[];return e.forEach((e=>{"critical"!==e.level?s.push(e):t.push(e)})),{criticalDeprecations:t.length,warningDeprecations:s.length}})(t||[])),[t]),y=e=>{c(e)},E=Object(b.useCallback)((()=>{y(),m("deprecationDetails")}),[m]),S=Object(b.useCallback)((async e=>{p({id:e.id,resolveDeprecationStatus:"in_progress"});const t=await g.resolveDeprecation(e);p({id:e.id,resolveDeprecationStatus:t.status,resolveDeprecationError:"fail"===t.status?t.reason:void 0}),E()}),[E,g]);return Object(b.useEffect)((()=>{u&&j({id:"deprecationDetails",Component:X,props:{deprecation:u,closeFlyout:E,resolveDeprecation:S,deprecationResolutionState:d&&u.id===d.id?d:void 0},flyoutProps:{onClose:E,"data-test-subj":"kibanaDeprecationDetails","aria-labelledby":"kibanaDeprecationDetailsFlyoutTitle"}})}),[j,E,d,u,S]),Object(b.useEffect)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.LOADED,A.h)}),[]),Object(b.useEffect)((()=>{x.setBreadcrumbs("kibanaDeprecations")}),[x]),Object(b.useEffect)((()=>{h()}),[g,h]),o?Object(C.jsx)(G,{deprecationSource:"Kibana"}):i?Object(C.jsx)(O.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(C.jsx)(k.e,null,te.isLoading)):0===(null==t?void 0:t.length)?Object(C.jsx)(O.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(C.jsx)(R,{deprecationType:te.deprecationLabel,navigateToOverviewPage:()=>e.push("/overview")})):Object(C.jsx)("div",{"data-test-subj":"kibanaDeprecations"},Object(C.jsx)(O.EuiPageHeader,{bottomBorder:!0,pageTitle:te.pageTitle,description:te.pageDescription},Object(C.jsx)(U,{totalCriticalDeprecations:v.criticalDeprecations,totalWarningDeprecations:v.warningDeprecations})),Object(C.jsx)(O.EuiSpacer,{size:"l"}),a.length>0&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:te.kibanaDeprecationErrorTitle,color:"warning",iconType:"alert","data-test-subj":"kibanaDeprecationErrors"},Object(C.jsx)("p",null,te.getKibanaDeprecationErrorDescription(a))),Object(C.jsx)(O.EuiSpacer,null)),Object(C.jsx)(J,{deprecations:t,reload:h,toggleFlyout:y,deprecationResolutionState:d}))})),ae={permissionsError:I.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.permissionsErrorMessage",{defaultMessage:"You are not authorized to view Elasticsearch deprecation issues."}),partiallyUpgradedWarning:I.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.partiallyUpgradedWarningMessage",{defaultMessage:"Upgrade Kibana to the same version as your Elasticsearch cluster. One or more nodes in the cluster is running a different version than Kibana."}),upgradedMessage:I.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.upgradedWarningMessage",{defaultMessage:"All Elasticsearch nodes have been upgraded."}),loadingError:I.i18n.translate("xpack.upgradeAssistant.esDeprecationErrors.loadingErrorMessage",{defaultMessage:"Could not retrieve Elasticsearch deprecation issues."})},ne=e=>{var t,s;return 403===e.statusCode?{code:"unauthorized_error",message:ae.permissionsError}:426===(null==e?void 0:e.statusCode)&&!1===(null===(t=e.attributes)||void 0===t?void 0:t.allNodesUpgraded)?{code:"partially_upgraded_error",message:ae.partiallyUpgradedWarning}:426===(null==e?void 0:e.statusCode)&&!0===(null===(s=e.attributes)||void 0===s?void 0:s.allNodesUpgraded)?{code:"upgraded_error",message:ae.upgradedMessage}:{code:"request_error",message:ae.loadingError}};var ie=s(25),re=s.n(ie);const oe={manualCellLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.defaultDeprecation.manualCellLabel",{defaultMessage:"Manual"}),manualCellTooltipLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.manualCellTooltipLabel",{defaultMessage:"This issue needs to be resolved manually."})},le=({resolutionTableCell:e,fieldName:t,deprecation:s,openFlyout:a})=>{var n,i,r;return"isCritical"===t?Object(C.jsx)(q,{isCritical:s.isCritical}):"message"===t?Object(C.jsx)(O.EuiLink,{"data-test-subj":`deprecation-${null!==(i=null===(r=s.correctiveAction)||void 0===r?void 0:r.type)&&void 0!==i?i:"default"}`,onClick:a},s.message):"type"===t?Object(C.jsx)(f.a.Fragment,null,K[s.type]):"correctiveAction"===t?e?Object(C.jsx)(f.a.Fragment,null,e):Object(C.jsx)(O.EuiToolTip,{position:"top",content:oe.manualCellTooltipLabel},Object(C.jsx)(O.EuiText,{size:"s",color:"subdued"},oe.manualCellLabel)):Object(C.jsx)(f.a.Fragment,null,null!==(n=s[t])&&void 0!==n?n:"")},ue=Object(b.createContext)(void 0),ce=()=>{const e=Object(b.useContext)(ue);if(void 0===e)throw new Error("useMlSnapshotContext must be used within a <MlSnapshotsStatusProvider />");return e},de=({api:e,snapshotId:t,jobId:s,mlUpgradeModeEnabled:a,children:n})=>{const{updateSnapshotStatus:i,snapshotState:r,upgradeSnapshot:o,deleteSnapshot:l}=(({jobId:e,snapshotId:t,api:s})=>{const[a,n]=Object(b.useState)(void 0),[i,r]=Object(b.useState)({status:"idle",jobId:e,snapshotId:t}),o=Object(b.useRef)(null),l=Object(b.useRef)(!1),u=Object(b.useCallback)((()=>{o.current&&(clearTimeout(o.current),o.current=null)}),[]),c=Object(b.useCallback)((async()=>{u();const{data:a,error:i}=await s.getMlSnapshotUpgradeStatus({jobId:e,snapshotId:t});if(i)return r({snapshotId:t,jobId:e,action:"upgrade",status:"error"}),void n(i);r({...a,action:"upgrade"}),"in_progress"===(null==a?void 0:a.status)&&(o.current=setTimeout(c,1e3))}),[s,u,e,t]),d=Object(b.useCallback)((async()=>{r({snapshotId:t,jobId:e,action:"upgrade",status:"in_progress"});const{data:a,error:i}=await s.upgradeMlSnapshot({jobId:e,snapshotId:t});if(i)return n(i),void r({snapshotId:t,jobId:e,action:"upgrade",status:"error"});r({...a,action:"upgrade"}),c()}),[s,e,t,c]),p=Object(b.useCallback)((async()=>{r({snapshotId:t,jobId:e,action:"delete",status:"in_progress"});const{error:a}=await s.deleteMlSnapshot({snapshotId:t,jobId:e});if(a)return n(a),void r({snapshotId:t,jobId:e,action:"delete",status:"error"});r({snapshotId:t,jobId:e,action:"delete",status:"complete"})}),[s,e,t]);return Object(b.useEffect)((()=>(l.current=!0,()=>{l.current=!1,u()})),[u]),{snapshotState:{...i,error:a},upgradeSnapshot:d,updateSnapshotStatus:c,deleteSnapshot:p}})({jobId:s,snapshotId:t,api:e});return Object(b.useEffect)((()=>{i()}),[i]),Object(C.jsx)(ue.Provider,{value:{snapshotState:r,upgradeSnapshot:o,deleteSnapshot:l,mlUpgradeModeEnabled:a}},n)},pe={upgradeInProgressText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeInProgressText",{defaultMessage:"Upgrade in progress…"}),deleteInProgressText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.deletingButtonLabel",{defaultMessage:"Deletion in progress…"}),upgradeCompleteText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeCompleteText",{defaultMessage:"Upgrade complete"}),deleteCompleteText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.deleteCompleteText",{defaultMessage:"Deletion complete"}),upgradeFailedText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeFailedText",{defaultMessage:"Upgrade failed"}),deleteFailedText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.deleteFailedText",{defaultMessage:"Deletion failed"}),resolutionText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.resolutionText",{defaultMessage:"Upgrade or delete snapshots"}),resolutionTooltipLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.resolutionTooltipLabel",{defaultMessage:"Resolve this issue by upgrading or deleting a job model snapshot. This issue can be resolved automatically."})},ge=()=>{const{snapshotState:e}=ce();return"in_progress"===e.status?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},"delete"===e.action?pe.deleteInProgressText:pe.upgradeInProgressText))):"complete"===e.status?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check",color:"success"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},"delete"===e.action?pe.deleteCompleteText:pe.upgradeCompleteText))):"error"===e.status?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},"delete"===e.action?pe.deleteFailedText:pe.upgradeFailedText))):Object(C.jsx)(O.EuiToolTip,{position:"top",content:pe.resolutionTooltipLabel},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"mlActionResolutionCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"indexSettings"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},pe.resolutionText))))},xe={upgradeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.upgradeButtonLabel",{defaultMessage:"Upgrade"}),upgradingButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.upgradingButtonLabel",{defaultMessage:"Upgrading…"}),retryUpgradeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.retryUpgradeButtonLabel",{defaultMessage:"Retry upgrade"}),closeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.closeButtonLabel",{defaultMessage:"Close"}),deleteButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.deleteButtonLabel",{defaultMessage:"Delete"}),deletingButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.deletingButtonLabel",{defaultMessage:"Deleting…"}),retryDeleteButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.retryDeleteButtonLabel",{defaultMessage:"Retry delete"}),flyoutTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.title",{defaultMessage:"Upgrade or delete model snapshot"}),deleteSnapshotErrorTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.deleteSnapshotErrorTitle",{defaultMessage:"Error deleting snapshot"}),upgradeSnapshotErrorTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.flyout.upgradeSnapshotErrorTitle",{defaultMessage:"Error upgrading snapshot"}),upgradeModeEnabledErrorTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeModeEnabledErrorTitle",{defaultMessage:"Machine Learning upgrade mode is enabled"}),upgradeModeEnabledErrorDescription:e=>Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeModeEnabledErrorDescription",defaultMessage:"No actions can be taken on Machine Learning snapshots while upgrade mode is enabled. {docsLink}.",values:{docsLink:Object(C.jsx)(O.EuiLink,{href:e,target:"_blank","data-test-subj":"setUpgradeModeDocsLink"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecations.mlSnapshots.upgradeModeEnabledDocsLink",defaultMessage:"Learn more"}))}})},je=({deprecation:e,closeFlyout:t,snapshotState:s,upgradeSnapshot:a,deleteSnapshot:n,mlUpgradeModeEnabled:i})=>{const{services:{core:{docLinks:r}}}=M(),o="complete"===s.status;return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutHeader,{hasBorder:!0},Object(C.jsx)(q,{isCritical:e.isCritical,isResolved:o}),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(C.jsx)("h2",{id:"mlSnapshotDetailsFlyoutTitle"},xe.flyoutTitle))),Object(C.jsx)(O.EuiFlyoutBody,null,s.error&&!o&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:"delete"===s.action?xe.deleteSnapshotErrorTitle:xe.upgradeSnapshotErrorTitle,color:"danger",iconType:"alert","data-test-subj":"resolveSnapshotError"},s.error.message),Object(C.jsx)(O.EuiSpacer,null)),i&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:xe.upgradeModeEnabledErrorTitle,color:"warning",iconType:"alert","data-test-subj":"mlUpgradeModeEnabledError"},Object(C.jsx)("p",null,xe.upgradeModeEnabledErrorDescription(r.links.ml.setUpgradeMode))),Object(C.jsx)(O.EuiSpacer,null)),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,e.details),Object(C.jsx)("p",null,Object(C.jsx)($,{documentationUrl:e.url})))),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{onClick:t,flush:"left"},xe.closeButtonLabel)),!o&&!i&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiFlexGroup,null,Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiButtonEmpty,{"data-test-subj":"deleteSnapshotButton",color:"danger",onClick:()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.j),n(),t()},isLoading:"delete"===s.action&&"in_progress"===s.status,isDisabled:"in_progress"===s.status},(e=>"delete"===e.action?e.error?xe.retryDeleteButtonLabel:"in_progress"===e.status?xe.deletingButtonLabel:xe.deleteButtonLabel:xe.deleteButtonLabel)(s))),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiButton,{fill:!0,onClick:()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.k),a(),t()},isLoading:"upgrade"===s.action&&"in_progress"===s.status,isDisabled:"in_progress"===s.status,"data-test-subj":"upgradeSnapshotButton"},(e=>"upgrade"===e.action?e.error?xe.retryUpgradeButtonLabel:"in_progress"===e.status?xe.upgradingButtonLabel:xe.upgradeButtonLabel:xe.upgradeButtonLabel)(s))))))))},{useGlobalFlyout:be}=k.c,fe=({rowFieldNames:e,deprecation:t})=>{const[s,a]=Object(b.useState)(!1),n=ce(),{addContent:i,removeContent:r}=be(),o=Object(b.useCallback)((()=>{a(!1),r("mlFlyout")}),[r]);return Object(b.useEffect)((()=>{s&&i({id:"mlFlyout",Component:je,props:{deprecation:t,closeFlyout:o,...n},flyoutProps:{onClose:o,className:"eui-textBreakWord","data-test-subj":"mlSnapshotDetails","aria-labelledby":"mlSnapshotDetailsFlyoutTitle"}})}),[n,i,s,t,o]),Object(C.jsx)(f.a.Fragment,null,e.map((e=>Object(C.jsx)(O.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`mlTableCell-${e}`},Object(C.jsx)(le,{fieldName:e,openFlyout:()=>a(!0),deprecation:t,resolutionTableCell:Object(C.jsx)(ge,null)})))))},me=e=>{const{services:{api:t}}=M();return Object(C.jsx)(de,{snapshotId:e.deprecation.correctiveAction.snapshotId,jobId:e.deprecation.correctiveAction.jobId,mlUpgradeModeEnabled:e.mlUpgradeModeEnabled,api:t},Object(C.jsx)(fe,e))},he={deleteInProgressText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.deletingButtonLabel",{defaultMessage:"Settings removal in progress…"}),deleteCompleteText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.deleteCompleteText",{defaultMessage:"Deprecated settings removed"}),deleteFailedText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.deleteFailedText",{defaultMessage:"Settings removal failed"}),resolutionText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.resolutionText",{defaultMessage:"Remove settings"}),resolutionTooltipLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.indexSettings.resolutionTooltipLabel",{defaultMessage:"Resolve this issue by removing settings from this index. This issue can be resolved automatically."})},ve=({status:e})=>{const{statusType:t}=e;return"in_progress"===t?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},he.deleteInProgressText))):"complete"===t?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check",color:"success"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},he.deleteCompleteText))):"error"===t?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},he.deleteFailedText))):Object(C.jsx)(O.EuiToolTip,{position:"top",content:he.resolutionTooltipLabel},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"indexSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"indexSettings"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},he.resolutionText))))},Oe={getFlyoutDescription:e=>I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.secondaryDescription",{defaultMessage:"Index: {indexName}",values:{indexName:e}}),removeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.removeButtonLabel",{defaultMessage:"Remove deprecated settings"}),retryRemoveButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.retryRemoveButtonLabel",{defaultMessage:"Retry removing deprecated settings"}),resolvedButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.resolvedButtonLabel",{defaultMessage:"Resolved"}),closeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.closeButtonLabel",{defaultMessage:"Close"}),getConfirmationText:e=>I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.description",{defaultMessage:"Remove the following deprecated index {indexSettingsCount, plural, one {setting} other {settings}}?",values:{indexSettingsCount:e}}),errorTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeSettingsFlyout.deleteErrorTitle",{defaultMessage:"Error deleting index settings"})},ye=({deprecation:e,closeFlyout:t,removeIndexSettings:s,status:a})=>{const{index:n,message:i,details:r,url:o,correctiveAction:l}=e,{statusType:u,details:c}=a,d=["idle","error"].includes(u),p=Object(b.useCallback)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.g),s(n,l.deprecatedSettings)}),[l,n,s]);return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutHeader,{hasBorder:!0},Object(C.jsx)(q,{isCritical:e.isCritical,isResolved:"complete"===u}),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(C.jsx)("h2",{id:"indexSettingsDetailsFlyoutTitle"},i)),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,Object(C.jsx)(O.EuiTextColor,{color:"subdued"},Oe.getFlyoutDescription(n))))),Object(C.jsx)(O.EuiFlyoutBody,null,"error"===u&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:Oe.errorTitle,color:"danger",iconType:"alert","data-test-subj":"deleteSettingsError"},c.message),Object(C.jsx)(O.EuiSpacer,null)),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,r),Object(C.jsx)("p",null,Object(C.jsx)($,{documentationUrl:o}))),d&&Object(C.jsx)("div",{"data-test-subj":"removeSettingsPrompt"},Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiTitle,{size:"xs"},Object(C.jsx)("h3",null,Oe.getConfirmationText(l.deprecatedSettings.length))),Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("ul",null,l.deprecatedSettings.map(((e,t)=>Object(C.jsx)("li",{key:`${e}-${t}`},Object(C.jsx)(O.EuiCode,null,e)))))))),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{onClick:t,flush:"left"},Oe.closeButtonLabel)),d&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{fill:!0,"data-test-subj":"deleteSettingsButton",color:"danger",onClick:p},"error"===u?Oe.retryRemoveButtonLabel:Oe.removeButtonLabel)))))},{useGlobalFlyout:Ee}=k.c,ke=({rowFieldNames:e,deprecation:t})=>{const[s,a]=Object(b.useState)(!1),[n,i]=Object(b.useState)({statusType:"idle"}),{services:{api:r}}=M(),{addContent:o,removeContent:l}=Ee(),u=Object(b.useCallback)((()=>{a(!1),l("indexSettingsFlyout")}),[l]),c=Object(b.useCallback)((async(e,t)=>{i({statusType:"in_progress"});const{error:s}=await r.updateIndexSettings(e,t);i({statusType:s?"error":"complete",details:null!=s?s:void 0}),u()}),[r,u]);return Object(b.useEffect)((()=>{s&&o({id:"indexSettingsFlyout",Component:ye,props:{closeFlyout:u,deprecation:t,removeIndexSettings:c,status:n},flyoutProps:{onClose:u,className:"eui-textBreakWord","data-test-subj":"indexSettingsDetails","aria-labelledby":"indexSettingsDetailsFlyoutTitle"}})}),[o,t,c,s,u,n]),Object(C.jsx)(f.a.Fragment,null,e.map((e=>Object(C.jsx)(O.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`indexSettingsTableCell-${e}`},Object(C.jsx)(le,{fieldName:e,openFlyout:()=>a(!0),deprecation:t,resolutionTableCell:Object(C.jsx)(ve,{status:n})})))))},Ce={getFlyoutDescription:e=>I.i18n.translate("xpack.upgradeAssistant.esDeprecations.deprecationDetailsFlyout.secondaryDescription",{defaultMessage:"Index: {indexName}",values:{indexName:e}}),closeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.deprecationDetailsFlyout.closeButtonLabel",{defaultMessage:"Close"})},Se=({deprecation:e,closeFlyout:t})=>{const{message:s,url:a,details:n,index:i}=e;return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutHeader,{hasBorder:!0},Object(C.jsx)(q,{isCritical:e.isCritical,isResolved:!1}),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(C.jsx)("h2",{id:"defaultDeprecationDetailsFlyoutTitle"},s)),i&&Object(C.jsx)(O.EuiText,{"data-test-subj":"flyoutDescription"},Object(C.jsx)("p",null,Object(C.jsx)(O.EuiTextColor,{color:"subdued"},Ce.getFlyoutDescription(i))))),Object(C.jsx)(O.EuiFlyoutBody,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",{className:"eui-textBreakWord"},n),Object(C.jsx)("p",null,Object(C.jsx)($,{documentationUrl:a})))),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{onClick:t,flush:"left"},Ce.closeButtonLabel)))))},{useGlobalFlyout:Te}=k.c,Me=({rowFieldNames:e,deprecation:t})=>{const[s,a]=Object(b.useState)(!1),{addContent:n,removeContent:i}=Te(),r=Object(b.useCallback)((()=>{a(!1),i("deprecationDetails")}),[i]);return Object(b.useEffect)((()=>{s&&n({id:"deprecationDetails",Component:Se,props:{deprecation:t,closeFlyout:r},flyoutProps:{onClose:r,className:"eui-textBreakWord","data-test-subj":"defaultDeprecationDetails","aria-labelledby":"defaultDeprecationDetailsFlyoutTitle"}})}),[n,r,t,s]),Object(C.jsx)(f.a.Fragment,null,e.map((e=>Object(C.jsx)(O.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`defaultTableCell-${e}`},Object(C.jsx)(le,{fieldName:e,deprecation:t,openFlyout:()=>a(!0)})))))};let Le,we;!function(e){e[e.created=0]="created",e[e.readonly=20]="readonly",e[e.newIndexCreated=30]="newIndexCreated",e[e.reindexStarted=40]="reindexStarted",e[e.reindexCompleted=50]="reindexCompleted",e[e.aliasCreated=60]="aliasCreated",e[e.originalIndexDeleted=70]="originalIndexDeleted",e[e.existingAliasesUpdated=80]="existingAliasesUpdated"}(Le||(Le={})),function(e){e[e.inProgress=0]="inProgress",e[e.completed=1]="completed",e[e.failed=2]="failed",e[e.paused=3]="paused",e[e.cancelled=4]="cancelled",e[e.fetchFailed=5]="fetchFailed"}(we||(we={}));s(57),s(58);const Ie=e=>e>E.k?`${E.k}+`:e.toString(),Fe=(e,t,s=!1)=>{let a=0;switch(t){case Le.created:a=0;break;case Le.readonly:a=5;break;case Le.newIndexCreated:a=10;break;case Le.reindexStarted:a=null!==e?10+Math.round(e*(s?75:80)):10;break;case Le.reindexCompleted:a=s?85:90;break;case Le.aliasCreated:a=s?90:95;break;case Le.originalIndexDeleted:a=s?95:100;break;case Le.existingAliasesUpdated:a=100}return`${a}%`};let Ae,De;!function(e){e[e.Loading=0]="Loading",e[e.Success=1]="Success",e[e.Error=2]="Error"}(Ae||(Ae={})),function(e){e[e.Requested=0]="Requested",e[e.Loading=1]="Loading",e[e.Success=2]="Success",e[e.Error=3]="Error"}(De||(De={}));const _e=(e,{reindexOp:t,warnings:s,hasRequiredPrivileges:a,meta:n})=>{const i={...null!=n?n:e.meta},r=e.meta.aliases.length>0?e.meta.aliases:n.aliases,o={...e,meta:{...i,aliases:r},loadingState:Ae.Success};if(s&&(o.reindexWarnings=s),void 0!==a&&(o.hasRequiredPrivileges=a),t){let s=!0;t.lastCompletedStep===Le.aliasCreated&&t.status!==we.completed&&(s=!1),s&&(o.lastCompletedStep=t.lastCompletedStep),o.status=t.status,o.reindexTaskPercComplete=t.reindexTaskPercComplete,o.errorMessage=t.errorMessage,e.cancelLoadingState!==De.Requested&&e.cancelLoadingState!==De.Loading||t.status!==we.cancelled?e.cancelLoadingState===De.Requested&&t.status===we.inProgress?o.cancelLoadingState=De.Loading:o.status===we.completed&&(o.status=we.inProgress):o.cancelLoadingState=De.Success}return o},Re=Object(b.createContext)(void 0),Pe=()=>{const e=Object(b.useContext)(Re);if(void 0===e)throw new Error("useReindexContext must be used within a <ReindexStatusProvider />");return e},Be=({api:e,indexName:t,children:s})=>{const{reindexState:a,startReindex:n,cancelReindex:i}=(({indexName:e,api:t})=>{const[s,a]=Object(b.useState)({loadingState:Ae.Loading,errorMessage:null,reindexTaskPercComplete:null,meta:{indexName:e,reindexName:"",aliases:[]}}),n=Object(b.useRef)(null),i=Object(b.useRef)(!1),r=Object(b.useCallback)((()=>{n.current&&(clearTimeout(n.current),n.current=null)}),[]),o=Object(b.useCallback)((()=>{const e=s.meta.aliases.length>0,t=()=>{i.current&&a((e=>({...e,status:we.completed,lastCompletedStep:Le.existingAliasesUpdated})))};setTimeout((()=>{i.current&&(a((t=>({...t,status:e?we.inProgress:we.completed,lastCompletedStep:Le.originalIndexDeleted}))),e&&setTimeout(t,1e3))}),1e3)}),[s.meta.aliases.length]),l=Object(b.useCallback)((async()=>{r();const{data:s,error:i}=await t.getReindexStatus(e);i?a((e=>({...e,loadingState:Ae.Error,errorMessage:i.message.toString(),status:we.fetchFailed}))):null!==s&&(a((e=>_e(e,s))),s.reindexOp&&s.reindexOp.status===we.inProgress?n.current=setTimeout(l,1e3):s.reindexOp&&s.reindexOp.status===we.completed&&o())}),[r,t,e,o]),u=Object(b.useCallback)((async()=>{a((e=>({...e,lastCompletedStep:e.status===we.paused?e.lastCompletedStep:void 0,status:we.inProgress,reindexTaskPercComplete:null,errorMessage:null,cancelLoadingState:void 0})));const{data:s,error:n}=await t.startReindexTask(e);n?a((e=>({...e,loadingState:Ae.Error,errorMessage:n.message.toString(),status:we.failed}))):(a((e=>_e(e,{reindexOp:s,meta:e.meta}))),l())}),[t,e,l]),c=Object(b.useCallback)((async()=>{a((e=>({...e,cancelLoadingState:De.Requested})));const{error:s}=await t.cancelReindexTask(e);s&&a((e=>({...e,cancelLoadingState:De.Error})))}),[t,e]);return Object(b.useEffect)((()=>{l()}),[l]),Object(b.useEffect)((()=>(i.current=!0,()=>{i.current=!1,r()})),[r]),{reindexState:s,startReindex:u,cancelReindex:c,updateStatus:l}})({indexName:t,api:e});return Object(C.jsx)(Re.Provider,{value:{reindexState:a,startReindex:n,cancelReindex:i}},s)},Ne={reindexLoadingStatusText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexLoadingStatusText",{defaultMessage:"Loading status…"}),reindexInProgressText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexInProgressText",{defaultMessage:"Reindexing in progress…"}),reindexCompleteText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexCompleteText",{defaultMessage:"Reindex complete"}),reindexFailedText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexFailedText",{defaultMessage:"Reindex failed"}),reindexFetchFailedText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexFetchFailedText",{defaultMessage:"Reindex status not available"}),reindexCanceledText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexCanceledText",{defaultMessage:"Reindex cancelled"}),reindexPausedText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.reindexPausedText",{defaultMessage:"Reindex paused"}),resolutionText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.resolutionLabel",{defaultMessage:"Reindex"}),resolutionTooltipLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.reindex.resolutionTooltipLabel",{defaultMessage:"Resolve this issue by reindexing this index. This issue can be resolved automatically."})},ze=()=>{const{reindexState:e}=Pe(),t=e.meta.aliases.length>0;if(e.loadingState===Ae.Loading)return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Ne.reindexLoadingStatusText)));switch(e.status){case we.inProgress:return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Ne.reindexInProgressText," ",Fe(e.reindexTaskPercComplete,e.lastCompletedStep,t))));case we.completed:return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check",color:"success"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Ne.reindexCompleteText)));case we.failed:return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Ne.reindexFailedText)));case we.fetchFailed:return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Ne.reindexFetchFailedText)));case we.paused:return Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Ne.reindexPausedText)))}return Object(C.jsx)(O.EuiToolTip,{position:"top",content:Ne.resolutionTooltipLabel},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"indexSettings"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},Ne.resolutionText))))};var Ue=s(42),We=s.n(Ue),qe=s(31),Ge=s.n(qe);s(60);const $e=({status:e,idx:t})=>{if("incomplete"===e)return Object(C.jsx)("span",{className:"upgStepProgress__status"},t+1,".");if("inProgress"===e)return Object(C.jsx)(O.EuiLoadingSpinner,{size:"m",className:"upgStepProgress__status"});if("complete"===e)return Object(C.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-complete"},Object(C.jsx)(O.EuiIcon,{type:"check",size:"s"}));if("paused"===e)return Object(C.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-paused"},Object(C.jsx)(O.EuiIcon,{type:"pause",size:"s"}));if("cancelled"===e)return Object(C.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-cancelled"},Object(C.jsx)(O.EuiIcon,{type:"cross",size:"s"}));if("failed"===e)return Object(C.jsx)("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-failed"},Object(C.jsx)(O.EuiIcon,{type:"cross",size:"s"}));throw new Error(`Unsupported status: ${e}`)},Ke=({title:e,status:t,children:s,idx:a})=>{const n=Ge()("upgStepProgress__title",{"upgStepProgress__title--currentStep":"inProgress"===t});return Object(C.jsx)(b.Fragment,null,Object(C.jsx)("div",{className:"upgStepProgress__step"},Object(C.jsx)($e,{status:t,idx:a}),Object(C.jsx)("div",{className:n},e)),s&&Object(C.jsx)("div",{className:"upgStepProgress__content"},s))},Qe=({steps:e})=>Object(C.jsx)("div",{className:"upgStepProgress__container"},e.map(((e,t)=>Object(C.jsx)(Ke,We()({key:t},e,{idx:t}))))),Ye=({errorMessage:e})=>Object(C.jsx)(O.EuiCallOut,{color:"danger",title:"There was an error"},Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,e))),Ve=()=>Object(C.jsx)(O.EuiCallOut,{color:"warning",title:"This step was paused due to a Kibana restart. Click 'Resume' below to continue."}),He=({reindexState:{lastCompletedStep:e,status:t,cancelLoadingState:s},cancelReindex:a})=>{if(t===we.cancelled)return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelledTitle",defaultMessage:"Reindexing cancelled."}));const n=t===we.inProgress&&(e===Le.newIndexCreated||e===Le.reindexStarted),i=t===we.inProgress&&e===Le.reindexStarted;let r;switch(s){case De.Requested:case De.Loading:r=Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancellingLabel",defaultMessage:"Cancelling…"});break;case De.Success:r=Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelledLabel",defaultMessage:"Cancelled"});break;case De.Error:r=Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.errorLabel",defaultMessage:"Could not cancel"});break;default:r=Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelLabel",defaultMessage:"Cancel"})}return Object(C.jsx)(O.EuiFlexGroup,{component:"span"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},n?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.reindexingDocumentsStepTitle",defaultMessage:"Reindexing documents."}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.reindexingDocumentsStepTitle",defaultMessage:"Reindex documents."})),i&&Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiLink,{"data-test-subj":"cancelReindexingDocumentsButton",onClick:a,disabled:void 0!==s},r)))},Je=Object.values(Le).sort(),Ze=(e,t,s)=>e===Le.readonly?s?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.readonlyStepTitle",defaultMessage:"Setting {indexName} index to read-only.",values:{indexName:Object(C.jsx)(O.EuiCode,null,t.indexName)}}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.readonlyStepTitle",defaultMessage:"Set {indexName} index to read-only.",values:{indexName:Object(C.jsx)(O.EuiCode,null,t.indexName)}}):e===Le.newIndexCreated?s?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.createIndexStepTitle",defaultMessage:"Creating {reindexName} index.",values:{reindexName:Object(C.jsx)(O.EuiCode,null,t.reindexName)}}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.createIndexStepTitle",defaultMessage:"Create {reindexName} index.",values:{reindexName:Object(C.jsx)(O.EuiCode,null,t.reindexName)}}):e===Le.aliasCreated?s?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.aliasCreatedStepTitle",defaultMessage:"Creating {indexName} alias for {reindexName} index.",values:{indexName:Object(C.jsx)(O.EuiCode,null,t.indexName),reindexName:Object(C.jsx)(O.EuiCode,null,t.reindexName)}}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.aliasCreatedStepTitle",defaultMessage:"Create {indexName} alias for {reindexName} index.",values:{indexName:Object(C.jsx)(O.EuiCode,null,t.indexName),reindexName:Object(C.jsx)(O.EuiCode,null,t.reindexName)}}):e===Le.originalIndexDeleted?s?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.originalIndexDeletedStepTitle",defaultMessage:"Deleting original {indexName} index.",values:{indexName:Object(C.jsx)(O.EuiCode,null,t.indexName)}}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.originalIndexDeletedStepTitle",defaultMessage:"Delete original {indexName} index.",values:{indexName:Object(C.jsx)(O.EuiCode,null,t.indexName)}}):e===Le.existingAliasesUpdated?s?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.inProgress.aliasesUpdatedStepTitle",defaultMessage:"Updating {existingAliases} aliases to point to {reindexName} index.",values:{existingAliases:Object(C.jsx)(O.EuiCode,null,`[${t.aliases.join(",")}]`),reindexName:Object(C.jsx)(O.EuiCode,null,t.reindexName)}}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.aliasesUpdatedStepTitle",defaultMessage:"Update {existingAliases} aliases to point to {reindexName} index.",values:{existingAliases:Object(C.jsx)(O.EuiCode,null,`[${t.aliases.join(",")}]`),reindexName:Object(C.jsx)(O.EuiCode,null,t.reindexName)}}):void 0,Xe=e=>{const{errorMessage:t,lastCompletedStep:s=-1,status:a,reindexTaskPercComplete:n,meta:i}=e.reindexState,r=e=>{const n=Je[Je.indexOf(e)-1];return a===we.failed&&s===n?{title:Ze(e,i),status:"failed",children:Object(C.jsx)(Ye,{errorMessage:t})}:a===we.paused&&s===n?{title:Ze(e,i),status:"paused",children:Object(C.jsx)(Ve,null)}:a===we.cancelled&&s===n?{title:Ze(e,i),status:"cancelled"}:void 0===a||s<n?{title:Ze(e,i),status:"incomplete"}:s===n?{title:Ze(e,i,!0),status:"inProgress"}:{title:Ze(e,i),status:"complete"}},o={title:Object(C.jsx)(He,e)};a!==we.failed||s!==Le.newIndexCreated&&s!==Le.reindexStarted?a!==we.paused||s!==Le.newIndexCreated&&s!==Le.reindexStarted?a!==we.cancelled||s!==Le.newIndexCreated&&s!==Le.reindexStarted?void 0===a||s<Le.newIndexCreated?o.status="incomplete":s===Le.newIndexCreated||s===Le.reindexStarted?o.status="inProgress":o.status="complete":o.status="cancelled":(o.status="paused",o.children=Object(C.jsx)(Ve,null)):(o.status="failed",o.children=Object(C.jsx)(Ye,{errorMessage:t}));const l=[r(Le.readonly),r(Le.newIndexCreated),o,r(Le.aliasCreated),r(Le.originalIndexDeleted)],u=i.aliases.length>0;return u&&l.push(r(Le.existingAliasesUpdated)),Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiTitle,{size:"xs","data-test-subj":"reindexChecklistTitle"},Object(C.jsx)("h3",null,a===we.inProgress?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingInProgressTitle",defaultMessage:"Reindexing in progress… {percents}",values:{percents:Fe(n,s,u)}}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklistTitle",defaultMessage:"Reindexing process"}))),Object(C.jsx)(Qe,{steps:l}))},et=({closeFlyout:e,reindexState:t,startReindex:s,cancelReindex:a})=>{const{services:{api:n,core:{docLinks:i}}}=M(),{loadingState:r,status:o,hasRequiredPrivileges:l}=t,u=r===Ae.Loading||o===we.inProgress,c=o===we.completed,d=o===we.fetchFailed,p=o===we.failed,{data:g}=n.useLoadNodeDiskSpace();return Object(C.jsx)(b.Fragment,null,Object(C.jsx)(O.EuiFlyoutBody,null,!1===l&&Object(C.jsx)(b.Fragment,null,Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiCallOut,{title:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.insufficientPrivilegeCallout.calloutTitle",defaultMessage:"You do not have sufficient privileges to reindex this index"}),color:"danger",iconType:"alert"})),g&&g.length>0&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{color:"warning",iconType:"alert","data-test-subj":"lowDiskSpaceCallout",title:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.lowDiskSpaceCalloutTitle",defaultMessage:"Nodes with low disk space"})},Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.lowDiskSpaceCalloutDescription",defaultMessage:"Disk usage has exceeded the low watermark, which may prevent reindexing. The following nodes are impacted:"}),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)("ul",null,g.map((({nodeName:e,available:t,nodeId:s})=>Object(C.jsx)("li",{key:s,"data-test-subj":"impactedNodeListItem"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.lowDiskSpaceUsedText",defaultMessage:"{nodeName} ({available} available)",values:{nodeName:e,available:t}}))))))),Object(C.jsx)(O.EuiSpacer,null)),(d||p)&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{color:"danger",iconType:"alert","data-test-subj":d?"fetchFailedCallout":"reindexingFailedCallout",title:d?Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.fetchFailedCalloutTitle",defaultMessage:"Reindex status not available"}):Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingFailedCalloutTitle",defaultMessage:"Reindexing error"})},t.errorMessage),Object(C.jsx)(O.EuiSpacer,null)),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexDescription",defaultMessage:"The index will be read-only during reindexing. You won't be able to add, update, or delete documents until reindexing is complete. If you need to reindex to a new cluster, use the reindex API. {docsLink}",values:{docsLink:Object(C.jsx)(O.EuiLink,{target:"_blank",href:i.links.upgradeAssistant.remoteReindex},I.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.learnMoreLinkLabel",{defaultMessage:"Learn more"}))}})),Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.backgroundResumeDetail",defaultMessage:"Reindexing is performed in the background. You can return to the Upgrade Assistant to view progress or resume reindexing after a Kibana restart."}))),Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(Xe,{reindexState:t,cancelReindex:a})),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.closeButtonLabel",defaultMessage:"Close"}))),!d&&!c&&l&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{fill:!0,color:o===we.paused?"warning":"primary",iconType:o===we.paused?"play":void 0,onClick:s,isLoading:u,disabled:u||!l,"data-test-subj":"startReindexingButton"},(e=>{switch(e){case we.failed:return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.tryAgainLabel",defaultMessage:"Try again"});case we.inProgress:return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.reindexingLabel",defaultMessage:"Reindexing…"});case we.paused:return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.resumeLabel",defaultMessage:"Resume reindexing"});case we.cancelled:return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.restartLabel",defaultMessage:"Restart reindexing"});default:return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.runReindexLabel",defaultMessage:"Start reindexing"})}})(o))))))},tt=({isChecked:e,warningId:t,label:s,onChange:a,description:n,documentationUrl:i})=>Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiCheckbox,{id:t,label:Object(C.jsx)("strong",null,s),checked:e,onChange:a})),void 0!==i&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLink,{href:i,target:"_blank",external:!1},Object(C.jsx)(O.EuiIconTip,{content:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.documentationLinkLabel",defaultMessage:"Documentation"}),position:"right",type:"help"})))),Object(C.jsx)(O.EuiSpacer,{size:"xs"}),n),Object(C.jsx)(O.EuiSpacer,null)),st={customTypeName:({isChecked:e,onChange:t,docLinks:s,id:a,meta:n})=>Object(C.jsx)(tt,{isChecked:e,onChange:t,warningId:a,label:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningTitle",defaultMessage:"Replace mapping type {mappingType} with {defaultType}",values:{mappingType:Object(C.jsx)(O.EuiCode,null,n.typeName),defaultType:Object(C.jsx)(O.EuiCode,null,"_doc")}}),description:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningDetail",defaultMessage:"Mapping types are no longer supported in Elastic 8.x. Ensure no application code or scripts rely on {mappingType}.",values:{mappingType:Object(C.jsx)(O.EuiCode,null,n.typeName)}}),documentationUrl:s.elasticsearch.typesRemoval}),indexSetting:({isChecked:e,onChange:t,docLinks:s,id:a,meta:n})=>Object(C.jsx)(tt,{isChecked:e,onChange:t,warningId:a,label:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.deprecatedIndexSettingsWarningTitle",defaultMessage:"Remove deprecated index settings"}),description:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.deprecatedIndexSettingsWarningDetail",defaultMessage:"The following deprecated index settings were detected:"}),Object(C.jsx)(O.EuiSpacer,{size:"xs"}),Object(C.jsx)("ul",null,n.deprecatedSettings.map(((e,t)=>Object(C.jsx)("li",{key:`${e}-${t}`},Object(C.jsx)(O.EuiCode,null,e)))))),documentationUrl:s.elasticsearch.indexModules}),replaceIndexWithAlias:({isChecked:e,onChange:t,docLinks:s,id:a,meta:n})=>Object(C.jsx)(tt,{isChecked:e,onChange:t,warningId:a,label:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.replaceIndexWithAliasWarningTitle",defaultMessage:"Replace {indexName} index with {reindexName} index and create {indexName} index alias",values:{indexName:Object(C.jsx)(O.EuiCode,null,null==n?void 0:n.indexName),reindexName:Object(C.jsx)(O.EuiCode,null,null==n?void 0:n.reindexName)}}),description:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.replaceIndexWithAliasWarningDetail",defaultMessage:"You can search {indexName} as before. To delete the data you'll have to delete {reindexName}",values:{indexName:Object(C.jsx)(O.EuiCode,null,null==n?void 0:n.indexName),reindexName:Object(C.jsx)(O.EuiCode,null,null==n?void 0:n.reindexName)}})})},at=e=>`reindexWarning-${e}`,nt=({warnings:e,hideWarningsStep:t,continueReindex:s,meta:a})=>{const{services:{core:{docLinks:n}}}=M(),{links:i}=n,[r,o]=Object(b.useState)(e.reduce(((e,t,s)=>(e[at(s)]=!1,e)),{})),l=Object.values(r).filter((e=>e)).length<e.length,u=e=>{const t=e.target.id;o((e=>({...e,[t]:!r[t]})))};return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutBody,null,e.length>0&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutTitle",defaultMessage:"This index requires destructive changes that cannot be reversed"}),color:"warning",iconType:"alert"},Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutDetail",defaultMessage:"Back up the index before continuing. To proceed with the reindex, accept each change."}))),Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiTitle,{size:"s"},Object(C.jsx)("h3",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.acceptChangesTitle",defaultMessage:"Accept changes"}))),Object(C.jsx)(O.EuiSpacer,null),e.map(((e,t)=>{const s=st[e.warningType];return Object(C.jsx)(s,{key:at(t),isChecked:r[at(t)],onChange:u,docLinks:i,id:at(t),meta:{...a,...e.meta}})})))),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{iconType:"arrowLeft",onClick:t,flush:"left"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.cancelButtonLabel",defaultMessage:"Back"}))),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{fill:!0,color:"primary",onClick:s,disabled:l},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.continueButtonLabel",defaultMessage:"Continue reindexing"}))))))},it=({reindexState:e,startReindex:t,cancelReindex:s,closeFlyout:a,deprecation:n})=>{var i;const{status:r,reindexWarnings:o}=e,{index:l}=n,[u,c]=Object(b.useState)(!1),d=Object(b.useCallback)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.p),t()}),[t]),p=Object(b.useCallback)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.q),s()}),[s]),g=u?Object(C.jsx)(nt,{warnings:null!==(i=e.reindexWarnings)&&void 0!==i?i:[],meta:e.meta,hideWarningsStep:()=>c(!1),continueReindex:()=>{c(!1),d()}}):Object(C.jsx)(et,{closeFlyout:a,startReindex:()=>{o&&o.length>0&&r!==we.inProgress&&r!==we.completed?c(!0):d()},reindexState:e,cancelReindex:p});return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutHeader,{hasBorder:!0},Object(C.jsx)(q,{isCritical:n.isCritical,isResolved:r===we.completed}),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(C.jsx)("h2",{id:"reindexDetailsFlyoutTitle"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.flyoutHeader",defaultMessage:"Reindex {index}",values:{index:l}})))),g)},{useGlobalFlyout:rt}=k.c,ot=({rowFieldNames:e,deprecation:t})=>{const[s,a]=Object(b.useState)(!1),n=Pe(),{addContent:i,removeContent:r}=rt(),o=Object(b.useCallback)((async()=>{r("reindexFlyout"),a(!1),A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.n)}),[r]);return Object(b.useEffect)((()=>{s&&i({id:"reindexFlyout",Component:it,props:{deprecation:t,closeFlyout:o,...n},flyoutProps:{onClose:o,className:"eui-textBreakWord","data-test-subj":"reindexDetails","aria-labelledby":"reindexDetailsFlyoutTitle"}})}),[i,t,s,n,o]),Object(b.useEffect)((()=>{s&&A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.o)}),[s]),Object(C.jsx)(f.a.Fragment,null,e.map((e=>Object(C.jsx)(O.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`reindexTableCell-${e}`},Object(C.jsx)(le,{fieldName:e,openFlyout:()=>a(!0),deprecation:t,resolutionTableCell:Object(C.jsx)(ze,null)})))))},lt=e=>{const{services:{api:t}}=M();return Object(C.jsx)(Be,{indexName:e.deprecation.index,api:t},Object(C.jsx)(ot,e))},ut={deleteInProgressText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterSettings.deletingButtonLabel",{defaultMessage:"Settings removal in progress…"}),deleteCompleteText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterSettings.deleteCompleteText",{defaultMessage:"Deprecated settings removed"}),deleteFailedText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterSettings.deleteFailedText",{defaultMessage:"Settings removal failed"}),resolutionText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterSettings.resolutionText",{defaultMessage:"Remove settings"}),resolutionTooltipLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.clusterSettings.resolutionTooltipLabel",{defaultMessage:"Resolve this issue by removing settings from this cluster. This issue can be resolved automatically."})},ct=({status:e})=>{const{statusType:t}=e;return"in_progress"===t?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"clusterSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},ut.deleteInProgressText))):"complete"===t?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"clusterSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check",color:"success"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},ut.deleteCompleteText))):"error"===t?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"clusterSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},ut.deleteFailedText))):Object(C.jsx)(O.EuiToolTip,{position:"top",content:ut.resolutionTooltipLabel},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":"clusterSettingsResolutionStatusCell"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"indexSettings"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{size:"s"},ut.resolutionText))))},dt={removeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeClusterSettingsFlyout.removeButtonLabel",{defaultMessage:"Remove deprecated settings"}),retryRemoveButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeClusterSettingsFlyout.retryRemoveButtonLabel",{defaultMessage:"Retry removing deprecated settings"}),resolvedButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeClusterSettingsFlyout.resolvedButtonLabel",{defaultMessage:"Resolved"}),closeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeClusterSettingsFlyout.closeButtonLabel",{defaultMessage:"Close"}),getConfirmationText:e=>I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeClusterSettingsFlyout.description",{defaultMessage:"Remove the following deprecated cluster {clusterSettingsCount, plural, one {setting} other {settings}}?",values:{clusterSettingsCount:e}}),errorTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.removeClusterSettingsFlyout.deleteErrorTitle",{defaultMessage:"Error deleting cluster settings"})},pt=({deprecation:e,closeFlyout:t,removeClusterSettings:s,status:a})=>{const{message:n,details:i,url:r,correctiveAction:o}=e,{statusType:l,details:u}=a,c=["idle","error"].includes(l),d=Object(b.useCallback)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.c),s(o.deprecatedSettings)}),[o,s]);return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutHeader,{hasBorder:!0},Object(C.jsx)(q,{isCritical:e.isCritical,isResolved:"complete"===l}),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(C.jsx)("h2",{id:"removeClusterSettingsDetailsFlyoutTitle"},n))),Object(C.jsx)(O.EuiFlyoutBody,null,"error"===l&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:dt.errorTitle,color:"danger",iconType:"alert","data-test-subj":"deleteClusterSettingsError"},u.message),Object(C.jsx)(O.EuiSpacer,null)),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,i),Object(C.jsx)("p",null,Object(C.jsx)($,{documentationUrl:r}))),c&&Object(C.jsx)("div",{"data-test-subj":"removeClusterSettingsPrompt"},Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiTitle,{size:"xs"},Object(C.jsx)("h3",null,dt.getConfirmationText(o.deprecatedSettings.length))),Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("ul",null,o.deprecatedSettings.map((e=>Object(C.jsx)("li",{key:e},Object(C.jsx)(O.EuiCode,null,e)))))))),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{onClick:t,flush:"left"},dt.closeButtonLabel)),c&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{fill:!0,"data-test-subj":"deleteClusterSettingsButton",color:"danger",onClick:d},"error"===l?dt.retryRemoveButtonLabel:dt.removeButtonLabel)))))},{useGlobalFlyout:gt}=k.c,xt=({rowFieldNames:e,deprecation:t})=>{const[s,a]=Object(b.useState)(!1),[n,i]=Object(b.useState)({statusType:"idle"}),{services:{api:r}}=M(),{addContent:o,removeContent:l}=gt(),u=Object(b.useCallback)((()=>{a(!1),l("clusterSettingsFlyout")}),[l]),c=Object(b.useCallback)((async e=>{i({statusType:"in_progress"});const{error:t}=await r.updateClusterSettings(e);i({statusType:t?"error":"complete",details:null!=t?t:void 0}),u()}),[r,u]);return Object(b.useEffect)((()=>{s&&o({id:"clusterSettingsFlyout",Component:pt,props:{closeFlyout:u,deprecation:t,removeClusterSettings:c,status:n},flyoutProps:{onClose:u,className:"eui-textBreakWord","data-test-subj":"clusterSettingsDetails","aria-labelledby":"removeClusterSettingsDetailsFlyoutTitle"}})}),[o,t,c,s,u,n]),Object(C.jsx)(f.a.Fragment,null,e.map((e=>Object(C.jsx)(O.EuiTableRowCell,{key:e,truncateText:!1,"data-test-subj":`clusterSettingsTableCell-${e}`},Object(C.jsx)(le,{fieldName:e,openFlyout:()=>a(!0),deprecation:t,resolutionTableCell:Object(C.jsx)(ct,{status:n})})))))},jt={refreshButtonLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.refreshButtonLabel",{defaultMessage:"Refresh"}),noDeprecationsMessage:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.noDeprecationsMessage",{defaultMessage:"No Elasticsearch deprecation issues found"}),typeFilterLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.typeFilterLabel",{defaultMessage:"Type"}),criticalFilterLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.criticalFilterLabel",{defaultMessage:"Critical"}),searchPlaceholderLabel:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.searchPlaceholderLabel",{defaultMessage:"Filter"})},bt={isCritical:{label:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.statusColumnTitle",{defaultMessage:"Status"}),width:"8px"},message:{label:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.issueColumnTitle",{defaultMessage:"Issue"}),width:"36px"},type:{label:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.typeColumnTitle",{defaultMessage:"Type"}),width:"10px"},index:{label:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.nameColumnTitle",{defaultMessage:"Name"}),width:"24px"},correctiveAction:{label:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.table.resolutionColumnTitle",{defaultMessage:"Resolution"}),width:"24px"}},ft=Object.keys(bt),mt=Q.pageSizeOptions,ht=(e,t)=>{const{isSortAscending:s,sortField:a}=t,n=Object(ie.sortBy)(e,[e=>"isCritical"===a?!0!==e.isCritical:e[a]]);return s?n:n.reverse()},vt=({deprecations:e=[],reload:t})=>{const{services:{api:s}}=M(),{data:a}=s.useLoadMlUpgradeMode(),n=!(null==a||!a.mlUpgradeModeEnabled),[i,r]=Object(b.useState)({isSortAscending:!0,sortField:"isCritical"}),[o,l]=Object(b.useState)(Q.initialPageSize),[u,c]=Object(b.useState)(0),[d,p]=Object(b.useState)(O.EuiSearchBar.Query.MATCH_ALL),[g,x]=Object(b.useState)(void 0),[j,m]=Object(b.useState)(ht(e,i)),h=Object(b.useMemo)((()=>new O.Pager(e.length,o,u)),[u,e,o]),v=Object(b.useMemo)((()=>j.slice(h.firstItemIndex,h.lastItemIndex+1)),[j,h]),y=Object(b.useCallback)((e=>{const t={isSortAscending:i.sortField!==e||!i.isSortAscending,sortField:e};r(t)}),[i]),E=Object(b.useCallback)((({query:e,error:t})=>{t?x(t):(x(void 0),p(e))}),[]);return Object(b.useEffect)((()=>{const{setTotalItems:t,goToPageIndex:s}=h,a=O.EuiSearchBar.Query.execute(d,e),n=ht(a,i);t(n.length),m(n),n.length!==j.length&&s(0)}),[e,i,h,d,j.length]),Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"m"},Object(C.jsx)(O.EuiFlexItem,{"data-test-subj":"searchBarContainer"},Object(C.jsx)(O.EuiSearchBar,{box:{placeholder:jt.searchPlaceholderLabel,incremental:!0},filters:[{type:"is",field:"isCritical",name:jt.criticalFilterLabel},{type:"field_value_selection",field:"type",name:jt.typeFilterLabel,multiSelect:!1,options:Object.keys(K).map((e=>({value:e,name:K[e]})))}],onChange:E})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{iconType:"refresh",onClick:t,"data-test-subj":"refreshButton",key:"refreshButton"},jt.refreshButtonLabel))),g&&Object(C.jsx)("div",{"data-test-subj":"invalidSearchQueryMessage"},Object(C.jsx)(O.EuiSpacer,{size:"l"}),Object(C.jsx)(O.EuiCallOut,{iconType:"alert",color:"danger",title:`Invalid search: ${g.message}`})),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(O.EuiTable,{"data-test-subj":"esDeprecationsTable"},Object(C.jsx)(O.EuiTableHeader,null,Object.entries(bt).map((([e,t])=>Object(C.jsx)(O.EuiTableHeaderCell,{width:t.width,key:t.label,onSort:()=>y(e),isSorted:i.sortField===e,isSortAscending:i.isSortAscending},t.label)))),0===j.length?Object(C.jsx)(O.EuiTableBody,null,Object(C.jsx)(O.EuiTableRow,{"data-test-subj":"noDeprecationsRow"},Object(C.jsx)(O.EuiTableRowCell,{align:"center",colSpan:ft.length,isMobileFullWidth:!0},jt.noDeprecationsMessage))):Object(C.jsx)(O.EuiTableBody,null,v.map(((e,t)=>Object(C.jsx)(O.EuiTableRow,{"data-test-subj":"deprecationTableRow",key:`deprecation-row-${t}`},((e,t)=>{var s;switch(null===(s=e.correctiveAction)||void 0===s?void 0:s.type){case"mlSnapshot":return Object(C.jsx)(me,{deprecation:e,rowFieldNames:ft,mlUpgradeModeEnabled:t});case"indexSetting":return Object(C.jsx)(ke,{deprecation:e,rowFieldNames:ft});case"clusterSetting":return Object(C.jsx)(xt,{deprecation:e,rowFieldNames:ft});case"reindex":return Object(C.jsx)(lt,{deprecation:e,rowFieldNames:ft});default:return Object(C.jsx)(Me,{deprecation:e,rowFieldNames:ft})}})(e,n)))))),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(O.EuiTablePagination,{"data-test-subj":"esDeprecationsPagination",activePage:h.getCurrentPageIndex(),itemsPerPage:h.itemsPerPage,itemsPerPageOptions:mt,pageCount:h.getTotalPages(),onChangeItemsPerPage:l,onChangePage:c}))},Ot={pageTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.pageTitle",{defaultMessage:"Elasticsearch deprecation issues"}),pageDescription:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.pageDescription",{defaultMessage:"Resolve all critical issues before upgrading. Before making changes, ensure you have a current snapshot of your cluster. Indices created before 7.0 must be reindexed or removed, including hidden indices such as those used to store Machine Learning data."}),isLoading:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.loadingText",{defaultMessage:"Loading deprecation issues…"}),remoteClustersDetectedTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.remoteClustersDetectedTitle",{defaultMessage:"Remote cluster compatibility"}),getRemoteClustersDetectedDescription:e=>I.i18n.translate("xpack.upgradeAssistant.esDeprecations.remoteClustersDetectedDescription",{defaultMessage:"You have {remoteClustersCount} {remoteClustersCount, plural, one {remote cluster} other {remote clusters}} configured. If you use cross-cluster search, note that 8.x can only search remote clusters running the previous minor version or later. If you use cross-cluster replication, a cluster that contains follower indices must run the same or newer version as the remote cluster.",values:{remoteClustersCount:e}}),remoteClustersLinkText:I.i18n.translate("xpack.upgradeAssistant.esDeprecations.remoteClustersLinkText",{defaultMessage:"View remote clusters."})},yt=e=>Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecations.batchReindexingDocsDescription",defaultMessage:"To start multiple reindexing tasks in a single request, use the Kibana {docsLink}.",values:{docsLink:Object(C.jsx)(O.EuiLink,{href:e.links.upgradeAssistant.batchReindex,target:"_blank",external:!0},I.i18n.translate("xpack.upgradeAssistant.esDeprecations.batchReindexingDocsLink",{defaultMessage:"batch reindexing API"}))}}),Et=()=>{var e;const{plugins:{share:t}}=M(),s=null===(e=t.url.locators.get("REMOTE_CLUSTERS_LOCATOR"))||void 0===e?void 0:e.useUrl({page:"remoteClusters"});return Object(C.jsx)(O.EuiLink,{href:s,"data-test-subj":"remoteClustersLink"},Ot.remoteClustersLinkText)},kt=Object(h.withRouter)((({history:e})=>{var t;const{services:{api:s,breadcrumbs:a,core:{docLinks:n}}}=M(),{data:i,isLoading:r,error:o,resendRequest:l}=s.useLoadEsDeprecations(),{data:u}=s.useLoadRemoteClusters(),c=Object(b.useMemo)((()=>(e=>{const t=[],s=[];return e.forEach((e=>{e.isCritical?t.push(e):s.push(e)})),{criticalDeprecations:t.length,warningDeprecations:s.length}})((null==i?void 0:i.deprecations)||[])),[null==i?void 0:i.deprecations]);return Object(b.useEffect)((()=>{a.setBreadcrumbs("esDeprecations")}),[a]),Object(b.useEffect)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.LOADED,A.e)}),[]),o?Object(C.jsx)(G,{deprecationSource:"Elasticsearch",message:ne(o).message}):r?Object(C.jsx)(O.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(C.jsx)(k.e,null,Ot.isLoading)):0===(null==i||null===(t=i.deprecations)||void 0===t?void 0:t.length)?Object(C.jsx)(O.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(C.jsx)(R,{deprecationType:"Elasticsearch",navigateToOverviewPage:()=>e.push("/overview")})):Object(C.jsx)("div",{"data-test-subj":"esDeprecationsContent"},Object(C.jsx)(O.EuiPageHeader,{pageTitle:Ot.pageTitle,description:Object(C.jsx)(f.a.Fragment,null,Ot.pageDescription," ",yt(n))},Object(C.jsx)(f.a.Fragment,null,u&&u.length>0&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{title:Ot.remoteClustersDetectedTitle,color:"warning",iconType:"help","data-test-subj":"remoteClustersWarningCallout"},Object(C.jsx)("p",null,Ot.getRemoteClustersDetectedDescription(u.length)," ",Object(C.jsx)(Et,null))),Object(C.jsx)(O.EuiSpacer,null)),Object(C.jsx)(U,{totalCriticalDeprecations:c.criticalDeprecations,totalWarningDeprecations:c.warningDeprecations}))),Object(C.jsx)(O.EuiSpacer,{size:"l"}),Object(C.jsx)(vt,{deprecations:null==i?void 0:i.deprecations,reload:l}))}));var Ct,St,Tt=s(32),Mt=s(2),Lt=s.n(Mt),wt=s(35),It=s.n(wt),Ft=(s(43),function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t}),At=function(e,t){var s=Ft(e,t);return{script:{source:Dt(e),lang:e.lang,params:{value:s}}}},Dt=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(Ct||(Ct={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(St||(St={}));var _t=function(e,t,s){var a,n=s.id,i=Ct.PHRASES,r=e.name;return a=e.scripted?t.map((function(t){return{script:At(e,t)}})):t.map((function(t){return{match_phrase:Lt()({},e.name,t)}})),{meta:{index:n,type:i,key:r,params:t},query:{bool:{should:a,minimum_should_match:1}}}},Rt={gt:">",gte:">=",lte:"<=",lt:"<"},Pt={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},Bt={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},Nt=function(e,t){var s=Object(ie.mapValues)(Object(ie.pickBy)(t,(function(e,t){return t in Rt})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),a=Object(ie.map)(s,(function(t,s){return"("+e.script+")"+Object(ie.get)(Rt,s)+s})).join(" && ");if("painless"===e.lang){var n="date"===e.type?Bt:Pt,i=Object(ie.reduce)(s,(function(e,t,s){return e.concat(Object(ie.get)(n,s))}),[]).join(" "),r=Object(ie.map)(s,(function(t,s){return"".concat(s,"(() -> { ").concat(e.script," }, params.").concat(s,")")})).join(" && ");a="".concat(i).concat(r)}return{script:{source:a,params:s,lang:e.lang}}};var zt=s(36),Ut=s.n(zt),Wt=s(37),qt=s.n(Wt);function Gt(e){return{type:"literal",value:e}}function $t(e){return e.value}var Kt="@kuery-wildcard@";function Qt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Yt(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function Vt(e){return e.includes(Kt)?{type:"wildcard",value:e}:Ys(e)}function Ht(e,t){var s=e.value.split(Kt).map(Qt).join("[\\s\\S]*");return new RegExp("^".concat(s,"$")).test(t)}function Jt(e){return e.value.split(Kt).join("*")}function Zt(e){return e.value.split(Kt).map(Yt).join("*")}function Xt(e){var t=e.value;return t.startsWith(Kt)&&t.replace(Kt,"").length>0}function es(e,t){if(!t)return[];if("literal"===e.type){var s=$t(e),a=t.fields.find((function(e){return e.name===s}));return a?[a]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return Ht(e,t.name)})):void 0}var ts=s(29),ss=s.n(ts);function as(e){var t=ss.a.tz.guess();return"Browser"===e?t:e}function ns(e){return function(e){var t,s=null==e?void 0:e.subType;return!(null==s||null===(t=s.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function is(e,t,s){var a=It()(It()({},e),{},{value:s?"".concat(s,".").concat(e.value):e.value});if(!t||"wildcard"===a.type&&!s)return a;var n=es(a,t).reduce((function(e,t){var a=ns(t),n=null==a?void 0:a.nested.path;return s&&!n?[].concat(Ut()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(s,'" in the KQL expression.')]):n&&!s?[].concat(Ut()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):n!==s?[].concat(Ut()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==a?void 0:a.nested.path,".")]):e}),[]);if(n.length>0)throw new Error(n.join("\n"));return a}function rs(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(ie.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(ie.isUndefined)(t))throw new Error("value is a required argument");var a="string"==typeof e?Ys(e):Gt(e),n="string"==typeof t?Ys(t):Gt(t),i=Gt(s);return{arguments:[a,n,i]}}function os(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=qt()(e.arguments,3),i=n[0],r=n[1],o=n[2],l="wildcard"===r.type&&r.value===Kt,u="wildcard"===i.type&&i.value===Kt,c=l&&u;if(c)return{match_all:{}};var d=is(i,t,null!=a&&a.nested?a.nested.path:void 0),p=Object(ie.isUndefined)(r)?r:Vs(r),g=o.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===r.type?{query_string:{query:Zt(r)}}:{multi_match:{type:g,query:p,lenient:!0}};var x=t?es(d,t):[];if(x&&0===x.length&&x.push({name:Vs(d),scripted:!1,type:""}),l&&(null==x||!x.length||(null==x?void 0:x.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var j=x.reduce((function(e,t){var n=function(e){var s=ns(t);return"wildcard"!==d.type||null==s||!s.nested||null!=a&&a.nested?e:{nested:{path:s.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(l)return[].concat(Ut()(e),[n({exists:{field:t.name}})]);if("wildcard"===r.type)return[].concat(Ut()(e),[n({query_string:{fields:[t.name],query:Zt(r)}})]);if("date"===t.type){var i=s.dateFormatTZ?{time_zone:as(s.dateFormatTZ)}:{};return[].concat(Ut()(e),[n({range:Lt()({},t.name,It()({gte:p,lte:p},i))})])}var o="phrase"===g?"match_phrase":"match";return[].concat(Ut()(e),[n(Lt()({},o,Lt()({},t.name,p)))])}if(!l)return[].concat(Ut()(e),[{script:It()({},At(t,p))}])}),[]);return{bool:{should:j||[],minimum_should_match:1}}}function ls(e){return{arguments:e}}function us(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=s.filtersInMustClause,i=e.arguments||[],r=n?"must":"filter";return{bool:Lt()({},r,i.map((function(e){return Vs(e,t,s,a)})))}}function cs(e){return{arguments:e}}function ds(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=e.arguments||[];return{bool:{should:n.map((function(e){return Vs(e,t,s,a)})),minimum_should_match:1}}}function ps(e){return{arguments:[e]}}function gs(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=qt()(e.arguments,1),i=n[0];return{bool:{must_not:Vs(i,t,s,a)}}}var xs=s(38),js=s.n(xs);function bs(e,t){var s=Object(ie.pick)(t,"gt","lt","gte","lte","format"),a="string"==typeof e?Ys(e):As.literal.buildNode(e),n=Object(ie.map)(s,(function(e,t){return As.namedArg.buildNode(t,e)}));return{arguments:[a].concat(Ut()(n))}}function fs(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=js()(e.arguments),i=n[0],r=n.slice(1),o=is(i,t,null!=a&&a.nested?a.nested.path:void 0),l=t?es(o,t):[],u=ms(r),c=Object(ie.mapValues)(u,(function(e){return Vs(e)}));l&&0===l.length&&l.push({name:Vs(o),scripted:!1,type:""});var d=l.map((function(e){var t=function(t){var s=ns(e);return"wildcard"!==o.type||null==s||!s.nested||a.nested?t:{nested:{path:s.nested.path,query:t,score_mode:"none"}}};if(e.scripted)return{script:Nt(e,c)};if("date"===e.type){var n=s.dateFormatTZ?{time_zone:as(s.dateFormatTZ)}:{};return t({range:Lt()({},e.name,It()(It()({},c),n))})}return t({range:Lt()({},e.name,c)})}));return{bool:{should:d,minimum_should_match:1}}}function ms(e){if(e.gt&&e.gte||e.lt&&e.lte)throw new Error("range ends cannot be both inclusive and exclusive");var t=["gte","lte","format"];return e.reduce((function(e,s,a){return"namedArg"===s.type?e[s.name]=s.value:e[t[a]]=s,e}),{})}function hs(e){return{arguments:[Gt(e)]}}function vs(e,t){var s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=qt()(e.arguments,1),i=n[0],r=It()(It()({},i),{},{value:null!=a&&a.nested?"".concat(a.nested.path,".").concat(i.value):i.value}),o=$t(r),l=null==t||null===(s=t.fields)||void 0===s?void 0:s.find((function(e){return e.name===o}));if(null!=l&&l.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:o}}}function Os(e,t){t=re.a.pick(t,"topLeft","bottomRight");var s=As.literal.buildNode(e),a=re.a.map(t,(function(e,t){var s="".concat(e.lat,", ").concat(e.lon);return As.namedArg.buildNode(t,s)}));return{arguments:[s].concat(Ut()(a))}}function ys(e,t){var s,a,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=js()(e.arguments),r=i[0],o=i.slice(1),l=It()(It()({},r),{},{value:null!=n&&n.nested?"".concat(n.nested.path,".").concat(r.value):r.value}),u=As.literal.toElasticsearchQuery(l),c=null!==(s=null==t?void 0:t.fields)&&void 0!==s?s:[],d=c.find((function(e){return e.name===u})),p=o.reduce((function(e,t){var s=re.a.snakeCase(t.name);return It()(It()({},e),{},Lt()({},s,Vs(t)))}),{});if(null!=d&&d.scripted)throw new Error("Geo bounding box query does not support scripted fields");return{geo_bounding_box:(a={},Lt()(a,u,p),Lt()(a,"ignore_unmapped",!0),a)}}function Es(e,t){var s=As.literal.buildNode(e),a=t.map((function(e){var t="".concat(e.lat,", ").concat(e.lon);return As.literal.buildNode(t)}));return{arguments:[s].concat(Ut()(a))}}function ks(e,t){var s,a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=js()(e.arguments),o=r[0],l=r.slice(1),u=It()(It()({},o),{},{value:null!=i&&i.nested?"".concat(i.nested.path,".").concat(o.value):o.value}),c=As.literal.toElasticsearchQuery(u),d=null!==(s=null==t?void 0:t.fields)&&void 0!==s?s:[],p=d.find((function(e){return e.name===c})),g={points:l.map((function(e){return Vs(e,t,n,i)}))};if(null!=p&&p.scripted)throw new Error("Geo polygon query does not support scripted fields");return{geo_polygon:(a={},Lt()(a,c,g),Lt()(a,"ignore_unmapped",!0),a)}}function Cs(e,t){return{arguments:["string"==typeof e?Ys(e):Gt(e),t]}}function Ss(e,t){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=qt()(e.arguments,2),r=i[0],o=i[1],l=Vs(r),u=null!=n&&null!==(s=n.nested)&&void 0!==s&&s.path?"".concat(n.nested.path,".").concat(l):l;return{nested:{path:u,query:Vs(o,t,a,It()(It()({},n),{},{nested:{path:u}})),score_mode:"none"}}}var Ts={is:i,and:r,or:o,not:l,range:u,exists:c,geoBoundingBox:d,geoPolygon:p,nested:g};function Ms(e){var t=Ts[e];if(re.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];return It()({type:"function",function:e},t.buildNodeParams.apply(t,a))}function Ls(e,t){if(re.a.isUndefined(Ts[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function ws(e,t,s,a){return Ts[e.function].toElasticsearchQuery(e,t,s,a)}function Is(e,t){return{type:"namedArg",name:e,value:"literal"===re.a.get(t,"type")?t:As.literal.buildNode(t)}}function Fs(e){return Vs(e.value)}var As={function:x,literal:a,namedArg:j,wildcard:n},Ds=s(69),_s=s.n(Ds),Rs=s(70),Ps=s.n(Rs),Bs=s(71),Ns=s.n(Bs),zs=s(72),Us=s.n(zs),Ws=s(73),qs=s.n(Ws),Gs=I.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),$s={fieldName:I.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:I.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:I.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:I.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},Ks=(Error,s(44)),Qs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ks.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return s(e,It()(It()({},t),{},{helpers:{nodeTypes:As}}))},Ys=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qs(e,It()(It()({},t),{},{startRule:"Literal"}),Ks.parse)},Vs=function e(t,s){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!As[t.type])return e(As.function.buildNode("and",[]),s);var i=As[t.type];return i.toElasticsearchQuery(t,s,a,n)};const Hs=({checkpoint:e})=>{const{services:{data:t},plugins:{share:s}}=M(),[a,n]=Object(b.useState)();return Object(b.useEffect)((()=>{(async()=>{const a=s.url.locators.get("DISCOVER_APP_LOCATOR");if(!a)return;const i=await(async e=>{const t=(await e.dataViews.find(E.h)).find((e=>e.title===E.h));if(t)return t;{const t=!1,s=!0;return await e.dataViews.createAndSave({title:E.h,allowNoIndex:!0},t,s)}})(t),r=i.getFieldByName(E.i);let o=[];if(void 0!==r){const e=_t(r,[...E.b],i);e.meta.negate=!0,o=[e]}const l=await(null==a?void 0:a.getUrl({indexPatternId:i.id,query:{language:"kuery",query:`@timestamp > "${e}"`},filters:o}));n(l)})()}),[t,e,s.url.locators]),void 0===a?null:Object(C.jsx)(O.EuiLink,{href:a,onClick:()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.d)},"data-test-subj":"viewDiscoverLogs"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.viewDiscoverResultsAction",defaultMessage:"Analyze logs in Discover"}))},Js=({checkpoint:e})=>{var t;const{services:{core:{http:s}}}=M(),a=`sourceId=${E.j}&logPosition=${`(end:now,start:${Object(Tt.encode)(e)})`}&logFilter=${encodeURI(`(language:kuery,query:'not ${E.i} : (${E.b.join(" or ")})')`)}`,n=null==s||null===(t=s.basePath)||void 0===t?void 0:t.prepend(`/app/logs/stream?${a}`);return Object(C.jsx)(O.EuiLink,{href:n,onClick:()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.l)},"data-test-subj":"viewObserveLogs"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.viewObservabilityResultsAction",defaultMessage:"View deprecation logs in Observability"}))},Zs=({checkpoint:e})=>{const{infra:t}=M().plugins;return Object(C.jsx)(O.EuiFlexGroup,null,t&&Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiPanel,null,Object(C.jsx)(O.EuiText,{size:"s"},Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.observe.observabilityDescription",defaultMessage:"Get insight into which deprecated APIs are being used and what applications you need to update."}))),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(Js,{checkpoint:e}))),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiPanel,null,Object(C.jsx)(O.EuiText,{size:"s"},Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.observe.discoveryDescription",defaultMessage:"Search and filter the deprecation logs to understand the types of changes you need to make."}))),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(Hs,{checkpoint:e}))))},Xs={calloutTitle:(e,t)=>Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.verifyChanges.calloutTitle",defaultMessage:"{warningsCount, plural, =0 {No} other {{warningsCount}}} deprecation {warningsCount, plural, one {issue} other {issues}} since {previousCheck}",values:{warningsCount:e,previousCheck:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(v.FormattedDate,{value:t,year:"numeric",month:"long",day:"2-digit"})," ",Object(C.jsx)(v.FormattedTime,{value:t,timeZoneName:"short",hour12:!1}))}}),calloutBody:I.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.calloutBody",{defaultMessage:"After making changes, reset the counter and continue monitoring to verify you're no longer using deprecated features."}),loadingError:I.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.loadingError",{defaultMessage:"An error occurred while retrieving the count of deprecation logs"}),retryButton:I.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.retryButton",{defaultMessage:"Try again"}),resetCounterButton:I.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.resetCounterButton",{defaultMessage:"Reset counter"}),errorToastTitle:I.i18n.translate("xpack.upgradeAssistant.overview.verifyChanges.errorToastTitle",{defaultMessage:"Could not delete deprecation logs cache"})},ea=({checkpoint:e,setCheckpoint:t})=>{const[s,a]=Object(b.useState)(!1),{services:{api:n,core:{notifications:i}}}=M(),{data:r,error:o,isLoading:l,resendRequest:u,isInitialRequest:c}=n.getDeprecationLogsCount(e),d=(null==r?void 0:r.count)||0,p=d>0,g=p?"warning":"success",x=p?"alert":"check",j=p?"hasWarningsCallout":"noWarningsCallout";return c&&l?Object(C.jsx)(O.EuiLoadingContent,{lines:6}):o?Object(C.jsx)(O.EuiCallOut,{title:Xs.loadingError,color:"danger",iconType:"alert","data-test-subj":"errorCallout"},Object(C.jsx)("p",null,o.statusCode," - ",o.message),Object(C.jsx)(O.EuiButton,{color:"danger",onClick:u,"data-test-subj":"retryButton"},Xs.retryButton)):Object(C.jsx)(O.EuiCallOut,{title:Xs.calloutTitle(d,e),color:g,iconType:x,"data-test-subj":j},Object(C.jsx)("p",null,Xs.calloutBody),Object(C.jsx)(O.EuiButton,{color:g,onClick:async()=>{a(!0);const{error:e}=await n.deleteDeprecationLogsCache();if(a(!1),e)return void i.toasts.addDanger({title:Xs.errorToastTitle,text:e.message.toString()});const s=ss()().toISOString();A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.r),t(s)},isLoading:s||l,"data-test-subj":"resetLastStoredDate"},Xs.resetCounterButton))},ta={enabledMessage:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.enabledToastMessage",{defaultMessage:"Deprecated API requests will be logged and indexed."}),disabledMessage:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.disabledToastMessage",{defaultMessage:"Deprecated API requests will not be logged."})},sa=()=>{const{services:{api:e,core:{notifications:t}}}=M(),{data:s,error:a,isLoading:n,resendRequest:i}=e.useLoadDeprecationLogging(),[r,o]=Object(b.useState)(!1),[l,u]=Object(b.useState)(!1),[c,d]=Object(b.useState)(!1),[p,g]=Object(b.useState)();Object(b.useEffect)((()=>{if(!n&&s){const{isDeprecationLogIndexingEnabled:e,isDeprecationLoggingEnabled:t}=s;o(e),!e&&t&&d(!0)}}),[s,n]);return{isDeprecationLogIndexingEnabled:r,isLoading:n,isUpdating:l,toggleLogging:async()=>{u(!0);const{data:s,error:a}=await e.updateDeprecationLogging({isEnabled:!r});u(!1),d(!1),a?g(a):s&&(o(s.isDeprecationLogIndexingEnabled),t.toasts.addSuccess(s.isDeprecationLogIndexingEnabled?ta.enabledMessage:ta.disabledMessage))},fetchError:a,updateError:p,resendRequest:i,onlyDeprecationLogWritingEnabled:c}};s(74);const aa={fetchErrorMessage:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.fetchErrorMessage",{defaultMessage:"Could not retrieve logging information."}),reloadButtonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.reloadButtonLabel",{defaultMessage:"Try again"}),updateErrorMessage:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.updateErrorMessage",{defaultMessage:"Could not update logging state."}),errorLabel:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.errorLabel",{defaultMessage:"Error"}),buttonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.buttonLabel",{defaultMessage:"Enable deprecation log collection"}),loadingLogsLabel:I.i18n.translate("xpack.upgradeAssistant.overview.loadingLogsLabel",{defaultMessage:"Loading deprecation log collection state…"})},na=({error:e})=>{const[t,s]=Object(b.useState)(!1);if(!e.statusCode||!e.message)return null;const a=Object(C.jsx)(O.EuiLink,{color:"danger",onClick:()=>s(!t)},aa.errorLabel," ",e.statusCode);return Object(C.jsx)(O.EuiPopover,{button:a,isOpen:t,closePopover:()=>s(!1)},Object(C.jsx)(O.EuiText,{style:{width:300}},Object(C.jsx)("p",null,e.message)))},ia=({isDeprecationLogIndexingEnabled:e,isLoading:t,isUpdating:s,fetchError:a,updateError:n,resendRequest:i,toggleLogging:r})=>t?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center",className:"upgToggleLoading"},Object(C.jsx)(O.EuiFlexItem,{grow:!1,className:"upgLoadingItem"},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},aa.loadingLogsLabel)):a?Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"xs",alignItems:"flexEnd","data-test-subj":"fetchLoggingError"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiTextColor,{color:"danger"},aa.fetchErrorMessage)),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(na,{error:a})))),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{iconType:"refresh",onClick:i},aa.reloadButtonLabel))):Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiSwitch,{"data-test-subj":"deprecationLoggingToggle",label:aa.buttonLabel,checked:!!e,onChange:r,disabled:Boolean(a)||s})),n&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"xs",alignItems:"flexEnd","data-test-subj":"updateLoggingError"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiTextColor,{color:"danger"},aa.updateErrorMessage)),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(na,{error:n})))),s&&Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"}))),ra="kibana.upgradeAssistant.lastCheckpoint",oa=new k.f(window.localStorage),la=()=>{const e=ss()(oa.get(ra));if(e.isValid())return e.toISOString();const t=ss()().toISOString();return oa.set(ra,t),t},ua={analyzeTitle:I.i18n.translate("xpack.upgradeAssistant.overview.analyzeTitle",{defaultMessage:"Analyze deprecation logs"}),deprecationsCountCheckpointTitle:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationsCountCheckpointTitle",{defaultMessage:"Resolve deprecation issues and verify your changes"}),apiCompatibilityNoteTitle:I.i18n.translate("xpack.upgradeAssistant.overview.apiCompatibilityNoteTitle",{defaultMessage:"Apply API compatibility headers (optional)"}),apiCompatibilityNoteBody:e=>Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.apiCompatibilityNoteBody",defaultMessage:"We recommend you resolve all deprecation issues before upgrading. If needed, you can apply API compatibility headers to requests that use deprecated features. {learnMoreLink}.",values:{learnMoreLink:Object(C.jsx)(O.EuiLink,{href:e,target:"_blank"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.apiCompatibilityNoteLink",defaultMessage:"Learn more"}))}}),onlyLogWritingEnabledTitle:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.deprecationWarningTitle",{defaultMessage:"Your logs are being written to the logs directory"}),onlyLogWritingEnabledBody:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.deprecationWarningBody",{defaultMessage:"Go to your logs directory to view the deprecation logs or enable deprecation log collection to see them in Kibana."}),deniedPrivilegeTitle:I.i18n.translate("xpack.upgradeAssistant.overview.deprecationLogs.deniedPrivilegeTitle",{defaultMessage:"You require index privileges to analyze the deprecation logs"}),deniedPrivilegeDescription:e=>{var t,s;return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.deprecationLogs.deniedPrivilegeDescription",defaultMessage:"The deprecation logs will continue to be indexed, but you won't be able to analyze them until you have the read index {privilegesCount, plural, one {privilege} other {privileges}} for: {missingPrivileges}",values:{missingPrivileges:Object(C.jsx)(O.EuiCode,{transparentBackground:!0},null==e||null===(t=e.index)||void 0===t?void 0:t.join(", ")),privilegesCount:null==e||null===(s=e.index)||void 0===s?void 0:s.length}})}},ca=({hasPrivileges:e,privilegesMissing:t})=>{const{services:{core:{docLinks:s}}}=M(),{isDeprecationLogIndexingEnabled:a,onlyDeprecationLogWritingEnabled:n,isLoading:i,isUpdating:r,fetchError:o,updateError:l,resendRequest:u,toggleLogging:c}=sa(),[d,p]=Object(b.useState)(la());return Object(b.useEffect)((()=>{var e;e=d,oa.set(ra,e)}),[d]),Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(ia,{isDeprecationLogIndexingEnabled:a,isLoading:i,isUpdating:r,fetchError:o,updateError:l,resendRequest:u,toggleLogging:c}),n&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(O.EuiCallOut,{title:ua.onlyLogWritingEnabledTitle,color:"warning",iconType:"help","data-test-subj":"deprecationWarningCallout"},Object(C.jsx)("p",null,ua.onlyLogWritingEnabledBody))),!e&&a&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(O.EuiCallOut,{iconType:"help",color:"warning",title:ua.deniedPrivilegeTitle,"data-test-subj":"noIndexPermissionsCallout"},Object(C.jsx)("p",null,ua.deniedPrivilegeDescription(t)))),e&&a&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiSpacer,{size:"xl"}),Object(C.jsx)(O.EuiText,{"data-test-subj":"externalLinksTitle"},Object(C.jsx)("h4",null,ua.analyzeTitle)),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(Zs,{checkpoint:d}),Object(C.jsx)(O.EuiSpacer,{size:"xl"}),Object(C.jsx)(O.EuiText,{"data-test-subj":"deprecationsCountTitle"},Object(C.jsx)("h4",null,ua.deprecationsCountCheckpointTitle)),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(ea,{checkpoint:d,setCheckpoint:p}),Object(C.jsx)(O.EuiSpacer,{size:"xl"}),Object(C.jsx)(O.EuiText,{"data-test-subj":"apiCompatibilityNoteTitle"},Object(C.jsx)("h4",null,ua.apiCompatibilityNoteTitle)),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,ua.apiCompatibilityNoteBody(s.links.elasticsearch.apiCompatibilityHeader)))))},da=()=>Object(C.jsx)(k.g,{privileges:`index.${E.g}`},(({hasPrivileges:e,privilegesMissing:t,isLoading:s})=>Object(C.jsx)(ca,{hasPrivileges:!s&&e,privilegesMissing:t}))),pa=()=>{const{services:{breadcrumbs:e,core:{docLinks:t}}}=M();return Object(b.useEffect)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.LOADED,A.f)}),[]),Object(b.useEffect)((()=>{e.setBreadcrumbs("esDeprecationLogs")}),[e]),Object(C.jsx)(O.EuiPageBody,{restrictWidth:!0,"data-test-subj":"esDeprecationLogs"},Object(C.jsx)(O.EuiPageContentBody,{color:"transparent",paddingSize:"none"},Object(C.jsx)(O.EuiPageHeader,{bottomBorder:!0,pageTitle:I.i18n.translate("xpack.upgradeAssistant.esDeprecationLogs.pageTitle",{defaultMessage:"Elasticsearch deprecation logs"}),description:I.i18n.translate("xpack.upgradeAssistant.esDeprecationLogs.pageDescription",{defaultMessage:"Review the deprecation logs to determine if your applications are using any deprecated APIs. Update your applications to prevent errors or changes in behavior after you upgrade."}),rightSideItems:[Object(C.jsx)(O.EuiButtonEmpty,{href:t.links.elasticsearch.migrationApiDeprecation,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.esDeprecationLogs.documentationLinkText",defaultMessage:"Documentation"}))]}),Object(C.jsx)(O.EuiSpacer,{size:"l"}),Object(C.jsx)(da,null)))},ga=()=>{const{kibanaVersionInfo:e,services:{core:{docLinks:t}}}=M(),{nextMajor:s,currentMajor:a}=e,{ELASTIC_WEBSITE_URL:n}=t;return Object(C.jsx)(O.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(C.jsx)(O.EuiEmptyPrompt,{iconType:"wrench","data-test-subj":"comingSoonPrompt",title:Object(C.jsx)("h2",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.title",defaultMessage:"{uaVersion} Upgrade Assistant",values:{uaVersion:`${s}.0`}})),body:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.upgradeAssistantDescription",defaultMessage:"The Upgrade Assistant identifies deprecated settings in your cluster and helps you resolve issues before you upgrade. Check back here when it's time to upgrade to Elastic {nextMajor}.",values:{nextMajor:`${s}.0`}})),7===a&&Object(C.jsx)("p",null,Object(C.jsx)(O.EuiLink,{external:!0,target:"_blank",href:`${n}guide/en/elasticsearch/reference/master/migrating-8.0.html`},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.emptyPrompt.learnMoreDescription",defaultMessage:"Learn more about migrating to {nextMajor}.",values:{nextMajor:`${s}.0`}}))))}))},xa=()=>{var e;const{plugins:{share:t}}=M(),s=null===(e=t.url.locators.get("SNAPSHOT_RESTORE_LOCATOR"))||void 0===e?void 0:e.useUrl({page:"snapshots"});return Object(C.jsx)(O.EuiButton,{href:s,onClick:()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.b)},"data-test-subj":"snapshotRestoreLink"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.snapshotRestoreLink",defaultMessage:"Create snapshot"}))},ja=()=>Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,I.i18n.translate("xpack.upgradeAssistant.overview.backupStepDescription",{defaultMessage:"Make sure you have a current snapshot before making any changes."}))),Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(xa,null)),ba=({cloudSnapshotsUrl:e,setIsComplete:t,setForceOnPremStep:s})=>{const{services:{api:a}}=M(),{isInitialRequest:n,isLoading:i,error:r,data:o,resendRequest:l}=a.useLoadCloudBackupStatus();if(Object(b.useEffect)((()=>{var e;i||(t(null!==(e=!r&&(null==o?void 0:o.isBackedUp))&&void 0!==e&&e),r&&(e=>404===e.statusCode&&e.message.toString().includes(E.d))(r)&&s(!0))}),[r,i,o,s]),n&&i)return Object(C.jsx)(O.EuiLoadingContent,{"data-test-subj":"cloudBackupLoading",lines:3});if(r)return Object(C.jsx)(O.EuiCallOut,{title:I.i18n.translate("xpack.upgradeAssistant.overview.cloudBackup.loadingError",{defaultMessage:"An error occurred while retrieving the latest snapshot status"}),color:"danger",iconType:"alert","data-test-subj":"cloudBackupErrorCallout"},Object(C.jsx)("p",null,r.statusCode," - ",r.message),Object(C.jsx)(O.EuiButton,{color:"danger",onClick:l,"data-test-subj":"cloudBackupRetryButton"},I.i18n.translate("xpack.upgradeAssistant.overview.cloudBackup.retryButton",{defaultMessage:"Try again"})));const u=ss()(o.lastBackupTime).toISOString(),c=o.isBackedUp?Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s","data-test-subj":"dataBackedUpStatus"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check",color:"success"})),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.cloudBackup.hasSnapshotMessage",defaultMessage:"Last snapshot created on {lastBackupTime}.",values:{lastBackupTime:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(v.FormattedDate,{value:u,year:"numeric",month:"long",day:"2-digit"})," ",Object(C.jsx)(v.FormattedTime,{value:u,timeZoneName:"short",hour12:!1}))}}))))):Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s","data-test-subj":"dataNotBackedUpStatus"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,I.i18n.translate("xpack.upgradeAssistant.overview.cloudBackup.noSnapshotMessage",{defaultMessage:"Your data isn't backed up."})))));return Object(C.jsx)(f.a.Fragment,null,c,Object(C.jsx)(O.EuiSpacer,{size:"s"}),Object(C.jsx)(O.EuiButton,{href:e,onClick:()=>{A.s.trackUiMetric(F.METRIC_TYPE.CLICK,A.a)},"data-test-subj":"cloudSnapshotsLink",target:"_blank",iconType:"popout",iconSide:"right"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.cloudBackup.snapshotsLink",defaultMessage:"Create snapshot"})))},fa=I.i18n.translate("xpack.upgradeAssistant.overview.backupStepTitle",{defaultMessage:"Back up your data"}),ma=({cloud:e,setIsComplete:t})=>{const[s,a]=Object(b.useState)(!1);return null!=e&&e.isCloudEnabled&&!s?Object(C.jsx)(ba,{setIsComplete:t,cloudSnapshotsUrl:e.snapshotsUrl,setForceOnPremStep:a}):Object(C.jsx)(ja,null)},ha=({cloud:e,isComplete:t,setIsComplete:s})=>{const a=null!=e&&e.isCloudEnabled&&t?"complete":"incomplete";return{title:fa,status:a,"data-test-subj":`backupStep-${a}`,children:Object(C.jsx)(ma,{cloud:e,setIsComplete:s})}},va=({children:e})=>Object(C.jsx)(O.EuiText,{color:"subdued","data-test-subj":"loadingIssuesError"},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},e))),Oa={noPartialDeprecationIssuesText:I.i18n.translate("xpack.upgradeAssistant.noPartialDeprecationsMessage",{defaultMessage:"None"}),noDeprecationIssuesText:I.i18n.translate("xpack.upgradeAssistant.noDeprecationsMessage",{defaultMessage:"No issues"})},ya=e=>{const{isPartial:t=!1}=e;return Object(C.jsx)(O.EuiText,{color:"success"},Object(C.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1,"data-test-subj":e["data-test-subj"]},t?Oa.noPartialDeprecationIssuesText:Oa.noDeprecationIssuesText)))};s(83);const Ea={warningDeprecationsTitle:I.i18n.translate("xpack.upgradeAssistant.deprecationStats.warningDeprecationsTitle",{defaultMessage:"Warning"}),criticalDeprecationsTitle:I.i18n.translate("xpack.upgradeAssistant.deprecationStats.criticalDeprecationsTitle",{defaultMessage:"Critical"})},ka=e=>{const{deprecationSource:t,linkUrl:s,criticalDeprecationsCount:a,warningDeprecationsCount:n,isLoading:i,errorMessage:r,setIsFixed:o}=e,l=Object(h.useHistory)(),u=!!r,c=a>0,d=n>0,p=!(i||u||d||c);return Object(b.useEffect)((()=>{i||r||o(0===a)}),[o,a,i,r]),Object(C.jsx)(O.EuiCard,We()({"data-test-subj":e["data-test-subj"],className:"upgDeprecationIssuesPanel",layout:"horizontal",title:t,titleSize:"xs"},!p&&Object(k.h)(l,s)),Object(C.jsx)(O.EuiSpacer,{size:"s"}),u?Object(C.jsx)(va,null,r):p?Object(C.jsx)(ya,{"data-test-subj":"noDeprecationIssues"}):Object(C.jsx)(O.EuiFlexGroup,null,Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiStat,{"data-test-subj":"criticalDeprecations",className:"upgDeprecationIssuesPanel__stat",title:u?"--":c?Ie(a):Object(C.jsx)(ya,{isPartial:!0,"data-test-subj":"noCriticalDeprecationIssues"}),titleElement:"span",description:Ea.criticalDeprecationsTitle,titleColor:"danger",isLoading:i})),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(O.EuiStat,{"data-test-subj":"warningDeprecations",className:"upgDeprecationIssuesPanel__stat",title:u?"--":d?Ie(n):Object(C.jsx)(ya,{isPartial:!0,"data-test-subj":"noWarningDeprecationIssues"}),titleElement:"span",description:Ea.warningDeprecationsTitle,isLoading:i}))))},Ca=({setIsFixed:e})=>{var t,s,a,n,i,r;const{services:{api:o}}=M(),{data:l,isLoading:u,error:c}=o.useLoadEsDeprecations(),d=null!==(t=null==l||null===(s=l.deprecations)||void 0===s||null===(a=s.filter((e=>e.isCritical)))||void 0===a?void 0:a.length)&&void 0!==t?t:0,p=null!==(n=null==l||null===(i=l.deprecations)||void 0===i||null===(r=i.filter((e=>!1===e.isCritical)))||void 0===r?void 0:r.length)&&void 0!==n?n:0,g=c&&ne(c).message;return Object(C.jsx)(ka,{"data-test-subj":"esStatsPanel",deprecationSource:"Elasticsearch",linkUrl:"/es_deprecations",criticalDeprecationsCount:d,warningDeprecationsCount:p,isLoading:u,errorMessage:g,setIsFixed:e})},Sa=({setIsFixed:e})=>{var t,s,a,n;const{services:{core:{deprecations:i}}}=M(),[r,o]=Object(b.useState)(void 0),[l,u]=Object(b.useState)(!1),[c,d]=Object(b.useState)(void 0);Object(b.useEffect)((()=>{!async function(){u(!0);try{const e=await i.getAllDeprecations();o(e)}catch(e){d(e)}u(!1)}()}),[i]);const p=null!==(t=null==r||null===(s=r.filter((e=>"critical"===e.level)))||void 0===s?void 0:s.length)&&void 0!==t?t:0,g=null!==(a=null==r||null===(n=r.filter((e=>"warning"===e.level)))||void 0===n?void 0:n.length)&&void 0!==a?a:0,x=c&&I.i18n.translate("xpack.upgradeAssistant.deprecationStats.loadingErrorMessage",{defaultMessage:"Could not retrieve Kibana deprecation issues."});return Object(C.jsx)(ka,{"data-test-subj":"kibanaStatsPanel",deprecationSource:"Kibana",linkUrl:"/kibana_deprecations",criticalDeprecationsCount:p,warningDeprecationsCount:g,isLoading:l,errorMessage:x,setIsFixed:e})},Ta={reviewStepTitle:I.i18n.translate("xpack.upgradeAssistant.overview.fixIssuesStepTitle",{defaultMessage:"Review deprecated settings and resolve issues"})},Ma=({setIsComplete:e})=>{const[t,s]=Object(b.useState)(!1),[a,n]=Object(b.useState)(!1);return Object(b.useEffect)((()=>{e(t&&a)}),[t,a]),Object(C.jsx)(O.EuiFlexGroup,null,Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(Ca,{setIsFixed:s})),Object(C.jsx)(O.EuiFlexItem,null,Object(C.jsx)(Sa,{setIsFixed:n})))},La=({isComplete:e,setIsComplete:t})=>{const s=e?"complete":"incomplete";return{title:Ta.reviewStepTitle,status:s,"data-test-subj":`fixIssuesStep-${s}`,children:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.fixIssuesStepDescription",defaultMessage:"You must resolve any critical Elasticsearch and Kibana configuration issues before upgrading to Elastic 8.x. Ignoring warnings might result in differences in behavior after you upgrade."}))),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(Ma,{setIsComplete:t}))}},wa={upgradeStepTitle:I.i18n.translate("xpack.upgradeAssistant.overview.upgradeStepTitle",{defaultMessage:"Upgrade to Elastic 8.x"}),upgradeStepDescription:I.i18n.translate("xpack.upgradeAssistant.overview.upgradeStepDescription",{defaultMessage:"Once you’ve resolved all critical issues and verified that your applications are ready, you can upgrade to Elastic 8.x. Be sure to back up your data again before upgrading."}),upgradeStepDescriptionForCloud:I.i18n.translate("xpack.upgradeAssistant.overview.upgradeStepDescriptionForCloud",{defaultMessage:"Once you've resolved all critical issues and verified that your applications are ready, you can upgrade to Elastic 8.x. Be sure to back up your data again before upgrading. Upgrade your deployment on Elastic Cloud."}),upgradeStepCloudLink:I.i18n.translate("xpack.upgradeAssistant.overview.upgradeStepCloudLink",{defaultMessage:"Upgrade on Cloud"}),loadingUpgradeStatus:I.i18n.translate("xpack.upgradeAssistant.overview.loadingUpgradeStatus",{defaultMessage:"Loading upgrade status"}),upgradeGuideLink:I.i18n.translate("xpack.upgradeAssistant.overview.upgradeGuideLink",{defaultMessage:"View upgrade guide"})},Ia=()=>{const{plugins:{cloud:e},services:{api:t,core:{docLinks:s}}}=M(),a=Boolean(null==e?void 0:e.isCloudEnabled),{data:n,isLoading:i,error:r,resendRequest:o}=t.useLoadUpgradeStatus();let l;if(a)if(r)l=Object(C.jsx)(O.EuiCallOut,{title:I.i18n.translate("xpack.upgradeAssistant.overview.errorLoadingUpgradeStatus",{defaultMessage:"An error occurred while retrieving the upgrade status"}),color:"danger",iconType:"alert","data-test-subj":"upgradeStatusErrorCallout"},Object(C.jsx)("p",null,r.statusCode," - ",r.message),Object(C.jsx)(O.EuiButton,{color:"danger",onClick:o,"data-test-subj":"upgradeStatusRetryButton",isLoading:i},I.i18n.translate("xpack.upgradeAssistant.overview.upgradeStatus.retryButton",{defaultMessage:"Try again"})));else{const t=null==n?void 0:n.readyForUpgrade,a=e.deploymentUrl+"?show_upgrade=true";l=Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{href:a,target:"_blank","data-test-subj":"upgradeSetupCloudLink",iconSide:"right",iconType:"popout",isLoading:i,isDisabled:!t},i?wa.loadingUpgradeStatus:wa.upgradeStepCloudLink)),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{href:s.links.upgrade.upgradingStackOnCloud,target:"_blank","data-test-subj":"upgradeSetupDocsLink",iconSide:"right",iconType:"popout"},wa.upgradeGuideLink)))}else l=Object(C.jsx)(O.EuiButton,{href:s.links.upgrade.upgradingStackOnPrem,target:"_blank","data-test-subj":"upgradeSetupDocsLink",iconSide:"right",iconType:"popout"},wa.upgradeGuideLink);return Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,a?wa.upgradeStepDescriptionForCloud:wa.upgradeStepDescription)),Object(C.jsx)(O.EuiSpacer,{size:"m"}),l)};var Fa=s(92),Aa=s.n(Fa);const Da={closeButtonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.flyoutCloseButtonLabel",{defaultMessage:"Close"}),flyoutTitle:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.flyoutTitle",{defaultMessage:"Migrate system indices"}),flyoutDescription:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.flyoutDescription",{defaultMessage:"Migrate the indices that store information for the following features before you upgrade."}),migrationCompleteLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.migrationCompleteLabel",{defaultMessage:"Migration complete"}),needsMigrationLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.needsMigrationLabel",{defaultMessage:"Migration required"}),migratingLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.migratingLabel",{defaultMessage:"Migration in progress"}),errorLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.errorLabel",{defaultMessage:"Migration failed"}),featureNameTableColumn:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.featureNameTableColumn",{defaultMessage:"Feature"}),statusTableColumn:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.statusTableColumn",{defaultMessage:"Status"})},_a=[{field:"feature_name",name:Da.featureNameTableColumn,sortable:!0,truncateText:!0,render:e=>Object(ie.startCase)(e)},{field:"migration_status",name:Da.statusTableColumn,sortable:!0,render:e=>"NO_MIGRATION_NEEDED"===e?Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"checkInCircleFilled",color:"success"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{color:"green",size:"s","data-test-subj":"featureNoUpgradeNeeded"},Object(C.jsx)("p",null,Da.migrationCompleteLabel)))):"MIGRATION_NEEDED"===e?Object(C.jsx)(O.EuiText,{size:"s","data-test-subj":"featureUpgradeNeeded"},Object(C.jsx)("p",null,Da.needsMigrationLabel)):"IN_PROGRESS"===e?Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiLoadingSpinner,{size:"m"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{color:"subdued",size:"s","data-test-subj":"featureInProgress"},Object(C.jsx)("p",null,Da.migratingLabel)))):"ERROR"===e?Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{color:"danger",size:"s","data-test-subj":"featureError"},Object(C.jsx)("p",null,Da.errorLabel)))):""}],Ra=({closeFlyout:e,data:t})=>Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiFlyoutHeader,{hasBorder:!0},Object(C.jsx)(O.EuiTitle,{size:"s","data-test-subj":"flyoutTitle"},Object(C.jsx)("h2",null,Da.flyoutTitle))),Object(C.jsx)(O.EuiFlyoutBody,{"data-test-subj":"flyoutDetails"},Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,Da.flyoutDescription)),Object(C.jsx)(O.EuiSpacer,{size:"l"}),Object(C.jsx)(O.EuiInMemoryTable,{"data-test-subj":"featuresTable",itemId:"feature_name",items:t.features,columns:_a,pagination:!0,sorting:!0})),Object(C.jsx)(O.EuiFlyoutFooter,null,Object(C.jsx)(O.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{onClick:e,flush:"left"},Da.closeButtonLabel))))),Pa="migrateSystemIndicesFlyout",{useGlobalFlyout:Ba}=k.c,Na={title:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.title",{defaultMessage:"Migrate system indices"}),bodyDescription:e=>Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.systemIndices.body",defaultMessage:"Prepare the system indices that store internal information for the upgrade. Any {hiddenIndicesLink} that need to be reindexed are shown in the next step.",values:{hiddenIndicesLink:Object(C.jsx)(O.EuiLink,{external:!0,target:"_blank",href:e},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.systemIndices.body.hiddenIndicesLink",defaultMessage:"hidden indices"}))}}),startButtonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.startButtonLabel",{defaultMessage:"Migrate indices"}),inProgressButtonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.inProgressButtonLabel",{defaultMessage:"Migration in progress"}),noMigrationNeeded:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.noMigrationNeeded",{defaultMessage:"Migration complete"}),viewSystemIndicesStatus:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.viewSystemIndicesStatus",{defaultMessage:"View migration details"}),retryButtonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.retryButtonLabel",{defaultMessage:"Retry migration"}),loadingError:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.loadingError",{defaultMessage:"Could not retrieve the system indices status"}),migrationFailedTitle:I.i18n.translate("xpack.upgradeAssistant.overview.systemIndices.migrationFailedTitle",{defaultMessage:"System indices migration failed"}),migrationFailedBody:e=>{const{feature:t,failureCause:s}=(e=>{const t=e.find((e=>"ERROR"===e.migration_status));if(t){var s;const e=t.indices.find((e=>e.failure_cause));return{feature:null==t?void 0:t.feature_name,failureCause:null==e||null===(s=e.failure_cause)||void 0===s?void 0:s.error.type}}return{}})(e);return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.systemIndices.migrationFailedBody",defaultMessage:"An error ocurred while migrating system indices for {feature}: {failureCause}",values:{feature:t,failureCause:Object(C.jsx)(O.EuiCode,null,s)}})}},za=({setIsComplete:e})=>{var t,s,a,n,i;const{beginSystemIndicesMigration:r,startMigrationStatus:o,migrationStatus:l,setShowFlyout:u}=(()=>{const{services:{api:e}}=M(),[t,s]=Object(b.useState)(!1),[a,n]=Object(b.useState)({statusType:"idle"}),{data:i,error:r,isLoading:o,resendRequest:l,isInitialRequest:u}=e.useLoadSystemIndicesMigrationStatus(),c="IN_PROGRESS"===(null==i?void 0:i.migration_status);Aa()(l,c?E.l:null);const{addContent:d,removeContent:p}=Ba(),g=Object(b.useCallback)((()=>{s(!1),p(Pa)}),[p]);Object(b.useEffect)((()=>{t&&d({id:Pa,Component:Ra,props:{data:i,closeFlyout:g},flyoutProps:{onClose:g}})}),[d,i,t,g]);const x=Object(b.useCallback)((async()=>{const{error:t}=await e.migrateSystemIndices();n({statusType:t?"error":"started",error:null!=t?t:void 0}),t||l()}),[e,l]);return{setShowFlyout:s,startMigrationStatus:a,beginSystemIndicesMigration:x,migrationStatus:{data:i,error:r,isLoading:o,resendRequest:l,isInitialRequest:u}}})();if(Object(b.useEffect)((()=>{var t;e("NO_MIGRATION_NEEDED"===(null===(t=l.data)||void 0===t?void 0:t.migration_status))}),[null===(t=l.data)||void 0===t?void 0:t.migration_status]),l.error)return Object(C.jsx)(O.EuiCallOut,{title:Na.loadingError,color:"danger",iconType:"alert","data-test-subj":"systemIndicesStatusErrorCallout"},Object(C.jsx)("p",null,l.error.statusCode," - ",l.error.message),Object(C.jsx)(O.EuiButton,{color:"danger",isLoading:l.isLoading,onClick:l.resendRequest,"data-test-subj":"systemIndicesStatusRetryButton"},Na.retryButtonLabel));if("NO_MIGRATION_NEEDED"===(null===(s=l.data)||void 0===s?void 0:s.migration_status))return Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s","data-test-subj":"noMigrationNeededSection"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiIcon,{type:"check",color:"success"})),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiText,{color:"success"},Object(C.jsx)("p",null,Na.noMigrationNeeded))));const c=l.isInitialRequest&&l.isLoading,d="IN_PROGRESS"===(null===(a=l.data)||void 0===a?void 0:a.migration_status);return Object(C.jsx)(f.a.Fragment,null,"error"===o.statusType&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{size:"s",color:"danger",iconType:"alert",title:`${o.error.statusCode} - ${o.error.message}`,"data-test-subj":"startSystemIndicesMigrationCalloutError"}),Object(C.jsx)(O.EuiSpacer,{size:"m"})),"ERROR"===(null===(n=l.data)||void 0===n?void 0:n.migration_status)&&Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiCallOut,{size:"s",color:"danger",iconType:"alert",title:Na.migrationFailedTitle,"data-test-subj":"migrationFailedCallout"},Object(C.jsx)("p",null,Na.migrationFailedBody(null===(i=l.data)||void 0===i?void 0:i.features))),Object(C.jsx)(O.EuiSpacer,{size:"m"})),Object(C.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButton,{isLoading:d,isDisabled:c,onClick:r,"data-test-subj":"startSystemIndicesMigrationButton"},d?Na.inProgressButtonLabel:Na.startButtonLabel)),Object(C.jsx)(O.EuiFlexItem,{grow:!1},Object(C.jsx)(O.EuiButtonEmpty,{onClick:()=>u(!0),isDisabled:c,"data-test-subj":"viewSystemIndicesStateButton"},Na.viewSystemIndicesStatus))))},Ua=({isComplete:e,setIsComplete:t,docLinks:s})=>{const a=e?"complete":"incomplete";return{title:Na.title,status:a,"data-test-subj":`migrateSystemIndicesStep-${a}`,children:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,Na.bodyDescription(s.links.elasticsearch.hiddenIndices))),Object(C.jsx)(O.EuiSpacer,{size:"m"}),Object(C.jsx)(za,{setIsComplete:t}))}},Wa={logsStepTitle:I.i18n.translate("xpack.upgradeAssistant.overview.logsStep.title",{defaultMessage:"Address API deprecations"}),logsStepDescription:I.i18n.translate("xpack.upgradeAssistant.overview.logsStep.description",{defaultMessage:"Review the Elasticsearch deprecation logs to ensure you're not using deprecated APIs."}),viewLogsButtonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.logsStep.viewLogsButtonLabel",{defaultMessage:"View logs"}),enableLogsButtonLabel:I.i18n.translate("xpack.upgradeAssistant.overview.logsStep.enableLogsButtonLabel",{defaultMessage:"Enable logging"}),logsCountDescription:(e,t)=>Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.logsStep.countDescription",defaultMessage:"You have {deprecationCount, plural, =0 {no} other {{deprecationCount}}} deprecation {deprecationCount, plural, one {issue} other {issues}} since {checkpoint}.",values:{deprecationCount:e,checkpoint:Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(v.FormattedDate,{value:t,year:"numeric",month:"long",day:"2-digit"})," ",Object(C.jsx)(v.FormattedTime,{value:t,timeZoneName:"short",hour12:!1}))}}),missingPrivilegesTitle:I.i18n.translate("xpack.upgradeAssistant.overview.logsStep.missingPrivilegesTitle",{defaultMessage:"You require index privileges to analyze the deprecation logs"}),missingPrivilegesDescription:e=>{var t,s;return Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.logsStep.missingPrivilegesDescription",defaultMessage:"The deprecation logs will continue to be indexed, but you won't be able to analyze them until you have the read index {privilegesCount, plural, one {privilege} other {privileges}} for: {missingPrivileges}",values:{missingPrivileges:Object(C.jsx)(O.EuiCode,{transparentBackground:!0},null==e||null===(t=e.index)||void 0===t?void 0:t.join(", ")),privilegesCount:null==e||null===(s=e.index)||void 0===s?void 0:s.length}})},loadingError:I.i18n.translate("xpack.upgradeAssistant.overview.logsStep.loadingError",{defaultMessage:"An error occurred while retrieving the deprecation log count"}),retryButton:I.i18n.translate("xpack.upgradeAssistant.overview.logsStep.retryButton",{defaultMessage:"Try again"})},qa=()=>Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",null,Wa.logsStepDescription)),Ga=({setIsComplete:e,hasPrivileges:t,privilegesMissing:s,navigateToEsDeprecationLogs:a})=>{const{services:{api:n}}=M(),{isDeprecationLogIndexingEnabled:i}=sa(),r=la(),{data:o,error:l,isLoading:u,resendRequest:c,isInitialRequest:d}=n.getDeprecationLogsCount(r);return Object(b.useEffect)((()=>{i||e(!1),e(0===(null==o?void 0:o.count))}),[i,o]),!1===t&&i?Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(qa,null),Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiCallOut,{iconType:"help",color:"warning",title:Wa.missingPrivilegesTitle,"data-test-subj":"missingPrivilegesCallout"},Object(C.jsx)("p",null,Wa.missingPrivilegesDescription(s)))):u&&d?Object(C.jsx)(O.EuiLoadingContent,{lines:3}):t&&l?Object(C.jsx)(O.EuiCallOut,{title:Wa.loadingError,color:"danger",iconType:"alert","data-test-subj":"deprecationLogsErrorCallout"},Object(C.jsx)("p",null,l.statusCode," - ",l.message),Object(C.jsx)(O.EuiButton,{color:"danger",onClick:c,"data-test-subj":"deprecationLogsRetryButton"},Wa.retryButton)):Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(qa,null),i&&o?Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiText,null,Object(C.jsx)("p",{"data-test-subj":"logsCountDescription"},Wa.logsCountDescription(o.count,r))),Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiButton,{onClick:a,"data-test-subj":"viewLogsLink"},Wa.viewLogsButtonLabel)):Object(C.jsx)(f.a.Fragment,null,Object(C.jsx)(O.EuiSpacer,null),Object(C.jsx)(O.EuiButton,{onClick:a,"data-test-subj":"enableLogsLink"},Wa.enableLogsButtonLabel)),Object(C.jsx)(O.EuiSpacer,{size:"m"}))},$a=({isComplete:e,setIsComplete:t,navigateToEsDeprecationLogs:s})=>{const a=e?"complete":"incomplete";return{status:a,title:Wa.logsStepTitle,"data-test-subj":`logsStep-${a}`,children:Object(C.jsx)(k.g,{privileges:`index.${E.g}`},(({hasPrivileges:e,isLoading:a,privilegesMissing:n})=>Object(C.jsx)(Ga,{setIsComplete:t,hasPrivileges:!a&&e,navigateToEsDeprecationLogs:s,privilegesMissing:n})))}},Ka=Object(h.withRouter)((({history:e})=>{const{services:{breadcrumbs:t,core:{docLinks:s}},plugins:{cloud:a}}=M();Object(b.useEffect)((()=>{A.s.trackUiMetric(F.METRIC_TYPE.LOADED,A.m)}),[]),Object(b.useEffect)((()=>{t.setBreadcrumbs("overview")}),[t]);const[n,i]=Object(b.useState)({backup:!1,migrate_system_indices:!1,fix_issues:!1,logs:!1}),r=e=>n[e],o=(e,t)=>{i({...n,[e]:t})};return Object(C.jsx)(O.EuiPageBody,{restrictWidth:!0,"data-test-subj":"overview"},Object(C.jsx)(O.EuiPageContentBody,{color:"transparent",paddingSize:"none"},Object(C.jsx)(O.EuiPageHeader,{bottomBorder:!0,pageTitle:I.i18n.translate("xpack.upgradeAssistant.overview.pageTitle",{defaultMessage:"Upgrade Assistant"}),description:I.i18n.translate("xpack.upgradeAssistant.overview.pageDescription",{defaultMessage:"Get ready for the next version of Elastic!"}),rightSideItems:[Object(C.jsx)(O.EuiButtonEmpty,{href:s.links.upgradeAssistant.overview,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.documentationLinkText",defaultMessage:"Documentation"}))]},Object(C.jsx)(O.EuiText,{"data-test-subj":"whatsNewLink"},Object(C.jsx)(O.EuiLink,{href:s.links.elasticsearch.version8ReleaseHighlights,target:"_blank"},Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.overview.whatsNewLink",defaultMessage:"What's new in 8.x?"})))),Object(C.jsx)(O.EuiSpacer,{size:"l"}),Object(C.jsx)(O.EuiSteps,{steps:[ha({cloud:a,isComplete:r("backup"),setIsComplete:o.bind(null,"backup")}),Ua({docLinks:s,isComplete:r("migrate_system_indices"),setIsComplete:o.bind(null,"migrate_system_indices")}),La({isComplete:r("fix_issues"),setIsComplete:o.bind(null,"fix_issues")}),$a({isComplete:r("logs"),setIsComplete:o.bind(null,"logs"),navigateToEsDeprecationLogs:()=>e.push("/es_deprecation_logs")}),{title:wa.upgradeStepTitle,status:"incomplete","data-test-subj":"upgradeStep",children:Object(C.jsx)(Ia,null)}]})))})),{GlobalFlyoutProvider:Qa}=k.c,Ya=()=>{const{isReadOnlyMode:e,services:{api:t,core:s}}=M(),a=!0!==s.application.capabilities.spaces.manage,[n,i]=Object(b.useState)("isPreparingForUpgrade");return Object(b.useEffect)((()=>{t.onClusterUpgradeStateChange((e=>{i(e)}))}),[t]),a?Object(C.jsx)(O.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued","data-test-subj":"missingKibanaPrivilegesMessage"},Object(C.jsx)(k.d,{title:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.app.deniedPrivilegeTitle",defaultMessage:"Kibana admin role required"}),message:Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.app.deniedPrivilegeDescription",defaultMessage:"To use Upgrade Assistant and resolve deprecation issues, you must have access to manage all Kibana spaces."})})):e?Object(C.jsx)(ga,null):"isUpgrading"===n?Object(C.jsx)(O.EuiPageContent,{hasShadow:!1,paddingSize:"none",verticalPosition:"center",horizontalPosition:"center","data-test-subj":"isUpgradingMessage"},Object(C.jsx)(O.EuiEmptyPrompt,{iconType:"logoElasticsearch",title:Object(C.jsx)("h1",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.upgradingTitle",defaultMessage:"Your cluster is upgrading"})),body:Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.upgradingDescription",defaultMessage:"One or more Elasticsearch nodes have a newer version of Elasticsearch than Kibana. Once all your nodes are upgraded, upgrade Kibana."})),"data-test-subj":"emptyPrompt"})):"isUpgradeComplete"===n?Object(C.jsx)(O.EuiPageContent,{hasShadow:!1,paddingSize:"none",verticalPosition:"center",horizontalPosition:"center","data-test-subj":"isUpgradeCompleteMessage"},Object(C.jsx)(O.EuiEmptyPrompt,{iconType:"logoElasticsearch",title:Object(C.jsx)("h1",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.upgradedTitle",defaultMessage:"Your cluster has been upgraded"})),body:Object(C.jsx)("p",null,Object(C.jsx)(v.FormattedMessage,{id:"xpack.upgradeAssistant.upgradedDescription",defaultMessage:"All Elasticsearch nodes have been upgraded. You may now upgrade Kibana."})),"data-test-subj":"emptyPrompt"})):Object(C.jsx)(h.Switch,null,Object(C.jsx)(h.Route,{exact:!0,path:"/overview",component:Ka}),Object(C.jsx)(h.Route,{exact:!0,path:"/es_deprecations",component:kt}),Object(C.jsx)(h.Route,{exact:!0,path:"/es_deprecation_logs",component:pa}),Object(C.jsx)(h.Route,{exact:!0,path:"/kibana_deprecations",component:se}),Object(C.jsx)(h.Redirect,{from:"/",to:"/overview"}))},Va=({history:e})=>{const{services:{api:t}}=M(),{isLoading:s,isInitialRequest:a}=t.useLoadClusterUpgradeStatus();return s&&a?Object(C.jsx)(O.EuiPageContent,{hasShadow:!1,paddingSize:"none",verticalPosition:"center",horizontalPosition:"center"},Object(C.jsx)(O.EuiEmptyPrompt,{body:Object(C.jsx)(O.EuiLoadingSpinner,{size:"l"})})):Object(C.jsx)(h.Router,{history:e},Object(C.jsx)(Ya,null))},Ha=e=>{const{history:t,core:{i18n:s,application:a,http:n}}=e.services;return Object(C.jsx)(y.RedirectAppLinks,{application:a,className:k.a},Object(C.jsx)(k.b,{httpClient:n,privilegesEndpoint:`${E.a}/privileges`},Object(C.jsx)(s.Context,null,Object(C.jsx)(T,{value:e},Object(C.jsx)(Qa,null,Object(C.jsx)(Va,{history:t}))))))};var Ja=s(10),Za=s(13);function Xa(e,t){const{element:s,setBreadcrumbs:a}=e;return Ja.a.setup(t.services.core.http),Za.a.setup(a),Object(m.render)(Object(C.jsx)(Ha,t),s),()=>{Object(m.unmountComponentAtNode)(s)}}}])]);