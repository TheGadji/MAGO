/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[1],{101:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20);t.default=function(e){n.useEffect(e,[])}},102:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(20),l=a.n(n),s=a(61),i=a(69),r=a.n(i),o=a(7),p=a(21);const c=e=>{const{children:t,...a}=e;return Object(p.jsx)(l.a.Fragment,null,t(a))};c.propTypes={children:r.a.func.isRequired,error:r.a.object,errorInfo:r.a.object,resetErrorState:r.a.func.isRequired};const u=Object(s.compose)(Object(s.withState)("error","setError",null),Object(s.withState)("errorInfo","setErrorInfo",null),Object(s.withHandlers)({resetErrorState:({setError:e,setErrorInfo:t})=>()=>{e(null),t(null)}}),Object(s.lifecycle)({componentDidCatch(e,t){this.props.setError(e),this.props.setErrorInfo(t)}}),Object(s.mapProps)((e=>Object(o.omit)(e,["setError","setErrorInfo"]))))(c)},103:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(20);var n=a(22),l=a(96),s=a(21);const i=({animated:e=!1,text:t="",backgroundColor:a="#000000"})=>{if(e)return Object(s.jsx)("div",{className:"canvasLoading"},t&&Object(s.jsx)("span",null,t," "),Object(s.jsx)(n.EuiLoadingSpinner,{size:"m"}));const i=Object(l.a)(a);let r="text";return i&&Object(n.isColorDark)(i[0],i[1],i[2])&&(r="ghost"),Object(s.jsx)("div",{className:"canvasLoading"},t&&Object(s.jsx)("span",null,t," "),Object(s.jsx)(n.EuiIcon,{color:r,type:"clock"}))};i.defaultProps={animated:!1,backgroundColor:"#000000",text:""}},387:function(e,t,a){"use strict";a.r(t),a.d(t,"datasourceSpecs",(function(){return M})),a.d(t,"initializeElements",(function(){return W})),a.d(t,"modelSpecs",(function(){return Z})),a.d(t,"viewSpecs",(function(){return fe})),a.d(t,"viewInitializers",(function(){return xe})),a.d(t,"initializeViews",(function(){return Oe})),a.d(t,"args",(function(){return Pt})),a.d(t,"initializers",(function(){return zt})),a.d(t,"initializeArgs",(function(){return kt})),a.d(t,"tagSpecs",(function(){return Rt})),a.d(t,"transformSpecs",(function(){return qt}));var n=a(2),l=a.n(n),s=a(20),i=a.n(s),r=a(22),o=a(7),p=a(59);const c=["string","number","boolean"],u=()=>new Error(`Arg setting helpers only support ${c.join(",")}`),m=e=>Object(o.includes)(c,e);function g(e){const t=Object(p.getType)(e);if(!m(t))throw u();return e}function d(e,t){return t[e]?t[e].map((e=>{if(!m(Object(p.getType)(e)))throw u();return e})):[]}function h(e,t){return{[e]:(t=Array.isArray(t)?t:[t]).map(g)}}var b=a(60),y=a(54),j=a(21);const{Essql:f}=y.e;class essql_EssqlDatasource extends s.PureComponent{constructor(...e){super(...e),l()(this,"defaultQuery",`SELECT * FROM "${this.props.defaultIndex}"`),l()(this,"getQuery",(()=>d(this.getArgName(),this.props.args)[0])),l()(this,"getArgName",(()=>{const{args:e}=this.props;return d("_",e)[0]?"_":d("q",e)[0]?"q":"query"})),l()(this,"setArg",((e,t)=>{const{args:a,updateArgs:n}=this.props;n&&n({...a,...h(e,t)})})),l()(this,"onChange",(e=>{const{value:t}=e.target;this.props.setInvalid(!t.trim()),this.setArg(this.getArgName(),t)}))}componentDidMount(){const e=this.getQuery();"string"!=typeof e?this.setArg(this.getArgName(),this.defaultQuery):this.props.setInvalid(!e.trim())}render(){const{isInvalid:e}=this.props;return Object(j.jsx)(r.EuiFormRow,{isInvalid:e,label:f.getLabel(),labelAppend:Object(j.jsx)(r.EuiText,{size:"xs"},Object(j.jsx)(r.EuiLink,{href:y.k,target:"_blank"},f.getLabelAppend()))},Object(j.jsx)(r.EuiTextArea,{placeholder:this.defaultQuery,isInvalid:e,className:"canvasTextArea__code",value:this.getQuery(),onChange:this.onChange,rows:15}))}}var x=a(58),O=a.n(x),v=a(90),N=a.n(v),C=a(91);const S=({selected:e=[],fields:t=[],onChange:a,onFocus:n,onBlur:l})=>{const s=t.map((e=>({label:e}))),i=e.map((e=>({label:e})));return Object(j.jsx)(r.EuiComboBox,{selectedOptions:i,options:s,onChange:e=>a(e.map((({label:e})=>e))),className:"canvasFieldsSelect",onFocus:n,onBlur:l,compressed:!0})},T=e=>{const{index:t,selected:a,onChange:n}=e,[l,i]=Object(s.useState)([]),r=N()(t),p=Object(s.useRef)(!0);return Object(s.useEffect)((()=>{r!==t&&Object(C.b)(t).then((e=>{if(!p.current)return;i(e||[]);const t=a.filter((t=>(e||[]).includes(t)));Object(o.isEqual)(t,a)||n(t)}))}),[l,t,n,r,a]),Object(s.useEffect)((()=>()=>{p.current=!1}),[]),Object(j.jsx)(S,O()({},e,{fields:l}))},E=({value:e,fields:t=[],onChange:a,onFocus:n,onBlur:l})=>{const s=e?[{label:e}]:[],i=t.map((e=>({label:e})));return Object(j.jsx)(r.EuiComboBox,{selectedOptions:s,options:i,onChange:([e])=>{var t;return a(null!==(t=null==e?void 0:e.label)&&void 0!==t?t:null)},onSearchChange:e=>{e&&a(null)},onFocus:n,onBlur:l,singleSelection:{asPlainText:!0},isClearable:!1,compressed:!0})},D=e=>{const{index:t,value:a,onChange:n}=e,[l,i]=Object(s.useState)([]);return Object(s.useEffect)((()=>{Object(C.b)(t).then((e=>i(e||[])))}),[t]),Object(s.useEffect)((()=>{a&&!l.includes(a)&&n(null)}),[a,l,n]),Object(j.jsx)(E,O()({},e,{fields:l}))};var F=a(101),A=a.n(F);const _="_all",w=({value:e="_all",loading:t,indices:a,onChange:n,onFocus:l,onBlur:s})=>{const i=e!==_?[{label:e}]:[],o=a.map((e=>({label:e})));return Object(j.jsx)(r.EuiComboBox,{selectedOptions:i,onChange:([e])=>{var t;return n(null!==(t=null==e?void 0:e.label)&&void 0!==t?t:_)},onSearchChange:e=>{e&&n(_)},onBlur:s,onFocus:l,isDisabled:t,options:o,singleSelection:{asPlainText:!0},isClearable:!1,onCreateOption:e=>n(e||_),compressed:!0})},I=e=>{const{value:t,onChange:a}=e,[n,l]=Object(s.useState)([]),[i,r]=Object(s.useState)(!0),o=Object(s.useRef)(!0);return A()((()=>(Object(C.c)().then((e=>{o.current&&(e||(e=[]),r(!1),l(e.sort()),!t&&e.length&&a(e[0]))})),()=>{o.current=!1}))),Object(j.jsx)(w,O()({},e,{indices:n,loading:i}))},{ESDocs:H}=y.e,P=({args:e,updateArgs:t,defaultIndex:a})=>{const n=Object(s.useCallback)(((a,n)=>{t&&t({...e,...h(a,n)})}),[e,t]),l=()=>d("_",e)[0]?"_":d("q",e)[0]?"q":"query",i=(()=>{const t=d("fields",e)[0]||"";return 0===t.length?[]:t.split(",").map((e=>e.trim()))})(),[o,p]=(d("sort",e)[0]||", DESC").split(",").map((e=>e.trim())),c=d("index",e)[0]||a||"";Object(s.useEffect)((()=>{d("index",e)[0]!==c&&n("index",c)}),[e,c,n]);const u=[{value:"asc",text:H.getAscendingOption()},{value:"desc",text:H.getDescendingOption()}];return Object(j.jsx)("div",null,Object(j.jsx)(r.EuiFormRow,{label:H.getIndexTitle(),helpText:H.getIndexLabel(),display:"rowCompressed"},Object(j.jsx)(I,{value:c,onChange:e=>n("index",e)})),Object(j.jsx)(r.EuiFormRow,{label:H.getFieldsTitle(),helpText:i.length<=10?H.getFieldsLabel():H.getFieldsWarningLabel(),display:"rowCompressed"},Object(j.jsx)(T,{index:c,onChange:e=>n("fields",e.join(", ")),selected:i})),Object(j.jsx)(r.EuiSpacer,{size:"s"}),Object(j.jsx)(r.EuiAccordion,{id:"accordionAdvancedSettings",buttonContent:"Advanced settings",className:"canvasSidebar__accordion"},Object(j.jsx)(r.EuiSpacer,{size:"s"}),Object(j.jsx)(r.EuiFormRow,{label:H.getSortFieldTitle(),display:"columnCompressed"},Object(j.jsx)(D,{index:c,value:o,onChange:e=>n("sort",[e,p].join(", "))})),Object(j.jsx)(r.EuiFormRow,{label:H.getSortOrderTitle(),display:"columnCompressed"},Object(j.jsx)(r.EuiSelect,{value:p.toLowerCase(),onChange:e=>n("sort",[o,e.target.value].join(", ")),options:u,compressed:!0})),Object(j.jsx)(r.EuiFormRow,{label:H.getQueryTitle(),labelAppend:Object(j.jsx)(r.EuiText,{size:"xs"},Object(j.jsx)(r.EuiLink,{href:y.g,target:"_blank"},H.getQueryLabel())),display:"rowCompressed"},Object(j.jsx)(r.EuiTextArea,{value:d(l(),e)[0]||"",onChange:e=>n(l(),e.target.value),compressed:!0}))),Object(j.jsx)(r.EuiSpacer,{size:"m"}),Object(j.jsx)(r.EuiCallOut,{size:"s",title:H.getWarningTitle(),iconType:"alert",color:"warning"},Object(j.jsx)("p",null,H.getWarning())))},{DemoData:z}=y.e,k=()=>Object(j.jsx)(r.EuiCallOut,{title:z.getHeading(),iconType:"iInCircle"},Object(j.jsx)(r.EuiText,{size:"s"},Object(j.jsx)("p",null,z.getDescription())));var L=a(27);const{Timelion:R}=y.e,V=({args:e,updateArgs:t,defaultIndex:a})=>{const n=`.es(index=${a})`,l=(a,n)=>{t&&t({...e,...h(a,n)})},s=d("_",e)[0]?"_":d("q",e)[0]?"q":"query";return Object(j.jsx)("div",null,Object(j.jsx)(r.EuiCallOut,{title:R.getTipsHeading(),size:"s",iconType:"iInCircle"},Object(j.jsx)("ul",null,Object(j.jsx)("li",null,Object(j.jsx)(L.FormattedMessage,{id:"xpack.canvas.uis.dataSources.timelion.tips.time",defaultMessage:"{timelion} requires a time range. Add a time filter element to your page or use the expression editor to pass one in.",values:{timelion:y.l}})),Object(j.jsx)("li",null,Object(j.jsx)(L.FormattedMessage,{id:"xpack.canvas.uis.dataSources.timelion.tips.functions",defaultMessage:"Some {timelion} functions, such as {functionExample}, do not translate to a {canvas} data table. However, anything todo with data manipulation should work as expected.",values:{timelion:y.l,canvas:y.c,functionExample:Object(j.jsx)(r.EuiCode,null,".color()")}})))),Object(j.jsx)(r.EuiSpacer,{size:"m"}),Object(j.jsx)(r.EuiFormRow,{label:R.getQueryLabel(),labelAppend:Object(j.jsx)(r.EuiText,{size:"xs"},Object(j.jsx)(r.EuiLink,{href:y.m,target:"_blank"},R.queryLabel())),display:"rowCompressed"},Object(j.jsx)(r.EuiTextArea,{className:"canvasTextArea__code",value:d(s,e)[0]||n,onChange:e=>l(s,e.target.value),rows:15})),Object(j.jsx)(r.EuiFormRow,{label:R.getIntervalLabel(),helpText:R.getIntervalHelp(),display:"columnCompressed"},Object(j.jsx)(r.EuiFieldText,{compressed:!0,value:d("interval",e)[0]||"auto",onChange:e=>l("interval",e.target.value)})))},M=[()=>({name:"essql",displayName:f.getDisplayName(),help:f.getHelp(),image:"database",template:Object(b.a)(essql_EssqlDatasource)}),()=>({name:"esdocs",displayName:H.getDisplayName(),help:H.getHelp(),image:"documents",template:Object(b.a)(P)}),()=>({name:"demodata",displayName:z.getDisplayName(),help:z.getHelp(),image:"training",template:Object(b.a)(k)}),()=>({name:"timelion",displayName:y.l,help:R.getHelp(),image:"visTimelion",template:Object(b.a)(V)})];var B=a(131);var U=a(64);var q=a(33);const G=[()=>({name:"areaChart",displayName:"Area",help:"A line chart with a filled body",type:"chart",icon:"visArea",expression:'filters\n  | demodata\n  | pointseries x="time" y="mean(price)"\n  | plot defaultStyle={seriesStyle lines=1 fill=1}\n  | render'}),()=>({name:"bubbleChart",displayName:"Bubble",type:"chart",help:"A customizable bubble chart",width:700,height:300,icon:"heatmap",expression:'filters\n| demodata\n| pointseries x="project" y="sum(price)" color="state" size="size(username)"\n| plot defaultStyle={seriesStyle points=5 fill=1}\n| render'}),()=>({name:"debug",displayName:"Debug data",help:"Just dumps the configuration of the element",icon:"bug",expression:"demodata\n| render as=debug"}),()=>({name:"dropdownFilter",displayName:"Dropdown select",type:"filter",help:'A dropdown from which you can select values for an "exactly" filter',icon:"filter",height:50,expression:"demodata\n| dropdownControl valueColumn=project filterColumn=project | render",filter:""}),()=>({name:"filterDebug",displayName:"Debug filter",help:"Shows the underlying global filters in a workpad",icon:"bug",expression:"filters\n| render as=debug"}),()=>({name:"image",displayName:"Image",type:"image",help:"A static image",icon:"image",expression:'image dataurl=null mode="contain"\n| render'}),()=>({name:"horizontalBarChart",displayName:"Bar horizontal",type:"chart",help:"A customizable horizontal bar chart",icon:"visBarHorizontal",expression:'filters\n| demodata\n| pointseries x="size(cost)" y="project" color="project"\n| plot defaultStyle={seriesStyle bars=0.75 horizontalBars=true} legend=false\n| render'}),()=>({name:"horizontalProgressBar",displayName:"Horizontal bar",type:"progress",help:"Displays progress as a portion of a horizontal bar",width:400,height:30,expression:`filters\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="horizontalBar" label={formatnumber 0%} font={font size=24 family="${U.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"horizontalProgressPill",displayName:"Horizontal pill",type:"progress",help:"Displays progress as a portion of a horizontal pill",width:400,height:30,expression:`filters\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="horizontalPill" label={formatnumber 0%} font={font size=24 family="${U.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"lineChart",displayName:"Line",type:"chart",help:"A customizable line chart",icon:"visLine",expression:'filters\n| demodata\n| pointseries x="time" y="mean(price)"\n| plot defaultStyle={seriesStyle lines=3}\n| render'}),()=>({name:"markdown",displayName:"Text",type:"text",help:"Add text using Markdown",icon:"visText",expression:'filters\n| demodata\n| markdown "### Welcome to the Markdown element\n\nGood news! You\'re already connected to some demo data!\n\nThe data table contains\n**{{rows.length}} rows**, each containing\n the following columns:\n{{#each columns}}\n **{{name}}**\n{{/each}}\n\nYou can use standard Markdown in here, but you can also access your piped-in data using Handlebars. If you want to know more, check out the [Handlebars documentation](https://ela.st/handlebars-docs).\n\n#### Enjoy!" | render'}),()=>({name:"pie",displayName:"Pie",type:"chart",width:300,height:300,help:"A simple pie chart",icon:"visPie",expression:'filters\n| demodata\n| pointseries color="state" size="max(price)"\n| pie\n| render'}),()=>({name:"plot",displayName:"Coordinate plot",type:"chart",help:"Mixed line, bar or dot charts",expression:'filters\n| demodata\n| pointseries x="time" y="sum(price)" color="state"\n| plot defaultStyle={seriesStyle points=5}\n| render'}),()=>({name:"progressGauge",displayName:"Gauge",type:"progress",help:"Displays progress as a portion of a gauge",width:200,height:200,icon:"visGoal",expression:`filters\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="gauge" label={formatnumber 0%} font={font size=24 family="${U.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"progressSemicircle",displayName:"Semicircle",type:"progress",help:"Displays progress as a portion of a semicircle",width:200,height:100,expression:`filters\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="semicircle" label={formatnumber 0%} font={font size=24 family="${U.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"progressWheel",displayName:"Wheel",type:"progress",help:"Displays progress as a portion of a wheel",width:200,height:200,expression:`filters\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="wheel" label={formatnumber 0%} font={font size=24 family="${U.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"repeatImage",displayName:"Image repeat",type:"image",help:"Repeats an image N times",expression:'filters\n| demodata\n| math "mean(cost)"\n| repeatImage image=null\n| render'}),()=>({name:"revealImage",displayName:"Image reveal",type:"image",help:"Reveals a percentage of an image",expression:'filters\n| demodata\n| math "mean(percent_uptime)"\n| revealImage origin=bottom image=null\n| render'}),()=>({name:"shape",displayName:"Shape",type:"shape",help:"A customizable shape",width:200,height:200,icon:"node",expression:'shape "square" fill="#4cbce4" border="rgba(255,255,255,0)" borderWidth=0 maintainAspect=false | render'}),()=>({name:"table",displayName:"Data table",type:"chart",help:"A scrollable grid for displaying data in a tabular format",icon:"visTable",expression:"filters\n| demodata\n| table\n| render"}),()=>({name:"timeFilter",displayName:"Time filter",type:"filter",help:"Set a time window",icon:"calendar",height:50,expression:"timefilterControl compact=true column=@timestamp\n| render",filter:"timefilter column=@timestamp from=now-24h to=now"}),()=>({name:"verticalBarChart",displayName:"Vertical bar chart",type:"chart",help:"A customizable vertical bar chart",icon:"visBarVertical",expression:'filters\n| demodata\n| pointseries x="project" y="size(cost)" color="project"\n| plot defaultStyle={seriesStyle bars=0.75} legend=false\n| render'}),()=>({name:"verticalProgressBar",displayName:"Vertical progress bar",type:"progress",help:"Displays progress as a portion of a vertical bar",width:80,height:400,expression:`filters\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="verticalBar" label={formatnumber 0%} font={font size=24 family="${U.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"verticalProgressPill",displayName:"Vertical progress pill",type:"progress",help:"Displays progress as a portion of a vertical pill",width:80,height:400,expression:`filters\n| demodata\n| math "mean(percent_uptime)"\n| progress shape="verticalPill" label={formatnumber 0%} font={font size=24 family="${U.openSans.value}" color="#000000" align=center}\n| render`}),()=>({name:"tagCloud",displayName:"Tag Cloud",type:"chart",help:"Tagcloud visualization",icon:"visTagCloud",expression:'filters\n  | demodata\n  | ply by="country" fn={math "count(country)" | as "Count"}\n  | filterrows fn={getCell "Count" | gte 10}\n  | tagcloud metric={visdimension "Count"} bucket={visdimension "country"}\n  | render'})],$=[(e,t)=>()=>({name:"metric",displayName:"Metric",type:"chart",help:"A number with a label",width:200,height:100,icon:"visMetric",expression:`filters\n  | demodata\n  | math "unique(country)"\n  | metric "Countries"\n    metricFont={font size=48 family="${U.openSans.value}" color="#000000" align="center" lHeight=48}\n    labelFont={font size=14 family="${U.openSans.value}" color="#000000" align="center"}\n    metricFormat="${e.uiSettings.get(q.FORMATS_UI_SETTINGS.FORMAT_NUMBER_DEFAULT_PATTERN)}"\n  | render`})],W=(e,t)=>{const a=[...G,...$.map((a=>a(e,t)))];return Object(B.a)(a)};var Y=a(72);const{PointSeries:Q}=y.i,{Math:X}=y.i,{Tagcloud:J}=y.r,Z=[()=>({name:"pointseries",displayName:Q.getDisplayName(),args:[{name:"x",displayName:Q.getXAxisDisplayName(),help:Q.getXAxisHelp(),argType:"datacolumn"},{name:"y",displayName:Q.getYaxisDisplayName(),help:Q.getYaxisHelp(),argType:"datacolumn"},{name:"color",displayName:Q.getColorDisplayName(),help:Q.getColorHelp(),argType:"datacolumn"},{name:"size",displayName:Q.getSizeDisplayName(),help:Q.getSizeHelp(),argType:"datacolumn"},{name:"text",displayName:Q.getTextDisplayName(),help:Q.getTextHelp(),argType:"datacolumn"}],resolve:({context:e})=>"ready"!==Object(Y.b)(e)?{columns:[]}:{columns:Object(o.get)(Object(Y.c)(e),"columns",[])}}),()=>({name:"math",displayName:X.getDisplayName(),args:[{name:"_",displayName:X.getValueDisplayName(),help:X.getValueHelp(),argType:"datacolumn",options:{onlyMath:!1}}],resolve:({context:e})=>"ready"!==Object(Y.b)(e)?{columns:[]}:{columns:Object(o.get)(Object(Y.c)(e),"columns",[])}}),()=>({name:"tagcloud",displayName:J.getDisplayName(),args:[{name:"metric",displayName:J.getMetricColumnDisplayName(),help:J.getMetricColumnHelp(),argType:"vis_dimension"},{name:"bucket",displayName:J.getBucketColumnDisplayName(),help:J.getBucketColumnHelp(),argType:"vis_dimension"},{name:"palette",argType:"palette"},{name:"orientation",displayName:J.getOrientationColumnDisplayName(),help:J.getOrientationColumnHelp(),argType:"select",default:"single",options:{choices:[{value:"single",name:J.getOrientationSingle()},{value:"right angled",name:J.getOrientationRightAngled()},{value:"multiple",name:J.getOrientationMultiple()}]}},{name:"scale",displayName:J.getScaleColumnDisplayName(),help:J.getScaleColumnHelp(),argType:"select",default:"linear",options:{choices:[{value:"linear",name:J.getScaleLinear()},{value:"log",name:J.getScaleLog()},{value:"square root",name:J.getScaleSquareRoot()}]}},{name:"minFontSize",displayName:J.getMinFontHeightColumnDisplayName(),help:J.getMinFontHeightColumnHelp(),argType:"number",default:18},{name:"maxFontSize",displayName:J.getMaxFontHeightColumnDisplayName(),help:J.getMaxFontHeightColumnHelp(),argType:"number",default:72},{name:"showLabel",displayName:J.getShowLabelColumnDisplayName(),help:J.getShowLabelColumnHelp(),argType:"toggle",default:!0}],resolve:({context:e})=>"ready"!==Object(Y.b)(e)?{columns:[]}:{columns:Object(o.get)(Object(Y.c)(e),"columns",[])}})],{DropdownControl:K}=y.r,{GetCell:ee}=y.r;var te=a(34);const{Image:ae}=y.r,{Markdown:ne}=y.r,{Metric:le}=y.r,se=[{name:"Hidden",value:!1},{name:"Top Left",value:"nw"},{name:"Top Right",value:"ne"},{name:"Bottom Left",value:"sw"},{name:"Bottom Right",value:"se"}],{Pie:ie}=y.r,{Plot:re}=y.r,oe=["lines","bars","points","fill","stack"];var pe=a(44);const{Progress:ce}=y.r,{RepeatImage:ue}=y.r,{RevealImage:me}=y.r;var ge=a(0),de=a(55);const{Render:he}=y.r,{Shape:be}=y.r,{Table:ye}=y.r,{Timefilter:je}=y.r,fe=[()=>({name:"dropdownControl",displayName:K.getDisplayName(),modelArgs:[],args:[{name:"valueColumn",displayName:K.getValueDisplayName(),help:K.getValueHelp(),argType:"string",options:{confirm:"Set"}},{name:"filterColumn",displayName:K.getFilterDisplayName(),help:K.getFilterHelp(),argType:"string",options:{confirm:"Set"}},{name:"filterGroup",displayName:K.getFilterGroupDisplayName(),help:K.getFilterGroupHelp(),argType:"filterGroup"}]}),()=>({name:"getCell",displayName:ee.getDisplayName(),help:ee.getHelp(),modelArgs:["size"],requiresContext:!0,args:[]}),()=>({name:"image",displayName:ae.getDisplayName(),modelArgs:[],requiresContext:!1,args:[{name:"dataurl",argType:"imageUpload",resolve:async({args:e})=>{const{elasticLogo:t}=await Object(te.getElasticLogo)();return{dataurl:Object(te.resolveFromArgs)(e,t)}}},{name:"mode",displayName:ae.getModeDisplayName(),help:ae.getModeHelp(),argType:"select",options:{choices:[{value:"contain",name:ae.getContainMode()},{value:"cover",name:ae.getCoverMode()},{value:"stretch",name:ae.getStretchMode()}]}}]}),()=>({name:"markdown",displayName:ne.getDisplayName(),help:ne.getHelp(),modelArgs:[],requiresContext:!1,args:[{name:"_",displayName:ne.getContentDisplayName(),help:ne.getContentHelp(),argType:"textarea",default:'""',options:{confirm:"Apply"},multi:!0},{name:"font",argType:"font"},{name:"openLinksInNewTab",displayName:ne.getOpenLinksInNewTabDisplayName(),help:ne.getOpenLinksInNewTabHelp(),label:ne.getOpenLinksInNewTabLabelName(),argType:"toggle",default:!1,options:{labelValue:ne.getOpenLinksInNewTabLabelName()}}]}),()=>({name:"pie",displayName:ie.getDisplayName(),modelArgs:[["color",{label:"Slice Labels"}],["size",{label:"Slice Angles"}]],args:[{name:"palette",argType:"palette"},{name:"legend",displayName:ie.getLegendDisplayName(),help:ie.getLegendHelp(),argType:"select",default:"ne",options:{choices:se}},{name:"hole",displayName:ie.getHoleDisplayName(),help:ie.getHoleHelp(),argType:"range",default:50,options:{min:0,max:100}},{name:"labelRadius",displayName:ie.getLabelRadiusDisplayName(),help:ie.getLabelRadiusHelp(),argType:"range",default:100,options:{min:0,max:100}},{name:"radius",displayName:ie.getRadiusDisplayName(),help:ie.getRadiusHelp(),argType:"percentage",default:1},{name:"tilt",displayName:ie.getTiltDisplayName(),help:ie.getTiltHelp(),argType:"percentage",default:1},{name:"labels",displayName:ie.getLabelsDisplayName(),help:ie.getLabelsHelp(),argType:"toggle",default:!0,options:{labelValue:ie.getLabelsToggleSwitch()}},{name:"seriesStyle",argType:"seriesStyle",multi:!0},{name:"font",argType:"font"}],resolve:({context:e})=>"ready"!==Object(Y.b)(e)?{labels:[]}:{labels:Object(o.uniq)(Object(o.map)(Object(Y.c)(e).rows,"color").filter((e=>void 0!==e)))}}),()=>({name:"plot",displayName:re.getDisplayName(),modelArgs:["x","y","color","size","text"],args:[{name:"palette",argType:"palette"},{name:"legend",displayName:re.getLegendDisplayName(),help:re.getLegendHelp(),argType:"select",default:"ne",options:{choices:se}},{name:"xaxis",displayName:re.getXaxisDisplayName(),help:re.getXaxisHelp(),argType:"axisConfig",default:!0},{name:"yaxis",displayName:re.getYaxisDisplayName(),help:re.getYaxisHelp(),argType:"axisConfig",default:!0},{name:"font",argType:"font"},{name:"defaultStyle",displayName:re.getDefaultStyleDisplayName(),help:re.getDefaultStyleHelp(),argType:"seriesStyle",default:"{seriesStyle points=5}",options:{include:oe}},{name:"seriesStyle",argType:"seriesStyle",options:{include:oe},multi:!0}],resolve:({context:e})=>"ready"!==Object(Y.b)(e)?{labels:[]}:{labels:Object(o.uniqBy)(Object(o.map)(Object(Y.c)(e).rows,"color").filter((e=>void 0!==e)))}}),()=>({name:"progress",displayName:ce.getDisplayName(),modelArgs:[["_",{label:"Value"}]],requiresContext:!1,args:[{name:"shape",displayName:ce.getShapeDisplayName(),help:ce.getShapeHelp(),argType:"select",options:{choices:Object(pe.getAvailableProgressShapes)().map((e=>({value:e,name:e[0].toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1")})))}},{name:"max",displayName:ce.getMaxDisplayName(),help:ce.getMaxHelp(),argType:"number",default:"1"},{name:"valueColor",displayName:ce.getValueColorDisplayName(),help:ce.getValueColorHelp(),argType:"color",default:"#1785b0"},{name:"valueWeight",displayName:ce.getValueWeightDisplayName(),help:ce.getValueWeightHelp(),argType:"number",default:"20"},{name:"barColor",displayName:ce.getBarColorDisplayName(),help:ce.getBarColorHelp(),argType:"color",default:"#f0f0f0"},{name:"barWeight",displayName:ce.getBarWeightDisplayName(),help:ce.getBarWeightHelp(),argType:"number",default:"20"},{name:"label",displayName:ce.getLabelDisplayName(),help:ce.getLabelHelp(),argType:"toggle",default:"true"},{name:"font",displayName:ce.getFontDisplayName(),help:ce.getFontHelp(),argType:"font",default:`{font size=24 family="${U.openSans.value}" color="#000000" align=center}`}]}),()=>({name:"repeatImage",displayName:ue.getDisplayName(),modelArgs:[["_",{label:"Value"}]],args:[{name:"image",displayName:ue.getImageDisplayName(),help:ue.getImageHelp(),argType:"imageUpload"},{name:"emptyImage",displayName:ue.getEmptyImageDisplayName(),help:ue.getEmptyImageHelp(),argType:"imageUpload"},{name:"size",displayName:ue.getSizeDisplayName(),help:ue.getSizeHelp(),argType:"number",default:"100"},{name:"max",displayName:ue.getMaxDisplayName(),help:ue.getMaxHelp(),argType:"number",default:"1000"}]}),()=>({name:"revealImage",displayName:me.getDisplayName(),modelArgs:[["_",{label:"Value"}]],args:[{name:"image",displayName:me.getImageDisplayName(),help:me.getImageHelp(),argType:"imageUpload"},{name:"emptyImage",displayName:me.getEmptyImageDisplayName(),help:me.getEmptyImageHelp(),argType:"imageUpload"},{name:"origin",displayName:me.getOriginDisplayName(),help:me.getOriginHelp(),argType:"select",options:{choices:[{value:"top",name:me.getOriginTop()},{value:"left",name:me.getOriginLeft()},{value:"bottom",name:me.getOriginBottom()},{value:"right",name:me.getOriginRight()}]}}]}),()=>({name:"render",displayName:he.getDisplayName(),help:he.getHelp(),modelArgs:[],requiresContext:!1,args:[{name:"containerStyle",argType:"containerStyle"},{name:"css",displayName:de.f,help:he.getCssHelp(),argType:"textarea",default:`"${ge.q}"`,options:{confirm:he.getCssApply()}}]}),()=>({name:"shape",displayName:be.getDisplayName(),modelArgs:[],requiresContext:!1,args:[{name:"_",displayName:be.getShapeDisplayName(),argType:"shape",options:{shapes:Object(pe.getAvailableShapes)()}},{name:"fill",displayName:be.getFillDisplayName(),argType:"color",help:be.getFillHelp()},{name:"border",displayName:be.getBorderDisplayName(),argType:"color",help:be.getBorderHelp()},{name:"borderWidth",displayName:be.getBorderWidthDisplayName(),argType:"number",help:be.getBorderWidthHelp()},{name:"maintainAspect",displayName:be.getMaintainAspectDisplayName(),argType:"toggle",help:be.getMaintainAspectHelp(),options:{labelValue:be.getMaintainAspectLabelName()}}]}),()=>({name:"table",displayName:ye.getDisplayName(),help:ye.getHelp(),modelArgs:[],args:[{name:"font",argType:"font"},{name:"perPage",displayName:ye.getPerPageDisplayName(),help:ye.getPerPageHelp(),argType:"select",default:10,options:{choices:["",5,10,25,50,100].map((e=>({name:String(e),value:e})))}},{name:"paginate",displayName:ye.getPaginateDisplayName(),help:ye.getPaginateHelp(),argType:"toggle",default:!0,options:{labelValue:ye.getPaginateToggleSwitch()}},{name:"showHeader",displayName:ye.getShowHeaderDisplayName(),help:ye.getShowHeaderHelp(),argType:"toggle",default:!0,options:{labelValue:ye.getShowHeaderToggleSwitch()}}]}),()=>({name:"timefilterControl",displayName:je.getDisplayName(),modelArgs:[],args:[{name:"column",displayName:je.getColumnDisplayName(),help:je.getColumnHelp(),argType:"string",options:{confirm:je.getColumnConfirm()}},{name:"filterGroup",displayName:je.getFilterGroupDisplayName(),help:je.getFilterGroupHelp(),argType:"filterGroup"}]})],xe=[(e,t)=>()=>({name:"metric",displayName:le.getDisplayName(),modelArgs:[["_",{label:le.getNumberDisplayName()}]],requiresContext:!1,args:[{name:"metricFormat",displayName:le.getMetricFormatDisplayName(),help:le.getMetricFormatHelp(),argType:"numberFormat",default:`"${e.uiSettings.get(q.FORMATS_UI_SETTINGS.FORMAT_NUMBER_DEFAULT_PATTERN)}"`},{name:"_",displayName:le.getLabelDisplayName(),help:le.getLabelHelp(),argType:"string",default:'""'},{name:"metricFont",displayName:le.getMetricFontDisplayName(),help:le.getMetricFontHelp(),argType:"font",default:`{font size=48 family="${U.openSans.value}" color="#000000" align=center lHeight=48}`},{name:"labelFont",displayName:le.getLabelFontDisplayName(),help:le.getLabelFontHelp(),argType:"font",default:`{font size=18 family="${U.openSans.value}" color="#000000" align=center}`}]})],Oe=(e,t)=>[...fe,...xe.map((a=>a(e,t)))],ve=({onValueChange:e,argValue:t})=>Object(j.jsx)(r.EuiSwitch,{compressed:!0,checked:Boolean(t),onChange:()=>e(!Boolean(t)),showLabel:!1,label:""});ve.displayName="AxisConfigSimpleInput";var Ne=a(71),Ce=a.n(Ne),Se=a(110);const{AxisConfig:Te}=Se.a,{set:Ee}=Ce.a,De={type:"expression",chain:[{type:"function",function:"axisConfig",arguments:{}}]};class extended_template_ExtendedTemplate extends s.PureComponent{constructor(...e){super(...e),l()(this,"getArgValue",((e,t)=>Object(o.get)(this.props.argValue,`chain.0.arguments.${e}.0`,t))),l()(this,"setArgValue",(e=>t=>{if(!t||!t.target)return;const a=t.target.value,{argValue:n,onValueChange:l}=this.props;l(Ee("boolean"==typeof n?De:n,`chain.0.arguments.${e}.0`,a))}))}render(){if("boolean"==typeof this.props.argValue&&!1===this.props.argValue)return Object(j.jsx)(r.EuiText,{color:"subdued",size:"xs"},Object(j.jsx)("p",null,Te.getDisabledText()));const e={xaxis:[{value:"bottom",text:Te.getPositionBottom()},{value:"top",text:Te.getPositionTop()}],yaxis:[{value:"left",text:Te.getPositionLeft()},{value:"right",text:Te.getPositionRight()}]},t=this.props.typeInstance.name,a=this.getArgValue("position",e[t][0].value),n=e[t];return Object(j.jsx)(s.Fragment,null,Object(j.jsx)(r.EuiFormRow,{label:Te.getPositionLabel(),display:"columnCompressed"},Object(j.jsx)(r.EuiSelect,{compressed:!0,value:a,options:n,onChange:this.setArgValue("position")})),Object(j.jsx)(r.EuiSpacer,{size:"s"}))}}l()(extended_template_ExtendedTemplate,"displayName","AxisConfigExtendedInput");const{AxisConfig:Fe}=y.b,{DataColumn:Ae}=y.b,_e=({onChange:e,value:t,onlymath:a})=>{const n=[{text:Ae.getOptionAverage(),value:"mean"},{text:Ae.getOptionCount(),value:"size"},{text:Ae.getOptionFirst(),value:"first"},{text:Ae.getOptionLast(),value:"last"},{text:Ae.getOptionMax(),value:"max"},{text:Ae.getOptionMedian(),value:"median"},{text:Ae.getOptionMin(),value:"min"},{text:Ae.getOptionSum(),value:"sum"},{text:Ae.getOptionUnique(),value:"unique"}];return a||n.unshift({text:Ae.getOptionValue(),value:""}),Object(j.jsx)(r.EuiSelect,{compressed:!0,options:n,value:t,onChange:e})};_e.defaultProps={value:""};var we=a(193),Ie=a(94);const{DataColumn:He}=y.b,Pe=e=>e.match(/\s/)?`'${e}'`:e,ze=e=>!e||0===e.length,ke=(e,t)=>{if("string"!==Object(p.getType)(e))return{error:"argValue is not a string type"};try{const a=t.find((({name:t})=>e===t)),n=function(e){if(""===e)return{fn:"",column:""};const t=Object(we.parse)(e);if("number"==typeof t)throw new Error("Cannot render scalar values or complex math expressions");if("variable"===t.type)return{fn:"",column:Object(Ie.a)(t.value)};if("function"===t.type&&1===t.args.length&&"number"!=typeof t.args[0]&&"variable"===t.args[0].type)return{fn:t.name,column:Object(Ie.a)(t.args[0].value)};throw new Error("Cannot render scalar values or complex math expressions")}(a?Pe(a.name):e);return{...n,column:n.column||""}}catch(e){return{error:e.message}}},Le=({onValueChange:e,columns:t,argValue:a,renderError:n,argId:l,typeInstance:i})=>{const[p,c]=Object(s.useState)(ke(a,t));Object(s.useEffect)((()=>{c(ke(a,t))}),[a,t]);const u=i.options.allowedTypes||!1,m=i.options.onlyMath||!1,g=Object(s.useCallback)(((a,n)=>{if("size"===a){const l=n||t[0]&&t[0].name||"";if(l)return e(`${a}(${Pe(l)})`)}return ze(n)?c({...p,fn:a}):ze(a)?e(n):void e(`${a}(${Pe(n)})`)}),[p,e,t]),d=Object(s.useCallback)((({target:{value:e}})=>g(e,p.column)),[p.column,g]),h=Object(s.useCallback)((({target:{value:e}})=>g(p.fn,e)),[p.fn,g]);if(p.error)return n(),null;const b=Object(o.sortBy)(t,"name").filter((e=>!u||u.includes(e.type))).map((({name:e})=>({value:e,text:e})));return Object(j.jsx)(r.EuiFlexGroup,{gutterSize:"s",id:l,direction:"row"},Object(j.jsx)(r.EuiFlexItem,{grow:!1},Object(j.jsx)(_e,{id:l,value:p.fn,onlymath:m,onChange:d})),Object(j.jsx)(r.EuiFlexItem,null,Object(j.jsx)(r.EuiSelect,{compressed:!0,options:[{value:"",text:"select column",disabled:!0},...b],value:p.column,onChange:h})))};var Re=a(25),Ve=a.n(Re);class format_select_FormatSelect extends s.PureComponent{constructor(...e){super(...e),l()(this,"state",{isCustomFormat:!this.props.formatOptions.map((({value:e})=>e)).includes(this.props.argValue)}),l()(this,"_options",this.props.formatOptions.concat({value:"custom",text:"Custom"})),l()(this,"_handleTextChange",(e=>this.props.onValueChange(e.target.value))),l()(this,"_handleSelectChange",(e=>{const{onValueChange:t,defaultCustomFormat:a}=this.props,{value:n}=this._options[e.target.selectedIndex];return"custom"===n?(this.setState({isCustomFormat:!0}),t(a)):(this.state.isCustomFormat&&this.setState({isCustomFormat:!1}),t(n))}))}render(){const{argId:e,argValue:t,defaultCustomFormat:a}=this.props,{isCustomFormat:n}=this.state;return Object(j.jsx)(s.Fragment,null,Object(j.jsx)(r.EuiSelect,{compressed:!0,id:e,value:n?"custom":t,options:this._options,onChange:this._handleSelectChange}),n&&Object(j.jsx)(s.Fragment,null,Object(j.jsx)(r.EuiSpacer,{size:"s"}),Object(j.jsx)(r.EuiFieldText,{placeholder:a,value:t,compressed:!0,onChange:this._handleTextChange})))}}const Me=({dateFormats:e,onValueChange:t,argValue:a,argId:n})=>Object(j.jsx)(format_select_FormatSelect,{argId:n,argValue:a,formatOptions:e,onValueChange:t,defaultCustomFormat:"M/D/YY h:ma"}),{DateFormat:Be}=y.b,{FilterGroup:Ue}=y.b,qe=({onValueChange:e,argValue:t,argId:a,filterGroups:n})=>{const[l,i]=Object(s.useState)(""),[o,p]=Object(s.useState)(!1),c=t&&!n.includes(t)?[{text:t}]:[],u=[{text:"No group",value:""}].concat(c,n.map((e=>({text:e})))),m=t=>{t.preventDefault(),e(l),p(!1),i("")},g=Object(j.jsx)("form",{onSubmit:m},Object(j.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(j.jsx)(r.EuiFlexItem,null,Object(j.jsx)(r.EuiFieldText,{autoFocus:!0,compressed:!0,type:"text",value:l,onChange:e=>i(e.target.value)})),Object(j.jsx)(r.EuiFlexItem,{grow:!1,className:"canvasSidebar__panel-noMinWidth"},Object(j.jsx)(r.EuiButton,{type:"submit",size:"s",onClick:m},Ue.getButtonSet()))),Object(j.jsx)(r.EuiSpacer,{size:"s"}),Object(j.jsx)(r.EuiButtonEmpty,{color:"danger",size:"xs",onClick:()=>p(!o),flush:"left"},Ue.getButtonCancel())),d=Object(j.jsx)(s.Fragment,null,Object(j.jsx)(r.EuiSelect,{compressed:!0,id:a,value:t||"",options:u,onChange:t=>{const a=t.target.value;e(a)}}),Object(j.jsx)(r.EuiSpacer,{size:"s"}),Object(j.jsx)(r.EuiButtonEmpty,{size:"xs",onClick:()=>p(!o),flush:"left"},Ue.getCreateNewGroup()));return o?g:d};var Ge=a(6);const $e=()=>Ge.i18n.translate("xpack.canvas.assetpicker.assetAltText",{defaultMessage:"Asset thumbnail"});class asset_picker_AssetPicker extends s.PureComponent{componentDidMount(){const e=document.getElementById("canvasAssetPicker__selectedAsset");e&&e.scrollIntoView()}render(){const{assets:e,selected:t,onChange:a}=this.props;return Object(j.jsx)(r.EuiFlexGrid,{id:"canvasAssetPicker",className:"canvasAssetPicker",gutterSize:"s",columns:4},e.map((e=>Object(j.jsx)(r.EuiFlexItem,{key:e.id,id:e.id===t?"canvasAssetPicker__selectedAsset":"",className:"canvasCheckered"},Object(j.jsx)(r.EuiLink,{className:"canvasAssetPicker__link",disabled:e.id===t,onClick:()=>a(e)},Object(j.jsx)(r.EuiImage,{url:e.value,alt:$e()}),e.id===t&&Object(j.jsx)(r.EuiIcon,{className:"canvasAssetPicker__selected",type:"checkInCircleFilled"}))))))}}var We=a(1);const{ImageUpload:Ye}=y.b,Qe=({url:e,inputRef:t,onSubmit:a})=>Object(j.jsx)(r.EuiFormRow,{display:"rowCompressed",onSubmit:a,className:"eui-textRight"},Object(j.jsx)(r.EuiFlexGroup,{gutterSize:"xs"},Object(j.jsx)(r.EuiFlexItem,null,Object(j.jsx)(r.EuiFieldText,{compressed:!0,defaultValue:e,inputRef:t,placeholder:Ye.getUrlFieldPlaceholder(),"aria-label":Ye.getUrlFieldPlaceholder()})),Object(j.jsx)(r.EuiFlexItem,{grow:!1},Object(j.jsx)(r.EuiButton,{type:"submit",size:"s",onClick:a},"Set"))));var Xe=a(103);const{ImageUpload:Je}=y.b,Ze=({loading:e,onChange:t})=>e?Object(j.jsx)(Xe.a,{animated:!0,text:Je.getImageUploading()}):Object(j.jsx)(r.EuiFilePicker,{initialPromptText:Je.getFileUploadPrompt(),onChange:t,compressed:!0,display:"default",className:"canvasImageUpload",accept:"image/*"}),{ImageUpload:Ke}=y.b;class image_upload_ImageUpload extends i.a.Component{constructor(e){super(e),l()(this,"updateAST",(e=>{this.props.onValueChange({type:"expression",chain:[{type:"function",function:"asset",arguments:{_:[e]}}]})})),l()(this,"handleUpload",(e=>{const{onAssetAdd:t}=this.props,[a]=e,[n,l]=Object(o.get)(a,"type","").split("/");"image"===n&&ge.D.indexOf(l)>=0&&(this.setState({loading:!0}),Object(We.encode)(a).then((e=>t("dataurl",e))).then((e=>{this.updateAST(e),this._isMounted&&this.setState({loading:!1})})))})),l()(this,"changeUrlType",(e=>{this.setState({urlType:e})})),l()(this,"setSrcUrl",(()=>{const{value:e}=this.inputRefs.srcUrlText;this.setState({url:e});const{onValueChange:t}=this.props;t(e)}));const t=e.resolvedArgValue||e.argValue||null;let a=Object.keys(e.assets).length?"asset":"file";Object(We.isValidHttpUrl)(t)&&(a="link"),this.inputRefs={},this.state={loading:!1,url:t,urlType:a}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{loading:e,url:t,urlType:a}=this.state,n=Object.values(this.props.assets);let l={};const s=[{id:"file",label:Ke.getFileUrlType()},{id:"link",label:Ke.getLinkUrlType()}];n.length&&(s.unshift({id:"asset",label:Ke.getAssetUrlType()}),l=n.find((({value:e})=>e===t))||{});const i=Object(j.jsx)(r.EuiFormRow,{display:"rowCompressed"},Object(j.jsx)(r.EuiButtonGroup,{buttonSize:"compressed",options:s,idSelected:a,onChange:this.changeUrlType,isFullWidth:!0,className:"canvasSidebar__buttonGroup",legend:Ke.getUrlTypeChangeLegend()})),o={file:Object(j.jsx)(Ze,{loading:e,onChange:this.handleUpload}),link:Object(j.jsx)(Qe,{url:l.id?"":t,inputRef:e=>this.inputRefs.srcUrlText=e,onSubmit:this.setSrcUrl}),asset:Object(j.jsx)(asset_picker_AssetPicker,{assets:n,selected:l.id,onChange:({id:e})=>this.updateAST(e)})};return Object(j.jsx)("div",{className:"canvasSidebar__panel-noMinWidth",style:{position:"relative"}},i,Object(j.jsx)(r.EuiSpacer,{size:"s"}),o[a],Object(j.jsx)(r.EuiSpacer,{size:"s"}))}}const{Number:et}=y.b,tt=({argId:e,argValue:t,typeInstance:a,onValueChange:n})=>{var l;const[i,o]=Object(s.useState)(t),p=null==a||null===(l=a.options)||void 0===l?void 0:l.confirm;Object(s.useEffect)((()=>{o(t)}),[t]);const c=Object(s.useCallback)((e=>{(p?o:n)(e.target.value)}),[p,n]);return Object(j.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(j.jsx)(r.EuiFlexItem,null,Object(j.jsx)(r.EuiFieldNumber,{compressed:!0,id:e,value:Number(i),onChange:c})),p&&Object(j.jsx)(r.EuiFlexItem,{grow:!1},Object(j.jsx)(r.EuiButton,{size:"s",onClick:()=>n(Number(i))},p)))},at=({numberFormats:e,onValueChange:t,argValue:a,argId:n})=>Object(j.jsx)(format_select_FormatSelect,{argId:n,argValue:a,formatOptions:e,onValueChange:t,defaultCustomFormat:"0.0a"}),{NumberFormat:nt}=y.b;var lt=a(118);const st=()=>Ge.i18n.translate("xpack.canvas.palettePicker.emptyPaletteLabel",{defaultMessage:"None"}),it=()=>Ge.i18n.translate("xpack.canvas.palettePicker.noPaletteFoundErrorTitle",{defaultMessage:"Color palette not found"}),rt=(e,t=[])=>{var a;const n=null!==(a=t.filter((t=>t.id===(null==e?void 0:e.id)))[0])&&void 0!==a?a:null;var l;return null===n?null!==(l=t.filter((t=>Object(o.isEqual)(t.colors,null==e?void 0:e.colors)))[0])&&void 0!==l?l:null:n},ot=e=>{const t=lt.b.map((e=>({value:e.id,title:e.label,type:e.gradient?"gradient":"fixed",palette:e.colors})));if(e.clearable){var a;const{palette:n,onChange:l=(()=>{})}=e;t.unshift({value:"clear",title:st(),type:"text"});const s=e=>{const t=lt.b.find((t=>t.id===e));l(t||null)},i=rt(n,lt.b);return Object(j.jsx)(r.EuiColorPalettePicker,{id:e.id,compressed:!0,palettes:t,onChange:s,valueOfSelected:null!==(a=null==i?void 0:i.id)&&void 0!==a?a:"clear"})}const{palette:n,onChange:l=(()=>{})}=e,s=rt(n,lt.b);return Object(j.jsx)(r.EuiColorPalettePicker,{id:e.id,compressed:!0,palettes:t,onChange:e=>{const t=lt.b.find((t=>t.id===e));if(!t)throw new Error(it());l(t)},valueOfSelected:null==s?void 0:s.id})};var pt=a(80);const{Palette:ct}=y.b,ut=({onValueChange:e,argId:t,argValue:a,renderError:n})=>{const l=(({chain:e})=>{if(1!==e.length||"palette"!==e[0].function)return n(),null;try{const t=e[0].arguments._.map((e=>("string"!==Object(p.getType)(e)&&n(),e))),a=Object(o.get)(e[0].arguments.gradient,"[0]"),l=Object(pt.identifyPalette)({colors:t,gradient:a});return l||{id:"custom",label:ct.getCustomPaletteLabel(),colors:t,gradient:a}}catch(e){n()}return null})(a);return l?Object(j.jsx)(ot,{id:t,palette:l,onChange:t=>{const a={type:"expression",chain:[{type:"function",function:"palette",arguments:{_:t.colors,gradient:[t.gradient]}}]};e(a)}}):(n(),null)},{Percentage:mt}=y.b,gt=({onValueChange:e,argValue:t})=>Object(j.jsx)(r.EuiRange,{compressed:!0,min:0,max:100,showLabels:!0,showInput:!0,value:100*t,onChange:t=>e(t.target.value/100)}),{Range:dt}=y.b,ht=({typeInstance:e,onValueChange:t,argValue:a})=>{const{min:n,max:l,step:s}=e.options;return Object(j.jsx)(r.EuiRange,{compressed:!0,min:n,max:l,step:s,showLabels:!0,showInput:!0,value:a,onChange:e=>t(Number(e.target.value))})},{Select:bt}=y.b,yt=({typeInstance:e,onValueChange:t,argValue:a,argId:n})=>{const l=e.options.choices.map((({value:e,name:t})=>({value:e,text:t})));return Object(j.jsx)(r.EuiSelect,{compressed:!0,id:n,value:a,options:l,onChange:e=>{const{value:a}=l[e.target.selectedIndex];return t(a)}})};var jt=a(75),ft=a(30);const xt=Object(We.withSuspense)(ft.LazyShapeDrawer);function Ot(e,t){const{minX:a,minY:n,width:l,height:s}=t;return{minX:a-e/2,minY:n-e/2,width:l+e,height:s+e}}const vt=({shape:e})=>{const[t,a]=Object(s.useState)(Object(ft.getDefaultShapeData)()),n=Object(s.useCallback)((e=>{null!==e&&a(e.getData())}),[]);return e?Object(j.jsx)("div",{className:"canvasShapePreview"},Object(j.jsx)(xt,{ref:n,shapeType:e,shapeAttributes:{fill:"none",stroke:"black",viewBox:Ot(5,t.viewBox)}})):Object(j.jsx)("div",{className:"canvasShapePreview"})},Nt=({shapes:e,onChange:t=(()=>{})})=>Object(j.jsx)(r.EuiFlexGrid,{gutterSize:"s",columns:4,className:"canvasShapePicker"},e.sort().map((e=>Object(j.jsx)(r.EuiFlexItem,{key:e},Object(j.jsx)(r.EuiLink,{onClick:()=>t(e)},Object(j.jsx)(vt,{shape:e})))))),Ct=({shapes:e,onChange:t,value:a,ariaLabel:n})=>Object(j.jsx)(jt.a,{panelClassName:"canvas",button:e=>Object(j.jsx)(r.EuiPanel,{paddingSize:"s",hasShadow:!1},Object(j.jsx)(r.EuiLink,{"aria-label":n,style:{fontSize:0},onClick:e},Object(j.jsx)(vt,{shape:a})))},(()=>Object(j.jsx)(Nt,{onChange:t,shapes:e}))),{Shape:St}=y.b,Tt=({onValueChange:e,argValue:t,typeInstance:a})=>Object(j.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(j.jsx)(r.EuiFlexItem,{grow:!1},Object(j.jsx)(Ct,{value:t,onChange:e,shapes:a.options.shapes,ariaLabel:a.displayName}))),{String:Et}=y.b,Dt=({argValue:e,typeInstance:t,onValueChange:a,argId:n})=>{var l;const[i,o]=Object(s.useState)(e),p=null==t||null===(l=t.options)||void 0===l?void 0:l.confirm;Object(s.useEffect)((()=>{o(e)}),[e]);const c=Object(s.useCallback)((e=>{(p?o:a)(e.target.value)}),[p,a]);return Object(j.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(j.jsx)(r.EuiFlexItem,null,Object(j.jsx)(r.EuiFieldText,{compressed:!0,id:n,value:i,onChange:c})),p&&Object(j.jsx)(r.EuiFlexItem,{grow:!1,className:"canvasSidebar__panel-noMinWidth"},Object(j.jsx)(r.EuiButton,{size:"s",onClick:()=>a(i)},p)))},{Textarea:Ft}=y.b,At=({argValue:e,typeInstance:t,onValueChange:a,renderError:n,argId:l})=>{var i;const o=null==t||null===(i=t.options)||void 0===i?void 0:i.confirm,[p,c]=Object(s.useState)(),u=Object(s.useCallback)((e=>{(o?c:a)(e.target.value)}),[o,a]);return Object(s.useEffect)((()=>{c(e)}),[e]),"string"!=typeof e?(n(),null):Object(j.jsx)("div",null,Object(j.jsx)(r.EuiFormRow,{display:"rowCompressed"},Object(j.jsx)(r.EuiTextArea,{className:"canvasTextArea__code",id:l,compressed:!0,rows:10,value:p,resize:"none",onChange:u})),Object(j.jsx)(r.EuiSpacer,{size:"s"}),Object(j.jsx)(r.EuiButton,{size:"s",onClick:()=>a(p)},o),Object(j.jsx)(r.EuiSpacer,{size:"xs"}))},{Toggle:_t}=y.b,wt=({onValueChange:e,argValue:t,argId:a,renderError:n,typeInstance:l})=>"boolean"!=typeof t?(n(),null):Object(j.jsx)("div",null,Object(j.jsx)(r.EuiFormRow,{display:"rowCompressed"},Object(j.jsx)(r.EuiSwitch,{compressed:!0,id:a,checked:t,onChange:()=>e(!t),className:"canvasArg__form","aria-label":l.displayName,resize:"none",label:l.options.labelValue,showLabel:!0}))),{VisDimension:It}=y.b,Ht=({argValue:e,typeInstance:t,onValueChange:a,argId:n,columns:l})=>{var i,o;const[p,c]=Object(s.useState)(e),u=null==t||null===(i=t.options)||void 0===i?void 0:i.confirm;Object(s.useEffect)((()=>{c(e)}),[e]);const m=Object(s.useCallback)((e=>{(u?c:a)({type:"expression",chain:[{type:"function",function:"visdimension",arguments:{_:[e.target.value]}}]})}),[u,a]),g=[{value:"",text:It.getDefaultOptionName(),disabled:!0},...l.map((e=>({value:e.name,text:e.name})))],d=null===(o=p.chain[0].arguments._)||void 0===o?void 0:o[0],h=l.map((e=>e.name)).find((e=>e===d))||"";return Object(j.jsx)(r.EuiFlexGroup,{gutterSize:"s",direction:"column"},Object(j.jsx)(r.EuiFlexItem,null,Object(j.jsx)(r.EuiSelect,{options:g,value:h,onChange:m})),u&&Object(j.jsx)(r.EuiFlexItem,{grow:!1},Object(j.jsx)(r.EuiButton,{size:"s",onClick:()=>a(p)},u)))},Pt=[()=>({name:"axisConfig",displayName:Fe.getDisplayName(),help:Fe.getHelp(),simpleTemplate:Object(b.a)(ve),template:Object(b.a)(extended_template_ExtendedTemplate)}),()=>({name:"datacolumn",displayName:He.getDisplayName(),help:He.getHelp(),default:'""',simpleTemplate:Object(b.a)(Le)}),()=>({name:"filterGroup",displayName:Ue.getDisplayName(),help:Ue.getHelp(),simpleTemplate:Object(b.a)(qe)}),()=>({name:"imageUpload",displayName:Ke.getDisplayName(),help:Ke.getHelp(),resolveArgValue:!0,template:Object(b.a)(image_upload_ImageUpload),resolve:async({args:e})=>{const{elasticOutline:t}=await Object(We.getElasticOutline)();return{dataurl:Object(We.resolveFromArgs)(e,t)}}}),()=>({name:"number",displayName:et.getDisplayName(),help:et.getHelp(),simpleTemplate:Object(b.a)(tt),default:"0"}),()=>({name:"palette",displayName:ct.getDisplayName(),help:ct.getHelp(),default:"{palette #882E72 #B178A6 #D6C1DE #1965B0 #5289C7 #7BAFDE #4EB265 #90C987 #CAE0AB #F7EE55 #F6C141 #F1932D #E8601C #DC050C}",simpleTemplate:Object(b.a)(ut)}),()=>({name:"percentage",displayName:mt.getDisplayName(),help:mt.getHelp(),simpleTemplate:Object(b.a)(gt)}),()=>({name:"range",displayName:dt.getDisplayName(),help:dt.getHelp(),simpleTemplate:Object(b.a)(ht)}),()=>({name:"select",displayName:bt.getDisplayName(),help:bt.getHelp(),simpleTemplate:Object(b.a)(yt)}),()=>({name:"shape",displayName:St.getDisplayName(),help:St.getHelp(),simpleTemplate:Object(b.a)(Tt),default:'"square"'}),()=>({name:"string",displayName:Et.getDisplayName(),help:Et.getHelp(),simpleTemplate:Object(b.a)(Dt)}),()=>({name:"textarea",displayName:Ft.getDisplayName(),help:Ft.getHelp(),template:Object(b.a)(At)}),()=>({name:"toggle",displayName:_t.getDisplayName(),help:_t.getHelp(),template:Object(b.a)(wt),default:"false"}),()=>({name:"vis_dimension",displayName:It.getDisplayName(),help:It.getHelp(),simpleTemplate:Object(b.a)(Ht)})],zt=[(e,t)=>{const a={DEFAULT:e.uiSettings.get("dateFormat"),NANOS:e.uiSettings.get("dateNanosFormat"),ISO8601:"",LOCAL_LONG:"LLLL",LOCAL_SHORT:"LLL",LOCAL_DATE:"l",LOCAL_TIME_WITH_SECONDS:"LTS"},n=Object.values(a).map((e=>({value:e,text:Ve.a.utc(Ve()()).format(e)})));return()=>{return{name:"dateFormat",displayName:Be.getDisplayName(),help:Be.getHelp(),simpleTemplate:Object(b.a)((e=n,t=>Object(j.jsx)(Me,O()({dateFormats:e},t))))};var e}},(e,t)=>{const a={NUMBER:e.uiSettings.get(q.FORMATS_UI_SETTINGS.FORMAT_NUMBER_DEFAULT_PATTERN),PERCENT:e.uiSettings.get(q.FORMATS_UI_SETTINGS.FORMAT_PERCENT_DEFAULT_PATTERN),CURRENCY:e.uiSettings.get(q.FORMATS_UI_SETTINGS.FORMAT_CURRENCY_DEFAULT_PATTERN),DURATION:"00:00:00",BYTES:e.uiSettings.get(q.FORMATS_UI_SETTINGS.FORMAT_BYTES_DEFAULT_PATTERN)},n=[{value:a.NUMBER,text:nt.getFormatNumber()},{value:a.PERCENT,text:nt.getFormatPercent()},{value:a.CURRENCY,text:nt.getFormatCurrency()},{value:a.DURATION,text:nt.getFormatDuration()},{value:a.BYTES,text:nt.getFormatBytes()}];return()=>{return{name:"numberFormat",displayName:nt.getDisplayName(),help:nt.getHelp(),simpleTemplate:Object(b.a)((e=n,t=>Object(j.jsx)(at,O()({numberFormats:e},t))))};var e}}],kt=(e,t)=>[...Pt,...zt.map((a=>a(e,t)))],Lt=Object(r.euiPaletteColorBlind)(),Rt=[()=>({name:y.n.presentation(),color:"#017D73"}),()=>({name:y.n.report(),color:Lt[2]})],{FormatDate:Vt}=y.o,{FormatNumber:Mt}=y.o,{RoundDate:Bt}=y.o,{Sort:Ut}=y.o,qt=[()=>({name:"formatdate",displayName:Vt.getDisplayName(),args:[{name:"format",displayName:Vt.getFormatDisplayName(),argType:"dateformat"}]}),()=>({name:"formatnumber",displayName:Mt.getDisplayName(),args:[{name:"format",displayName:Mt.getFormatDisplayName(),argType:"numberformat"}]}),()=>({name:"rounddate",displayName:Bt.getDisplayName(),args:[{name:"format",displayName:Bt.getFormatDisplayName(),argType:"dateformat",help:Bt.getFormatHelp()}]}),()=>({name:"sort",displayName:Ut.getDisplayName(),args:[{name:"_",displayName:Ut.getSortFieldDisplayName(),argType:"datacolumn"},{name:"reverse",displayName:Ut.getReverseDisplayName(),argType:"toggle"}],resolve:({context:e})=>"ready"===Object(Y.b)(e)?{columns:Object(o.get)(Object(Y.c)(e),"columns",[])}:{columns:[]}})]},58:function(e,t,a){e.exports=a(16)(1075)},60:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(20),l=a.n(n),s=a(23),i=a(27),r=a(102),o=a(21);const p=e=>{const t=t=>Object(o.jsx)(r.a,null,(({error:a})=>a?(t.renderError(),null):Object(o.jsx)(i.I18nProvider,null,Object(o.jsx)(e,t))));return(e,a,n)=>{try{const i=l.a.createElement(t,a);Object(s.render)(i,e,(()=>{n.done()})),n.onDestroy((()=>{Object(s.unmountComponentAtNode)(e)}))}catch(e){n.done(),a.renderError()}}}},69:function(e,t,a){e.exports=a(16)(7)},72:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var n=a(7);function l(e){return Object(n.get)(e,"state",null)}function s(e){return Object(n.get)(e,"value",null)}function i(e){return"error"!==l(e)?null:Object(n.get)(e,"error",null)}},75:function(e,t,a){"use strict";a.d(t,"a",(function(){return popover_Popover}));var n=a(58),l=a.n(n),s=a(2),i=a.n(s),r=a(20),o=a(22),p=a(21);class popover_Popover extends r.Component{constructor(...e){super(...e),i()(this,"state",{isPopoverOpen:!!this.props.isOpen}),i()(this,"handleClick",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),i()(this,"closePopover",(()=>{this.setState({isPopoverOpen:!1})}))}componentDidMount(){this.props.isOpen&&this.setState({isPopoverOpen:!0})}render(){const{button:e,children:t,tooltip:a,tooltipPosition:n,...s}=this.props,i=document.querySelector(".kbnAppWrapper"),r=o.EuiPopover;return Object(p.jsx)(r,l()({},s,{button:(t=>!this.state.isPopoverOpen&&a&&a.length?Object(p.jsx)(o.EuiToolTip,{position:n,content:a},e(t)):e(t))(this.handleClick),isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,container:i}),t({closePopover:this.closePopover}))}}i()(popover_Popover,"defaultProps",{isOpen:!1,ownFocus:!0,tooltip:"",tooltipPosition:"top"})},90:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20);t.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}},91:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return u}));var n=a(0),l=a(86),s=a(54),i=a(57);const{esService:r}=s.f,o=function(){return i.pluginServices.getServices().platform.getSavedObjectsClient()},p=(e="_all")=>l.a.get(`${i.pluginServices.getServices().platform.getBasePath()+n.a}/es_fields?index=${e}`).then((({data:e})=>Object.keys(e).filter((e=>!e.startsWith("_"))).sort())).catch((t=>{i.pluginServices.getServices().notify.error(t,{title:r.getFieldsFetchErrorMessage(e)})})),c=()=>o().find({type:"index-pattern",fields:["title"],searchFields:["title"],perPage:1e3}).then((e=>e.savedObjects.map((e=>e.attributes.title)))).catch((e=>{i.pluginServices.getServices().notify.error(e,{title:r.getIndicesFetchErrorMessage()})})),u=()=>{const e=i.pluginServices.getServices().platform.getUISettings().get("defaultIndex");return e?o().get("index-pattern",e).then((e=>e.attributes.title)).catch((e=>{i.pluginServices.getServices().notify.error(e,{title:r.getDefaultIndexFetchErrorMessage()})})):Promise.resolve("")}}}]);