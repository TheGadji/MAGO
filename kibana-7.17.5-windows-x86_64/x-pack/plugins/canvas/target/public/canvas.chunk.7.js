/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[7],Array(56).concat([function(e,t,a){"use strict";var n=a(70);t.__esModule=!0;var r=n(a(247));t.Provider=r.default;var o=n(a(171));t.connectAdvanced=o.default;var s=a(76);t.ReactReduxContext=s.ReactReduxContext;var i=n(a(249));t.connect=i.default;var c=a(256);t.useDispatch=c.useDispatch,t.createDispatchHook=c.createDispatchHook;var l=a(257);t.useSelector=l.useSelector,t.createSelectorHook=l.createSelectorHook;var d=a(177);t.useStore=d.useStore,t.createStoreHook=d.createStoreHook;var u=a(170),p=a(258);t.batch=p.unstable_batchedUpdates;var g=n(a(173));t.shallowEqual=g.default,(0,u.setBatch)(p.unstable_batchedUpdates)},,,,,,function(e,t,a){"use strict";t.__esModule=!0;var n=l(a(301));t.combineActions=n.default;var r=l(a(124));t.createAction=r.default;var o=l(a(304));t.createActions=o.default;var s=l(a(313));t.createCurriedAction=s.default;var i=l(a(190));t.handleAction=i.default;var c=l(a(316));function l(e){return e&&e.__esModule?e:{default:e}}t.handleActions=c.default},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return i}));var n=a(7);function r(e){return Object(n.get)(e,"transient.canUserWrite",!0)}function o(e){return Object(n.get)(e,"transient.fullscreen",!1)}function s(e){return Object(n.get)(e,"transient.zoomScale",1)}function i(e){return e.app.serverFunctions}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(298),r=a.n(n);function o(e){return`${e}-${r()()}`}},,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s}));var n=a(7);function r(e){return Object(n.get)(e,"state",null)}function o(e){return Object(n.get)(e,"value",null)}function s(e){return"error"!==r(e)?null:Object(n.get)(e,"error",null)}},function(e,t,a){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function i(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function c(e,t){for(var a={},n=[],r=0;r<e.length;r++){var o=e[r],c=t.base?o[0]+t.base:o[0],l=a[c]||0,d="".concat(c," ").concat(l);a[c]=l+1;var u=i(d),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(s[u].references++,s[u].updater(p)):s.push({identifier:d,updater:m(p,t),references:1}),n.push(d)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=a.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function p(e,t,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function g(e,t,a){var n=a.css,r=a.media,o=a.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var b=null,f=0;function m(e,t){var a,n,r;if(t.singleton){var o=f++;a=b||(b=l(t)),n=p.bind(null,a,o,!1),r=p.bind(null,a,o,!0)}else a=l(t),n=g.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var a=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var r=i(a[n]);s[r].references--}for(var o=c(e,t),l=0;l<a.length;l++){var d=i(a[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}a=o}}}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var r=(s=n,i=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(c," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[a].concat(o).concat([r]).join("\n")}var s,i,c;return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);n&&r[c[0]]||(a&&(c[2]?c[2]="".concat(a," and ").concat(c[2]):c[2]=a),t.push(c))}},t}},,function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.default=t.ReactReduxContext=void 0;var r=n(a(20)).default.createContext(null);t.ReactReduxContext=r;var o=r;t.default=o},function(e,t,a){"use strict";e.exports=function(e,t,a,n,r,o,s,i){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[a,n,r,o,s,i],d=0;(c=new Error(t.replace(/%s/g,(function(){return l[d++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return v})),a.d(t,"g",(function(){return _})),a.d(t,"b",(function(){return w}));var n=a(20),r=a(24),o=a(6),s=a(57),i=a(68);const c=()=>{const e=Object(s.useWorkpadService)(),t=Object(s.useNotifyService)(),a=Object(r.useHistory)();return Object(n.useCallback)((async n=>{try{let t=await e.get(n);t={...t,name:l.getClonedWorkpadName(t.name),id:Object(i.a)("workpad")},await e.create(t),a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:d.getCloneFailureErrorMessage()})}}),[t,e,a])},l={getClonedWorkpadName:e=>o.i18n.translate("xpack.canvas.useCloneWorkpad.clonedWorkpadName",{defaultMessage:"Copy of {workpadName}",values:{workpadName:e},description:'This suffix is added to the end of the name of a cloned workpad to indicate that this new workpad is a copy of the original workpad. Example: "Copy of Sales Pitch"'})},d={getCloneFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useCloneWorkpad.cloneFailureErrorMessage",{defaultMessage:"Couldn't clone workpad"})};var u=a(83);const p=()=>{const e=Object(s.useWorkpadService)(),t=Object(s.useNotifyService)(),a=Object(r.useHistory)();return Object(n.useCallback)((async n=>{const r=n||Object(u.c)();try{await e.create(r),a.push(`/workpad/${r.id}/page/1`)}catch(e){t.error(e,{title:g.getUploadFailureErrorMessage()})}}),[t,a,e])},g={getUploadFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useCreateWorkpad.uploadFailureErrorMessage",{defaultMessage:"Couldn't upload workpad"})},b=()=>{const e=Object(s.useWorkpadService)(),t=Object(s.useNotifyService)();return Object(n.useCallback)((async a=>{const n=a.map((async t=>{try{return await e.remove(t),{id:t,err:null}}catch(e){return{id:t,err:e}}}));return Promise.all(n).then((e=>{const[n,r]=e.reduce((([e,t],a)=>(a.err?t.push(a.id):e.push(a.id),[e,t])),[[],[]]),o=a.filter((e=>n.includes(e)));return r.length>0&&t.error(f.getDeleteFailureErrorMessage()),{removedIds:o,errored:r}}))}),[e,t])},f={getDeleteFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useDeleteWorkpads.deleteFailureErrorMessage",{defaultMessage:"Couldn't delete all workpads"})},m=()=>{const e=Object(s.useWorkpadService)();return Object(n.useCallback)((async()=>await e.findTemplates()),[e])},v=()=>{const e=Object(s.useWorkpadService)(),t=Object(s.useNotifyService)();return Object(n.useCallback)((async(a="")=>{try{return await e.find(a)}catch(e){t.error(e,{title:h.getFindFailureErrorMessage()})}}),[t,e])},h={getFindFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useFindWorkpads.findFailureErrorMessage",{defaultMessage:"Couldn't find workpad"})};var x=a(7),y=a(55);const _=()=>{const e=Object(s.useNotifyService)(),t=p();return Object(n.useCallback)(((a,n=(()=>{}))=>{if(!a)return void n();"application/json"!==Object(x.get)(a,"type")&&(e.warning(j.getAcceptJSONOnlyErrorMessage(),{title:a.name?j.getFileUploadFailureWithFileNameErrorMessage(a.name):j.getFileUploadFailureWithoutFileNameErrorMessage()}),n());const r=new FileReader;r.onload=async()=>{try{const e=JSON.parse(r.result);if(e.id=Object(i.a)("workpad"),!Array.isArray(e.pages)||0===e.pages.length||!e.assets)throw n(),new Error(j.getMissingPropertiesErrorMessage());await t(e),n(e)}catch(t){e.error(t,{title:a.name?j.getFileUploadFailureWithFileNameErrorMessage(a.name):j.getFileUploadFailureWithoutFileNameErrorMessage()}),n()}},r.readAsText(a)}),[e,t])},j={getFileUploadFailureWithoutFileNameErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useImportWorkpad.fileUploadFailureWithoutFileNameErrorMessage",{defaultMessage:"Couldn't upload file"}),getFileUploadFailureWithFileNameErrorMessage:e=>o.i18n.translate("xpack.canvas.errors.useImportWorkpad.fileUploadFileWithFileNameErrorMessage",{defaultMessage:"Couldn't upload '{fileName}'",values:{fileName:e}}),getMissingPropertiesErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useImportWorkpad.missingPropertiesErrorMessage",{defaultMessage:"Some properties required for a {CANVAS} workpad are missing.  Edit your {JSON} file to provide the correct property values, and try again.",values:{CANVAS:y.d,JSON:y.s}}),getAcceptJSONOnlyErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useImportWorkpad.acceptJSONOnlyErrorMessage",{defaultMessage:"Only {JSON} files are accepted",values:{JSON:y.s}})},w=()=>{const e=Object(s.useWorkpadService)(),t=Object(s.useNotifyService)(),a=Object(r.useHistory)();return Object(n.useCallback)((async n=>{try{const t=await e.createFromTemplate(n.id);a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:"Couldn't create workpad from template"})}}),[e,t,a])}},,,,function(e,t,a){"use strict";e.exports={ShortcutManager:a(260),Shortcuts:a(265)}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i}));var n=a(68),r=a(0);const o=()=>({id:Object(n.a)("element"),position:{top:20,left:20,height:300,width:500,angle:0,type:"element"},expression:'\n      demodata\n      | pointseries y="median(cost)" x=time color="project"\n      | plot defaultStyle={seriesStyle points=5}\n    ',filter:null}),s=()=>({id:Object(n.a)("page"),style:{background:"#FFF"},transition:{},elements:[],groups:[]}),i=()=>{const e=s();return{name:"My Canvas Workpad",id:Object(n.a)("workpad"),width:1080,height:720,css:r.r,page:0,pages:[e],colors:["#37988d","#c19628","#b83c6f","#3f9939","#1785b0","#ca5f35","#45bdb0","#f2bc33","#e74b8b","#4fbf48","#1ea6dc","#fd7643","#72cec3","#f5cc5d","#ec77a8","#7acf74","#4cbce4","#fd986f","#a1ded7","#f8dd91","#f2a4c5","#a6dfa2","#86d2ed","#fdba9f","#000000","#444444","#777777","#BBBBBB","#FFFFFF","rgba(255,255,255,0)"],variables:[],isWriteable:!0}}},,,,function(e,t,a){"use strict";t.__esModule=!0,t.ACTION_TYPE_DELIMITER=t.DEFAULT_NAMESPACE=void 0;t.DEFAULT_NAMESPACE="/";t.ACTION_TYPE_DELIMITER="||"},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20);t.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}},function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return u}));var n=a(0),r=a(86),o=a(54),s=a(57);const{esService:i}=o.f,c=function(){return s.pluginServices.getServices().platform.getSavedObjectsClient()},l=(e="_all")=>r.a.get(`${s.pluginServices.getServices().platform.getBasePath()+n.a}/es_fields?index=${e}`).then((({data:e})=>Object.keys(e).filter((e=>!e.startsWith("_"))).sort())).catch((t=>{s.pluginServices.getServices().notify.error(t,{title:i.getFieldsFetchErrorMessage(e)})})),d=()=>c().find({type:"index-pattern",fields:["title"],searchFields:["title"],perPage:1e3}).then((e=>e.savedObjects.map((e=>e.attributes.title)))).catch((e=>{s.pluginServices.getServices().notify.error(e,{title:i.getIndicesFetchErrorMessage()})})),u=()=>{const e=s.pluginServices.getServices().platform.getUISettings().get("defaultIndex");return e?c().get("index-pattern",e).then((e=>e.attributes.title)).catch((e=>{s.pluginServices.getServices().notify.error(e,{title:i.getDefaultIndexFetchErrorMessage()})})):Promise.resolve("")}},,,,,,function(e,t,a){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(a(67));function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var s="function"==typeof Symbol&&Symbol.observable||"@@observable",i=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function l(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function d(e,t){return function(){return t(e.apply(this,arguments))}}function u(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}t.__DO_NOT_USE__ActionTypes=c,t.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return function(){var a=e.apply(void 0,arguments),n=function(){throw new Error(o(15))},s={getState:a.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(s)}));return n=u.apply(void 0,i)(a.dispatch),r.default(r.default({},a),{},{dispatch:n})}}},t.bindActionCreators=function(e,t){if("function"==typeof e)return d(e,t);if("object"!=typeof e||null===e)throw new Error(o(16));var a={};for(var n in e){var r=e[n];"function"==typeof r&&(a[n]=d(r,t))}return a},t.combineReducers=function(e){for(var t=Object.keys(e),a={},n=0;n<t.length;n++){var r=t[n];0,"function"==typeof e[r]&&(a[r]=e[r])}var s,i=Object.keys(a);try{!function(e){Object.keys(e).forEach((function(t){var a=e[t];if(void 0===a(void 0,{type:c.INIT}))throw new Error(o(12));if(void 0===a(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(a)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var n=!1,r={},c=0;c<i.length;c++){var l=i[c],d=a[l],u=e[l],p=d(u,t);if(void 0===p){t&&t.type;throw new Error(o(14))}r[l]=p,n=n||p!==u}return(n=n||i.length!==Object.keys(e).length)?r:e}},t.compose=u,t.createStore=function e(t,a,n){var r;if("function"==typeof a&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(o(0));if("function"==typeof a&&void 0===n&&(n=a,a=void 0),void 0!==n){if("function"!=typeof n)throw new Error(o(1));return n(e)(t,a)}if("function"!=typeof t)throw new Error(o(2));var i=t,d=a,u=[],p=u,g=!1;function b(){p===u&&(p=u.slice())}function f(){if(g)throw new Error(o(3));return d}function m(e){if("function"!=typeof e)throw new Error(o(4));if(g)throw new Error(o(5));var t=!0;return b(),p.push(e),function(){if(t){if(g)throw new Error(o(6));t=!1,b();var a=p.indexOf(e);p.splice(a,1),u=null}}}function v(e){if(!l(e))throw new Error(o(7));if(void 0===e.type)throw new Error(o(8));if(g)throw new Error(o(9));try{g=!0,d=i(d,e)}finally{g=!1}for(var t=u=p,a=0;a<t.length;a++){(0,t[a])()}return e}function h(e){if("function"!=typeof e)throw new Error(o(10));i=e,v({type:c.REPLACE})}function x(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(o(11));function a(){e.next&&e.next(f())}return a(),{unsubscribe:t(a)}}})[s]=function(){return this},e}return v({type:c.INIT}),(r={dispatch:v,subscribe:m,getState:f,replaceReducer:h})[s]=x,r}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return"function"==typeof e}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return"undefined"!=typeof Map&&e instanceof Map}},function(e,t,a){"use strict";var n=Array.isArray,r=Object.keys,o=Object.prototype.hasOwnProperty,s="undefined"!=typeof Element;function i(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var a,c,l,d=n(e),u=n(t);if(d&&u){if((c=e.length)!=t.length)return!1;for(a=c;0!=a--;)if(!i(e[a],t[a]))return!1;return!0}if(d!=u)return!1;var p=e instanceof Date,g=t instanceof Date;if(p!=g)return!1;if(p&&g)return e.getTime()==t.getTime();var b=e instanceof RegExp,f=t instanceof RegExp;if(b!=f)return!1;if(b&&f)return e.toString()==t.toString();var m=r(e);if((c=m.length)!==r(t).length)return!1;for(a=c;0!=a--;)if(!o.call(t,m[a]))return!1;if(s&&e instanceof Element&&t instanceof Element)return e===t;for(a=c;0!=a--;)if(!("_owner"===(l=m[a])&&e.$$typeof||i(e[l],t[l])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return i(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20);t.default=function(e){n.useEffect(e,[])}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(20);var n=a(22),r=a(96),o=a(21);const s=({animated:e=!1,text:t="",backgroundColor:a="#000000"})=>{if(e)return Object(o.jsx)("div",{className:"canvasLoading"},t&&Object(o.jsx)("span",null,t," "),Object(o.jsx)(n.EuiLoadingSpinner,{size:"m"}));const s=Object(r.a)(a);let i="text";return s&&Object(n.isColorDark)(s[0],s[1],s[2])&&(i="ghost"),Object(o.jsx)("div",{className:"canvasLoading"},t&&Object(o.jsx)("span",null,t," "),Object(o.jsx)(n.EuiIcon,{color:i,type:"clock"}))};s.defaultProps={animated:!1,backgroundColor:"#000000",text:""}},function(e,t,a){var n;n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}return a.m=e,a.c=t,a.p="",a(0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),i=l(s),c=l(a(1));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getStyleString=function(){if(a.props.children instanceof Array){var e=a.props.children.filter((function(e){return!(0,s.isValidElement)(e)&&"string"==typeof e}));if(e.length>1)throw new Error("Multiple style objects as direct descedents of a Style component are not supported ("+e.length+" style objects detected): \n\n"+e[0]);return e[0]}return"string"!=typeof a.props.children||(0,s.isValidElement)(a.props.children)?null:a.props.children},a.getRootElement=function(){if(a.props.children instanceof Array){var e=a.props.children.filter((function(e){return(0,s.isValidElement)(e)}));return e[0]}return(0,s.isValidElement)(a.props.children)?a.props.children:null},a.getRootSelectors=function(e){var t=[];return e.props.id&&t.push("#"+e.props.id),e.props.className&&e.props.className.trim().split(/\s+/g).forEach((function(e){return t.push(e)})),t.length||"function"==typeof e.type||t.push(e.type),t},a.processCSSText=function(e,t,n){return e.replace(/\s*\/\/(?![^(]*\)).*|\s*\/\*.*\*\//g,"").replace(/\s\s+/g," ").split("}").map((function(e){var r=/.*:.*;/g,o=/.*:.*(;|$|\s+)/g,s=/\s*@/g,i=/\s*(([0-9][0-9]?|100)\s*%)|\s*(to|from)\s*$/g;return e.split("{").map((function(e,c,l){if(!e.trim().length)return"";var d=l.length-1===c&&e.match(o);if(e.match(r)||d)return a.escapeTextContentForBrowser(e);var u=e;return t&&!/:target/gi.test(u)?u.match(s)||u.match(i)?u:a.scopeSelector(t,u,n):u})).join("{\n")})).join("}\n")},a.escaper=function(e){return{">":"&gt;","<":"&lt;"}[e]},a.escapeTextContentForBrowser=function(e){return(""+e).replace(/[><]/g,a.escaper)},a.scopeSelector=function(e,t,a){for(var n=[],r=t.split(/,(?![^(|[]*\)|\])/g),o=0;o<r.length;o++){var s=void 0,i=void 0;if(a.length&&a.some((function(e){return t.match(e)}))){i=r[o];var c=a.map((function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}));i=i.replace(new RegExp("("+c.join("|")+")"),"$1"+e),s=e+" "+r[o],n.push(i,s)}else s=e+" "+r[o],n.push(s)}return n.join(", ")},a.getScopeClassName=function(e,t){var n=e;return t&&(a.pepper="",a.traverseObjectToGeneratePepper(t),n+=a.pepper),"s"+(0,c.default)(n)},a.traverseObjectToGeneratePepper=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t>32||a.pepper.length>1e4))for(var n in e){var o=/^[_$]|type|ref|^value$/.test(n);e[n]&&"object"===r(e[n])&&!o?a.traverseObjectToGeneratePepper(e[n],t+1):e[n]&&!o&&"function"!=typeof e[n]&&(a.pepper+=e[n])}},a.isVoidElement=function(e){return["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].some((function(t){return e===t}))},a.addCSSTextToHead=function(e){if(e.length){var t=(0,c.default)(e);window._reactiveStyle.cssTextHashesAddedToHead.some((function(e){return e===t}))||(window._reactiveStyle.el.innerHTML+=e,window._reactiveStyle.cssTextHashesAddedToHead.push(t))}},a.createStyleElement=function(e,t){return i.default.createElement("style",{type:"text/css",key:t,ref:function(e){return a._style=e},dangerouslySetInnerHTML:{__html:e||""}})},a.getNewChildrenForCloneElement=function(e,t,n){return[a.createStyleElement(e,n)].concat(t.props.children)},a.scopeClassNameCache={},a.scopedCSSTextCache={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){if(!this.props.children)return this.createStyleElement();var e=this.getStyleString(),t=this.getRootElement();if(!e&&t)return t.props.children;if(e&&!t)return this.createStyleElement(this.processCSSText(e),this.getScopeClassName(e,t));var a=t.props.className?t.props.className+" ":"",r=void 0,o=void 0,i=a+(t.props.id?t.props.id:"")+e;return this.scopeClassNameCache[i]?(r=this.scopeClassNameCache[i],o=this.scopedCSSTextCache[r]):(r=this.getScopeClassName(e,t),o=this.processCSSText(e,"."+r,this.getRootSelectors(t)),this.scopeClassNameCache[i]=r,this.scopedCSSTextCache[r]=o),(0,s.cloneElement)(t,n({},t.props,{className:""+a+r}),this.getNewChildrenForCloneElement(o,t,r))}}]),t}(s.Component);d.it=function(e,t){return i.default.createElement(d,null,e,t)},t.default=d},function(e,t){"use strict";var a=65521;e.exports=function(e){for(var t=1,n=0,r=0,o=e.length,s=-4&o;r<s;){for(var i=Math.min(r+4096,s);r<i;r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=a,n%=a}for(;r<o;r++)n+=t+=e.charCodeAt(r);return(t%=a)|(n%=a)<<16}},function(t,a){t.exports=e}])},e.exports=n(a(20))},,function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return u}));var n=a(20),r=a(128),o=a.n(r),s=a(6),i=a(57);const c=()=>s.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadFailureErrorMessage",{defaultMessage:"Couldn't download workpad"}),l=()=>s.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadRenderedWorkpadFailureErrorMessage",{defaultMessage:"Couldn't download rendered workpad"}),d=()=>{const e=Object(i.useNotifyService)(),t=Object(i.useWorkpadService)(),a=p();return Object(n.useCallback)((async n=>{try{const e=await t.get(n);a(e,`canvas-workpad-${e.name}-${e.id}`)}catch(t){e.error(t,{title:c()})}}),[t,e,a])},u=()=>{const e=Object(i.useNotifyService)(),t=p();return Object(n.useCallback)((async a=>{try{t(a,`canvas-embed-workpad-${a.name}-${a.id}`)}catch(t){e.error(t,{title:l()})}}),[e,t])},p=()=>Object(n.useCallback)(((e,t)=>{const a=new Blob([JSON.stringify(e)],{type:"application/json"});o.a.saveAs(a,`${t}.json`)}),[])},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(59),r=a(2),o=a.n(r);class tag_Tag{constructor(e){o()(this,"name",void 0),o()(this,"color",void 0),this.name=e.name,this.color=e.color}}class tags_registry_TagRegistry extends n.Registry{wrapper(e){return new tag_Tag(e)}}const s=new tags_registry_TagRegistry},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));a(20);var n=a(22),r=a(24),o=a(21);const s=({to:e,...t})=>{const a={...t,href:Object(r.useHistory)().createHref({pathname:e})};return Object(o.jsx)(n.EuiLink,a)},i=({to:e,...t})=>{const a={...t,href:Object(r.useHistory)().createHref({pathname:e})};return Object(o.jsx)(n.EuiButtonIcon,a)}},,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var n=a(170),r={notify:function(){}};var o=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=r,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t,a;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=(0,n.getBatch)(),t=null,a=null,{clear:function(){t=null,a=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],a=t;a;)e.push(a),a=a.next;return e},subscribe:function(e){var n=!0,r=a={callback:e,next:null,prev:a};return r.prev?r.prev.next=r:t=r,function(){n&&null!==t&&(n=!1,r.next?r.next.prev=r.prev:a=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=r)},e}();t.default=o},function(e,t,a){e.exports=a(16)(1077)},function(e,t,a){"use strict";e.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t,a){void 0===t&&(t=o.default);(0,n.default)((0,r.default)(t)||(0,s.default)(t),"Expected payloadCreator to be a function, undefined or null");var i=(0,s.default)(t)||t===o.default?o.default:function(e){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return e instanceof Error?e:t.apply(void 0,[e].concat(n))},c=(0,r.default)(a),l=e.toString(),d=function(){var t=i.apply(void 0,arguments),n={type:e};return t instanceof Error&&(n.error=!0),void 0!==t&&(n.payload=t),c&&(n.meta=a.apply(void 0,arguments)),n};return d.toString=function(){return l},d};var n=i(a(77)),r=i(a(98)),o=i(a(125)),s=i(a(303));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return e}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){if((0,r.default)(e))return Array.from(e.keys());if("undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(e);var t=Object.getOwnPropertyNames(e);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e)));return t};var n,r=(n=a(99))&&n.__esModule?n:{default:n}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=a(192).a},function(e,t,a){var n,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,a=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c=function(e){setTimeout((function(){"string"==typeof e?a().revokeObjectURL(e):e.remove()}),4e4)},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},d=function(t,d,u){u||(t=l(t));var p,g=this,b="application/octet-stream"===t.type,f=function(){!function(e,t,a){for(var n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,a||e)}catch(e){i(e)}}}(g,"writestart progress write writeend".split(" "))};if(g.readyState=g.INIT,r)return p=a().createObjectURL(t),void setTimeout((function(){var e,t;n.href=p,n.download=d,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),f(),c(p),g.readyState=g.DONE}));!function(){if((s||b&&o)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,g.readyState=g.DONE,f()},n.readAsDataURL(t),void(g.readyState=g.INIT)}(p||(p=a().createObjectURL(t)),b)?e.location.href=p:e.open(p,"_blank")||(e.location.href=p);g.readyState=g.DONE,f(),c(p)}()},u=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,a){return t=t||e.name||"download",a||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,a){return new d(e,t||e.name||"download",a)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */e.exports?e.exports.saveAs=r:null!==a(324)&&null!==a(325)&&(void 0===(n=function(){return r}.call(t,a,t,e))||(e.exports=n))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(16)(2392)},function(e,t,a){"use strict";t.__esModule=!0,t.getBatch=t.setBatch=void 0;var n=function(e){e()};t.setBatch=function(e){return n=e};t.getBatch=function(){return n}},function(e,t,a){"use strict";var n=a(169),r=a(70);t.__esModule=!0,t.default=function(e,t){void 0===t&&(t={});var a=t,n=a.getDisplayName,r=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,u=a.methodName,y=void 0===u?"connectAdvanced":u,_=a.renderCountProp,j=void 0===_?void 0:_,w=a.shouldHandleStateChanges,O=void 0===w||w,k=a.storeKey,E=void 0===k?"store":k,M=(a.withRef,a.forwardRef),S=void 0!==M&&M,C=a.context,P=void 0===C?p.ReactReduxContext:C,A=(0,s.default)(a,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);0;var T=P;return function(t){var a=t.displayName||t.name||"Component",n=r(a),u=(0,o.default)({},A,{getDisplayName:r,methodName:y,renderCountProp:j,shouldHandleStateChanges:O,storeKey:E,displayName:n,wrappedComponentName:a,WrappedComponent:t}),p=A.pure;var _=p?c.useMemo:function(e){return e()};function w(a){var n=(0,c.useMemo)((function(){var e=a.forwardedRef,t=(0,s.default)(a,["forwardedRef"]);return[a.context,e,t]}),[a]),r=n[0],i=n[1],p=n[2],y=(0,c.useMemo)((function(){return r&&r.Consumer&&(0,l.isContextConsumer)(c.default.createElement(r.Consumer,null))?r:T}),[r,T]),j=(0,c.useContext)(y),w=Boolean(a.store)&&Boolean(a.store.getState)&&Boolean(a.store.dispatch);Boolean(j)&&Boolean(j.store);var k=w?a.store:j.store,E=(0,c.useMemo)((function(){return function(t){return e(t.dispatch,u)}(k)}),[k]),M=(0,c.useMemo)((function(){if(!O)return b;var e=new d.default(k,w?null:j.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[k,w,j]),S=M[0],C=M[1],P=(0,c.useMemo)((function(){return w?j:(0,o.default)({},j,{subscription:S})}),[w,j,S]),A=(0,c.useReducer)(f,g,x),N=A[0][0],D=A[1];if(N&&N.error)throw N.error;var I=(0,c.useRef)(),F=(0,c.useRef)(p),L=(0,c.useRef)(),R=(0,c.useRef)(!1),z=_((function(){return L.current&&p===F.current?L.current:E(k.getState(),p)}),[k,N,p]);m(v,[F,I,R,p,z,L,C]),m(h,[O,k,S,E,F,I,R,L,C,D],[k,S,E]);var B=(0,c.useMemo)((function(){return c.default.createElement(t,(0,o.default)({},z,{ref:i}))}),[i,t,z]);return(0,c.useMemo)((function(){return O?c.default.createElement(y.Provider,{value:P},B):B}),[y,B,P])}var k=p?c.default.memo(w):w;if(k.WrappedComponent=t,k.displayName=n,S){var M=c.default.forwardRef((function(e,t){return c.default.createElement(k,(0,o.default)({},e,{forwardedRef:t}))}));return M.displayName=n,M.WrappedComponent=t,(0,i.default)(M,t)}return(0,i.default)(k,t)}};var o=r(a(58)),s=r(a(122)),i=r(a(161)),c=n(a(20)),l=a(248),d=r(a(121)),u=a(172),p=a(76),g=[],b=[null,null];function f(e,t){var a=e[1];return[t.payload,a+1]}function m(e,t,a){(0,u.useIsomorphicLayoutEffect)((function(){return e.apply(void 0,t)}),a)}function v(e,t,a,n,r,o,s){e.current=n,t.current=r,a.current=!1,o.current&&(o.current=null,s())}function h(e,t,a,n,r,o,s,i,c,l){if(e){var d=!1,u=null,p=function(){if(!d){var e,a,p=t.getState();try{e=n(p,r.current)}catch(e){a=e,u=e}a||(u=null),e===o.current?s.current||c():(o.current=e,i.current=e,s.current=!0,l({type:"STORE_UPDATED",payload:{error:a}}))}};a.onStateChange=p,a.trySubscribe(),p();return function(){if(d=!0,a.tryUnsubscribe(),a.onStateChange=null,u)throw u}}}var x=function(){return[null,0]}},function(e,t,a){"use strict";t.__esModule=!0,t.useIsomorphicLayoutEffect=void 0;var n=a(20),r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect;t.useIsomorphicLayoutEffect=r},function(e,t,a){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.__esModule=!0,t.default=function(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(var o=0;o<a.length;o++)if(!Object.prototype.hasOwnProperty.call(t,a[o])||!n(e[a[o]],t[a[o]]))return!1;return!0}},function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.wrapMapToPropsConstant=function(e){return function(t,a){var n=e(t,a);function r(){return n}return r.dependsOnOwnProps=!1,r}},t.getDependsOnOwnProps=r,t.wrapMapToPropsFunc=function(e,t){return function(t,a){a.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,a){n.mapToProps=e,n.dependsOnOwnProps=r(e);var o=n(t,a);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=r(o),o=n(t,a)),o},n}};n(a(175));function r(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}},function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.default=function(e,t,a){(0,r.default)(e)||(0,o.default)(a+"() in "+t+" must return a plain object. Instead received "+e+".")};var r=n(a(251)),o=n(a(176))},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,a){"use strict";t.__esModule=!0,t.createStoreHook=s,t.useStore=void 0;var n=a(20),r=a(76),o=a(178);function s(e){void 0===e&&(e=r.ReactReduxContext);var t=e===r.ReactReduxContext?o.useReduxContext:function(){return(0,n.useContext)(e)};return function(){return t().store}}var i=s();t.useStore=i},function(e,t,a){"use strict";t.__esModule=!0,t.useReduxContext=function(){0;return(0,n.useContext)(r.ReactReduxContext)};var n=a(20),r=a(76)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(263),o=(n=r)&&n.__esModule?n:{default:n};t.default={getPlatformName:function(){var e=o.default.os.family||"";return e=e.toLowerCase().replace(/ /g,""),e=/\bwin/.test(e)?"windows":/darwin|osx/.test(e)?"osx":/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(e)?"linux":"other"},getCharacter:function(e){return null==e.which?String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?String.fromCharCode(e.which):null}},e.exports=t.default},function(e,t){function a(e,t,a,n){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,a,n),a}e.exports=a,e.exports.on=a,e.exports.off=function(e,t,a,n){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,a,n),a}},function(e,t,a){"use strict";e.exports=function(e){var t,n;if(t=a(182),n=a(277),"keypress"===e.type){var r=String.fromCharCode(e.which);return e.shiftKey||(r=r.toLowerCase()),r}return void 0!==t[e.which]?t[e.which]:void 0!==n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase()}},function(e,t,a){"use strict";e.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var n=1;n<20;++n)e.exports[111+n]="f"+n;for(n=0;n<=9;++n)e.exports[n+96]=n},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return 0===e.length}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return e.toString()}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return"string"==typeof e}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return null==e}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var n,r=(n=a(307))&&n.__esModule?n:{default:n};t.default=function(e){return-1===e.indexOf("/")?(0,r.default)(e):e.split("/").map(r.default).join("/")}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var n=a(87),r=s(a(126)),o=s(a(189));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function t(a,s,i,c){var l=void 0===s?{}:s,d=l.namespace,u=void 0===d?n.DEFAULT_NAMESPACE:d,p=l.prefix;return void 0===i&&(i={}),void 0===c&&(c=""),(0,r.default)(a).forEach((function(r){var s=function(e){return c||!p||p&&new RegExp("^"+p+u).test(e)?e:""+p+u+e}(function(e){var t;if(!c)return e;var a=e.toString().split(n.ACTION_TYPE_DELIMITER),r=c.split(n.ACTION_TYPE_DELIMITER);return(t=[]).concat.apply(t,r.map((function(e){return a.map((function(t){return""+e+u+t}))}))).join(n.ACTION_TYPE_DELIMITER)}(r)),l=(0,o.default)(r,a);e(l)?t(l,{namespace:u,prefix:p},i,s):i[s]=l})),i}}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){return(0,r.default)(t)?t.get(e):t[e]};var n,r=(n=a(99))&&n.__esModule?n:{default:n}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t,a){void 0===t&&(t=s.default);var u=(0,l.default)(e).split(d.ACTION_TYPE_DELIMITER);(0,n.default)(!(0,c.default)(a),"defaultState for reducer handling "+u.join(", ")+" should be defined"),(0,n.default)((0,r.default)(t)||(0,o.default)(t),"Expected reducer to be a function or object with next and throw reducers");var p=(0,r.default)(t)?[t,t]:[t.next,t.throw].map((function(e){return(0,i.default)(e)?s.default:e})),g=p[0],b=p[1];return function(e,t){void 0===e&&(e=a);var n=t.type;return n&&-1!==u.indexOf((0,l.default)(n))?(!0===t.error?b:g)(e,t):e}};var n=u(a(77)),r=u(a(98)),o=u(a(88)),s=u(a(125)),i=u(a(186)),c=u(a(315)),l=u(a(184)),d=a(87);function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";var n=a(321),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,o,s,i,c,l,d=!1;t||(t={}),a=t.debug||!1;try{if(s=n(),i=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=r[t.format]||r.default;window.clipboardData.setData(o,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(l),i.selectNodeContents(l),c.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(i):c.removeAllRanges()),l&&document.body.removeChild(l),s()}return d}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(58),r=a.n(n),o=a(22),s=(a(20),a(21));const i=e=>{const{isOpen:t,title:a,message:n,onConfirm:i,onCancel:c,confirmButtonText:l,cancelButtonText:d,className:u,...p}=e;return t?Object(s.jsx)(o.EuiConfirmModal,r()({},p,{className:`canvasConfirmModal ${u||""}`,title:a,onCancel:c,onConfirm:i,confirmButtonText:l,cancelButtonText:d,defaultFocusedButton:"confirm",buttonColor:"danger","data-test-subj":"canvasConfirmModal"}),n):null};i.defaultProps={title:"Confirm",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(61),r=a(108),o=a(20),s=a(68),i=a(58),c=a.n(i),l=a(22),d=a(21);const u=({name:e,color:t="#666666",type:a="health",...n})=>{switch(a){case"health":return Object(d.jsx)(l.EuiHealth,c()({color:t},n),e);case"badge":return Object(d.jsx)(l.EuiBadge,c()({color:t},n),e)}},p=Object(n.compose)(Object(n.withProps)((()=>({getTag:e=>r.a.get(e)||{name:e,color:void 0}}))))((({tags:e=[],tagType:t="health",getTag:a})=>Object(d.jsx)(o.Fragment,null,e.length?e.map((e=>{const{color:n,name:r}=a(e),o=Object(s.a)("tag");return Object(d.jsx)(u,{key:o,color:n,name:r,type:t})})):null)))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(70),r=a(169);t.__esModule=!0,t.default=void 0;var o=r(a(20)),s=(n(a(69)),a(76)),i=n(a(121));var c=function(e){var t=e.store,a=e.context,n=e.children,r=(0,o.useMemo)((function(){var e=new i.default(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=(0,o.useMemo)((function(){return t.getState()}),[t]);(0,o.useEffect)((function(){var e=r.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[r,c]);var l=a||s.ReactReduxContext;return o.default.createElement(l.Provider,{value:r},n)};t.default=c},function(e,t,a){e.exports=a(16)(351)},function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.createConnect=b,t.default=void 0;var r=n(a(58)),o=n(a(122)),s=n(a(171)),i=n(a(173)),c=n(a(250)),l=n(a(252)),d=n(a(253)),u=n(a(254));function p(e,t,a){for(var n=t.length-1;n>=0;n--){var r=t[n](e);if(r)return r}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+a+" argument when connecting component "+n.wrappedComponentName+".")}}function g(e,t){return e===t}function b(e){var t=void 0===e?{}:e,a=t.connectHOC,n=void 0===a?s.default:a,b=t.mapStateToPropsFactories,f=void 0===b?l.default:b,m=t.mapDispatchToPropsFactories,v=void 0===m?c.default:m,h=t.mergePropsFactories,x=void 0===h?d.default:h,y=t.selectorFactory,_=void 0===y?u.default:y;return function(e,t,a,s){void 0===s&&(s={});var c=s,l=c.pure,d=void 0===l||l,u=c.areStatesEqual,b=void 0===u?g:u,m=c.areOwnPropsEqual,h=void 0===m?i.default:m,y=c.areStatePropsEqual,j=void 0===y?i.default:y,w=c.areMergedPropsEqual,O=void 0===w?i.default:w,k=(0,o.default)(c,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),E=p(e,f,"mapStateToProps"),M=p(t,v,"mapDispatchToProps"),S=p(a,x,"mergeProps");return n(_,(0,r.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:E,initMapDispatchToProps:M,initMergeProps:S,pure:d,areStatesEqual:b,areOwnPropsEqual:h,areStatePropsEqual:j,areMergedPropsEqual:O},k))}}var f=b();t.default=f},function(e,t,a){"use strict";t.__esModule=!0,t.whenMapDispatchToPropsIsFunction=o,t.whenMapDispatchToPropsIsMissing=s,t.whenMapDispatchToPropsIsObject=i,t.default=void 0;var n=a(97),r=a(174);function o(e){return"function"==typeof e?(0,r.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function s(e){return e?void 0:(0,r.wrapMapToPropsConstant)((function(e){return{dispatch:e}}))}function i(e){return e&&"object"==typeof e?(0,r.wrapMapToPropsConstant)((function(t){return(0,n.bindActionCreators)(e,t)})):void 0}var c=[o,s,i];t.default=c},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var a=t;for(;null!==Object.getPrototypeOf(a);)a=Object.getPrototypeOf(a);return t===a}},function(e,t,a){"use strict";t.__esModule=!0,t.whenMapStateToPropsIsFunction=r,t.whenMapStateToPropsIsMissing=o,t.default=void 0;var n=a(174);function r(e){return"function"==typeof e?(0,n.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function o(e){return e?void 0:(0,n.wrapMapToPropsConstant)((function(){return{}}))}var s=[r,o];t.default=s},function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.defaultMergeProps=o,t.wrapMergePropsFunc=s,t.whenMergePropsIsFunction=i,t.whenMergePropsIsOmitted=c,t.default=void 0;var r=n(a(58));n(a(175));function o(e,t,a){return(0,r.default)({},a,{},e,{},t)}function s(e){return function(t,a){a.displayName;var n,r=a.pure,o=a.areMergedPropsEqual,s=!1;return function(t,a,i){var c=e(t,a,i);return s?r&&o(c,n)||(n=c):(s=!0,n=c),n}}}function i(e){return"function"==typeof e?s(e):void 0}function c(e){return e?void 0:function(){return o}}var l=[i,c];t.default=l},function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.impureFinalPropsSelectorFactory=o,t.pureFinalPropsSelectorFactory=s,t.default=function(e,t){var a=t.initMapStateToProps,n=t.initMapDispatchToProps,i=t.initMergeProps,c=(0,r.default)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=a(e,c),d=n(e,c),u=i(e,c);0;return(c.pure?s:o)(l,d,u,e,c)};var r=n(a(122));n(a(255));function o(e,t,a,n){return function(r,o){return a(e(r,o),t(n,o),o)}}function s(e,t,a,n,r){var o,s,i,c,l,d=r.areStatesEqual,u=r.areOwnPropsEqual,p=r.areStatePropsEqual,g=!1;function b(r,g){var b,f,m=!u(g,s),v=!d(r,o);return o=r,s=g,m&&v?(i=e(o,s),t.dependsOnOwnProps&&(c=t(n,s)),l=a(i,c,s)):m?(e.dependsOnOwnProps&&(i=e(o,s)),t.dependsOnOwnProps&&(c=t(n,s)),l=a(i,c,s)):v?(b=e(o,s),f=!p(b,i),i=b,f&&(l=a(i,c,s)),l):l}return function(r,d){return g?b(r,d):(i=e(o=r,s=d),c=t(n,s),l=a(i,c,s),g=!0,l)}}},function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.default=function(e,t,a,n){o(e,"mapStateToProps",n),o(t,"mapDispatchToProps",n),o(a,"mergeProps",n)};var r=n(a(176));function o(e,t,a){if(!e)throw new Error("Unexpected value for "+t+" in "+a+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||(0,r.default)("The selector for "+t+" of "+a+" did not specify a value for dependsOnOwnProps.")}},function(e,t,a){"use strict";t.__esModule=!0,t.createDispatchHook=o,t.useDispatch=void 0;var n=a(76),r=a(177);function o(e){void 0===e&&(e=n.ReactReduxContext);var t=e===n.ReactReduxContext?r.useStore:(0,r.createStoreHook)(e);return function(){return t().dispatch}}var s=o();t.useDispatch=s},function(e,t,a){"use strict";var n=a(70);t.__esModule=!0,t.createSelectorHook=d,t.useSelector=void 0;var r=a(20),o=a(178),s=n(a(121)),i=a(172),c=a(76),l=function(e,t){return e===t};function d(e){void 0===e&&(e=c.ReactReduxContext);var t=e===c.ReactReduxContext?o.useReduxContext:function(){return(0,r.useContext)(e)};return function(e,a){void 0===a&&(a=l);var n=t();return function(e,t,a,n){var o,c=(0,r.useReducer)((function(e){return e+1}),0)[1],l=(0,r.useMemo)((function(){return new s.default(a,n)}),[a,n]),d=(0,r.useRef)(),u=(0,r.useRef)(),p=(0,r.useRef)();try{o=e!==u.current||d.current?e(a.getState()):p.current}catch(e){throw d.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+d.current.stack+"\n\n"),e}return(0,i.useIsomorphicLayoutEffect)((function(){u.current=e,p.current=o,d.current=void 0})),(0,i.useIsomorphicLayoutEffect)((function(){function e(){try{var e=u.current(a.getState());if(t(e,p.current))return;p.current=e}catch(e){d.current=e}c({})}return l.onStateChange=e,l.trySubscribe(),e(),function(){return l.tryUnsubscribe()}}),[a,l]),o}(e,a,n.store,n.subscription)}}var u=d();t.useSelector=u},function(e,t,a){"use strict";t.__esModule=!0,t.unstable_batchedUpdates=void 0;var n=a(23);t.unstable_batchedUpdates=n.unstable_batchedUpdates},function(e,t,a){e.exports=function(e){"use strict";function t(e,t){e||console.warn(t)}function a(e,t){if(!e)throw new Error("Invariant failed: ".concat(t||""))}function n(){var e=null;function a(a){return t(null==e,"A history supports only one prompt at a time"),e=a,function(){e===a&&(e=null)}}function n(a,n,r,o){if(null!=e){var s="function"==typeof e?e(a,n):e;"string"==typeof s?"function"==typeof r?r(s,o):(t(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==s)}else o(!0)}var r=[];function o(e){var t=!0;function a(){t&&e.apply(void 0,arguments)}return r.push(a),function(){t=!1,r=r.filter((function(e){return e!==a}))}}function s(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r.forEach((function(e){return e.apply(void 0,t)}))}return{setPrompt:a,confirmTransitionTo:n,appendListener:o,notifyListeners:s}}var r=!("undefined"==typeof window||!window.document||!window.document.createElement);function o(e,t){t(window.confirm(e))}function s(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}function i(){return-1===window.navigator.userAgent.indexOf("Firefox")}function c(e){return"/"===e.charAt(0)?e:"/".concat(e)}function l(e){return"/"===e.charAt(0)?e.substr(1):e}function d(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function u(e,t){return d(e,t)?e.substr(t.length):e}function p(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,a=e.search,n=e.hash,r=t||"/";return a&&"?"!==a&&(r+="?"===a.charAt(0)?a:"?".concat(a)),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#".concat(n)),r}var b="popstate",f="hashchange",m=function(){try{return window.history.state||{}}catch(e){return{}}},v={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/".concat(l(e))},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:l,decodePath:c},slash:{encodePath:c,decodePath:c}},h=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},x=function(e){window.location.hash=e},y=function(e){var t=window.location.href.indexOf("#");window.location.replace("".concat(window.location.href.slice(0,t>=0?t:0),"#").concat(e))},_=function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(r,"Hash history needs a DOM");var _=window.history,j=i(),w=s(),O=l.getUserConfirmation,k=void 0===O?o:O,E=l.hashType,M=void 0===E?"slash":E,S=l.keyLength,C=void 0===S?6:S,P=l.basename?p(c(l.basename)):"",A=v[M],T=A.encodePath,N=A.decodePath,D=function(){var a=m(),n=a.key,r=a.state,o=N(h());return t(!P||d(o,P),"".concat('You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "').concat(o,'" to begin with "').concat(P,'".')),P&&(o=u(o,P)),e.createLocation(o,r,n)},I=function(){return Math.random().toString(36).substr(2,C)},F=n(),L=function(e){Object.assign(re,e),re.length=_.length,F.notifyListeners(re.location,re.action)},R=!1,z=null,B=function(){var t=h(),a=T(t);if(t!==a)y(a);else{var n=D(),r=re.location;if(!R&&e.locationsAreEqual(r,n))return;if(z===g(n))return;z=null,H(n)}},H=function(e){if(R)R=!1,L();else{var t="POP";F.confirmTransitionTo(e,t,k,(function(a){a?L({action:t,location:e}):W(e)}))}},W=function(e){var t=re.location,a=$.lastIndexOf(g(t));-1===a&&(a=0);var n=$.lastIndexOf(g(e));-1===n&&(n=0);var r=a-n;r&&(R=!0,Y(r))},V=h(),U=T(V);V!==U&&y(U);var G=D(),$=[g(G)],K=function(e){return"#".concat(T(P+g(e)))},q=function(a,n){var r="PUSH",o=e.createLocation(a,n,I(),re.location);F.confirmTransitionTo(o,r,k,(function(e){if(e){var a=g(o),s=T(P+a);if(w){var i=o.key,c=o.state,l=K(o);_.pushState({key:i,state:c},null,l)}else z=a,h()!==s?(t(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),L()):t(void 0===n,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored"),x(s);var d=$.lastIndexOf(g(re.location)),u=$.slice(0,-1===d?0:d+1);u.push(a),$=u,L({action:r,location:o})}}))},X=function(a,n){var r="REPLACE",o=e.createLocation(a,n,I(),re.location);F.confirmTransitionTo(o,r,k,(function(e){if(e){var a=g(o),s=T(P+a);if(w){var i=o.key,c=o.state,l=K(o);_.replaceState({key:i,state:c},null,l)}else t(void 0===n,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored"),h()!==s&&(z=a,y(s));var d=$.indexOf(g(re.location));-1!==d&&($[d]=a),L({action:r,location:o})}}))},Y=function(e){t(j,"Hash history go(n) causes a full page reload in this browser"),_.go(e)},Z=function(){return Y(-1)},J=function(){return Y(1)},Q=0,ee=function(e){var t=w?b:f;1===(Q+=e)&&1===e?window.addEventListener(t,B):0===Q&&window.removeEventListener(t,B)},te=!1,ae=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=F.setPrompt(e);return te||(ee(1),te=!0),function(){return te&&(te=!1,ee(-1)),t()}},ne=function(e){var t=F.appendListener(e);return ee(1),function(){ee(-1),t()}},re={length:_.length,action:"POP",location:G,createHref:K,push:q,replace:X,go:Y,goBack:Z,goForward:J,block:ae,listen:ne};return re};return _}(a(41))},function(e,t,a){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=d(a(261)),s=d(a(77)),i=a(262),c=d(a(179)),l=a(264);function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,t);var a=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._platformName=c.default.getPlatformName(),a._parseShortcutDescriptor=function(e){return(0,l.isPlainObject)(e)?e[a._platformName]:e},a._keymap=e,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"addUpdateListener",value:function(e){(0,s.default)(e,"addUpdateListener: callback argument is not defined or falsy"),this.on(t.CHANGE_EVENT,e)}},{key:"removeUpdateListener",value:function(e){this.removeListener(t.CHANGE_EVENT,e)}},{key:"setKeymap",value:function(e){(0,s.default)(e,"setKeymap: keymap argument is not defined or falsy."),this._keymap=e,this.emit(t.CHANGE_EVENT)}},{key:"extendKeymap",value:function(e){(0,s.default)(e,"extendKeymap: keymap argument is not defined or falsy."),this._keymap=Object.assign({},this._keymap,e),this.emit(t.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function(e){return function t(a){return(0,o.default)(a,(function(a,n,r){if((0,l.isPlainObject)(r)){if(!r[e])return a[n]=t(r),a;r=r[e]}return a[n]=r,a}),{})}(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function(e){(0,s.default)(e,"getShortcuts: name argument is not defined or falsy.");var t=this._keymap[e];if(t)return(0,l.compact)((0,l.flatten)((0,l.map)(t,this._parseShortcutDescriptor)))}},{key:"_parseShortcutKeyName",value:function(e,t){var a=this;return(0,l.findKey)(e,(function(e){if((0,l.isPlainObject)(e)&&(e=e[a._platformName]),(0,l.isArray)(e)){var n=e.indexOf(t);n>=0&&(e=e[n])}return e===t}))}},{key:"findShortcutName",value:function(e,t){(0,s.default)(e,"findShortcutName: keyName argument is not defined or falsy."),(0,s.default)(t,"findShortcutName: componentName argument is not defined or falsy.");var a=this._keymap[t];return this._parseShortcutKeyName(a,e)}}]),t}(i.EventEmitter);g.CHANGE_EVENT="shortcuts:update",t.default=g,e.exports=t.default}).call(this,a(151))},function(e,t){e.exports=function(e,t){var a=[r],n=2 in arguments;function r(a,r,o,s){return n||(a=e[s[0]],n=!0),t(a,r,e[r],o,s)}return n&&a.push(arguments[2]),Array.prototype.reduce.apply(Object.keys(e),a)}},function(e,t,a){"use strict";var n,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(a,n){function r(a){e.removeListener(t,o),n(a)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),a([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,a){"function"==typeof e.on&&v(e,"error",t,a)}(e,r,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,a,n){var r,o,s,i;if(l(a),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),o=e._events),s=o[t]),void 0===s)s=o[t]=a,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[a,s]:[s,a]:n?s.unshift(a):s.push(a),(r=d(e))>0&&s.length>r&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,i=c,console&&console.warn&&console.warn(i)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(e,t,a){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},r=p.bind(n);return r.listener=a,n.wrapFn=r,r}function b(e,t,a){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?a?[r.listener||r]:[r]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(r):m(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"==typeof a)return 1;if(void 0!==a)return a.length}return 0}function m(e,t){for(var a=new Array(t),n=0;n<t;++n)a[n]=e[n];return a}function v(e,t,a,n){if("function"==typeof e.on)n.once?e.once(t,a):e.on(t,a);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){n.once&&e.removeEventListener(t,r),a(o)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return d(this)},i.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var i=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw i.context=s,i}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var l=c.length,d=m(c,l);for(a=0;a<l;++a)o(d[a],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return l(t),this.on(e,g(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,g(this,e,t)),this},i.prototype.removeListener=function(e,t){var a,n,r,o,s;if(l(t),void 0===(n=this._events))return this;if(void 0===(a=n[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(r=-1,o=a.length-1;o>=0;o--)if(a[o]===t||a[o].listener===t){s=a[o].listener,r=o;break}if(r<0)return this;0===r?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,r),1===a.length&&(n[e]=a[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,a,n;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var r,o=Object.keys(a);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return b(this,e,!0)},i.prototype.rawListeners=function(e){return b(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,a){(function(e,n){var r;
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */(function(){"use strict";var o={function:!0,object:!0},s=o[typeof window]&&window||this,i=o[typeof t]&&t,c=o[typeof e]&&e&&!e.nodeType&&e,l=i&&c&&"object"==typeof n&&n;!l||l.global!==l&&l.window!==l&&l.self!==l||(s=l);var d=Math.pow(2,53)-1,u=/\bOpera/,p=Object.prototype,g=p.hasOwnProperty,b=p.toString;function f(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function m(e){return e=_(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function v(e,t){for(var a in e)g.call(e,a)&&t(e[a],a,e)}function h(e){return null==e?f(e):b.call(e).slice(8,-1)}function x(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function y(e,t){var a=null;return function(e,t){var a=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=d)for(;++a<n;)t(e[a],a,e);else v(e,t)}(e,(function(n,r){a=t(a,n,r,e)})),a}function _(e){return String(e).replace(/^ +| +$/g,"")}var j=function e(t){var a=s,n=t&&"object"==typeof t&&"String"!=h(t);n&&(a=t,t=null);var r=a.navigator||{},o=r.userAgent||"";t||(t=o);var i,c,l,d,p,g=n?!!r.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(b.toString()),f="Object",j=n?f:"ScriptBridgingProxyObject",w=n?f:"Environment",O=n&&a.java?"JavaPackage":h(a.java),k=n?f:"RuntimeObject",E=/\bJava/.test(O)&&a.java,M=E&&h(a.environment)==w,S=E?"a":"α",C=E?"b":"β",P=a.document||{},A=a.operamini||a.opera,T=u.test(T=n&&A?A["[[Class]]"]:h(A))?T:A=null,N=t,D=[],I=null,F=t==o,L=F&&A&&"function"==typeof A.version&&A.version(),R=y([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,a){return e||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(t)&&(a.label||a)})),z=function(e){return y(e,(function(e,a){return e||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(t)&&(a.label||a)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),B=V([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),H=function(e){return y(e,(function(e,a,n){return e||(a[B]||a[/^[a-z]+(?: +[a-z]+\b)*/i.exec(B)]||RegExp("\\b"+x(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n}))}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),W=function(e){return y(e,(function(e,a){var n=a.pattern||x(a);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,a){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&a&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&a&&(e=e.replace(RegExp(t,"i"),a)),m(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,n,a.label||a)),e}))}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function V(e){return y(e,(function(e,a){var n=a.pattern||x(a);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(a.label&&!RegExp(n,"i").test(a.label)?a.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),a=a.label||a,e=m(e[0].replace(RegExp(n,"i"),a).replace(RegExp("; *(?:"+a+"[_-])?","i")," ").replace(RegExp("("+a+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(R&&(R=[R]),H&&!B&&(B=V([H])),(i=/\bGoogle TV\b/.exec(B))&&(B=i[0]),/\bSimulator\b/i.test(t)&&(B=(B?B+" ":"")+"Simulator"),"Opera Mini"==z&&/\bOPiOS\b/.test(t)&&D.push("running in Turbo/Uncompressed mode"),"IE"==z&&/\blike iPhone OS\b/.test(t)?(H=(i=e(t.replace(/like iPhone OS/,""))).manufacturer,B=i.product):/^iP/.test(B)?(z||(z="Safari"),W="iOS"+((i=/ OS ([\d_]+)/i.exec(t))?" "+i[1].replace(/_/g,"."):"")):"Konqueror"!=z||/buntu/i.test(W)?H&&"Google"!=H&&(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(B))||/\bAndroid\b/.test(W)&&/^Chrome/.test(z)&&/\bVersion\//i.test(t)?(z="Android Browser",W=/\bAndroid\b/.test(W)?W:"Android"):"Silk"==z?(/\bMobi/i.test(t)||(W="Android",D.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&D.unshift("accelerated")):"PaleMoon"==z&&(i=/\bFirefox\/([\d.]+)\b/.exec(t))?D.push("identifying as Firefox "+i[1]):"Firefox"==z&&(i=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(W||(W="Firefox OS"),B||(B=i[1])):!z||(i=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(z))?(z&&!B&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(i+"/")+8))&&(z=null),(i=B||H||W)&&(B||H||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(W))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(W)?W:i)+" Browser")):"Electron"==z&&(i=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&D.push("Chromium "+i):W="Kubuntu",L||(L=y(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",x(z),"(?:Firefox|Minefield|NetFront)"],(function(e,a){return e||(RegExp(a+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(i=("iCab"==R&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(z)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(R)&&"WebKit"||!R&&/\bMSIE\b/i.test(t)&&("Mac OS"==W?"Tasman":"Trident")||"WebKit"==R&&/\bPlayStation\b(?! Vita\b)/i.test(z)&&"NetFront")&&(R=[i]),"IE"==z&&(i=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(z+=" Mobile",W="Windows Phone "+(/\+$/.test(i)?i:i+".x"),D.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(z="IE Mobile",W="Windows Phone 8.x",D.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=z&&"Trident"==R&&(i=/\brv:([\d.]+)/.exec(t))&&(z&&D.push("identifying as "+z+(L?" "+L:"")),z="IE",L=i[1]),F){if(d="global",p=null!=(l=a)?typeof l[d]:"number",/^(?:boolean|number|string|undefined)$/.test(p)||"object"==p&&!l[d])h(i=a.runtime)==j?(z="Adobe AIR",W=i.flash.system.Capabilities.os):h(i=a.phantom)==k?(z="PhantomJS",L=(i=i.version||null)&&i.major+"."+i.minor+"."+i.patch):"number"==typeof P.documentMode&&(i=/\bTrident\/(\d+)/i.exec(t))?(L=[L,P.documentMode],(i=+i[1]+4)!=L[1]&&(D.push("IE "+L[1]+" mode"),R&&(R[1]=""),L[1]=i),L="IE"==z?String(L[1].toFixed(1)):L[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(z)&&(D.push("masking as "+z+" "+L),z="IE",L="11.0",R=["Trident"],W="Windows");else if(E&&(N=(i=E.lang.System).getProperty("os.arch"),W=W||i.getProperty("os.name")+" "+i.getProperty("os.version")),M){try{L=a.require("ringo/engine").version.join("."),z="RingoJS"}catch(e){(i=a.system)&&i.global.system==a.system&&(z="Narwhal",W||(W=i[0].os||null))}z||(z="Rhino")}else"object"==typeof a.process&&!a.process.browser&&(i=a.process)&&("object"==typeof i.versions&&("string"==typeof i.versions.electron?(D.push("Node "+i.versions.node),z="Electron",L=i.versions.electron):"string"==typeof i.versions.nw&&(D.push("Chromium "+L,"Node "+i.versions.node),z="NW.js",L=i.versions.nw)),z||(z="Node.js",N=i.arch,W=i.platform,L=(L=/[\d.]+/.exec(i.version))?L[0]:null));W=W&&m(W)}if(L&&(i=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(F&&r.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(I=/b/i.test(i)?"beta":"alpha",L=L.replace(RegExp(i+"\\+?$"),"")+("beta"==I?C:S)+(/\d+\+?/.exec(i)||"")),"Fennec"==z||"Firefox"==z&&/\b(?:Android|Firefox OS)\b/.test(W))z="Firefox Mobile";else if("Maxthon"==z&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(B))"Xbox 360"==B&&(W=null),"Xbox 360"==B&&/\bIEMobile\b/.test(t)&&D.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||B||/Browser|Mobi/.test(z))||"Windows CE"!=W&&!/Mobi/i.test(t))if("IE"==z&&F)try{null===a.external&&D.unshift("platform preview")}catch(e){D.unshift("embedded")}else(/\bBlackBerry\b/.test(B)||/\bBB10\b/.test(t))&&(i=(RegExp(B.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||L)?(W=((i=[i,/BB10/.test(t)])[1]?(B=null,H="BlackBerry"):"Device Software")+" "+i[0],L=null):this!=v&&"Wii"!=B&&(F&&A||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==z&&/\bOS X (?:\d+\.){2,}/.test(W)||"IE"==z&&(W&&!/^Win/.test(W)&&L>5.5||/\bWindows XP\b/.test(W)&&L>8||8==L&&!/\bTrident\b/.test(t)))&&!u.test(i=e.call(v,t.replace(u,"")+";"))&&i.name&&(i="ing as "+i.name+((i=i.version)?" "+i:""),u.test(z)?(/\bIE\b/.test(i)&&"Mac OS"==W&&(W=null),i="identify"+i):(i="mask"+i,z=T?m(T.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(i)&&(W=null),F||(L=null)),R=["Presto"],D.push(i));else z+=" Mobile";(i=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(i=[parseFloat(i.replace(/\.(\d)$/,".0$1")),i],"Safari"==z&&"+"==i[1].slice(-1)?(z="WebKit Nightly",I="alpha",L=i[1].slice(0,-1)):L!=i[1]&&L!=(i[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(L=null),i[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==i[0]&&537.36==i[2]&&parseFloat(i[1])>=28&&"WebKit"==R&&(R=["Blink"]),F&&(g||i[1])?(R&&(R[1]="like Chrome"),i=i[1]||((i=i[0])<530?1:i<532?2:i<532.05?3:i<533?4:i<534.03?5:i<534.07?6:i<534.1?7:i<534.13?8:i<534.16?9:i<534.24?10:i<534.3?11:i<535.01?12:i<535.02?"13+":i<535.07?15:i<535.11?16:i<535.19?17:i<536.05?18:i<536.1?19:i<537.01?20:i<537.11?"21+":i<537.13?23:i<537.18?24:i<537.24?25:i<537.36?26:"Blink"!=R?"27":"28")):(R&&(R[1]="like Safari"),i=(i=i[0])<400?1:i<500?2:i<526?3:i<533?4:i<534?"4+":i<535?5:i<537?6:i<538?7:i<601?8:"8"),R&&(R[1]+=" "+(i+="number"==typeof i?".x":/[.+]/.test(i)?"":"+")),"Safari"==z&&(!L||parseInt(L)>45)&&(L=i)),"Opera"==z&&(i=/\bzbov|zvav$/.exec(W))?(z+=" ",D.unshift("desktop mode"),"zvav"==i?(z+="Mini",L=null):z+="Mobile",W=W.replace(RegExp(" *"+i+"$"),"")):"Safari"==z&&/\bChrome\b/.exec(R&&R[1])&&(D.unshift("desktop mode"),z="Chrome Mobile",L=null,/\bOS X\b/.test(W)?(H="Apple",W="iOS 4.3+"):W=null),L&&0==L.indexOf(i=/[\d.]+$/.exec(W))&&t.indexOf("/"+i+"-")>-1&&(W=_(W.replace(i,""))),R&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||"Safari"!=z&&/^iOS/.test(W)&&/\bSafari\b/.test(R[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(z)&&R[1])&&(i=R[R.length-1])&&D.push(i),D.length&&(D=["("+D.join("; ")+")"]),H&&B&&B.indexOf(H)<0&&D.push("on "+H),B&&D.push((/^on /.test(D[D.length-1])?"":"on ")+B),W&&(i=/ ([\d.+]+)$/.exec(W),c=i&&"/"==W.charAt(W.length-i[0].length-1),W={architecture:32,family:i&&!c?W.replace(i[0],""):W,version:i?i[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(i=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(N))&&!/\bi686\b/i.test(N)?(W&&(W.architecture=64,W.family=W.family.replace(RegExp(" *"+i),"")),z&&(/\bWOW64\b/i.test(t)||F&&/\w(?:86|32)$/.test(r.cpuClass||r.platform)&&!/\bWin64; x64\b/i.test(t))&&D.unshift("32-bit")):W&&/^OS X/.test(W.family)&&"Chrome"==z&&parseFloat(L)>=39&&(W.architecture=64),t||(t=null);var U={};return U.description=t,U.layout=R&&R[0],U.manufacturer=H,U.name=z,U.prerelease=I,U.product=B,U.ua=t,U.version=z&&L,U.os=W||{architecture:null,family:null,version:null,toString:function(){return"null"}},U.parse=e,U.toString=function(){return this.description||""},U.version&&D.unshift(L),U.name&&D.unshift(z),W&&z&&(W!=String(W).split(" ")[0]||W!=z.split(" ")[0]&&!B)&&D.push(B?"("+W+")":"on "+W),D.length&&(U.description=D.join(" ")),U}();s.platform=j,void 0===(r=function(){return j}.call(t,a,t,e))||(e.exports=r)}).call(this)}).call(this,a(120)(e),a(117))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=t.isArray=function(e){return Array.isArray(e)},o=t.isPlainObject=function(e){if(!("object"===(void 0===e?"undefined":n(e))&&null!==e&&!r(e))||e.toString&&"[object Object]"!==e.toString())return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var a=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&Function.prototype.toString.call(a)===Function.prototype.toString.call(Object)},s=(t.findKey=function(e,t){if(o(e)||r(e))return Object.keys(e).find((function(a){return t(e[a])}))},t.compact=function(e){return e.filter(Boolean)},function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.reduce((function(t,n){return r(n)&&a?t.concat(e(n,!1)):(t.push(n),t)}),[])});t.flatten=function(e){if(!r(e))throw new Error("flatten expects an array");return s(e)},t.map=function(e,t){if(r(e))return e.map(t);for(var a=[],n=Object.keys(e),o=n.length,s=0;s<o;s+=1){var i=n[s];a.push(t(e[i],i))}return a}},function(e,t,a){"use strict";e.exports=a(266)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=l(a(20)),o=l(a(77)),s=l(a(267)),i=l(a(69)),c=l(a(179));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,a,n;d(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n._combokeys=null,n._lastEvent=null,n._bindShortcuts=function(e){var t=n._getElementToBind();t.setAttribute("tabindex",n.props.tabIndex),n._combokeys=new s.default(t,{storeInstancesGlobally:!1}),n._decorateCombokeys(),n._combokeys.bind(e,n._handleShortcuts,n.props.eventType),n.props.global&&t.addEventListener("shortcuts:global",n._customGlobalHandler)},n._customGlobalHandler=function(e){var t=e.detail,a=t.character,r=t.modifiers,o=t.event,s=null;n.props.targetNodeSelector&&(s=document.querySelector(n.props.targetNodeSelector)),e.target!==n._domNode&&e.target!==s&&n._combokeys.handleKey(a,r,o,!0)},n._decorateCombokeys=function(){var e=n._getElementToBind(),t=n._combokeys.handleKey.bind(n._combokeys);n._combokeys.stopCallback=function(e,t,a){var r="INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.contentEditable&&"true"===t.contentEditable,o=void 0;return o=e.key?1===e.key.length:Boolean(c.default.getCharacter(e)),!(!r||!o||n.props.alwaysFireHandler)},n._combokeys.handleKey=function(a,r,o,s){if(!n._lastEvent||o.timeStamp!==n._lastEvent.timeStamp||o.type!==n._lastEvent.type){n._lastEvent=o;var i=!1;if(n.props.isolate&&!o.__isolateShortcuts&&(o.__isolateShortcuts=!0,i=!0),s||e.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:a,modifiers:r,event:o},bubbles:!0,cancelable:!0})),!o.__isolateShortcuts)return n.props.preventDefault&&o.preventDefault(),n.props.stopPropagation&&!s&&o.stopPropagation(),void t(a,r,o);(n.props.global||i)&&t(a,r,o)}}},n._getElementToBind=function(){var e=null;return n.props.targetNodeSelector?(e=document.querySelector(n.props.targetNodeSelector),(0,o.default)(e,"Node selector '"+n.props.targetNodeSelector+"'  was not found.")):e=n._domNode,e},n._unbindShortcuts=function(){n._combokeys&&(n._combokeys.detach(),n._combokeys.reset())},n._onUpdate=function(){var e=n.props.name&&n.context.shortcuts.getShortcuts(n.props.name);n._unbindShortcuts(),n._bindShortcuts(e||[])},n._handleShortcuts=function(e,t){if(n.props.name){var a=n.context.shortcuts.findShortcutName(t,n.props.name);n.props.handler&&n.props.handler(a,e)}},u(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this._onUpdate(),this.props.name&&this.context.shortcuts.addUpdateListener(this._onUpdate)}},{key:"componentWillUnmount",value:function(){(this._unbindShortcuts(),this.props.name&&this.context.shortcuts.removeUpdateListener(this._onUpdate),this.props.global)&&this._getElementToBind().removeEventListener("shortcuts:global",this._customGlobalHandler)}},{key:"render",value:function(){var e=this;return r.default.createElement("div",{ref:function(t){e._domNode=t},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]),t}(r.default.Component);p.displayName="Shortcuts",p.contextTypes={shortcuts:i.default.object.isRequired},p.propTypes={children:i.default.node,handler:i.default.func,name:i.default.string,tabIndex:i.default.number,className:i.default.string,eventType:i.default.string,stopPropagation:i.default.bool,preventDefault:i.default.bool,targetNodeSelector:i.default.string,global:i.default.bool,isolate:i.default.bool,alwaysFireHandler:i.default.bool},p.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:!0,preventDefault:!1,targetNodeSelector:null,global:!1,isolate:!1,alwaysFireHandler:!1},t.default=p,e.exports=t.default},function(e,t,a){"use strict";e.exports=function(e,t){var a=this,n=a.constructor;return a.options=Object.assign({storeInstancesGlobally:!0},t||{}),a.callbacks={},a.directMap={},a.sequenceLevels={},a.resetTimer=null,a.ignoreNextKeyup=!1,a.ignoreNextKeypress=!1,a.nextExpectedAction=!1,a.element=e,a.addEvents(),a.options.storeInstancesGlobally&&n.instances.push(a),a},e.exports.prototype.bind=a(268),e.exports.prototype.bindMultiple=a(269),e.exports.prototype.unbind=a(270),e.exports.prototype.trigger=a(271),e.exports.prototype.reset=a(272),e.exports.prototype.stopCallback=a(273),e.exports.prototype.handleKey=a(274),e.exports.prototype.addEvents=a(275),e.exports.prototype.bindSingle=a(279),e.exports.prototype.getKeyInfo=a(280),e.exports.prototype.pickBestAction=a(284),e.exports.prototype.getReverseMap=a(285),e.exports.prototype.getMatches=a(286),e.exports.prototype.resetSequences=a(288),e.exports.prototype.fireCallback=a(289),e.exports.prototype.bindSequence=a(292),e.exports.prototype.resetSequenceTimer=a(293),e.exports.prototype.detach=a(294),e.exports.instances=[],e.exports.reset=a(295),e.exports.REVERSE_MAP=null},function(e,t,a){"use strict";e.exports=function(e,t,a){return e=e instanceof Array?e:[e],this.bindMultiple(e,t,a),this}},function(e,t,a){"use strict";e.exports=function(e,t,a){for(var n=0;n<e.length;++n)this.bindSingle(e[n],t,a)}},function(e,t,a){"use strict";e.exports=function(e,t){return this.bind(e,(function(){}),t)}},function(e,t,a){"use strict";e.exports=function(e,t){return this.directMap[e+":"+t]&&this.directMap[e+":"+t]({},e),this}},function(e,t,a){"use strict";e.exports=function(){return this.callbacks={},this.directMap={},this}},function(e,t,a){"use strict";e.exports=function(e,t){if((" "+t.className+" ").indexOf(" combokeys ")>-1)return!1;var a=t.tagName.toLowerCase();return"input"===a||"select"===a||"textarea"===a||t.isContentEditable}},function(e,t,a){"use strict";e.exports=function(e,t,n){var r,o,s,i,c=this,l={},d=0,u=!1;for(r=c.getMatches(e,t,n),o=0;o<r.length;++o)r[o].seq&&(d=Math.max(d,r[o].level));for(o=0;o<r.length;++o)if(r[o].seq){if(r[o].level!==d)continue;u=!0,l[r[o].seq]=1,c.fireCallback(r[o].callback,n,r[o].combo,r[o].seq)}else u||c.fireCallback(r[o].callback,n,r[o].combo);i="keypress"===n.type&&c.ignoreNextKeypress,s=a(123),n.type!==c.nextExpectedAction||s(e)||i||c.resetSequences(l),c.ignoreNextKeypress=u&&"keydown"===n.type}},function(e,t,a){"use strict";e.exports=function(){var e=this,t=a(180),n=e.element;e.eventHandler=a(276).bind(e),t(n,"keypress",e.eventHandler),t(n,"keydown",e.eventHandler),t(n,"keyup",e.eventHandler)}},function(e,t,a){"use strict";e.exports=function(e){var t,n=this;"number"!=typeof e.which&&(e.which=e.keyCode);var r=a(181)(e);void 0!==r&&("keyup"!==e.type||n.ignoreNextKeyup!==r?(t=a(278),n.handleKey(r,t(e),e)):n.ignoreNextKeyup=!1)}},function(e,t,a){"use strict";e.exports={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},function(e,t,a){"use strict";e.exports=function(e,t,a,n,r){var o=this;o.directMap[e+":"+a]=t;var s,i=(e=e.replace(/\s+/g," ")).split(" ");i.length>1?o.bindSequence(e,i,t,a):(s=o.getKeyInfo(e,a),o.callbacks[s.key]=o.callbacks[s.key]||[],o.getMatches(s.key,s.modifiers,{type:s.action},n,e,r),o.callbacks[s.key][n?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:n,level:r,combo:e}))}},function(e,t,a){"use strict";e.exports=function(e,t){var n,r,o,s,i,c,l=[];for(n=a(281)(e),s=a(282),i=a(283),c=a(123),o=0;o<n.length;++o)s[r=n[o]]&&(r=s[r]),t&&"keypress"!==t&&i[r]&&(r=i[r],l.push("shift")),c(r)&&l.push(r);return{key:r,modifiers:l,action:t=this.pickBestAction(r,l,t)}}},function(e,t,a){"use strict";e.exports=function(e){return"+"===e?["+"]:e.split("+")}},function(e,t,a){"use strict";e.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},function(e,t,a){"use strict";e.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},function(e,t,a){"use strict";e.exports=function(e,t,a){return a||(a=this.getReverseMap()[e]?"keydown":"keypress"),"keypress"===a&&t.length&&(a="keydown"),a}},function(e,t,a){"use strict";e.exports=function(){var e,t=this.constructor;if(!t.REVERSE_MAP)for(var n in t.REVERSE_MAP={},e=a(182))n>95&&n<112||e.hasOwnProperty(n)&&(t.REVERSE_MAP[e[n]]=n);return t.REVERSE_MAP}},function(e,t,a){"use strict";e.exports=function(e,t,n,r,o,s){var i,c,l,d,u=this,p=[],g=n.type;"keypress"!==g||n.code&&"Arrow"===n.code.slice(0,5)||(u.callbacks["any-character"]||[]).forEach((function(e){p.push(e)}));if(!u.callbacks[e])return p;for(l=a(123),"keyup"===g&&l(e)&&(t=[e]),i=0;i<u.callbacks[e].length;++i)if(c=u.callbacks[e][i],(r||!c.seq||u.sequenceLevels[c.seq]===c.level)&&g===c.action&&(d=a(287),"keypress"===g&&!n.metaKey&&!n.ctrlKey||d(t,c.modifiers))){var b=!r&&c.combo===o,f=r&&c.seq===r&&c.level===s;(b||f)&&u.callbacks[e].splice(i,1),p.push(c)}return p}},function(e,t,a){"use strict";e.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},function(e,t,a){"use strict";e.exports=function(e){var t=this;e=e||{};var a,n=!1;for(a in t.sequenceLevels)e[a]?n=!0:t.sequenceLevels[a]=0;n||(t.nextExpectedAction=!1)}},function(e,t,a){"use strict";e.exports=function(e,t,n,r){this.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(a(290)(t),a(291)(t))}},function(e,t,a){"use strict";e.exports=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},function(e,t,a){"use strict";e.exports=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},function(e,t,a){"use strict";e.exports=function(e,t,n,r){var o=this;function s(t){return function(){o.nextExpectedAction=t,++o.sequenceLevels[e],o.resetSequenceTimer()}}function i(t){var s;o.fireCallback(n,t,e),"keyup"!==r&&(s=a(181),o.ignoreNextKeyup=s(t)),setTimeout((function(){o.resetSequences()}),10)}o.sequenceLevels[e]=0;for(var c=0;c<t.length;++c){var l=c+1===t.length?i:s(r||o.getKeyInfo(t[c+1]).action);o.bindSingle(t[c],l,r,e,c)}}},function(e,t,a){"use strict";e.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout((function(){e.resetSequences()}),1e3)}},function(e,t,a){var n=a(180).off;e.exports=function(){var e=this,t=e.element;n(t,"keypress",e.eventHandler),n(t,"keydown",e.eventHandler),n(t,"keyup",e.eventHandler)}},function(e,t,a){"use strict";e.exports=function(){this.instances.forEach((function(e){e.reset()}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(297);Object.defineProperty(t,"createThunk",{enumerable:!0,get:function(){return n.createThunk}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createThunk=function(e,t){var a=function(){for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return function(a,r){return t.apply(void 0,[{dispatch:a,getState:r,type:e}].concat(n))}};return a.toString=function(){return e.toString()},a}},function(e,t,a){var n=a(299),r=a(300);e.exports=function(e,t,a){var o=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var i=0;i<16;++i)t[o+i]=s[i];return t||r(s)}},function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=a;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];(0,n.default)(p(t),"Expected action types to be strings, symbols, or action creators");var r=t.map(i.default).join(l.ACTION_TYPE_DELIMITER);return{toString:function(){return r}}};var n=d(a(77)),r=d(a(98)),o=d(a(302)),s=d(a(183)),i=d(a(184)),c=d(a(185)),l=a(87);function d(e){return e&&e.__esModule?e:{default:e}}function u(e){return(0,c.default)(e)||(0,r.default)(e)||(0,o.default)(e)}function p(e){return!(0,s.default)(e)&&e.every(u)}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return"symbol"==typeof e||"object"==typeof e&&"[object Symbol]"===Object.prototype.toString.call(e)}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return null===e}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];var s=(0,r.default)((0,d.default)(a))?a.pop():{};if((0,n.default)(a.every(c.default)&&((0,c.default)(e)||(0,r.default)(e)),"Expected optional object followed by string action types"),(0,c.default)(e))return j([e].concat(a),s);return h({},y(e,s),j(a,s))};var n=v(a(77)),r=v(a(88)),o=v(a(98)),s=v(a(125)),i=v(a(305)),c=v(a(185)),l=v(a(186)),d=v(a(306)),u=v(a(187)),p=v(a(310)),g=v(a(311)),b=v(a(312)),f=v(a(124)),m=a(87);function v(e){return e&&e.__esModule?e:{default:e}}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){x(e,t,a[t])}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t){var a=_((0,g.default)(e,t));return(0,b.default)(a,t)}function _(e,t){var a=void 0===t?{}:t,r=a.prefix,c=a.namespace,d=void 0===c?m.DEFAULT_NAMESPACE:c;return(0,p.default)(Object.keys(e),(function(t,a){var c,u=e[a];(0,n.default)(function(e){if((0,o.default)(e)||(0,l.default)(e))return!0;if((0,i.default)(e)){var t=e[0],a=void 0===t?s.default:t,n=e[1];return(0,o.default)(a)&&(0,o.default)(n)}return!1}(u),"Expected function, undefined, null, or array with payload and meta functions for "+a);var p=r?""+r+d+a:a,g=(0,i.default)(u)?f.default.apply(void 0,[p].concat(u)):(0,f.default)(p,u);return h({},t,((c={})[a]=g,c))}))}function j(e,t){var a=_((0,p.default)(e,(function(e,t){var a;return h({},e,((a={})[t]=s.default,a))})),t);return(0,p.default)(Object.keys(a),(function(e,t){var n;return h({},e,((n={})[(0,u.default)(t)]=a[t],n))}))}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return Array.isArray(e)}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return e[e.length-1]}},function(e,t,a){var n=a(308);e.exports=function(e){return n(e).replace(/\s(\w)/g,(function(e,t){return t.toUpperCase()}))}},function(e,t,a){var n=a(309);e.exports=function(e){return n(e).replace(/[\W_]+(.|$)/g,(function(e,t){return t?" "+t:""})).trim()}},function(e,t){e.exports=function(e){return a.test(e)?e.toLowerCase():n.test(e)?(function(e){return e.replace(o,(function(e,t){return t?" "+t:""}))}(e)||e).toLowerCase():r.test(e)?function(e){return e.replace(s,(function(e,t,a){return t+" "+a.toLowerCase().split("").join(" ")}))}(e).toLowerCase():e.toLowerCase()};var a=/\s/,n=/(_|-|\.|:)/,r=/([a-z][A-Z]|[A-Z][a-z])/;var o=/[\W_]+(.|$)/g;var s=/(.)([A-Z]+)/g},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e,t){return e.reduce((function(e,a){return t(e,a)}),{})}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var n=r(a(88));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,r(a(188)).default)(n.default);t.default=o},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){var a=void 0===t?{}:t,s=a.namespace,i=void 0===s?n.DEFAULT_NAMESPACE:s,c=a.prefix;function l(t,a,n){var s=(0,o.default)(n.shift());(0,r.default)(n)?a[s]=e[t]:(a[s]||(a[s]={}),l(t,a[s],n))}var d={};return Object.getOwnPropertyNames(e).forEach((function(e){var t=c?e.replace(""+c+i,""):e;return l(e,d,t.split(i))})),d};var n=a(87),r=s(a(183)),o=s(a(187));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var n=o(a(314)),r=o(a(124));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return(0,n.default)((0,r.default)(e,t),t.length)}},function(e,t){e.exports=function(e,t){return function a(){null==t&&(t=e.length);var n=[].slice.call(arguments);return n.length>=t?e.apply(this,n):function(){return a.apply(this,n.concat([].slice.call(arguments)))}}}},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return void 0===e}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t,a){void 0===a&&(a={});(0,r.default)((0,o.default)(e)||(0,s.default)(e),"Expected handlers to be a plain object.");var u=(0,c.default)(e,a),p=(0,i.default)(u).map((function(e){return(0,l.default)(e,(0,d.default)(e,u),t)})),g=n.default.apply(void 0,p.concat([t]));return function(e,a){return void 0===e&&(e=t),g(e,a)}};var n=u(a(317)),r=u(a(77)),o=u(a(88)),s=u(a(99)),i=u(a(126)),c=u(a(318)),l=u(a(190)),d=u(a(189));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n="function"!=typeof t[t.length-1]&&t.pop(),r=t;if(void 0===n)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var a=arguments.length,o=Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];var i=void 0===e,c=void 0===t;return i&&c&&n?n:r.reduce((function(e,a){return a.apply(void 0,[e,t].concat(o))}),i&&!c&&n?n:e)}},e.exports=t.default},function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var n=s(a(88)),r=s(a(99)),o=s(a(319));function s(e){return e&&e.__esModule?e:{default:e}}var i=(0,s(a(188)).default)((function(e){return((0,n.default)(e)||(0,r.default)(e))&&!(0,o.default)(e)}));t.default=i},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,r.default)(e),a=t.every((function(e){return"next"===e||"throw"===e}));return t.length&&t.length<=2&&a};var n,r=(n=a(126))&&n.__esModule?n:{default:n}},,function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(52),r=a(20),o=n.__importDefault(a(323));t.default=function(e,t){var a=r.useState(t),n=a[0],s=a[1];return o.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=r},function(e,t,a){e.exports=a(16)(1271)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,a){var n,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function r(e,t){if(!n[e]){n[e]={};for(var a=0;a<e.length;a++)n[e][e.charAt(a)]=a}return n[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var a=o._compress(e,6,(function(e){return t.charAt(e)}));switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(a){return r(t,e.charAt(a))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),a=new Uint8Array(2*t.length),n=0,r=t.length;n<r;n++){var s=t.charCodeAt(n);a[2*n]=s>>>8,a[2*n+1]=s%256}return a},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var a=new Array(t.length/2),n=0,r=a.length;n<r;n++)a[n]=256*t[2*n]+t[2*n+1];var s=[];return a.forEach((function(t){s.push(e(t))})),o.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return a.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return r(a,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,a){if(null==e)return"";var n,r,o,s={},i={},c="",l="",d="",u=2,p=3,g=2,b=[],f=0,m=0;for(o=0;o<e.length;o+=1)if(c=e.charAt(o),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=p++,i[c]=!0),l=d+c,Object.prototype.hasOwnProperty.call(s,l))d=l;else{if(Object.prototype.hasOwnProperty.call(i,d)){if(d.charCodeAt(0)<256){for(n=0;n<g;n++)f<<=1,m==t-1?(m=0,b.push(a(f)),f=0):m++;for(r=d.charCodeAt(0),n=0;n<8;n++)f=f<<1|1&r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r>>=1}else{for(r=1,n=0;n<g;n++)f=f<<1|r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r=0;for(r=d.charCodeAt(0),n=0;n<16;n++)f=f<<1|1&r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r>>=1}0==--u&&(u=Math.pow(2,g),g++),delete i[d]}else for(r=s[d],n=0;n<g;n++)f=f<<1|1&r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r>>=1;0==--u&&(u=Math.pow(2,g),g++),s[l]=p++,d=String(c)}if(""!==d){if(Object.prototype.hasOwnProperty.call(i,d)){if(d.charCodeAt(0)<256){for(n=0;n<g;n++)f<<=1,m==t-1?(m=0,b.push(a(f)),f=0):m++;for(r=d.charCodeAt(0),n=0;n<8;n++)f=f<<1|1&r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r>>=1}else{for(r=1,n=0;n<g;n++)f=f<<1|r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r=0;for(r=d.charCodeAt(0),n=0;n<16;n++)f=f<<1|1&r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r>>=1}0==--u&&(u=Math.pow(2,g),g++),delete i[d]}else for(r=s[d],n=0;n<g;n++)f=f<<1|1&r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r>>=1;0==--u&&(u=Math.pow(2,g),g++)}for(r=2,n=0;n<g;n++)f=f<<1|1&r,m==t-1?(m=0,b.push(a(f)),f=0):m++,r>>=1;for(;;){if(f<<=1,m==t-1){b.push(a(f));break}m++}return b.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,a,n){var r,o,s,i,c,l,d,u=[],p=4,g=4,b=3,f="",m=[],v={val:n(0),position:a,index:1};for(r=0;r<3;r+=1)u[r]=r;for(s=0,c=Math.pow(2,2),l=1;l!=c;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=n(v.index++)),s|=(i>0?1:0)*l,l<<=1;switch(s){case 0:for(s=0,c=Math.pow(2,8),l=1;l!=c;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=n(v.index++)),s|=(i>0?1:0)*l,l<<=1;d=e(s);break;case 1:for(s=0,c=Math.pow(2,16),l=1;l!=c;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=n(v.index++)),s|=(i>0?1:0)*l,l<<=1;d=e(s);break;case 2:return""}for(u[3]=d,o=d,m.push(d);;){if(v.index>t)return"";for(s=0,c=Math.pow(2,b),l=1;l!=c;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=n(v.index++)),s|=(i>0?1:0)*l,l<<=1;switch(d=s){case 0:for(s=0,c=Math.pow(2,8),l=1;l!=c;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=n(v.index++)),s|=(i>0?1:0)*l,l<<=1;u[g++]=e(s),d=g-1,p--;break;case 1:for(s=0,c=Math.pow(2,16),l=1;l!=c;)i=v.val&v.position,v.position>>=1,0==v.position&&(v.position=a,v.val=n(v.index++)),s|=(i>0?1:0)*l,l<<=1;u[g++]=e(s),d=g-1,p--;break;case 2:return m.join("")}if(0==p&&(p=Math.pow(2,b),b++),u[d])f=u[d];else{if(d!==g)return null;f=o+o.charAt(0)}m.push(f),u[g++]=o+f.charAt(0),o=f,0==--p&&(p=Math.pow(2,b),b++)}}};return o}();void 0===(n=function(){return r}.call(t,a,t,e))||(e.exports=n)},function(e,t,a){"use strict";function n(e){return function(t){var a=t.dispatch,n=t.getState;return function(t){return function(r){return"function"==typeof r?r(a,n,e):t(r)}}}}t.__esModule=!0;var r=n();r.withExtraArgument=n,t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n="function"!=typeof t[0]&&t.shift(),r=t;if(void 0===n)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var a=arguments.length,o=Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];var i=void 0===e,c=void 0===t;return i&&c&&n?n:r.reduce((function(e,a,n){if(void 0===a)throw new TypeError("An undefined reducer was passed in at index "+n);return a.apply(void 0,[e,t].concat(o))}),i&&!c&&n?n:e)}},e.exports=t.default},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(330);case"v7light":return a(332);case"v8dark":return a(334);case"v8light":return a(336)}},function(e,t,a){var n=a(73),r=a(331);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},function(e,t,a){(t=a(74)(!1)).push([e.i,".canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;flex-direction:column;background-color:#141519}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #343741 25%, transparent 25%),linear-gradient(-45deg, #343741 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #343741 75%),linear-gradient(-45deg, transparent 75%, #343741 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;font-size:14px;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #343741}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#F66;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#141519;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #343741;background:#25262E;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:scroll;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#25262E;display:flex;position:relative;border-left:1px solid #343741}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#141519;z-index:6000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #343741}.canvasArg__add:hover{background-color:#25262E}.canvasArg__add:hover label{color:#D4DAE5}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(27,169,245,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:4px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #343741;height:32px;width:32px;border-radius:4px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#98A2B3}.canvasDataSource{background-color:#1D1E24;color:#DFE5EF;border-radius:1px solid #343741;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;color:#DFE5EF;font-size:16px;font-size:1rem;line-height:1.5rem;font-weight:600;letter-spacing:-.02em;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#7DE2D1}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #343741}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #343741}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__editor{height:auto;position:absolute;top:0;left:0;bottom:57px;right:0}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #343741;background-color:#1D1E24}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasBorderResizeHandle{box-shadow:0 2px 2px -1px rgba(0,0,0,0.3);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#1D1E24;border:1px solid #98A2B3}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #98A2B3;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#535966}.tooltipAnnotation{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#343741;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#7DE2D1;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(0,0,0,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(0,0,0,0.2),0 4px 4px -1px rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(0,0,0,0.2),0 4px 4px -1px rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.2);outline:2px solid #343741;outline-color:#98A2B3}.canvasPageManager .canvasPageManager__pageNumber{color:#98A2B3}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 2px 2px -1px rgba(0,0,0,0.3),0 1px 5px -2px rgba(0,0,0,0.3);position:relative;overflow:hidden;color:#DFE5EF}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#1a1a20;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #343741;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#25262E;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:'';height:1px;position:absolute;left:0;width:100%;background:#343741}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#16171c;margin:0;border-radius:4px 4px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(255,255,255,0.1)}.canvasToolbar__home{padding:12px 0 12px 24px;height:100%}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#1a1a20;position:relative;z-index:200}.canvasTray{box-shadow:0 0 12px -1px rgba(0,0,0,0.2),0 0 4px -1px rgba(0,0,0,0.2),0 0 2px 0 rgba(0,0,0,0.2);flex-direction:column}.canvasTray__panel{background-color:#16171c;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #535966 1px, transparent 1px),linear-gradient(to bottom, #535966 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{box-shadow:0 0 12px -1px rgba(0,0,0,0.2),0 0 4px -1px rgba(0,0,0,0.2),0 0 2px 0 rgba(0,0,0,0.2);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#1D1E24}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.fadeIn{animation-name:'fadeIn'}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.fadeOut{animation-name:'fadeOut'}@keyframes rotateIn{from{transform-origin:left bottom;transform:rotate3d(0, 0, 1, 45deg);opacity:0}to{transform-origin:left bottom;transform:translate3d(0, 0, 0);opacity:1}}.rotateIn{animation-name:'rotateIn'}@keyframes rotateOut{from{transform-origin:left bottom;opacity:1}to{transform-origin:left bottom;transform:rotate3d(0, 0, 1, -45deg);opacity:0}}.rotateOut{animation-name:'rotateOut'}@keyframes slideIn{from{transform:translate3d(100%, 0, 0);visibility:visible}to{transform:translate3d(0, 0, 0)}}.slideIn{animation-name:'slideIn'}@keyframes slideOut{from{transform:translate3d(0, 0, 0)}to{visibility:hidden;transform:translate3d(-100%, 0, 0)}}.slideOut{animation-name:'slideOut'}@keyframes zoomIn{from{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}50%{opacity:1}}.zoomIn{animation-name:'zoomIn'}@keyframes zoomOut{from{opacity:1}50%{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}to{opacity:0}}.zoomOut{animation-name:'zoomOut'}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:4px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #343741;border-radius:4px;background-color:#1D1E24;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#25262E}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:4px;-webkit-appearance:none;appearance:none;font-size:inherit;color:#DFE5EF}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;border-style:none !important;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:4px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#DFE5EF}.legendColorBox>div>div{border-radius:16px}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #343741}\n",""]),e.exports=t},function(e,t,a){var n=a(73),r=a(333);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},function(e,t,a){(t=a(74)(!1)).push([e.i,".canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;flex-direction:column;background-color:#fafbfd}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #D3DAE6 25%, transparent 25%),linear-gradient(-45deg, #D3DAE6 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #D3DAE6 75%),linear-gradient(-45deg, transparent 75%, #D3DAE6 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;font-size:14px;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #D3DAE6}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#BD271E;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#fafbfd;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #D3DAE6;background:#F5F7FA;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:scroll;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#F5F7FA;display:flex;position:relative;border-left:1px solid #D3DAE6}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#fafbfd;z-index:6000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #D3DAE6}.canvasArg__add:hover{background-color:#F5F7FA}.canvasArg__add:hover label{color:#343741}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(0,107,180,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:4px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #D3DAE6;height:32px;width:32px;border-radius:4px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#69707D}.canvasDataSource{background-color:#fff;color:#343741;border-radius:1px solid #D3DAE6;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;color:#1a1c21;font-size:16px;font-size:1rem;line-height:1.5rem;font-weight:600;letter-spacing:-.02em;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#017D73}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__editor{height:auto;position:absolute;top:0;left:0;bottom:57px;right:0}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #D3DAE6;background-color:#fff}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasBorderResizeHandle{box-shadow:0 2px 2px -1px rgba(152,162,179,0.3);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#fff;border:1px solid #69707D}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #69707D;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#98A2B3}.tooltipAnnotation{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#D3DAE6;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#017D73;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(143,165,199,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(152,162,179,0.2),0 4px 4px -1px rgba(152,162,179,0.2),0 2px 2px 0 rgba(152,162,179,0.2)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 6px 12px -1px rgba(152,162,179,0.2),0 4px 4px -1px rgba(152,162,179,0.2),0 2px 2px 0 rgba(152,162,179,0.2);outline:2px solid #D3DAE6;outline-color:#69707D}.canvasPageManager .canvasPageManager__pageNumber{color:#69707D}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 2px 2px -1px rgba(152,162,179,0.3),0 1px 5px -2px rgba(152,162,179,0.3);position:relative;overflow:hidden;color:#343741}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:4px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#e4e9f2;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #D3DAE6;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#F5F7FA;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:'';height:1px;position:absolute;left:0;width:100%;background:#D3DAE6}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#fbfcfd;margin:0;border-radius:4px 4px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(0,0,0,0.1)}.canvasToolbar__home{padding:12px 0 12px 24px;height:100%}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#e4e9f2;position:relative;z-index:200}.canvasTray{box-shadow:0 0 12px -1px rgba(152,162,179,0.2),0 0 4px -1px rgba(152,162,179,0.2),0 0 2px 0 rgba(152,162,179,0.2);flex-direction:column}.canvasTray__panel{background-color:#fbfcfd;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #98A2B3 1px, transparent 1px),linear-gradient(to bottom, #98A2B3 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{box-shadow:0 0 12px -1px rgba(152,162,179,0.2),0 0 4px -1px rgba(152,162,179,0.2),0 0 2px 0 rgba(152,162,179,0.2);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#fff}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.fadeIn{animation-name:'fadeIn'}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.fadeOut{animation-name:'fadeOut'}@keyframes rotateIn{from{transform-origin:left bottom;transform:rotate3d(0, 0, 1, 45deg);opacity:0}to{transform-origin:left bottom;transform:translate3d(0, 0, 0);opacity:1}}.rotateIn{animation-name:'rotateIn'}@keyframes rotateOut{from{transform-origin:left bottom;opacity:1}to{transform-origin:left bottom;transform:rotate3d(0, 0, 1, -45deg);opacity:0}}.rotateOut{animation-name:'rotateOut'}@keyframes slideIn{from{transform:translate3d(100%, 0, 0);visibility:visible}to{transform:translate3d(0, 0, 0)}}.slideIn{animation-name:'slideIn'}@keyframes slideOut{from{transform:translate3d(0, 0, 0)}to{visibility:hidden;transform:translate3d(-100%, 0, 0)}}.slideOut{animation-name:'slideOut'}@keyframes zoomIn{from{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}50%{opacity:1}}.zoomIn{animation-name:'zoomIn'}@keyframes zoomOut{from{opacity:1}50%{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}to{opacity:0}}.zoomOut{animation-name:'zoomOut'}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:4px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #D3DAE6;border-radius:4px;background-color:#fff;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#F5F7FA}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:4px;-webkit-appearance:none;appearance:none;font-size:inherit;color:#343741}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;border-style:none !important;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:4px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#343741}.legendColorBox>div>div{border-radius:16px}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #D3DAE6}\n",""]),e.exports=t},function(e,t,a){var n=a(73),r=a(335);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},function(e,t,a){(t=a(74)(!1)).push([e.i,".canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;flex-direction:column;background-color:#141519}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #343741 25%, transparent 25%),linear-gradient(-45deg, #343741 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #343741 75%),linear-gradient(-45deg, transparent 75%, #343741 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;font-size:14px;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #343741}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#F86B63;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#141519;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #343741;background:#25262E;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:scroll;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#25262E;display:flex;position:relative;border-left:1px solid #343741}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#141519;z-index:6000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #343741}.canvasArg__add:hover{background-color:#25262E}.canvasArg__add:hover label{color:#D4DAE5}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(54,162,239,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:6px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #343741;height:32px;width:32px;border-radius:6px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#98A2B3}.canvasDataSource{background-color:#1D1E24;color:#DFE5EF;border-radius:1px solid #343741;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;color:#DFE5EF;font-size:16px;font-size:1.14286rem;line-height:1.71429rem;font-weight:700;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#7DDED8}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #343741}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #343741}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__editor{height:auto;position:absolute;top:0;left:0;bottom:57px;right:0}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #343741;background-color:#1D1E24}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasBorderResizeHandle{box-shadow:0 0.8px 0.8px rgba(0,0,0,0.1),0 2.3px 2px rgba(0,0,0,0.075);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#1D1E24;border:1px solid #98A2B3}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #98A2B3;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #343741;border-left:1px dashed #343741}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#535966}.tooltipAnnotation{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-radius:6px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#343741;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#7DDED8;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(0,0,0,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1);outline:2px solid #343741;outline-color:#98A2B3}.canvasPageManager .canvasPageManager__pageNumber{color:#98A2B3}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.175),0 1.9px 4px rgba(0,0,0,0.125),0 4.5px 10px rgba(0,0,0,0.125);position:relative;overflow:hidden;color:#DFE5EF}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#1a1a20;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #343741;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#25262E;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:'';height:1px;position:absolute;left:0;width:100%;background:#343741}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#16171c;margin:0;border-radius:6px 6px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(255,255,255,0.1)}.canvasToolbar__home{padding:12px 0 12px 24px;height:100%}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#1a1a20;position:relative;z-index:200}.canvasTray{box-shadow:0 0 0.8px rgba(0,0,0,0.15),0 0 2px rgba(0,0,0,0.1),0 0 5px rgba(0,0,0,0.1),0 0 17px rgba(0,0,0,0.075);flex-direction:column}.canvasTray__panel{background-color:#16171c;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #535966 1px, transparent 1px),linear-gradient(to bottom, #535966 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{box-shadow:0 0 0.8px rgba(0,0,0,0.15),0 0 2px rgba(0,0,0,0.1),0 0 5px rgba(0,0,0,0.1),0 0 17px rgba(0,0,0,0.075);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#1D1E24}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.fadeIn{animation-name:'fadeIn'}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.fadeOut{animation-name:'fadeOut'}@keyframes rotateIn{from{transform-origin:left bottom;transform:rotate3d(0, 0, 1, 45deg);opacity:0}to{transform-origin:left bottom;transform:translate3d(0, 0, 0);opacity:1}}.rotateIn{animation-name:'rotateIn'}@keyframes rotateOut{from{transform-origin:left bottom;opacity:1}to{transform-origin:left bottom;transform:rotate3d(0, 0, 1, -45deg);opacity:0}}.rotateOut{animation-name:'rotateOut'}@keyframes slideIn{from{transform:translate3d(100%, 0, 0);visibility:visible}to{transform:translate3d(0, 0, 0)}}.slideIn{animation-name:'slideIn'}@keyframes slideOut{from{transform:translate3d(0, 0, 0)}to{visibility:hidden;transform:translate3d(-100%, 0, 0)}}.slideOut{animation-name:'slideOut'}@keyframes zoomIn{from{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}50%{opacity:1}}.zoomIn{animation-name:'zoomIn'}@keyframes zoomOut{from{opacity:1}50%{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}to{opacity:0}}.zoomOut{animation-name:'zoomOut'}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:6px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #343741;border-radius:6px;background-color:#1D1E24;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#25262E}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#1D1E24;width:100%;padding:4px 16px;border:1px solid #343741;border-radius:6px;-webkit-appearance:none;appearance:none;font-size:inherit;color:#DFE5EF}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;border-style:none !important;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#DFE5EF}.legendColorBox>div>div{border-radius:16px}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #343741}\n",""]),e.exports=t},function(e,t,a){var n=a(73),r=a(337);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(r,o);e.exports=r.locals||{}},function(e,t,a){(t=a(74)(!1)).push([e.i,".canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover{display:block}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreen{min-width:100px}@media only screen and (min-width: 768px) and (max-width: 991px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}@media only screen and (min-width: 1200px){.canvasModal--fixedSize{width:75vw;height:75vh;max-height:680px}}.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{display:flex;flex-grow:1;flex-direction:column;background-color:#fafbfd}.canvasContainer--loading{position:fixed;top:50%;left:50%;transform:translateY(-50%);text-align:center}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg, #D3DAE6 25%, transparent 25%),linear-gradient(-45deg, #D3DAE6 25%, transparent 25%),linear-gradient(45deg, transparent 75%, #D3DAE6 75%),linear-gradient(-45deg, transparent 75%, #D3DAE6 75%);background-size:8px 8px;position:relative}.canvasTextArea__code{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;font-size:14px;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:100%;max-width:100%}.canvasTextArea__code::-webkit-scrollbar{width:16px;height:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasContextMenu--topBorder{border-top:1px solid #D3DAE6}#canvas-app{overflow-y:hidden}#canvas-app .window-error{position:absolute;bottom:10px;right:10px;background-color:#BD271E;color:#fff;display:block;z-index:2000;padding:10px;max-width:500px}#canvas-app .window-error a{color:#fff;font-weight:bold}.canvasHomeApp{width:100%}.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalHeader,.canvasHomeApp .canvasHomeApp__modalBody{width:auto}@media only screen and (max-width: 574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{display:flex;background:#fafbfd;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{display:flex;align-items:stretch;flex-grow:1}.canvasLayout__stage{flex-grow:1;flex-basis:auto;display:flex;flex-direction:column}.canvasLayout__stageHeader{flex-grow:0;flex-basis:auto;padding:1px 16px 0;font-size:14px;border-bottom:1px solid #D3DAE6;background:#F5F7FA;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-grow:1;flex-basis:auto;position:relative}.canvasLayout__stageContentOverflow{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;position:absolute;top:0;left:0;right:0;bottom:0;overflow:scroll;display:flex;align-items:center}.canvasLayout__stageContentOverflow::-webkit-scrollbar{width:16px;height:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasLayout__sidebar{flex-grow:0;flex-basis:auto;width:350px;background:#F5F7FA;display:flex;position:relative;border-left:1px solid #D3DAE6}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{flex-grow:0;flex-basis:auto;width:100%;background-color:#fafbfd;z-index:6000;font-size:14px}.canvasExport .canvasPage{position:relative;overflow:hidden;box-shadow:none}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #D3DAE6}.canvasArg__add:hover{background-color:#F5F7FA}.canvasArg__add:hover label{color:#343741}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{width:250px}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:calc(8px * .75)}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{width:100%;padding-bottom:16px}}.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:0;min-width:40%;align-items:center}@media only screen and (max-width: 574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width: 575px) and (max-width: 767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{max-width:400px;margin:32px auto 0}.canvasAsset{text-align:center;overflow:hidden}.canvasAsset .canvasAsset__thumb{margin:-8px;margin-bottom:0;font-size:0;height:164px}.canvasAsset .canvasAsset__img{display:flex;align-items:center;justify-content:center;height:100%}.canvasAsset .canvasAsset__img img{width:auto;max-width:100%;max-height:164px}.canvasAssetPicker{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;max-height:120px;overflow-x:hidden;overflow-y:auto}.canvasAssetPicker::-webkit-scrollbar{width:16px;height:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasAssetPicker .canvasAssetPicker__link{position:relative;width:100%;height:100%;text-align:center}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:solid 4px rgba(0,119,204,0.1)}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;top:4px;right:4px}.canvasAssetPicker .euiImage{width:40px;height:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;position:relative;height:32px;width:32px}.canvasColorDot .canvasColorDot__background{position:absolute;height:32px;width:32px;border-radius:6px;top:0;left:0}.canvasColorDot .canvasColorDot__foreground{position:absolute;border:1px solid #D3DAE6;height:32px;width:32px;border-radius:6px;top:0;left:0;display:flex;align-items:center;justify-content:center}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#69707D}.canvasDataSource{background-color:#fff;color:#343741;border-radius:1px solid #D3DAE6;margin:8px;padding:0 8px}.canvasDataSource__section,.canvasDataSource__list{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{overflow-wrap:break-word !important;word-wrap:break-word !important;word-break:break-word;color:#1a1c21;font-size:16px;font-size:1.14286rem;line-height:1.71429rem;font-weight:700;line-height:40px}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0 !important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#00BFB3}.canvasDatasourcePreview{max-width:1000px;max-height:60vh;height:100%}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 16px * 3)}.canvasDataTable{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.canvasDataTable .canvasDataTable__tableWrapper{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;height:100%;overflow:auto}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{width:16px;height:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:transparent}.canvasDataTable .canvasDataTable__footer{width:100%;display:flex;justify-content:space-around;padding:8px;border-top:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__th,.canvasDataTable .canvasDataTable__td{padding:8px 4px;border-bottom:1px solid #D3DAE6}.canvasDataTable .canvasDataTable__th{white-space:nowrap;font-weight:bold}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:hover .canvasElementCard__controls,.canvasElementCard__wrapper:focus .canvasElementCard__controls{visibility:visible;opacity:1}.canvasElementCard__wrapper .canvasElementCard__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}.canvasElementCard .euiCard__top{text-align:center;width:calc(100% + 16px * 2);height:85px;margin:calc(-1 * 16px) calc(-1 * 16px) 0}.canvasElementCard .euiCard__image{max-height:100%;max-width:100%;width:auto;left:0;top:0}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{height:100%;width:100%;overflow:hidden}.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{height:256px;padding-top:16px;flex-grow:1}.canvasExpression--fullSize{display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;right:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{flex-grow:1;display:flex;flex-direction:column}.canvasExpression--fullSize .canvasExpressionInput__editor{height:auto;position:absolute;top:0;left:0;bottom:57px;right:0}.canvasExpression--fullSize .canvasExpressionInput__inner{flex-grow:1;display:flex}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{padding:12px 16px;border-top:1px solid #D3DAE6;background-color:#fff}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0 !important}body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasLayout__stageHeader,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasGrid{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{display:block;overflow:visible;position:static;top:auto;left:auto;right:auto;bottom:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{padding:0;margin:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__rows,body.canvas-isFullscreen .canvasLayout__cols{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{display:flex;background:none}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{text-align:center;font-size:20px}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{position:absolute;top:0;width:100%;height:100%;pointer-events:none;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasBorderResizeHandle{box-shadow:0 0.8px 0.8px rgba(0,0,0,0.04),0 2.3px 2px rgba(0,0,0,0.03);transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:8px;width:8px;margin-left:-4px;margin-top:-4px;background-color:#fff;border:1px solid #69707D}.canvasDragBoxAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:dashed 1px #69707D;pointer-events:none}.canvasHoverAnnotation{position:absolute;background:none;transform-origin:center center;transform-style:preserve-3d;outline:solid 1px #54B399;pointer-events:none}.canvasRotationHandle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:24px;width:0;margin-left:-1px;margin-top:-12px;border-top:1px dashed #D3DAE6;border-left:1px dashed #D3DAE6}.canvasRotationHandle__handle{transform-origin:center center;transform-style:preserve-3d;display:block;position:absolute;height:9px;width:9px;margin-left:-5px;margin-top:-6px;border-radius:50%;background-color:#98A2B3}.tooltipAnnotation{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-radius:6px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;position:absolute;transform-origin:center center;transform-style:preserve-3d;outline:none;pointer-events:none}.canvasLoading{display:flex;color:#D3DAE6;align-items:center}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__pages,.canvasPageManager .canvasPageManager__addPage{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);opacity:0;animation-fill-mode:forwards}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;display:flex;overflow-x:auto;overflow-y:hidden;position:absolute;left:0;right:0;top:0;bottom:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{width:16px;height:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasPageManager .canvasPageManager__addPage{width:56px;background:#00BFB3;color:#fff;opacity:0;animation:buttonPop 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);animation-fill-mode:forwards}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page-isActive{background-color:rgba(143,165,199,0.5);outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54B399}.canvasPageManager .canvasPageManager__page:hover,.canvasPageManager .canvasPageManager__page:focus{text-decoration:none}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04)}.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls{visibility:visible;opacity:1}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04);outline:2px solid #D3DAE6;outline-color:#69707D}.canvasPageManager .canvasPageManager__pageNumber{color:#69707D}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 0.7px 1.4px rgba(0,0,0,0.07),0 1.9px 4px rgba(0,0,0,0.05),0 4.5px 10px rgba(0,0,0,0.05);position:relative;overflow:hidden;color:#343741}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{position:absolute;right:8px;top:8px;visibility:hidden;opacity:0;transition:opacity 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);transition-delay:250ms;background:rgba(255,255,255,0.5);border-radius:6px}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{width:40px;height:40px}.canvasShapePreview svg{width:100%;height:100%}.canvasShapePicker{width:192px}.canvasSidebar{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;width:100%;max-height:100vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:0;bottom:0}.canvasSidebar::-webkit-scrollbar{width:16px;height:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasSidebar__pop{animation:sidebarPop 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.canvasSidebarFlyout{width:350px;min-width:350px}.canvasSidebar__elementButtons{background:#e4e9f2;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #D3DAE6;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:0}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{padding:12px;margin:0 -12px;background:#F5F7FA;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:transparent}.canvasSidebar__accordion:before,.canvasSidebar__accordion:after{content:'';height:1px;position:absolute;left:0;width:100%;background:#D3DAE6}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordionContent{padding-top:16px;padding-left:28px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}100%{opacity:1}}.canvasLayout__sidebarHeader{padding:calc(12px + 2px) 8px}.canvasLayout__sidebarHeaderWorkpad{padding:calc(8px * .75) 0}.canvasToolbar{position:relative}.canvasTray__toggle{position:absolute;top:-20px;left:50%;background-color:#fbfcfd;margin:0;border-radius:6px 6px 0 0}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{padding:4px 12px;box-shadow:0 -2px 1px rgba(0,0,0,0.1)}.canvasToolbar__home{padding:12px 0 12px 24px;height:100%}.canvasToolbar__controls{padding:12px;height:100%}.canvasToolbar__container{width:100%;height:64px;background-color:#e4e9f2;position:relative;z-index:200}.canvasTray{box-shadow:0 0 0.8px rgba(0,0,0,0.06),0 0 2px rgba(0,0,0,0.04),0 0 5px rgba(0,0,0,0.04),0 0 17px rgba(0,0,0,0.03);flex-direction:column}.canvasTray__panel{background-color:#fbfcfd;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{padding:16px;margin:auto}.canvasGrid{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;background-image:linear-gradient(to right, #98A2B3 1px, transparent 1px),linear-gradient(to bottom, #98A2B3 1px, transparent 1px);background-size:50px 50px;top:0}.canvasElementMenu__popoverButton{margin-right:8px}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;overflow-x:auto;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{width:16px;height:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{box-shadow:0 0 0.8px rgba(0,0,0,0.06),0 0 2px rgba(0,0,0,0.04),0 0 5px rgba(0,0,0,0.04),0 0 17px rgba(0,0,0,0.03);z-index:initial;position:absolute;top:0;transform-style:preserve-3d !important;background-color:#fff}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{visibility:hidden;opacity:0}.canvasEditVar__typeOption{display:flex;align-items:center}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{width:100%;position:relative}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:transparent}.canvasVarConfig__list thead tr th,.canvasVarConfig__list thead tr td{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr td{border-top:none;border-bottom:none}.canvasVarConfig__list tbody tr:hover{background-color:transparent}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{width:calc(200% + 48px);position:relative;display:flex;flex-direction:row;align-content:stretch}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{width:50%;height:100%;flex-shrink:0}.canvasVarConfig__listView{width:50%;flex-shrink:0}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.fadeIn{animation-name:'fadeIn'}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.fadeOut{animation-name:'fadeOut'}@keyframes rotateIn{from{transform-origin:left bottom;transform:rotate3d(0, 0, 1, 45deg);opacity:0}to{transform-origin:left bottom;transform:translate3d(0, 0, 0);opacity:1}}.rotateIn{animation-name:'rotateIn'}@keyframes rotateOut{from{transform-origin:left bottom;opacity:1}to{transform-origin:left bottom;transform:rotate3d(0, 0, 1, -45deg);opacity:0}}.rotateOut{animation-name:'rotateOut'}@keyframes slideIn{from{transform:translate3d(100%, 0, 0);visibility:visible}to{transform:translate3d(0, 0, 0)}}.slideIn{animation-name:'slideIn'}@keyframes slideOut{from{transform:translate3d(0, 0, 0)}to{visibility:hidden;transform:translate3d(-100%, 0, 0)}}.slideOut{animation-name:'slideOut'}@keyframes zoomIn{from{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}50%{opacity:1}}.zoomIn{animation-name:'zoomIn'}@keyframes zoomOut{from{opacity:1}50%{opacity:0;transform:scale3d(0.3, 0.3, 0.3)}to{opacity:0}}.zoomOut{animation-name:'zoomOut'}.canvasAdvancedFilter{width:100%;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:6px;font-size:inherit;line-height:19px;font-family:monospace}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{width:100%;padding:4px 8px;border:1px solid #D3DAE6;border-radius:6px;background-color:#fff;font-size:inherit}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#F5F7FA}.canvasDropdownFilter{width:100%;font-size:inherit;position:relative}.canvasDropdownFilter .canvasDropdownFilter__select{background-color:#fff;width:100%;padding:4px 16px;border:1px solid #D3DAE6;border-radius:6px;-webkit-appearance:none;appearance:none;font-size:inherit;color:#343741}.canvasDropdownFilter .canvasDropdownFilter__select:after{display:none}.canvasDropdownFilter .canvasDropdownFilter__select:focus{box-shadow:none}.canvasDropdownFilter .canvasDropdownFilter__icon{position:absolute;right:8px;top:8px;pointer-events:none}.canvasEmbeddable .embPanel{border:none;border-style:none !important;background:none}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#343741}.legendColorBox>div>div{border-radius:16px}.canvasTimeFilter .euiSuperDatePicker__flexWrapper{width:100%}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall{margin:0}.canvasTimeFilter .euiSuperDatePicker__flexWrapper.euiFlexGroup--gutterSmall>.euiFlexItem{margin:0}.canvasArgImage .canvasArgImage--preview{max-height:100px;overflow:hidden;border:1px solid #D3DAE6}\n",""]),e.exports=t},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return nv})),a.d(t,"initializeCanvas",(function(){return rv})),a.d(t,"teardownCanvas",(function(){return ov}));var n=a(20),r=a.n(n),o=a(23),s=a.n(o),i=a(27),c=a(6),l=a(56),d=a(7),u=a(28),p=a(2),g=a.n(p),b=a(3),f=a(69),m=a.n(f),v=a(259),h=a.n(v),x=a(26),y=a(57),_=a(82),j=a(85);const w=j.a.getShortcutHelp(),O=j.a.getNamespaceDisplayNames(),k=(e,{modifiers:t=[],help:a})=>{Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);let n=[...e];return t.includes("shift")&&(n=n.map((e=>`shift+${e}`)),e=e.map((e=>`shift+${e}`))),(t.includes("alt")||t.includes("option"))&&(n=n.map((e=>`option+${e}`)),e=e.map((e=>`alt+${e}`))),(t.includes("ctrl")||t.includes("command"))&&(n=n.map((e=>`command+${e}`)),e=e.map((e=>`ctrl+${e}`))),{osx:n,windows:e,linux:e,other:e,help:a}},E=k("r",{modifiers:"alt",help:w.REFRESH}),M=k("[",{modifiers:"alt",help:w.PREV}),S=k("]",{modifiers:"alt",help:w.NEXT}),C=k(["f","p"],{modifiers:"alt",help:w.FULLSCREEN}),P={ELEMENT:{displayName:O.ELEMENT,CUT:k("x",{modifiers:"ctrl",help:w.CUT}),COPY:k("c",{modifiers:"ctrl",help:w.COPY}),PASTE:k("v",{modifiers:"ctrl",help:w.PASTE}),CLONE:k("d",{modifiers:"ctrl",help:w.CLONE}),DELETE:k(["del","backspace"],{help:w.DELETE}),BRING_FORWARD:k("up",{modifiers:"ctrl",help:w.BRING_TO_FRONT}),BRING_TO_FRONT:k("up",{modifiers:["ctrl","shift"],help:w.BRING_FORWARD}),SEND_BACKWARD:k("down",{modifiers:"ctrl",help:w.SEND_BACKWARD}),SEND_TO_BACK:k("down",{modifiers:["ctrl","shift"],help:w.SEND_TO_BACK}),GROUP:k("g",{help:w.GROUP}),UNGROUP:k("u",{help:w.UNGROUP}),SHIFT_UP:k("up",{help:w.SHIFT_UP}),SHIFT_DOWN:k("down",{help:w.SHIFT_DOWN}),SHIFT_LEFT:k("left",{help:w.SHIFT_LEFT}),SHIFT_RIGHT:k("right",{help:w.SHIFT_RIGHT}),NUDGE_UP:k("up",{modifiers:["shift"],help:w.NUDGE_UP}),NUDGE_DOWN:k("down",{modifiers:["shift"],help:w.NUDGE_DOWN}),NUDGE_LEFT:k("left",{modifiers:["shift"],help:w.NUDGE_LEFT}),NUDGE_RIGHT:k("right",{modifiers:["shift"],help:w.NUDGE_RIGHT})},EXPRESSION:{displayName:O.EXPRESSION,RUN:k("enter",{modifiers:"ctrl",help:w.RUN})},EDITOR:{displayName:O.EDITOR,MULTISELECT:k("click",{modifiers:"shift",help:w.MULTISELECT}),RESIZE_FROM_CENTER:k("drag",{modifiers:"alt",help:w.RESIZE_FROM_CENTER}),IGNORE_SNAP:k("drag",{modifiers:"ctrl",help:w.IGNORE_SNAP}),SELECT_BEHIND:k("click",{modifiers:"ctrl",help:w.SELECT_BEHIND}),UNDO:k("z",{modifiers:"ctrl",help:w.UNDO}),REDO:k("z",{modifiers:["ctrl","shift"],help:w.REDO}),PREV:M,NEXT:S,EDITING:k("e",{modifiers:"alt",help:w.EDITING}),GRID:k("g",{modifiers:"alt",help:w.GRID}),REFRESH:E,ZOOM_IN:k("plus",{modifiers:["ctrl","alt"],help:w.ZOOM_IN}),ZOOM_OUT:k("minus",{modifiers:["ctrl","alt"],help:w.ZOOM_OUT}),ZOOM_RESET:k("[",{modifiers:["ctrl","alt"],help:w.ZOOM_RESET}),FULLSCREEN:C},PRESENTATION:{displayName:O.PRESENTATION,FULLSCREEN:C,FULLSCREEN_EXIT:k("esc",{help:w.FULLSCREEN_EXIT}),PREV:Object(d.mapValues)(M,((e,t)=>"help"===t?e:e.concat(["backspace","left"]))),NEXT:Object(d.mapValues)(S,((e,t)=>"help"===t?e:e.concat(["space","right"]))),REFRESH:E,PAGE_CYCLE_TOGGLE:k("p",{help:w.PAGE_CYCLE_TOGGLE})}},A=new _.ShortcutManager(P);var T=a(24);const N=({name:e="Workpad"}={})=>({text:e});var D=a(62);const I=a(296).createThunk;var F=a(59);function L(e,t){return Object(d.toPath)(t).concat(Object(d.toPath)(e))}function R(e,t){return Object(d.toPath)(e).concat(Object(d.toPath)(t))}const z="assets";function B(e){return Object(d.get)(e,z,{})}function H(e){return Object.keys(B(e))}const W="persistent.workpad",V=e=>({...e,ast:Object(F.safeElementFromExpression)(e.expression)});function U(e){return Object(d.get)(e,W)}function G(e){return{...U(e),assets:B(e)}}function K(e){const t=function(e){const t=U(e);return Object(d.get)(t,"variables",[])}(e);return 0===t.length?{}:t.reduce(((e,t)=>({...e,[t.name]:t.value})),{})}function q(e){return{...U(e),pages:void 0}}function X(e){return Object(d.get)(e,R(W,"isWriteable"),!0)}function Y(e){return Object(d.get)(e,R(W,"page"))}function Z(e){const t=Y(e),a=J(e);return Object(d.get)(a,`[${t}].id`)}function J(e){return Object(d.get)(e,R(W,"pages"),[])}function Q(e,t){return J(e).find((e=>e.id===t))}function ee(e){return Object(d.get)(e,R(W,"name"))}function te(e){return Object(d.get)(e,R(W,"height"))}function ae(e){return Object(d.get)(e,R(W,"width"))}function ne(e){return J(e).reduce(((e,t)=>(t.elements.forEach((({position:t})=>{const{left:a,top:n,width:r,height:o}=t,s=a+r,i=n+o;a<e.left&&(e.left=a),n<e.top&&(e.top=n),s>e.right&&(e.right=s),i>e.bottom&&(e.bottom=i)})),e)),{left:0,right:ae(e),top:0,bottom:te(e)})}function re(e){return Object(d.get)(e,R(W,"colors"))}function oe(e){return J(e).reduce(((e,t)=>e.concat(t.elements)),[])}function se(e){const t=e.transient.resolvedArgs,a={ready:0,pending:0,error:0};return Object.values(t).filter((e=>void 0!==e)).forEach((e=>{const{expressionRenderable:t}=e;if(!t)return void a.pending++;const{value:n,state:r}=t;n&&"error"===n.as?a.error++:"ready"===r?a.ready++:a.pending++})),a}function ie(e){return Object(d.get)(e,"transient.elementStats")}function ce(e,t){return Object.keys(e).reduce(((a,n)=>"_"!==n&&"group"!==n?a:e[n].reduce(((a,r)=>a.concat(t(r,n,e)||[])),a)),[])}function le(e){if("expression"!==e.type)throw new Error("AST must be an expression");return e.chain.reduce(((e,t)=>{const{function:a,arguments:n}=t;return"filters"===a?e.concat(ce(n,(e=>{if(null!==e&&"object"!=typeof e)return e}))):e.concat(ce(n,(e=>{if(null!==e&&"object"==typeof e&&"expression"===e.type)return le(e)})))}),[])}function de(e){return oe(e).reduce(((e,t)=>{if(null!=t.filter&&t.filter.length){const a=Object(F.fromExpression)(t.filter),n=Object(d.get)(a,"chain[0].arguments.filterGroup[0]");n&&""!==n&&!e.includes(String(n))&&e.push(String(n))}if(null!=t.expression&&t.expression.length){le(Object(F.fromExpression)(t.expression)).forEach((t=>{e.includes(String(t))||e.push(String(t))}))}return e}),[]).sort()}function ue(e){return Object(d.get)(e,"transient.selectedToplevelNodes",[])}function pe(e){const t=ue(e);return 1===t.length?t[0]:null}function ge(e){return ve(e,pe(e))}const be=e=>t=>({...t,position:{...t.position,type:e},..."group"===e&&{expression:'shape fill="rgba(255,255,255,0)" | render'}});function fe(e,t){const a=(e=>{const t=Object(d.get)(e,"elements").map(be("element")),a=Object(d.get)(e,"groups",[]).map(be("group"));return t.concat(a)})(e);return a?t?a.map(V):a.map((e=>Object(d.omit)(e,["ast"]))):[]}function me(e,t,a=!0){const n=t||Z(e);if(!n)return[];const r=Q(e,n);return r?fe(r,a):[]}function ve(e,t,a){const n=function(e,t,a=!0){const n=t||Z(e);if(!n)return[];const r=Q(e,n),o=Object(d.get)(r,"elements");return o?a?o.map((e=>V(e))):o.map((e=>Object(d.omit)(e,["ast"]))):[]}(e,a,!0).find((e=>e.id===t));if(n)return V(n)}function he(e,t,a){const n=me(e,a,!0).find((e=>e.id===t));if(n)return V(n)}function xe(e,t,a){if(!t)return;const n=Object(d.get)(e,["transient","resolvedArgs",t]);return a?Object(d.get)(n,a):n}function ye(e,t){return function(e,t){const a=pe(e);if(a)return xe(e,a,t)}(e,["expressionContext",t-1])}function _e(e){const t=J(e),a=e.transient.resolvedArgs,n=t.map((e=>{const{elements:t,...n}=e;return{...n,elements:t.map((e=>{const{id:t,position:n}=e,r=a[t];if(!r)return null;const{expressionRenderable:o}=r;return{id:t,position:n,expressionRenderable:o}}))}})),r=U(e),{pages:o,variables:s,...i}=r;return{pages:n,...i}}var je=a(71),we=a.n(je),Oe=a(72);function ke(e){return Object(d.get)(e,["transient","resolvedArgs"])}function Ee(e,t){return Object(d.get)(e,L(t,["transient","resolvedArgs"]))}function Me(e){return Object(d.get)(e,["transient","inFlight"],!1)}var Se=a(83),Ce=a(54);async function Pe(e,t,a=null){const n={variables:t},{execute:r}=y.pluginServices.getServices().expressions;return await r(e,a,n).getData().pipe(Object(x.pluck)("result")).toPromise()}async function Ae(e,t,a,n={}){const r={variables:a};try{const{execute:o}=y.pluginServices.getServices().expressions,s=await o(e,t,r).getData().pipe(Object(x.pluck)("result")).toPromise();if("render"===Object(F.getType)(s))return s;if(n.castToRender)return Ae(Object(F.fromExpression)("render"),s,a,{castToRender:!1});throw new Error(`Ack! I don't know how to render a '${Object(F.getType)(s)}'`)}catch(e){const{error:t}=y.pluginServices.getServices().notify;throw t(e),e}}const Te=e=>[].concat(...e),Ne=e=>e,De=(e,t)=>(e+t)/2,Ie=e=>(...t)=>!e(...t),Fe=e=>Object.assign({},...e.map((e=>({[e]:!0})))),Le=Object(D.createAction)("setFullscreen"),Re=Object(D.createAction)("selectToplevelNodes"),ze=Object(D.createAction)("setFirstLoad"),Be=Object(D.createAction)("setElementStats"),He=Object(D.createAction)("setZoomScale"),We="setResolvedLoading",Ve="setResolvedValue",Ue="inFlightActive",Ge="inFlightComplete",$e=Object(D.createAction)(We),Ke=Object(D.createAction)(Ve),qe=Object(D.createAction)("setResolvedValues"),Xe=Object(D.createAction)("clearResolvedValue"),Ye=Object(D.createAction)("clearResolvedValues"),Ze=Object(D.createAction)(Ue,(()=>{})),Je=Object(D.createAction)(Ge,(()=>{})),{actionsElements:Qe}=Ce.f,{set:et,del:tt}=we.a;function at(e,t,a){const n=function(e,t){return Oe.c(Ee(e,t))}(e,[t,"expressionContext",a]);if(null!=n)return{index:a,context:n};const r=a-1;return r<0?{}:at(e,t,r)}function nt(e,t=!1){const a=["position","expression","filter"];return t?Object(d.pick)(e,a.concat("id")):Object(d.cloneDeep)(Object(d.pick)(e,a))}const rt=Object(D.createAction)("elementLayer"),ot=Object(D.createAction)("setMultiplePosition",(e=>({repositionedElements:e}))),st=Object(D.createAction)("flushContext"),it=Object(D.createAction)("flushContextAfterIndex"),ct=I("fetchContext",(({dispatch:e,getState:t},a,n,r=!1)=>{const o=Object(d.get)(n,"ast.chain"),s=!o||a>=o.length;if(!n||!o||s)throw new Error(Qe.getInvalidArgIndexErrorMessage(a));const i=a-1,c=[n.id,"expressionContext",i];e($e({path:c}));const{index:l,context:u}=!0!==r?at(t(),n.id,i-1):{},p=n.ast.chain.filter(((e,t)=>null!=u?t>l&&t<a:t<a)),g=K(t());return Pe({...n.ast,chain:p},g,u).then((t=>{e(Ke({path:c,value:t}))}))})),lt=I("fetchRenderableWithContext",(({dispatch:e,getState:t},a,n,r)=>{const o=[a.id,"expressionRenderable"];e($e({path:o}));const s=e=>Ke({path:o,value:e});return Ae(n,r,K(t()),{castToRender:!0}).then((t=>{e(s(t))})).catch((t=>{y.pluginServices.getServices().notify.error(t),e(s(t))}))})),dt=I("fetchRenderable",(({dispatch:e},t)=>{const a=t.ast||Object(F.safeElementFromExpression)(t.expression);e(lt(t,a,null))})),ut=I("fetchAllRenderables",(({dispatch:e,getState:t},{onlyActivePage:a=!1}={})=>{const n=J(t()),r=n[Y(t())],o=Object(d.without)(n,r);function s(a){const n=[];a.forEach((e=>{e.elements.forEach((e=>{n.push(e)}))}));const r=n.map((e=>{const a=e.ast||Object(F.safeElementFromExpression)(e.expression),n=[e.id,"expressionRenderable"];return Ae(a,null,K(t()),{castToRender:!0}).then((e=>({path:n,value:e}))).catch((e=>(y.pluginServices.getServices().notify.error(e),{path:n,value:e})))}));return Promise.all(r).then((t=>{e(qe(t))}))}e(Ze()),a?s([r]).then((()=>e(Je()))):s([r]).then((()=>o.reduce(((e,t)=>e.then((()=>s([t])))),Promise.resolve()))).then((()=>e(Je())))})),pt=I("insertNodes",(({dispatch:e,type:t},a,n)=>{const r=Object(D.createAction)(t),o=a.map(d.cloneDeep);o.forEach((e=>{e.position.top=e.position.top+10,e.position.left=e.position.left+10})),e(r({pageId:n,elements:o})),a.some((e=>e.filter))?e(ut()):o.forEach((t=>e(dt(t))))})),gt=I("removeElements",(({dispatch:e,getState:t},a,n)=>{const r=t(),o=me(r,n),s=a.map((e=>o.find((t=>e===t.id)))).filter((e=>e)),i=((e,t,a,n)=>{const r=n=>{const o=Te(n.map((n=>a.filter((a=>t(a)===e(n))))));return o.length?[...n,...r(o,a)]:n};return r(n)})((e=>e.id),(e=>e.position.parent),o,s).map((e=>e.id)),c=i.some((e=>{const t=he(r,e,n);return t.filter&&t.filter.length>0})),l=Object(D.createAction)("removeElements",((e,t)=>({elementIds:e,pageId:t})));e(l(i,n)),c&&e(ut())})),bt=I("setFilter",(({dispatch:e},t,a,n=!0)=>{e(Object(D.createAction)("setFilter")({filter:t,elementId:a})),!0===n&&e(ut())})),ft=I("setExpression",(function({dispatch:e,getState:t},a,n,r,o=!0){const s=Object(D.createAction)("setExpression");e(s({expression:a,elementId:n,pageId:r}));const i=he(t(),n,r);if(i.filter&&!["dropdownControl","timefilterControl","exactly"].some((e=>i.expression.includes(e)))){e(bt("",n,r,o))}else!0===o&&e(dt(i))}));const mt=I("setAst",(({dispatch:e},t,a,n,r=!0)=>{try{const o=Object(F.toExpression)(t);e(ft(o,a.id,n,r))}catch(t){y.pluginServices.getServices().notify.error(t),e(ft(a.expression,a.id,n,r))}})),vt=I("setAstAtIndex",(({dispatch:e,getState:t},a,n,r,o)=>{e(it({elementId:r.id,index:a}));const s=et(r,`ast.chain.${a}`,n),i=Object(d.get)(s,"ast"),{index:c,context:l}=at(t(),r.id,a-1);if(l){e(mt(i,r,o,!1));const t={...i,chain:i.chain.filter(((e,t)=>l?t>c:t>=a))};return e(lt(s,t,l))}e(mt(i,r,o))})),ht=I("setArgumentAtIndex",(({dispatch:e},t)=>{const{index:a,argName:n,value:r,valueIndex:o,element:s,pageId:i}=t;let c=`ast.chain.${a}.arguments.${n}`;null!=o&&(c+="."+o);const l=et(s,c,r),u=Object(d.get)(l,["ast","chain",a]);e(vt(a,u,s,i))})),xt=I("addArgumentValueAtIndex",(({dispatch:e},t)=>{const{index:a,argName:n,value:r,element:o}=t,s=Object(d.get)(o,["ast","chain",a,"arguments",n],[]).concat(r);e(ht({...t,value:s}))})),yt=I("deleteArgumentAtIndex",(({dispatch:e},t)=>{const{index:a,element:n,pageId:r,argName:o,argIndex:s}=t,i=Object(d.get)(n,["ast","chain",a,"arguments",o]),c=null!=s&&i.length>1?tt(n,`ast.chain.${a}.arguments.${o}.${s}`):tt(n,`ast.chain.${a}.arguments.${o}`);e(vt(a,Object(d.get)(c,["ast","chain",a]),n,r))})),_t=I("addElement",(({dispatch:e},t,a)=>{const n={...Object(Se.a)(),...nt(a,!0)};a.width&&(n.position.width=a.width),a.height&&(n.position.height=a.height);e(Object(D.createAction)("addElement")({pageId:t,element:n})),a.filter?e(ut()):e(dt(n)),e(Re([n.id]))})),jt=Object(D.createAction)("sizeWorkpad"),wt=Object(D.createAction)("setName"),Ot=Object(D.createAction)("setWriteable"),kt=Object(D.createAction)("setColors"),Et=Object(D.createAction)("setRefreshInterval"),Mt=Object(D.createAction)("setWorkpadCSS"),St=Object(D.createAction)("setWorkpadVariables"),Ct=Object(D.createAction)("enableAutoplay"),Pt=Object(D.createAction)("setAutoplayInterval"),At=Object(D.createAction)("resetWorkpad"),Tt=I("initializeWorkpad",(({dispatch:e})=>{e(ut())})),Nt=I("addColor",(({dispatch:e,getState:t},a)=>{const n=re(t()).slice(0);Object(d.includes)(n,a)||n.push(a),e(kt(n))})),Dt=I("removeColor",(({dispatch:e,getState:t},a)=>{e(kt(Object(d.without)(re(t()),a)))})),It=I("updateWorkpadVariables",(({dispatch:e},t)=>{e(St(t)),e(ut())})),Ft=I("setWorkpad",(({dispatch:e,type:t},a,{loadPages:n=!0}={})=>{e(Object(D.createAction)(t)(a)),n&&e(Tt())}));var Lt=a(1),Rt=a(58),zt=a.n(Rt),Bt=a(65),Ht=a(78),Wt=a(22),Vt=a(21);const Ut=({canUserWrite:e,disabled:t,...a})=>Object(Vt.jsx)(Wt.EuiButton,zt()({},a,{iconType:"plusInCircleFilled",fill:!0,disabled:!e&&!t,"data-test-subj":"create-workpad-button"}),Gt.getWorkpadCreateButtonLabel()),Gt={getWorkpadCreateButtonLabel:()=>c.i18n.translate("xpack.canvas.workpadCreate.createButtonLabel",{defaultMessage:"Create workpad"})},$t=e=>{const t=Object(Ht.c)(),{canUserWrite:a}=Object(l.useSelector)((e=>({canUserWrite:Object(Bt.a)(e)})));return Object(Vt.jsx)(Ut,zt()({},e,{onClick:async()=>{await t()},canUserWrite:a}))},Kt=r.a.lazy((()=>a.e(11).then(a.bind(null,391)))),qt=r.a.lazy((()=>a.e(9).then(a.bind(null,389)))),Xt=Object(Lt.withSuspense)(Kt),Yt=Object(Lt.withSuspense)(qt),Zt=({activeTab:e="workpads"})=>{const[t,a]=Object(n.useState)(e);return Object(Vt.jsx)(u.KibanaPageTemplate,{pageHeader:{pageTitle:"Canvas",rightSideItems:[Object(Vt.jsx)($t,null)],tabs:[{label:Jt.getMyWorkpadsTabLabel(),id:"myWorkpads",isSelected:"workpads"===t,onClick:()=>a("workpads")},{label:Jt.getWorkpadTemplatesTabLabel(),id:"workpadTemplates","data-test-subj":"workpadTemplates",isSelected:"templates"===t,onClick:()=>a("templates")}]}},"workpads"===t?Object(Vt.jsx)(Yt,null):Object(Vt.jsx)(Xt,null))},Jt={getMyWorkpadsTabLabel:()=>c.i18n.translate("xpack.canvas.home.myWorkpadsTabLabel",{defaultMessage:"My workpads"}),getWorkpadTemplatesTabLabel:()=>c.i18n.translate("xpack.canvas.home.workpadTemplatesTabLabel",{defaultMessage:"Templates",description:"The label for the tab that displays a list of designed workpad templates."})},Qt=()=>{const{setBreadcrumbs:e}=Object(y.usePlatformService)(),[t,a]=Object(n.useState)(!1),r=Object(l.useDispatch)();return Object(n.useEffect)((()=>{t||(r(At()),a(!0))}),[r,t,a]),Object(n.useEffect)((()=>{e([{text:"Canvas",href:"#/"}])}),[e]),Object(Vt.jsx)(Zt,null)},ea=e=>document.title=`${e} - Kibana`,ta=({onLoad:e=(()=>{})})=>(e(),ea("Canvas"),Object(Vt.jsx)(Qt,null)),aa=()=>{const{setBreadcrumbs:e}=Object(y.usePlatformService)(),t=Object(l.useDispatch)();return Object(n.useEffect)((()=>{e([{text:"Canvas",href:"#/"}])}),[e]),Object(Vt.jsx)(ta,{onLoad:()=>t(At())})};var na=a(100),ra=a.n(na),oa=a(0),sa=a(5);const ia=e=>{Object(sa.a)().set(oa.z,JSON.stringify(e))},ca=()=>Object(sa.a)().get(oa.z);var la=a(68);const da=e=>{const t=Fe(e.map((e=>e.id)));return Object.keys(t).forEach((e=>t[e]=Object(la.a)(e.split("-")[0]))),e.map((e=>({...e,id:t[e.id],position:{...e.position,parent:e.position.parent?t[e.position.parent]:null}})))},ua=e=>e.id,pa={cloneNodes:({insertNodes:e,pageId:t,selectToplevelNodes:a,selectedNodes:n})=>()=>{const r=n&&da(n);r&&(e(r,t),a(r))},deleteNodes:({pageId:e,removeNodes:t,selectedNodes:a})=>()=>{a.length&&t(a.map(ua),e)},createCustomElement:({selectedNodes:e})=>(t="",a="",n="")=>{const r=y.pluginServices.getServices().notify,o=y.pluginServices.getServices().customElement;if(e.length){const s=JSON.stringify({selectedNodes:e}),i={id:Object(la.a)("custom-element"),name:Object(d.camelCase)(t),displayName:t,help:a,image:n,content:s};o.create(i).then((()=>r.success(`Custom element '${i.displayName||i.id}' was saved`,{"data-test-subj":"canvasCustomElementCreate-success"}))).catch((e=>r.warning(e,{title:`Custom element '${i.displayName||i.id}' was not saved`})))}}},ga=Object.assign({},...["alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom","distributeHorizontally","distributeVertically"].map((e=>({[e]:({commit:t})=>()=>{t("actionEvent",{event:e})}})))),ba={groupNodes:({commit:e})=>()=>{e("actionEvent",{event:"group"})},ungroupNodes:({commit:e})=>()=>{e("actionEvent",{event:"ungroup"})}},fa={cutNodes:({pageId:e,removeNodes:t,selectedNodes:a})=>()=>{const n=y.pluginServices.getServices().notify;a.length&&(ia({selectedNodes:a}),t(a.map(ua),e),n.success("Cut element to clipboard"))},copyNodes:({selectedNodes:e})=>()=>{const t=y.pluginServices.getServices().notify;e.length&&(ia({selectedNodes:e}),t.success("Copied element to clipboard"))},pasteNodes:({insertNodes:e,pageId:t,selectToplevelNodes:a})=>()=>{const{selectedNodes:n=[]}=JSON.parse(ca())||{},r=n&&da(n);r&&(e(r,t),a(r))}},ma={bringToFront:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,1/0)},bringForward:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,1)},sendBackward:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,-1)},sendToBack:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,-1/0)}},va={shiftUp:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top-=oa.t,e))))},shiftDown:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top+=oa.t,e))))},shiftLeft:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left-=oa.t,e))))},shiftRight:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left+=oa.t,e))))},nudgeUp:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top-=oa.s,e))))},nudgeDown:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top+=oa.s,e))))},nudgeLeft:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left-=oa.s,e))))},nudgeRight:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left+=oa.s,e))))}};var ha=a(61);const xa=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN],ya=[0,0,0,1],_a=[1,0,0,1],ja=[0,1,0,1],wa=[-1,1,0,1],Oa=[1,1,0,1],ka=[-1,-1,0,1],Ea=[1,-1,0,1],Ma=(e,t,a)=>[1,0,0,0,0,1,0,0,0,0,1,0,e,t,a,1],Sa=(e,t,a)=>[e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1],Ca=e=>{const t=Math.sin(e),a=Math.cos(e);return[a,-t,0,0,t,a,0,0,0,0,1,0,0,0,0,1]},Pa=(e,...t)=>t.reduce(((e,t)=>(([e,t,a,n,r,o,s,i,c,l,d,u,p,g,b,f],[m,v,h,x,y,_,j,w,O,k,E,M,S,C,P,A])=>[e*m+r*v+c*h+p*x,t*m+o*v+l*h+g*x,a*m+s*v+d*h+b*x,n*m+i*v+u*h+f*x,e*y+r*_+c*j+p*w,t*y+o*_+l*j+g*w,a*y+s*_+d*j+b*w,n*y+i*_+u*j+f*w,e*O+r*k+c*E+p*M,t*O+o*k+l*E+g*M,a*O+s*k+d*E+b*M,n*O+i*k+u*E+f*M,e*S+r*C+c*P+p*A,t*S+o*C+l*P+g*A,a*S+s*C+d*P+b*A,n*S+i*C+u*P+f*A])(e,t)),e),Aa=([e,t,a,n,r,o,s,i,c,l,d,u,p,g,b,f],[m,v,h,x])=>[e*m+r*v+c*h+p*x,t*m+o*v+l*h+g*x,a*m+s*v+d*h+b*x,n*m+i*v+u*h+f*x],Ta=([e,t,a,n])=>1===n?[e,t,a,n]:[e/n,t/n,a/n,1],Na=([e,t,a,n,r,o,s,i,c,l,d,u,p,g,b,f])=>{const m=[o*d*f-o*u*b-l*s*f+l*i*b+g*s*u-g*i*d,-t*d*f+t*u*b+l*a*f-l*n*b-g*a*u+g*n*d,t*s*f-t*i*b-o*a*f+o*n*b+g*a*i-g*n*s,-t*s*u+t*i*d+o*a*u-o*n*d-l*a*i+l*n*s,-r*d*f+r*u*b+c*s*f-c*i*b-p*s*u+p*i*d,e*d*f-e*u*b-c*a*f+c*n*b+p*a*u-p*n*d,-e*s*f+e*i*b+r*a*f-r*n*b-p*a*i+p*n*s,e*s*u-e*i*d-r*a*u+r*n*d+c*a*i-c*n*s,r*l*f-r*u*g-c*o*f+c*i*g+p*o*u-p*i*l,-e*l*f+e*u*g+c*t*f-c*n*g-p*t*u+p*n*l,e*o*f-e*i*g-r*t*f+r*n*g+p*t*i-p*n*o,-e*o*u+e*i*l+r*t*u-r*n*l-c*t*i+c*n*o,-r*l*b+r*d*g+c*o*b-c*s*g-p*o*d+p*s*l,e*l*b-e*d*g-c*t*b+c*a*g+p*t*d-p*a*l,-e*o*b+e*s*g+r*t*b-r*a*g-p*t*s+p*a*o,e*o*d-e*s*l-r*t*d+r*a*l+c*t*s-c*a*o],v=e*m[0]+t*m[4]+a*m[8]+n*m[12];if(0===v)return xa;{const e=1/v;for(let t=0;t<16;t++)m[t]*=e;return m}},Da=e=>[1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],1],Ia=([e,t,a,n,r,o,s,i,c,l,d,u,p,g,b,f])=>[e,t,a,n,r,o,s,i,c,l,d,u,0,0,0,f],Fa=e=>1===e.length?e[0]:e.slice(1).reduce(((e,t)=>Pa(e,t)),e[0]),La=(e,t,a)=>Math.min(t,Math.max(e,a)),Ra=e=>{const t=Math.acos(La(-1,1,e[0]));return Math.asin(La(-1,1,e[1]))>0?t:-t},za=[1,0,0,0,1,0,0,0,1],Ba=(e,t)=>[1,0,0,0,1,0,e,t,1],Ha=(e,...t)=>t.reduce(((e,t)=>(([e,t,a,n,r,o,s,i,c],[l,d,u,p,g,b,f,m,v])=>[e*l+n*d+s*u,t*l+r*d+i*u,a*l+o*d+c*u,e*p+n*g+s*b,t*p+r*g+i*b,a*p+o*g+c*b,e*f+n*m+s*v,t*f+r*m+i*v,a*f+o*m+c*v])(e,t)),e),Wa=([e,t,a],[n,r,o])=>[e*n,t*r,a*o],Va=({x:e,y:t,a:a,b:n})=>(r,o,s)=>{const i=((e,t,a)=>[wa,Oa,Ea,ka].map((n=>Aa(e,(([e,t,a,n],[r,o,s,i])=>[e*r,t*o,a*s,n*i])(n,[t,a,0,1])))))(r,o,s);return i.every((([r,o])=>e-a<=r&&r<=e+a&&t-n<=o&&o<=t+n))},Ua=({transformMatrix:e,a:t,b:a},n,r)=>{const{inverseProjection:o,planeVector:s}=((e,t,a)=>{const n=Ta(Aa(e,ya)),r=Ta(Aa(e,_a)),o=Ta(Aa(e,ja)),s=r[0]-n[0],i=r[1]-n[1],c=o[0]-n[0],l=o[1]-n[1],d=l?r[2]-n[2]:0,u=l?o[2]-n[2]:0,p=Na(e),g=1/(s-i/l*c),b=-g*c/l,f=-g*n[0]-b*n[1],m=-1/l,v=n[2]+d*f+u*m*(n[1]+f*i),h=g*(d+u*i*m),x=-u*m+b*(d+u*i*m);return{inverseProjection:p,planeVector:0===l?[t,a,n[2],1]:[h,x,v]}})(e,n,r),i=(([e,t,a],[n,r,o])=>e*n+t*r+a*o)(s,[n,r,1]),c=Ta(Aa(o,[n,r,i,1])),[l,d]=c;return{z:i,intersection:c,inside:Math.abs(l)<=t&&Math.abs(d)<=a}},Ga=(e,{x:t,y:a})=>((e,t,a)=>e.map(((e,n)=>({...Ua(e,t,a),shape:e,index:n}))))(e,t,a).filter((e=>e.inside)).sort(((e,t)=>t.z-e.z||t.index-e.index)).map((e=>e.shape)),$a=(e,t,a,n,r)=>((e,t,a)=>Ta(Aa(e,[t,a,0,1])))(a,n*e,r*t),Ka={},qa=[[-1,-1,315],[1,-1,45],[1,1,135],[-1,1,225],[0,-1,0],[1,0,90],[0,1,180],[-1,0,270]],Xa=[[[-1,-1],[0,-1]],[[0,-1],[1,-1]],[[1,-1],[1,0]],[[1,0],[1,1]],[[1,1],[0,1]],[[0,1],[-1,1]],[[-1,1],[-1,0]],[[-1,0],[-1,-1]]],Ya=[[-1,-1],[1,-1],[-1,1],[1,1]],Za={left:-1,center:0,right:1},Ja={top:-1,center:0,bottom:1},Qa={"-1":"left",0:"center",1:"right"},en={"-1":"top",0:"center",1:"bottom"},tn={0:"ns-resize",45:"nesw-resize",90:"ew-resize",135:"nwse-resize",180:"ns-resize",225:"nesw-resize",270:"ew-resize",315:"nwse-resize"},an=([[e,t],[a,n]],[r,o],[s,i])=>[[Math.min(e,r,s),Math.min(t,o,i)],[Math.max(a,r,s),Math.max(n,o,i)]],nn=(e,t)=>Ya.reduce(((t,a)=>{const n=Ta(Aa(e.transformMatrix,[e.a*a[0],e.b*a[1],0,1]));return an(t,n,n)}),t),rn={deltaX:0,deltaY:0,transform:null,cumulativeTransform:null},on=e=>t=>"annotation"===t.type?on(e)(e.find((e=>e.id===t.parent))):t,sn=e=>"annotation"===e.type?e.parent:e.id,cn=(e,{a:t,b:a,baseAB:n},r)=>[Math.max(n?e-n[0]:e-t,r[0]),Math.max(n?e-n[1]:e-a,r[1])],ln=e=>({gesture:t,shape:a,directShape:n})=>{const r=t.cumulativeTransform;if(!a||!n)return{transforms:[],shapes:[]};const o=Aa(Pa(Na(Ia(a.localTransformMatrix)),r),ya),s=[Za[n.horizontalPosition],Ja[n.verticalPosition],0],i=Wa(o,s),c=cn(e.minimumElementSize,a,i);return{cumulativeTransforms:[],cumulativeSizes:[t.sizes||Ba(...c)],shapes:[a.id]}},dn=e=>({gesture:t,shape:a,directShape:n})=>{const r=t.cumulativeTransform;if(!a||!n)return{transforms:[],shapes:[]};const o=Ia(a.localTransformMatrix),s=Na(o),i=Aa(Pa(s,r),ya),c=[Za[n.horizontalPosition]/2,Ja[n.verticalPosition]/2,0],l=Wa(i,c),d=cn(e.minimumElementSize,a,l),u=Aa(Pa(o,Sa(Za[n.horizontalPosition],Ja[n.verticalPosition],1),Ma(d[0],d[1],0)),ya),p=t.sizes||Ba(...d);return{cumulativeTransforms:[Ma(u[0],u[1],0)],cumulativeSizes:[p],shapes:[a.id]}},un=(e,t)=>[{cumulativeTransforms:e,shapes:t.map((e=>"annotation"!==e.type&&e.id)).filter(Ne)}],pn=(e,t,a,n,r,o)=>{const s=a.map((t=>"annotation"===t.type&&t.subtype===e.rotationHandleName&&t.parent)).map((e=>e&&n.find((t=>t.id===e))));return Te(s.map(((e,n)=>t.map((t=>({transform:t,shape:e,directShape:a[n],cursorPosition:r,alterSnapGesture:o})))))).map((e=>({shape:t,directShape:a,cursorPosition:{x:n,y:r},alterSnapGesture:o})=>{if(!t||!a)return{transforms:[],shapes:[]};const s=t.transformMatrix,i=Aa(s,ya),c=Aa(Pa(s,a.localTransformMatrix),ya),l=Math.atan2(i[1]-c[1],i[0]-c[0]),d=Math.atan2(i[1]-r,i[0]-n),u=Math.round(d/(Math.PI/12))*Math.PI/12,p=Math.sqrt(Math.pow(i[0]-n,2)+Math.pow(i[1]-r,2)),g=[Math.cos(u)*p,Math.sin(u)*p],b=Math.sqrt(Math.pow(g[0]-(i[0]-n),2)+Math.pow(g[1]-(i[1]-r),2)),f=-1!==o.indexOf("relax"),m=b<e.rotateSnapInPixels&&!f?u:d;return{transforms:[Ca(l-m)],shapes:[t.id]}})(e))},gn=(e,t,a,n,r)=>{const o=a.map((t=>"annotation"===t.type&&t.subtype===e.resizeHandleName&&t.parent)).map((e=>e&&n.find((t=>t.id===e))));return Te(o.map(((e,n)=>t.map((t=>({gesture:t,shape:e,directShape:a[n]})))))).map(r)},bn=e=>t=>{if(0!==t[12]||0!==t[13]){const a=Ia(e),n=Na(a);return Da(Pa(n,t))}return t},fn=e=>e?0:1,mn=(e,t,a)=>{const n=fn(a);if(0===t)return(e[0][n]+e[1][n])/2;return e[(t+1)/2][n]},vn=(e,t)=>t.parent?vn(e,e.find((e=>e.id===t.parent))).concat([t]):[t],hn=e=>e.a+(e.snapResizeVector?e.snapResizeVector[0]:0),xn=e=>e.b+(e.snapResizeVector?e.snapResizeVector[1]:0),yn=(e,t)=>{if(!t.parent)return t.localTransformMatrix;const a=vn(e,t).map((e=>e.localTransformMatrix));return Fa(a)},_n=(e,t)=>{const a=e=>e.snapDeltaMatrix?Pa(e.localTransformMatrix,e.snapDeltaMatrix):e.localTransformMatrix;if(!t.parent)return a(t);const n=vn(e,t).map(a);return Fa(n)},jn=e=>"horizontal"===e.dimension,wn=e=>"vertical"===e.dimension,On=(e={distance:1/0},t)=>t.distance<e.distance?{constraint:t,distance:t.distance}:e,kn=(e,t)=>{const a=e.filter(t).reduce(On,void 0);return a&&a.constraint},En=(e,t,a,n,r)=>{const o=t.find((e=>n.id===e.id));if(!o)return!1;if("annotation"===o.type)return En(e,t,a,t.find((e=>o.parent===e.id)),r);const s=xn(o),i=Ma(0,-s,0),c=Ma(0,-e.rotateAnnotationOffset,e.atopZ),l=Pa(i,c);return{id:e.rotationHandleName+"_"+r,type:"annotation",subtype:e.rotationHandleName,interactive:!0,parent:o.id,localTransformMatrix:l,a:e.rotationHandleSize,b:e.rotationHandleSize}},Mn=(e,t,a)=>{const n=e.rotationEpsilon,r=2*Math.PI;function o(e){return a.filter((t=e,e=>e.parent===t.id)).every(s);var t}function s(e){return(e=>{const t=Ra(e.localTransformMatrix)/r;return Math.abs(Math.round(t)-t)<n})(e)&&o(e)}return o(t)};function Sn(e,t,a,n){const r=t.find((e=>n.id===e.id)),o=r&&(r.subtype===e.resizeHandleName?t.find((e=>n.parent===e.id)):r);if(!r)return[];if(r.subtype===e.resizeHandleName){return r.interactive?Cn(e,{shapes:t,selectedShapes:[t.find((e=>n.parent===e.id))]}):[]}if("annotation"===r.type)return Sn(e,t,a,t.find((e=>r.parent===e.id)));const s=hn(o),i=xn(o),c=("group"!==o.type||e.groupResize&&Mn(e,o,t.filter((e=>"annotation"!==e.type)))?qa:[]).map(((e,t,a,n)=>([r,o,s])=>{const i=Ma(r*a,o*n,e.resizeAnnotationOffsetZ),c=Ma(-r*e.resizeAnnotationOffset,-o*e.resizeAnnotationOffset,e.atopZ+10),l=Pa(i,c),d=Qa[r],u=en[o];return{id:[e.resizeHandleName,d,u,t.id].join("_"),type:"annotation",subtype:e.resizeHandleName,horizontalPosition:d,verticalPosition:u,cursorAngle:s,interactive:!0,parent:t.id,localTransformMatrix:l,backgroundColor:"rgb(0,255,0,1)",a:e.resizeAnnotationSize,b:e.resizeAnnotationSize}})(e,n,s,i)),l=Xa.map(((e,t,a,n)=>([[r,o],[s,i]])=>{const c=a*De(r,s),l=n*De(o,i),d=Ma(c,l,e.atopZ-10),u=o===i,p=u?a*Math.abs(s-r):n*Math.abs(i-o),g=Math.max(0,p/2-e.resizeAnnotationConnectorOffset);return{id:[e.resizeConnectorName,Qa[r],en[o],Qa[s],en[i],t].join("_"),type:"annotation",subtype:e.resizeConnectorName,interactive:!0,parent:t.id,localTransformMatrix:d,backgroundColor:e.devColor,a:u?g:.5,b:u?.5:g}})(e,n,s,i));return[...c,...l]}function Cn(e,{shapes:t,selectedShapes:a}){return Te(a.map((n=>Sn(e,t,a,n))).filter(Ne))}const Pn=e=>{const t={...e};return e.snapDeltaMatrix&&(t.localTransformMatrix=Pa(e.localTransformMatrix,e.snapDeltaMatrix),t.snapDeltaMatrix=null),e.snapResizeVector&&(t.a=hn(e),t.b=xn(e),t.snapResizeVector=null),t},An=(e,t,a)=>({shapes:t.filter((t=>!e.find((e=>t.id===e.id)))).map((a=>{const n=e.find((e=>e.id===a.parent));return n?{...a,parent:null,localTransformMatrix:Pa(t.find((e=>e.id===n.id)).localTransformMatrix,a.localTransformMatrix)}:a})),selectedShapes:a.filter((t=>!e.find((e=>e.id===t.id))))}),Tn=(e,t)=>{return t.filter((a=e,e=>!a.some((t=>e.parent===t.id))));var a},Nn=(e,t)=>{const a=t.reduce(((e,t)=>an(e,...nn(t,e))),[[1/0,1/0],[-1/0,-1/0]]);const{a:n,b:r,localTransformMatrix:o,rigTransform:s}=(([[e,t],[a,n]])=>{const r=(a-e)/2,o=(n-t)/2,s=e+r,i=t+o;return{a:r,b:o,localTransformMatrix:Ma(s,i,0),rigTransform:Ma(-s,-i,-0)}})(a);return{id:((e,t)=>{const a=e+"|"+t;return Ka[a]||(Ka[a]=Object(la.a)(e))})(e.groupName,t.map((e=>e.id)).join("|")),type:e.groupName,subtype:e.adHocGroupName,a:n,b:r,localTransformMatrix:o,rigTransform:s,parent:null}},Dn=e=>{e.childBaseAB&&(e.childBaseAB=null,e.baseLocalTransformMatrix=null)},In=({a:e,b:t},a)=>{const n=1e-6,r=Math.max(e/a[0],n),o=Math.max(t/a[1],n);return Sa(r,o,1)},Fn=e=>t=>{const a=t.childBaseAB||[t.a,t.b],n=Sa(...a,1),r=Na(n),o=t.baseLocalTransformMatrix||t.localTransformMatrix,s=Pa(o,n),i=Pa(e,s),c=e.map((e=>Math.abs(e))),l=Na(c),d=Aa(Pa(c,n),[1,1,1,1]);t.localTransformMatrix=Pa(i,Pa(r,l)),t.a=d[0],t.b=d[1],t.childBaseAB=a,t.baseLocalTransformMatrix=o},Ln=(e,t)=>{const a={};for(const t of e)a[t.id]=t;const n={},r=e=>e.parent?r(a[e.parent])+1:0;for(const t of e)n[t.id]=r(t);const o={[t.id]:t},s=e.slice().sort(((e,t)=>n[e.id]-n[t.id]));for(const e of s){const t=o[e.parent];t&&(o[e.id]=e,i=t,Boolean(i.childBaseAB||i.baseAB)?Fn(In(t,t.childBaseAB||t.baseAB))(e):Dn(e))}var i;return s},Rn=(e,t)=>({shapes:e,selectedShapes:t}),zn=(e,t,a,n,r,o,s)=>{const i=!t.depthSelect||!n||a.length&&"annotation"===a[0].type?0:(e.depthIndex+(e.down?0:1))%a.length;return{shapes:a.length?[a[i]]:[],uid:r,depthIndex:a.length?i:0,down:true,boxHighlightedShapes:s}},Bn=(e,t,a,n,r,o,s)=>{var i,c,l;return{shapes:a.length>0?(i=e=>e.id,c=o,l=a.slice(0,1),c.filter((e=>!l.find((t=>i(t)===i(e))))).concat(l.filter((e=>!c.find((t=>i(t)===i(e))))))):[],uid:r,depthIndex:0,down:!1,boxHighlightedShapes:s}},Hn=(e,t)=>a=>({...a,id:e+"_"+a.id,type:"annotation",subtype:e,interactive:!1,localTransformMatrix:Pa(a.localTransformMatrix,Ma(0,0,t)),parent:a.parent}),Wn={alignLeft:{type:"alignLeftAction",horizontal:!0,controlledAnchor:-1,controllingAnchor:-1},alignCenter:{type:"alignCenterAction",horizontal:!0,controlledAnchor:0,controllingAnchor:0},alignRight:{type:"alignRightAction",horizontal:!0,controlledAnchor:1,controllingAnchor:1},alignTop:{type:"alignTopAction",horizontal:!1,controlledAnchor:-1,controllingAnchor:-1},alignMiddle:{type:"alignMiddleAction",horizontal:!1,controlledAnchor:0,controllingAnchor:0},alignBottom:{type:"alignBottomAction",horizontal:!1,controlledAnchor:1,controllingAnchor:1}},Vn={distributeHorizontally:{type:"distributeHorizontallyAction",horizontal:!0},distributeVertically:{type:"distributeVerticallyAction",horizontal:!1}},Un=e=>e.startsWith("group"),Gn=e=>Un(e)?{id:e,type:"group",subtype:"persistentGroup"}:{id:e,type:"rectangleElement",subtype:""},$n=({top:e,left:t,width:a,height:n,angle:r},o)=>Pa(Ma(t+a/2,e+n/2,o),Ca(-r/180*Math.PI)),Kn=({id:e,position:t},a)=>({...Gn(e),parent:t&&t.parent||null,transformMatrix:$n(t,a),a:t.width/2,b:t.height/2}),qn=({id:e,position:t,filter:a},n)=>({...Gn(e),width:t.width,height:t.height,transformMatrix:$n(t,n),filter:a}),Xn=({elements:e})=>({elements:e.map(qn)}),Yn=e=>({left:e.transformMatrix[12]-e.a,top:e.transformMatrix[13]-e.b,width:2*e.a,height:2*e.b,angle:Math.round(180*Ra(e.transformMatrix)/Math.PI),parent:e.parent||null,type:"group"===e.type?"group":"element"}),Zn=(e,t,a)=>a.findIndex((t=>t.id===e.id))===t,Jn=e=>{const t=e.map(Kn).filter(((e,t,a)=>!Un(e.id)||a.find((t=>t.parent===e.id)))).filter(Zn);(e=>{const t=Fe(e.map((e=>e.id)));e.forEach((e=>{e.parent&&!t[e.parent]&&(e.parent=null)}))})(t);const a=(n=t,e=>e.parent?Pa(Na(n.find((t=>t.id===e.parent)).transformMatrix),e.transformMatrix):e.transformMatrix);var n;return t.map((e=>({...e,localTransformMatrix:a(e)})))},Qn=(e,t,a)=>{const n=((e,{shapes:t,gestureEnd:a},n)=>{const r=(e,t)=>e.id<t.id?-1:1,o=e=>"annotation"!==e.type&&"adHocGroup"!==e.subtype,s=n.filter(o).sort(r);return t.filter(o).sort(r).map(((e,t)=>{const n=s[t],r=n&&n.position;if(r&&a){const t={left:r.left,top:r.top,width:r.width,height:r.height,angle:Math.round(r.angle),type:r.type,parent:r.parent||null},a=Yn(e);return 1/a.angle==-1/0&&(a.angle=0),Object(ha.shallowEqual)(t,a)?null:{position:a,elementId:e.id}}})).filter(Ne)})(0,t,a);n.length&&e(n)},er=(e,t)=>a=>{const n=a.currentScene,r=Z(t),o=me(t,r),s=n.shapes,i=s.filter((e=>"persistentGroup"===e.subtype)).filter(Zn),c=o.filter((e=>Un(e.id))).filter(Zn);i.forEach((t=>{if(!c.find((e=>{if(!e.id)throw new Error("Element has no id");return e.id===t.id}))){const a={id:t.id,filter:void 0,expression:'shape fill="rgba(255,255,255,0)" | render',position:{...Yn(t)}};e(_t(r,a))}}));const l=c.filter((e=>!i.find((t=>e.id===t.id))||!o.find((t=>t.position.parent===e.id))));Qn((t=>e(ot(t.map((e=>({...e,pageId:r})))))),n,o),l.length&&e(gt(l.map((e=>e.id)),r));const d=n.selectedPrimaryShapes;Object(ha.shallowEqual)(d,t.transient.selectedToplevelNodes)||e(Re(Te(d.map((e=>e.startsWith("group")&&"adHocGroup"===(s.find((t=>t.id===e))||{}).subtype?s.filter((t=>"annotation"!==t.type&&t.parent===e)).map((e=>e.id)):[e])))))},tr=e=>t=>{const a=t=>[t,...Te(e.filter((e=>e.position.parent===t)).map((e=>a(e.id))))];return a(t)},ar=()=>{const e=navigator.platform.toLowerCase();return e.indexOf("mac")>=0?"osx":e.indexOf("win")>=0?"windows":e.indexOf("linux")>=0?"linux":"other"},nr=e=>{if(!e)return"";let t=e.toUpperCase();return t=t.replace(/command/i,"⌘"),t=t.replace(/option/i,"⌥"),t=t.replace(/left/i,"←"),t=t.replace(/right/i,"→"),t=t.replace(/up/i,"↑"),t=t.replace(/down/i,"↓"),t=t.replace(/plus/i,"+"),t=t.replace(/minus/i,"-"),t},rr=ar(),or=Object(ha.compose)(Object(ha.mapProps)((({namespace:e,action:t})=>{const a=P[e][t];if("string"==typeof a)return{shortcut:""};const n=a[rr]||[];return{shortcut:nr(n[0])}})))((({shortcut:e})=>Object(Vt.jsx)(Wt.EuiText,{size:"xs",textAlign:"center",color:"ghost"},e.replace(/\+/g," + ")))),sr=()=>c.i18n.translate("xpack.canvas.sidebarHeader.bringForwardArialLabel",{defaultMessage:"Move element up one layer"}),ir=()=>c.i18n.translate("xpack.canvas.sidebarHeader.bringToFrontArialLabel",{defaultMessage:"Move element to top layer"}),cr=()=>c.i18n.translate("xpack.canvas.sidebarHeader.sendBackwardArialLabel",{defaultMessage:"Move element down one layer"}),lr=()=>c.i18n.translate("xpack.canvas.sidebarHeader.sendToBackArialLabel",{defaultMessage:"Move element to bottom layer"}),dr=j.a.getShortcutHelp(),ur=({title:e,showLayerControls:t=!1,bringToFront:a,bringForward:n,sendBackward:r,sendToBack:o})=>Object(Vt.jsx)(Wt.EuiFlexGroup,{className:"canvasLayout__sidebarHeader",gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiTitle,{size:"xs"},Object(Vt.jsx)("h3",null,e))),t?Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:Object(Vt.jsx)("span",null,dr.BRING_TO_FRONT,Object(Vt.jsx)(or,{namespace:"ELEMENT",action:"BRING_TO_FRONT"}))},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"text",iconType:"sortUp",onClick:a,"aria-label":ir()}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:Object(Vt.jsx)("span",null,dr.BRING_FORWARD,Object(Vt.jsx)(or,{namespace:"ELEMENT",action:"BRING_FORWARD"}))},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"text",iconType:"arrowUp",onClick:n,"aria-label":sr()}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:Object(Vt.jsx)("span",null,dr.SEND_BACKWARD,Object(Vt.jsx)(or,{namespace:"ELEMENT",action:"SEND_BACKWARD"}))},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"text",iconType:"arrowDown",onClick:r,"aria-label":cr()}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:Object(Vt.jsx)("span",null,dr.SEND_TO_BACK,Object(Vt.jsx)(or,{namespace:"ELEMENT",action:"SEND_TO_BACK"}))},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"text",iconType:"sortDown",onClick:o,"aria-label":lr()}))))):null),pr=e=>{const t=Object(l.useSelector)((e=>Z(e))),a=Object(l.useSelector)((e=>((e,t)=>{const a=me(e,t),n=ue(e).map((e=>a.find((t=>t.id===e)))).filter((e=>e)),r=Te(n.map((e=>a.find((t=>t.id===(null==e?void 0:e.id)))?[null==e?void 0:e.id]:a.filter((t=>{var a;return(null===(a=t.position)||void 0===a?void 0:a.parent)===(null==e?void 0:e.id)})).map((e=>e.id)))));return Te(r.map(tr(a))).map((e=>a.find((t=>t.id===e))))})(e,t)),ra.a),n=Object(l.useDispatch)(),r={...e,pageId:t,selectedNodes:a,elementLayer:(e,t,a)=>{n(rt({pageId:e,elementId:t,movement:a}))}},o=(s=ma,i=r,Object.keys(s).reduce(((e,t)=>(e[t]=s[t](i),e)),{}));var s,i;return Object(Vt.jsx)(ur,zt()({},e,o))},gr=()=>c.i18n.translate("xpack.canvas.groupSettings.multipleElementsActionsDescription",{defaultMessage:"Deselect these elements to edit their individual settings, press ({gKey}) to group them, or save this selection as a new element to re-use it throughout your workpad.",values:{gKey:"G"}}),br=()=>c.i18n.translate("xpack.canvas.groupSettings.multipleElementsDescription",{defaultMessage:"Multiple elements are currently selected."}),fr=()=>Object(Vt.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)("p",null,br()),Object(Vt.jsx)("p",null,gr()))),mr=()=>c.i18n.translate("xpack.canvas.groupSettings.saveGroupDescription",{defaultMessage:"Save this group as a new element to re-use it throughout your workpad."}),vr=()=>c.i18n.translate("xpack.canvas.groupSettings.ungroupDescription",{defaultMessage:"Ungroup ({uKey}) to edit individual element settings.",values:{uKey:"U"}}),hr=()=>Object(Vt.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)("p",null,vr()),Object(Vt.jsx)("p",null,mr()))),xr=()=>c.i18n.translate("xpack.canvas.elementConfig.failedLabel",{defaultMessage:"Failed",description:"The label for the total number of elements in a workpad that have thrown an error or failed to load"}),yr=()=>c.i18n.translate("xpack.canvas.elementConfig.loadedLabel",{defaultMessage:"Loaded",description:"The label for the number of elements in a workpad that have loaded"}),_r=()=>c.i18n.translate("xpack.canvas.elementConfig.progressLabel",{defaultMessage:"Progress",description:"The label for the percentage of elements that have finished loading"}),jr=()=>c.i18n.translate("xpack.canvas.elementConfig.title",{defaultMessage:"Element status",description:'"Elements" refers to the individual text, images, or visualizations that you can add to a Canvas workpad'}),wr=()=>c.i18n.translate("xpack.canvas.elementConfig.totalLabel",{defaultMessage:"Total",description:"The label for the total number of elements in a workpad"}),Or=Object(l.connect)((e=>({elementStats:ie(e)})))((({elementStats:e})=>{if(!e)return null;const{total:t,ready:a,error:n}=e,r=t>0?Math.round((a+n)/t*100):100;return Object(Vt.jsx)("div",{className:"canvasSidebar__expandable"},Object(Vt.jsx)(Wt.EuiAccordion,{id:"canvas-element-stats",buttonContent:jr(),initialIsOpen:!1,className:"canvasSidebar__accordion"},Object(Vt.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(Vt.jsx)(Wt.EuiFlexGroup,{gutterSize:"none"},Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiStat,{title:t,description:wr(),titleSize:"xs"})),Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiStat,{title:a,description:yr(),titleSize:"xs"})),Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiStat,{title:n,description:xr(),titleSize:"xs"})),Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiStat,{title:r+"%",description:_r(),titleSize:"xs"}))))))}));function kr(e){this.name=e.name,this.displayName=e.displayName||this.name,this.help=e.help||"",this.enter=e.enter||"",this.exit=e.exit||""}class transitions_registry_TransitionsRegistry extends F.Registry{wrapper(e){return new kr(e)}}const Er=new transitions_registry_TransitionsRegistry,Mr=Object(D.createAction)("addPage"),Sr=Object(D.createAction)("duplicatePage"),Cr=Object(D.createAction)("movePage",((e,t,a)=>({id:e,position:t,gotoPage:a}))),Pr=Object(D.createAction)("removePage"),Ar=Object(D.createAction)("stylePage",((e,t)=>({pageId:e,style:t}))),Tr=Object(D.createAction)("setPage"),Nr=Object(D.createAction)("setPageTransition",((e,t)=>({pageId:e,transition:t})));var Dr=a(84);const Ir=()=>c.i18n.translate("xpack.canvas.workpadConfig.backgroundColorLabel",{defaultMessage:"Background color"}),Fr={onAddColor:Nt,onRemoveColor:Dt},Lr=Object(l.connect)((e=>({colors:re(e)})),Fr)((e=>Object(Vt.jsx)(Dr.a,zt()({},e,{hasButtons:!0,ariaLabel:Ir()})))),Rr=()=>c.i18n.translate("xpack.canvas.pageConfig.backgroundColorDescription",{defaultMessage:"Accepts HEX, RGB or HTML color names"}),zr=()=>c.i18n.translate("xpack.canvas.pageConfig.backgroundColorLabel",{defaultMessage:"Background"}),Br=()=>c.i18n.translate("xpack.canvas.pageConfig.title",{defaultMessage:"Page settings"}),Hr=()=>c.i18n.translate("xpack.canvas.pageConfig.transitionLabel",{defaultMessage:"Transition",description:"This refers to the transition effect, such as fade in or rotate,  applied to a page in presentation mode."}),Wr=()=>c.i18n.translate("xpack.canvas.pageConfig.transitionPreviewLabel",{defaultMessage:"Preview",description:"This is the label for a preview of the transition effect selected."}),Vr=()=>c.i18n.translate("xpack.canvas.pageConfig.transitions.noneDropDownOptionLabel",{defaultMessage:"None",description:"This is the option the user should choose if they do not want any page transition (i.e. fade in, fade out, etc) to be applied to the current page."}),Ur={stylePage:Ar,setPageTransition:Nr},Gr=Object(l.connect)((e=>{const t=Y(e);return{page:J(e)[t],pageIndex:t}}),Ur,((e,t)=>({pageIndex:e.pageIndex,setBackground:a=>{const n={...e.page.style,background:a};t.stylePage(e.page.id,n)},background:Object(d.get)(e,"page.style.background"),transition:Er.get(Object(d.get)(e,"page.transition.name")),transitions:[{value:"",text:Vr()}].concat(Er.toArray().map((({name:e,displayName:t})=>({value:e,text:t})))),setTransition:a=>{t.setPageTransition(e.page.id,{name:a})}})))((({pageIndex:e,setBackground:t,background:a,transition:r,transitions:o,setTransition:s})=>Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(Wt.EuiTitle,{size:"xs",className:"canvasSidebar__panelTitleHeading"},Object(Vt.jsx)("h4",null,Br())),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiFormRow,{display:"columnCompressed",label:Object(Vt.jsx)(Wt.EuiToolTip,{content:Rr()},Object(Vt.jsx)("span",null,zr()," ",Object(Vt.jsx)(Wt.EuiIcon,{type:"questionInCircle",color:"subdued"})))},Object(Vt.jsx)(Lr,{onChange:t,value:a})),e>0?Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(Wt.EuiFormRow,{label:Hr(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiSelect,{value:r?r.name:"",options:o,compressed:!0,onChange:e=>s(e.target.value)})),r?Object(Vt.jsx)(Wt.EuiFormRow,{label:Wr(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiCard,{title:"",description:"",className:r.enter,style:{height:"72px",width:"128px",background:a,animationDuration:"1s"}})):""):"")));var $r=a(191),Kr=a.n($r);const qr=()=>c.i18n.translate("xpack.canvas.varConfigVarValueField.booleanOptionsLegend",{defaultMessage:"Boolean value"}),Xr=()=>c.i18n.translate("xpack.canvas.varConfigVarValueField.falseOption",{defaultMessage:"False"}),Yr=()=>c.i18n.translate("xpack.canvas.varConfigVarValueField.trueOption",{defaultMessage:"True"}),Zr=({type:e,value:t,onChange:a})=>{const n=Object(Wt.htmlIdGenerator)()(),r=[{id:`${n}-true`,label:Yr()},{id:`${n}-false`,label:Xr()}];return"number"===e?Object(Vt.jsx)(Wt.EuiFieldNumber,{compressed:!0,name:"value",value:t,onChange:e=>a(parseFloat(e.target.value))}):"boolean"===e?Object(Vt.jsx)(Wt.EuiButtonGroup,{name:"value",options:r,idSelected:`${n}-${t}`,onChange:e=>{const t="true"===e.replace(`${n}-`,"");a(t)},buttonSize:"compressed",isFullWidth:!0,legend:qr()}):Object(Vt.jsx)(Wt.EuiFieldText,{compressed:!0,name:"value",value:String(t),onChange:e=>a(e.target.value)})},Jr=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.addTitleLabel",{defaultMessage:"Add variable"}),Qr=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.cancelButtonLabel",{defaultMessage:"Cancel"}),eo=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.duplicateNameError",{defaultMessage:"Variable name already in use"}),to=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.editTitleLabel",{defaultMessage:"Edit variable"}),ao=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.editWarning",{defaultMessage:"Editing a variable in use may adversely affect your workpad"}),no=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.nameFieldLabel",{defaultMessage:"Name"}),ro=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.saveButtonLabel",{defaultMessage:"Save changes"}),oo=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.typeBooleanLabel",{defaultMessage:"Boolean"}),so=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.typeFieldLabel",{defaultMessage:"Type"}),io=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.typeNumberLabel",{defaultMessage:"Number"}),co=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.typeStringLabel",{defaultMessage:"String"}),lo=()=>c.i18n.translate("xpack.canvas.varConfigEditVar.valueFieldLabel",{defaultMessage:"Value"}),uo=({variables:e,selectedVar:t,onCancel:a,onSave:o})=>{const s=null===t,[i,c]=Object(n.useState)(s?"string":t.type),[l,d]=Object(n.useState)(s?"":t.name),[u,p]=Object(n.useState)(s?"":t.value),g=((e,t,a)=>!!a.find((a=>e===a.name&&(!t||a.name!==t))))(l,t&&t.name,e),b=[{value:"string",inputDisplay:Object(Vt.jsx)("div",{className:"canvasEditVar__typeOption"},Object(Vt.jsx)(Wt.EuiToken,{iconType:"tokenString",className:"canvasEditVar__tokenIcon"})," ",Object(Vt.jsx)("span",null,co()))},{value:"number",inputDisplay:Object(Vt.jsx)("div",{className:"canvasEditVar__typeOption"},Object(Vt.jsx)(Wt.EuiToken,{iconType:"tokenNumber",className:"canvasEditVar__tokenIcon"})," ",Object(Vt.jsx)("span",null,io()))},{value:"boolean",inputDisplay:Object(Vt.jsx)("div",{className:"canvasEditVar__typeOption"},Object(Vt.jsx)(Wt.EuiToken,{iconType:"tokenBoolean",className:"canvasEditVar__tokenIcon"})," ",Object(Vt.jsx)("span",null,oo()))}];return Object(Vt.jsx)(r.a.Fragment,null,Object(Vt.jsx)("div",{className:"canvasVarHeader__triggerWrapper"},Object(Vt.jsx)("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>a()},Object(Vt.jsx)("span",{className:"canvasVarHeader__iconWrapper"},Object(Vt.jsx)(Wt.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),Object(Vt.jsx)("span",null,Object(Vt.jsx)("span",{className:"canvasVarHeader__anchor"},s?Jr():to())))),Object(Vt.jsx)("div",{className:"canvasSidebar__accordionContent"},!s&&Object(Vt.jsx)("div",null,Object(Vt.jsx)(Wt.EuiCallOut,{title:ao(),color:"warning",iconType:"alert",size:"s"}),Object(Vt.jsx)(Wt.EuiSpacer,{size:"m"})),Object(Vt.jsx)(Wt.EuiForm,{component:"form"},Object(Vt.jsx)(Wt.EuiFormRow,{label:so(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiSuperSelect,{options:b,valueOfSelected:i,onChange:e=>{c(e),p("boolean"===e||("number"===e?0:""))},compressed:!0})),Object(Vt.jsx)(Wt.EuiFormRow,{label:no(),display:"rowCompressed",isInvalid:g,error:g&&eo()},Object(Vt.jsx)(Wt.EuiFieldText,{name:"name",value:l,compressed:!0,onChange:e=>d(e.target.value),isInvalid:g})),Object(Vt.jsx)(Wt.EuiFormRow,{label:lo(),display:"rowCompressed"},Object(Vt.jsx)(Zr,{type:i,value:u,onChange:e=>p(e)})),Object(Vt.jsx)(Wt.EuiSpacer,{size:"m"}),Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButton,{color:"secondary",size:"s",fill:!0,onClick:()=>o({name:l,value:u,type:i}),disabled:g||!l,iconType:"save"},ro())),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s",onClick:()=>a()},Qr()))))))},po=()=>c.i18n.translate("xpack.canvas.varConfigDeleteVar.cancelButtonLabel",{defaultMessage:"Cancel"}),go=()=>c.i18n.translate("xpack.canvas.varConfigDeleteVar.deleteButtonLabel",{defaultMessage:"Delete variable"}),bo=()=>c.i18n.translate("xpack.canvas.varConfigDeleteVar.titleLabel",{defaultMessage:"Delete variable?"}),fo=()=>c.i18n.translate("xpack.canvas.varConfigDeleteVar.warningDescription",{defaultMessage:"Deleting this variable may adversely affect the workpad. Are you sure you wish to continue?"}),mo=({selectedVar:e,onCancel:t,onDelete:a})=>Object(Vt.jsx)(r.a.Fragment,null,Object(Vt.jsx)("div",{className:"canvasVarHeader__triggerWrapper"},Object(Vt.jsx)("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>t()},Object(Vt.jsx)("span",{className:"canvasVarHeader__iconWrapper"},Object(Vt.jsx)(Wt.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),Object(Vt.jsx)("span",null,Object(Vt.jsx)("span",{className:"canvasVarHeader__anchor"},bo())))),Object(Vt.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(Vt.jsx)("div",null,Object(Vt.jsx)(Wt.EuiFlexGroup,null,Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiText,{color:"subdued",size:"s"},fo()))),Object(Vt.jsx)(Wt.EuiSpacer,{size:"m"}),Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButton,{color:"danger",size:"s",fill:!0,onClick:()=>a(e),iconType:"trash"},go())),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s",onClick:()=>t()},po()))))));var vo;!function(e){e[e.List=0]="List",e[e.Edit=1]="Edit",e[e.Delete=2]="Delete"}(vo||(vo={}));const ho={number:"tokenNumber",boolean:"tokenBoolean",string:"tokenString"},xo=()=>c.i18n.translate("xpack.canvas.varConfig.addButtonLabel",{defaultMessage:"Add a variable"}),yo=()=>c.i18n.translate("xpack.canvas.varConfig.addTooltipLabel",{defaultMessage:"Add a variable"}),_o=()=>c.i18n.translate("xpack.canvas.varConfig.copyActionButtonLabel",{defaultMessage:"Copy snippet"}),jo=()=>c.i18n.translate("xpack.canvas.varConfig.copyActionTooltipLabel",{defaultMessage:"Copy variable syntax to clipboard"}),wo=()=>c.i18n.translate("xpack.canvas.varConfig.deleteActionButtonLabel",{defaultMessage:"Delete variable"}),Oo=()=>c.i18n.translate("xpack.canvas.varConfig.editActionButtonLabel",{defaultMessage:"Edit variable"}),ko=()=>c.i18n.translate("xpack.canvas.varConfig.emptyDescription",{defaultMessage:"This workpad has no variables currently. You may add variables to store and edit common values. These variables can then be used in elements or within the expression editor."}),Eo=()=>c.i18n.translate("xpack.canvas.varConfig.tableNameLabel",{defaultMessage:"Name"}),Mo=()=>c.i18n.translate("xpack.canvas.varConfig.tableTypeLabel",{defaultMessage:"Type"}),So=()=>c.i18n.translate("xpack.canvas.varConfig.tableValueLabel",{defaultMessage:"Value"}),Co=()=>c.i18n.translate("xpack.canvas.varConfig.titleLabel",{defaultMessage:"Variables"}),Po=()=>c.i18n.translate("xpack.canvas.varConfig.titleTooltip",{defaultMessage:"Add variables to store and edit common values"}),Ao=({variables:e,onCopyVar:t,onDeleteVar:a,onAddVar:r,onEditVar:o})=>{const[s,i]=Object(n.useState)(vo.List),[c,l]=Object(n.useState)(null),d=[{type:"icon",name:_o(),description:jo(),icon:"copyClipboard",onClick:t,isPrimary:!0},{type:"icon",name:Oo(),description:"",icon:"pencil",onClick:e=>{l(e),i(vo.Edit)}},{type:"icon",name:wo(),description:"",icon:"trash",color:"danger",onClick:e=>{l(e),i(vo.Delete)}}],u=[{field:"type",name:Mo(),sortable:!0,render:(e,t)=>Object(Vt.jsx)(Wt.EuiToken,{iconType:ho[e]}),width:"50px"},{field:"name",name:Eo(),sortable:!0},{field:"value",name:So(),sortable:!0,truncateText:!0,render:(e,t)=>""+e},{actions:d,width:"60px"}];return Object(Vt.jsx)("div",{className:"canvasSidebar__expandable canvasVarConfig__container "+(s!==vo.List?"canvasVarConfig-isEditMode":"")},Object(Vt.jsx)("div",{className:"canvasVarConfig__innerContainer"},Object(Vt.jsx)(Wt.EuiAccordion,{id:"accordion-variables",className:"canvasVarConfig__listView canvasSidebar__accordion",buttonContent:Object(Vt.jsx)(Wt.EuiToolTip,{content:Po(),position:"left",className:"canvasArg__tooltip"},Object(Vt.jsx)("span",null,Co())),extraAction:Object(Vt.jsx)(Wt.EuiToolTip,{position:"top",content:yo()},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"primary",iconType:"plusInCircle","aria-label":yo(),onClick:()=>{l(null),i(vo.Edit)}}))},0!==e.length&&Object(Vt.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(Vt.jsx)(Wt.EuiInMemoryTable,{className:"canvasVarConfig__list",items:e,columns:u,hasActions:!0,pagination:!1,sorting:!0,compressed:!0})),0===e.length&&Object(Vt.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(Vt.jsx)(Wt.EuiText,{color:"subdued",size:"s"},ko()),Object(Vt.jsx)(Wt.EuiSpacer,{size:"m"}),Object(Vt.jsx)(Wt.EuiButton,{size:"s",iconType:"plusInCircle",onClick:()=>i(vo.Edit)},xo()))),Object(Vt.jsx)("div",{className:"canvasVarConfig__editView canvasSidebar__accordion"},s===vo.Edit&&Object(Vt.jsx)(uo,{variables:e,selectedVar:c,onSave:e=>{c?o(c,e):r(e),l(null),i(vo.List)},onCancel:()=>{l(null),i(vo.List)}}),s===vo.Delete&&c&&Object(Vt.jsx)(mo,{selectedVar:c,onDelete:e=>{a(e),l(null),i(vo.List)},onCancel:()=>{l(null),i(vo.List)}}))))},To=()=>c.i18n.translate("xpack.canvas.varConfig.copyNotificationDescription",{defaultMessage:"Variable syntax copied to clipboard"}),No=()=>c.i18n.translate("xpack.canvas.varConfig.deleteNotificationDescription",{defaultMessage:"Variable successfully deleted"}),Do=({variables:e,setVariables:t})=>{const{success:a}=Object(y.useNotifyService)();return Object(Vt.jsx)(Ao,{variables:e,onCopyVar:e=>{const t=`{var "${e.name}"}`;Kr()(t,{debug:!0}),a(To())},onDeleteVar:n=>{const r=e.findIndex((e=>e.name===n.name));if(-1!==r){const n=[...e];n.splice(r,1),t(n),a(No())}},onAddVar:a=>{t([...e,a])},onEditVar:(a,n)=>{const r=e.findIndex((e=>a.name===e.name)),o=[...e];o[r]=n,t(o)}})},Io=()=>c.i18n.translate("xpack.canvas.workpadConfig.applyStylesheetButtonLabel",{defaultMessage:"Apply stylesheet",description:'"stylesheet" refers to the collection of CSS style rules entered by the user.'}),Fo=()=>c.i18n.translate("xpack.canvas.workpadConfig.swapDimensionsAriaLabel",{defaultMessage:"Swap the page's width and height"}),Lo=()=>c.i18n.translate("xpack.canvas.workpadConfig.swapDimensionsTooltip",{defaultMessage:"Swap the width and height"}),Ro=()=>c.i18n.translate("xpack.canvas.workpadConfig.globalCSSLabel",{defaultMessage:"Global CSS overrides"}),zo=()=>c.i18n.translate("xpack.canvas.workpadConfig.globalCSSTooltip",{defaultMessage:"Apply styles to all pages in this workpad"}),Bo=()=>c.i18n.translate("xpack.canvas.workpadConfig.nameLabel",{defaultMessage:"Name"}),Ho=()=>c.i18n.translate("xpack.canvas.workpadConfig.heightLabel",{defaultMessage:"Height"}),Wo=e=>c.i18n.translate("xpack.canvas.workpadConfig.pageSizeBadgeAriaLabel",{defaultMessage:"Preset page size: {sizeName}",values:{sizeName:e}}),Vo=e=>c.i18n.translate("xpack.canvas.workpadConfig.pageSizeBadgeOnClickAriaLabel",{defaultMessage:"Set page size to {sizeName}",values:{sizeName:e}}),Uo=()=>c.i18n.translate("xpack.canvas.workpadConfig.widthLabel",{defaultMessage:"Width"}),Go=()=>c.i18n.translate("xpack.canvas.workpadConfig.title",{defaultMessage:"Workpad settings"}),$o=()=>c.i18n.translate("xpack.canvas.workpadConfig.USLetterButtonLabel",{defaultMessage:"US Letter",description:"This is referring to the dimensions of U.S. standard letter paper."}),Ko={setSize:jt,setName:wt,setWorkpadCSS:Mt,setWorkpadVariables:e=>It(e)},qo=Object(l.connect)((e=>{const t=U(e);return{name:Object(d.get)(t,"name"),size:{width:Object(d.get)(t,"width"),height:Object(d.get)(t,"height")},css:Object(d.get)(t,"css",oa.r),variables:Object(d.get)(t,"variables",[])}}),Ko)((e=>{const[t,a]=Object(n.useState)(e.css),{size:r,name:o,setSize:s,setName:i,setWorkpadCSS:c,variables:l,setWorkpadVariables:d}=e,u=[{name:"1080p",size:{height:1080,width:1920}},{name:"720p",size:{height:720,width:1280}},{name:"A4",size:{height:842,width:590}},{name:$o(),size:{height:792,width:612}}];return Object(Vt.jsx)("div",null,Object(Vt.jsx)("div",{className:"canvasLayout__sidebarHeaderWorkpad"},Object(Vt.jsx)(Wt.EuiTitle,{size:"xs"},Object(Vt.jsx)("h4",null,Go()))),Object(Vt.jsx)(Wt.EuiSpacer,{size:"m"}),Object(Vt.jsx)(Wt.EuiFormRow,{label:Bo(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiFieldText,{compressed:!0,value:o,onChange:e=>i(e.target.value)})),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiFormRow,{label:Uo(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiFieldNumber,{compressed:!0,onChange:e=>s({width:Number(e.target.value),height:r.height}),value:r.width}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFormRow,{display:"rowCompressed",hasEmptyLabelSpace:!0},Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:Lo()},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"merge",color:"text",onClick:()=>s({width:r.height,height:r.width}),"aria-label":Fo()})))),Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiFormRow,{label:Ho(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiFieldNumber,{compressed:!0,onChange:e=>s({height:Number(e.target.value),width:r.width}),value:r.height})))),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)("div",null,u.map(((e,t)=>Object(Vt.jsx)(Wt.EuiBadge,{key:`page-size-badge-${t}`,color:"hollow",onClick:()=>s(e.size),"aria-label":Wo(e.name),onClickAriaLabel:Vo(e.name)},e.name)))),Object(Vt.jsx)(Wt.EuiSpacer,{size:"m"}),Object(Vt.jsx)(Do,{variables:l,setVariables:d}),Object(Vt.jsx)("div",{className:"canvasSidebar__expandable"},Object(Vt.jsx)(Wt.EuiAccordion,{id:"accordion-global-css",className:"canvasSidebar__accordion",style:{marginBottom:0},buttonContent:Object(Vt.jsx)(Wt.EuiToolTip,{content:zo(),position:"left",className:"canvasArg__tooltip"},Object(Vt.jsx)("span",null,Ro()))},Object(Vt.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(Vt.jsx)(Wt.EuiTextArea,{"aria-label":zo(),value:t,compressed:!0,onChange:e=>a(e.target.value),rows:10}),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiButton,{size:"s",onClick:()=>c(t||oa.r)},Io()),Object(Vt.jsx)(Wt.EuiSpacer,{size:"xs"})))))})),Xo=({children:e})=>Object(Vt.jsx)("div",{className:"canvasSidebar__panel"},e),Yo=()=>Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(Xo,null,Object(Vt.jsx)(qo,null),Object(Vt.jsx)(Or,null)),Object(Vt.jsx)(Xo,null,Object(Vt.jsx)(Gr,null)));var Zo=a(101),Jo=a.n(Zo);const Qo=({render:e,style:t})=>{const a=Object(n.useCallback)((t=>{null!==t&&e(t)}),[e]);return Object(Vt.jsx)("div",{className:"render_to_dom",ref:a,style:t})};class base_form_BaseForm{constructor(e){if(g()(this,"name",void 0),g()(this,"displayName",void 0),g()(this,"help",void 0),!e.name)throw new Error("Expression specs require a name property");this.name=e.name,this.displayName=e.displayName||this.name,this.help=e.help||""}}var es=a(80);const ts=()=>Object(Vt.jsx)("div",null,Object(Vt.jsx)("p",null,"This datasource has no interface. Use the expression editor to make changes.")),as=e=>{const t=Object(n.useRef)(),{spec:a,datasourceProps:r,handlers:o}=e,s=Object(n.useCallback)((()=>{const{template:e}=a;t.current&&e(t.current,r,o)}),[r,o,a]);return Object(n.useEffect)((()=>{s()}),[s,e]),Jo()((()=>()=>{o.destroy()})),Object(Vt.jsx)(Qo,{render:e=>{t.current=e,s()}})};class datasource_Datasource extends base_form_BaseForm{constructor(e){var t;super(e),g()(this,"template",void 0),g()(this,"image",void 0),g()(this,"requiresContext",void 0),this.template=null!==(t=e.template)&&void 0!==t?t:ts,this.image=e.image,this.requiresContext=e.requiresContext}render(e){const t=new es.ExpressionFormHandlers;return Object(Vt.jsx)(as,{spec:this,handlers:t,datasourceProps:e})}}class datasource_registry_DatasourceRegistry extends F.Registry{wrapper(e){return new datasource_Datasource(e)}}const ns=new datasource_registry_DatasourceRegistry;var rs=a(75);const os=({onValueAdd:e=(()=>{}),displayName:t,help:a})=>Object(Vt.jsx)("button",{className:"canvasArg__add",onClick:e},Object(Vt.jsx)(Wt.EuiDescriptionList,{compressed:!0},Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,t),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,Object(Vt.jsx)("small",null,a)))),ss=()=>c.i18n.translate("xpack.canvas.argAddPopover.addAriaLabel",{defaultMessage:"Add argument"}),is=({options:e})=>Object(Vt.jsx)(rs.a,{id:"arg-add-popover",panelClassName:"canvasArg__addPopover",panelPaddingSize:"none",button:e=>Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"plusInCircle","aria-label":ss(),onClick:e,className:"canvasArg__addArg"})},(({closePopover:t})=>e.map((e=>{var a,n;return Object(Vt.jsx)(os,{key:`${e.arg.name}-add`,displayName:null!==(a=e.arg.displayName)&&void 0!==a?a:"",help:null!==(n=e.arg.help)&&void 0!==n?n:"",onValueAdd:()=>{e.onValueAdd(),t()}})})))),cs=({title:e,tip:t,children:a})=>{const n=Object(Vt.jsx)(Wt.EuiTitle,{size:"xxxs",className:"canvasSidebar__panelTitleHeading"},Object(Vt.jsx)("h4",null,e));return Object(Vt.jsx)(Wt.EuiFlexGroup,{className:"canvasSidebar__panelTitle",gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},t?Object(Vt.jsx)(Wt.EuiToolTip,{position:"left",content:t},n):n),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},a))};var ls=a(102),ds=a(132);const us=()=>c.i18n.translate("xpack.canvas.argFormArgSimpleForm.removeAriaLabel",{defaultMessage:"Remove"}),ps=()=>c.i18n.translate("xpack.canvas.argFormArgSimpleForm.requiredTooltip",{defaultMessage:"This argument is required, you should specify a value."}),gs=({children:e,required:t,valueMissing:a,onRemove:n})=>Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center",gutterSize:"s",className:"canvasArg__form"},Object(Vt.jsx)(Wt.EuiFlexItem,null,e),a&&Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(ds.b,{position:"left",icon:ds.a.error,content:ps()})),!t&&Object(Vt.jsx)(Wt.EuiToolTip,{position:"top",content:us()},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"subdued",onClick:n,iconType:"cross",iconSize:"s","aria-label":us(),className:"canvasArg__remove"})));var bs=a(90),fs=a.n(bs),ms=a(115);const vs=e=>Object.assign(new ms.a,e),hs=({template:e,argumentProps:t,handlers:a,error:o,errorTemplate:s})=>{const[i,c]=Object(n.useState)(vs(a)),l=fs()(o),d=Object(n.useRef)(),u=Object(n.useCallback)((a=>e&&e(a,t,i)),[e,t,i]),p=Object(n.useCallback)((()=>r.a.createElement(s,t)),[s,t]);return Object(n.useEffect)((()=>{c(vs(a))}),[a]),Object(n.useEffect)((()=>{l!==o&&i.destroy()}),[l,o,i]),Object(n.useEffect)((()=>{o||u(d.current)}),[o,u,d]),o?p():e?Object(Vt.jsx)(Qo,{render:e=>{d.current=e,u(e)}}):null},xs=()=>c.i18n.translate("xpack.canvas.argFormSimpleFailure.failureTooltip",{defaultMessage:"The interface for this argument could not parse the value, so a fallback input is being used"}),ys=()=>Object(Vt.jsx)("div",{className:"canvasArg--error canvasArg--error-simple"},Object(Vt.jsx)(ds.b,{position:"left",icon:ds.a.warning,content:xs()})),_s=()=>c.i18n.translate("xpack.canvas.argFormAdvancedFailure.applyButtonLabel",{defaultMessage:"Apply"}),js=()=>c.i18n.translate("xpack.canvas.argFormAdvancedFailure.resetButtonLabel",{defaultMessage:"Reset"}),ws=()=>c.i18n.translate("xpack.canvas.argFormAdvancedFailure.rowErrorMessage",{defaultMessage:"Invalid Expression"}),Os=e=>{try{return Object(F.fromExpression)(e,"argument"),!0}catch(e){return!1}},ks=e=>{const{onValueChange:t,defaultValue:a,argValue:r,resetErrorState:o,argId:s}=e,[i,c]=Object(n.useState)(Object(F.toExpression)(r,"argument")),[l,d]=Object(n.useState)(Os(i));Object(n.useEffect)((()=>{const e=Object(F.toExpression)(r,"argument");c(e),d(Os(e))}),[r]);return Object(Vt.jsx)("div",null,Object(Vt.jsx)(Wt.EuiFormRow,{display:"rowCompressed",id:s,isInvalid:!l,error:ws()},Object(Vt.jsx)(Wt.EuiTextArea,{id:s,isInvalid:!l,value:i,compressed:!0,onChange:e=>c(e.target.value),rows:3})),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)("div",null,Object(Vt.jsx)(Wt.EuiButton,{disabled:!l,onClick:e=>(e=>{if(e.preventDefault(),o(),l)return t(Object(F.fromExpression)(i.trim(),"argument"))})(e),size:"s",type:"submit"},_s()),a&&a.length&&Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s",color:"danger",onClick:e=>{e.preventDefault(),o(),t(Object(F.fromExpression)(a,"argument"))}},js())),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}))},Es=e=>{const{argId:t,className:a,label:n,help:r,expandable:o,children:s,simpleArg:i,initialIsOpen:c}=e;return Object(Vt.jsx)("div",{className:`canvasArg--header${a&&` ${a}`}`},o?Object(Vt.jsx)(Wt.EuiAccordion,{id:`accordion-${t}`,className:"canvasSidebar__accordion",buttonContent:Object(Vt.jsx)(Wt.EuiToolTip,{content:r,position:"left",className:"canvasArg__tooltip"},Object(Vt.jsx)("span",null,n)),extraAction:i,initialIsOpen:c},Object(Vt.jsx)("div",{className:"canvasSidebar__accordionContent"},s)):Object(Vt.jsx)(Wt.EuiFormRow,{display:"columnCompressed",label:Object(Vt.jsx)(Wt.EuiToolTip,{content:r},Object(Vt.jsx)("span",null,n," ",Object(Vt.jsx)(Wt.EuiIcon,{type:"iInCircle",color:"subdued"}))),id:t},i||s))};var Ms=a(103);const Ss=()=>c.i18n.translate("xpack.canvas.argFormPendingArgValue.loadingMessage",{defaultMessage:"Loading"});class pending_arg_value_PendingArgValue extends r.a.PureComponent{componentDidMount(){const{setResolvedArgValue:e,templateProps:t}=this.props,{argResolver:a,argValue:n}=t;null==n?e(null):a(n).then((t=>e(null!=t?t:null))).catch((()=>e(null)))}render(){const{label:e,argTypeInstance:t}=this.props;return Object(Vt.jsx)("div",{className:"canvasArg"},Object(Vt.jsx)(Es,{className:"resolve-pending",label:e,help:t.help,expandable:!1},Object(Vt.jsx)("div",{className:"canvasArg--pending"},Object(Vt.jsx)(Ms.a,{animated:!0,text:Ss()}))))}}const Cs=e=>{const{argId:t,argTypeInstance:a,templateProps:r,valueMissing:o,label:s,setLabel:i,onValueRemove:c,workpad:l,assets:d,renderError:u,setRenderError:p,resolvedArgValue:g}=e,b=Object(n.useRef)();return Object(n.useEffect)((()=>(b.current=!0,()=>{b.current=!1})),[]),((e,t)=>{const{argType:a}=e;return!!a.resolveArgValue&&void 0===t})(a,g)?Object(Vt.jsx)(pending_arg_value_PendingArgValue,e):Object(Vt.jsx)(ls.a,null,(({error:e,resetErrorState:n})=>{const{template:f,simpleTemplate:m}=a.argType,v=Boolean(e)||u,h={...r,resolvedArgValue:g,defaultValue:a.default,renderError:()=>{Promise.resolve().then((()=>{b.current&&p(!0)}))},error:v,setLabel:e=>b.current&&i(e),resetErrorState:()=>{n(),b.current&&p(!1)},label:s,workpad:l,argId:t,assets:d},x=Boolean(v||f),y=Object(Vt.jsx)(gs,{required:a.required,valueMissing:o,onRemove:c},Object(Vt.jsx)(hs,{template:m,errorTemplate:ys,error:v,argumentProps:h})),_=Object(Vt.jsx)("div",{className:"canvasArg--controls"},Object(Vt.jsx)(hs,{template:f,errorTemplate:ks,error:v,argumentProps:h}));return Object(Vt.jsx)("div",{className:`canvasArg ${x?"canvasSidebar__expandable":null}`},Object(Vt.jsx)(Es,{className:"resolved",argId:t,label:s,help:a.help,expandable:x,simpleArg:y,initialIsOpen:!m},_))}))},Ps=e=>{const{argTypeInstance:t,label:a,templateProps:r}=e,[o,s]=Object(n.useState)(((e,t)=>e||t.displayName||t.name)(a,t)),[i,c]=Object(n.useState)(null),[d,u]=Object(n.useState)(!1),p=Object(l.useSelector)(q),g=Object(l.useSelector)(B);return Object(n.useEffect)((()=>{u(!1),c()}),[null==r?void 0:r.argValue]),Object(Vt.jsx)(Cs,zt()({},e,{workpad:p,assets:g,label:o,setLabel:s,resolvedArgValue:i,setResolvedArgValue:c,renderError:d,setRenderError:u}))};class arg_type_ArgType extends base_form_BaseForm{constructor(e){super(e),g()(this,"simpleTemplate",void 0),g()(this,"template",void 0),g()(this,"default",void 0),g()(this,"resolveArgValue",void 0),this.simpleTemplate=e.simpleTemplate,this.template=e.template,this.default=e.default,this.resolveArgValue=Boolean(e.resolveArgValue)}}class arg_type_registry_ArgTypeRegistry extends F.Registry{wrapper(e){return new arg_type_ArgType(e)}}const As=new arg_type_registry_ArgTypeRegistry;class arg_Arg{constructor(e){g()(this,"argType",void 0),g()(this,"multi",void 0),g()(this,"required",void 0),g()(this,"types",void 0),g()(this,"default",void 0),g()(this,"resolve",void 0),g()(this,"options",void 0),g()(this,"name",""),g()(this,"displayName",void 0),g()(this,"help",void 0);const t=As.get(e.argType);if(!t)throw new Error(`Invalid arg type: ${e.argType}`);if(!e.name)throw new Error("Args must have a name property");const a={multi:!1,required:!1,types:[],default:null!=t.default?t.default:null,options:{},resolve:()=>({})},{name:n,displayName:r,help:o,multi:s,types:i,options:c}=e;Object(d.merge)(this,a,t,{argType:t,name:n,displayName:r,help:o,multi:s,types:i,default:e.default,resolve:e.resolve,required:e.required,options:c})}render(e){var t;const{onValueChange:a,onValueRemove:r,argValue:o,key:s,label:i,...c}=e,l={...c,...null===(t=this.resolve)||void 0===t?void 0:t.call(this,c),onValueChange:a,argValue:o,typeInstance:this},d={key:s,argTypeInstance:this,valueMissing:this.required&&null==o,label:i,onValueChange:a,onValueRemove:r,templateProps:l,argId:s,options:this.options};return Object(n.createElement)(Ps,d)}}class function_form_FunctionForm extends base_form_BaseForm{constructor(e){super({...e}),g()(this,"args",void 0),g()(this,"resolve",void 0),this.args=e.args||[],this.resolve=e.resolve||(()=>({}))}renderArg(e,t){const{onValueRemove:a,onValueChange:n,...r}=e,{arg:o,argValues:s,skipRender:i,label:c}=t,{argType:l,expressionIndex:d}=r;if(!o||i)return null;const u=(e,t)=>o.render({key:`${l}-${d}-${o.name}-${t}`,...r,label:c,valueIndex:t,onValueChange:n(o.name,t),onValueRemove:a(o.name,t),argValue:null!=e?e:null});return!s&&o.required?u(null,0):s&&s.map(u)}getAddableArg(e,t){const{onValueAdd:a}=e,{arg:n,argValues:r,skipRender:o}=t;if(!n||n.required||o)return null;if(r&&!n.multi)return null;const s=null==n.default?null:Object(F.fromExpression)(n.default,"argument");return{arg:n,onValueAdd:a(n.name,s)}}resolveArg(...e){return{}}render(e){e||(e={args:null,argTypeDef:void 0});const{args:t,argTypeDef:a}=e,n=this.args.map((e=>new arg_Arg(e)));if(null===t||!Object(d.isPlainObject)(t))throw new Error(`Form "${this.name}" expects "args" object`);const r=Object(d.uniq)(n.map((e=>e.name)).concat(Object.keys(t))).map((e=>{var a;const r=n.find((t=>t.name===e)),o=r&&r.multi;return{arg:r,argValues:t[e]&&!o?[null!==(a=Object(d.last)(t[e]))&&void 0!==a?a:null]:t[e]}})),o={...e,...this.resolve(e),typeInstance:this};try{const e=r.map((e=>({...e,...this.resolveArg(e,o)}))),t=Object(d.compact)(e.map((e=>this.renderArg(o,e)))),n=Object(d.compact)(e.map((e=>this.getAddableArg(o,e))));return n.length||t.length?Object(Vt.jsx)(Xo,null,Object(Vt.jsx)(cs,{title:null==a?void 0:a.displayName,tip:null==a?void 0:a.help},0===n.length?null:Object(Vt.jsx)(is,{options:n})),t):null}catch(e){return Object(Vt.jsx)(Wt.EuiCallOut,{color:"danger",iconType:"cross",title:"Expression rendering error"},Object(Vt.jsx)("p",null,e.message))}}}class transform_Transform extends function_form_FunctionForm{constructor(e){super(e),g()(this,"requiresContext",void 0);const{requiresContext:t}=e;Object(d.merge)(this,{requiresContext:!0},{requiresContext:t})}}class transform_registry_TransformRegistry extends F.Registry{wrapper(e){return new transform_Transform(e)}}const Ts=new transform_registry_TransformRegistry,Ns="no next expression",Ds="missing model args";class model_Model extends function_form_FunctionForm{constructor(e){super(e),g()(this,"requiresContext",void 0);const{requiresContext:t}=e;Object(d.merge)(this,{requiresContext:!0},{requiresContext:t})}resolveArg(e,t){var a,n;const{nextExpressionType:r}=t,o=(s=r)?null!=s&&s.modelArgs&&(null==s?void 0:s.modelArgs.length)>0?null==s?void 0:s.modelArgs:Ds:Ns;var s;if(o===Ns||o===Ds)return{skipRender:!1};const i=null==e||null===(a=e.arg)||void 0===a?void 0:a.name,c="string"!=typeof o&&o.find((e=>Array.isArray(e)?e[0]===i:e===i));return{label:Array.isArray(c)?null===(n=c[1])||void 0===n?void 0:n.label:null,skipRender:!c}}}class model_registry_ModelRegistry extends F.Registry{wrapper(e){return new model_Model(e)}}const Is=new model_registry_ModelRegistry;class view_View extends function_form_FunctionForm{constructor(e){super(e),g()(this,"modelArgs",[]),g()(this,"requiresContext",void 0);const{help:t,modelArgs:a,requiresContext:n}=e,r={help:`Element: ${e.name}`,requiresContext:!0};if(Object(d.merge)(this,r,{help:t,modelArgs:a||[],requiresContext:n}),!Array.isArray(this.modelArgs))throw new Error(`${this.name} element is invalid, modelArgs must be an array`)}}class view_registry_ViewRegistry extends F.Registry{wrapper(e){return new view_View(e)}}const Fs=new view_registry_ViewRegistry,Ls=()=>c.i18n.translate("xpack.canvas.datasourceNoDatasource.panelDescription",{defaultMessage:"This element does not have an attached data source. This is usually because the element is an image or other static asset. If that's not the case you might want to check your expression to make sure it is not malformed."}),Rs=()=>c.i18n.translate("xpack.canvas.datasourceNoDatasource.panelTitle",{defaultMessage:"No data source present"}),zs=()=>Object(Vt.jsx)("div",{className:"canvasDataSource__section"},Object(Vt.jsx)(Wt.EuiCallOut,{title:Rs(),iconType:"iInCircle"},Object(Vt.jsx)("p",null,Ls())));var Bs=a(91);const Hs=({onSelect:e,datasources:t,current:a})=>Object(Vt.jsx)("div",{className:"canvasDataSource__list"},t.map((t=>Object(Vt.jsx)(Wt.EuiCard,{key:t.name,title:t.displayName,titleElement:"h5",titleSize:"xs",icon:Object(Vt.jsx)(Wt.EuiIcon,{type:t.image,size:"l"}),description:t.help,layout:"horizontal",className:"canvasDataSource__card",selectable:{isSelected:t.name===a,onClick:()=>e(t.name)}}))));var Ws=a(29),Vs=a(202);const Us=Object(Lt.withSuspense)(Ws.LazyErrorComponent),Gs=()=>c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptyFirstLineDescription",{defaultMessage:"We couldn't find any documents matching your search criteria."}),$s=()=>c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptySecondLineDescription",{defaultMessage:"Check your datasource settings and try again."}),Ks=()=>c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptyTitle",{defaultMessage:"No documents found"}),qs=()=>c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.modalTitle",{defaultMessage:"Datasource preview"}),Xs=()=>c.i18n.translate("xpack.canvas.datasourceDatasourcePreview.saveButtonLabel",{defaultMessage:"Save"}),Ys=({done:e,datatable:t})=>Object(Vt.jsx)(Wt.EuiModal,{onClose:e,maxWidth:"1000px",className:"canvasModal--fixedSize"},Object(Vt.jsx)(Wt.EuiModalHeader,null,Object(Vt.jsx)(Wt.EuiModalHeaderTitle,null,qs())),Object(Vt.jsx)(Wt.EuiModalBody,{className:"canvasDatasourcePreview"},Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)("p",null,Object(Vt.jsx)(i.FormattedMessage,{id:"xpack.canvas.datasourceDatasourcePreview.modalDescription",defaultMessage:"The following data will be available to the selected element upon clicking {saveLabel} in the sidebar.",values:{saveLabel:Object(Vt.jsx)("strong",null,Xs())}}))),Object(Vt.jsx)(Wt.EuiSpacer,null),"error"===t.type?Object(Vt.jsx)(Us,{payload:t}):Object(Vt.jsx)(Wt.EuiPanel,{className:"canvasDatasourcePreview__panel",paddingSize:"none"},t.rows.length>0?Object(Vt.jsx)(Vs.a,{datatable:t,showHeader:!0,paginate:!0}):Object(Vt.jsx)(Wt.EuiEmptyPrompt,{title:Object(Vt.jsx)("h2",null,Ks()),titleSize:"s",body:Object(Vt.jsx)("p",null,Gs(),Object(Vt.jsx)("br",null),$s())})))),Zs=e=>{const[t,a]=Object(n.useState)();return Object(n.useEffect)((()=>{Pe({type:"expression",chain:[e.function]},{}).then(a)}),[e.function,a]),t?Object(Vt.jsx)(Ys,zt()({},e,{datatable:t,setDatatable:a})):Object(Vt.jsx)(Ms.a,e)},Js=()=>c.i18n.translate("xpack.canvas.datasourceDatasourceComponent.expressionArgDescription",{defaultMessage:"The datasource has an argument controlled by an expression. Use the expression editor to modify the datasource."}),Qs=()=>c.i18n.translate("xpack.canvas.datasourceDatasourceComponent.previewButtonLabel",{defaultMessage:"Preview data"}),ei=()=>c.i18n.translate("xpack.canvas.datasourceDatasourceComponent.saveButtonLabel",{defaultMessage:"Save"});class datasource_component_DatasourceComponent extends n.PureComponent{constructor(...e){super(...e),g()(this,"state",{defaultIndex:""}),g()(this,"getDatasourceFunctionNode",((e,t)=>({arguments:t,function:e,type:"function"}))),g()(this,"setSelectedDatasource",(e=>{const{datasource:t,resetArgs:a,updateArgs:n,selectDatasource:r,datasources:o,setSelecting:s}=this.props;t.name===e?a&&a():n&&n({}),r&&r(o.find((t=>t.name===e))),s(!1)})),g()(this,"save",(()=>{const{stateDatasource:e,stateArgs:t,setDatasourceAst:a}=this.props,n=this.getDatasourceFunctionNode(e.name,t);a&&a(n)}))}componentDidMount(){Object(Bs.a)().then((e=>this.setState({defaultIndex:e})))}componentDidUpdate(e){const{args:t,resetArgs:a,datasource:n,selectDatasource:r}=this.props;Object(d.isEqual)(e.args,t)||a(),Object(d.isEqual)(e.datasource,n)||r(n)}render(){const{datasources:e,datasourceDef:t,stateDatasource:a,stateArgs:o,updateArgs:s,selecting:i,setSelecting:c,previewing:l,setPreviewing:d,isInvalid:u,setInvalid:p,renderError:g}=this.props,{defaultIndex:b}=this.state;if(i)return Object(Vt.jsx)(Hs,{datasources:e,onSelect:this.setSelectedDatasource,current:a.name});const f=l?Object(Vt.jsx)(Zs,{show:l,done:()=>d(!1),function:this.getDatasourceFunctionNode(a.name,o)}):null,m=Object.values(o).some((e=>e&&"object"==typeof e[0]));return Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)("div",{className:"canvasDataSource__section"},Object(Vt.jsx)(Wt.EuiButtonEmpty,{iconSide:"right",iconType:"arrowRight",onClick:()=>c(!i),className:"canvasDataSource__triggerButton",flush:"left",size:"s"},Object(Vt.jsx)(Wt.EuiIcon,{type:a.image,className:"canvasDataSource__triggerButtonIcon"}),a.displayName),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),m?Object(Vt.jsx)(Wt.EuiCallOut,{color:"warning"},Object(Vt.jsx)("p",null,Js())):Object(Vt.jsx)(r.a.Fragment,null,a.render({args:o,updateArgs:s,datasourceDef:t,isInvalid:u,setInvalid:p,defaultIndex:b,renderError:g}),Object(Vt.jsx)(Wt.EuiHorizontalRule,{margin:"m"}),Object(Vt.jsx)(Wt.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s",onClick:()=>d(!0)},Qs())),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButton,{disabled:u,size:"s",onClick:this.save,fill:!0,color:"secondary"},ei()))))),f)}}const ti=e=>{const{datasource:t,stateDatasource:a}=e;return t&&a?Object(Vt.jsx)(datasource_component_DatasourceComponent,e):Object(Vt.jsx)(zs,e)},ai=Object(l.connect)((e=>({element:ge(e),pageId:Z(e),functionDefinitions:Object(Bt.c)(e)})),(e=>({dispatchArgumentAtIndex:t=>a=>e(ht({...t,arg:a})),dispatchAstAtIndex:({index:t,element:a,pageId:n})=>r=>{e(st(a.id)),e(vt(t,r,a,n))}})),((e,t,a)=>{const{element:n,pageId:r,functionDefinitions:o}=e,{dispatchArgumentAtIndex:s,dispatchAstAtIndex:i}=t,c=Object(d.get)(n,"ast.chain",[]).map(((e,t)=>{if("function"!==e.type)return;const a=e.arguments,n=ns.get(e.function);if(!n)return;var r;return{datasource:n,datasourceDef:(r=n.name,o.find((e=>e.name===r&&"datatable"===e.type))),args:a,expressionIndex:t}})).filter(Boolean)[0];return{...a,...e,...t,...c,datasources:ns.toArray(),setDatasourceAst:i({pageId:r,element:n,index:c&&c.expressionIndex}),setDatasourceArgs:s({pageId:r,element:n,index:c&&c.expressionIndex})}}))((e=>{const{args:t,datasource:a}=e,[r,o]=Object(n.useState)(t),[s,i]=Object(n.useState)(!1),[c,l]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(a),b=Object(n.useCallback)((()=>{o(t)}),[o,t]);return Object(Vt.jsx)(ti,zt()({},e,{stateArgs:r,updateArgs:o,selecting:s,setSelecting:i,previewing:c,setPreviewing:l,isInvalid:d,setInvalid:u,stateDatasource:p,selectDatasource:g,resetArgs:b}))}));ai.propTypes={done:f.PropTypes.func};const ni=["view","model","transform","datasource"];function ri(e,t){const a=ni.filter((e=>null==t||e===t)).reduce(((t,a)=>{let n;switch(a){case"view":return n=Fs.get(e),n?t.concat(n):t;case"model":return n=Is.get(e),n?t.concat(n):t;case"transform":return n=Ts.get(e),n?t.concat(n):t;default:return t}}),[]);if(a.length>1)throw new Error(`Found multiple expressions with name "${e}"`);return a[0]||null}const oi=Object(D.createAction)("createAsset",((e,t,a)=>({type:e,value:t,id:a}))),si=Object(D.createAction)("setAssetContent",((e,t)=>({id:e,value:t}))),ii=Object(D.createAction)("removeAsset"),ci=Object(D.createAction)("setAssets"),li=Object(D.createAction)("resetAssets"),di=(e,t,a)=>Object.keys(a).find((n=>a[n].type===e&&a[n].value===t)),ui=e=>{const t={name:e.name,argResolver:e.argResolver,args:e.args,argType:e.argType,argTypeDef:e.argTypeDef,filterGroups:e.filterGroups,context:e.context,expressionIndex:e.expressionIndex,expressionType:e.expressionType,nextArgType:e.nextArgType,nextExpressionType:e.nextExpressionType,onAssetAdd:e.onAssetAdd,onValueAdd:e.onValueAdd,onValueChange:e.onValueChange,onValueRemove:e.onValueRemove,updateContext:e.updateContext};return Object(Vt.jsx)("div",{className:"canvasFunctionForm"},e.expressionType.render(t))},pi=e=>c.i18n.translate("xpack.canvas.functionForm.functionUnknown.unknownArgumentTypeError",{defaultMessage:'Unknown expression type "{expressionType}"',values:{expressionType:e}}),gi=({argType:e})=>Object(Vt.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--unknown-expression"},pi(e)),bi=e=>{const{contextExpression:t,expressionType:a,context:r,updateContext:o}=e,s=fs()(t),i=Object(n.useCallback)(((e=!1)=>{(e||null==r&&a.requiresContext)&&o()}),[r,a.requiresContext,o]);return Object(n.useEffect)((()=>{const e=a.requiresContext&&s!==t;i(e)}),[t,a,i,s]),Object(Vt.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--loading"},Object(Vt.jsx)(Ms.a,null))},fi=(e="")=>c.i18n.translate("xpack.canvas.functionForm.contextError",{defaultMessage:"ERROR: {errorMessage}",values:{errorMessage:e}}),mi=({context:e})=>Object(Vt.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--error"},fi(e.error));function vi(e,t,a){const n=!a||a.state===e;return t&&t.requiresContext&&n}const hi=e=>{const{expressionType:t,context:a}=e;return t?vi("pending",t,a)?Object(Vt.jsx)(bi,{context:e.context,expressionType:e.expressionType,updateContext:e.updateContext}):vi("error",t,a)?Object(Vt.jsx)(mi,{context:null!=a?a:{state:"error",error:"Error occured",value:t}}):Object(Vt.jsx)(ui,e):Object(Vt.jsx)(gi,{argType:e.argType})},xi=e=>{const{expressionIndex:t,argType:a,nextArgType:r}=e,o=Object(l.useDispatch)(),s=Object(l.useSelector)((e=>ye(e,t))),i=Object(l.useSelector)((e=>ge(e))),c=Object(l.useSelector)((e=>Z(e))),d=Object(l.useSelector)((e=>B(e))),u=Object(l.useSelector)((e=>de(e))),p=Object(n.useCallback)(((e,a)=>()=>{o(xt({index:t,element:i,pageId:c,argName:e,value:a}))}),[o,i,t,c]),g=Object(n.useCallback)((()=>o(ct(t,i))),[o,i,t]),b=Object(n.useCallback)(((e,a)=>n=>{o(ht({index:t,element:i,pageId:c,argName:e,value:n,valueIndex:a}))}),[o,i,t,c]),f=Object(n.useCallback)(((e,a)=>()=>{o(yt({index:t,element:i,pageId:c,argName:e,argIndex:a}))}),[o,i,t,c]),m=Object(n.useCallback)(((e,t)=>{const a=Object(la.a)("asset");return o(oi(e,t,a)),a}),[o]),v=Object(n.useCallback)(((e,t)=>{const a=di(e,t,d);return a||m(e,t)}),[d,m]);return Object(Vt.jsx)(hi,zt()({},e,{context:s,filterGroups:u,expressionType:ri(a),nextExpressionType:r?ri(r):void 0,onValueAdd:p,updateContext:g,onValueChange:b,onValueRemove:f,onAssetAdd:v}))};const yi=Object(ha.withProps)((e=>{const t=e.element,a=Object(d.get)(t,"ast.chain",[]);return{functionFormItems:a.reduce(((e,t,n)=>{const r=(o=t.function,Is.get(o)||Fs.get(o)||Ts.get(o));var o;const s=(i=e.context,Array.isArray(i)&&i.length?{type:"expression",chain:i}:null);var i;const c=a[n+1]||null;if(r){const a={args:t.arguments,argType:t.function,argTypeDef:r,argResolver:e=>Pe(e,s),contextExpression:(l=s,null!=l&&"expression"===l.type?Object(F.toExpression)(l):l),expressionIndex:n,nextArgType:c&&c.function};e.mapped.push(a)}var l;return e.context=e.context.concat(t),e}),{mapped:[],context:[]}).mapped}})),_i=Object(ha.compose)(yi)((({functionFormItems:e})=>{const t=e.map((e=>Object(Vt.jsx)(xi,zt()({},e,{key:`${e.argType}-${e.expressionIndex}`}))));return Object(Vt.jsx)("div",null,t)})),ji=()=>c.i18n.translate("xpack.canvas.elementSettings.dataTabLabel",{defaultMessage:"Data",description:"This tab contains the settings for the data (i.e. Elasticsearch query) used as the source for a Canvas element"}),wi=()=>c.i18n.translate("xpack.canvas.elementSettings.displayTabLabel",{defaultMessage:"Display",description:"This tab contains the settings for how data is displayed in a Canvas element"}),Oi=({element:e})=>{const t=[{id:"edit",name:wi(),content:Object(Vt.jsx)("div",{className:"canvasSidebar__pop"},Object(Vt.jsx)("div",{className:"canvasSidebar--args"},Object(Vt.jsx)(_i,{element:e})))},{id:"data",name:ji(),content:Object(Vt.jsx)("div",{className:"canvasSidebar__pop"},Object(Vt.jsx)(ai,null))}];return Object(Vt.jsx)(Wt.EuiTabbedContent,{tabs:t,initialSelectedTab:t[0],size:"s"})},ki=Object(l.connect)(((e,{selectedElementId:t})=>({element:ve(e,t,Z(e))})))((e=>e.element?Object(Vt.jsx)(Oi,{element:e.element}):null)),Ei=()=>c.i18n.translate("xpack.canvas.sidebarContent.groupedElementSidebarTitle",{defaultMessage:"Grouped element",description:'The title displayed when a grouped element is selected. "elements" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad. These elements can be grouped into a larger "grouped element" that contains multiple individual elements.'}),Mi=()=>c.i18n.translate("xpack.canvas.sidebarContent.multiElementSidebarTitle",{defaultMessage:"Multiple elements",description:'The title displayed when multiple elements are selected. "elements" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad.'}),Si=()=>c.i18n.translate("xpack.canvas.sidebarContent.singleElementSidebarTitle",{defaultMessage:"Selected element",description:'The title displayed when a single element are selected. "element" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad.'}),Ci=()=>Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(pr,{title:Mi()}),Object(Vt.jsx)(Wt.EuiSpacer,null),Object(Vt.jsx)(fr,null)),Pi=()=>Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(pr,{title:Ei()}),Object(Vt.jsx)(Wt.EuiSpacer,null),Object(Vt.jsx)(hr,null)),Ai=({selectedElementId:e})=>Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(pr,{title:Si(),showLayerControls:!0}),Object(Vt.jsx)(ki,{selectedElementId:e})),Ti=({selectedToplevelNodes:e,selectedElementId:t})=>e.length>1?Object(Vt.jsx)(Ci,null):1===e.length&&e[0].includes("group")?Object(Vt.jsx)(Pi,null):1===e.length?Object(Vt.jsx)(Ai,{selectedElementId:t}):Object(Vt.jsx)(Yo,null),Ni=({commit:e})=>{const t=Object(l.useSelector)((e=>ue(e))),a=Object(l.useSelector)((e=>pe(e)));return Object(Vt.jsx)(Ti,{commit:e,selectedToplevelNodes:t,selectedElementId:a})},Di=({commit:e})=>Object(Vt.jsx)("div",{className:"canvasSidebar"},Object(Vt.jsx)(Ni,{commit:e}));var Ii=a(104),Fi=a.n(Ii),Li=a(127),Ri=a(109);class dom_preview_DomPreview extends n.PureComponent{constructor(...e){super(...e),g()(this,"_container",null),g()(this,"_content",null),g()(this,"_observer",null),g()(this,"_original",null),g()(this,"_updateTimeout",0),g()(this,"update",(()=>{if(!this._content||!this._container)return;const e=document.querySelector(`#${this.props.elementId}`);if(e!==this._original){if(this._observer&&this._observer.disconnect(),this._original=e,!this._original)return clearTimeout(this._updateTimeout),void(this._updateTimeout=window.setTimeout(this.update,30));{const e=Object(d.debounce)(this.update,100);this._observer=new MutationObserver(e);const t={attributes:!0,childList:!0,subtree:!0};this._observer.observe(this._original,t)}}if(!this._original)return;const t=this._original.cloneNode(!0);t.id+="-thumb";const a=window.getComputedStyle(this._original,null),n=parseInt(a.getPropertyValue("width"),10),r=parseInt(a.getPropertyValue("height"),10);let o=0,s=0,i=1;this.props.height?(o=this.props.height,i=o/r,s=n*i):this.props.width&&(s=this.props.width,i=s/n,o=r*i),this._content.firstChild&&this._content.removeChild(this._content.firstChild),this._content.appendChild(t),this._content.style.cssText=`transform: scale(${i}); transform-origin: top left;`,this._container.style.cssText=`width: ${s}px; height: ${o}px;`;const c=this._original.querySelectorAll("canvas"),l=t.querySelectorAll("canvas");c.length>0&&Array.from(c).map(((e,t)=>{const a=l[t].getContext("2d");a&&a.drawImage(e,0,0)}))}))}componentDidMount(){this.update()}componentWillUnmount(){clearTimeout(this._updateTimeout),this._observer&&this._observer.disconnect()}render(){return Object(Vt.jsx)("div",{ref:e=>{this._container=e},className:"dom-preview"},Object(Vt.jsx)("div",{ref:e=>{this._content=e}}))}}const zi=()=>c.i18n.translate("xpack.canvas.pagePreviewPageControls.clonePageAriaLabel",{defaultMessage:"Clone page"}),Bi=()=>c.i18n.translate("xpack.canvas.pagePreviewPageControls.clonePageTooltip",{defaultMessage:"Clone"}),Hi=()=>c.i18n.translate("xpack.canvas.pagePreviewPageControls.deletePageAriaLabel",{defaultMessage:"Delete page"}),Wi=()=>c.i18n.translate("xpack.canvas.pagePreviewPageControls.deletePageTooltip",{defaultMessage:"Delete"}),Vi=({pageId:e,onRemove:t,onDuplicate:a})=>Object(Vt.jsx)(Wt.EuiFlexGroup,{className:"canvasPageManager__controls",gutterSize:"xs",justifyContent:"spaceBetween"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:Bi()},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"copy","aria-label":zi(),onClick:t=>{t.preventDefault(),a(e)}}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:Wi()},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":Hi(),onClick:a=>{a.preventDefault(),t(e)}})))),Ui=({isWriteable:e,page:t,height:a,onDuplicate:n,onRemove:r})=>Object(Vt.jsx)("div",{className:"canvasPageManager__pagePreview",style:{backgroundColor:t.style.background}},Object(Vt.jsx)(dom_preview_DomPreview,{elementId:t.id,height:a}),e&&Object(Vt.jsx)(Vi,{pageId:t.id,onDuplicate:n,onRemove:r})),Gi=e=>{const t=Object(l.useDispatch)(),a=Object(l.useSelector)((e=>({isWriteable:X(e)&&Object(Bt.a)(e)}))),{gotoPage:r}=Object(n.useContext)(Jd),o=Object(n.useCallback)((e=>{t(Sr({id:e,gotoPage:r}))}),[t,r]);return Object(Vt.jsx)(Ui,zt()({},e,{onDuplicate:o,isWriteable:a.isWriteable}))},$i=()=>c.i18n.translate("xpack.canvas.pageManager.addPageTooltip",{defaultMessage:"Add a new page to this workpad"}),Ki=()=>c.i18n.translate("xpack.canvas.pageManager.confirmRemoveTitle",{defaultMessage:"Remove Page"}),qi=()=>c.i18n.translate("xpack.canvas.pageManager.confirmRemoveDescription",{defaultMessage:"Are you sure you want to remove this page?"}),Xi=()=>c.i18n.translate("xpack.canvas.pageManager.removeButtonLabel",{defaultMessage:"Remove"});class page_manager_component_PageManager extends n.Component{constructor(e){super(e),g()(this,"_isMounted",!1),g()(this,"_activePageRef",null),g()(this,"_pageListRef",null),g()(this,"scrollToActivePage",(()=>{if(this._activePageRef&&this._pageListRef){if(!this._pageListRef.scrollTo)return;const e=this._activePageRef.offsetLeft,{left:t,right:a,width:n}=this._activePageRef.getBoundingClientRect(),{left:r,right:o,width:s}=this._pageListRef.getBoundingClientRect();t<r&&this._pageListRef.scrollTo({left:e,behavior:"smooth"}),a>o&&this._pageListRef.scrollTo({left:e-s+n,behavior:"smooth"})}})),g()(this,"onConfirmRemove",(e=>{this._isMounted&&this.setState({removeId:e})})),g()(this,"resetRemove",(()=>this._isMounted&&this.setState({removeId:null}))),g()(this,"doRemove",(()=>{const{onRemovePage:e}=this.props,{removeId:t}=this.state;this.resetRemove(),null!==t&&e(t)})),g()(this,"onDragEnd",(({draggableId:e,source:t,destination:a})=>{if(!a)return;const n=a.index-t.index;this.props.onMovePage(e,n)})),g()(this,"renderPage",((e,t)=>{const{isWriteable:a,selectedPage:n,workpadCSS:r}=this.props,o=t+1;return Object(Vt.jsx)(Wt.EuiDraggable,{key:e.id,draggableId:e.id,index:t,isDragDisabled:!a,className:"canvasPageManager__page "+(e.id===n?"canvasPageManager__page-isActive":"")},Object(Vt.jsx)(Wt.EuiFlexGroup,{gutterSize:"s"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiText,{size:"xs",className:"canvasPageManager__pageNumber"},o)),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Jd.Consumer,null,(({getUrl:t})=>Object(Vt.jsx)(Ri.b,{to:t(o)},Fi.a.it(r,Object(Vt.jsx)("div",null,Object(Vt.jsx)(Gi,{height:100,page:e,onRemove:this.onConfirmRemove})))))))))})),this.state={showTrayPop:!0,removeId:null}}componentDidMount(){this._isMounted=!0,setTimeout((()=>{this.scrollToActivePage(),this._isMounted&&this.setState({showTrayPop:!1})}),1e3)}componentDidUpdate(e){e.selectedPage!==this.props.selectedPage&&setTimeout(this.scrollToActivePage,0)}componentWillUnmount(){this._isMounted=!1}render(){const{pages:e,onAddPage:t,isWriteable:a}=this.props,{showTrayPop:r,removeId:o}=this.state;return Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(Wt.EuiFlexGroup,{gutterSize:"none",className:"canvasPageManager"},Object(Vt.jsx)(Wt.EuiFlexItem,{className:"canvasPageManager__pages"},Object(Vt.jsx)(Wt.EuiDragDropContext,{onDragEnd:this.onDragEnd},Object(Vt.jsx)(Wt.EuiDroppable,{droppableId:"droppable-page-manager",grow:!0,direction:"horizontal"},Object(Vt.jsx)("div",{className:"canvasPageManager__pageList "+(r?"canvasPageManager--trayPop":"")},e.map(this.renderPage))))),a&&Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{anchorClassName:"canvasPageManager__addPageTip",content:$i(),position:"left"},Object(Vt.jsx)("button",{onClick:t,className:"canvasPageManager__addPage kbn-resetFocusState"},Object(Vt.jsx)(Wt.EuiIcon,{color:"ghost",type:"plusInCircle",size:"l"}))))),Object(Vt.jsx)(Li.a,{isOpen:null!==o,title:Ki(),message:qi(),confirmButtonText:Xi(),onConfirm:this.doRemove,onCancel:this.resetRemove}))}}const Yi=({onPreviousPage:e})=>{const t=Object(l.useDispatch)(),a=Object(l.useSelector)((e=>({isWriteable:X(e)&&Object(Bt.a)(e),pages:J(e),selectedPage:Z(e),workpadId:U(e).id,workpadCSS:U(e).css||oa.r}))),{gotoPage:r}=Object(n.useContext)(Jd),o=Object(n.useCallback)((()=>t(Mr({gotoPage:r}))),[t,r]),s=Object(n.useCallback)(((e,a)=>t(Cr(e,a,r))),[t,r]),i=Object(n.useCallback)((e=>t(Pr({id:e,gotoPage:r}))),[t,r]);return Object(Vt.jsx)(page_manager_component_PageManager,zt()({onPreviousPage:e,onAddPage:o,onMovePage:s,onRemovePage:i},a))},Zi=()=>c.i18n.translate("xpack.canvas.expressionElementNotSelected.closeButtonLabel",{defaultMessage:"Close"}),Ji=()=>c.i18n.translate("xpack.canvas.expressionElementNotSelected.selectDescription",{defaultMessage:"Select an element to show expression input"}),Qi=({done:e})=>Object(Vt.jsx)("div",null,Object(Vt.jsx)("div",null,Ji()),e&&Object(Vt.jsx)(Wt.EuiButton,{size:"s",onClick:e}," ",Zi()));var ec=a(42),tc=a(114);const ac="canvas-expression",nc={keywords:[],symbols:/[=|]/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,boolean:["true","false"],null:["null"],tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*=/,"identifier"],[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@null":"keyword","@boolean":"keyword","@default":"identifier"}}],[/(@digits)/,"number"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/@symbols/,"delimiter"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}};var rc=a(55);const oc=e=>c.i18n.translate("xpack.canvas.expressionInput.argReferenceAliasesDetail",{defaultMessage:"{BOLD_MD_TOKEN}Aliases{BOLD_MD_TOKEN}: {aliases}",values:{BOLD_MD_TOKEN:rc.a,aliases:e}}),sc=e=>c.i18n.translate("xpack.canvas.expressionInput.argReferenceDefaultDetail",{defaultMessage:"{BOLD_MD_TOKEN}Default{BOLD_MD_TOKEN}: {defaultVal}",values:{BOLD_MD_TOKEN:rc.a,defaultVal:e}}),ic=e=>c.i18n.translate("xpack.canvas.expressionInput.argReferenceRequiredDetail",{defaultMessage:"{BOLD_MD_TOKEN}Required{BOLD_MD_TOKEN}: {required}",values:{BOLD_MD_TOKEN:rc.a,required:e}}),cc=e=>c.i18n.translate("xpack.canvas.expressionInput.argReferenceTypesDetail",{defaultMessage:"{BOLD_MD_TOKEN}Types{BOLD_MD_TOKEN}: {types}",values:{BOLD_MD_TOKEN:rc.a,types:e}}),lc=e=>c.i18n.translate("xpack.canvas.expressionInput.functionReferenceAccepts",{defaultMessage:"{BOLD_MD_TOKEN}Accepts{BOLD_MD_TOKEN}: {acceptTypes}",values:{BOLD_MD_TOKEN:rc.a,acceptTypes:e}}),dc=e=>c.i18n.translate("xpack.canvas.expressionInput.functionReferenceReturns",{defaultMessage:"{BOLD_MD_TOKEN}Returns{BOLD_MD_TOKEN}: {returnType}",values:{BOLD_MD_TOKEN:rc.a,returnType:e}});function uc(e){const{help:t,type:a,inputTypes:n}=e,r=n?n.join(" | "):"null",o=a||"null";return`${lc(r)} ${dc(o)}\n\n\n${t}`}function pc(e){const{aliases:t,types:a,default:n,required:r,help:o}=e,s=[];null!=n&&s.push(sc(String(n))),t&&t.length&&s.push(oc(t.join(" | ")));const i=a&&a.length?a.join(" | "):"null",c=String(Boolean(r));return`${cc(i)} ${ic(c)}\n  \n\n${s.join(" ")}\n  \n\n${o}`}class expression_input_ExpressionInput extends r.a.Component{constructor(e){super(e),g()(this,"editor",void 0),g()(this,"undoHistory",void 0),g()(this,"redoHistory",void 0),g()(this,"stash",Object(d.debounce)((e=>{this.undoHistory.push(e),this.redoHistory=[]}),500,{leading:!0,trailing:!1})),g()(this,"onKeyDown",(e=>{(e.ctrlKey||e.metaKey)&&("z"===e.key&&(e.preventDefault(),e.shiftKey?this.redo():this.undo()),"y"===e.key&&(e.preventDefault(),this.redo()))})),g()(this,"onChange",(e=>{this.updateState({value:e})})),g()(this,"updateState",(({value:e})=>{this.stash(this.props.value),this.props.onChange(e)})),g()(this,"provideSuggestions",((e,t,a)=>{const n=e.getValue(),r=e.getFullModelRange(),o=e.getValueLengthInRange({startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:r.endLineNumber,endColumn:r.endColumn});let s,i;if("{"===a.triggerCharacter){e.getWordAtPosition(t.delta(0,-3))&&(s=new ec.monaco.Range(t.lineNumber,t.column,t.lineNumber,t.column),i=Object(tc.a)(this.props.functionDefinitions,n.substring(0,n.length-o)+"}",n.length-o))}else{const a=e.getWordUntilPosition(t);s=new ec.monaco.Range(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn),i=Object(tc.a)(this.props.functionDefinitions,n,n.length-o)}if(!i)return{suggestions:[]};return{suggestions:i.map(((e,t)=>{const a=String.fromCharCode(t);return"argument"===e.type?{label:e.argDef.name,kind:ec.monaco.languages.CompletionItemKind.Variable,documentation:{value:pc(e.argDef),isTrusted:!0},insertText:e.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:s,sortText:a}:"value"===e.type?{label:e.text,kind:ec.monaco.languages.CompletionItemKind.Value,insertText:e.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:s,sortText:a}:{label:e.fnDef.name,kind:ec.monaco.languages.CompletionItemKind.Function,documentation:{value:uc(e.fnDef),isTrusted:!0},insertText:e.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:s,sortText:a}}))}})),g()(this,"providerHover",((e,t)=>{const a=e.getValue(),n=e.getWordAtPosition(t);if(!n)return{contents:[]};const r=e.getValueLengthInRange({startLineNumber:0,startColumn:0,endLineNumber:t.lineNumber,endColumn:n.endColumn}),{fnDef:o,argDef:s,argStart:i,argEnd:c}=Object(tc.b)(this.props.functionDefinitions,a,r);if(s&&i&&c){const t=e.getPositionAt(i),a=e.getPositionAt(c),n=new ec.monaco.Range(t.lineNumber,t.column,a.lineNumber,a.column);return{contents:[{value:pc(s),isTrusted:!0}],range:n}}return o?{contents:[{value:uc(o),isTrusted:!0}]}:{contents:[]}})),g()(this,"editorDidMount",(e=>{const t=e.getModel();t&&t.updateOptions({tabSize:2}),this.editor=e})),this.undoHistory=[],this.redoHistory=[],this.editor=null}undo(){if(!this.undoHistory.length)return;const e=this.undoHistory.pop();this.redoHistory.push(this.props.value),this.props.onChange(e)}redo(){if(!this.redoHistory.length)return;const e=this.redoHistory.pop();this.undoHistory.push(this.props.value),this.props.onChange(e)}render(){const{value:e,error:t,isCompact:a}=this.props;return Object(Vt.jsx)("div",{className:"canvasExpressionInput"},Object(Vt.jsx)(Wt.EuiFormRow,{className:"canvasExpressionInput__inner",fullWidth:!0,isInvalid:Boolean(t),error:t},Object(Vt.jsx)("div",{className:"canvasExpressionInput__editor"},Object(Vt.jsx)(u.CodeEditor,{languageId:ac,languageConfiguration:{autoClosingPairs:[{open:"{",close:"}"}]},value:e,onChange:this.onChange,suggestionProvider:{triggerCharacters:[" ","{"],provideCompletionItems:this.provideSuggestions},hoverProvider:{provideHover:this.providerHover},options:{fontSize:a?12:14,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},editorDidMount:this.editorDidMount}))))}}const gc=()=>c.i18n.translate("xpack.canvas.expression.cancelButtonLabel",{defaultMessage:"Cancel"}),bc=()=>c.i18n.translate("xpack.canvas.expression.closeButtonLabel",{defaultMessage:"Close"}),fc=()=>c.i18n.translate("xpack.canvas.expression.learnLinkText",{defaultMessage:"Learn expression syntax"}),mc=()=>c.i18n.translate("xpack.canvas.expression.maximizeButtonLabel",{defaultMessage:"Maximize editor"}),vc=()=>c.i18n.translate("xpack.canvas.expression.minimizeButtonLabel",{defaultMessage:"Minimize Editor"}),hc=()=>c.i18n.translate("xpack.canvas.expression.runButtonLabel",{defaultMessage:"Run"}),xc=()=>c.i18n.translate("xpack.canvas.expression.runTooltip",{defaultMessage:"Run the expression"}),yc=({functionDefinitions:e,formState:t,updateValue:a,setExpression:r,done:o,error:s,isCompact:i,toggleCompactView:c})=>{const l=Object(n.useRef)(null),d=Object(Vt.jsx)(Wt.EuiPanel,{className:"canvasTray__panel canvasTray__panel--holdingExpression canvasExpression--"+(i?"compactSize":"fullSize"),paddingSize:"none"},(u=l,p="RUN",g=()=>{s||r(t.expression)},Object(Vt.jsx)(_.Shortcuts,{name:"EXPRESSION",handler:e=>{u.current&&u.current.editor&&u.current.editor.hasTextFocus()&&e===p&&g()},targetNodeSelector:"body",global:!0,stopPropagation:!0})),Object(Vt.jsx)(expression_input_ExpressionInput,{ref:l,isCompact:i,functionDefinitions:e,error:s||" ",value:t.expression,onChange:a}),Object(Vt.jsx)("div",{className:"canvasExpression__settings"},Object(Vt.jsx)(Wt.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:Object(Vt.jsx)("span",null,xc()," ",Object(Vt.jsx)(or,{namespace:"EXPRESSION",action:"RUN"}))},Object(Vt.jsx)(Wt.EuiButton,{fill:!0,disabled:!!s,onClick:()=>{r(t.expression),i||s||c()},size:"s"},hc()))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s",color:t.dirty?"danger":"primary",onClick:o},t.dirty?gc():bc())))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiLink,{href:"https://www.elastic.co/guide/en/kibana/current/canvas-function-reference.html",target:"_blank"},fc())),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{iconType:"fullScreen",onClick:c,size:"s"},i?mc():vc())))))));var u,p,g;return i?d:Object(Vt.jsx)(Wt.EuiPortal,null,d)},_c=({done:e})=>{const{element:t,pageId:a}=Object(l.useSelector)((e=>({pageId:Z(e),element:ge(e)})));return t?Object(Vt.jsx)(jc,{key:t.id,done:e,element:t,pageId:a}):Object(Vt.jsx)(Qi,{done:e})},jc=({done:e,element:t,pageId:a})=>{const r=Object(y.useExpressionsService)(),o=Object(l.useDispatch)(),[s,i]=Object(n.useState)(!0),c=Object(n.useCallback)((()=>{i(!s)}),[s,i]),d=Object(n.useCallback)((e=>{o(st(t.id)),o(ft(e,t.id,a))}),[o,t,a]),[u,p]=Object(n.useState)({dirty:!1,expression:t.expression}),g=Object(n.useCallback)(((e="")=>{p({expression:e,dirty:!0})}),[p]),b=Object(n.useCallback)((e=>{p({...u,dirty:!1}),d(e)}),[p,d,u]),f=u.expression,m=Object(n.useMemo)((()=>{try{return Object(F.fromExpression)(f),null}catch(e){return e.message}}),[f]);return Object(n.useEffect)((()=>{t.expression===u.expression||u.dirty||p({dirty:!1,expression:t.expression})}),[t,p,u]),Object(Vt.jsx)(yc,{done:e,isCompact:s,functionDefinitions:Object.values(r.getFunctions()),formState:u,setExpression:b,toggleCompactView:c,updateValue:g,error:m})},wc=()=>c.i18n.translate("xpack.canvas.toolbarTray.closeTrayAriaLabel",{defaultMessage:"Close tray"}),Oc=({children:e,done:t})=>Object(Vt.jsx)(r.a.Fragment,null,Object(Vt.jsx)(Wt.EuiFlexGroup,{className:"canvasTray__toggle",justifyContent:"spaceAround"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonIcon,{size:"s",onClick:t,"aria-label":wc(),iconType:"arrowDown"}))),Object(Vt.jsx)("div",{className:"canvasTray"},e)),kc=()=>c.i18n.translate("xpack.canvas.toolbar.editorButtonLabel",{defaultMessage:"Expression editor"}),Ec=()=>c.i18n.translate("xpack.canvas.toolbar.nextPageAriaLabel",{defaultMessage:"Next Page"}),Mc=(e,t)=>c.i18n.translate("xpack.canvas.toolbar.pageButtonLabel",{defaultMessage:"Page {pageNum}{rest}",values:{pageNum:e,rest:t>1?` of ${t}`:""}}),Sc=()=>c.i18n.translate("xpack.canvas.toolbar.previousPageAriaLabel",{defaultMessage:"Previous Page"}),Cc=Object(l.connect)((e=>({workpadName:ee(e),workpadId:U(e).id,totalPages:U(e).pages.length,selectedPageNumber:Y(e)+1,selectedElement:ge(e),isWriteable:X(e)&&Object(Bt.a)(e)})))((({isWriteable:e,selectedElement:t,selectedPageNumber:a,totalPages:r,workpadName:o})=>{const[s,i]=Object(n.useState)(null),{getUrl:c,previousPage:l}=Object(n.useContext)(Jd);Object(n.useEffect)((()=>{e||"expression"!==s||i(null)}),[e,s]);const d=Boolean(t),u=t=>{if(s===t)i(null);else{if(!e&&"expression"===t)return;i(t)}},p={pageManager:Object(Vt.jsx)(Yi,{onPreviousPage:l}),expression:d?Object(Vt.jsx)(_c,{done:()=>i(null)}):null};return Object(Vt.jsx)("div",{className:"canvasToolbar hide-for-sharing"},null!==s&&Object(Vt.jsx)(Oc,{done:()=>i(null)},p[s]),Object(Vt.jsx)("div",{className:"canvasToolbar__container"},Object(Vt.jsx)(Wt.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1,className:"canvasToolbar__home"},o),Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center",gutterSize:"none",className:"canvasToolbar__controls"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Ri.a,{color:"text",to:c(a-1),iconType:"arrowLeft",isDisabled:a<=1,"aria-label":Sc()})),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{color:"text",onClick:()=>u("pageManager")},Mc(a,r))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Ri.a,{color:"text",to:c(a+1),iconType:"arrowRight",isDisabled:a>=r,"aria-label":Ec()})),Object(Vt.jsx)(Wt.EuiFlexItem,null),d&&e&&Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{color:"text",iconType:"editorCodeBlock",onClick:()=>u("expression"),"data-test-subj":"canvasExpressionEditorButton"},kc())))))))}));var Pc=a(322),Ac=a.n(Pc);const Tc={zoomIn:({zoomScale:e,setZoomScale:t})=>()=>{const a=oa.F.find((t=>e<t))||oa.A;t(a)},zoomOut:({zoomScale:e,setZoomScale:t})=>()=>{const a=oa.F.slice().reverse().find((t=>e>t))||oa.B;t(a)},resetZoom:({setZoomScale:e})=>()=>{e(1)}};var Nc=a(43);let Dc;function Ic(e,t){Dc&&Dc("canvas",e,t)}const Fc="updateEmbeddableExpression",Lc=Object(D.createAction)(Fc),Rc=I("fetchEmbeddableRenderable",(({dispatch:e,getState:t},a)=>{const n=t().persistent.workpad.pages.find((e=>void 0!==e.elements.find((e=>e.id===a))));if(n){const t=n.elements.find((e=>e.id===a));e(dt(t))}})),zc=(e=(()=>({done(){},reload(){},update(){},event(){},onDestroy(){},getRenderMode:()=>"view",isSyncColorsEnabled:()=>!1,isInteractive:()=>!0}))())=>({...e,destroy(){},getElementId:()=>"",getFilter:()=>"",onComplete(e){this.done=e},onDestroy(e){this.destroy=e},onEmbeddableDestroyed(){},onEmbeddableInputChange(){},onResize(e){this.resize=e},resize(e){},setFilter(){}}),Bc=e=>{let t,a=!1,n=()=>{};return r=>{Object(d.isEqual)(t,r)||(a=!1,t=r);return{...zc(),event(e){switch(e.name){case"embeddableInputChange":this.onEmbeddableInputChange(e.data);break;case"setFilter":this.setFilter(e.data);break;case"onComplete":this.onComplete(e.data);break;case"embeddableDestroyed":this.onEmbeddableDestroyed();break;case"resize":this.resize(e.data);break;case"onResize":this.onResize(e.data)}},setFilter(t){e(bt(t,r.id,!0))},getFilter:()=>r.filter||"",onComplete(e){n=e},getElementId:()=>r.id,onEmbeddableInputChange(t){e(Lc({elementId:r.id,embeddableExpression:t}))},onEmbeddableDestroyed(){const t=[r.id,"expressionRenderable"];e(Xe({path:t})),e(Rc(r.id))},done(){a||(a=!0,n())}}}},Hc=e=>e?"matrix3d("+e.join(",")+")":"translate3d(0,0,0)",Wc=({children:e,transformMatrix:t,width:a,height:n})=>{const o=r.a.Children.only(e),s=t.map(((e,t)=>t<12?e:Math.round(e))),i={width:a,height:n,marginLeft:-a/2,marginTop:-n/2,position:"absolute",transform:Hc(s)};return Object(Vt.jsx)("div",{className:"canvasPositionable canvasInteractable",style:i},o)},{RenderWithFn:Vc}=Ce.f,Uc={height:"100%",width:"100%"},Gc=({name:e,renderFn:t,reuseNode:a=!1,handlers:r,config:o,width:s,height:i})=>{const{error:c}=Object(y.useNotifyService)(),[l,u]=Object(n.useState)(null),p=Object(n.useRef)(!0),g=Object(n.useRef)(null),b=Object(n.useRef)(r),f=Object(n.useCallback)((()=>{if(!l)return;for(p.current||b.current.destroy();l.firstChild;)l.removeChild(l.firstChild);const e=document.createElement("div");e.style.width="100%",e.style.height="100%",l.appendChild(e),g.current=e,p.current=!0}),[l]);Object(n.useEffect)((()=>b.current.resize({height:i,width:s})),[i,s]),Object(n.useEffect)((()=>()=>{b.current.destroy()}),[]);const m=Object(n.useCallback)((async()=>{Object(d.isEqual)(b.current,r)||(b.current=r),await t(g.current,o,b.current)}),[g,o,t,r]);return Object(n.useEffect)((()=>{l&&(a&&g.current||f(),m().then((()=>{p.current=!1})).catch((t=>{c(t,{title:Vc.getRenderErrorMessage(e)})})))}),[l,e,c,m,f,a]),Object(Vt.jsx)("div",{className:"canvasWorkpad--element_render canvasRenderEl",style:Uc},Object(Vt.jsx)(Qo,{style:Uc,render:e=>{u(e)}}))};class element_share_container_ElementShareContainer extends r.a.PureComponent{constructor(...e){super(...e),g()(this,"state",{renderComplete:!1}),g()(this,"createDoneChecker",(()=>{})),g()(this,"clearDoneChecker",(()=>{clearTimeout(this.timeout)}))}componentDidMount(){const{onComplete:e}=this.props;this.createDoneChecker(),e((()=>{if(this.clearDoneChecker(),!this.sharedItemRef)return;const e=new CustomEvent("renderComplete");this.sharedItemRef.dispatchEvent(e),this.setState({renderComplete:!0})}))}getSnapshotBeforeUpdate(e){return{functionName:e.functionName}}componentDidUpdate(e,t,a){a.functionName!==this.props.functionName&&(this.clearDoneChecker(),this.createDoneChecker())}componentWillUnmount(){this.clearDoneChecker()}render(){const e="embeddable"!==this.props.functionName;return Object(Vt.jsx)("div",{"data-shared-item":e?this.state.renderComplete:void 0,"data-render-complete":e?this.state.renderComplete:void 0,className:this.props.className,ref:e=>this.sharedItemRef=e},this.props.children)}}const $c=({selectElement:e})=>Object(Vt.jsx)("h3",{onClick:e},"Invalid expression"),Kc=({renderableType:e,selectElement:t})=>Object(Vt.jsx)("h3",{onClick:t},"Element not found: ",e),qc=e=>{const{renderable:t,renderFunction:a,width:n,height:r,handlers:o,backgroundColor:s,state:i}=e,{onComplete:c}=o;if(!i||!t)return Object(Vt.jsx)(Ms.a,{backgroundColor:s});if(t&&"render"!==Object(F.getType)(t)&&!a)return Object(Vt.jsx)(Kc,zt()({},e,{renderableType:null==t?void 0:t.as}));if("error"===i||"render"!==Object(F.getType)(t)||!a)return Object(Vt.jsx)($c,e);const l=Object(d.omitBy)(t.containerStyle,d.isNil);return Fi.a.it(t.css,Object(Vt.jsx)("div",{className:"canvas__element canvasElement",style:{...l,width:n,height:r},"data-test-subj":"canvasWorkpadPageElementContent"},Object(Vt.jsx)(element_share_container_ElementShareContainer,{className:"canvasElement__content",onComplete:c,functionName:a.name},Object(Vt.jsx)(Gc,{name:a.name,renderFn:a.render,reuseNode:a.reuseDomNode,config:t.value,css:t.css,width:n,height:r,handlers:o}))))},Xc=e=>{const t=Object(y.useExpressionsService)(),a=Object(l.useSelector)(Z),n=Object(l.useSelector)((e=>{var t;return null===(t=Q(e,a))||void 0===t?void 0:t.style.background}))||"",{renderable:r}=e,o=r?t.getRenderer(r.as):null;return Object(Vt.jsx)(qc,zt()({},e,{renderFunction:o,backgroundColor:n}))};const Yc=Object(ha.compose)(Object(l.connectAdvanced)((function(e){let t={};const a=Bc(e);return(e,n)=>{const{element:r,...o}=n,{transformMatrix:s,width:i,height:c}=r,l=xe(e,r.id,"expressionRenderable"),d={...o,selectedPage:Z(e),state:Object(Oe.b)(l),renderable:Object(Oe.c)(l),createHandlers:a,transformMatrix:s,width:i,height:c,element:{id:r.id,filter:r.filter,expression:r.expression}};return ra()(t,d)||(t=d),t}})),Object(ha.withPropsOnChange)(((e,t)=>!ra()(e.element,t.element)),(e=>{const{element:t,createHandlers:a}=e;return{handlers:a(t)}})),Object(ha.mapProps)((e=>{const{element:t,createHandlers:a,selectedPage:n,...r}=e;return r})))((e=>{const{renderable:t,transformMatrix:a,width:n,height:r,state:o,handlers:s}=e;return Object(Vt.jsx)(Wc,{transformMatrix:a,width:n,height:r},Object(Vt.jsx)(Xc,{renderable:t,state:o,handlers:s,width:n,height:r}))}));Yc.propTypes={element:m.a.shape({id:m.a.string.isRequired,transformMatrix:m.a.arrayOf(m.a.number).isRequired,width:m.a.number.isRequired,height:m.a.number.isRequired,expression:m.a.string,filter:m.a.string}).isRequired};m.a.string.isRequired,m.a.object,m.a.string.isRequired,m.a.object.isRequired,m.a.arrayOf(m.a.shape({id:m.a.string.isRequired,transformMatrix:m.a.arrayOf(m.a.number).isRequired,width:m.a.number.isRequired,height:m.a.number.isRequired,type:m.a.string})).isRequired,m.a.number.isRequired,m.a.number.isRequired,m.a.func,m.a.string,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func.isRequired,m.a.func.isRequired,m.a.func.isRequired,m.a.number.isRequired;class static_workpad_page_StaticWorkpadPage extends n.PureComponent{render(){const{pageId:e,pageStyle:t,className:a,animationStyle:n,elements:r,height:o,width:s}=this.props;return Object(Vt.jsx)("div",{key:e,id:e,"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasStaticPage ${a}`,"data-shared-items-container":!0,style:{...t,...n,height:o,width:s}},r.filter((e=>!Un(e.id))).map((e=>Object(Vt.jsx)(Yc,{key:e.id,element:e}))))}}let Zc=0;const Jc=e=>(...t)=>{let a=NaN,n=null;return r=>a===(a=r.primaryUpdate.payload.uid)?n:n=e(...t.map((e=>e(r))))},Qc=e=>e,el=Jc((e=>e.currentScene))(Qc),tl=Jc((e=>e.primaryUpdate))(Qc),al=Boolean(window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match("Macintosh|iPhone|iPad")),nl=e=>e.primaryUpdate,rl=Jc((e=>e.gestureState))(el),ol=Jc((e=>"cursorPosition"===e.type?e.payload:null))(nl),sl=Jc((e=>"mouseEvent"===e.type?e.payload:null))(nl),il=Jc((({type:e,payload:{altKey:t,metaKey:a,shiftKey:n,ctrlKey:r}})=>"cursorPosition"===e||"mouseEvent"===e?{altKey:t,metaKey:a,shiftKey:n,ctrlKey:r}:{}))(nl),cl=Jc(al?e=>e.metaKey:e=>e.altKey)(il),ll=Jc(al?e=>e.altKey:e=>e.ctrlKey)(il),dl=Jc((e=>e.shiftKey))(il),ul=Jc((({cursor:e},t)=>t||e))(rl,ol),pl=Jc((e=>{if(!e)return{down:!1,up:!1,uid:null};const{event:t,uid:a}=e;return"mouseDown"===t?{down:!0,up:!1,uid:a}:"mouseUp"===t?{down:!1,up:!0,uid:a}:{down:!1,up:!1,uid:null}}))(sl),gl=Jc((({mouseIsDown:e},t)=>t?"mouseDown"===t.event:e))(rl,sl),bl=Jc((e=>e&&("actionEvent"===e.type||"mouseEvent"===e.type&&"mouseUp"===e.payload.event)))(nl),fl=Jc((({mouseButtonState:{buttonState:e,downX:t,downY:a}},n,{x:r,y:o})=>{const s=((e,t,a)=>{switch(e){case"up":return t?"downed":"up";case"downed":return t?a?"dragging":"downed":"up";case"dragging":return t?"dragging":"up"}})(e,n,r!==t||o!==a);return{buttonState:s,downX:"downed"===s?r:t,downY:"downed"===s?o:a}}))(rl,gl,ul),ml=Jc((e=>"downed"===e.buttonState))(fl),vl=Jc((e=>"dragging"===e.buttonState))(fl),hl=Jc((({buttonState:e,downX:t,downY:a},{x:n,y:r})=>({down:"up"!==e,x0:t,y0:a,x1:n,y1:r})))(fl,ul),xl=Jc((e=>"actionEvent"===e.type?e.payload:null))(nl),yl=Jc(((e,t,a)=>({cursor:e,mouseIsDown:t,mouseButtonState:a})))(ul,gl,fl),_l=Jc((e=>e.shapes))(el),jl=Jc((e=>e.configuration))(el),wl=Jc(((e,t,a)=>Ga(t.filter((t=>("annotation"!==t.type||t.interactive)&&(e.intraGroupManipulation||!t.parent||"annotation"===t.type))),a)))(jl,_l,ul),Ol=Jc((e=>e.length?e[0]:null))(wl),kl=Jc((({draggedShape:e,shapes:t},a,n,r)=>n&&t.reduce(((t,a)=>t||e&&a.id===e.id),!1)&&e||n&&r&&a))(el,Ol,gl,ml),El=Jc(((e,t)=>e||t))(kl,Ol),Ml=Jc((e=>e?["relax"]:[]))(cl),Sl=dl,Cl=Jc((({mouseTransformState:e})=>e||rn))(el),Pl=Jc(((e,t,{x0:a,y0:n,x1:r,y1:o})=>{if(!t||isNaN(a)||isNaN(n)||isNaN(r)||isNaN(o))return rn;{const t=r-a,s=o-n;return{deltaX:t,deltaY:s,transform:Ma(t-e.deltaX,s-e.deltaY,0),cumulativeTransform:Ma(t,s,0)}}}))(Cl,vl,hl),Al=Jc((e=>[e].filter((e=>e.transform)).map((({transform:e,cumulativeTransform:t})=>({transform:e,cumulativeTransform:t})))))(Pl),Tl=Jc(((e,t,{x0:a,y0:n,x1:r,y1:o})=>e&&!t&&{x:(a+r)/2,y:(n+o)/2,a:Math.abs(r-a)/2,b:Math.abs(o-n)/2}))(vl,kl,hl),Nl=Jc(((e,t)=>(e.selectedShapes||[]).map((e=>t.find((t=>t.id===e))))))(el,_l),Dl=Jc((e=>e.selectionState))(el),Il=Jc(((e,t)=>{if(!e)return[];const a=Va(e);return t.filter((e=>"annotation"!==e.type&&!e.parent&&a(e.transformMatrix,e.a,e.b)))}))(Tl,_l),Fl=Jc(((e,t,a,n,{up:r,down:o,uid:s},i,c,l)=>{const d=s===e.uid,u=!o;if(a&&(e.shapes=a.slice()),u||d)return{...e,shapes:r&&e.boxHighlightedShapes.length?e.shapes.concat(e.boxHighlightedShapes).filter(((e,t,a)=>a.findIndex((t=>t.id===e.id))===t)):e.shapes,down:o,uid:s,metaHeld:i,boxHighlightedShapes:l};return(t.singleSelect||!c?zn:Bn)(e,t,n,i,s,a,l)}))(Dl,jl,Nl,wl,pl,cl,Sl,Il),Ll=Jc((({uid:e,depthIndex:t,down:a,metaHeld:n,boxHighlightedShapes:r})=>({uid:e,depthIndex:t,down:a,metaHeld:n,boxHighlightedShapes:r})))(Fl),Rl=Jc((e=>e.shapes))(Fl),zl=Jc((e=>e.map(sn)))(Rl),Bl=ll,Hl=Jc(((e,t)=>(t?ln:dn)(e)))(jl,Bl),Wl=Jc(((e,t,a,n,r,o,s)=>[...un(t.map((e=>e.cumulativeTransform)),a),...pn(e,t.map((e=>e.transform)),a,n,r,o),...gn(e,t,a,n,s)]))(jl,Al,Rl,_l,ul,Ml,Hl),Vl=Jc((e=>Wn[e&&e.event]||null))(xl),Ul=Jc((e=>Vn[e&&e.event]||null))(xl),Gl=Jc(((e,t,a,n)=>{if(1!==n.length||"adHocGroup"!==n[0].subtype)return[];const r=n[0],o=a.filter((e=>e.parent===r.id&&"annotation"!==e.type));if(e&&o.length>1){const{controlledAnchor:t,horizontal:a}=e,n=nn(r,[[1/0,1/0],[-1/0,-1/0]]),s=mn(n,t,a);return o.map((e=>{const n=nn(e,[[1/0,1/0],[-1/0,-1/0]]),r=mn(n,t,a),o=s-r;return{cumulativeTransforms:[Ma(a?o:0,a?0:o,0)],shapes:[e.id]}}))}if(t&&o.length>2){const{horizontal:e}=t,{a:a,b:n}=r,s=nn(r,[[1/0,1/0],[-1/0,-1/0]]),i=mn(s,-1,e),c=fn(e),l=o.map((e=>nn(e,[[1/0,1/0],[-1/0,-1/0]]))),d=l.map((t=>mn(t,-1,e))),u=l.map((e=>[e[0][c],e[1][c]])),p=u.map((e=>(e[1]+e[0])/2)),g=u.map((e=>e[1]-e[0])),b=g.reduce(((e,t)=>e+t),0),f=((e?2*a:2*n)-b)/(o.length-1),m=[...Array(o.length)].map(((e,t)=>t)).sort(((e,t)=>p[e]-p[t]));return m.reduce((({cursor:e,deltas:t},a)=>{const n=g[a],r=d[a];return{cursor:e+n+f,deltas:[...t,e-r]}}),{cursor:i,deltas:[]}).deltas.map(((t,a)=>{const n=m[a];return{cumulativeTransforms:[Ma(e?t:0,e?0:t,0)],shapes:[o[n].id]}}))}return[]}))(Vl,Ul,_l,Rl),$l=Jc(((e,t)=>e.concat(t)))(Wl,Gl),Kl=Jc(((e,t)=>{return e.map((a=t,e=>{const t=Te(a.map((t=>t.transforms&&t.transforms.length&&t.shapes.find((t=>t===e.id))&&t.transforms.map(bn(e.localTransformMatrix)))).filter(Ne)),n=Te(a.map((t=>t.sizes&&t.sizes.length&&t.shapes.find((t=>t===e.id))&&t.sizes)).filter(Ne)),r=Te(a.map((t=>t.cumulativeTransforms&&t.cumulativeTransforms.length&&t.shapes.find((t=>t===e.id))&&t.cumulativeTransforms.map(bn(e.localTransformMatrix)))).filter(Ne)),o=Te(a.map((t=>t.cumulativeSizes&&t.cumulativeSizes.length&&t.shapes.find((t=>t===e.id))&&t.cumulativeSizes)).filter(Ne)),s=Pa(e.baselineLocalTransformMatrix||e.localTransformMatrix,...t),i=Pa(...r),c=Ha(...n)||za,l=r.length?Pa(s,i):s,d=Ha(...o),u=(([e,t,a,n,r,o,s,i,c],[l,d,u])=>[e*l+n*d+s*u,t*l+r*d+i*u,a*l+o*d+c*u])(o.length?Ha(c,d):c,e.baseAB?[...e.baseAB,1]:[e.a,e.b,1]),p=!(t.length||n.length||r.length||o.length);return{...e,baselineLocalTransformMatrix:p?null:s,baselineSizeMatrix:p?null:c,localTransformMatrix:p?e.localTransformMatrix:l,a:p?e.a:u[0],b:p?e.b:u[1],baseAB:p?null:e.baseAB||[e.a,e.b]}}));var a}))(_l,$l),ql=Jc(((e,t)=>t&&e.find((e=>e.id===sn(t)))))(_l,kl),Xl=Jc(((e,t,a,n)=>{const r=a?[t.find((e=>e.id===a.id))].filter(Ne):[];return r.length?((e,t,a,n)=>{const r={};let o=0;const s=Za[n.horizontalPosition],i=Ja[n.verticalPosition];for(const c of a){if("annotation"===c.type)continue;const a=e.pageWidth/2+1,l=e.pageHeight/2+1,d=[{a:a,b:l,localTransformMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,a-1,l-1,0,1]}];for(const a of t.concat(d)){if("annotation"===a.type)continue;if(!e.intraGroupManipulation&&a.parent)continue;if(e.intraGroupSnapOnly&&c.parent!==a.parent&&c.parent!==a.id)continue;const l=c.id===a.id?{...c,localTransformMatrix:c.baselineLocalTransformMatrix||c.localTransformMatrix,a:c.baseAB?c.baseAB[0]:c.a,b:c.baseAB?c.baseAB[1]:c.b}:a;for(let a=-1;a<2;a++)for(let d=-1;d<2;d++){if(a&&!d||!a&&d)continue;if(n.subtype===e.resizeHandleName&&!(s===a&&i===d||0===s&&0!==a&&i===d||0===i&&0!==d&&s===a))continue;const u=$a(c.a,c.b,yn(t,c),a,d);for(let n=-1;n<2;n++)for(let s=-1;s<2;s++){if(n&&!s||!n&&s)continue;const i=$a(l.a,l.b,yn(t,l),n,s);for(let t=0;t<2;t++){const n=1-t,s=u[t],p=i[t],g=a+"|"+d+"|"+t,b=s-p,f=Math.abs(b),m=r[g];if(Math.round(f)<=e.guideDistance&&(!m||f<=m.distance)){const a=[u[n],i[n],...m?[m.lowPoint,m.highPoint]:[]],s=Math.min(...a),d=Math.max(...a),v=(s+d)/2,h=v-s;r[g]={id:o++,localTransformMatrix:Ma(t?v:p,t?p:v,e.atopZ),a:t?h:.5,b:t?.5:h,lowPoint:s,highPoint:d,distance:f,signedDistance:b,dimension:t?"vertical":"horizontal",constrained:c.id,constrainer:l.id}}}}}}}return Object.values(r)})(e,t,r,n).map((t=>({...t,id:e.alignmentGuideName+"_"+t.id,type:"annotation",subtype:e.alignmentGuideName,interactive:!1,backgroundColor:"magenta",parent:null}))):[]}))(jl,Kl,ql,kl),Yl=Jc(((e,t,a)=>e?a:t.slice(0,1)))(Tl,wl,Il),Zl=Jc(((e,t,a,n)=>t.filter((e=>e&&"annotation"!==e.type&&-1===a.indexOf(e.id)&&!n)).map(Hn(e.hoverAnnotationName,e.hoverLift))))(jl,Yl,zl,kl),Jl=Jc(((e,t,a,n,r,o,s)=>{const i=t.filter((e=>"annotation"!==e.type)),c=a&&a.subtype;if(c&&-1===[e.resizeHandleName,e.adHocGroupName,e.persistentGroupName].indexOf(c))return i;const l=r,d=-1!==o.indexOf("relax"),u=e.snapConstraint&&!d,p=u&&kn(l,jn),g=u&&kn(l,wn),b=c===e.resizeHandleName?((e,t,a,n,r,o)=>s=>{const i=a&&s.id===a.id,c=e&&e.constrained===s.id,l=t&&t.constrained===s.id,d=c?e.signedDistance:0,u=l?-t.signedDistance:0;if(c||l){const e=n?1:.5,t=Ra(a.localTransformMatrix),i=-Za[r],c=Ja[o],l=Math.sin(t),p=Math.cos(t),g=i*(p*d-l*u),b=c*(l*d+p*u),f=Da(Pa(Ca(t),Ma((1-e)*-d,(1-e)*u,0))),m=[e*g,e*b];return{...s,snapDeltaMatrix:f,snapResizeVector:m}}return i?{...s,snapDeltaMatrix:null,snapResizeVector:null}:Pn(s)})(p,g,n,s,a.horizontalPosition,a.verticalPosition):((e,t,a)=>n=>{const r=e&&e.constrained===n.id,o=t&&t.constrained===n.id,s=r?-e.signedDistance:0,i=o?-t.signedDistance:0;if(r||o){if(!s&&!i)return n;const e=Da(Pa(Ca(Ra(a.localTransformMatrix)),Ma(s,i,0)));return{...n,snapDeltaMatrix:e}}return n.snapDeltaMatrix||n.snapResizeVector?Pn(n):n})(p,g,n);return i.map(b)}))(jl,Kl,kl,ql,Xl,Ml,Bl),Ql=Jc(((e,t)=>e.concat(t.filter((e=>"annotation"===e.type)))))(Jl,Kl),ed=Jc(((e,t,a,n,r)=>a&&a.subtype===e.rotationHandleName?[{id:e.rotationTooltipName+"_"+t.id,type:"annotation",subtype:e.rotationTooltipName,interactive:!1,parent:null,localTransformMatrix:Ma(r.x,r.y,e.tooltipZ),a:0,b:0,text:String(Math.round(Ra(t.transformMatrix)/Math.PI*180))}]:[]))(jl,ql,kl,$l,ul),td=Jc(((e,t)=>{const a=e&&e.event;return t||"group"!==a&&"ungroup"!==a?null:a}))(xl,gl),ad=Jc(((e,t,a)=>{const n=t.filter((t=>t.type===e.groupName&&t.subtype===e.adHocGroupName)),r=(e=>t=>e.find((e=>t=>t.id===e.id)(t)))(a),o=e=>r(e)&&"annotation"!==e.type,s=t.filter(o),i=t.filter(Ie(o));return{selectionOutsideGroup:!a.some((t=>(t=>t.type===e.groupName)(t)||(t=>t.parent&&t.parent.startsWith(e.groupName))(t))),freshSelectedShapes:s,freshNonSelectedShapes:i,preexistingAdHocGroups:n}}))(jl,Ql,Rl),nd=Jc(((e,t,a,n,r)=>{const{selectionOutsideGroup:o,freshSelectedShapes:s,freshNonSelectedShapes:i,preexistingAdHocGroups:c}=r;if("group"===n){const n=a.filter((t=>t.subtype===e.adHocGroupName));return{shapes:t.map((t=>t.subtype===e.adHocGroupName?{...t,subtype:e.persistentGroupName}:t)),selectedShapes:a.filter((t=>t.subtype!==e.adHocGroupName)).concat(n.map((t=>({...t,subtype:e.persistentGroupName}))))}}if("ungroup"===n)return An(a.filter((t=>t.subtype===e.persistentGroupName)),t,Tn(c,s));if(c.length&&o)return An(c,t,Tn(c,s));const l=((e,t)=>{const a=Fe(e.map((e=>e.id)));return t.filter((e=>a[e.id])).map(on(e))})(t,a);if(1===l.length&&"group"===l[0].type)return e.groupResize?{shapes:[...Ln(t.filter((e=>"annotation"!==e.type)),l[0]),...t.filter((e=>"annotation"===e.type))],selectedShapes:a}:Rn(t,a);if(a.length<2)return Rn(t,a);{const a=Nn(e,s),n=((e,t,a)=>{return n=e=>e.id,(r=Te(a.map((a=>e(a)?t.filter((e=>e.parent===a.id)):a)))).filter(((e,t)=>r.findIndex((t=>n(t)===n(e)))===t));var n,r})((t=>t.subtype===e.adHocGroupName),t,s),r=n.map((e=>({...e,parent:a.id,localTransformMatrix:Pa(a.rigTransform,e.transformMatrix)}))),o=t=>t.subtype!==e.adHocGroupName&&!r.find((e=>t.id===e.id)),l=t=>t.parent&&t.parent.startsWith(e.groupName)&&c.find((e=>e.id===t.parent))?{...t,parent:null}:t;return{shapes:r.concat(i.filter(o).map(l)).concat([a]),selectedShapes:[a]}}}))(jl,Ql,Rl,td,ad),rd=Jc((({selectedShapes:e})=>e))(nd),od=Jc((e=>e.map((e=>e.id))))(rd),sd=Jc((e=>e.map(sn)))(rd),id=Jc(((e,{shapes:t})=>{const a=t.filter((t=>t.subtype===e.adHocGroupName));return t.filter((e=>"annotation"!==e.type&&e.parent&&a.find((t=>t.id===e.parent)))).map(Hn(e.getAdHocChildAnnotationName,e.hoverLift))}))(jl,nd),cd=Jc(Cn)(jl,nd),ld=Jc(((e,{shapes:t,selectedShapes:a})=>a.map(((n,r)=>En(e,t,a,n,r))).filter(Ne)))(jl,nd),dd=Jc(((e,t)=>t?[{id:e.dragBoxAnnotationName,type:"annotation",subtype:e.dragBoxAnnotationName,interactive:!1,parent:null,localTransformMatrix:Ma(t.x,t.y,e.dragBoxZ),a:t.a,b:t.b}]:[]))(jl,Tl),ud=Jc((({shapes:e},t,a,n,r,o,s,i)=>{const c=[].concat(t,a,n,r,o,s,i);return e.filter((e=>"annotation"!==e.type)).concat(c)}))(nd,Xl,Zl,ld,cd,ed,id,dd),pd=Jc((e=>e.map((e=>t=>({...t,transformMatrix:_n(e,t),width:2*hn(t),height:2*xn(t)}))(e))))(ud),gd=Jc(((e,t,a)=>{if(!t)return"auto";switch(t.subtype){case e.rotationHandleName:return"crosshair";case e.resizeHandleName:const n=(180*Ra(t.transformMatrix)/Math.PI+360)%360+t.cursorAngle,r=(45*Math.round(n/45)+360)%360;return tn[r];default:return a?"grabbing":"grab"}}))(jl,El,ql),bd=Jc(((e,t,a,n,r,o,s,i,c,l,d)=>({configuration:e,hoveredShape:t,selectedShapes:a,selectedPrimaryShapes:n,shapes:r,gestureEnd:o,draggedShape:s,cursor:i,selectionState:c,mouseTransformState:l,gestureState:d})))(jl,Ol,od,sd,pd,bl,kl,gd,Ll,Pl,yl),fd=Jc(((e,t)=>({primaryUpdate:t,currentScene:e})))(bd,tl),md=({transformMatrix:e,width:t,height:a})=>Object(Vt.jsx)("div",{className:"canvasAlignmentGuide canvasInteractable canvasLayoutAnnotation",style:{background:"magenta",height:a,marginLeft:-t/2,marginTop:-a/2,position:"absolute",transform:Hc(e),width:t}}),vd=({transformMatrix:e,width:t,height:a})=>Object(Vt.jsx)("div",{className:"canvasDragBoxAnnotation canvasLayoutAnnotation",style:{height:a,marginLeft:-t/2,marginTop:-a/2,transform:Hc(e),width:t}}),hd=({transformMatrix:e,width:t,height:a})=>Object(Vt.jsx)("div",{className:"canvasHoverAnnotation canvasLayoutAnnotation",style:{width:t,height:a,marginLeft:-t/2,marginTop:-a/2,transform:Hc(e)}}),xd=({transformMatrix:e,text:t})=>{const a={transform:`${Hc(e)} translate(1em, -1em)`};return Object(Vt.jsx)("div",{className:"tooltipAnnotation canvasLayoutAnnotation",style:a},Object(Vt.jsx)("p",null,t,"°"))},yd=({transformMatrix:e,zoomScale:t=1})=>Object(Vt.jsx)("div",{className:"canvasRotationHandle canvasLayoutAnnotation",style:{transform:Hc(e)}},Object(Vt.jsx)("div",{className:"canvasRotationHandle__handle",style:{transform:`scale3d(${1/t},${1/t},1)`}})),_d=({transformMatrix:e,width:t,height:a})=>Object(Vt.jsx)("div",{className:"canvasBorderConnection canvasLayoutAnnotation",style:{height:a,marginLeft:-t/2,marginTop:-a/2,position:"absolute",transform:Hc(e),width:t}}),jd=({transformMatrix:e,zoomScale:t=1})=>Object(Vt.jsx)("div",{className:"canvasBorderResizeHandle canvasLayoutAnnotation",style:{transform:`${Hc(e)} scale3d(${1/t},${1/t}, 1)`}}),wd=["button","checkbox","color","file","image","radio","range","reset","submit"],Od=({tagName:e,type:t})=>{switch(e.toLowerCase()){case"input":return!wd.includes(t);case"textarea":return!0;default:return!1}};class workpad_shortcuts_WorkpadShortcuts extends n.Component{constructor(...e){super(...e),g()(this,"_keyMap",{CUT:this.props.cutNodes,COPY:this.props.copyNodes,PASTE:this.props.pasteNodes,CLONE:this.props.cloneNodes,DELETE:this.props.deleteNodes,BRING_TO_FRONT:this.props.bringToFront,BRING_FORWARD:this.props.bringForward,SEND_BACKWARD:this.props.sendBackward,SEND_TO_BACK:this.props.sendToBack,GROUP:this.props.groupNodes,UNGROUP:this.props.ungroupNodes,SHIFT_UP:this.props.shiftUp,SHIFT_DOWN:this.props.shiftDown,SHIFT_LEFT:this.props.shiftLeft,SHIFT_RIGHT:this.props.shiftRight,NUDGE_UP:this.props.nudgeUp,NUDGE_DOWN:this.props.nudgeDown,NUDGE_LEFT:this.props.nudgeLeft,NUDGE_RIGHT:this.props.nudgeRight})}render(){return Object(Vt.jsx)(_.Shortcuts,{name:"ELEMENT",handler:(e,t)=>{Od(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())},targetNodeSelector:"body",global:!0})}shouldComponentUpdate(e){return!ra()(e,this.props)}}const kd=Object(ha.compose)(Object(ha.withHandlers)(ba),Object(ha.withHandlers)(ma),Object(ha.withHandlers)(pa),Object(ha.withHandlers)(fa),Object(ha.withHandlers)(va))(workpad_shortcuts_WorkpadShortcuts);kd.propTypes={pageId:m.a.string.isRequired,selectedNodes:m.a.arrayOf(m.a.object),elementLayer:m.a.func.isRequired,insertNodes:m.a.func.isRequired,removeNodes:m.a.func.isRequired,selectToplevelNodes:m.a.func.isRequired,commit:m.a.func.isRequired};class interaction_boundary_InteractionBoundary extends n.PureComponent{constructor(){super(),this.state={height:"0",width:"0",marginLeft:"0",marginTop:"0"}}componentDidMount(){const e=$("#"+Xb),t=e.height(),a=e.width();t&&a&&this.setState({height:t-24+"px",width:a-24+"px",marginLeft:-(a-24)/2+"px",marginTop:-(t-24)/2+"px"})}render(){const e={top:"50%",left:"50%",position:"absolute",...this.state};return Object(Vt.jsx)("div",{id:"canvasInteractionBoundary",style:e})}}class interactive_workpad_page_InteractiveWorkpadPage extends n.PureComponent{componentWillUnmount(){this.props.resetHandler()}render(){const{pageId:e,pageStyle:t,className:a,elements:n,cursor:r="auto",height:o,width:s,onDoubleClick:i,onKeyDown:c,onMouseDown:l,onMouseLeave:d,onMouseMove:u,onMouseUp:p,onAnimationEnd:g,onWheel:b,selectedNodes:f,selectToplevelNodes:m,insertNodes:v,removeNodes:h,elementLayer:x,canvasOrigin:y,saveCanvasOrigin:_,commit:j,setMultiplePositions:w,zoomScale:O}=this.props;let k=null;const E={elementLayer:x,insertNodes:v,pageId:e,removeNodes:h,selectedNodes:f,selectToplevelNodes:m,commit:j,setMultiplePositions:w};return k=Object(Vt.jsx)(kd,E),Object(Vt.jsx)("div",{key:e,id:e,ref:e=>{!y&&e&&e.getBoundingClientRect&&_((()=>()=>e.getBoundingClientRect()))},"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasInteractivePage ${a}`,"data-shared-items-container":!0,style:{...t,height:o,width:s,cursor:r},onKeyDown:c,onMouseMove:u,onMouseUp:p,onMouseDown:l,onMouseLeave:d,onDoubleClick:i,onAnimationEnd:g,onWheel:b},Object(Vt.jsx)(interaction_boundary_InteractionBoundary,null),k,n.map((e=>{if("annotation"===e.type){const t={key:e.id,type:e.type,transformMatrix:e.transformMatrix,width:e.width,height:e.height,text:e.text,zoomScale:O};switch(e.subtype){case"alignmentGuide":return Object(Vt.jsx)(md,t);case"adHocChildAnnotation":case"hoverAnnotation":return Object(Vt.jsx)(hd,t);case"dragBoxAnnotation":return Object(Vt.jsx)(vd,t);case"rotationHandle":return Object(Vt.jsx)(yd,t);case"resizeHandle":return Object(Vt.jsx)(jd,t);case"resizeConnector":return Object(Vt.jsx)(_d,t);case"rotationTooltip":return Object(Vt.jsx)(xd,t);default:return[]}}else if("group"!==e.type)return Object(Vt.jsx)(Yc,{key:e.id,element:e})})).filter((e=>!!e)))}}const Ed=e=>e instanceof Element&&e.closest(`#${Xb}`),Md=(e,t,a,n=1)=>{const{left:r,top:o}=e();return{x:(t-r)/n,y:(a-o)/n}},Sd=()=>{window.onmousemove=null,window.onmouseup=null},Cd=(e,{clientX:t,clientY:a,altKey:n,metaKey:r,shiftKey:o,ctrlKey:s,target:i},c,l)=>{if(!Ed(i))return;const{x:d,y:u}=Md(c,t,a,l);e&&e("cursorPosition",{x:d,y:u,altKey:n,metaKey:r,shiftKey:o,ctrlKey:s})},Pd=(e,t,a,n,r=!0)=>{const{clientX:o,clientY:s,buttons:i,altKey:c,metaKey:l,shiftKey:d,ctrlKey:u,target:p}=t;if(!Ed(p))return;if(t.stopPropagation(),1!==i||!e)return void Sd();r&&((e,t,a)=>{window.onmousemove=({buttons:n,clientX:r,clientY:o,altKey:s,metaKey:i,shiftKey:c,ctrlKey:l,target:d})=>{if(!Ed(d))return;const{x:u,y:p}=Md(t,r,o,a);e("cursorPosition",1===n||t?{x:u,y:p,altKey:s,metaKey:i,shiftKey:c,ctrlKey:l}:{})},window.onmouseup=n=>{const{clientX:r,clientY:o,altKey:s,metaKey:i,shiftKey:c,ctrlKey:l,target:d}=n;if(!Ed(d))return;n.stopPropagation();const{x:u,y:p}=Md(t,r,o,a);e("mouseEvent",{event:"mouseUp",x:u,y:p,altKey:s,metaKey:i,shiftKey:c,ctrlKey:l}),Sd()}})(e,a,n);const{x:g,y:b}=Md(a,o,s,n);e("mouseEvent",{event:"mouseDown",x:g,y:b,altKey:c,metaKey:l,shiftKey:d,ctrlKey:u}),r||e("mouseEvent",{event:"mouseUp",x:g,y:b,altKey:c,metaKey:l,shiftKey:d,ctrlKey:u})},Ad={onMouseDown:e=>t=>Pd(e.commit,t,e.canvasOrigin,e.zoomScale,e.canDragElement(t.target)),onMouseMove:e=>t=>Cd(e.commit,t,e.canvasOrigin,e.zoomScale),onMouseLeave:e=>t=>((e,{buttons:t,target:a})=>{Ed(a)&&1!==t&&e&&e("cursorPosition",{})})(e.commit,t),onWheel:e=>t=>Cd(e.commit,t,e.canvasOrigin),resetHandler:()=>()=>Sd()},Td={getAdHocChildAnnotationName:"adHocChildAnnotation",adHocGroupName:"adHocGroup",alignmentGuideName:"alignmentGuide",atopZ:1e3,depthSelect:!0,devColor:"magenta",dragBoxAnnotationName:"dragBoxAnnotation",dragBoxZ:1050,groupName:"group",groupResize:!0,guideDistance:3,hoverAnnotationName:"hoverAnnotation",hoverLift:100,intraGroupManipulation:!1,intraGroupSnapOnly:!1,minimumElementSize:2,persistentGroupName:"persistentGroup",resizeAnnotationConnectorOffset:0,resizeAnnotationOffset:0,resizeAnnotationOffsetZ:.1,resizeAnnotationSize:10,resizeConnectorName:"resizeConnector",resizeHandleName:"resizeHandle",rotateAnnotationOffset:12,rotateSnapInPixels:10,rotationEpsilon:.001,rotationHandleName:"rotationHandle",rotationHandleSize:14,rotationTooltipName:"rotationTooltip",shortcuts:!1,singleSelect:!1,snapConstraint:!0,tooltipZ:1100};function Nd(e){let t=this;const a=t.matches?"matches":"msMatchesSelector";do{if(t[a](e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}const Dd=Object(ha.compose)(Object(l.connect)(((e,t)=>{const a=e.transient.selectedToplevelNodes,n=me(e,t.pageId),r=a.map((e=>n.find((t=>t.id===e)))).filter((e=>e)),o=Te(r.map((e=>n.find((t=>t.id===e.id))?[e.id]:n.filter((t=>t.parent===e.id)).map((e=>e.id))))),s=Te(o.map(tr(n)));return{state:e,isEditable:!Object(Bt.b)(e)&&X(e)&&Object(Bt.a)(e),elements:n,selectedToplevelNodes:a,selectedNodes:s.map((e=>n.find((t=>t.id===e)))),pageStyle:Q(e,t.pageId).style,zoomScale:Object(Bt.d)(e)}}),(e=>({dispatch:e,insertNodes:(t,a)=>e(pt(t,a)),removeNodes:(t,a)=>e(gt(t,a)),selectToplevelNodes:t=>e(Re(t.filter((e=>!e.position.parent)).map((e=>e.id)))),elementLayer:(t,a,n)=>e(rt({pageId:t,elementId:a,movement:n})),setMultiplePositions:t=>a=>e(ot(a.map((e=>({...e,pageId:t,elementId:e.id})))))})),(({state:e,...t},{dispatch:a,...n},r)=>({...r,...n,...t,updateGlobalState:er(a,e),setMultiplePositions:n.setMultiplePositions(r.pageId)}))),Object(ha.withState)("aeroStore","setAeroStore"),Object(ha.withProps)((({aeroStore:e,setAeroStore:t,elements:a,selectedToplevelNodes:n,height:r,width:o})=>{const s=Jn(a),i=n.filter((e=>s.find((t=>t.id===e)))),c={primaryUpdate:null,currentScene:{shapes:s,configuration:{...Td,pageHeight:r,pageWidth:o},selectedShapes:i,selectionState:e?e.getCurrentState().currentScene.selectionState:{uid:0,depthIndex:0,down:!1},gestureState:e?e.getCurrentState().currentScene.gestureState:{cursor:{x:1/0,y:1/0},mouseIsDown:!1,mouseButtonState:{buttonState:"up",downX:null,downY:null}}}};return e?e.setCurrentState(c):t(e=((e,t)=>{let a=e;const n=(e,n)=>a=t({...a,primaryUpdate:{type:e,payload:{...n,uid:Zc++}}});return{getCurrentState:()=>a,setCurrentState:e=>{a=e,n("flush",{})},commit:n}})(c,fd)),{aeroStore:e}})),Object(ha.withProps)((({aeroStore:e,updateGlobalState:t})=>({commit:(a,n)=>{const r=e.commit(a,n);r.currentScene.gestureEnd&&t(r)}}))),Object(ha.lifecycle)({componentWillUnmount(){this.props.unregisterLayout(this.props.aeroStore)}}),Object(ha.withState)("canvasOrigin","saveCanvasOrigin"),Object(ha.withState)("_forceRerender","forceRerender"),Object(ha.withProps)((({registerLayout:e,aeroStore:t,updateGlobalState:a,forceRerender:n})=>(e(((e,r)=>{const o=t.commit(e,r);return o.currentScene.gestureEnd&&a(o),n(o),o})),{cursor:t.getCurrentState().currentScene.cursor}))),Object(ha.withProps)((({aeroStore:e,elements:t})=>{const a=new Map(t.map((e=>[e.id,e])));return{elements:e.getCurrentState().currentScene.shapes.map((e=>{const t=a.get(e.id);return t?{...e,width:2*e.a,height:2*e.b,filter:t.filter}:e}))}})),Object(ha.withProps)((({commit:e,forceRerender:t})=>({commit:(...a)=>t(e(...a))}))),Object(ha.withProps)(((...e)=>({...e,canDragElement:e=>!(e=>"function"==typeof e.closest?e.closest(`.${es.CANVAS_EMBEDDABLE_CLASSNAME}`)&&!e.closest(".embPanel__header"):Nd.call(e,`.${es.CANVAS_EMBEDDABLE_CLASSNAME}`)&&!Nd.call(e,".embPanel__header"))(e)&&(e=>{const t=".canvasWorkpadContainer";return"function"==typeof e.closest?!!e.closest(t):!!Nd.call(e,t)})(e)}))),Object(ha.withHandlers)(Ad),(()=>interactive_workpad_page_InteractiveWorkpadPage)),Id=Object(ha.compose)(Object(ha.shouldUpdate)(Ie(ra.a)),Object(ha.withProps)((({animation:e,isSelected:t})=>e?{className:e.name+" "+(t?"isActive":"isInactive"),animationStyle:{animationDirection:e.direction,animationDuration:"1s"}}:{className:t?"isActive":"isInactive",animationStyle:{}})),Object(l.connect)(((e,{isSelected:t,pageId:a,isFullscreen:n})=>({isInteractive:t&&!n&&X(e)&&Object(Bt.a)(e),elements:me(e,a),pageStyle:Q(e,a).style}))),Object(ha.branch)((({isInteractive:e})=>e),Dd,(()=>Object(ha.withProps)(Xn)(static_workpad_page_StaticWorkpadPage))))(),Fd=e=>{const{isFullscreen:t}=Object(n.useContext)(Jd);return Object(Vt.jsx)(Id,zt()({},e,{isFullscreen:t}))};var Ld=a(9);const Rd=({isFullscreen:e=!1,children:t})=>{const[a,r]=Object(n.useState)(Object(Ld.a)().innerWidth),[o,s]=Object(n.useState)(Object(Ld.a)().innerHeight),i=Object(d.debounce)((({target:e})=>{const{innerWidth:t,innerHeight:a}=e;r(t),s(a)}),100);Object(n.useEffect)((()=>{const e=Object(Ld.a)();return e.addEventListener("resize",i),()=>e.removeEventListener("resize",i)}));return t({isFullscreen:e,windowSize:{width:a,height:o}})},zd=({children:e})=>{const{isFullscreen:t}=Object(n.useContext)(Jd);return Object(Vt.jsx)(Rd,{isFullscreen:t,children:e})};class workpad_shortcuts_component_WorkpadShortcuts extends r.a.Component{constructor(...e){super(...e),g()(this,"_toggleFullscreen",(()=>{const{setFullscreen:e,isFullscreen:t}=this.props;e(!t)})),g()(this,"nextPage",(()=>{this.props.nextPage()})),g()(this,"previousPage",(()=>{this.props.previousPage()})),g()(this,"zoomIn",(()=>{this.props.zoomIn()})),g()(this,"zoomOut",(()=>{this.props.zoomOut()})),g()(this,"resetZoom",(()=>{this.props.resetZoom()})),g()(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,UNDO:this.props.undoHistory,REDO:this.props.redoHistory,GRID:()=>this.props.setGrid(!this.props.grid),ZOOM_IN:this.zoomIn,ZOOM_OUT:this.zoomOut,ZOOM_RESET:this.resetZoom,PREV:this.previousPage,NEXT:this.nextPage,FULLSCREEN:this._toggleFullscreen}),g()(this,"_keyHandler",((e,t)=>{Od(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())}))}render(){return Object(Vt.jsx)(_.Shortcuts,{name:"EDITOR",handler:this._keyHandler,targetNodeSelector:"body",global:!0})}}const Bd=({fetchAllRenderables:e,getAnimation:t,grid:a,hasHeaderBanner:n,height:r,isFullscreen:o,nextPage:s,onTransitionEnd:i,pages:c,previousPage:l,redoHistory:d,registerLayout:u,resetZoom:p,selectedPageNumber:g,setFullscreen:b,setGrid:f,totalElementCount:m,width:v,workpadCss:h,undoHistory:x,unregisterLayout:y,zoomIn:_,zoomOut:j,zoomScale:w})=>{const O=n?oa.w:0,k={height:o?r:(r+2*oa.E)*w,width:o?v:(v+2*oa.E)*w};return Object(Vt.jsx)("div",{className:"canvasWorkpad__buffer",style:k},Object(Vt.jsx)("div",{className:"canvasCheckered",style:{height:r,width:v,transformOrigin:"0 0",transform:o?void 0:`scale3d(${w}, ${w}, 1)`}},!o&&Object(Vt.jsx)(workpad_shortcuts_component_WorkpadShortcuts,{fetchAllRenderables:e,grid:a,isFullscreen:o,nextPage:s,previousPage:l,redoHistory:d,resetZoom:p,setFullscreen:b,setGrid:f,undoHistory:x,zoomIn:_,zoomOut:j}),Object(Vt.jsx)(zd,null,(({isFullscreen:e,windowSize:o})=>{const s=Math.min((o.height-O)/r,o.width/v),l=e?{transform:`scale3d(${s}, ${s}, 1)`,WebkitTransform:`scale3d(${s}, ${s}, 1)`,msTransform:`scale3d(${s}, ${s}, 1)`,height:o.height<r?"auto":r,width:o.width<v?"auto":v,top:n?O/2+"px":void 0}:{};return Fi.a.it(h||oa.r,Object(Vt.jsx)("div",{className:"canvasWorkpad "+(e?"fullscreen":""),style:l,"data-shared-items-count":m},c.map(((e,a)=>Object(Vt.jsx)(Fd,{key:e.id,pageId:e.id,height:r,width:v,isSelected:a+1===g,animation:t(a+1),onAnimationEnd:i,registerLayout:u,unregisterLayout:y}))),Object(Vt.jsx)("div",{className:"canvasGrid",style:{height:r,width:v,display:a?"block":"none"}})))}))))},Hd=e=>{const t=Object(l.useDispatch)(),[a,r]=Object(n.useState)(!1),[o,s]=Object(n.useState)(null),[i]=Object(n.useState)(0),{isFullscreen:c,setFullscreen:d,undo:u,redo:p,autoplayInterval:g,nextPage:b,previousPage:f}=Object(n.useContext)(Jd),m=Object(y.usePlatformService)(),v=Ac()(m.hasHeaderBanner$()),h=Object(l.useSelector)((e=>{const{width:t,height:a,id:n,css:r}=U(e);return{pages:J(e),selectedPageNumber:Y(e)+1,totalElementCount:oe(e).length,width:t,height:a,workpadCss:r,workpadId:n,isFullscreen:Object(Bt.b)(e),zoomScale:Object(Bt.d)(e)}})),x=Object(n.useCallback)((()=>{t(ut())}),[t]),_=Object(n.useCallback)((e=>{t(He(e))}),[t]),j=Object(n.useCallback)((e=>{if(!o||!o.name)return null;if(![h.selectedPageNumber,i].includes(e))return null;const{enter:t,exit:a}=Er.get(o.name);return{name:e===Math.max(h.selectedPageNumber,i)?t:a,direction:i>h.selectedPageNumber?"reverse":"normal"}}),[h.selectedPageNumber,o,i]),w=Object(n.useCallback)((()=>s(null)),[s]),O=Object(n.useCallback)((e=>{d(e),!0===e&&Ic(Nc.METRIC_TYPE.COUNT,g>0?[oa.x,oa.y]:oa.x)}),[d,g]),k=(({zoomScale:e,setZoomScale:t})=>({zoomIn:Object(n.useCallback)((()=>{const a=oa.F.find((t=>e<t))||oa.A;t(a)}),[e,t]),zoomOut:Object(n.useCallback)((()=>{const a=oa.F.slice().reverse().find((t=>e>t))||oa.B;t(a)}),[e,t]),resetZoom:Object(n.useCallback)((()=>{t(1)}),[t])}))({setZoomScale:_,zoomScale:h.zoomScale});return Object(Vt.jsx)(Bd,zt()({},e,h,{setFullscreen:O,isFullscreen:c,undoHistory:u,redoHistory:p,hasHeaderBanner:v,grid:a,setGrid:r,nextPage:b,previousPage:f,fetchAllRenderables:x,getAnimation:j,onTransitionEnd:w},k))},Wd=()=>c.i18n.translate("xpack.canvas.workpadHeaderRefreshControlSettings.refreshAriaLabel",{defaultMessage:"Refresh Elements"}),Vd=()=>c.i18n.translate("xpack.canvas.workpadHeaderRefreshControlSettings.refreshTooltip",{defaultMessage:"Refresh data"}),Ud={doRefresh:ut},Gd=Object(l.connect)((e=>({inFlight:Me(e)})),Ud)((({doRefresh:e,inFlight:t})=>Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:Object(Vt.jsx)("span",null,Vd(),Object(Vt.jsx)(or,{namespace:"EDITOR",action:"REFRESH"}))},Object(Vt.jsx)(Wt.EuiButtonIcon,{disabled:t,iconType:"refresh","aria-label":Wd(),onClick:e,"data-test-subj":"canvas-refresh-control"}))));var $d;!function(e){e.SECONDS="s",e.MINUTES="m",e.HOURS="h",e.DAYS="d"}($d||($d={}));const Kd={[$d.SECONDS]:1e3,[$d.MINUTES]:6e4,[$d.HOURS]:36e5,[$d.DAYS]:864e5};const qd=(e="")=>!!String(e).match(/^([0-9]{1,})([hmsd])$/),Xd=(e="")=>{if(!isNaN(Number(e)))return;const t=String(e).match(/^([0-9]{1,})([hmsd])$/);if(!t)return;const a=parseInt(t[1],10),n=t[2],r=function(e){return void 0!==e}(n)?Kd[n]:null;return a&&r?a*r:void 0},Yd=e=>e<Kd[$d.MINUTES]?e/Kd[$d.SECONDS]+$d.SECONDS:e<Kd[$d.HOURS]?e/Kd[$d.MINUTES]+$d.MINUTES:e<Kd[$d.DAYS]?e/Kd[$d.HOURS]+$d.HOURS:e/Kd[$d.DAYS]+$d.DAYS,Zd={gotoPage:e=>{},getUrl:e=>"",isFullscreen:!1,setFullscreen:e=>{},autoplayInterval:0,setAutoplayInterval:e=>{},isAutoplayPaused:!0,setIsAutoplayPaused:e=>{},nextPage:()=>{},previousPage:()=>{},refreshInterval:0,setRefreshInterval:e=>{},undo:()=>{},redo:()=>{}},Jd=Object(n.createContext)(Zd),Qd=({children:e})=>{const t=(()=>{const[e,t]=Object(n.useState)(!1),a=Object(T.useHistory)(),{search:r}=a.location,o=Object(T.useParams)(),s=Object(l.useSelector)(U),i=new URLSearchParams(r),c=parseInt(o.pageNumber,10),d=isNaN(c)?s.page+1:c,u=s.pages.length,p=Object(n.useCallback)((e=>`/workpad/${o.id}/page/${e}${a.location.search}`),[o.id,a.location.search]),g=Object(n.useCallback)((e=>{a.push(p(e))}),[p,a]),b=Object(n.useCallback)((()=>{let e=d+1;e>u&&(e=1),g(e)}),[d,u,g]),f=Object(n.useCallback)((()=>{let e=d-1;e<1&&(e=u),g(e)}),[d,u,g]),m="true"===i.get("__fullScreen"),v=i.get("__autoplayInterval"),h=v&&qd(v)&&Xd(v)||0,x=i.get("__refreshInterval"),y=x&&qd(x)&&Xd(x)||0,_=Object(n.useCallback)((e=>{const n=new URLSearchParams(a.location.search);e?n.set("__fullScreen","true"):(t(!1),n.delete("__fullScreen")),a.push(`${a.location.pathname}?${n.toString()}`)}),[a,t]),j=Object(n.useCallback)((e=>{const t=new URLSearchParams(a.location.search);e>0?t.set("__autoplayInterval",Yd(e)):t.delete("__autoplayInterval"),a.push(`${a.location.pathname}?${t.toString()}`)}),[a]),w=Object(n.useCallback)((e=>{const t=new URLSearchParams(a.location.search);e>0?t.set("__refreshInterval",Yd(e)):t.delete("__refreshInterval"),a.push(`${a.location.pathname}?${t.toString()}`)}),[a]),O=Object(n.useCallback)((()=>{a.goBack()}),[a]),k=Object(n.useCallback)((()=>{a.goForward()}),[a]),E=Object(n.useCallback)((()=>({gotoPage:g,getUrl:p,isFullscreen:m,setFullscreen:_,autoplayInterval:h,setAutoplayInterval:j,nextPage:b,previousPage:f,refreshInterval:y,setRefreshInterval:w,isAutoplayPaused:e,setIsAutoplayPaused:t,undo:O,redo:k})),[g,p,m,_,h,j,b,f,y,w,e,t,O,k]);return Object(n.useMemo)((()=>E()),[E])})();return Object(Vt.jsx)(Jd.Provider,{value:t},e)};class fullscreen_control_FullscreenControl extends r.a.PureComponent{constructor(...e){super(...e),g()(this,"_toggleFullscreen",(()=>{const{setFullscreen:e,isFullscreen:t}=this.props;e(!t)})),g()(this,"toggleAutoplay",(()=>{this.props.toggleAutoplay()})),g()(this,"nextPage",(()=>{this.props.nextPage()})),g()(this,"previousPage",(()=>{this.props.previousPage()})),g()(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,PREV:this.previousPage,NEXT:this.nextPage,FULLSCREEN:this._toggleFullscreen,FULLSCREEN_EXIT:this._toggleFullscreen,PAGE_CYCLE_TOGGLE:this.toggleAutoplay}),g()(this,"_keyHandler",((e,t)=>{Object.keys(this._keyMap).indexOf(e)<0||Od(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())}))}render(){const{children:e,isFullscreen:t}=this.props;return Object(Vt.jsx)("span",null,t&&Object(Vt.jsx)(_.Shortcuts,{name:"PRESENTATION",handler:this._keyHandler,targetNodeSelector:"body",global:!0,isolate:!0}),e({isFullscreen:t,toggleFullscreen:this._toggleFullscreen}))}}const eu=Object(ha.compose)(Object(ha.getContext)({router:m.a.object}),Object(l.connect)((e=>({workpadId:U(e).id,pages:J(e),selectedPageNumber:Y(e)+1})),(e=>({fetchAllRenderables:()=>e(ut())}))),Object(ha.withState)("transition","setTransition",null),Object(ha.withState)("prevSelectedPageNumber","setPrevSelectedPageNumber",0),Object(ha.withProps)((({selectedPageNumber:e,prevSelectedPageNumber:t,transition:a})=>({getAnimation:function(n){if(!a||!a.name)return null;if(![e,t].includes(n))return null;const{enter:r,exit:o}=Er.get(a.name);return{name:n===Math.max(e,t)?r:o,direction:t>e?"reverse":"normal"}}}))),Object(ha.withHandlers)({onTransitionEnd:({setTransition:e})=>()=>e(null)}))((e=>{const{isFullscreen:t,autoplayInterval:a,nextPage:r,previousPage:o,setFullscreen:s,setIsAutoplayPaused:i,isAutoplayPaused:c}=Object(n.useContext)(Jd),d=a>0,u=Object(l.useDispatch)(),p=Object(n.useCallback)((e=>{e&&u(Re([])),s(e),!0===e&&Ic(Nc.METRIC_TYPE.COUNT,d?[oa.x,oa.y]:oa.x)}),[u,s,d]),g=Object(n.useCallback)((()=>{i(!c)}),[i,c]);return Object(Vt.jsx)(fullscreen_control_FullscreenControl,zt()({isFullscreen:t,nextPage:r,previousPage:o,autoplayEnabled:d,setFullscreen:p,toggleAutoplay:g},e))})),tu=(e,t=[])=>(t.push(e),e.items&&e.items.forEach((e=>{const{panel:a}=e;a&&(tu(a,t),e.panel=a.id)})),t);var au=a(203);const nu=({title:e,description:t,image:a,tags:n=[],onClick:r,...o})=>Object(Vt.jsx)(Wt.EuiCard,zt()({className:a?"canvasElementCard":"canvasElementCard canvasElementCard--hasIcon",textAlign:"left",title:e,description:t,footer:Object(Vt.jsx)(au.a,{tags:n,tagType:"badge"}),image:a,icon:a?void 0:Object(Vt.jsx)(Wt.EuiIcon,{type:"canvasApp",size:"xxl"}),onClick:r},o)),ru=()=>c.i18n.translate("xpack.canvas.customElementModal.cancelButtonLabel",{defaultMessage:"Cancel"}),ou=e=>c.i18n.translate("xpack.canvas.customElementModal.remainingCharactersDescription",{defaultMessage:"{numberOfRemainingCharacter} characters remaining",values:{numberOfRemainingCharacter:e}}),su=()=>c.i18n.translate("xpack.canvas.customElementModal.descriptionInputLabel",{defaultMessage:"Description"}),iu=()=>c.i18n.translate("xpack.canvas.customElementModal.elementPreviewTitle",{defaultMessage:"Element preview"}),cu=()=>c.i18n.translate("xpack.canvas.customElementModal.imageFilePickerPlaceholder",{defaultMessage:"Select or drag and drop an image"}),lu=()=>c.i18n.translate("xpack.canvas.customElementModal.imageInputDescription",{defaultMessage:"Take a screenshot of your element and upload it here. This can also be done after saving."}),du=()=>c.i18n.translate("xpack.canvas.customElementModal.imageInputLabel",{defaultMessage:"Thumbnail image"}),uu=()=>c.i18n.translate("xpack.canvas.customElementModal.nameInputLabel",{defaultMessage:"Name"}),pu=()=>c.i18n.translate("xpack.canvas.customElementModal.saveButtonLabel",{defaultMessage:"Save"});class custom_element_modal_CustomElementModal extends n.PureComponent{constructor(...e){super(...e),g()(this,"state",{name:this.props.name||"",description:this.props.description||"",image:this.props.image||""}),g()(this,"_handleChange",((e,t)=>{this.setState({[e]:t})})),g()(this,"_handleUpload",(e=>{if(null==e)return;const t=e[0],[a,n]=Object(d.get)(t,"type","").split("/");"image"===a&&oa.D.indexOf(n)>=0&&Object(Lt.encode)(t).then((e=>this._handleChange("image",e)))}))}render(){const{onSave:e,onCancel:t,title:a,...n}=this.props,{name:r,description:o,image:s}=this.state;return Object(Vt.jsx)(Wt.EuiModal,zt()({},n,{className:"canvasCustomElementModal",maxWidth:700,onClose:t,initialFocus:".canvasCustomElementForm__name"}),Object(Vt.jsx)(Wt.EuiModalHeader,null,Object(Vt.jsx)(Wt.EuiModalHeaderTitle,null,Object(Vt.jsx)("h3",null,a))),Object(Vt.jsx)(Wt.EuiModalBody,null,Object(Vt.jsx)(Wt.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexStart"},Object(Vt.jsx)(Wt.EuiFlexItem,{className:"canvasCustomElementForm",grow:2},Object(Vt.jsx)(Wt.EuiFormRow,{label:uu(),helpText:ou(40-r.length),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiFieldText,{value:r,className:"canvasCustomElementForm__name",onChange:e=>e.target.value.length<=40&&this._handleChange("name",e.target.value),required:!0,"data-test-subj":"canvasCustomElementForm-name"})),Object(Vt.jsx)(Wt.EuiFormRow,{label:su(),helpText:ou(100-o.length)},Object(Vt.jsx)(Wt.EuiTextArea,{value:o,rows:2,onChange:e=>e.target.value.length<=100&&this._handleChange("description",e.target.value),"data-test-subj":"canvasCustomElementForm-description"})),Object(Vt.jsx)(Wt.EuiFormRow,{className:"canvasCustomElementForm__thumbnail",label:du(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiFilePicker,{initialPromptText:cu(),onChange:this._handleUpload,className:"canvasImageUpload",accept:"image/*"})),Object(Vt.jsx)(Wt.EuiText,{className:"canvasCustomElementForm__thumbnailHelp",size:"xs"},Object(Vt.jsx)("p",null,lu()))),Object(Vt.jsx)(Wt.EuiFlexItem,{className:"canvasElementCard__wrapper canvasCustomElementForm__preview",grow:1},Object(Vt.jsx)(Wt.EuiTitle,{size:"xxxs"},Object(Vt.jsx)("h4",null,iu())),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(nu,{title:r,description:o,image:s})))),Object(Vt.jsx)(Wt.EuiModalFooter,null,Object(Vt.jsx)(Wt.EuiFlexGroup,{justifyContent:"flexEnd"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButtonEmpty,{onClick:t},ru())),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiButton,{fill:!0,onClick:()=>{e(r,o,s)},"data-test-subj":"canvasCustomElementForm-submit"},pu())))))}}const gu=j.a.getShortcutHelp(),bu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.alignmentMenuItemLabel",{defaultMessage:"Alignment",description:"This refers to the vertical (i.e. left, center, right) and horizontal (i.e. top, middle, bottom) alignment options of the selected elements"}),fu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.bottomAlignMenuItemLabel",{defaultMessage:"Bottom"}),mu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.centerAlignMenuItemLabel",{defaultMessage:"Center",description:"This refers to alignment centered horizontally."}),vu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.createElementModalTitle",{defaultMessage:"Create new element"}),hu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.distributionMenutItemLabel",{defaultMessage:"Distribution",description:"This refers to the options to evenly spacing the selected elements horizontall or vertically."}),xu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.editMenuButtonLabel",{defaultMessage:"Edit"}),yu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.editMenuLabel",{defaultMessage:"Edit options"}),_u=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.groupMenuItemLabel",{defaultMessage:"Group",description:"This refers to grouping multiple selected elements."}),ju=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.horizontalDistributionMenutItemLabel",{defaultMessage:"Horizontal"}),wu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.leftAlignMenuItemLabel",{defaultMessage:"Left"}),Ou=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.middleAlignMenuItemLabel",{defaultMessage:"Middle",description:"This refers to alignment centered vertically."}),ku=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.orderMenuItemLabel",{defaultMessage:"Order",description:"Refers to the order of the elements displayed on the page from front to back"}),Eu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.redoMenuItemLabel",{defaultMessage:"Redo"}),Mu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.rightAlignMenuItemLabel",{defaultMessage:"Right"}),Su=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.savedElementMenuItemLabel",{defaultMessage:"Save as new element"}),Cu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.topAlignMenuItemLabel",{defaultMessage:"Top"}),Pu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.undoMenuItemLabel",{defaultMessage:"Undo"}),Au=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.ungroupMenuItemLabel",{defaultMessage:"Ungroup",description:"This refers to ungrouping a grouped element"}),Tu=()=>c.i18n.translate("xpack.canvas.workpadHeaderEditMenu.verticalDistributionMenutItemLabel",{defaultMessage:"Vertical"}),Nu=({cutNodes:e,copyNodes:t,pasteNodes:a,deleteNodes:r,cloneNodes:o,bringToFront:s,bringForward:i,sendBackward:c,sendToBack:l,alignLeft:d,alignCenter:u,alignRight:p,alignTop:g,alignMiddle:b,alignBottom:f,distributeHorizontally:m,distributeVertically:v,createCustomElement:h,selectedNodes:x,groupIsSelected:y,groupNodes:_,ungroupNodes:j,undoHistory:w,redoHistory:O,hasPasteData:k})=>{const[E,M]=Object(n.useState)(!1),S=()=>M(!1),C=n=>{const h=y?{name:Au(),className:oa.o,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{j(),n()}}:{name:_u(),className:oa.o,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),disabled:x.length<2,onClick:()=>{_(),n()}},E={name:ku(),disabled:1!==x.length,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),panel:{id:1,title:ku(),items:[{name:gu.BRING_TO_FRONT,icon:"sortUp",onClick:s},{name:gu.BRING_FORWARD,icon:"arrowUp",onClick:i},{name:gu.SEND_BACKWARD,icon:"arrowDown",onClick:c},{name:gu.SEND_TO_BACK,icon:"sortDown",onClick:l}]}},S={name:bu(),className:"canvasContextMenu",disabled:y||x.length<2,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),panel:{id:2,title:bu(),items:[{name:wu(),icon:"editorItemAlignLeft",onClick:()=>{d(),n()}},{name:mu(),icon:"editorItemAlignCenter",onClick:()=>{u(),n()}},{name:Mu(),icon:"editorItemAlignRight",onClick:()=>{p(),n()}},{name:Cu(),icon:"editorItemAlignTop",onClick:()=>{g(),n()}},{name:Ou(),icon:"editorItemAlignMiddle",onClick:()=>{b(),n()}},{name:fu(),icon:"editorItemAlignBottom",onClick:()=>{f(),n()}}]}},C={name:hu(),className:"canvasContextMenu",disabled:y||x.length<3,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),panel:{id:3,title:bu(),items:[{name:ju(),icon:"editorDistributeHorizontal",onClick:()=>{m(),n()}},{name:Tu(),icon:"editorDistributeVertical",onClick:()=>{v(),n()}}]}},P={name:Su(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"indexOpen",size:"m"}),disabled:x.length<1,className:oa.o,"data-test-subj":"canvasWorkpadEditMenu__saveElementButton",onClick:()=>{M(!0),n()}};return{id:0,items:[{name:Pu(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"editorUndo",size:"m"}),onClick:()=>{w()}},{name:Eu(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"editorRedo",size:"m"}),onClick:()=>{O()}},{name:gu.CUT,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"cut",size:"m"}),className:oa.o,disabled:x.length<1,onClick:()=>{e(),n()}},{name:gu.COPY,disabled:x.length<1,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"copy",size:"m"}),onClick:()=>{t()}},{name:gu.PASTE,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"copyClipboard",size:"m"}),disabled:!k,onClick:()=>{a(),n()}},{name:gu.DELETE,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"trash",size:"m"}),disabled:x.length<1,onClick:()=>{r(),n()}},{name:gu.CLONE,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),disabled:x.length<1,onClick:()=>{o(),n()}},h,E,S,C,P]}};return Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(rs.a,{button:e=>Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s","aria-label":yu(),onClick:e,"data-test-subj":"canvasWorkpadEditMenuButton"},xu()),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(Vt.jsx)(Wt.EuiContextMenu,{initialPanelId:0,panels:tu(C(e))}))),E?Object(Vt.jsx)(custom_element_modal_CustomElementModal,{title:vu(),onSave:(e,t,a)=>{h(e,t,a),S()},onCancel:S}):null)},Du=(e,t)=>(a,n)=>{const r=e(a,n);r.currentScene.gestureEnd&&t(r)},Iu=Object(ha.compose)(Object(l.connect)((e=>{const t=Z(e),a=me(e,t),n=ue(e),r=n.map((e=>a.find((t=>t.id===e)))).filter((e=>e)),o=Te(r.map((e=>a.find((t=>t.id===e.id))?[e.id]:a.filter((t=>t.position.parent===e.id)).map((e=>e.id)))));return{pageId:t,selectedToplevelNodes:n,selectedNodes:Te(o.map(tr(a))).map((e=>a.find((t=>t.id===e)))).filter((e=>!!e)),state:e}}),(e=>({insertNodes:(t,a)=>e(pt(t,a)),removeNodes:(t,a)=>e(gt(t,a)),selectToplevelNodes:t=>e(Re(t.filter((e=>!e.position.parent)).map((e=>e.id)))),elementLayer:(t,a,n)=>{e(rt({pageId:t,elementId:a,movement:n}))},dispatch:e})),(({state:e,selectedToplevelNodes:t,...a},{dispatch:n,...r},{commit:o})=>{const s=er(n,e);return{...r,...a,commit:Du(o,s),groupIsSelected:1===t.length&&t[0].includes("group")}})),Object(ha.withProps)((()=>({hasPasteData:Boolean(ca())}))),Object(ha.withHandlers)(pa),Object(ha.withHandlers)(fa),Object(ha.withHandlers)(ma),Object(ha.withHandlers)(ba),Object(ha.withHandlers)(ga))((e=>{const{undo:t,redo:a}=Object(n.useContext)(Jd);return Object(Vt.jsx)(Nu,zt()({},e,{undoHistory:t,redoHistory:a}))}));class element_Element{constructor(e){g()(this,"name",void 0),g()(this,"displayName",void 0),g()(this,"type",void 0),g()(this,"icon",void 0),g()(this,"help",void 0),g()(this,"expression",void 0),g()(this,"filter",void 0),g()(this,"width",void 0),g()(this,"height",void 0);const{name:t,icon:a,displayName:n,type:r,expression:o,filter:s,help:i,width:c,height:l}=e;if(this.name=t,this.displayName=n||t,this.icon=a||"empty",this.help=i||"",!e.expression)throw new Error("Element types must have a default expression");this.type=r,this.expression=o,this.filter=s,this.width=c||500,this.height=l||300}}class elements_registry_ElementsRegistry extends F.Registry{wrapper(e){return new element_Element(e)}}const Fu=new elements_registry_ElementsRegistry;var Lu=a(32);class clipboard_Clipboard extends r.a.PureComponent{constructor(...e){super(...e),g()(this,"onClick",(e=>{const{content:t,onCopy:a}=this.props;e.preventDefault(),a(Kr()(t.toString(),{debug:!0}))}))}render(){return Object(Vt.jsx)("div",{className:"canvasClipboard",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},this.props.children)}}const Ru=clipboard_Clipboard;var zu=a(154),Bu=a(128),Hu=a.n(Bu);class download_Download extends r.a.PureComponent{constructor(...e){super(...e),g()(this,"onClick",(()=>{const{fileName:e,content:t}=this.props,a=Object(Lt.parseDataUrl)(t,!0);if(a&&a.data){const t=new Blob([Object(zu.toByteArray)(a.data)],{type:a.mimetype}),n=a.extension?`.${a.extension}`:"";Hu.a.saveAs(t,`canvas-${e}${n}`)}}))}render(){return Object(Vt.jsx)("div",{className:"canvasDownload",onClick:this.onClick,onKeyPress:this.onClick,tabIndex:0,role:"button"},this.props.children)}}const Wu=download_Download,Vu=()=>c.i18n.translate("xpack.canvas.asset.copyAssetTooltip",{defaultMessage:"Copy id to clipboard"}),Uu=()=>c.i18n.translate("xpack.canvas.asset.createImageTooltip",{defaultMessage:"Create image element"}),Gu=()=>c.i18n.translate("xpack.canvas.asset.deleteAssetTooltip",{defaultMessage:"Delete"}),$u=()=>c.i18n.translate("xpack.canvas.asset.downloadAssetTooltip",{defaultMessage:"Download"}),Ku=()=>c.i18n.translate("xpack.canvas.asset.thumbnailAltText",{defaultMessage:"Asset thumbnail"}),qu=()=>c.i18n.translate("xpack.canvas.asset.confirmModalButtonLabel",{defaultMessage:"Remove"}),Xu=()=>c.i18n.translate("xpack.canvas.asset.confirmModalDetail",{defaultMessage:"Are you sure you want to remove this asset?"}),Yu=()=>c.i18n.translate("xpack.canvas.asset.confirmModalTitle",{defaultMessage:"Remove Asset"}),Zu=Object(l.connect)((e=>({selectedPage:Z(e)})),(e=>({onCreate:t=>a=>{const n=Fu.get("image"),r=Object(F.fromExpression)(n.expression),o=[{type:"expression",chain:[{type:"function",function:"asset",arguments:{_:[a]}}]}],s=Object(Lu.set)(r,["chain","0","arguments","dataurl"],o);n.expression=Object(F.toExpression)(s),e(_t(t,n))},onDelete:t=>e(ii(t.id))})),((e,t,a)=>{const{onCreate:n,onDelete:r}=t;return{...a,onCreate:n(e.selectedPage),onDelete:r}}))((({asset:e,onCreate:t,onDelete:a})=>{const{success:r}=Object(y.useNotifyService)(),[o,s]=Object(n.useState)(!1),i=Object(Vt.jsx)(Li.a,{isOpen:o,title:Yu(),message:Xu(),confirmButtonText:qu(),onConfirm:()=>{s(!1),a(e)},onCancel:()=>s(!1)}),c=Object(Vt.jsx)(Wt.EuiFlexItem,{className:"asset-create-image",grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:Uu()},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"vector","aria-label":Uu(),onClick:()=>t(e.id)}))),l=Object(Vt.jsx)(Wt.EuiFlexItem,{className:"asset-download",grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:$u()},Object(Vt.jsx)(Wu,{fileName:e.id,content:e.value},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"sortDown","aria-label":$u()})))),d=Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:Vu()},Object(Vt.jsx)(Ru,{content:e.id,onCopy:t=>t&&r(`Copied '${e.id}' to clipboard`)},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"copyClipboard","aria-label":Vu()})))),u=Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:Gu()},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":Gu(),onClick:()=>s(!0)}))),p=Object(Vt.jsx)("div",{className:"canvasAsset__thumb canvasCheckered"},Object(Vt.jsx)(Wt.EuiImage,{className:"canvasAsset__img",size:"original",url:e.value,fullScreenIconColor:"dark",alt:Ku()})),g=Object(Vt.jsx)(Wt.EuiText,{size:"xs",className:"eui-textBreakAll"},Object(Vt.jsx)("p",{className:"eui-textBreakAll"},Object(Vt.jsx)("strong",null,e.id),Object(Vt.jsx)("br",null),Object(Vt.jsx)(Wt.EuiTextColor,{color:"subdued"},Object(Vt.jsx)("small",null,"(",Math.round(e.value.length/1024)," kb)"))));return Object(Vt.jsx)(Wt.EuiFlexItem,{key:e.id},Object(Vt.jsx)(Wt.EuiPanel,{className:"canvasAsset",paddingSize:"s"},p,Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),g,Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"baseline",justifyContent:"center",responsive:!1},c,l,d,u)),o?i:null)})),Ju=()=>c.i18n.translate("xpack.canvas.assetModal.modalDescription",{defaultMessage:"Below are the image assets in this workpad. Any assets that are currently in use cannot be determined at this time. To reclaim space, delete assets."}),Qu=()=>c.i18n.translate("xpack.canvas.assetModal.emptyAssetsDescription",{defaultMessage:"Import your assets to get started"}),ep=()=>c.i18n.translate("xpack.canvas.assetModal.filePickerPromptText",{defaultMessage:"Select or drag and drop images"}),tp=()=>c.i18n.translate("xpack.canvas.assetModal.loadingText",{defaultMessage:"Uploading images"}),ap=()=>c.i18n.translate("xpack.canvas.assetModal.modalCloseButtonLabel",{defaultMessage:"Close"}),np=()=>c.i18n.translate("xpack.canvas.assetModal.modalTitle",{defaultMessage:"Manage workpad assets"}),rp=e=>c.i18n.translate("xpack.canvas.assetModal.spacedUsedText",{defaultMessage:"{percentageUsed}% space used",values:{percentageUsed:e}}),op=Object(l.connect)((e=>({assets:B(e)})),(e=>({onAddAsset:(t,a)=>{const n=Object(la.a)("asset");return e(oi(t,a,n)),n}})),((e,t,a)=>{const{assets:n}=e,{onAddAsset:r}=t,o=Object.values(n).filter((e=>!!e));return{...a,assets:o,onAddAsset:e=>{const[t,a]=Object(d.get)(e,"type","").split("/");return"image"===t&&oa.D.indexOf(a)>=0&&Object(Lt.encode)(e).then((e=>{const t="dataurl",a=di(t,e,o);return a||r(t,e)}))}}}))((e=>{const{assets:t,onClose:a,onAddAsset:r}=e,[o,s]=Object(n.useState)(!1),i=Math.round(t.reduce(((e,{value:t})=>e+t.length),0)/1024),c=Math.round(i/oa.k*100),l=Object(Vt.jsx)("div",{className:"canvasAssetManager__emptyPanel"},Object(Vt.jsx)(Wt.EuiEmptyPrompt,{iconType:"importAction",title:Object(Vt.jsx)("h2",null,Qu()),titleSize:"xs"}));return Object(Vt.jsx)(Wt.EuiModal,{onClose:()=>a(),className:"canvasAssetManager canvasModal--fixedSize",maxWidth:"1000px"},Object(Vt.jsx)(Wt.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},Object(Vt.jsx)(Wt.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},np()),Object(Vt.jsx)(Wt.EuiFlexGroup,{className:"canvasAssetManager__fileUploadWrapper"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},o?Object(Vt.jsx)(Ms.a,{animated:!0,text:tp()}):Object(Vt.jsx)(Wt.EuiFilePicker,{initialPromptText:ep(),compressed:!0,display:"default",multiple:!0,onChange:e=>{null!==e&&(s(!0),Promise.all(Array.from(e).map((e=>r(e)))).finally((()=>{s(!1)})))},accept:"image/*"})))),Object(Vt.jsx)(Wt.EuiModalBody,null,Object(Vt.jsx)(Wt.EuiText,{size:"s",color:"subdued"},Object(Vt.jsx)("p",null,Ju())),Object(Vt.jsx)(Wt.EuiSpacer,null),t.length?Object(Vt.jsx)(Wt.EuiFlexGrid,{columns:4},t.map((e=>Object(Vt.jsx)(Zu,{asset:e,key:e.id})))):l),Object(Vt.jsx)(Wt.EuiModalFooter,{className:"canvasAssetManager__modalFooter"},Object(Vt.jsx)(Wt.EuiFlexGroup,{className:"canvasAssetManager__meterWrapper",responsive:!1},Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiProgress,{value:i,max:oa.k,color:c<90?"secondary":"danger",size:"s","aria-labelledby":"CanvasAssetManagerLabel"})),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1,className:"eui-textNoWrap"},Object(Vt.jsx)(Wt.EuiText,{id:"CanvasAssetManagerLabel"},rp(c)))),Object(Vt.jsx)(Wt.EuiButton,{size:"s",onClick:()=>a()},ap())))}));var sp=a(192);const ip=()=>c.i18n.translate("xpack.canvas.elementControls.deleteAriaLabel",{defaultMessage:"Delete element"}),cp=()=>c.i18n.translate("xpack.canvas.elementControls.deleteToolTip",{defaultMessage:"Delete"}),lp=()=>c.i18n.translate("xpack.canvas.elementControls.editAriaLabel",{defaultMessage:"Edit element"}),dp=()=>c.i18n.translate("xpack.canvas.elementControls.editToolTip",{defaultMessage:"Edit"}),up=({onDelete:e,onEdit:t})=>Object(Vt.jsx)(Wt.EuiFlexGroup,{className:"canvasElementCard__controls",gutterSize:"xs",justifyContent:"spaceBetween"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:dp()},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"pencil","aria-label":lp(),onClick:t,"data-test-subj":"canvasElementCard__editButton"}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{content:cp()},Object(Vt.jsx)(Wt.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":ip(),onClick:e,"data-test-subj":"canvasElementCard__deleteButton"})))),pp=({elements:e,filterText:t,onClick:a,onEdit:n,onDelete:r})=>(t=t.toLowerCase(),Object(Vt.jsx)(Wt.EuiFlexGrid,{gutterSize:"l",columns:4},Object(d.map)(e,((e,o)=>{const{name:s,displayName:i="",help:c="",image:l}=e;return!t.length||s.toLowerCase().includes(t)||i.toLowerCase().includes(t)||c.toLowerCase().includes(t)?Object(Vt.jsx)(Wt.EuiFlexItem,{key:o,className:"canvasElementCard__wrapper"},Object(Vt.jsx)(nu,{title:i||s,description:c,image:l,onClick:()=>a(e)}),Object(Vt.jsx)(up,{onEdit:()=>n(e),onDelete:()=>r(e)})):null}))));pp.defaultProps={filterText:""};const gp=()=>c.i18n.translate("xpack.canvas.savedElementsModal.addNewElementDescription",{defaultMessage:"Group and save workpad elements to create new elements"}),bp=()=>c.i18n.translate("xpack.canvas.savedElementsModal.addNewElementTitle",{defaultMessage:"Add new elements"}),fp=()=>c.i18n.translate("xpack.canvas.savedElementsModal.cancelButtonLabel",{defaultMessage:"Cancel"}),mp=()=>c.i18n.translate("xpack.canvas.savedElementsModal.deleteButtonLabel",{defaultMessage:"Delete"}),vp=()=>c.i18n.translate("xpack.canvas.savedElementsModal.deleteElementDescription",{defaultMessage:"Are you sure you want to delete this element?"}),hp=e=>c.i18n.translate("xpack.canvas.savedElementsModal.deleteElementTitle",{defaultMessage:"Delete element '{elementName}'?",values:{elementName:e}}),xp=()=>c.i18n.translate("xpack.canvas.savedElementsModal.editElementTitle",{defaultMessage:"Edit element"}),yp=()=>c.i18n.translate("xpack.canvas.savedElementsModal.findElementPlaceholder",{defaultMessage:"Find element"}),_p=()=>c.i18n.translate("xpack.canvas.savedElementsModal.modalTitle",{defaultMessage:"My elements"}),jp=()=>c.i18n.translate("xpack.canvas.workpadHeader.addElementModalCloseButtonLabel",{defaultMessage:"Close"}),wp=({customElements:e,onAddCustomElement:t,onClose:a,onRemoveCustomElement:r,onUpdateCustomElement:o,onSearch:s,initialSearch:i=""})=>{const c=Object(n.useRef)(!1),[l,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(null),[b,f]=Object(n.useState)(i);Object(n.useEffect)((()=>{c.current||(c.current=!0,s(""))}),[s,c]);const m=e=>g(e),v=()=>g(null),h=async(e,t,a)=>{p&&o(p.id,e,t,a),v()},x=e=>u(e),y=()=>u(null),_=async()=>{l&&r(l.id),y()};let j=Object(Vt.jsx)(Wt.EuiEmptyPrompt,{iconType:"vector",title:Object(Vt.jsx)("h2",null,bp()),body:Object(Vt.jsx)("p",null,gp()),titleSize:"s"});var w;return e.length&&(j=Object(Vt.jsx)(pp,{elements:(w=e,Object(d.sortBy)(w,"displayName")),filterText:b,onClick:t,onEdit:m,onDelete:x})),Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(Wt.EuiModal,{onClose:a,className:"canvasModal--fixedSize",maxWidth:"1000px",initialFocus:".canvasElements__filter input"},Object(Vt.jsx)(Wt.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},Object(Vt.jsx)(Wt.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},_p())),Object(Vt.jsx)(Wt.EuiModalBody,{style:{paddingRight:"1px"}},Object(Vt.jsx)(Wt.EuiFieldSearch,{fullWidth:!0,value:b,placeholder:yp(),onChange:e=>f(e.target.value)}),Object(Vt.jsx)(Wt.EuiSpacer,null),j),Object(Vt.jsx)(Wt.EuiModalFooter,null,Object(Vt.jsx)(Wt.EuiButton,{size:"s",onClick:a,"data-test-subj":"saved-elements-modal-close-button"},jp()))),l?Object(Vt.jsx)(sp.a,{isOpen:!0,title:hp(l.displayName),message:vp(),confirmButtonText:mp(),cancelButtonText:fp(),onConfirm:_,onCancel:y}):null,p?Object(Vt.jsx)(custom_element_modal_CustomElementModal,{title:xp(),name:p.displayName,description:p.help,image:p.image,onSave:h,onCancel:v}):null)},Op=({onClose:e})=>{const t=Object(y.useNotifyService)(),a=Object(y.useCustomElementService)(),r=Object(l.useDispatch)(),o=Object(l.useSelector)(Z),[s,i]=Object(n.useState)([]),c=async(e="")=>{try{const{customElements:t}=await a.find(e);i(t)}catch(e){t.error(e,{title:"Couldn't find custom elements"})}};return Object(Vt.jsx)(wp,{onAddCustomElement:t=>{const{selectedNodes:a=[]}=JSON.parse(t.content)||{},n=a&&da(a);n&&(r(pt(n,o)),r(Re(n.filter((e=>!e.position.parent)).map((e=>e.id))))),e(),Ic(Nc.METRIC_TYPE.LOADED,"elements-custom-added")},onClose:e,onRemoveCustomElement:async e=>{try{await a.remove(e),await c()}catch(e){t.error(e,{title:"Couldn't delete custom elements"})}},onSearch:c,onUpdateCustomElement:async(e,n,r,o)=>{try{await a.update(e,{name:Object(d.camelCase)(n),displayName:n,image:o,help:r}),await c()}catch(e){t.error(e,{title:"Couldn't update custom elements"})}},customElements:s})},kp=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.manageAssetsMenuItemLabel",{defaultMessage:"Manage assets"}),Ep=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.elementMenuButtonLabel",{defaultMessage:"Add element"}),Mp=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.elementMenuLabel",{defaultMessage:"Add an element"}),Sp=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.embedObjectMenuItemLabel",{defaultMessage:"Add from Kibana"}),Cp=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.filterMenuItemLabel",{defaultMessage:"Filter"}),Pp=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.imageMenuItemLabel",{defaultMessage:"Image"}),Ap=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.myElementsMenuItemLabel",{defaultMessage:"My elements"}),Tp=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.otherMenuItemLabel",{defaultMessage:"Other"}),Np=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.progressMenuItemLabel",{defaultMessage:"Progress"}),Dp=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.shapeMenuItemLabel",{defaultMessage:"Shape"}),Ip=()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.textMenuItemLabel",{defaultMessage:"Text"}),Fp={chart:{name:(()=>c.i18n.translate("xpack.canvas.workpadHeaderElementMenu.chartMenuItemLabel",{defaultMessage:"Chart"}))(),icon:"visArea"},filter:{name:Cp(),icon:"filter"},image:{name:Pp(),icon:"image"},other:{name:Tp(),icon:"empty"},progress:{name:Np(),icon:"visGoal"},shape:{name:Dp(),icon:"node"},text:{name:Ip(),icon:"visText"}},Lp=e=>e&&e.type&&Object.keys(Fp).includes(e.type)?e.type:"other";var Rp=a(53);const zp=()=>c.i18n.translate("xpack.canvas.embedObject.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."}),Bp=()=>c.i18n.translate("xpack.canvas.embedObject.titleText",{defaultMessage:"Add from Kibana"}),Hp=({onSelect:e,availableEmbeddables:t,onClose:a})=>{const n=Object(y.useEmbeddablesService)(),r=Object(y.usePlatformService)(),{getEmbeddableFactories:o}=n,{getSavedObjects:s,getUISettings:i}=r,c=o(),l=Array.from(c).filter((e=>t.includes(e.type))).map((e=>e.savedObjectMetaData)).filter((function(e){return void 0!==e}));return Object(Vt.jsx)(Wt.EuiFlyout,{ownFocus:!0,onClose:a,"data-test-subj":"dashboardAddPanel"},Object(Vt.jsx)(Wt.EuiFlyoutHeader,{hasBorder:!0},Object(Vt.jsx)(Wt.EuiTitle,{size:"m"},Object(Vt.jsx)("h2",null,Bp()))),Object(Vt.jsx)(Wt.EuiFlyoutBody,null,Object(Vt.jsx)(Rp.SavedObjectFinderUi,{onChoose:(t,a,n)=>{const r=o(),s=Array.from(r).find((e=>Boolean(e.savedObjectMetaData&&e.savedObjectMetaData.type===a))),i=s?s.type:"unknown";e(t,i)},savedObjectMetaData:l,showFilter:!0,noItemsMessage:zp(),savedObjects:s(),uiSettings:i()})))};var Wp=a(107);const Vp={[Wp.b.map]:e=>`savedMap id="${e}" | render`,[Wp.b.lens]:e=>`savedLens id="${e}" | render`,[Wp.b.visualization]:e=>`savedVisualization id="${e}" | render`},Up=e=>{const t=Object(n.useMemo)((()=>document.createElement("div")),[]);return Object(n.useEffect)((()=>{let e=document.querySelector("body");return e&&t&&e.appendChild(t),()=>{e=document.querySelector("body"),e&&t&&e.removeChild(t)}}),[t]),t?Object(o.createPortal)(Object(Vt.jsx)(Hp,zt()({},e,{availableEmbeddables:Object.keys(Vp)})),t):null},Gp=({availableEmbeddables:e,...t})=>{const a=Object(l.useDispatch)(),r=Object(l.useSelector)((e=>Z(e))),o=Object(n.useCallback)(((e,t)=>a(_t(e,t))),[a]),s=Object(n.useCallback)(((e,a)=>{const n={expression:`markdown "Could not find embeddable for type ${a}" | render`};Vp[a]&&(n.expression=Vp[a](e)),o(r,n),t.onClose()}),[o,r,t]);return Object(Vt.jsx)(Up,zt()({},t,{availableEmbeddables:e||[],onSelect:s}))},$p=Object(ha.compose)(Object(l.connect)((e=>({pageId:Z(e)})),(e=>({addElement:t=>a=>e(_t(t,a))})),((e,t)=>({...e,...t,addElement:t.addElement(e.pageId),renderEmbedPanel:e=>Object(Vt.jsx)(Gp,{onClose:e})}))),Object(ha.withProps)((()=>({elements:Fu.toJS()}))))((({elements:e,addElement:t,renderEmbedPanel:a})=>{const[r,o]=Object(n.useState)(!1),[s,i]=Object(n.useState)(!1),[c,l]=Object(n.useState)(!1),{chart:u,filter:p,image:g,other:b,progress:f,shape:m,text:v}=(e=>{e=Object(d.sortBy)(e,"displayName");const t={other:[]};return e.forEach((e=>{const a=Lp(e);t[a]?t[a].push(e):t[a]=[e]})),t})(Object.values(e)),h=e=>{const a=a=>({name:a.displayName||a.name,icon:a.icon,onClick:()=>{t(a),e()}}),n=e=>{const t=Lp(e[0]),{name:n,icon:r}=Fp[t]||Fp.other;return e.length>1?{name:n,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:r,size:"m"}),panel:{id:Object(la.a)("element-type"),title:n,items:e.map(a)}}:a(e[0])};return{id:0,items:[n(v),n(m),n(u),n(g),n(p),n(f),n(b),{name:Ap(),className:es.CONTEXT_MENU_TOP_BORDER_CLASSNAME,"data-test-subj":"saved-elements-menu-option",icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{l(!0),e()}},{name:kp(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{o(!0),e()}},{name:Sp(),className:es.CONTEXT_MENU_TOP_BORDER_CLASSNAME,icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"logoKibana",size:"m"}),onClick:()=>{i(!0),e()}}]}};return Object(Vt.jsx)(n.Fragment,null,Object(Vt.jsx)(rs.a,{button:e=>Object(Vt.jsx)(Wt.EuiButton,{fill:!0,iconType:"plusInCircle",size:"s","aria-label":Mp(),onClick:e,className:"canvasElementMenu__popoverButton","data-test-subj":"add-element-button"},Ep()),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(Vt.jsx)(Wt.EuiContextMenu,{initialPanelId:0,panels:tu(h(e))}))),r?Object(Vt.jsx)(op,{onClose:()=>o(!1)}):null,s?a((()=>i(!1))):null,c?Object(Vt.jsx)(Op,{onClose:()=>l(!1)}):null)}));var Kp=a(106);const qp=()=>c.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadRuntimeFailureErrorMessage",{defaultMessage:"Couldn't download Shareable Runtime"}),Xp=()=>c.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadZippedRuntimeFailureErrorMessage",{defaultMessage:"Couldn't download ZIP file"}),Yp=e=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWebsiteErrorTitle",{defaultMessage:"Failed to create {ZIP} file for '{workpadName}'. The workpad may be too large. You'll need to download the files separately.",values:{ZIP:rc.N,workpadName:e}}),Zp=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.workpadStep.downloadLabel",{defaultMessage:"Download workpad"}),Jp=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.workpadStep.description",{defaultMessage:"The workpad will be exported as a single {JSON} file for sharing in another site.",values:{JSON:rc.s}}),Qp=({onDownload:e})=>Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)("p",null,Jp()),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiButton,{onClick:()=>{e("share")},size:"s"},Zp())),eg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.runtimeStep.downloadLabel",{defaultMessage:"Download runtime"}),tg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.runtimeStep.description",{defaultMessage:"In order to render a Shareable Workpad, you also need to include the {CANVAS} Shareable Workpad Runtime. You can skip this step if the runtime is already included on your website.",values:{CANVAS:rc.d}}),ag=({onDownload:e})=>Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)("p",null,tg()),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiButton,{onClick:()=>{e("shareRuntime")},size:"s"},eg())),ng=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.autoplayParameterDescription",{defaultMessage:"Should the runtime automatically move through the pages of the workpad?"}),rg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.callRuntimeLabel",{defaultMessage:"Call Runtime"}),og=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.heightParameterDescription",{defaultMessage:"The height of the Workpad. Defaults to the Workpad height."}),sg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.intervalParameterDescription",{defaultMessage:"The interval upon which the pages will advance in time format, (e.g. {twoSeconds}, {oneMinute})",values:{twoSeconds:"2s",oneMinute:"1m"}}),ig=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.pageParameterDescription",{defaultMessage:"The page to display. Defaults to the page specified by the Workpad."}),cg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.parametersDescription",{defaultMessage:"There are a number of inline parameters to configure the Shareable Workpad."}),lg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.parametersLabel",{defaultMessage:"Parameters"}),dg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.placeholderLabel",{defaultMessage:"Placeholder"}),ug=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.requiredLabel",{defaultMessage:"required"}),pg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.shareableParameterDescription",{defaultMessage:"The type of shareable. In this case, a {CANVAS} Workpad.",values:{CANVAS:rc.d}}),gg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.description",{defaultMessage:"The Workpad is placed within the {HTML} of the site by using an {HTML} placeholder. Parameters for the runtime are included inline. See the full list of parameters below. You can include more than one workpad on the page.",values:{HTML:vg}}),bg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.toolbarParameterDescription",{defaultMessage:"Should the toolbar be hidden?"}),fg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.urlParameterDescription",{defaultMessage:"The {URL} of the Shareable Workpad {JSON} file.",values:{URL:rc.L,JSON:rc.s}}),mg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.widthParameterDescription",{defaultMessage:"The width of the Workpad. Defaults to the Workpad width."}),vg=`\x3c!-- ${(()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.includeRuntimeLabel",{defaultMessage:"Include Runtime"}))()} --\x3e\n<script src="kbn_canvas.js"><\/script>\n\n\x3c!-- ${dg()} --\x3e\n<div kbn-canvas-shareable="canvas" kbn-canvas-url="workpad.json" />\n\n\x3c!-- ${rg()} --\x3e\n<script type="text/javascript">\n  KbnCanvas.share();\n<\/script>`,hg=({onCopy:e})=>Object(Vt.jsx)("div",null,Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)("p",null,gg())),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Ru,{content:vg,onCopy:e},Object(Vt.jsx)(Wt.EuiCodeBlock,{className:"canvasShareMenu__reportingConfig",paddingSize:"s",fontSize:"s",language:"html"},vg)),Object(Vt.jsx)(Wt.EuiSpacer,null),Object(Vt.jsx)(Wt.EuiText,null,Object(Vt.jsx)("h4",null,lg()),Object(Vt.jsx)("p",null,cg())),Object(Vt.jsx)(Wt.EuiHorizontalRule,null),Object(Vt.jsx)(Wt.EuiDescriptionList,null,Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,'kbn-canvas-shareable="canvas"')," (",ug(),")"),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,pg()),Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,"kbn-canvas-url")," (",ug(),")"),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,fg()),Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,"kbn-canvas-height")),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,og()),Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,"kbn-canvas-width")),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,mg()),Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,"kbn-canvas-page")),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,ig()),Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,"kbn-canvas-autoplay")),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,ng()),Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,"kbn-canvas-interval")),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,sg()),Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,Object(Vt.jsx)(Wt.EuiCode,null,"kbn-canvas-toolbar")),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,bg()))),xg=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.copyShareConfigMessage",{defaultMessage:"Copied share markup to clipboard"}),yg=e=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unknownExportErrorMessage",{defaultMessage:"Unknown export type: {type}",values:{type:e}}),_g=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.downloadRuntimeTitle",{defaultMessage:"Download runtime"}),jg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.addSnippetsTitle",{defaultMessage:"Add snippets to website"}),wg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.description",{defaultMessage:"Follow these steps to share a static version of this workpad on an external website. It will be a visual snapshot of the current workpad, and will not have access to live data."}),Og=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.flyoutTitle",{defaultMessage:"Share on a website"}),kg=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unsupportedRendererWarning",{defaultMessage:"This workpad contains render functions that are not supported by the {CANVAS} Shareable Workpad Runtime. These elements will not be rendered:",values:{CANVAS:rc.d}}),Eg=()=>c.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.downloadWorkpadTitle",{defaultMessage:"Download workpad"}),Mg=(e,t)=>[{title:Eg(),children:Object(Vt.jsx)(Qp,{onDownload:e})},{title:_g(),children:Object(Vt.jsx)(ag,{onDownload:e})},{title:jg(),children:Object(Vt.jsx)(hg,{onCopy:t})}],Sg=({onClose:e,unsupportedRenderers:t,renderedWorkpad:a})=>{const r=Object(y.useNotifyService)(),o=Object(n.useCallback)((()=>r.info(xg())),[r]),s=Object(Kp.a)(),c=(()=>{const e=Object(y.usePlatformService)(),t=Object(y.useNotifyService)();return Object(n.useCallback)((()=>{try{const t=`${e.getBasePath()}${oa.d}`;return void window.open(t)}catch(e){t.error(e,{title:qp()})}}),[e,t])})(),l=(()=>{const e=Object(y.useWorkpadService)(),t=Object(y.useNotifyService)();return Object(n.useCallback)((a=>{(async()=>{try{let n;try{n=await e.getRuntimeZip(a)}catch(e){t.error(e,{title:Yp(a.name)})}n&&Hu.a.saveAs(n,"canvas-workpad-embed.zip")}catch(e){t.error(e,{title:Xp()})}})()}),[t,e])})(),d=Object(n.useCallback)((e=>{switch(e){case"share":return void s(a);case"shareRuntime":return void c();case"shareZip":return void l(a);default:throw new Error(yg(e))}}),[s,c,l,a]),u=Object(Vt.jsx)(Wt.EuiLink,{style:{textDecoration:"underline"},onClick:()=>{d("shareZip")}},Object(Vt.jsx)(i.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.zipDownloadLinkLabel",defaultMessage:"download an example {ZIP} file",values:{ZIP:rc.N}})),p=Object(Vt.jsx)("div",null,Object(Vt.jsx)(i.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.flyoutCalloutDescription",defaultMessage:"To try sharing, you can {link} containing this workpad, the {CANVAS} Shareable Workpad runtime, and a sample {HTML} file.",values:{CANVAS:rc.d,HTML:rc.o,link:u}}));let g=null;if(t&&t.length>0){const e=[Object(Vt.jsx)(Wt.EuiText,{size:"s",key:"text"},Object(Vt.jsx)("span",null,kg()),t.map(((e,a)=>[Object(Vt.jsx)(Wt.EuiCode,{key:`item-${a}`},e),a<t.length-1?", ":""]))),Object(Vt.jsx)(Wt.EuiSpacer,{size:"xs",key:"spacer"})];g=[Object(Vt.jsx)(Wt.EuiCallOut,{title:e,color:"warning",size:"s",iconType:"alert",key:"callout"}),Object(Vt.jsx)(Wt.EuiSpacer,{key:"spacer"})]}return Object(Vt.jsx)(Wt.EuiFlyout,{onClose:()=>e("share"),maxWidth:!0},Object(Vt.jsx)(Wt.EuiFlyoutHeader,{hasBorder:!0},Object(Vt.jsx)(Wt.EuiTitle,{size:"m"},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center"},Object(Vt.jsx)("h2",{id:"flyoutTitle"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Og())),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiBetaBadge,{label:"Beta",color:"accent"}))))),Object(Vt.jsx)(Wt.EuiFlyoutBody,null,Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)("p",null,wg())),Object(Vt.jsx)(Wt.EuiSpacer,null),Object(Vt.jsx)(Wt.EuiCallOut,{size:"s",title:p,iconType:"iInCircle"}),Object(Vt.jsx)(Wt.EuiSpacer,null),g,Object(Vt.jsx)(Wt.EuiSteps,{steps:Mg(d,o)})))};var Cg=a(162),Pg=a(163),Ag=a(164),Tg=a(168),Ng=a(167),Dg=a(37),Ig=a(39),Fg=a(40),Lg=a(30),Rg=a(38);const zg=[Ws.debugRenderer,Ws.errorRenderer,Dg.imageRenderer,Ig.repeatImageRenderer,Fg.revealImageRenderer,Cg.a,Rg.metricRenderer,Pg.a,Ag.a,Lg.progressRenderer,Lg.shapeRenderer,Tg.a,Ng.a].map((e=>e.name)),Bg=e=>{const t=[],a=function(e){const t=_e(e),{pages:a}=t,n=[];return a.forEach((e=>e.elements.forEach((e=>{if(e&&e.expressionRenderable){const{value:t}=e.expressionRenderable;if(t){const{as:e}=t;n.includes(e)||n.push(e)}}})))),n}(e);return a.forEach((e=>{zg.includes(e)||t.push(e)})),t},Hg=({onClose:e})=>{const{renderedWorkpad:t,unsupportedRenderers:a}=Object(l.useSelector)((e=>({renderedWorkpad:_e(e),unsupportedRenderers:Bg(e),workpad:U(e)})));return Object(Vt.jsx)(Sg,{onClose:e,unsupportedRenderers:a,renderedWorkpad:t})},Wg=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareDownloadJSONTitle",{defaultMessage:"Download as {JSON}",values:{JSON:rc.s}}),Vg=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareDownloadPDFTitle",{defaultMessage:"{PDF} reports",values:{PDF:rc.z}}),Ug=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareMenuButtonLabel",{defaultMessage:"Share"}),Gg=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWebsiteTitle",{defaultMessage:"Share on a website"}),$g=()=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWorkpadMessage",{defaultMessage:"Share this workpad"}),Kg=({ReportingComponent:e,onExport:t})=>{const[a,r]=Object(n.useState)(!1),o=a=>({id:0,items:[{name:Wg(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"exportAction",size:"m"}),onClick:()=>{t("json"),a()}},null!==e&&{name:Vg(),icon:"document",panel:{id:1,title:Vg(),content:Object(Vt.jsx)(e,{onClose:a})},"data-test-subj":"sharePanel-PDFReports"},{name:Gg(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"globe",size:"m"}),onClick:()=>{r(!0),a()}}].filter(Boolean)}),s=a?Object(Vt.jsx)(Hg,{onClose:()=>{r(!1)}}):null;return Object(Vt.jsx)("div",null,Object(Vt.jsx)(rs.a,{button:e=>Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s","aria-label":$g(),onClick:e,"data-test-subj":"shareTopNavButton"},Ug()),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(Vt.jsx)(Wt.EuiContextMenu,{initialPanelId:0,panels:tu(o(e))}))),s)};var qg=a(4);const Xg=e=>c.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unknownExportErrorMessage",{defaultMessage:"Unknown export type: {type}",values:{type:e}}),Yg=()=>{const e=Object(Kp.b)(),t=Object(y.useReportingService)(),a=Object(y.usePlatformService)(),{workpad:r,pageCount:o}=Object(l.useSelector)((e=>({workpad:U(e),pageCount:J(e).length}))),s=t.getReportingPanelPDFComponent(),i={workpad:r,pageCount:o},c=null!==s?({onClose:e})=>Object(Vt.jsx)(s,{getJobParams:()=>function({workpad:{id:e,name:t,width:a,height:n},pageCount:r},o){const s=[];for(let t=1;t<=r;t++)s.push({id:qg.a,version:o,params:{view:"workpadPDF",id:e,page:t}});return{layout:{dimensions:{width:a,height:n},id:"canvas"},objectType:"canvas workpad",locatorParams:s,title:t}}(i,a.getKibanaVersion()),layoutOption:"canvas",onClose:e,objectId:r.id}):null,d=Object(n.useCallback)((t=>{switch(t){case"pdf":break;case"json":return void e(r.id);default:throw new Error(Xg(t))}}),[e,r]);return Object(Vt.jsx)(Kg,{ReportingComponent:c,onExport:d})},Zg=(e,t)=>{const a=e/1e3,n=a/60,r=n/60,o=r/24;return"days"===t||o>=1?{length:o,format:"days"}:"hours"===t||r>=1?{length:r,format:"hours"}:"minutes"===t||n>=1?{length:a/60,format:"minutes"}:{length:a,format:"seconds"}},Jg=()=>c.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.confirmButtonLabel",{defaultMessage:"Set"}),Qg=()=>c.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.formDescription",{defaultMessage:"Use shorthand notation, like {secondsExample}, {minutesExample}, or {hoursExample}",values:{secondsExample:"30s",minutesExample:"10m",hoursExample:"1h"}}),eb=()=>c.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.formLabel",{defaultMessage:"Set a custom interval"}),tb=({gutterSize:e,buttonSize:t,onSubmit:a,defaultValue:r})=>{const[o,s]=Object(n.useState)(r),i=Xd(o),c=Boolean(o.length&&!i);return Object(Vt.jsx)("form",{onSubmit:e=>{e.preventDefault(),!c&&i&&a(i)}},Object(Vt.jsx)(Wt.EuiFlexGroup,{gutterSize:e},Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiFormRow,{label:eb(),helpText:Qg(),display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiFieldText,{isInvalid:c,value:o,onChange:e=>s(e.target.value),compressed:!0}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFormRow,{hasEmptyLabelSpace:!0,display:"rowCompressed"},Object(Vt.jsx)(Wt.EuiButton,{disabled:c,size:t,type:"submit",minWidth:"auto"},Jg())))))};tb.defaultProps={buttonSize:"s",gutterSize:"s",defaultValue:""};const{time:ab}=Ce.q,{getSecondsText:nb,getMinutesText:rb,getHoursText:ob}=ab,sb=()=>c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.disableTooltip",{defaultMessage:"Disable auto-refresh"}),ib=()=>c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.intervalFormLabel",{defaultMessage:"Change auto-refresh interval"}),cb=()=>c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.refreshListDurationManualText",{defaultMessage:"Manually"}),lb=()=>c.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.refreshListTitle",{defaultMessage:"Refresh elements"}),db=({children:e,...t})=>Object(Vt.jsx)("ul",zt()({style:{listStyle:"none",margin:0}},t),[e]),ub=Object(Wt.htmlIdGenerator)(),pb=({refreshInterval:e,setRefresh:t,disableInterval:a})=>{const n=({duration:e,label:a,descriptionId:n})=>Object(Vt.jsx)("li",null,Object(Vt.jsx)(Wt.EuiLink,{onClick:()=>t(e),"aria-describedby":n},a)),o=Zg(e),s=ub();return Object(Vt.jsx)(Wt.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiDescriptionList,{textStyle:"reverse"},Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,lb()),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,e>0?Object(Vt.jsx)(r.a.Fragment,null,ab.getCycleTimeText(o.length,o.format)):Object(Vt.jsx)(r.a.Fragment,null,cb())))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e>0?Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:sb()},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"cross",onClick:a,"aria-label":sb()}))):null))),Object(Vt.jsx)(Wt.EuiHorizontalRule,{margin:"m"}),Object(Vt.jsx)(Wt.EuiTitle,{size:"xxxs",id:s},Object(Vt.jsx)("p",null,ib())),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)(db,{"aria-labelledby":s,className:"canvasControlSettings__list"},Object(Vt.jsx)(n,{duration:3e4,label:nb(30),descriptionId:s}),Object(Vt.jsx)(n,{duration:6e4,label:rb(1),descriptionId:s}),Object(Vt.jsx)(n,{duration:3e5,label:rb(5),descriptionId:s}),Object(Vt.jsx)(n,{duration:18e5,label:rb(30),descriptionId:s}),Object(Vt.jsx)(n,{duration:36e5,label:ob(1),descriptionId:s}),Object(Vt.jsx)(n,{duration:432e5,label:ob(12),descriptionId:s}),Object(Vt.jsx)(n,{duration:864e5,label:ob(24),descriptionId:s})))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(tb,{onSubmit:e=>t(e)})))},{time:gb}=Ce.q,{getSecondsText:bb,getMinutesText:fb}=gb,mb=()=>c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.cycleFormLabel",{defaultMessage:"Change cycling interval"}),vb=()=>c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.controlTitle",{defaultMessage:"Cycle fullscreen pages"}),hb=()=>c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.autoplayListDurationManual",{defaultMessage:"Manually"}),xb=()=>c.i18n.translate("xpack.canvas.workpadHeaderKioskControl.disableTooltip",{defaultMessage:"Disable auto-play"}),yb=({children:e,...t})=>Object(Vt.jsx)("ul",zt()({style:{listStyle:"none",margin:0}},t),[e]),_b=Object(Wt.htmlIdGenerator)(),jb=({autoplayInterval:e,onSetInterval:t})=>{const a=Object(n.useCallback)((()=>{t(0)}),[t]),o=({duration:e,label:a,descriptionId:n})=>Object(Vt.jsx)("li",null,Object(Vt.jsx)(Wt.EuiLink,{onClick:()=>t(e),"aria-describedby":n},a)),s=Zg(e),i=_b();return Object(Vt.jsx)(Wt.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},Object(Vt.jsx)(Wt.EuiFlexItem,null,Object(Vt.jsx)(Wt.EuiDescriptionList,{textStyle:"reverse"},Object(Vt.jsx)(Wt.EuiDescriptionListTitle,null,vb()),Object(Vt.jsx)(Wt.EuiDescriptionListDescription,null,e>0?Object(Vt.jsx)(r.a.Fragment,null,gb.getCycleTimeText(s.length,s.format)):Object(Vt.jsx)(r.a.Fragment,null,hb())))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e>0?Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:xb()},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"cross",onClick:a,"aria-label":xb()}))):null))),Object(Vt.jsx)(Wt.EuiHorizontalRule,{margin:"m"}),Object(Vt.jsx)(Wt.EuiTitle,{size:"xxxs",id:i},Object(Vt.jsx)("p",null,mb())),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiText,{size:"s"},Object(Vt.jsx)(yb,{"aria-labelledby":i,className:"canvasControlSettings__list"},Object(Vt.jsx)(o,{duration:5e3,label:bb(5),descriptionId:i}),Object(Vt.jsx)(o,{duration:1e4,label:bb(10),descriptionId:i}),Object(Vt.jsx)(o,{duration:3e4,label:bb(30),descriptionId:i}),Object(Vt.jsx)(o,{duration:6e4,label:fb(1),descriptionId:i}),Object(Vt.jsx)(o,{duration:3e5,label:fb(5),descriptionId:i}),Object(Vt.jsx)(o,{duration:9e5,label:fb(15),descriptionId:i})))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(tb,{onSubmit:e=>t(e)})))},wb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.autoplaySettingsMenuItemLabel",{defaultMessage:"Autoplay settings"}),Ob=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.fullscreenMenuLabel",{defaultMessage:"Enter fullscreen mode"}),kb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.hideEditModeLabel",{defaultMessage:"Hide editing controls"}),Eb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.refreshMenuItemLabel",{defaultMessage:"Refresh data"}),Mb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.refreshSettingsMenuItemLabel",{defaultMessage:"Auto refresh settings"}),Sb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.showEditModeLabel",{defaultMessage:"Show editing controls"}),Cb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.viewMenuButtonLabel",{defaultMessage:"View"}),Pb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.viewMenuLabel",{defaultMessage:"View options"}),Ab=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomFitToWindowText",{defaultMessage:"Fit to window"}),Tb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomInText",{defaultMessage:"Zoom in"}),Nb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomMenuItemLabel",{defaultMessage:"Zoom"}),Db=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomOutText",{defaultMessage:"Zoom out"}),Ib=e=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomResetText",{defaultMessage:"{scalePercentage}%",values:{scalePercentage:100*e}}),Fb=()=>c.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomPrecentageValue",{defaultMessage:"Reset"}),Lb=[.5,1,2],Rb=({enterFullscreen:e,fitToWindow:t,isWriteable:a,resetZoom:n,setZoomScale:r,toggleWriteable:o,zoomIn:s,zoomOut:i,zoomScale:c,doRefresh:l,refreshInterval:d,setRefreshInterval:u,autoplayEnabled:p,autoplayInterval:g,setAutoplayInterval:b})=>{const f=e=>u(e),m=u=>({id:0,items:[{name:Eb(),icon:"refresh",onClick:()=>{l()}},{name:Mb(),icon:"empty",panel:{id:1,title:Mb(),content:Object(Vt.jsx)(pb,{refreshInterval:d,setRefresh:e=>f(e),disableInterval:()=>{f(0)}})}},{name:Ob(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:"fullScreen",size:"m"}),className:oa.o,onClick:()=>{e(),u()}},{name:wb(),icon:"empty",panel:{id:2,title:wb(),content:Object(Vt.jsx)(jb,{autoplayInterval:g,onSetInterval:b})}},{name:a?kb():Sb(),icon:Object(Vt.jsx)(Wt.EuiIcon,{type:a?"eyeClosed":"eye",size:"m"}),className:oa.o,onClick:()=>{o(),u()}},{name:Nb(),icon:"magnifyWithPlus",panel:{id:3,title:Nb(),items:[{name:Ab(),icon:"empty",onClick:t,disabled:c===oa.A},...Lb.map((e=>({name:Ib(e),icon:"empty",onClick:()=>r(e)}))),{name:Tb(),icon:"magnifyWithPlus",onClick:s,disabled:c===oa.A,className:"canvasContextMenu--topBorder"},{name:Db(),icon:"magnifyWithMinus",onClick:i,disabled:c<=oa.B},{name:Fb(),icon:"empty",onClick:n,disabled:c>=oa.A,className:"canvasContextMenu--topBorder"}]}}]});return Object(Vt.jsx)(rs.a,{button:e=>Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s","aria-label":Pb(),onClick:e},Cb()),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(Vt.jsx)(Wt.EuiContextMenu,{initialPanelId:0,panels:tu(m(e)),className:"canvasViewMenu"})))},zb=Object(ha.compose)(Object(l.connect)((e=>({zoomScale:Object(Bt.d)(e),boundingBox:ne(e),workpadWidth:ae(e),workpadHeight:te(e),isWriteable:X(e)&&Object(Bt.a)(e)})),(e=>({setZoomScale:t=>e(He(t)),setWriteable:t=>e(Ot(t)),doRefresh:()=>e(ut())})),((e,t,a)=>{const{boundingBox:n,workpadWidth:r,workpadHeight:o,...s}=e;return{...s,...t,...a,toggleWriteable:()=>t.setWriteable(!e.isWriteable),fitToWindow:()=>t.setZoomScale(((e,t,a)=>{const n=document.querySelector(`#${es.CANVAS_LAYOUT_STAGE_CONTENT_SELECTOR}`),r=n.clientWidth,o=n.clientHeight,s=e.left,i=e.top,c=e.right-t,l=e.bottom-a,d=r/(t+2*Math.max(Math.abs(s),Math.abs(c))+es.WORKPAD_CANVAS_BUFFER),u=o/(a+2*Math.max(Math.abs(i),Math.abs(l))+es.WORKPAD_CANVAS_BUFFER);return Math.min(d,u)})(n,r,o))}})),Object(ha.withHandlers)(Tc))((e=>{const t=Object(l.useDispatch)(),{autoplayInterval:a,setAutoplayInterval:r,setFullscreen:o,setRefreshInterval:s,refreshInterval:i}=Object(n.useContext)(Jd),c=Object(n.useCallback)((()=>{t(Re([])),o(!0)}),[t,o]);return Object(Vt.jsx)(Rb,zt()({},e,{enterFullscreen:c,setAutoplayInterval:r,autoplayEnabled:!0,autoplayInterval:a,setRefreshInterval:s,refreshInterval:i}))})),Bb=()=>c.i18n.translate("xpack.canvas.workpadHeaderLabsControlSettings.labsButtonLabel",{defaultMessage:"Labs"}),Hb=Object(Lt.withSuspense)(Lt.LazyLabsFlyout,null),Wb=()=>{const{isLabsEnabled:e,getProjects:t}=Object(y.useLabsService)(),[a,o]=Object(n.useState)(!1);if(!e())return null;const s=t(["canvas"]),i=Object.values(s).filter((e=>e.status.isOverride)).length;return Object(Vt.jsx)(r.a.Fragment,null,Object(Vt.jsx)(Wt.EuiButtonEmpty,{onClick:()=>o(!a),size:"xs"},Bb(),i>0?Object(Vt.jsx)(Wt.EuiNotificationBadge,{color:"subdued",style:{marginLeft:4}},i):null),a?Object(Vt.jsx)(Hb,{solutions:["canvas"],onClose:()=>o(!1)}):null)},Vb=()=>c.i18n.translate("xpack.canvas.workpadHeader.fullscreenButtonAriaLabel",{defaultMessage:"View fullscreen"}),Ub=()=>c.i18n.translate("xpack.canvas.workpadHeader.fullscreenTooltip",{defaultMessage:"Enter fullscreen mode"}),Gb=()=>c.i18n.translate("xpack.canvas.workpadHeader.hideEditControlTooltip",{defaultMessage:"Hide editing controls"}),$b=()=>c.i18n.translate("xpack.canvas.workpadHeader.noWritePermissionTooltip",{defaultMessage:"You don't have permission to edit this workpad"}),Kb=()=>c.i18n.translate("xpack.canvas.workpadHeader.showEditControlTooltip",{defaultMessage:"Show editing controls"}),qb=Object(l.connect)((e=>({isWriteable:X(e)&&Object(Bt.a)(e),canUserWrite:Object(Bt.a)(e),selectedPage:Z(e)})),(e=>({onSetWriteable:t=>e(Ot(t))})))((({isWriteable:e,canUserWrite:t,commit:a,onSetWriteable:n=(()=>{})})=>{const r=()=>n(!e),o=()=>{if(!t)return $b();return e?Gb():Kb()};return Object(Vt.jsx)(Wt.EuiFlexGroup,{gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween",className:"canvasLayout__stageHeaderInner"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},e&&Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)($p,null)),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(zb,null)),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Iu,{commit:a})),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Yg,null)),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wb,null)))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Wt.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},t&&Object(Vt.jsx)(_.Shortcuts,{name:"EDITOR",handler:e=>{"EDITING"===e&&r()},targetNodeSelector:"body",global:!0,isolate:!0}),Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:(({textOnly:e}={textOnly:!1})=>{const t=o();return e?t:Object(Vt.jsx)("span",null,t," ",Object(Vt.jsx)(or,{namespace:"EDITOR",action:"EDITING"}))})()},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:e?"eyeClosed":"eye",onClick:r,size:"s","aria-label":o(),isDisabled:!t}))),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(Gd,null)),Object(Vt.jsx)(Wt.EuiFlexItem,{grow:!1},Object(Vt.jsx)(eu,null,(({toggleFullscreen:e})=>Object(Vt.jsx)(Wt.EuiToolTip,{position:"bottom",content:Object(Vt.jsx)("span",null,Ub()," ",Object(Vt.jsx)(or,{namespace:"PRESENTATION",action:"FULLSCREEN"}))},Object(Vt.jsx)(Wt.EuiButtonIcon,{iconType:"fullScreen","aria-label":Vb(),onClick:e}))))))))})),Xb="canvasWorkpadContainer",Yb="workpad-loaded";const Zb=(e,t=Ic)=>function(a){const{telemetryElementCounts:r,workpad:o,telemetryResolvedArgs:s,...i}=a,{error:c,pending:l}=r,[d,u]=Object(n.useState)(void 0),[p,g]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{const e=function(e,t){const a=Object.keys(t);return e.pages.reduce(((e,t)=>[...e,...t.elements.map((e=>e.id))]),[]).every((e=>a.includes(e)))}(o,s);if(o.id!==d){u(o.id);const t=o.pages.reduce(((e,t)=>e+t.elements.length),0);g(!!(0===t||e&&0===l))}else!p&&0===l&&e&&(t(Nc.METRIC_TYPE.LOADED,c>0?[Yb,"workpad-loaded-with-errors"]:Yb),g(!0))}),[d,p,c,l,s,o]),Object(Vt.jsx)(e,zt()({},i,{workpad:o}))},Jb=Object(l.connect)((e=>({telemetryElementCounts:se(e),telemetryResolvedArgs:ke(e)})),{}),Qb=Object(l.connect)((e=>({isWriteable:X(e)&&Object(Bt.a)(e),workpad:U(e)})),(e=>({deselectElement:t=>{t.stopPropagation(),e(Re([]))}})))((e=>{const t=Zb(e);return Jb(t)})((({deselectElement:e,isWriteable:t})=>{const a=Object(n.useRef)(null),r=Object(n.useCallback)((e=>{a.current!==e&&(a.current=e)}),[]),o=Object(n.useCallback)((e=>{a.current===e&&(a.current=null)}),[]),s=a.current||(()=>{});return Object(Vt.jsx)("div",{className:"canvasLayout"},Object(Vt.jsx)("div",{className:"canvasLayout__rows"},Object(Vt.jsx)("div",{className:"canvasLayout__cols"},Object(Vt.jsx)("div",{className:"canvasLayout__stage"},Object(Vt.jsx)("div",{className:"canvasLayout__stageHeader"},Object(Vt.jsx)(qb,{commit:s})),Object(Vt.jsx)("div",{id:oa.n,className:oa.n,onMouseDown:e},Object(Vt.jsx)("div",{id:Xb,className:"canvasWorkpadContainer canvasLayout__stageContentOverflow"},Object(Vt.jsx)(Hd,{registerLayout:r,unregisterLayout:o})))),t&&Object(Vt.jsx)("div",{className:"canvasLayout__sidebar hide-for-sharing"},Object(Vt.jsx)(Di,{commit:s}))),Object(Vt.jsx)("div",{className:"canvasLayout__footer hide-for-sharing"},Object(Vt.jsx)(Cc,null))))}))),ef=Object(l.connect)((e=>({workpad:U(e),selectedPageIndex:Y(e)})),(e=>({initializeWorkpad:()=>e(Tt())})))((({workpad:e,selectedPageIndex:t,initializeWorkpad:a})=>{const{id:r,pages:o,height:s,width:i}=e,c=o[t],l=c.elements.length;return Object(n.useEffect)((()=>a())),Object(Vt.jsx)("div",{className:"canvasExport","data-shared-page":t+1},Object(Vt.jsx)("div",{className:"canvasExport__stage"},Object(Vt.jsx)("div",{className:"canvasLayout__stageHeader"},Object(Vt.jsx)(Ri.b,{to:`/workpad/${r}`},"Edit Workpad")),Fi.a.it(e.css,Object(Vt.jsx)("div",{className:"canvasExport__stageContent","data-shared-items-count":l},Object(Vt.jsx)(Fd,{isSelected:!0,key:c.id,pageId:c.id,height:s,width:i,registerLayout:()=>{},unregisterLayout:()=>{}})))))})),tf=()=>c.i18n.translate("xpack.canvas.canvasLoading.loadingMessage",{defaultMessage:"Loading"}),af=({msg:e=`${tf()}...`})=>Object(Vt.jsx)("div",{className:"canvasContainer--loading"},Object(Vt.jsx)(Wt.EuiPanel,null,Object(Vt.jsx)(Wt.EuiLoadingChart,{size:"m"}),Object(Vt.jsx)(Wt.EuiSpacer,{size:"s"}),Object(Vt.jsx)(Wt.EuiText,{color:"default",size:"s"},Object(Vt.jsx)("p",null,e)))),nf=(e,t=!0,a)=>{const r=Object(y.useWorkpadService)().resolve,o=Object(y.usePlatformService)(),s=Object(l.useDispatch)(),i=Object(l.useSelector)(U),[d,u]=Object(n.useState)(void 0),[p,g]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{(async()=>{try{const{outcome:a,aliasId:n,workpad:{assets:o,...i}}=await r(e);g({aliasId:n,outcome:a,id:e}),"aliasMatch"!==a&&(i.aliasId=n,s(ci(o)),s(Ft(i,{loadPages:t})),s(He(1)))}catch(e){u(e)}})()}),[e,s,u,t,r]),Object(n.useEffect)((()=>{p&&p.id!==e||(async()=>{if(!p)return;const{aliasId:e,outcome:t}=p;if("aliasMatch"===t&&o.redirectLegacyUrl&&e){const t=a(e);await o.redirectLegacyUrl(`#${t}`,c.i18n.translate("xpack.canvas.workpadResolve.redirectLabel",{defaultMessage:"Workpad"}))}})()}),[e,p,a,o]),[i.id===e?i:void 0,d]},rf=(Object(D.createAction)("undoHistory"),Object(D.createAction)("redoHistory"),Object(D.createAction)("restoreHistory"));var of=a(326),sf=a.n(of);const cf=e=>{try{const t=JSON.stringify(e);return sf.a.compress(t)}catch(e){throw new Error(`Could not encode state: ${e.message}`)}},lf=e=>{try{var t;const a=null!==(t=sf.a.decompress(e))&&void 0!==t?t:"null";return JSON.parse(a)}catch(e){return null}};var df=a(41);const uf=()=>{const e=Object(T.useParams)(),t=Object(l.useSelector)(U),a=Object(l.useDispatch)(),r=parseInt(e.pageNumber,10);let o=t.page;isNaN(r)||(o=r-1),Object(n.useEffect)((()=>{o!==t.page&&a(Tr(o))}),[o,t.page,a])},pf=()=>c.i18n.translate("xpack.canvas.error.esPersist.saveFailureTitle",{defaultMessage:"Couldn't save your changes to Elasticsearch"}),gf=()=>c.i18n.translate("xpack.canvas.error.esPersist.tooLargeErrorMessage",{defaultMessage:"The server gave a response that the workpad data was too large. This usually means uploaded image assets that are too large for Kibana or a proxy. Try removing some assets in the asset manager."}),bf=()=>c.i18n.translate("xpack.canvas.error.esPersist.updateFailureTitle",{defaultMessage:"Couldn't update workpad"}),ff="canvas-isFullscreen",mf=({children:e})=>{var t;const a=Object(y.usePlatformService)(),o=Object(l.useSelector)(U);(()=>{const{isFullscreen:e}=Object(n.useContext)(Jd),{setFullscreen:t}=Object(y.usePlatformService)();Object(n.useEffect)((()=>{const a=document.querySelector("body").classList,n=a.contains(ff);e&&!n?(t(!1),a.add(ff)):!e&&n&&(a.remove(ff),t(!0))}),[e,t]),Jo()((()=>()=>{var e;t(!0),null===(e=document.querySelector("body"))||void 0===e||e.classList.remove(ff)}))})(),(()=>{const{nextPage:e,isFullscreen:t,autoplayInterval:a,isAutoplayPaused:r}=Object(n.useContext)(Jd),o=Object(n.useRef)(void 0);Object(n.useEffect)((()=>((o.current||!t||r)&&clearTimeout(o.current),t&&!r&&a>0&&(o.current=window.setTimeout((()=>{e()}),a)),()=>clearTimeout(o.current))),[t,e,a,r])})(),(()=>{const e=Object(l.useDispatch)(),{refreshInterval:t}=Object(n.useContext)(Jd),a=Object(n.useRef)(void 0),r=Object(l.useSelector)(Me);Object(n.useEffect)((()=>(clearTimeout(a.current),t>0&&!r&&(a.current=window.setTimeout((()=>{e(ut())}),t)),()=>{clearTimeout(a.current)})),[r,e,t])})(),Object(n.useEffect)((()=>{a.setBreadcrumbs([{text:"Canvas",href:"#/"},N({name:o.name})])}),[o.name,o.id,a]),Object(n.useEffect)((()=>{ea(o.name)}),[o.name]);const s=o.aliasId?null===(t=a.getLegacyUrlConflict)||void 0===t?void 0:t.call(a,{objectNoun:c.i18n.translate("xpack.canvas.workpadConflict.redirectLabel",{defaultMessage:"Workpad"}),currentObjectId:o.id,otherObjectId:o.aliasId,otherObjectPath:`#/workpad/${o.aliasId}`}):null;return Object(Vt.jsx)(r.a.Fragment,null,s,e)},{workpadRoutes:vf}=Ce.f,hf=({route:e})=>{const t=Object(n.useCallback)((t=>`/workpad/${t}${e.match.params.pageNumber?`/page/${e.match.params.pageNumber}`:""}`),[e.match.params.pageNumber]);return Object(Vt.jsx)(jf,{params:e.match.params,key:"workpad-loader",getRedirectPath:t},(t=>Object(Vt.jsx)(T.Switch,null,Object(Vt.jsx)(T.Route,{path:"/workpad/:id/page/:pageNumber",children:e=>Object(Vt.jsx)(_f,null,Object(Vt.jsx)(Qd,null,Object(Vt.jsx)(mf,null,Object(Vt.jsx)(Qb,null))))}),Object(Vt.jsx)(T.Route,{path:"/workpad/:id",strict:!1,exact:!0},Object(Vt.jsx)(T.Redirect,{to:`/workpad/${e.match.params.id}/page/${t.page+1}`})))))},xf=({route:{match:e}})=>{const t=Object(n.useCallback)((t=>`/export/workpad/pdf/${t}/page/${e.params.pageNumber}`),[e.params.pageNumber]);return Object(Vt.jsx)(jf,{loadPages:!1,params:e.params,getRedirectPath:t},(()=>Object(Vt.jsx)(yf,null,Object(Vt.jsx)(ef,null))))},yf=({children:e})=>{const t=Object(T.useParams)();uf();const a=Object(l.useDispatch)();return Object(n.useEffect)((()=>{a(ut({onlyActivePage:!0}))}),[a,t.pageNumber]),Object(Vt.jsx)(r.a.Fragment,null,e)},_f=({children:e})=>((()=>{const e=Object(T.useHistory)(),t=Object(T.useLocation)(),a=Object(l.useDispatch)(),{state:r}=t,o=Object(n.useRef)(r),s=e.action.toLowerCase();Object(n.useEffect)((()=>{"pop"===s&&null!=r&&r!==o.current&&(o.current=r,a(rf(lf(r))),a(Tt())),o.current=r}),[a,s,r])})(),(()=>{const e=Object(T.useHistory)(),t=Object(l.useSelector)((e=>e.persistent)),a=Object(n.useRef)(!1);Object(n.useEffect)((()=>{const n=!a.current,r=e.location.state,o=r?lf(r):{},s=Object(d.isEqual)(t,o),i=Object(df.createPath)(e.location);a.current=!0,void 0===r?e.replace(i,cf(t)):n||s||e.push(i,cf(t))}),[e,t,e.location.search])})(),uf(),(()=>{const e=Object(y.useWorkpadService)(),t=Object(y.useNotifyService)(),a=Object(n.useCallback)((e=>{switch(e.response&&e.response.status){case 400:return t.error(e.response,{title:pf()});case 413:return t.error(gf(),{title:pf()});default:return t.error(e,{title:bf()})}}),[t]),[r,o,s,i]=Object(l.useSelector)((e=>[U(e),H(e),G(e),Object(Bt.a)(e)])),c=fs()(r),u=fs()(o),p=c&&r!==c,g=u&&!Object(d.isEqual)(o,u);Object(n.useEffect)((()=>{i&&(p&&g&&e.update(r.id,s).catch(a),p?e.updateWorkpad(r.id,r).catch(a):g&&e.updateAssets(r.id,s.assets).catch(a))}),[e,r,s,p,g,i,a])})(),Object(Vt.jsx)(r.a.Fragment,null,e)),jf=({params:e,children:t,loadPages:a,getRedirectPath:r})=>{const[o,s]=nf(e.id,a,r),i=Object(y.useNotifyService)();return Object(n.useEffect)((()=>{s&&i.error(s,{title:vf.getLoadFailureErrorMessage()})}),[s,i]),s?Object(Vt.jsx)(T.Redirect,{to:"/"}):o?t(o):Object(Vt.jsx)(af,null)},wf=({history:e})=>Object(Vt.jsx)(T.Router,{history:e},Object(Vt.jsx)(T.Switch,null,Object(Vt.jsx)(T.Route,{path:"/export/workpad/pdf/:id/page/:pageNumber",children:e=>Object(Vt.jsx)(xf,{route:e})}),Object(Vt.jsx)(T.Route,{path:["/workpad/:id/page/:pageNumber","/workpad/:id"],exact:!1,children:e=>Object(Vt.jsx)(hf,{route:e})}),Object(Vt.jsx)(T.Route,{path:"/"},Object(Vt.jsx)(aa,null))));class app_ShortcutManagerContextWrapper extends r.a.Component{getChildContext(){return{shortcuts:A}}render(){return Object(Vt.jsx)(r.a.Fragment,null,this.props.children)}}g()(app_ShortcutManagerContextWrapper,"childContextTypes",{shortcuts:m.a.object.isRequired});const Of=({history:e})=>{const t=Object(n.useRef)(h()()),{updatePath:a}=Object(y.useNavLinkService)();return Object(n.useEffect)((()=>t.current.listen((({pathname:e})=>{a(e)})))),Object(n.useEffect)((()=>e.listen((({pathname:a,hash:n})=>{const r=n.substr(1),o=e.action,s=new b.Observable((e=>{e.next(t.current.location.pathname);return t.current.listen((({pathname:t})=>{e.next(t)}))})).pipe(Object(x.skipWhile)((e=>e!==r)),Object(x.timeout)(100),Object(x.take)(1)).subscribe({error:e=>{"REPLACE"===o?t.current.replace(r):t.current.push(r)}});window.setTimeout((()=>s.unsubscribe()),150)}))),[e,t]),Object(Vt.jsx)(app_ShortcutManagerContextWrapper,null,Object(Vt.jsx)("div",{className:"canvas canvasContainer"},Object(Vt.jsx)(wf,{history:t.current})))};var kf=a(108);const Ef=Object(Se.c)();function Mf(e){this.name=e.name,this.displayName=e.displayName||this.name,this.id=e.id||Object(la.a)("workpad"),this.help=e.help||"",this.tags=e.tags||[],this.tags.forEach((e=>{kf.a.get(e)||kf.a.register((()=>({name:e,color:"#666666"})))})),this.width=e.width||Ef.width,this.height=e.height||Ef.height,this.page=e.page||Ef.page,this.pages=e.pages||Ef.pages,this.colors=e.colors||Ef.colors,this["@timestamp"]=e["@timestamp"]||Ef["@timestamp"],this["@created"]=e["@created"]||Ef["@created"],this.assets=e.assets||{},this.css=e.css||Ef.css}class templates_registry_TemplateRegistry extends F.Registry{wrapper(e){return new Mf(e)}}const Sf=new templates_registry_TemplateRegistry;let Cf={};const Pf=()=>c.i18n.translate("xpack.canvas.keyboardShortcutsDoc.flyout.closeButtonAriaLabel",{defaultMessage:"Closes keyboard shortcuts reference"}),Af=()=>c.i18n.translate("xpack.canvas.keyboardShortcutsDoc.shortcutListSeparator",{defaultMessage:"or",description:'Separates which keyboard shortcuts can be used for a single action. Example: "{shortcut1} or {shortcut2} or {shortcut3}"'}),Tf=()=>c.i18n.translate("xpack.canvas.keyboardShortcutsDoc.flyoutHeaderTitle",{defaultMessage:"Keyboard shortcuts"}),Nf=ar(),Df=e=>e.map((e=>{const t=e[Nf];return{title:e.help,description:t.reduce(((e,t,a)=>(t=t.replace(/\+/g," "),0!==a&&e.push(Object(Vt.jsx)("span",{key:Object(la.a)("span")}," ",Af()," ")),e.push(Object(Vt.jsx)("span",{key:Object(la.a)("span")},nr(t).split(/( )/g).map((e=>" "===e?e:Object(Vt.jsx)(Wt.EuiCode,{key:Object(la.a)("shortcut")},e))))),e)),[])}})),If=({onClose:e})=>Object(Vt.jsx)(Wt.EuiFlyout,{closeButtonAriaLabel:Pf(),size:"s",onClose:e},Object(Vt.jsx)(Wt.EuiFlyoutHeader,{hasBorder:!0},Object(Vt.jsx)(Wt.EuiTitle,{size:"s"},Object(Vt.jsx)("h2",null,Tf()))),Object(Vt.jsx)(Wt.EuiFlyoutBody,null,Object.values(P).map((e=>{const{displayName:t,...a}=e;return Object(Vt.jsx)("div",{key:Object(la.a)("shortcuts"),className:"canvasKeyboardShortcut"},Object(Vt.jsx)(Wt.EuiTitle,{size:"xs"},Object(Vt.jsx)("h4",null,t)),Object(Vt.jsx)(Wt.EuiHorizontalRule,{margin:"s"}),Object(Vt.jsx)(Wt.EuiDescriptionList,{textStyle:"reverse",type:"column",listItems:Df(Object.values(a)),compressed:!0}),Object(Vt.jsx)(Wt.EuiSpacer,null))}))));const Ff=()=>c.i18n.translate("xpack.canvas.helpMenu.keyboardShortcutsLinkLabel",{defaultMessage:"Keyboard shortcuts"}),Lf=({functionRegistry:e,notifyService:t})=>{const[a,o]=Object(n.useState)(!1);return Object(Vt.jsx)(r.a.Fragment,null,Object(Vt.jsx)(Wt.EuiButtonEmpty,{size:"s",flush:"left",iconType:"keyboardShortcut",onClick:()=>{o(!0)}},Ff()),null,a&&Object(Vt.jsx)(Wt.EuiPortal,null,Object(Vt.jsx)(If,{onClose:()=>{o(!1)}})))};var Rf=a(97),zf=a(327),Bf=a.n(zf),Hf=a(10);const Wf=e=>function(e){return Object(d.toPath)(e)}(e).join("/"),Vf=(({loadingIndicator:e,pendingCache:t})=>({dispatch:a})=>n=>r=>{if(r.type===We){const e=Wf(r.payload.path);t.push(e),a(Ze())}else if(r.type===Ve){const e=Wf(r.payload.path),n=t.indexOf(e);n>=0&&t.splice(n,1),0===t.length&&a(Je())}else r.type===Ue?e.show():r.type===Ge&&e.hide();n(r)})({loadingIndicator:Hf.b,pendingCache:[]}),Uf=[Object(Rf.applyMiddleware)(Bf.a,(({dispatch:e,getState:t})=>a=>n=>{a(n);const r=t(),o=ie(r),s=oe(r).length,i=se(r),{ready:c,error:l}=i,d=s-c-l;!(s>0||o.total>0)||c===o.ready&&d===o.pending&&l===o.error&&s===o.total||e(Be({total:s,ready:c,pending:d,error:l}))}),(({dispatch:e,getState:t})=>a=>n=>{const r=oe(t()).map((e=>e.id));a(n);const o=oe(t()).map((e=>e.id)),s=r.filter((e=>!o.includes(e)));s.length>0&&e(Ye(s))}),Vf,(({dispatch:e,getState:t})=>a=>n=>{const r=X(t()),o=ee(t());if(a(n),ee(t())!==o&&ea(ee(t())),n.type===Sr.toString()&&e(ut()),n.type===Ot.toString()&&r!==X(t())){const e=Object(Ld.a)();"function"==typeof e.getSelection&&e.getSelection().collapse(document.querySelector("body"),0)}}))],Gf=(Object(Ld.a)().__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Rf.compose)(...Uf);var $f=a(328),Kf=a.n($f);const qf=Object(D.createAction)("appReady"),Xf=Object(D.createAction)("appError"),Yf=Object(D.createAction)("appUnload"),Zf=Object(D.handleActions)({[qf]:e=>({...e,ready:!0}),[Xf]:(e,{payload:t})=>({...e,ready:t})},{}),{set:Jf,del:Qf}=we.a,em=Object(D.handleActions)({[rf]:e=>Jf(e,"resolvedArgs",{}),[gt]:(e,{payload:{elementIds:t}})=>{const{selectedToplevelNodes:a}=e;return Qf({...e,selectedToplevelNodes:a.filter((e=>t.indexOf(e)<0))},["resolvedArgs",t])},[ze]:(e,{payload:t})=>Jf(e,"isFirstLoad",Boolean(t)),[Le]:(e,{payload:t})=>Jf(e,"fullscreen",Boolean(t)),[Be]:(e,{payload:t})=>Jf(e,"elementStats",t),[Re]:(e,{payload:t})=>({...e,selectedToplevelNodes:t}),[He]:(e,{payload:t})=>({...e,zoomScale:t||1}),[Tr]:e=>({...e,selectedToplevelNodes:[]}),[Mr]:e=>({...e,selectedToplevelNodes:[]}),[Sr]:e=>({...e,selectedToplevelNodes:[]}),[Et]:(e,{payload:t})=>({...e,refresh:{interval:Number(t)||0}}),[Ct]:(e,{payload:t})=>Jf(e,"autoplay.enabled",Boolean(t)||!1),[Pt]:(e,{payload:t})=>Jf(e,"autoplay.interval",Number(t)||0)},{}),{set:tm,del:am}=we.a;function nm(e,t){return e?"error":Boolean(t)?"pending":"ready"}function rm(e,t,a){return e||null==t?a&&a.value:t}function om(e,t=!1,a=null){const n=e instanceof Error;return{state:nm(n,t),value:rm(n,e,a),error:n?e:null}}function sm(e){if(!Array.isArray(e)&&!("string"==typeof e))throw new Error(`Resolved argument path is invalid: ${e}`);return L(e,"resolvedArgs")}const im=Object(D.handleActions)({[$e]:(e,{payload:t})=>{const{path:a,loading:n=!0}=t,r=sm(a),o=Object(d.get)(e,r,null);return tm(e,r,om(Object(d.get)(o,"value",null),n))},[Ke]:(e,{payload:t})=>{const{path:a,value:n}=t,r=sm(a),o=Object(d.get)(e,r,null);return tm(e,r,om(n,!1,o))},[qe]:(e,{payload:t})=>t.reduce(((e,t)=>{const a=sm(t.path),n=Object(d.get)(e,a,null);return tm(e,a,om(t.value,!1,n))}),e),[Xe]:(e,{payload:t})=>{const{path:a}=t;return am(e,sm(a))},[Ye]:(e,{payload:t})=>t.reduce(((e,t)=>am(e,sm(t))),e),[Ze]:e=>tm(e,"inFlight",!0),[Je]:e=>tm(e,"inFlight",!1),[st]:(e,{payload:t})=>am(e,sm([t,"expressionContext"])),[it]:(e,{payload:t})=>{const{elementId:a,index:n}=t,r=Object(d.get)(e,sm([a,"expressionContext"]));return r?Object.keys(r).reduce(((e,t)=>parseInt(t,10)>=n?am(e,sm([a,"expressionContext",t])):e),e):e},[Ft]:(e,{})=>tm(e,"resolvedArgs",{})},{}),cm=Object(D.handleActions)({[Ft]:(e,{payload:t})=>(y.pluginServices.getServices().platform.setRecentlyAccessed(`${oa.j}/${t.id}`,t.name,t.id),t),[jt]:(e,{payload:t})=>({...e,...t}),[kt]:(e,{payload:t})=>({...e,colors:t}),[wt]:(e,{payload:t})=>(y.pluginServices.getServices().platform.setRecentlyAccessed(`${oa.j}/${e.id}`,t,e.id),{...e,name:t}),[Ot]:(e,{payload:t})=>({...e,isWriteable:Boolean(t)}),[Mt]:(e,{payload:t})=>({...e,css:t}),[St]:(e,{payload:t})=>({...e,variables:t}),[At]:()=>({...Object(Se.c)()})},{}),{set:lm,del:dm,insert:um}=we.a,pm=(e,t)=>t<0||!e.pages[t]||Y(e)===t?e:lm(e,"page",t);function gm(e,t){return e.pages.findIndex((e=>e.id===t))}function bm(e,t,a=e.pages.length-1){return um(e,"pages",t||Object(Se.b)(),a+1)}const fm=Object(D.handleActions)({[Mr]:(e,{payload:{gotoPage:t}})=>{const{page:a}=e,n=bm(e,void 0,a),r=pm(n,a+1);return t(r.page+1),r},[Sr]:(e,{payload:{gotoPage:t,id:a}})=>{const n=e.pages.find((e=>e.id===a));if(!n)return e;const r=e.pages.indexOf(n),o=r+1,s=bm(e,function(e){const t=e.elements,a=e.groups||[],n=t.concat(a),r=da(n);return{...e,id:Object(la.a)("page"),groups:r.filter((e=>Un(e.id))),elements:r.filter((e=>!Un(e.id)))}}(n),r),i=pm(s,o);return t(o+1),i},[Tr]:(e,{payload:t})=>pm(e,t),[Cr]:(e,{payload:{gotoPage:t,...a}})=>{const{id:n,position:r}=a,o=gm(e,n),s=o+r;if(o<0)return e;if(s<0||s>=e.pages.length)return e;const i={...e.pages[o]};let c=um(dm(e,`pages.${o}`),"pages",i,s);const l=e.pages[e.page].id,d=c.pages.findIndex((e=>e.id===l));return c=lm(c,"page",d),t(c.page+1),c},[Pr]:(e,{payload:{id:t,gotoPage:a}})=>{const n=e.page,r=gm(e,t);if(r>=0){let t=dm(e,`pages.${r}`);const o=n===r,s=0===t.pages.length;return s&&(t=bm(t)),s||0===n?(t=lm(t,"page",0),a(1)):(o||r<n)&&(t=lm(t,"page",n-1),a(n)),t}},[Ar]:(e,{payload:t})=>{const a=e.pages.findIndex((e=>e.id===t.pageId));return lm(e,`pages.${a}.style`,t.style)},[Nr]:(e,{payload:t})=>{const a=e.pages.findIndex((e=>e.id===t.pageId));return lm(e,`pages.${a}.transition`,t.transition)}},{}),{assign:mm,push:vm,del:hm,set:xm}=we.a,ym=e=>"group"===e?"groups":"elements",_m=(e,t,a)=>a.indexOf(e)===t,jm=(e,t,a)=>{const n=e.pages.find((e=>e.id===t));return(null==n?[]:n.groups||[]).find((e=>e.id===a))?"groups":"elements"};function wm(e,t){return Object(d.get)(e,"pages",[]).findIndex((e=>e.id===t))}function Om(e,t,a){return e[a].findIndex((e=>e.id===t))}function km(e,t,a,n){const r=wm(e,t),o=`pages.${r}.${jm(e,t,a)}`,s=Object(d.get)(e,o,[]).findIndex((e=>e.id===a));return-1===r||-1===s?e:mm(e,`${o}.${s}`,n)}const Em=({left:e,top:t,width:a,height:n,angle:r,parent:o})=>({left:e,top:t,width:a,height:n,angle:r,parent:o}),Mm=({id:e,position:t,expression:a,filter:n})=>({id:e,position:Em(t),..."group"!==t.type&&{expression:a},...void 0!==n&&{filter:n}}),Sm=Object(D.handleActions)({[ft]:(e,{payload:t})=>{const{expression:a,pageId:n,elementId:r}=t;return km(e,n,r,{expression:a})},[bt]:(e,{payload:t})=>{const{filter:a,elementId:n}=t,r=((e,t)=>{const a=e.pages.find((e=>e.elements.map((e=>e.id)).includes(t)));if(a)return a.id})(e,n);return km(e,r,n,{filter:a})},[ot]:(e,{payload:t})=>t.repositionedElements.reduce(((e,{position:t,pageId:a,elementId:n})=>km(e,a,n,{position:Em(t)})),e),[rt]:(e,{payload:{pageId:t,elementId:a,movement:n}})=>function(e,t,a,n,r){const o=wm(e,t),s=Om(e.pages[o],a,r),i=Object(d.get)(e,["pages",o,r]),c=s,l=function(){if(n<1/0&&n>-1/0)return s+n;if(n===1/0)return i.length-1;if(n===-1/0)return 0;throw new Error("Invalid element layer movement")}();if(l>i.length-1||l<0)return e;const u=i.slice(0);return u.splice(l,0,u.splice(c,1)[0]),xm(e,`pages.${o}.${r}`,u)}(e,t,a,n,jm(e,t,a)),[_t]:(e,{payload:{pageId:t,element:a}})=>{const n=wm(e,t);return n<0||e.pages[n][ym(a.position.type)].find((e=>e.id===a.id))?e:vm(e,`pages.${n}.${ym(a.position.type)}`,Mm(a))},[pt]:(e,{payload:{pageId:t,elements:a}})=>{const n=wm(e,t);return n<0?e:a.reduce(((e,t)=>vm(e,`pages.${n}.${ym(t.position.type)}`,Mm(t))),e)},[gt]:(e,{payload:{pageId:t,elementIds:a}})=>{const n=wm(e,t);if(n<0)return e;return a.filter(_m).map((a=>{const r=jm(e,t,a);return{location:r,index:Om(e.pages[n],a,r)}})).sort(((e,t)=>t.index-e.index)).reduce(((e,{location:t,index:a})=>hm(e,`pages.${n}.${t}.${a}`)),e)}},{}),{set:Cm,assign:Pm,del:Am}=we.a,Tm=Object(D.handleActions)({[oi]:(e,{payload:t})=>{const a={id:Object(la.a)("asset"),"@created":(new Date).toISOString(),...t};return Cm(e,a.id,a)},[si]:(e,{payload:t})=>{const{id:a,value:n}=t;if(!Object(d.get)(e,[a]))throw new Error(`Can not set asset data, id not found: ${a}`);return Pm(e,a,{value:n})},[ii]:(e,{payload:t})=>Am(e,t),[Object(D.combineActions)(ci,li)]:(e,{payload:t})=>t||{}},{}),Nm=Object(D.handleActions)({[rf]:(e,{payload:t})=>t},{}),Dm=Object(D.handleActions)({[Fc]:(e,{payload:t})=>{if(!t)return e;const{elementId:a,embeddableExpression:n}=t,r=e.pages.find((e=>void 0!==e.elements.find((e=>e.id===a))));if(!r)return e;const o=r.elements.find((e=>e.id===a));if(!o)return e;const s=Object(F.fromExpression)(o.expression),i=Object(F.fromExpression)(n),c=i.chain[0].function,l=s.chain.find((e=>e.function===c));if(!l)return e;l.arguments=i.chain[0].arguments;const d=Object(F.toExpression)(s);return km(e,r.id,a,{expression:d})}},{});let Im;function Fm(e){if(void 0!==Im)throw new Error("Redux store can only be initialized once");if(!Object(d.isPlainObject)(e))throw new Error("Initial state must be a plain object");const t=function(e){return Object(Rf.combineReducers)({assets:Tm,app:Zf,transient:Kf()(em,im),persistent:Kf()(Nm,Object(Rf.combineReducers)({workpad:Kf()(cm,fm,Sm,Dm),schemaVersion:(t=Object(d.get)(e,"persistent.schemaVersion"))=>t}))})}(e);return Im=Object(Rf.createStore)(t,e,Gf),Im}function Lm(){return Im.getState()}async function Rm(e){return Im?function(){const e=Im.getState();return Im=void 0,Fm(e)}():async function(e){const t=(e=>{const t=y.pluginServices.getServices().platform,{getHasWriteAccess:a}=t,n={app:{},assets:{},transient:{canUserWrite:a(),zoomScale:1,elementStats:{total:0,ready:0,pending:0,error:0},fullscreen:!1,selectedToplevelNodes:[],resolvedArgs:{},refresh:{interval:0},autoplay:{enabled:!1,interval:1e4}},persistent:{schemaVersion:2,workpad:Object(Se.c)()}};return e?Object(d.get)(n,e):n})(),a=e.http.basePath.get(),n=await e.http.get(oa.c),r=Object.values(n);return t.app={basePath:a,serverFunctions:r,ready:!1},Fm(t)}(e)}function zm(){const{help:e,args:t}=Object(Ce.t)().asset,a=Object(Ce.s)().asset;return{name:"asset",aliases:[],type:"string",inputTypes:["null"],help:e,args:{id:{aliases:["_"],types:["string"],help:t.id,required:!0}},fn:(e,t)=>{const n=t.id,r=(o=Lm(),s=n,o.assets[s]);var o,s;if(void 0!==r)return r.value;throw a.invalidAssetId(n)}}}function Bm(e){return function(){const{help:t,args:a}=Object(Ce.t)().filters;return{name:"filters",type:"filter",help:t,context:{types:["null"]},args:{group:{aliases:["_"],types:["string"],help:a.group,multi:!0},ungrouped:{aliases:["nogroup","nogroups"],types:["boolean"],help:a.ungrouped,default:!1}},fn:(t,{group:a,ungrouped:n})=>{const r=function(e,t,a=!1){return t&&0!==t.length?e.filter((e=>{const a=Object(F.fromExpression)(e),n=Object(d.get)(a,"chain[0].arguments.filterGroup",[]);return n.length>0&&n.every((e=>t.includes(e)))})):a?e.filter((e=>{const t=Object(F.fromExpression)(e);return 0===Object(d.get)(t,"chain[0].arguments.filterGroup",[]).length})):e}(oe(Lm()).reduce(((e,t)=>null!=t.filter&&t.filter.length?e.concat(t.filter):e),[]),a,n);if(r&&r.length){const e=r.join(" | ");return Pe(Object(F.fromExpression)(e),K(Lm()))}{const t=e.types.filter;return null==t?void 0:t.from(null,{})}}}}}var Hm=a(35),Wm=a.n(Hm),Vm=a(86),Um=a(204);const Gm=()=>new Error(c.i18n.translate("xpack.canvas.functions.timelion.executionError",{defaultMessage:"There was an error executing the Timelion query.  Check your syntax and try again."}));function $m(e){return()=>{const{help:t,args:a}=Object(Ce.t)().timelion;return{name:"timelion",type:"datatable",inputTypes:["filter"],help:t,args:{query:{types:["string"],aliases:["_","q"],help:a.query,default:'".es(*)"'},interval:{types:["string"],help:a.interval,default:"auto"},from:{types:["string"],help:a.from,default:"now-1y"},to:{types:["string"],help:a.to,default:"now"},timezone:{types:["string"],help:a.timezone,default:"UTC"}},fn:async(t,a)=>{const n=t.and.find((e=>"time"===e.filterType)),r=n?{min:n.from,max:n.to}:function(e,t,a){const n=Wm()().zoneName();Wm.a.tz.setDefault(t);const r=a.calculateBounds(e);return Wm.a.tz.setDefault(n),r}({from:a.from,to:a.to},a.timezone,e.timefilter),o={extended:{es:{filter:{bool:{must:Object(Um.a)(t.and)}}}},sheet:[a.query],time:{from:r.min,to:r.max,interval:a.interval,timezone:a.timezone}};let s;try{s=await Object(Vm.a)(e.prependBasePath("/api/timelion/run"),{method:"POST",responseType:"json",data:o})}catch(e){throw Gm()}const i=s.data.sheet[0].list;return{type:"datatable",meta:{source:"timelion"},columns:[{id:"@timestamp",name:"@timestamp",meta:{type:"date"}},{id:"value",name:"value",meta:{type:"number"}},{id:"label",name:"label",meta:{type:"string"}}],rows:Object(d.flatten)(i.map((e=>e.data.map((t=>({"@timestamp":t[0],value:t[1],label:e.label}))))))}}}}}function Km(e){return function(){const{help:t,args:a}=Object(Ce.t)().to,n=Object(Ce.s)().to;return{name:"to",aliases:[],help:t,args:{type:{types:["string"],help:a.type,aliases:["_"],multi:!0}},fn:(t,a)=>{if(!a.type)throw n.missingType();return Object(F.castProvider)(e.types)(t,a.type)}}}}var qm=a(95),Xm=a(66);const Ym=(e,t,{columns:a,ticks:n,font:r}={})=>{if(!t||Object(Xm.isAxisConfig)(t)&&!1===t.show)return{show:!1};const o={show:!0},s=Object(d.get)(a,`${e}.type`);if(Object(Xm.isAxisConfig)(t)){const{position:a,min:n,max:r,tickSize:i}=t,c="x"===e?["bottom","top"]:["left","right"];o.position=a&&c.includes(a)?a:c[0],"number"!==s&&"date"!==s||(null!=n&&(o.min=n),null!=r&&(o.max=r)),i&&"number"===s&&(o.tickSize=i)}if("string"===s&&n){const t=n[e];t&&(o.ticks=Object(d.map)(t.hash,((e,t)=>[e,t])))}return"date"===s&&(o.mode="time"),"object"==typeof r&&(o.font=r),o};const Zm={size:14,lHeight:21,style:"normal",weight:"normal",family:a(64).openSans.value,color:"#000"},Jm=e=>{if(!e)return{};const t=Object(d.get)(e,"lines"),a=Object(d.get)(e,"bars"),n=Object(d.get)(e,"fill"),r=Object(d.get)(e,"color"),o=Object(d.get)(e,"stack"),s={numbers:{show:!0},lines:{show:t>0,lineWidth:t,fillColor:r,fill:n/10},bars:{show:a>0,barWidth:a,fill:1,align:"center",horizontal:Object(d.get)(e,"horizontalBars",!1)},points:{show:!1},bubbles:{show:!0,fill:n}};return null!=o&&(s.stack=o),r&&(s.color=r),s};function Qm(e){return()=>{const{help:t,args:a}=Object(Ce.t)().plot;return{name:"plot",aliases:[],type:"render",inputTypes:["pointseries"],help:t,args:{defaultStyle:{multi:!1,types:["seriesStyle"],help:a.defaultStyle,default:"{seriesStyle points=5}"},font:{types:["style"],help:a.font,default:"{font}"},legend:{types:["string","boolean"],help:a.legend,default:"ne",options:[...Object.values(Xm.Legend),!1]},palette:{types:["palette"],help:a.palette,default:"{palette}"},seriesStyle:{multi:!0,types:["seriesStyle"],help:a.seriesStyle},xaxis:{types:["boolean","axisConfig"],help:a.xaxis,default:!0},yaxis:{types:["boolean","axisConfig"],help:a.yaxis,default:!0}},fn:(t,a)=>{const n=Object(d.keyBy)(a.seriesStyle||[],"label")||{},r=t.rows,o=((e,t)=>{const a={x:{hash:{},counter:0},y:{hash:{},counter:0}};return"string"===Object(d.get)(e,"x.type")&&t.forEach((e=>{a.x.hash[e.x]||(a.x.hash[e.x]=a.x.counter++)})),"string"===Object(d.get)(e,"y.type")&&t.reverse().forEach((e=>{a.y.hash[e.y]||(a.y.hash[e.y]=a.y.counter++)})),a})(t.columns,r),s=a.font?(e=>{if(!e||!e.spec)return Zm;const{fontSize:t,lineHeight:a,fontStyle:n,fontWeight:r,fontFamily:o,color:s}=e.spec,i=t&&Number(t.replace("px","")),c="string"==typeof a&&Number(a.replace("px",""));return{size:i&&!isNaN(i)?i:Zm.size,lHeight:i&&!isNaN(i)?c:Zm.lHeight,style:n||Zm.style,weight:r||Zm.weight,family:o||Zm.family,color:s||Zm.color}})(a.font):{},i=Object(d.map)(Object(d.groupBy)(r,"color"),((e,r)=>{const s={...a.defaultStyle,...n[r]},i=s?Jm(s):{};return{...i,label:r,data:e.map((e=>{const a={},n="string"===Object(d.get)(t.columns,"x.type")?o.x.hash[e.x]:e.x,r="string"===Object(d.get)(t.columns,"y.type")?o.y.hash[e.y]:e.y;return null!=e.size?a.size=e.size:Object(d.get)(s,"points")&&(a.size=s.points,Object(Lu.set)(i,"bubbles.size.min",s.points)),null!=e.text&&(a.text=e.text),[n,r,a]}))}})),c={type:"render",as:"plot",value:{font:a.font,data:Object(d.sortBy)(i,"label"),options:{canvas:!1,colors:e.get(a.palette.name||"custom").getCategoricalColors(i.length,a.palette.params),legend:Object(qm.a)(a.legend,i.length),grid:{borderWidth:0,borderColor:null,color:"rgba(0,0,0,0)",labelMargin:30,margin:{right:30,top:20,bottom:0,left:0}},xaxis:Ym("x",a.xaxis,{columns:t.columns,ticks:o,font:s}),yaxis:Ym("y",a.yaxis,{columns:t.columns,ticks:o,font:s}),series:{shadowSize:0,...Jm(a.defaultStyle)}}}};return JSON.parse(JSON.stringify(c))}}}}var ev=a(165),tv=a(166);a(329);const{ReadOnlyBadge:av}=Ce.d,nv=({coreStart:e,startPlugins:t,params:a,canvasStore:n,pluginServices:r})=>{const{presentationUtil:o}=t,{element:c}=a;c.classList.add("canvas"),c.classList.add("canvasContainerWrapper");const d=r.getContextProvider();return s.a.render(Object(Vt.jsx)(u.KibanaContextProvider,{services:{...t,...e}},Object(Vt.jsx)(d,null,Object(Vt.jsx)(y.LegacyServicesProvider,{providers:y.services},Object(Vt.jsx)(o.ContextProvider,null,Object(Vt.jsx)(i.I18nProvider,null,Object(Vt.jsx)(l.Provider,{store:n},Object(Vt.jsx)(Of,{history:a.history}))))))),c),()=>{s.a.unmountComponentAtNode(c),n.dispatch(Yf())}},rv=async(e,t,a,n,r,o)=>{await Object(y.startLegacyServices)(e,t,a,n,o);const{expressions:i}=a,l=[zm,Bm(u={timefilter:a.data.query.timefilter.timefilter,prependBasePath:t.http.basePath.prepend,types:a.expressions.getTypes(),paletteService:await a.charts.palettes.getPalettes()}),$m(u),Km(u),(p=u.paletteService,()=>{const{help:e,args:t}=Object(Ce.t)().pie;return{name:"pie",aliases:[],type:"render",inputTypes:["pointseries"],help:e,args:{font:{types:["style"],help:t.font,default:"{font}"},hole:{types:["number"],default:0,help:t.hole},labelRadius:{types:["number"],default:100,help:t.labelRadius},labels:{types:["boolean"],default:!0,help:t.labels},legend:{types:["string","boolean"],help:t.legend,default:!1,options:[...Object.values(Xm.Legend),!1]},palette:{types:["palette"],help:t.palette,default:"{palette}"},radius:{types:["string","number"],help:t.radius,default:"auto"},seriesStyle:{multi:!0,types:["seriesStyle"],help:t.seriesStyle},tilt:{types:["number"],default:1,help:t.tilt}},fn:(e,t)=>{const{tilt:a,radius:n,labelRadius:r,labels:o,hole:s,legend:i,palette:c,font:l,seriesStyle:u}=t,g=Object(d.keyBy)(u||[],"label")||{},b=Object(d.map)(Object(d.groupBy)(e.rows,"color"),((e,t="")=>{const a={label:t,data:e.map((e=>e.size||1))},n=g[t];return n&&(a.color=Object(d.get)(n,"color")),a}));return{type:"render",as:"pie",value:{font:l,data:b,options:{canvas:!1,colors:p.get(c.name||"custom").getCategoricalColors(b.length,c.params),legend:Object(qm.a)(i,b.length),grid:{show:!1},series:{pie:{show:!0,innerRadius:Math.max(s,0)/100,stroke:{width:0},label:{show:o,radius:(r>=0?r:100)/100},tilt:a,radius:n},bubbles:{show:!1},shadowSize:0}}}}}}}),Qm(u.paletteService)];var u,p;for(const e of l)i.registerFunction(e);const g=await Rm(e);var b;b=Object.values(i.getFunctions()),nc.keywords=b.map((e=>e.name)),ec.monaco.languages.register({id:ac}),ec.monaco.languages.setMonarchTokensProvider(ac,nc),Object(F.addRegistries)(Cf,{elements:Fu,transformUIs:Ts,datasourceUIs:ns,modelUIs:Is,viewUIs:Fs,argumentUIs:As,templates:Sf,tagUIs:kf.a,transitions:Er}),await async function(e){const t={},a=Object.entries(e).map((async([e,a])=>{const n=await(await Promise.all(a.map((e=>"function"==typeof e?e():e)))).flat();t[e]=n}));await Promise.all(a),Object(F.register)(Cf,t)}(r),t.chrome.setBadge(t.application.capabilities.canvas&&t.application.capabilities.canvas.save?void 0:{text:av.getText(),tooltip:av.getTooltip(),iconType:"glasses"});const{docLinks:f}=t;var m;return t.chrome.setHelpExtension({appName:c.i18n.translate("xpack.canvas.helpMenu.appName",{defaultMessage:"Canvas"}),links:[{linkType:"documentation",href:f.links.canvas.guide}],content:e=>(s.a.render(Object(Vt.jsx)(Lf,{functionRegistry:i.getFunctions(),notifyService:y.pluginServices.getServices().notify}),e),()=>s.a.unmountComponentAtNode(e))}),a.usageCollection&&(m=a.usageCollection.reportUiCounter,Dc=m),g},ov=e=>{Cf={},Object(d.includes)($.plot.plugins,ev.a)&&Object(d.remove)($.plot.plugins,ev.a),Object(d.includes)($.plot.plugins,tv.a)&&Object(d.remove)($.plot.plugins,tv.a),e.chrome.setBadge(void 0),e.chrome.setHelpExtension(void 0)}}])]);