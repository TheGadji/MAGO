/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.indexLifecycleManagement_bundle_jsonpfunction=window.indexLifecycleManagement_bundle_jsonpfunction||[]).push([[1],Array(34).concat([function(e,t,a){"use strict";var i,l=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},n=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function o(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function r(e,t){for(var a={},i=[],l=0;l<e.length;l++){var n=e[l],r=t.base?n[0]+t.base:n[0],c=a[r]||0,d="".concat(r," ").concat(c);a[r]=c+1;var u=o(d),m={css:n[1],media:n[2],sourceMap:n[3]};-1!==u?(s[u].references++,s[u].updater(m)):s.push({identifier:d,updater:f(m,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var l=a.nc;l&&(i.nonce=l)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var s=n(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function m(e,t,a,i){var l=a?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,l);else{var n=document.createTextNode(l),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(n,s[t]):e.appendChild(n)}}function p(e,t,a){var i=a.css,l=a.media,n=a.sourceMap;if(l?e.setAttribute("media",l):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,x=0;function f(e,t){var a,i,l;if(t.singleton){var n=x++;a=h||(h=c(t)),i=m.bind(null,a,n,!1),l=m.bind(null,a,n,!0)}else a=c(t),i=p.bind(null,a,t),l=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else l()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=l());var a=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<a.length;i++){var l=o(a[i]);s[l].references--}for(var n=r(e,t),c=0;c<a.length;c++){var d=o(a[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}a=n}}}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",i=e[3];if(!i)return a;if(t&&"function"==typeof btoa){var l=(s=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),n=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[a].concat(n).concat([l]).join("\n")}var s,o,r;return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,i){"string"==typeof e&&(e=[[null,e,""]]);var l={};if(i)for(var n=0;n<this.length;n++){var s=this[n][0];null!=s&&(l[s]=!0)}for(var o=0;o<e.length;o++){var r=[].concat(e[o]);i&&l[r[0]]||(a&&(r[2]?r[2]="".concat(a," and ").concat(r[2]):r[2]=a),t.push(r))}},t}},function(e,t,a){e.exports=a(22)(1075)},function(e,t,a){"use strict";e.exports=a(40)},function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var i=new Uint8Array(16);e.exports=function(){return a(i),i}}else{var l=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),l[t]=e>>>((3&t)<<3)&255;return l}}},function(e,t){for(var a=[],i=0;i<256;++i)a[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,l=a;return[l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]]].join("")}},function(e,t){function a(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(a.length?" "+a.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[J]}function l(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return a===Object||"function"==typeof a&&Function.toString.call(a)===Y}(e)||Array.isArray(e)||!!e[G]||!!e.constructor[G]||u(e)||m(e))}function n(e,t,a){void 0===a&&(a=!1),0===s(e)?(a?Object.keys:Q)(e).forEach((function(i){a&&"symbol"==typeof i||t(i,e[i],e)})):e.forEach((function(a,i){return t(i,a,e)}))}function s(e){var t=e[J];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:u(e)?2:m(e)?3:0}function o(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){return 2===s(e)?e.get(t):e[t]}function c(e,t,a){var i=s(e);2===i?e.set(t,a):3===i?(e.delete(t),e.add(a)):e[t]=a}function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function u(e){return $&&e instanceof Map}function m(e){return V&&e instanceof Set}function p(e){return e.i||e.u}function h(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[J];for(var a=Q(t),i=0;i<a.length;i++){var l=a[i],n=t[l];!1===n.writable&&(n.writable=!0,n.configurable=!0),(n.get||n.set)&&(t[l]={configurable:!0,writable:!0,enumerable:n.enumerable,value:e[l]})}return Object.create(Object.getPrototypeOf(e),t)}function x(e,t){return void 0===t&&(t=!1),g(e)||i(e)||!l(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=f),Object.freeze(e),t&&n(e,(function(e,t){return x(t,!0)}),!0)),e}function f(){a(2)}function g(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=Z[e];return t||a(18,e),t}function j(e,t){Z[e]||(Z[e]=t)}function y(){return U}function v(e,t){t&&(b("Patches"),e.o=[],e.v=[],e.s=t)}function O(e){M(e),e.p.forEach(P),e.p=null}function M(e){e===U&&(U=e.l)}function _(e){return U={p:[],l:U,h:e,_:!0,m:0}}function P(e){var t=e[J];0===t.t||1===t.t?t.j():t.O=!0}function T(e,t){t.m=t.p.length;var i=t.p[0],n=void 0!==e&&e!==i;return t.h.S||b("ES5").M(t,e,n),n?(i[J].P&&(O(t),a(4)),l(e)&&(e=k(t,e),t.l||L(t,e)),t.o&&b("Patches").g(i[J],e,t.o,t.v)):e=k(t,i,[]),O(t),t.o&&t.s(t.o,t.v),e!==H?e:void 0}function k(e,t,a){if(g(t))return t;var i=t[J];if(!i)return n(t,(function(l,n){return w(e,i,t,l,n,a)}),!0),t;if(i.A!==e)return t;if(!i.P)return L(e,i.u,!0),i.u;if(!i.R){i.R=!0,i.A.m--;var l=4===i.t||5===i.t?i.i=h(i.k):i.i;n(3===i.t?new Set(l):l,(function(t,n){return w(e,i,l,t,n,a)})),L(e,l,!1),a&&e.o&&b("Patches").F(i,a,e.o,e.v)}return i.i}function w(e,t,a,n,s,r){if(i(s)){var d=k(e,s,r&&t&&3!==t.t&&!o(t.D,n)?r.concat(n):void 0);if(c(a,n,d),!i(d))return;e._=!1}if(l(s)&&!g(s)){if(!e.h.K&&e.m<1)return;k(e,s),t&&t.A.l||L(e,s)}}function L(e,t,a){void 0===a&&(a=!1),e.h.K&&e._&&x(t,a)}function E(e,t){var a=e[J];return(a?p(a):e)[t]}function S(e,t){if(t in e)for(var a=Object.getPrototypeOf(e);a;){var i=Object.getOwnPropertyDescriptor(a,t);if(i)return i;a=Object.getPrototypeOf(a)}}function F(e){e.P||(e.P=!0,e.l&&F(e.l))}function C(e){e.i||(e.i=h(e.u))}function z(e,t,a){var i=u(t)?b("MapSet").$(t,a):m(t)?b("MapSet").C(t,a):e.S?function(e,t){var a=Array.isArray(e),i={t:a?1:0,A:t?t.A:y(),P:!1,R:!1,D:{},l:t,u:e,k:null,i:null,j:null,I:!1},l=i,n=ee;a&&(l=[i],n=te);var s=Proxy.revocable(l,n),o=s.revoke,r=s.proxy;return i.k=r,i.j=o,r}(t,a):b("ES5").J(t,a);return(a?a.A:y()).p.push(i),i}function A(e){return i(e)||a(22,e),function e(t){if(!l(t))return t;var a,i=t[J],o=s(t);if(i){if(!i.P&&(i.t<4||!b("ES5").N(i)))return i.u;i.R=!0,a=D(t,o),i.R=!1}else a=D(t,o);return n(a,(function(t,l){i&&r(i.u,t)===l||c(a,t,e(l))})),3===o?new Set(a):a}(e)}function D(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h(e)}function N(){function e(e,t){var a=s[e];return a?a.enumerable=t:s[e]=a={configurable:!0,enumerable:t,get:function(){return ee.get(this[J],e)},set:function(t){ee.set(this[J],e,t)}},a}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][J];if(!i.P)switch(i.t){case 5:l(i)&&F(i);break;case 4:a(i)&&F(i)}}}function a(e){for(var t=e.u,a=e.k,i=Q(a),l=i.length-1;l>=0;l--){var n=i[l];if(n!==J){var s=t[n];if(void 0===s&&!o(t,n))return!0;var r=a[n],c=r&&r[J];if(c?c.u!==s:!d(r,s))return!0}}var u=!!t[J];return i.length!==Q(t).length+(u?0:1)}function l(e){var t=e.k;if(t.length!==e.u.length)return!0;var a=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!a||a.get)}var s={};j("ES5",{J:function(t,a){var i=Array.isArray(t),l=function(t,a){if(t){for(var i=Array(a.length),l=0;l<a.length;l++)Object.defineProperty(i,""+l,e(l,!0));return i}var n=X(a);delete n[J];for(var s=Q(n),o=0;o<s.length;o++){var r=s[o];n[r]=e(r,t||!!n[r].enumerable)}return Object.create(Object.getPrototypeOf(a),n)}(i,t),n={t:i?5:4,A:a?a.A:y(),P:!1,R:!1,D:{},l:a,u:t,k:l,i:null,O:!1,I:!1};return Object.defineProperty(l,J,{value:n,writable:!0}),l},M:function(e,a,s){s?i(a)&&a[J].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var a=t[J];if(a){var i=a.u,s=a.k,r=a.D,c=a.t;if(4===c)n(s,(function(t){t!==J&&(void 0!==i[t]||o(i,t)?r[t]||e(s[t]):(r[t]=!0,F(a)))})),n(i,(function(e){void 0!==s[e]||o(s,e)||(r[e]=!1,F(a))}));else if(5===c){if(l(a)&&(F(a),r.length=!0),s.length<i.length)for(var d=s.length;d<i.length;d++)r[d]=!1;else for(var u=i.length;u<s.length;u++)r[u]=!0;for(var m=Math.min(s.length,i.length),p=0;p<m;p++)void 0===r[p]&&e(s[p])}}}}(e.p[0]),t(e.p))},N:function(e){return 4===e.t?a(e):l(e)}})}function I(){function e(t){if(!l(t))return t;if(Array.isArray(t))return t.map(e);if(u(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(m(t))return new Set(Array.from(t).map(e));var a=Object.create(Object.getPrototypeOf(t));for(var i in t)a[i]=e(t[i]);return o(t,G)&&(a[G]=t[G]),a}function t(t){return i(t)?e(t):t}var c="add";j("Patches",{W:function(t,i){return i.forEach((function(i){for(var l=i.path,n=i.op,o=t,d=0;d<l.length-1;d++){var u=s(o),m=""+l[d];0!==u&&1!==u||"__proto__"!==m&&"constructor"!==m||a(24),"function"==typeof o&&"prototype"===m&&a(24),"object"!=typeof(o=r(o,m))&&a(15,l.join("/"))}var p=s(o),h=e(i.value),x=l[l.length-1];switch(n){case"replace":switch(p){case 2:return o.set(x,h);case 3:a(16);default:return o[x]=h}case c:switch(p){case 1:return o.splice(x,0,h);case 2:return o.set(x,h);case 3:return o.add(h);default:return o[x]=h}case"remove":switch(p){case 1:return o.splice(x,1);case 2:return o.delete(x);case 3:return o.delete(i.value);default:return delete o[x]}default:a(17,n)}})),t},F:function(e,a,i,l){switch(e.t){case 0:case 4:case 2:return function(e,a,i,l){var s=e.u,d=e.i;n(e.D,(function(e,n){var u=r(s,e),m=r(d,e),p=n?o(s,e)?"replace":c:"remove";if(u!==m||"replace"!==p){var h=a.concat(e);i.push("remove"===p?{op:p,path:h}:{op:p,path:h,value:m}),l.push(p===c?{op:"remove",path:h}:"remove"===p?{op:c,path:h,value:t(u)}:{op:"replace",path:h,value:t(u)})}}))}(e,a,i,l);case 5:case 1:return function(e,a,i,l){var n=e.u,s=e.D,o=e.i;if(o.length<n.length){var r=[o,n];n=r[0],o=r[1];var d=[l,i];i=d[0],l=d[1]}for(var u=0;u<n.length;u++)if(s[u]&&o[u]!==n[u]){var m=a.concat([u]);i.push({op:"replace",path:m,value:t(o[u])}),l.push({op:"replace",path:m,value:t(n[u])})}for(var p=n.length;p<o.length;p++){var h=a.concat([p]);i.push({op:c,path:h,value:t(o[p])})}n.length<o.length&&l.push({op:"replace",path:a.concat(["length"]),value:n.length})}(e,a,i,l);case 3:return function(e,t,a,i){var l=e.u,n=e.i,s=0;l.forEach((function(e){if(!n.has(e)){var l=t.concat([s]);a.push({op:"remove",path:l,value:e}),i.unshift({op:c,path:l,value:e})}s++})),s=0,n.forEach((function(e){if(!l.has(e)){var n=t.concat([s]);a.push({op:c,path:n,value:e}),i.unshift({op:"remove",path:n,value:e})}s++}))}(e,a,i,l)}},g:function(e,t,a,i){a.push({op:"replace",path:[],value:t===H?void 0:t}),i.push({op:"replace",path:[],value:e.u})}})}function R(){function e(e,t){function a(){this.constructor=e}o(e,t),e.prototype=(a.prototype=t.prototype,new a)}function t(e){e.i||(e.D=new Map,e.i=new Map(e.u))}function i(e){e.i||(e.i=new Set,e.u.forEach((function(t){if(l(t)){var a=z(e.A.h,t,e);e.p.set(t,a),e.i.add(a)}else e.i.add(t)})))}function s(e){e.O&&a(3,JSON.stringify(p(e)))}var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},r=function(){function a(e,t){return this[J]={t:2,l:t,A:t?t.A:y(),P:!1,R:!1,i:void 0,D:void 0,u:e,k:this,I:!1,O:!1},this}e(a,Map);var i=a.prototype;return Object.defineProperty(i,"size",{get:function(){return p(this[J]).size}}),i.has=function(e){return p(this[J]).has(e)},i.set=function(e,a){var i=this[J];return s(i),p(i).has(e)&&p(i).get(e)===a||(t(i),F(i),i.D.set(e,!0),i.i.set(e,a),i.D.set(e,!0)),this},i.delete=function(e){if(!this.has(e))return!1;var a=this[J];return s(a),t(a),F(a),a.D.set(e,!1),a.i.delete(e),!0},i.clear=function(){var e=this[J];s(e),p(e).size&&(t(e),F(e),e.D=new Map,n(e.u,(function(t){e.D.set(t,!1)})),e.i.clear())},i.forEach=function(e,t){var a=this;p(this[J]).forEach((function(i,l){e.call(t,a.get(l),l,a)}))},i.get=function(e){var a=this[J];s(a);var i=p(a).get(e);if(a.R||!l(i))return i;if(i!==a.u.get(e))return i;var n=z(a.A.h,i,a);return t(a),a.i.set(e,n),n},i.keys=function(){return p(this[J]).keys()},i.values=function(){var e,t=this,a=this.keys();return(e={})[K]=function(){return t.values()},e.next=function(){var e=a.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},i.entries=function(){var e,t=this,a=this.keys();return(e={})[K]=function(){return t.entries()},e.next=function(){var e=a.next();if(e.done)return e;var i=t.get(e.value);return{done:!1,value:[e.value,i]}},e},i[K]=function(){return this.entries()},a}(),c=function(){function t(e,t){return this[J]={t:3,l:t,A:t?t.A:y(),P:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,I:!1},this}e(t,Set);var a=t.prototype;return Object.defineProperty(a,"size",{get:function(){return p(this[J]).size}}),a.has=function(e){var t=this[J];return s(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},a.add=function(e){var t=this[J];return s(t),this.has(e)||(i(t),F(t),t.i.add(e)),this},a.delete=function(e){if(!this.has(e))return!1;var t=this[J];return s(t),i(t),F(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},a.clear=function(){var e=this[J];s(e),p(e).size&&(i(e),F(e),e.i.clear())},a.values=function(){var e=this[J];return s(e),i(e),e.i.values()},a.entries=function(){var e=this[J];return s(e),i(e),e.i.entries()},a.keys=function(){return this.values()},a[K]=function(){return this.values()},a.forEach=function(e,t){for(var a=this.values(),i=a.next();!i.done;)e.call(t,i.value,i.value,this),i=a.next()},t}();j("MapSet",{$:function(e,t){return new r(e,t)},C:function(e,t){return new c(e,t)}})}var B;Object.defineProperty(t,"__esModule",{value:!0});var U,q="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),$="undefined"!=typeof Map,V="undefined"!=typeof Set,W="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=q?Symbol.for("immer-nothing"):((B={})["immer-nothing"]=!0,B),G=q?Symbol.for("immer-draftable"):"__$immer_draftable",J=q?Symbol.for("immer-state"):"__$immer_state",K="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Y=""+Object.prototype.constructor,Q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return Q(e).forEach((function(a){t[a]=Object.getOwnPropertyDescriptor(e,a)})),t},Z={},ee={get:function(e,t){if(t===J)return e;var a=p(e);if(!o(a,t))return function(e,t,a){var i,l=S(t,a);return l?"value"in l?l.value:null===(i=l.get)||void 0===i?void 0:i.call(e.k):void 0}(e,a,t);var i=a[t];return e.R||!l(i)?i:i===E(e.u,t)?(C(e),e.i[t]=z(e.A.h,i,e)):i},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,a){var i=S(p(e),t);if(null==i?void 0:i.set)return i.set.call(e.k,a),!0;if(!e.P){var l=E(p(e),t),n=null==l?void 0:l[J];if(n&&n.u===a)return e.i[t]=a,e.D[t]=!1,!0;if(d(a,l)&&(void 0!==a||o(e.u,t)))return!0;C(e),F(e)}return e.i[t]===a&&"number"!=typeof a&&(void 0!==a||t in e.i)||(e.i[t]=a,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==E(e.u,t)||t in e.u?(e.D[t]=!1,C(e),F(e)):delete e.D[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var a=p(e),i=Reflect.getOwnPropertyDescriptor(a,t);return i?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:i.enumerable,value:a[t]}:i},defineProperty:function(){a(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){a(12)}},te={};n(ee,(function(e,t){te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),te.deleteProperty=function(e,t){return ee.deleteProperty.call(this,e[0],t)},te.set=function(e,t,a){return ee.set.call(this,e[0],t,a,e[0])};var ae=function(){function e(e){var t=this;this.S=W,this.K=!0,this.produce=function(e,i,n){if("function"==typeof e&&"function"!=typeof i){var s=i;i=e;var o=t;return function(e){var t=this;void 0===e&&(e=s);for(var a=arguments.length,l=Array(a>1?a-1:0),n=1;n<a;n++)l[n-1]=arguments[n];return o.produce(e,(function(e){var a;return(a=i).call.apply(a,[t,e].concat(l))}))}}var r;if("function"!=typeof i&&a(6),void 0!==n&&"function"!=typeof n&&a(7),l(e)){var c=_(t),d=z(t,e,void 0),u=!0;try{r=i(d),u=!1}finally{u?O(c):M(c)}return"undefined"!=typeof Promise&&r instanceof Promise?r.then((function(e){return v(c,n),T(e,c)}),(function(e){throw O(c),e})):(v(c,n),T(r,c))}if(!e||"object"!=typeof e){if((r=i(e))===H)return;return void 0===r&&(r=e),t.K&&x(r,!0),r}a(21,e)},this.produceWithPatches=function(e,a){return"function"==typeof e?function(a){for(var i=arguments.length,l=Array(i>1?i-1:0),n=1;n<i;n++)l[n-1]=arguments[n];return t.produceWithPatches(a,(function(t){return e.apply(void 0,[t].concat(l))}))}:[t.produce(e,a,(function(e,t){i=e,l=t})),i,l];var i,l},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){l(e)||a(8),i(e)&&(e=A(e));var t=_(this),n=z(this,e,void 0);return n[J].I=!0,M(t),n},t.finishDraft=function(e,t){var a=(e&&e[J]).A;return v(a,t),T(void 0,a)},t.setAutoFreeze=function(e){this.K=e},t.setUseProxies=function(e){e&&!W&&a(20),this.S=e},t.applyPatches=function(e,t){var a;for(a=t.length-1;a>=0;a--){var l=t[a];if(0===l.path.length&&"replace"===l.op){e=l.value;break}}var n=b("Patches").W;return i(e)?n(e,t):this.produce(e,(function(e){return n(e,t.slice(a+1))}))},e}(),ie=new ae,le=ie.produce,ne=ie.produceWithPatches.bind(ie),se=ie.setAutoFreeze.bind(ie),oe=ie.setUseProxies.bind(ie),re=ie.applyPatches.bind(ie),ce=ie.createDraft.bind(ie),de=ie.finishDraft.bind(ie);t.Immer=ae,t.applyPatches=re,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=ce,t.current=A,t.default=le,t.enableAllPlugins=function(){N(),R(),I()},t.enableES5=N,t.enableMapSet=R,t.enablePatches=I,t.finishDraft=de,t.freeze=x,t.immerable=G,t.isDraft=i,t.isDraftable=l,t.nothing=H,t.original=function(e){return i(e)||a(23,e),e[J].u},t.produce=le,t.produceWithPatches=ne,t.setAutoFreeze=se,t.setUseProxies=oe},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(42);case"v7light":return a(44);case"v8dark":return a(46);case"v8light":return a(48)}},function(e,t,a){var i=a(34),l=a(43);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmTimeline{overflow:hidden;width:100%}.ilmTimeline__phasesContainer{display:inline-block;width:100%;margin-top:8px}.ilmTimeline__phasesContainer__phase:first-child{padding-left:0;padding-right:8px}.ilmTimeline__phasesContainer__phase:last-child{padding-left:8px;padding-right:0}.ilmTimeline__phasesContainer__phase:only-child{padding-left:0;padding-right:0}.ilmTimeline__phasesContainer__phase{display:inline-block;padding-left:8px;padding-right:8px}.ilmTimeline__deleteIconContainer{padding:12px;margin-left:12px;background-color:#25262E;color:#98A2B3;border-radius:50%}.ilmTimeline__colorBar{display:inline-block;height:8px;margin-top:8px;margin-bottom:4px;border-radius:calc(8px / 2);width:100%}.ilmTimeline__hotPhase{width:var(--ilm-timeline-hot-phase-width)}.ilmTimeline__hotPhase__colorBar{background-color:#E7664C}.ilmTimeline__warmPhase{width:var(--ilm-timeline-warm-phase-width)}.ilmTimeline__warmPhase__colorBar{background-color:#D6BF57}.ilmTimeline__coldPhase{width:var(--ilm-timeline-cold-phase-width)}.ilmTimeline__coldPhase__colorBar{background-color:#6092C0}.ilmTimeline__frozenPhase{width:var(--ilm-timeline-frozen-phase-width)}.ilmTimeline__frozenPhase__colorBar{background-color:#CA8EAE}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(45);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmTimeline{overflow:hidden;width:100%}.ilmTimeline__phasesContainer{display:inline-block;width:100%;margin-top:8px}.ilmTimeline__phasesContainer__phase:first-child{padding-left:0;padding-right:8px}.ilmTimeline__phasesContainer__phase:last-child{padding-left:8px;padding-right:0}.ilmTimeline__phasesContainer__phase:only-child{padding-left:0;padding-right:0}.ilmTimeline__phasesContainer__phase{display:inline-block;padding-left:8px;padding-right:8px}.ilmTimeline__deleteIconContainer{padding:12px;margin-left:12px;background-color:#F5F7FA;color:#69707D;border-radius:50%}.ilmTimeline__colorBar{display:inline-block;height:8px;margin-top:8px;margin-bottom:4px;border-radius:calc(8px / 2);width:100%}.ilmTimeline__hotPhase{width:var(--ilm-timeline-hot-phase-width)}.ilmTimeline__hotPhase__colorBar{background-color:#E7664C}.ilmTimeline__warmPhase{width:var(--ilm-timeline-warm-phase-width)}.ilmTimeline__warmPhase__colorBar{background-color:#D6BF57}.ilmTimeline__coldPhase{width:var(--ilm-timeline-cold-phase-width)}.ilmTimeline__coldPhase__colorBar{background-color:#6092C0}.ilmTimeline__frozenPhase{width:var(--ilm-timeline-frozen-phase-width)}.ilmTimeline__frozenPhase__colorBar{background-color:#CA8EAE}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(47);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmTimeline{overflow:hidden;width:100%}.ilmTimeline__phasesContainer{display:inline-block;width:100%;margin-top:8px}.ilmTimeline__phasesContainer__phase:first-child{padding-left:0;padding-right:8px}.ilmTimeline__phasesContainer__phase:last-child{padding-left:8px;padding-right:0}.ilmTimeline__phasesContainer__phase:only-child{padding-left:0;padding-right:0}.ilmTimeline__phasesContainer__phase{display:inline-block;padding-left:8px;padding-right:8px}.ilmTimeline__deleteIconContainer{padding:12px;margin-left:12px;background-color:#25262E;color:#98A2B3;border-radius:50%}.ilmTimeline__colorBar{display:inline-block;height:8px;margin-top:8px;margin-bottom:4px;border-radius:calc(8px / 2);width:100%}.ilmTimeline__hotPhase{width:var(--ilm-timeline-hot-phase-width)}.ilmTimeline__hotPhase__colorBar{background-color:#E7664C}.ilmTimeline__warmPhase{width:var(--ilm-timeline-warm-phase-width)}.ilmTimeline__warmPhase__colorBar{background-color:#D6BF57}.ilmTimeline__coldPhase{width:var(--ilm-timeline-cold-phase-width)}.ilmTimeline__coldPhase__colorBar{background-color:#6092C0}.ilmTimeline__frozenPhase{width:var(--ilm-timeline-frozen-phase-width)}.ilmTimeline__frozenPhase__colorBar{background-color:#CA8EAE}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(49);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmTimeline{overflow:hidden;width:100%}.ilmTimeline__phasesContainer{display:inline-block;width:100%;margin-top:8px}.ilmTimeline__phasesContainer__phase:first-child{padding-left:0;padding-right:8px}.ilmTimeline__phasesContainer__phase:last-child{padding-left:8px;padding-right:0}.ilmTimeline__phasesContainer__phase:only-child{padding-left:0;padding-right:0}.ilmTimeline__phasesContainer__phase{display:inline-block;padding-left:8px;padding-right:8px}.ilmTimeline__deleteIconContainer{padding:12px;margin-left:12px;background-color:#F5F7FA;color:#69707D;border-radius:50%}.ilmTimeline__colorBar{display:inline-block;height:8px;margin-top:8px;margin-bottom:4px;border-radius:calc(8px / 2);width:100%}.ilmTimeline__hotPhase{width:var(--ilm-timeline-hot-phase-width)}.ilmTimeline__hotPhase__colorBar{background-color:#E7664C}.ilmTimeline__warmPhase{width:var(--ilm-timeline-warm-phase-width)}.ilmTimeline__warmPhase__colorBar{background-color:#D6BF57}.ilmTimeline__coldPhase{width:var(--ilm-timeline-cold-phase-width)}.ilmTimeline__coldPhase__colorBar{background-color:#6092C0}.ilmTimeline__frozenPhase{width:var(--ilm-timeline-frozen-phase-width)}.ilmTimeline__frozenPhase__colorBar{background-color:#CA8EAE}\n",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(51);case"v7light":return a(53);case"v8dark":return a(55);case"v8light":return a(57)}},function(e,t,a){var i=a(34),l=a(52);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection{background-color:#25262E;padding-top:12px;padding-left:12px;padding-right:12px;padding-bottom:12px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(54);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection{background-color:#F5F7FA;padding-top:12px;padding-left:12px;padding-right:12px;padding-bottom:12px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(56);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection{background-color:#25262E;padding-top:12px;padding-left:12px;padding-right:12px;padding-bottom:12px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(58);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".indexLifecycleManagement__phase__dataTierAllocation__controlSection{background-color:#F5F7FA;padding-top:12px;padding-left:12px;padding-right:12px;padding-bottom:12px}\n",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(60);case"v7light":return a(62);case"v8dark":return a(64);case"v8light":return a(66)}},function(e,t,a){var i=a(34),l=a(61);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDataTierAllocationField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(63);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDataTierAllocationField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(65);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDataTierAllocationField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(67);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDataTierAllocationField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){var i=a(69),l=a(70),n=l;n.v1=i,n.v4=l,e.exports=n},function(e,t,a){var i,l,n=a(38),s=a(39),o=0,r=0;e.exports=function(e,t,a){var c=t&&a||0,d=t||[],u=(e=e||{}).node||i,m=void 0!==e.clockseq?e.clockseq:l;if(null==u||null==m){var p=n();null==u&&(u=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==m&&(m=l=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),x=void 0!==e.nsecs?e.nsecs:r+1,f=h-o+(x-r)/1e4;if(f<0&&void 0===e.clockseq&&(m=m+1&16383),(f<0||h>o)&&void 0===e.nsecs&&(x=0),x>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,r=x,l=m;var g=(1e4*(268435455&(h+=122192928e5))+x)%4294967296;d[c++]=g>>>24&255,d[c++]=g>>>16&255,d[c++]=g>>>8&255,d[c++]=255&g;var b=h/4294967296*1e4&268435455;d[c++]=b>>>8&255,d[c++]=255&b,d[c++]=b>>>24&15|16,d[c++]=b>>>16&255,d[c++]=m>>>8|128,d[c++]=255&m;for(var j=0;j<6;++j)d[c+j]=u[j];return t||s(d)}},function(e,t,a){var i=a(38),l=a(39);e.exports=function(e,t,a){var n=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[n+o]=s[o];return t||l(s)}},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(72);case"v7light":return a(74);case"v8dark":return a(76);case"v8light":return a(78)}},function(e,t,a){var i=a(34),l=a(73);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmSearchableSnapshotField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(75);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmSearchableSnapshotField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(77);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmSearchableSnapshotField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(79);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmSearchableSnapshotField{max-width:400px}\n",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(81);case"v7light":return a(83);case"v8dark":return a(85);case"v8light":return a(87)}},function(e,t,a){var i=a(34),l=a(82);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhaseIcon{width:32px;height:32px;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#25262E}.ilmPhaseIcon--disabled{margin-top:8px;width:16px;height:16px}.ilmPhaseIcon--delete{background-color:#343741}.ilmPhaseIcon__inner--hot{fill:#FF7E62}.ilmPhaseIcon__inner--warm{fill:#F1D86F}.ilmPhaseIcon__inner--cold{fill:#79AAD9}.ilmPhaseIcon__inner--frozen{fill:#E4A6C7}.ilmPhaseIcon__inner--delete{fill:#98A2B3}.ilmPhaseIcon__inner--disabled{fill:#535966}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(84);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhaseIcon{width:32px;height:32px;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#F5F7FA}.ilmPhaseIcon--disabled{margin-top:8px;width:16px;height:16px}.ilmPhaseIcon--delete{background-color:#D3DAE6}.ilmPhaseIcon__inner--hot{fill:#FF7E62}.ilmPhaseIcon__inner--warm{fill:#F1D86F}.ilmPhaseIcon__inner--cold{fill:#79AAD9}.ilmPhaseIcon__inner--frozen{fill:#E4A6C7}.ilmPhaseIcon__inner--delete{fill:#69707D}.ilmPhaseIcon__inner--disabled{fill:#98A2B3}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(86);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhaseIcon{width:32px;height:32px;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#25262E}.ilmPhaseIcon--disabled{margin-top:8px;width:16px;height:16px}.ilmPhaseIcon--delete{background-color:#343741}.ilmPhaseIcon__inner--hot{fill:#FF7E62}.ilmPhaseIcon__inner--warm{fill:#F1D86F}.ilmPhaseIcon__inner--cold{fill:#79AAD9}.ilmPhaseIcon__inner--frozen{fill:#E4A6C7}.ilmPhaseIcon__inner--delete{fill:#98A2B3}.ilmPhaseIcon__inner--disabled{fill:#535966}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(88);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhaseIcon{width:32px;height:32px;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#F5F7FA}.ilmPhaseIcon--disabled{margin-top:8px;width:16px;height:16px}.ilmPhaseIcon--delete{background-color:#D3DAE6}.ilmPhaseIcon__inner--hot{fill:#FF7E62}.ilmPhaseIcon__inner--warm{fill:#F1D86F}.ilmPhaseIcon__inner--cold{fill:#79AAD9}.ilmPhaseIcon__inner--frozen{fill:#E4A6C7}.ilmPhaseIcon__inner--delete{fill:#69707D}.ilmPhaseIcon__inner--disabled{fill:#98A2B3}\n",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(90);case"v7light":return a(92);case"v8dark":return a(94);case"v8light":return a(96)}},function(e,t,a){var i=a(34),l=a(91);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhase .euiCommentEvent__header{padding:16px}.ilmPhase .euiCommentEvent__body{padding:16px}.ilmPhase .ilmSettingsButton{color:#1BA9F5;padding-top:8px;padding-bottom:8px}.ilmPhase .euiCommentTimeline{padding-top:16px}.ilmPhase .euiCommentTimeline::before{height:calc(100% + 40px)}.ilmPhase--enabled .euiCommentEvent__header{background-color:#1D1E24}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(93);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhase .euiCommentEvent__header{padding:16px}.ilmPhase .euiCommentEvent__body{padding:16px}.ilmPhase .ilmSettingsButton{color:#006BB4;padding-top:8px;padding-bottom:8px}.ilmPhase .euiCommentTimeline{padding-top:16px}.ilmPhase .euiCommentTimeline::before{height:calc(100% + 40px)}.ilmPhase--enabled .euiCommentEvent__header{background-color:#fff}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(95);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhase .euiCommentEvent__header{padding:16px}.ilmPhase .euiCommentEvent__body{padding:16px}.ilmPhase .ilmSettingsButton{color:#36A2EF;padding-top:8px;padding-bottom:8px}.ilmPhase .euiCommentTimeline{padding-top:16px}.ilmPhase .euiCommentTimeline::before{height:calc(100% + 40px)}.ilmPhase--enabled .euiCommentEvent__header{background-color:#1D1E24}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(97);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmPhase .euiCommentEvent__header{padding:16px}.ilmPhase .euiCommentEvent__body{padding:16px}.ilmPhase .ilmSettingsButton{color:#07C;padding-top:8px;padding-bottom:8px}.ilmPhase .euiCommentTimeline{padding-top:16px}.ilmPhase .euiCommentTimeline::before{height:calc(100% + 40px)}.ilmPhase--enabled .euiCommentEvent__header{background-color:#fff}\n",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(99);case"v7light":return a(101);case"v8dark":return a(103);case"v8light":return a(105)}},function(e,t,a){var i=a(34),l=a(100);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDeletePhase .euiCommentEvent__header{padding:16px;background-color:#1D1E24}.ilmDeletePhase .euiCommentEvent__body{padding:16px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(102);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDeletePhase .euiCommentEvent__header{padding:16px;background-color:#fff}.ilmDeletePhase .euiCommentEvent__body{padding:16px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(104);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDeletePhase .euiCommentEvent__header{padding:16px;background-color:#1D1E24}.ilmDeletePhase .euiCommentEvent__body{padding:16px}\n",""]),e.exports=t},function(e,t,a){var i=a(34),l=a(106);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1};i(l,n);e.exports=l.locals||{}},function(e,t,a){(t=a(35)(!1)).push([e.i,".ilmDeletePhase .euiCommentEvent__header{padding:16px;background-color:#fff}.ilmDeletePhase .euiCommentEvent__body{padding:16px}\n",""]),e.exports=t},function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return Na}));var i=a(7),l=a.n(i),n=a(33),s=a(28),o=a(26),r=a(30),c=a(27),d=a(17),u=a(31);const m=()=>Object(s.useKibana)();var p=a(29),h=a(14),x=a(6),f=a(1),g=a(3),b=a(12),j=a(11);const y=e=>{let t="",a="";const i=/(\d+)(\w+)/.exec(e);return i&&(t=i[1],a=i[2]),{size:t,units:a}};var v=a(2),O=a(10),M=a(8),_=a(16),P=a(37);const T=(e={})=>{const{allocate:t,migrate:a}=e;return!1===(null==a?void 0:a.enabled)?"none":t&&(t.require&&Object.keys(t.require).length||t.include&&Object.keys(t.include).length||t.exclude&&Object.keys(t.exclude).length)?"node_attrs":"node_roles"},k=e=>{var t,a,i;const l=null==e||null===(t=e.phases)||void 0===t||null===(a=t.hot)||void 0===a||null===(i=a.actions)||void 0===i?void 0:i.rollover;return Boolean(l&&l.max_age===x.q.max_age&&l.max_docs===x.q.max_docs&&l.max_primary_shard_size===x.q.max_primary_shard_size)};var w=a(32),L=a.n(w);const E=["hot","warm","cold","frozen","delete"],S=(e,t)=>{var a,i;return{min_age:null!==(a=t.phases)&&void 0!==a&&null!==(i=a[e])&&void 0!==i&&i.min_age?t.phases[e].min_age+t._meta[e].minAgeUnit:"0ms"}},F=(e,t)=>{let a;return a="micros"===t?parseInt(e,10)/1e3:"nanos"===t?parseInt(e,10)/1e6:L.a.duration(e,t).asMilliseconds(),a},C=e=>{var t;return 0===e.length?"":Boolean(null===(t=e[0])||void 0===t?void 0:t.snapshot_repository)?e[0].snapshot_repository:C(e.slice(1))},z="_meta.hot.customRollover.enabled",A="_meta.hot.isUsingDefaultRollover",D={maxDocs:"phases.hot.actions.rollover.max_docs",maxAge:"phases.hot.actions.rollover.max_age",maxSize:"phases.hot.actions.rollover.max_size",maxPrimaryShardSize:"phases.hot.actions.rollover.max_primary_shard_size"},N="found-snapshots",I=[{value:"gb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.gigabytesLabel",{defaultMessage:"gigabytes"})},{value:"mb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.megabytesLabel",{defaultMessage:"megabytes"})},{value:"b",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.bytesLabel",{defaultMessage:"bytes"})},{value:"kb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.kilobytesLabel",{defaultMessage:"kilobytes"})},{value:"tb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.terabytesLabel",{defaultMessage:"terabytes"})},{value:"pb",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.byteSizeUnits.petabytesLabel",{defaultMessage:"petabytes"})}],R=[{value:"d",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.daysLabel",{defaultMessage:"days"})},{value:"h",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.hoursLabel",{defaultMessage:"hours"})},{value:"m",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.minutesLabel",{defaultMessage:"minutes"})},{value:"s",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.secondsLabel",{defaultMessage:"seconds"})},{value:"ms",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.millisecondsLabel",{defaultMessage:"milliseconds"})},{value:"micros",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.microsecondsLabel",{defaultMessage:"microseconds"})},{value:"nanos",text:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.timeUnits.nanosecondsLabel",{defaultMessage:"nanoseconds"})}],B=({dataTierAllocationType:e,allocationNodeAttribute:t},a={},i={},l)=>{var n,s;const{allocate:o,migrate:r,...c}=a,d={...c};if(o){const{include:e,exclude:t,require:a,number_of_replicas:i,...l}=o;Object(O.isEmpty)(l)||(d.allocate={...l})}switch(e){case"node_attrs":if(t){const[e,a]=t.split(":");d.allocate={...d.allocate,require:{[e]:a}}}else d.migrate=i.migrate;var u,m;if(!Object(O.isEmpty)(null==i||null===(n=i.allocate)||void 0===n?void 0:n.include))d.allocate={...d.allocate,include:{...null==i||null===(u=i.allocate)||void 0===u?void 0:u.include}};if(!Object(O.isEmpty)(null==i||null===(s=i.allocate)||void 0===s?void 0:s.exclude))d.allocate={...d.allocate,exclude:{...null==i||null===(m=i.allocate)||void 0===m?void 0:m.exclude}};break;case"none":d.migrate={...null==i?void 0:i.migrate,enabled:!1}}return null!=l&&(d.allocate={...d.allocate,number_of_replicas:l}),d},U={editPolicy:{shrinkLabel:v.i18n.translate("xpack.indexLifecycleMgmt.shrink.enableShrinkLabel",{defaultMessage:"Shrink index"}),shrinkCountLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.shrink.configureShardCountLabel",{defaultMessage:"Configure shard count"}),shrinkSizeLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.shrink.configureShardSizeLabel",{defaultMessage:"Configure shard size"}),rolloverOffsetsHotPhaseTiming:v.i18n.translate("xpack.indexLifecycleMgmt.rollover.rolloverOffsetsPhaseTimingDescription",{defaultMessage:"How long it takes to reach the rollover criteria in the hot phase can vary."}),searchableSnapshotInHotPhase:{searchableSnapshotDisallowed:{calloutTitle:v.i18n.translate("xpack.indexLifecycleMgmt.searchableSnapshot.disallowedCalloutTitle",{defaultMessage:"Searchable snapshot disabled"}),calloutBody:v.i18n.translate("xpack.indexLifecycleMgmt.searchableSnapshot.disallowedCalloutBody",{defaultMessage:"To use searchable snapshot in this phase you must disable searchable snapshot in the hot phase."})}},forceMergeEnabledFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.forcemerge.enableLabel",{defaultMessage:"Force merge data"}),readonlyEnabledFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.readonlyFieldLabel",{defaultMessage:"Make index read only"}),maxNumSegmentsFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.forceMerge.numberOfSegmentsLabel",{defaultMessage:"Number of segments"}),indexPriorityFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.indexPriorityLabel",{defaultMessage:"Index priority"}),bestCompressionFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.forcemerge.bestCompressionLabel",{defaultMessage:"Compress stored fields"}),bestCompressionFieldHelpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.forceMerge.bestCompressionText",{defaultMessage:"Use higher compression for stored fields at the cost of slower performance."}),allocationTypeOptionsFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.allocationFieldLabel",{defaultMessage:"Data tier options"}),allocationNodeAttributeFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierAllocation.nodeAllocationFieldLabel",{defaultMessage:"Select a node attribute"}),searchableSnapshotsRepoFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotRepoFieldLabel",{defaultMessage:"Snapshot repository"}),searchableSnapshotsStorageFieldLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotStorageFieldLabel",{defaultMessage:"Searchable snapshot storage"}),maxPrimaryShardSizeLabel:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumPrimaryShardSizeLabel",{defaultMessage:"Maximum primary shard size"}),maxPrimaryShardSizeUnitsLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.maximumPrimaryShardSizeAriaLabel",{defaultMessage:"Maximum shard size units"}),errors:{numberRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberRequiredErrorMessage",{defaultMessage:"A number is required."}),numberGreatThan0Required:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.numberAboveZeroRequiredError",{defaultMessage:"Only numbers above 0 are allowed."}),integerRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.integerRequiredError",{defaultMessage:"Only integers are allowed."}),maximumAgeRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumAgeMissingError",{defaultMessage:"A maximum age is required."}),maximumSizeRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumIndexSizeMissingError",{defaultMessage:"A maximum index size is required."}),maximumDocumentsRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumDocumentsMissingError",{defaultMessage:"Maximum documents is required."}),maximumPrimaryShardSizeRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.maximumPrimaryShardSizeMissingError",{defaultMessage:"A maximum primary shard size is required"}),rollOverConfigurationCallout:{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.title",{defaultMessage:"Invalid rollover configuration"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.rolloverConfigurationError.body",{defaultMessage:"A value for one of maximum primary shard size, maximum documents, maximum age or maximum index size is required."})},nonNegativeNumberRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.nonNegativeNumberRequiredError",{defaultMessage:"Only non-negative numbers are allowed."}),policyNameContainsInvalidChars:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.errors.policyNameContainsInvalidCharsError",{defaultMessage:"A policy name cannot contain spaces or commas."}),policyNameAlreadyUsedErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameAlreadyUsedError",{defaultMessage:"That policy name is already used."}),policyNameMustBeDifferentErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.differentPolicyNameRequiredError",{defaultMessage:"The policy name must be different."}),policyNameRequiredMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameRequiredError",{defaultMessage:"A policy name is required."}),policyNameStartsWithUnderscoreErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameStartsWithUnderscoreError",{defaultMessage:"A policy name cannot start with an underscore."}),policyNameTooLongErrorMessage:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameTooLongError",{defaultMessage:"A policy name cannot be longer than 255 bytes."}),searchableSnapshotRepoRequired:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotRepoRequiredError",{defaultMessage:"A snapshot repository name is required."})},titles:{hot:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseTitle",{defaultMessage:"Hot phase"}),warm:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseTitle",{defaultMessage:"Warm phase"}),cold:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseTitle",{defaultMessage:"Cold phase"}),frozen:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.frozenPhase.frozenPhaseTitle",{defaultMessage:"Frozen phase"}),delete:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseTitle",{defaultMessage:"Delete phase"})},descriptions:{hot:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.hotPhase.hotPhaseDescription",{defaultMessage:"Store your most recent, most frequently-searched data in the hot tier. The hot tier provides the best indexing and search performance by using the most powerful, expensive hardware."}),warm:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.warmPhaseDescription",{defaultMessage:"Move data to the warm tier when you are still likely to search it, but infrequently need to update it. The warm tier is optimized for search performance over indexing performance."}),cold:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.coldPhaseDescription",{defaultMessage:"Move data to the cold tier when you are searching it less often and don’t need to update it. The cold tier is optimized for cost savings over search performance."}),frozen:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.frozenPhase.frozenPhaseDescription",{defaultMessage:"Move data to the frozen tier for long term retention. The frozen tier provides the most cost-effective way store your data and still be able to search it."}),delete:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.deletePhaseDescription",{defaultMessage:"Delete data you no longer need."})}}},{numberGreaterThanField:q,containsCharsField:$,emptyField:V,startsWithField:W}=r.fieldValidators,H=({than:e,message:t})=>a=>{if(a.value)return q({than:e,message:t})({...a,value:parseInt(a.value,10)})},G=H({than:0,message:U.editPolicy.errors.numberGreatThan0Required}),J=H({than:-1,message:U.editPolicy.errors.nonNegativeNumberRequired}),K="ROLLOVER_VALUE_REQUIRED_VALIDATION_CODE",Y=Object.values(D),Q=({form:e,path:t})=>{const a=e.getFields();if(!Y.some((e=>{var t;return Boolean(null===(t=a[e])||void 0===t?void 0:t.value)}))){const e={code:K,message:""};switch(t){case D.maxAge:e.message=U.editPolicy.errors.maximumAgeRequiredMessage;break;case D.maxDocs:e.message=U.editPolicy.errors.maximumDocumentsRequiredMessage;break;case D.maxPrimaryShardSize:e.message=U.editPolicy.errors.maximumPrimaryShardSizeRequiredMessage;break;default:e.message=U.editPolicy.errors.maximumSizeRequiredMessage}return e}Y.forEach((e=>{var t;null===(t=a[e])||void 0===t||t.clearErrors(K)}))},X=e=>{var t;if(!Number.isInteger(Number(null!==(t=e.value)&&void 0!==t?t:"")))return{message:U.editPolicy.errors.integerRequired}},Z=e=>({formData:t})=>{if("warm"===e)return;const a=e=>{const a=t[`_meta.${e}.minAgeToMilliSeconds`];return{milli:a,esFormat:a>=0?t[`phases.${e}.min_age`]+t[`_meta.${e}.minAgeUnit`]:void 0}},i={warm:a("warm"),cold:a("cold"),frozen:a("frozen"),delete:a("delete")},l={greaterThanWarmPhase:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minAgeSmallerThanWarmPhaseError",{defaultMessage:"Must be greater or equal than the warm phase value ({value})",values:{value:i.warm.esFormat}}),greaterThanColdPhase:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minAgeSmallerThanColdPhaseError",{defaultMessage:"Must be greater or equal than the cold phase value ({value})",values:{value:i.cold.esFormat}}),greaterThanFrozenPhase:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minAgeSmallerThanFrozenPhaseError",{defaultMessage:"Must be greater or equal than the frozen phase value ({value})",values:{value:i.frozen.esFormat}})};if("cold"===e)return i.warm.milli>=0&&i.cold.milli<i.warm.milli?{message:l.greaterThanWarmPhase}:void 0;if("frozen"===e)return i.cold.milli>=0&&i.frozen.milli<i.cold.milli?{message:l.greaterThanColdPhase}:i.warm.milli>=0&&i.frozen.milli<i.warm.milli?{message:l.greaterThanWarmPhase}:void 0;if("delete"===e){if(i.frozen.milli>=0&&i.delete.milli<i.frozen.milli)return{message:l.greaterThanFrozenPhase};if(i.cold.milli>=0&&i.delete.milli<i.cold.milli)return{message:l.greaterThanColdPhase};if(i.warm.milli>=0&&i.delete.milli<i.warm.milli)return{message:l.greaterThanWarmPhase}}},ee=Object.values(D),{emptyField:te,numberGreaterThanField:ae}=r.fieldValidators,ie={stringToNumber:e=>null!=e?parseInt(e,10):void 0},le={label:U.editPolicy.maxNumSegmentsFieldLabel,validations:[{validator:te(v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.forcemerge.numberOfSegmentsRequiredError",{defaultMessage:"A value for number of segments is required."}))},{validator:G}],serializer:ie.stringToNumber},ne={snapshot_repository:{label:U.editPolicy.searchableSnapshotsRepoFieldLabel,validations:[{validator:te(U.editPolicy.errors.searchableSnapshotRepoRequired)}],helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshot.repositoryHelpText",{defaultMessage:"Each phase uses the same snapshot repository."})},storage:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshot.storageLabel",{defaultMessage:"Storage"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshot.storageHelpText",{defaultMessage:"Type of snapshot mounted for the searchable snapshot. This is an advanced option. Only change it if you know what you're doing."})}},se={label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicasLabel",{defaultMessage:"Number of replicas"}),validations:[{validator:te(U.editPolicy.errors.numberRequired)},{validator:J}],serializer:ie.stringToNumber},oe={label:v.i18n.translate("xpack.indexLifecycleMgmt.shrink.numberOfPrimaryShardsLabel",{defaultMessage:"Number of primary shards"}),defaultValue:1,validations:[{validator:te(U.editPolicy.errors.numberRequired)},{validator:ae({message:U.editPolicy.errors.numberGreatThan0Required,than:0})}],serializer:ie.stringToNumber},re={label:U.editPolicy.maxPrimaryShardSizeLabel,validations:[{validator:te(U.editPolicy.errors.numberRequired)},{validator:ae({message:U.editPolicy.errors.numberGreatThan0Required,than:0})}],serializer:ie.stringToNumber},ce=e=>({defaultValue:x.o[e],label:U.editPolicy.indexPriorityFieldLabel,validations:[{validator:te(U.editPolicy.errors.numberRequired)},{validator:J}],serializer:ie.stringToNumber}),de=(e,t)=>({defaultValue:t,fieldsToValidateOnChange:[],validations:[{validator:te(U.editPolicy.errors.numberRequired)},{validator:J},{validator:X},{validator:Z(e)}]});var ue=a(0);const me=Object(i.createContext)(null),pe="phases.hot.actions.searchable_snapshot.snapshot_repository",he="phases.cold.actions.searchable_snapshot.snapshot_repository",xe=({children:e})=>{const[t]=Object(o.useFormData)({watch:[pe,he,z,A]}),a=Object(O.get)(t,A),i=Object(O.get)(t,z,!0),l={isUsingRollover:!1!==a||i,isUsingSearchableSnapshotInHotPhase:null!=Object(O.get)(t,pe),isUsingSearchableSnapshotInColdPhase:null!=Object(O.get)(t,he)};return Object(ue.jsx)(me.Provider,{value:l},e)},fe=()=>{const e=Object(i.useContext)(me);if(!e)throw new Error("Cannot use configuration outside of configuration context");return e},ge=Object(i.createContext)(null),be=()=>({hasErrors:!1,hot:{},warm:{},cold:{},frozen:{},delete:{},other:{}}),je=({children:e})=>{const[t,a]=Object(i.useState)(be),l=Object(o.useFormContext)(),{getErrors:n,isSubmitted:s}=l,r=Object(i.useCallback)(((e,t,i)=>{a((a=>({...a,hasErrors:!0,[e]:{...a[e],[t]:i}})))}),[a]),c=Object(i.useCallback)(((e,t)=>{n().length?a((a=>{const{[e]:{[t]:i,...l},hasErrors:n,...s}=a,o=Object.keys(l).length>0||Object.values(s).some((e=>Object.keys(e).length>0));return{...a,hasErrors:o,[e]:l}})):a(be)}),[n,a]);return Object(ue.jsx)(ge.Provider,{value:{errors:t,addError:r,clearError:c,isFormSubmitted:s}},e)},ye=()=>{const e=Object(i.useContext)(ge);if(!e)throw new Error("useFormErrorsContext can only be used inside of FormErrorsProvider");return e},ve=e=>{var t,a,i,l,n,s;const o=null==e||null===(t=e._meta)||void 0===t||null===(a=t.warm)||void 0===a?void 0:a.enabled,r=null==e||null===(i=e._meta)||void 0===i||null===(l=i.cold)||void 0===l?void 0:l.enabled,c=null==e||null===(n=e._meta)||void 0===n||null===(s=n.frozen)||void 0===s?void 0:s.enabled;return{hot:{isFinalDataPhase:!o&&!r&&!c},warm:{isFinalDataPhase:o&&!r&&!c},cold:{isFinalDataPhase:r&&!c},frozen:{isFinalDataPhase:c}}},Oe=Object(i.createContext)(null),Me=({children:e})=>{const{deleteEnabled:t}=we(),[a]=Object(o.useFormData)({watch:["_meta.warm.enabled","_meta.cold.enabled","_meta.frozen.enabled","_meta.delete.enabled"]});return Object(ue.jsx)(Oe.Provider,{value:{...ve(a),isDeletePhaseEnabled:t.value,setDeletePhaseEnabled:t.setValue}},e)},_e=()=>{const e=Object(i.useContext)(Oe);if(!e)throw new Error("Cannot use phase timings outside of phase timings context");return e},Pe=Object(i.createContext)(null),Te={deleteEnabled:{path:"_meta.delete.enabled"},searchableSnapshotRepo:{path:"_meta.searchableSnapshot.repository"},warmMinAgeMilliSeconds:{path:"_meta.warm.minAgeToMilliSeconds"},coldMinAgeMilliSeconds:{path:"_meta.cold.minAgeToMilliSeconds"},frozenMinAgeMilliSeconds:{path:"_meta.frozen.minAgeToMilliSeconds"},deleteMinAgeMilliSeconds:{path:"_meta.delete.minAgeToMilliSeconds"},hotIsUsingShardSize:{path:"_meta.hot.shrink.isUsingShardSize"},warmIsUsingShardSize:{path:"_meta.warm.shrink.isUsingShardSize"}},ke=({children:e})=>Object(ue.jsx)(o.UseMultiFields,{fields:Te},(t=>Object(ue.jsx)(Pe.Provider,{value:t},e))),we=()=>{const e=Object(i.useContext)(Pe);if(!e)throw new Error("Cannot use global fields outside of global fields context");return e},Le=({form:e,children:t})=>Object(ue.jsx)(o.Form,{form:e},Object(ue.jsx)(xe,null,Object(ue.jsx)(je,null,Object(ue.jsx)(ke,null,Object(ue.jsx)(Me,null,t)))));var Ee=a(36),Se=a.n(Ee);const Fe=e=>t=>t.startsWith(`phases.${e}`)||t.startsWith(`_meta.${e}`),Ce=Fe("hot"),ze=Fe("warm"),Ae=Fe("cold"),De=Fe("frozen"),Ne=Fe("delete"),Ie=e=>{const{path:t}=e,a=Object(i.useRef)(!1),l=Object(i.useMemo)((()=>{return Ce(e=t)?"hot":ze(e)?"warm":Ae(e)?"cold":De(e)?"frozen":Ne(e)?"delete":"other";var e}),[t]),{addError:n,clearError:s}=ye(),r=Object(i.useCallback)((e=>{a.current&&(e?n(l,t,e):s(l,t))}),[l,t,n,s]);return Object(i.useEffect)((()=>(a.current=!0,()=>{a.current=!1})),[]),Object(i.useEffect)((()=>()=>{!1===a.current&&s(l,t)}),[l,t,s]),Object(ue.jsx)(o.UseField,Se()({},e,{onError:r}))};var Re=a(9),Be=a(15);const Ue=({docPath:e,text:t})=>{const a=t||Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.learnMore",defaultMessage:"Learn more"});return Object(ue.jsx)(f.EuiLink,{href:Object(_.a)(e),target:"_blank",external:!0},a)},qe=()=>Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.optionalMessage",defaultMessage:" (optional)"}),$e=({policyName:e,close:t})=>{const[a,n]=Object(i.useState)(void 0),{validate:s,getErrors:r}=Object(o.useFormContext)(),[,c]=Object(o.useFormData)(),d=Object(i.useCallback)((async()=>{n(void 0);const e=await s(),t=r(),a=1===t.length&&t[0]===U.editPolicy.errors.policyNameRequiredMessage;var i;n(e||a?{phases:{hot:(i=c()).phases.hot,warm:i.phases.warm,cold:i.phases.cold,frozen:i.phases.frozen,delete:i.phases.delete},_meta:i._meta}:null)}),[n,c,s,r]);let u;switch(Object(i.useEffect)((()=>{d()}),[d]),a){case void 0:u=Object(ue.jsx)(f.EuiLoadingSpinner,null);break;case null:u=Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"policyRequestInvalidAlert",iconType:"alert",color:"danger",title:v.i18n.translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.title",{defaultMessage:"Invalid policy"})},v.i18n.translate("xpack.indexLifecycleMgmt.policyJsonFlyout.validationErrorCallout.body",{defaultMessage:"To view the JSON for this policy address all validation errors."}));break;default:const t=`${`PUT _ilm/policy/${e||"<policyName>"}`}\n${JSON.stringify({policy:{...a}},null,2)}`;u=Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiText,null,Object(ue.jsx)("p",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.descriptionText",defaultMessage:"This Elasticsearch request will create or update this index lifecycle policy."}))),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(f.EuiCodeBlock,{language:"json",isCopyable:!0,"data-test-subj":"policyRequestJson"},t))}return Object(ue.jsx)(f.EuiFlyout,{maxWidth:480,onClose:t},Object(ue.jsx)(f.EuiFlyoutHeader,null,Object(ue.jsx)(f.EuiTitle,null,Object(ue.jsx)("h2",null,e?Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.namedTitle",defaultMessage:"Request for '{policyName}'",values:{policyName:e}}):Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.unnamedTitle",defaultMessage:"Request"})))),Object(ue.jsx)(f.EuiFlyoutBody,null,u),Object(ue.jsx)(f.EuiFlyoutFooter,null,Object(ue.jsx)(f.EuiButtonEmpty,{iconType:"cross",onClick:t,flush:"left","data-test-subj":"policyRequestClose"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyJsonFlyout.closeButtonLabel",defaultMessage:"Close"}))))},Ve=({children:e,switchProps:t,description:a,fieldNotices:n,...s})=>{var o;if(t&&"boolean"!=typeof t.checked&&"boolean"!=typeof t.initialValue)throw new Error("Must specify controlled, uncontrolled component. See SwitchProps interface!");const[r,c]=Object(i.useState)((()=>{var e;return null!==(e=null==t?void 0:t.initialValue)&&void 0!==e&&e})),d=Boolean(void 0===t||(null!==(o=null==t?void 0:t.checked)&&void 0!==o?o:r));return Object(ue.jsx)(f.EuiDescribedFormGroup,Se()({},s,{description:Object(ue.jsx)(l.a.Fragment,null,a,Object(ue.jsx)(f.EuiSpacer,{size:"m"}),(()=>{if(!t)return null;const{onChange:e,checked:a,initialValue:i,...l}=t;return Object(ue.jsx)(f.EuiSwitch,Se()({},l,{checked:d,onChange:t=>{const a=t.target.checked;c(a),e&&e(a)}}))})(),n)}),d?"function"==typeof e?e():e:null)},We=({switchProps:e,...t})=>Object(ue.jsx)(Ie,{path:e.path},(a=>Object(ue.jsx)(Ve,Se()({},t,{switchProps:{...e,label:a.label,checked:a.value,onChange:a.setValue}})))),He=e=>{const{title:t,body:a,resendRequest:i}=e;return Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"m"}),Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":e["data-test-subj"],iconType:"help",color:"warning",title:Object(ue.jsx)(l.a.Fragment,null,t,Object(ue.jsx)(f.EuiButtonIcon,{size:"s",color:"warning",onClick:i,iconType:"refresh","aria-label":e["aria-label"]}))},a))},Ge=({phaseName:e,durationInPhase:t})=>Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiText,{size:"s"},Object(ue.jsx)("strong",null,e))),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},"string"==typeof t?Object(ue.jsx)(f.EuiText,{size:"s"},t):t));a(41);const Je=e=>null!=e,Ke=(e,t)=>e/t*100,Ye=(e,t)=>isFinite(e)?0===t?100:Ke(e,t):100,Qe={title:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.title",{defaultMessage:"Policy summary"}),description:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.description",{defaultMessage:"This policy moves data through the following phases."}),hotPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.hotPhaseSectionTitle",{defaultMessage:"Hot phase"}),warmPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.warmPhaseSectionTitle",{defaultMessage:"Warm phase"}),coldPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.coldPhaseSectionTitle",{defaultMessage:"Cold phase"}),frozenPhase:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.frozenPhaseSectionTitle",{defaultMessage:"Frozen phase"}),deleteIcon:{toolTipContent:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.deleteIconToolTipContent",{defaultMessage:"Policy deletes the index after lifecycle phases complete."})},foreverIcon:{ariaLabel:v.i18n.translate("xpack.indexLifecycleMgmt.timeline.foreverIconToolTipContent",{defaultMessage:"Forever"})}},Xe=Object(i.memo)((({hasDeletePhase:e,isUsingRollover:t,...a})=>{const i={hot:{min_age:a.hotPhaseMinAge},warm:a.warmPhaseMinAge?{min_age:a.warmPhaseMinAge}:void 0,cold:a.coldPhaseMinAge?{min_age:a.coldPhaseMinAge}:void 0,frozen:a.frozenPhaseMinAge?{min_age:a.frozenPhaseMinAge}:void 0,delete:a.deletePhaseMinAge?{min_age:a.deletePhaseMinAge}:void 0},l=(n=i,E.reduce(((e,t,a)=>{var i;if("delete"===t)return e;if(!n[t])return e;const l=E.slice(a+1).find((e=>Boolean(n[e])));let s=1/0;if(l&&null!==(i=n[l])&&void 0!==i&&i.min_age){const{units:e,size:t}=y(n[l].min_age);s=F(t,e)}return{total:Math.max(e.total,s),phases:{...e.phases,[t]:Math.max(s-e.total,0)}}}),{total:0,phases:{hot:0,warm:n.warm?0:void 0,cold:n.cold?0:void 0,frozen:n.frozen?0:void 0}}));var n;const s=(e=>{const t=Ye(e.phases.hot,e.total)+50,a=null!=e.phases.warm?Ye(e.phases.warm,e.total)+50:0,i=null!=e.phases.cold?Ye(e.phases.cold,e.total)+50:0,l=null!=e.phases.frozen?Ye(e.phases.frozen,e.total)+50:0,n=t+a+i+l;return{hot:`${Ke(t,n)}%`,warm:`${Ke(a,n)}%`,cold:`${Ke(i,n)}%`,frozen:`${Ke(l,n)}%`}})(l),o=e=>l.phases[e]===1/0?Object(ue.jsx)(st,{color:"subdued","aria-label":Qe.foreverIcon.ariaLabel}):null;return Object(ue.jsx)(f.EuiFlexGroup,{gutterSize:"s",direction:"column",responsive:!1},Object(ue.jsx)(f.EuiFlexItem,null,Object(ue.jsx)(f.EuiTitle,{size:"s"},Object(ue.jsx)("h2",null,Qe.title)),Object(ue.jsx)(f.EuiText,{size:"s",color:"subdued"},Qe.description," ",Object(ue.jsx)(Ue,{docPath:"ilm-index-lifecycle.html#ilm-phase-transitions",text:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutTimingText",defaultMessage:"Learn about timing"})}))),Object(ue.jsx)(f.EuiFlexItem,null,Object(ue.jsx)("div",{className:"ilmTimeline",ref:e=>{var t,a,i;e&&(e.style.setProperty("--ilm-timeline-hot-phase-width",s.hot),e.style.setProperty("--ilm-timeline-warm-phase-width",null!==(t=s.warm)&&void 0!==t?t:null),e.style.setProperty("--ilm-timeline-cold-phase-width",null!==(a=s.cold)&&void 0!==a?a:null),e.style.setProperty("--ilm-timeline-frozen-phase-width",null!==(i=s.frozen)&&void 0!==i?i:null))}},Object(ue.jsx)(f.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart",responsive:!1},Object(ue.jsx)(f.EuiFlexItem,null,Object(ue.jsx)("div",{className:"ilmTimeline__phasesContainer"},Object(ue.jsx)("div",{"data-test-subj":"ilmTimelinePhase-hot",className:"ilmTimeline__phasesContainer__phase ilmTimeline__hotPhase"},Object(ue.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__hotPhase__colorBar"}),Object(ue.jsx)(Ge,{phaseName:Qe.hotPhase,durationInPhase:o("hot")})),Je(l.phases.warm)&&Object(ue.jsx)("div",{"data-test-subj":"ilmTimelinePhase-warm",className:"ilmTimeline__phasesContainer__phase ilmTimeline__warmPhase"},Object(ue.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__warmPhase__colorBar"}),Object(ue.jsx)(Ge,{phaseName:Qe.warmPhase,durationInPhase:o("warm")})),Je(l.phases.cold)&&Object(ue.jsx)("div",{"data-test-subj":"ilmTimelinePhase-cold",className:"ilmTimeline__phasesContainer__phase ilmTimeline__coldPhase"},Object(ue.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__coldPhase__colorBar"}),Object(ue.jsx)(Ge,{phaseName:Qe.coldPhase,durationInPhase:o("cold")})),Je(l.phases.frozen)&&Object(ue.jsx)("div",{"data-test-subj":"ilmTimelinePhase-frozen",className:"ilmTimeline__phasesContainer__phase ilmTimeline__frozenPhase"},Object(ue.jsx)("div",{className:"ilmTimeline__colorBar ilmTimeline__frozenPhase__colorBar"}),Object(ue.jsx)(Ge,{phaseName:Qe.frozenPhase,durationInPhase:o("frozen")})))),e&&Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)("div",{"data-test-subj":"ilmTimelinePhase-delete",className:"ilmTimeline__deleteIconContainer"},Object(ue.jsx)(f.EuiIconTip,{type:"trash",content:Qe.deleteIcon.toolTipContent})))))))})),Ze=()=>{var e,t,a,i,l,n;const[s]=Object(o.useFormData)(),r=(e=>{var t;const{_meta:a}=e;return a?{hot:{min_age:void 0},warm:a.warm.enabled?S("warm",e):void 0,cold:a.cold.enabled?S("cold",e):void 0,frozen:null!==(t=a.frozen)&&void 0!==t&&t.enabled?S("frozen",e):void 0,delete:a.delete.enabled?S("delete",e):void 0}:{hot:{min_age:void 0}}})(s),{isUsingRollover:c}=fe();return Object(ue.jsx)(Xe,{hotPhaseMinAge:r.hot.min_age,warmPhaseMinAge:null===(e=r.warm)||void 0===e?void 0:e.min_age,coldPhaseMinAge:null===(t=r.cold)||void 0===t?void 0:t.min_age,frozenPhaseMinAge:null===(a=r.frozen)||void 0===a?void 0:a.min_age,deletePhaseMinAge:null===(i=r.delete)||void 0===i?void 0:i.min_age,isUsingRollover:c,hasDeletePhase:Boolean(null===(l=s._meta)||void 0===l||null===(n=l.delete)||void 0===n?void 0:n.enabled)})},et={callout:{title:v.i18n.translate("xpack.indexLifecycleMgmt.policyErrorCalloutTitle",{defaultMessage:"This policy contains errors"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.policyErrorCalloutDescription",{defaultMessage:"Please fix all errors before saving the policy."})}},tt=()=>{const{errors:{hasErrors:e},isFormSubmitted:t}=ye();return t&&e?Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"policyFormErrorsCallout",color:"danger",title:et.callout.title},et.callout.body),Object(ue.jsx)(f.EuiSpacer,null)):null},at=e=>Object(ue.jsx)("svg",Se()({viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),Object(ue.jsx)("defs",null),Object(ue.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.44354 9.86928c-.47429.46802-1.12585.75702-1.84475.75702-1.45038 0-2.626143-1.17576-2.626143-2.62614S2.14841 5.37401 3.59879 5.37401c.71899 0 1.37049.28893 1.84473.75702l.00033-.00033.27438.27438L7.31327 8.0001l-.00001.00001.68777.68777.00001-.00002 1.86843 1.86844-.00078.0007c.65021.6442 1.54481 1.042 2.53251 1.042C14.3888 11.599 16 9.98772 16 8.00016s-1.6112-3.59879-3.5988-3.59879c-.9876 0-1.8822.39779-2.53249 1.04188l.00072.00073-.76518.76516.68777.68777.79978-.79975-.0002-.00017c.471-.44801 1.1082-.72298 1.8096-.72298 1.4504 0 2.6262 1.17577 2.6262 2.62615s-1.1758 2.62614-2.6262 2.62614c-.7012 0-1.3384-.2749-1.8094-.72282l.0002-.00024L8.68881 8.0001l.00278-.00277-.68777-.68777-.00278.00278-1.90297-1.90295-.0007.0007c-.64728-.62456-1.52806-1.00872-2.49858-1.00872C1.61124 4.40137 0 6.0126 0 8.00016 0 9.98772 1.61124 11.599 3.59879 11.599c.97055 0 1.85122-.3841 2.49844-1.0086l.00065.0006.80272-.8027-.68777-.68777-.76902.76901-.00027-.00026z"})),it=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseTiming.beforeDeleteDescription",{defaultMessage:"Delete data after this phase"}),lt=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseTiming.foreverTimingDescription",{defaultMessage:"Keep data in this phase forever"}),nt=({phase:e})=>{const{isDeletePhaseEnabled:t,setDeletePhaseEnabled:a,[e]:i}=_e();if(!i.isFinalDataPhase)return null;const l=t?"ilmEnableDeletePhaseButton":"ilmDisableDeletePhaseButton",n=[{id:"ilmDisableDeletePhaseButton",label:lt,iconType:at},{id:"ilmEnableDeletePhaseButton",label:it,iconType:"trash","data-test-subj":"enableDeletePhaseButton"}];return Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiText,{size:"s",color:"subdued"},t?it:lt)),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiButtonGroup,{legend:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.buttonGroupLegend",{defaultMessage:"Enable or disable delete phase"}),options:n,idSelected:l,onChange:e=>{a("ilmEnableDeletePhaseButton"===e)},isIconOnly:!0})))},st=e=>Object(ue.jsx)(f.EuiIcon,Se()({type:at},e)),ot=Object(i.createContext)(null),rt=({value:e,children:t})=>Object(ue.jsx)(ot.Provider,{value:e},t),ct=()=>{const e=Object(i.useContext)(ot);if(!e)throw new Error("useEditPolicyContext can only be called inside of EditPolicyContext!");return e};var dt=a(13),ut=a(18);const mt=({policyName:e,indexTemplates:t,close:a})=>{const{services:{getUrlForApp:i}}=m();return Object(ue.jsx)(f.EuiFlyout,{onClose:a},Object(ue.jsx)(f.EuiFlyoutHeader,{hasBorder:!0},Object(ue.jsx)(f.EuiTitle,{size:"m","data-test-subj":"indexTemplatesFlyoutHeader"},Object(ue.jsx)("h2",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.indexTemplatesFlyout.headerText",defaultMessage:"Index templates that apply {policyName}",values:{policyName:e}})))),Object(ue.jsx)(f.EuiFlyoutBody,null,Object(ue.jsx)(f.EuiInMemoryTable,{pagination:!0,items:null!=t?t:[],columns:[{name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.indexTemplatesTable.nameHeader",{defaultMessage:"Index template name"}),render:e=>{return Object(ue.jsx)(f.EuiLink,{"data-test-subj":"indexTemplateLink",className:"eui-textBreakAll",href:(t=e,i("management",{path:`data/index_management${Object(ut.getTemplateDetailsLink)(t)}`}))},e);var t}}]})),Object(ue.jsx)(f.EuiFlyoutFooter,null,Object(ue.jsx)(f.EuiButtonEmpty,{iconType:"cross",onClick:a,flush:"left"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexTemplatesFlyout.closeButtonLabel",defaultMessage:"Close"}))))},pt=()=>{const{isNewPolicy:e,indices:t,indexTemplates:a,policyName:n}=ct(),{services:{getUrlForApp:s}}=m(),[o,r]=Object(i.useState)(!1);if(e)return null;const c=t.length>0?Object(ue.jsx)(f.EuiLink,{"data-test-subj":"linkedIndicesLink",external:!0,href:Object(dt.b)(null!=n?n:"",s),target:"_blank"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.linkedIndices",defaultMessage:"{indicesCount, plural, one {# linked index} other {# linked indices}}",values:{indicesCount:t.length}})):null,d=a.length>0?Object(ue.jsx)(f.EuiLink,{"data-test-subj":"linkedIndexTemplatesLink",onClick:()=>r(!o)},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.linkedIndexTemplates",defaultMessage:"{indexTemplatesCount, plural, one {# linked index template} other {# linked index templates}}",values:{indexTemplatesCount:a.length}})):null,u=c?Object(ue.jsx)(l.a.Fragment,null,c,d?Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.andDependenciesLink",defaultMessage:" and {indexTemplatesLink}",values:{indexTemplatesLink:d}}):null):d;return Object(ue.jsx)(l.a.Fragment,null,o&&Object(ue.jsx)(mt,{policyName:null!=n?n:"",indexTemplates:a,close:()=>r(!1)}),Object(ue.jsx)(f.EuiText,{"data-test-subj":"editWarning"},Object(ue.jsx)("p",null,Object(ue.jsx)("strong",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.editingExistingPolicyMessage",defaultMessage:"You are editing an existing policy."})),u?Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.dependenciesMessage",defaultMessage:" Any changes you make will affect {dependenciesLinks} that {count, plural, one {is} other {are}} attached to this policy.",values:{dependenciesLinks:u,count:t.length+a.length}}):null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewMessage",defaultMessage:" Alternatively, you can save these changes in a new policy."}))))},ht=({close:e,selectedNodeAttrs:t})=>{const{data:a,isLoading:i,error:l,resendRequest:n}=Object(j.i)(t);let s;if(i)s=Object(ue.jsx)(f.EuiLoadingContent,{lines:3});else if(l){const{statusCode:e,message:t}=l;s=Object(ue.jsx)(f.EuiCallOut,{title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsLoadingFailedTitle",defaultMessage:"Unable to load node attribute details"}),color:"danger"},Object(ue.jsx)("p",null,t," (",e,")"),Object(ue.jsx)(f.EuiButton,{onClick:n,iconType:"refresh",color:"danger"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeDetailsReloadButton",defaultMessage:"Try again"})))}else s=Object(ue.jsx)(f.EuiInMemoryTable,{items:a||[],columns:[{field:"nodeId",name:v.i18n.translate("xpack.indexLifecycleMgmt.nodeAttrDetails.idField",{defaultMessage:"ID"})},{field:"stats.name",name:v.i18n.translate("xpack.indexLifecycleMgmt.nodeAttrDetails.nameField",{defaultMessage:"Name"})},{field:"stats.host",name:v.i18n.translate("xpack.indexLifecycleMgmt.nodeAttrDetails.hostField",{defaultMessage:"Host"})}],pagination:!0,sorting:!0});return Object(ue.jsx)(f.EuiPortal,null,Object(ue.jsx)(f.EuiFlyout,{ownFocus:!0,onClose:e},Object(ue.jsx)(f.EuiFlyoutBody,null,Object(ue.jsx)(f.EuiTitle,null,Object(ue.jsx)("h2",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.nodeAttrDetails.title",defaultMessage:"Nodes that contain the attribute {selectedNodeAttrs}",values:{selectedNodeAttrs:t}}))),Object(ue.jsx)(f.EuiSpacer,{size:"s"}),s)))},xt=Object(ue.jsx)(Ue,{text:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutShardAllocationLink",defaultMessage:"Learn about shard allocation"}),docPath:"modules-cluster.html#cluster-shard-allocation-settings"}),ft={allocateToDataNodesOption:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.allocateToDataNodesOption",{defaultMessage:"Any data node"})},gt=({phase:e,nodes:t,isLoading:a,isCloudEnabled:n,isUsingDeprecatedDataRoleConfig:s})=>{const r=`_meta.${e}.allocationNodeAttribute`,[d]=Object(o.useFormData)({watch:[r]}),u=Object(O.get)(d,r),[m,p]=Object(i.useState)(null),h=Object.keys(t).map((e=>({text:`${e} (${t[e].length})`,value:e})));h.sort(((e,t)=>e.value.localeCompare(t.value)));let x=[];if(!n||s){const e={text:ft.allocateToDataNodesOption,value:""};x.push(e)}return x=x.concat(h),Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiText,{size:"s"},Object(ue.jsx)("p",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAllocation.customOption.description",defaultMessage:"Use node attributes to control shard allocation. {learnMoreLink}.",values:{learnMoreLink:xt}}))),Object(ue.jsx)(f.EuiSpacer,{size:"m"}),Object(ue.jsx)(Ie,{path:`_meta.${e}.allocationNodeAttribute`,component:c.SelectField,componentProps:{helpText:u?Object(ue.jsx)(f.EuiButtonEmpty,{size:"xs",style:{maxWidth:400},"data-test-subj":`${e}-viewNodeDetailsFlyoutButton`,flush:"left",onClick:()=>p(u)},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.viewNodeDetailsButton",defaultMessage:"View nodes with the selected attribute"})):void 0,euiFieldProps:{"data-test-subj":`${e}-selectedNodeAttrs`,options:x,hasNoInitialSelection:!1,isLoading:a}}}),m?Object(ue.jsx)(ht,{selectedNodeAttrs:m,close:()=>p(null)}):null)};a(50);const bt={inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.customOption.input",{defaultMessage:"Custom"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.customOption.helpText",{defaultMessage:"Move data based on node attributes."})},jt={allocationOptions:{warm:{default:{input:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.input",{defaultMessage:"Use warm nodes (recommended)"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.defaultOption.helpText",{defaultMessage:"Move data to nodes in the warm tier."})},none:{inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.input",{defaultMessage:"Off"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.warm.noneOption.helpText",{defaultMessage:"Do not move data in the warm phase."})},custom:bt},cold:{default:{input:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.input",{defaultMessage:"Use cold nodes (recommended)"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.defaultOption.helpText",{defaultMessage:"Move data to nodes in the cold tier."})},none:{inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.input",{defaultMessage:"Off"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.cold.noneOption.helpText",{defaultMessage:"Do not move data in the cold phase."})},custom:bt},frozen:{default:{input:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.defaultOption.input",{defaultMessage:"Use frozen nodes (recommended)"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.defaultOption.helpText",{defaultMessage:"Move data to nodes in the frozen tier."})},none:{inputDisplay:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.noneOption.input",{defaultMessage:"Off"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.common.dataTierAllocation.frozen.noneOption.helpText",{defaultMessage:"Do not move data in the frozen phase."})},custom:bt}}},yt=(e,t)=>[t?void 0:{"data-test-subj":"defaultDataAllocationOption",value:"node_roles",inputDisplay:jt.allocationOptions[e].default.input,dropdownDisplay:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)("strong",null,jt.allocationOptions[e].default.input),Object(ue.jsx)(f.EuiText,{size:"s",color:"subdued"},Object(ue.jsx)("p",{className:"euiTextColor--subdued"},jt.allocationOptions[e].default.helpText)))},{"data-test-subj":"customDataAllocationOption",value:"node_attrs",inputDisplay:jt.allocationOptions[e].custom.inputDisplay,dropdownDisplay:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)("strong",null,jt.allocationOptions[e].custom.inputDisplay),Object(ue.jsx)(f.EuiText,{size:"s",color:"subdued"},Object(ue.jsx)("p",{className:"euiTextColor--subdued"},jt.allocationOptions[e].custom.helpText)))},{"data-test-subj":"noneDataAllocationOption",value:"none",inputDisplay:jt.allocationOptions[e].none.inputDisplay,dropdownDisplay:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)("strong",null,jt.allocationOptions[e].none.inputDisplay),Object(ue.jsx)(f.EuiText,{size:"s",color:"subdued"},Object(ue.jsx)("p",{className:"euiTextColor--subdued"},jt.allocationOptions[e].none.helpText)))}].filter(Boolean),vt=e=>{const{phase:t,hasNodeAttributes:a,isCloudEnabled:i,isUsingDeprecatedDataRoleConfig:n,isLoading:s}=e,r=Boolean(i&&n),d=`_meta.${t}.dataTierAllocationType`,[u]=Object(o.useFormData)({watch:d}),m=Object(O.get)(u,d);return Object(ue.jsx)("div",{"data-test-subj":`${t}-dataTierAllocationControls`},Object(ue.jsx)(Ie,{path:d},(e=>(r&&"node_roles"===e.value&&e.setValue("node_attrs"),Object(ue.jsx)(c.SuperSelectField,{field:e,euiFieldProps:{isLoading:s,hasDividers:!0,"data-test-subj":"dataTierSelect",options:yt(t,r)}})))),"node_attrs"===m&&a&&Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)("div",{className:"indexLifecycleManagement__phase__dataTierAllocation__controlSection"},Object(ue.jsx)(gt,e))))},Ot={data_hot:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierHotLabel",{defaultMessage:"hot"}),data_warm:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.dataTierWarmLabel",{defaultMessage:"warm"})},Mt={warm:{title:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.willUseFallbackTierTitle",{defaultMessage:"No nodes assigned to the warm tier"}),body:e=>v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.willUseFallbackTierDescription",{defaultMessage:"If no warm nodes are available, data is stored in the {tier} tier.",values:{tier:Ot[e]}})},cold:{title:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.willUseFallbackTierTitle",{defaultMessage:"No nodes assigned to the cold tier"}),body:e=>v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.willUseFallbackTierDescription",{defaultMessage:"If no cold nodes are available, data is stored in the {tier} tier.",values:{tier:Ot[e]}})}},_t=({phase:e,targetNodeRole:t})=>Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"willUseFallbackTierNotice",title:Mt[e].title},Mt[e].body(t)),Pt=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.noCustomAttributesTitle",{defaultMessage:"No custom attributes defined"}),Tt=Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.defaultToDataNodesDescription",defaultMessage:"To allocate data to particular data nodes, {roleBasedGuidance} or configure custom node attributes in elasticsearch.yml.",values:{roleBasedGuidance:Object(ue.jsx)(f.EuiLink,{href:Object(_.b)(),target:"_blank",external:!0},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.defaultToDataNodesDescription.migrationGuidanceMessage",{defaultMessage:"use role-based allocation"}))}}),kt=({phase:e,targetNodeRole:t})=>Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"willUseFallbackTierUsingNodeAttributesNotice",title:Pt},Object(ue.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.dataTier.willUseFallbackTierUsingNodeAttributesDescription",{defaultMessage:"No {phase} nodes available. Data will be allocated to the {fallbackTier} tier.",values:{phase:e,fallbackTier:Ot[t]}})),Object(ue.jsx)("p",null,Tt)),wt={warm:{title:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.noTiersAvailableTitle",{defaultMessage:"No nodes assigned to the warm tier"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.noTiersAvailableBody",{defaultMessage:"To use role-based allocation, assign one or more nodes to the warm or hot tiers. Allocation will fail if there are no available nodes."})},cold:{title:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.noTiersAvailableTitle",{defaultMessage:"No nodes assigned to the cold tier"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.noTiersAvailableBody",{defaultMessage:"To use role-based allocation, assign one or more nodes to the cold, warm, or hot tiers. Allocation will fail if there are no available nodes."})}},Lt=({phase:e})=>Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"noTiersAvailableNotice",title:wt[e].title,color:"warning"},wt[e].body),Et=()=>Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"noTiersAvailableUsingNodeAttributesNotice",title:Pt,color:"warning"},Object(ue.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.dataTier.noTiersAvailableUsingNodeAttributesDescription",{defaultMessage:"Unable to allocate data: no available data nodes."})),Object(ue.jsx)("p",null,Tt)),St={body:{warm:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultAllocationNotAvailableDescription",{defaultMessage:"Data will be allocated to the warm tier."})),Tt),cold:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.defaultAllocationNotAvailableDescription",{defaultMessage:"Data will be allocated to the cold tier."})),Tt)}},Ft=({phase:e})=>Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"defaultToDataTiersNotice",style:{maxWidth:400},title:Pt,color:"primary"},St.body[e]),Ct=({phase:e})=>Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"defaultToDataNodesNotice",style:{maxWidth:400},title:Pt,color:"primary"},Object(ue.jsx)("p",null,v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.defaultToDataNodesDescription",{defaultMessage:"Data will be allocated to any available data node."})),Tt),zt={title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.title",{defaultMessage:"Migrate to data tiers"}),body:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.body",{defaultMessage:"Migrate your Elastic Cloud deployment to use data tiers."}),linkText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.cloudDataTierCallout.linkToCloudDeploymentDescription",{defaultMessage:"View cloud deployment"})},At=({linkToCloudDeployment:e})=>Object(ue.jsx)(f.EuiCallOut,{title:zt.title,"data-test-subj":"cloudDataTierCallout"},zt.body," ",Boolean(e)&&Object(ue.jsx)(f.EuiLink,{href:e,external:!0},zt.linkText)),Dt=({statusCode:e,message:t,onResendRequest:a})=>Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(f.EuiCallOut,{title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesLoadingFailedTitle",defaultMessage:"Unable to load node data"}),color:"danger"},Object(ue.jsx)("p",null,t," (",e,")"),Object(ue.jsx)(f.EuiButton,{onClick:a,iconType:"refresh",color:"danger"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.nodeAttributesReloadButton",defaultMessage:"Try again"}))),Object(ue.jsx)(f.EuiSpacer,{size:"xl"}));a(59);const Nt={title:v.i18n.translate("xpack.indexLifecycleMgmt.common.dataTier.title",{defaultMessage:"Data allocation"})},It=({phase:e,description:t})=>{var a;const{services:{cloud:i}}=m(),n=`_meta.${e}.dataTierAllocationType`,[s]=Object(o.useFormData)({watch:n}),r=Object(O.get)(s,n),{data:c,resendRequest:d,error:u,isLoading:p}=Object(j.j)(),{nodesByRoles:h,nodesByAttributes:x,isUsingDeprecatedDataRoleConfig:g}=c,y=Boolean(Object.keys(null!=x?x:{}).length),v=null!==(a=null==i?void 0:i.isCloudEnabled)&&void 0!==a&&a,M=null==i?void 0:i.deploymentUrl,_=((e,t)=>{var a;const i=b.c[e];return null!==(a=t.data)&&void 0!==a&&a.length?i[0]:i.find((e=>{var a;return Boolean(null===(a=t[e])||void 0===a?void 0:a.length)}))})(e,h),P=void 0===_,T=void 0!==_&&!((e,t)=>b.c[e][0]===t)(e,_);return Object(ue.jsx)(f.EuiDescribedFormGroup,{title:Object(ue.jsx)("h3",null,Nt.title),description:Object(ue.jsx)(l.a.Fragment,null,t,p?Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"m"}),Object(ue.jsx)(f.EuiLoadingSpinner,{"data-test-subj":"allocationLoadingSpinner",size:"xl"})):u&&Object(ue.jsx)(Dt,{onResendRequest:d,message:u.message,statusCode:u.statusCode})),fullWidth:!0},Object(ue.jsx)("div",{className:"ilmDataTierAllocationField"},Object(ue.jsx)(vt,{hasNodeAttributes:y,phase:e,nodes:x,isCloudEnabled:v,isUsingDeprecatedDataRoleConfig:g,isLoading:p}),!p&&(()=>{switch(r){case"node_roles":if(v)return null;if(P)return Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(Lt,{phase:e}));if(T)return Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(_t,{phase:e,targetNodeRole:_}));break;case"node_attrs":if(!y)return g?Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(Ct,{phase:e})):P?Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(Et,null)):T?Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(kt,{phase:e,targetNodeRole:_})):Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(Ft,{phase:e}));if(v&&g)return Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(At,{linkToCloudDeployment:M}));break;default:return null}})()))};var Rt=a(68),Bt=a.n(Rt);const Ut=({phase:e})=>{const{policy:t}=ct(),a=Object(i.useMemo)((()=>{var a,i;return null!=(null===(a=t.phases[e])||void 0===a||null===(i=a.actions)||void 0===i?void 0:i.forcemerge)}),[t,e]);return Object(ue.jsx)(Ve,{title:Object(ue.jsx)("h3",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableText",defaultMessage:"Force merge"})),description:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.forceMerge.enableExplanationText",defaultMessage:"Reduce the number of segments in each index shard and clean up deleted documents."})," ",Object(ue.jsx)(Ue,{docPath:"ilm-forcemerge.html"})),titleSize:"xs",fullWidth:!0,switchProps:{label:U.editPolicy.forceMergeEnabledFieldLabel,"data-test-subj":`${e}-forceMergeSwitch`,initialValue:a}},Object(ue.jsx)(Ie,{path:`phases.${e}.actions.forcemerge.max_num_segments`,component:c.NumericField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":`${e}-selectedForceMergeSegments`,min:1}}}),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(Ie,{path:`_meta.${e}.bestCompression`},(t=>Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiCheckbox,{label:t.label,checked:t.value,onChange:t.onChange,"data-test-subj":`${e}-bestCompression`,id:Bt()()})),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiIconTip,{content:U.editPolicy.bestCompressionFieldHelpText,position:"right"}))))))};function qt(e){switch(e){case"warm":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of warm phase"});case"cold":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of cold phase"});case"frozen":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseFrozen.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of frozen phase"});case"delete":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeUnitsAriaLabel",{defaultMessage:"Units for timing of delete phase"})}}function $t(e){switch(e){case"warm":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseWarm.minimumAgeLabel",{defaultMessage:"Timing for warm phase"});case"cold":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseCold.minimumAgeLabel",{defaultMessage:"Timing for cold phase"});case"frozen":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseFrozen.minimumAgeLabel",{defaultMessage:"Timing for frozen phase"});case"delete":return v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.phaseDelete.minimumAgeLabel",{defaultMessage:"Timing for delete phase"})}}const Vt={rolloverToolTipDescription:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minimumAge.rolloverToolTipDescription",{defaultMessage:"Data age is calculated from rollover. Rollover is configured in the hot phase."}),minAgeUnitFieldSuffix:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.minimumAge.minimumAgeFieldSuffixLabel",{defaultMessage:"old"})},Wt=({phase:e})=>{const t=`phases.${e}.min_age`,a=`_meta.${e}.minAgeUnit`,{isUsingRollover:n}=fe(),s=we(),{setValue:r}=s[`${e}MinAgeMilliSeconds`],[c]=Object(o.useFormData)({watch:[t,a]}),d=Object(O.get)(c,t),u=Object(O.get)(c,a);return Object(i.useEffect)((()=>{if(void 0===d)return;const e=""===d.trim()?-1:F(d,u);r(e)}),[d,u,r]),Object(i.useEffect)((()=>()=>{r(-1)}),[r]),Object(ue.jsx)(Ie,{path:t},(t=>{const{isInvalid:i,errorMessage:s}=Object(o.getFieldValidityAndErrorMessage)(t);return Object(ue.jsx)(f.EuiFormRow,{fullWidth:!0,isInvalid:i,error:s},Object(ue.jsx)(f.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween",wrap:!0},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiText,{className:"eui-textNoWrap",size:"xs"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.minimumAge.minimumAgeFieldLabel",defaultMessage:"Move data into phase when:"}))),Object(ue.jsx)(f.EuiFlexItem,{grow:!0},Object(ue.jsx)(f.EuiFlexGroup,{gutterSize:"s"},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiFieldNumber,{style:{minWidth:50},compressed:!0,"aria-label":$t(e),isInvalid:i,value:t.value,onChange:t.onChange,isLoading:t.isValidating,"data-test-subj":`${e}-selectedMinimumAge`,min:0})),Object(ue.jsx)(f.EuiFlexItem,{grow:!0,style:{minWidth:165}},Object(ue.jsx)(Ie,{path:a},(t=>{const{isInvalid:a}=Object(o.getFieldValidityAndErrorMessage)(t),i=Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)("div",{"data-test-subj":`${e}-rolloverMinAgeInputIconTip`}),Object(ue.jsx)(f.EuiIconTip,{type:"iInCircle","aria-label":Vt.rolloverToolTipDescription,content:Vt.rolloverToolTipDescription})),s=n?[Vt.minAgeUnitFieldSuffix,i]:[Vt.minAgeUnitFieldSuffix];return Object(ue.jsx)(f.EuiSelect,{compressed:!0,value:t.value,onChange:e=>{t.setValue(e.target.value)},isInvalid:a,append:s,"data-test-subj":`${e}-selectedMinimumAgeUnits`,"aria-label":qt(e),options:R})})))))))}))},Ht="phases.delete.actions.wait_for_snapshot.policy",Gt=()=>{const{services:{getUrlForApp:e}}=m(),{error:t,isLoading:a,data:i,resendRequest:n}=Object(j.l)(),[s]=Object(o.useFormData)({watch:Ht}),r=Object(O.get)(s,Ht),d=i.map((e=>({label:e,value:e}))),u=()=>e("management",{path:"data/snapshot_restore/add_policy"});let p;return t?p=Object(ue.jsx)(He,{resendRequest:n,"data-test-subj":"policiesErrorCallout","aria-label":v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.reloadPoliciesLabel",{defaultMessage:"Reload policies"}),title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedTitle",defaultMessage:"Unable to load existing policies"}),body:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesLoadedMessage",defaultMessage:"Refresh this field and enter the name of an existing snapshot policy."})}):0===i.length?p=Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"m"}),Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"noPoliciesCallout",color:"warning",title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedTitle",defaultMessage:"No snapshot policies found"})},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedMessage",defaultMessage:"{link} to automate the creation and deletion of cluster snapshots.",values:{link:Object(ue.jsx)(f.EuiLink,{href:u(),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.noPoliciesCreatedLink",{defaultMessage:"Create a snapshot lifecycle policy"}))}}))):r&&!i.includes(r)&&(p=Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"m"}),Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"customPolicyCallout",color:"warning",title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyTitle",defaultMessage:"Policy name not found"})},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyMessage",defaultMessage:"Enter the name of an existing snapshot policy, or {link} with this name.",values:{link:Object(ue.jsx)(f.EuiLink,{href:u(),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.customPolicyLink",{defaultMessage:"create a new policy"}))}})))),Object(ue.jsx)(f.EuiDescribedFormGroup,{title:Object(ue.jsx)("h3",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotTitle",defaultMessage:"Wait for snapshot policy"})),description:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotDescription",defaultMessage:"Specify a snapshot policy to be executed before the deletion of the index. This ensures that a snapshot of the deleted index is available."})," ",Object(ue.jsx)(Ue,{docPath:"ilm-wait-for-snapshot.html"})),titleSize:"xs",fullWidth:!0},Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(Ie,{path:Ht,componentProps:{label:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.waitForSnapshotLabel",defaultMessage:"Snapshot policy name"}),Object(ue.jsx)(qe,null))}},(e=>{const l=e.value?[e.value]:[];return Object(ue.jsx)(c.ComboBoxField,{field:{...e,value:l},euiFieldProps:{"data-test-subj":"snapshotPolicyCombobox",fullWidth:!1,options:d,singleSelection:{asPlainText:!0},isLoading:a,noSuggestions:!(!t&&0!==i.length),onCreateOption:t=>{e.setValue(t)},onChange:t=>{t.length>0?e.setValue(t[0].label):e.setValue("")}}})})),p))},Jt=({path:e,options:t,euiFieldProps:a})=>{const[l,n]=Object(i.useState)(!1);return Object(ue.jsx)(Ie,{key:e,path:e},(e=>{var i;return Object(ue.jsx)(f.EuiPopover,Se()({button:Object(ue.jsx)(f.EuiButtonEmpty,{size:"xs",color:"text",iconSide:"right",iconType:"arrowDown",onClick:()=>n((e=>!e)),"data-test-subj":"show-filters-button"},null===(i=t.find((t=>t.value===e.value)))||void 0===i?void 0:i.text),ownFocus:!0,panelPaddingSize:"none",isOpen:l,closePopover:()=>n(!1)},a),t.map((t=>Object(ue.jsx)(f.EuiFilterSelectItem,{key:t.value,checked:e.value===t.value?"on":void 0,onClick:()=>{return a=t.value,e.setValue(a),void n(!1);var a},"data-test-subj":`filter-option-${t.value}`},t.text))))}))},Kt=({phase:e})=>{var t,a;const i=we(),{setValue:n}=i[`${e}IsUsingShardSize`],{policy:s}=ct(),r=`_meta.${e}.shrink.isUsingShardSize`,[d]=Object(o.useFormData)({watch:[r]}),u=Object(O.get)(d,r),m=`phases.${e}.actions.shrink.${u?"max_primary_shard_size":"number_of_shards"}`;return Object(ue.jsx)(Ve,{title:Object(ue.jsx)("h3",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.shrinkText",defaultMessage:"Shrink"})),description:Object(ue.jsx)(f.EuiTextColor,{color:"subdued"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.shrinkIndexExplanationText",defaultMessage:"Shrink the index to a new index with fewer primary shards."})," ",Object(ue.jsx)(Ue,{docPath:"ilm-shrink.html"})),titleSize:"xs",switchProps:{"data-test-subj":`${e}-shrinkSwitch`,label:U.editPolicy.shrinkLabel,initialValue:Boolean(null===(t=s.phases[e])||void 0===t||null===(a=t.actions)||void 0===a?void 0:a.shrink)},fullWidth:!0},void 0===u?null:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiRadioGroup,{options:[{id:`${e}-configureShardCount`,label:U.editPolicy.shrinkCountLabel,"data-test-subj":`${e}-configureShardCount`},{id:`${e}-configureShardSize`,label:U.editPolicy.shrinkSizeLabel,"data-test-subj":`${e}-configureShardSize`}],idSelected:u?`${e}-configureShardSize`:`${e}-configureShardCount`,onChange:t=>n(t===`${e}-configureShardSize`)}),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(Ie,{path:m,key:m,component:c.NumericField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":`${e}-primaryShard${u?"Size":"Count"}`,min:1,append:u?Object(ue.jsx)(Jt,{path:`_meta.${e}.shrink.maxPrimaryShardSizeUnits`,options:I,euiFieldProps:{"data-test-subj":`${e}-shrinkMaxPrimaryShardSizeUnits`,"aria-label":U.editPolicy.maxPrimaryShardSizeUnitsLabel}}):null}}})))},Yt=({children:e})=>e(Object(j.m)()),Qt=({field:e,isLoading:t,repos:a,noSuggestions:l,globalRepository:n})=>{const s=Object(i.useRef)(!1),{setValue:o}=e,{searchableSnapshotRepo:{setValue:r}}=we();return Object(i.useEffect)((()=>{s.current&&o(Boolean(n.trim())?[n]:[]),s.current=!0}),[o,n]),Object(ue.jsx)(c.ComboBoxField,{field:e,fullWidth:!1,euiFieldProps:{"data-test-subj":"searchableSnapshotCombobox",options:a.map((e=>({label:e,value:e}))),singleSelection:{asPlainText:!0},isLoading:t,noSuggestions:l,onCreateOption:e=>{r(e)},onChange:e=>{e.length>0?r(e[0].label):r("")}}})};a(71);const Xt=({phase:e,canBeDisabled:t=!0})=>{const{services:{cloud:a,getUrlForApp:n}}=m(),{policy:s,license:r,isNewPolicy:c}=ct(),{isUsingSearchableSnapshotInHotPhase:d}=fe(),u=`phases.${e}.actions.searchable_snapshot.snapshot_repository`,[p]=Object(o.useFormData)({watch:Te.searchableSnapshotRepo.path}),h=Object(O.get)(p,Te.searchableSnapshotRepo.path),x="cold"===e||"frozen"===e,b=!r.canUseSearchableSnapshot(),[j,y]=Object(i.useState)((()=>{var t,i,l;return Boolean(x&&c&&(null==a?void 0:a.isCloudEnabled)||(null===(t=s.phases[e])||void 0===t||null===(i=t.actions)||void 0===i||null===(l=i.searchable_snapshot)||void 0===l?void 0:l.snapshot_repository))})),M=(e=>{switch(e){case"hot":case"cold":return{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.fullyMountedSearchableSnapshotField.title",{defaultMessage:"Searchable snapshot"}),description:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.fullyMountedSearchableSnapshotField.description",defaultMessage:"Convert to a fully-mounted index that contains a complete copy of your data and is backed by a snapshot. You can reduce the number of replicas and rely on the snapshot for resiliency. {learnMoreLink}",values:{learnMoreLink:Object(ue.jsx)(Ue,{docPath:"ilm-searchable-snapshot.html"})}}),toggleLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.fullyMountedSearchableSnapshotField.toggleLabel",{defaultMessage:"Convert to fully-mounted index"})};case"frozen":return{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.partiallyMountedSearchableSnapshotField.title",{defaultMessage:"Searchable snapshot"}),description:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.frozenPhase.partiallyMountedSearchableSnapshotField.description",defaultMessage:"Convert to a partially-mounted index that caches the index metadata. Data is retrieved from the snapshot as needed to process search requests. This minimizes the index footprint while keeping all of your data fully searchable. {learnMoreLink}",values:{learnMoreLink:Object(ue.jsx)(Ue,{docPath:"searchable-snapshots.html#searchable-snapshots-shared-cache"})}}),toggleLabel:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.partiallyMountedSearchableSnapshotField.toggleLabel",{defaultMessage:"Convert to partially-mounted index"})}}})(e);Object(i.useEffect)((()=>{b&&y(!1)}),[b]);return Object(ue.jsx)(Ve,{"data-test-subj":`searchableSnapshotField-${e}`,switchProps:t?{checked:j,disabled:b,onChange:y,"data-test-subj":"searchableSnapshotToggle",label:M.toggleLabel}:void 0,title:Object(ue.jsx)("h3",null,M.title),description:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiTextColor,{color:"subdued"},M.description)),fieldNotices:(()=>{let t;return"hot"===e&&d?t=Object(ue.jsx)(f.EuiCallOut,{size:"s",title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotCalloutBody",{defaultMessage:"Force merge, shrink, read only, and freeze actions are not allowed when converting data to a fully-mounted index in this phase."}),"data-test-subj":"searchableSnapshotFieldsDisabledCallout"}):b&&(t=Object(ue.jsx)(f.EuiCallOut,{"data-test-subj":"searchableSnapshotDisabledDueToLicense",title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotLicenseCalloutTitle",{defaultMessage:"Enterprise license required"}),iconType:"questionInCircle"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.searchableSnapshotLicenseCalloutBody",{defaultMessage:"To create a searchable snapshot an enterprise license is required."}))),t?Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,null),t,Object(ue.jsx)(f.EuiSpacer,null)):void 0})(),fullWidth:!0},b?Object(ue.jsx)("div",null):()=>Object(ue.jsx)(Yt,null,(({error:e,isLoading:t,resendRequest:a,data:i})=>{var s;const o=null!==(s=null==i?void 0:i.repositories)&&void 0!==s?s:[];let r;return t||(e?r=Object(ue.jsx)(He,{resendRequest:a,"data-test-subj":"repositoriesErrorCallout","aria-label":v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.reloadSnapshotRepositoriesLabel",{defaultMessage:"Reload snapshot repositories"}),title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.loadSnapshotRepositoriesErrorTitle",defaultMessage:"Unable to load snapshot repositories"}),body:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.loadSnapshotRepositoriesErrorBody",defaultMessage:"Refresh this field and enter the name of an existing snapshot repository."})}):0===o.length?r=Object(ue.jsx)(f.EuiCallOut,{color:"warning",title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesTitle",{defaultMessage:"No snapshot repositories found"})},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesFoundBody",defaultMessage:"{link} to use searchable snapshots.",values:{link:Object(ue.jsx)(f.EuiLink,{href:n("management",{path:"data/snapshot_restore/add_repository"}),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createSearchableSnapshotLink",{defaultMessage:"Create a snapshot repository"}))}})):h&&!o.includes(h)&&(r=Object(ue.jsx)(f.EuiCallOut,{title:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoriesWithNameTitle",{defaultMessage:"Repository name not found"}),color:"warning"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.noSnapshotRepositoryWithNameBody",defaultMessage:"Enter the name of an existing repository, or {link} with this name.",values:{link:Object(ue.jsx)(f.EuiLink,{href:n("management",{path:"data/snapshot_restore/add_repository"}),target:"_blank"},v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createSnapshotRepositoryLink",{defaultMessage:"create a new snapshot repository"}))}})))),Object(ue.jsx)("div",{className:"ilmSearchableSnapshotField"},Object(ue.jsx)(Ie,{path:u,defaultValue:h?[h]:[],component:Qt,componentProps:{globalRepository:h,isLoading:t,repos:o,noSuggestions:!(!e&&0!==o.length)}}),r&&Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),r))})))},Zt=({phase:e})=>Object(ue.jsx)(We,{title:Object(ue.jsx)("h3",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.readonlyTitle",defaultMessage:"Read only"})),description:Object(ue.jsx)(f.EuiTextColor,{color:"subdued"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.readonlyDescription",defaultMessage:"Enable to make the index and index metadata read only, disable to allow writes and metadata changes."})," ",Object(ue.jsx)(Ue,{docPath:"ilm-readonly.html"})),fullWidth:!0,titleSize:"xs",switchProps:{"data-test-subj":`${e}-readonlySwitch`,path:`_meta.${e}.readonlyEnabled`}},Object(ue.jsx)("div",null)),ea=({phase:e})=>{var t,a,i;const{policy:l}=ct(),n=null!=(null===(t=l.phases[e])||void 0===t||null===(a=t.actions)||void 0===a||null===(i=a.allocate)||void 0===i?void 0:i.number_of_replicas);return Object(ue.jsx)(Ve,{title:Object(ue.jsx)("h3",null,v.i18n.translate("xpack.indexLifecycleMgmt.numberOfReplicas.formRowTitle",{defaultMessage:"Replicas"})),description:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicas.formRowDescription",{defaultMessage:"Set the number of replicas. Remains the same as the previous phase by default."}),switchProps:{"data-test-subj":`${e}-setReplicasSwitch`,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.numberOfReplicas.switchLabel",{defaultMessage:"Set replicas"}),initialValue:n},fullWidth:!0},Object(ue.jsx)(Ie,{path:`phases.${e}.actions.allocate.number_of_replicas`,component:c.NumericField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":`${e}-selectedReplicaCount`,min:0}}}))},ta=({phase:e})=>{const{policy:t,isNewPolicy:a}=ct(),l=Object(i.useMemo)((()=>{var i,l,n;return a||!(null!==(i=t.phases[e])&&void 0!==i&&i.actions)||null!=(null===(l=t.phases[e])||void 0===l||null===(n=l.actions)||void 0===n?void 0:n.set_priority)}),[a,t.phases,e]);return Object(ue.jsx)(Ve,{title:Object(ue.jsx)("h3",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.indexPriorityText",defaultMessage:"Index priority"})),description:Object(ue.jsx)(f.EuiTextColor,{color:"subdued"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.warmPhase.indexPriorityExplanationText",defaultMessage:"Set the priority for recovering your indices after a node restart. Indices with higher priorities are recovered before indices with lower priorities."})," ",Object(ue.jsx)(Ue,{docPath:"ilm-set-priority.html"})),titleSize:"xs",fullWidth:!0,switchProps:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.indexPriority.indexPriorityEnabledFieldLabel",{defaultMessage:"Set index priority"}),"data-test-subj":`${e}-indexPrioritySwitch`,initialValue:l}},Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(Ie,{path:`phases.${e}.actions.set_priority.priority`,component:c.NumericField,euiFieldProps:{fullWidth:!1,"data-test-subj":`${e}-indexPriority`,min:0}}))},aa=({phase:e})=>Object(ue.jsx)(We,{title:Object(ue.jsx)("h3",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.freezeText",defaultMessage:"Freeze"})),description:Object(ue.jsx)(f.EuiTextColor,{color:"subdued"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.freezeIndexExplanationText",defaultMessage:"Make the index read-only and minimize its memory footprint."})," ",Object(ue.jsx)(Ue,{docPath:"ilm-freeze.html"})),fullWidth:!0,titleSize:"xs",switchProps:{"data-test-subj":`${e}-freezeSwitch`,path:`_meta.${e}.freezeEnabled`}},Object(ue.jsx)("div",null));a(80);const ia=({enabled:e,phase:t})=>Object(ue.jsx)("div",{className:`ilmPhaseIcon ilmPhaseIcon--${t} ${e?"":"ilmPhaseIcon--disabled"}`},e?Object(ue.jsx)(f.EuiIcon,{className:`ilmPhaseIcon__inner--${t}`,type:"delete"===t?"trash":"checkInCircleFilled",size:"delete"===t?"m":"l"}):Object(ue.jsx)(f.EuiIcon,{className:"ilmPhaseIcon__inner--disabled",type:"dot",size:"s"})),la={toolTipContent:v.i18n.translate("xpack.indexLifecycleMgmt.phaseErrorIcon.tooltipDescription",{defaultMessage:"This phase contains errors."})},na=Object(i.memo)((({phase:e})=>{const{errors:t}=ye();return Object.keys(t[e]).length?Object(ue.jsx)("div",{"data-test-subj":`phaseErrorIndicator-${e}`},Object(ue.jsx)(f.EuiIconTip,{type:"alert",color:"danger",content:la.toolTipContent})):null}));a(89);const sa=({children:e,topLevelSettings:t,phase:a})=>{const i=`_meta.${a}.enabled`,[n]=Object(o.useFormData)({watch:[i]}),s="hot"===a,r=Object(O.get)(n,i)||s,d=Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},!s&&Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(Ie,{path:i,component:c.ToggleField,componentProps:{euiFieldProps:{"data-test-subj":`enablePhaseSwitch-${a}`,showLabel:!1}}})),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiTitle,{size:"s"},Object(ue.jsx)("h2",null,U.editPolicy.titles[a]))),s&&Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiBadge,null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.phaseTitle.requiredBadge",defaultMessage:"Required"}))),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(na,{phase:a}))),u=!s&&r?Object(ue.jsx)(Wt,{phase:a}):null;return Object(ue.jsx)(f.EuiComment,{username:d,actions:u,timelineIcon:Object(ue.jsx)(ia,{enabled:r,phase:a}),className:"ilmPhase "+(r?"ilmPhase--enabled":""),"data-test-subj":`${a}-phase`},Object(ue.jsx)(f.EuiText,{color:"subdued",size:"s",style:{maxWidth:"50%"}},U.editPolicy.descriptions[a]),r&&Object(ue.jsx)(l.a.Fragment,null,t?Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,null),t):Object(ue.jsx)(f.EuiSpacer,{size:"m"}),e?Object(ue.jsx)(f.EuiAccordion,{id:`${a}-settingsSwitch`,buttonContent:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.phaseSettings.buttonLabel",defaultMessage:"Advanced settings"}),buttonClassName:"ilmSettingsButton",extraAction:Object(ue.jsx)(nt,{phase:a})},Object(ue.jsx)(f.EuiSpacer,null),e):Object(ue.jsx)(f.EuiFlexGroup,{justifyContent:"flexEnd"},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(nt,{phase:a})))))},oa=Object.values(D),ra=()=>Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(ue.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(ue.jsx)(Ie,{path:D.maxPrimaryShardSize,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxPrimaryShardSize",min:1,append:Object(ue.jsx)(Jt,{path:"_meta.hot.customRollover.maxPrimaryShardSizeUnit",options:I,euiFieldProps:{"data-test-subj":"hot-selectedMaxPrimaryShardSizeUnits","aria-label":U.editPolicy.maxPrimaryShardSizeUnitsLabel}})}}}))),ca=()=>Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(ue.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(ue.jsx)(Ie,{path:D.maxAge,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxAge",min:1,append:Object(ue.jsx)(Jt,{path:"_meta.hot.customRollover.maxAgeUnit",options:R,euiFieldProps:{"data-test-subj":"hot-selectedMaxAgeUnits","aria-label":v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeUnitsAriaLabel",{defaultMessage:"Maximum age units"})}})}}}))),da=()=>Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(ue.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(ue.jsx)(Ie,{path:D.maxDocs,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxDocuments",min:1}}}))),ua={deprecationMessage:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeDeprecationMessage",{defaultMessage:"Maximum index size is deprecated and will be removed in a future version. Use maximum primary shard size instead."}),maxSizeUnit:{ariaLabel:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeUnitsAriaLabel",{defaultMessage:"Maximum index size units"})}},ma=()=>Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},Object(ue.jsx)(f.EuiFlexItem,{style:{maxWidth:400}},Object(ue.jsx)(Ie,{path:D.maxSize,component:c.NumericField,componentProps:{euiFieldProps:{"data-test-subj":"hot-selectedMaxSizeStored",min:1,prepend:Object(ue.jsx)(f.EuiIconTip,{type:"alert","aria-label":ua.deprecationMessage,content:ua.deprecationMessage}),append:Object(ue.jsx)(Jt,{path:"_meta.hot.customRollover.maxStorageSizeUnit",options:I,euiFieldProps:{"data-test-subj":"hot-selectedMaxSizeStoredUnits","aria-label":ua.maxSizeUnit.ariaLabel}})}}}))),pa=Object.values(D),ha=()=>{const{license:e}=ct(),[t]=Object(o.useFormData)({watch:[A,...pa]}),{isUsingRollover:a}=fe(),n=Object(O.get)(t,A),s=(()=>{const[e,t]=Object(i.useState)(!1),[a]=Object(o.useFormData)({watch:oa}),{getFields:l}=Object(o.useFormContext)();return Object(i.useEffect)((()=>{var e,a;const i=null!==(e=null===(a=Object(O.get)(l(),D.maxPrimaryShardSize))||void 0===a?void 0:a.errors)&&void 0!==e?e:[];t(i.some((e=>e.code===K)))}),[l,a]),e})();return Object(ue.jsx)(sa,{phase:"hot"},Object(ue.jsx)(Ve,{title:Object(ue.jsx)("h3",null,v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.rolloverFieldTitle",{defaultMessage:"Rollover"})),description:Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiTextColor,{color:"subdued"},Object(ue.jsx)("p",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.rolloverDescriptionMessage",defaultMessage:"Start writing to a new index when the current index reaches a certain size, document count, or age. Enables you to optimize performance and manage resource usage when working with time series data."}))),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(f.EuiTextColor,{color:"subdued"},Object(ue.jsx)("p",null,Object(ue.jsx)("strong",null,v.i18n.translate("xpack.indexLifecycleMgmt.rollover.rolloverOffsetsPhaseTimingDescriptionNote",{defaultMessage:"Note: "})),U.editPolicy.rolloverOffsetsHotPhaseTiming," ",Object(ue.jsx)(Ue,{text:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.learnAboutRolloverLinkText",defaultMessage:"Learn more"}),docPath:"ilm-rollover.html"}))),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(Ie,{path:A},(e=>Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiText,{color:"default"},Object(ue.jsx)(f.EuiSwitch,{label:e.label,checked:e.value,onChange:t=>e.setValue(t.target.checked),"data-test-subj":"useDefaultRolloverSwitch"})),Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hotPhase.rolloverDefaultsTipContent",defaultMessage:"Roll over when an index is 30 days old or any primary shard reaches 50 gigabytes."}))))),fullWidth:!0},!1===n?Object(ue.jsx)("div",{"aria-live":"polite",role:"region"},Object(ue.jsx)(Ie,{path:"_meta.hot.customRollover.enabled"},(e=>Object(ue.jsx)(f.EuiSwitch,{label:e.label,checked:e.value,onChange:t=>e.setValue(t.target.checked),"data-test-subj":"rolloverSwitch"}))),a&&Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"m"}),s&&Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiCallOut,{size:"s",title:U.editPolicy.errors.rollOverConfigurationCallout.title,"data-test-subj":"rolloverSettingsRequired",color:"danger"},Object(ue.jsx)("div",null,U.editPolicy.errors.rollOverConfigurationCallout.body)),Object(ue.jsx)(f.EuiSpacer,{size:"s"})),Object(ue.jsx)(ra,null),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(ca,null),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(da,null),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(ma,null))):Object(ue.jsx)("div",null)),a&&Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(Ut,{phase:"hot"}),Object(ue.jsx)(Kt,{phase:"hot"}),e.canUseSearchableSnapshot()&&Object(ue.jsx)(Xt,{phase:"hot"}),Object(ue.jsx)(Zt,{phase:"hot"})),Object(ue.jsx)(ta,{phase:"hot"}))},xa={dataTierAllocation:{description:v.i18n.translate("xpack.indexLifecycleMgmt.warmPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less-frequent, read-only access."})}},fa=()=>{const{isUsingSearchableSnapshotInHotPhase:e}=fe();return Object(ue.jsx)(sa,{phase:"warm"},Object(ue.jsx)(ea,{phase:"warm"}),!e&&Object(ue.jsx)(Kt,{phase:"warm"}),!e&&Object(ue.jsx)(Ut,{phase:"warm"}),!e&&Object(ue.jsx)(Zt,{phase:"warm"}),Object(ue.jsx)(It,{description:xa.dataTierAllocation.description,phase:"warm"}),Object(ue.jsx)(ta,{phase:"warm"}))},ga={dataTierAllocation:{description:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.dataTier.description",{defaultMessage:"Move data to nodes optimized for less frequent, read-only access. Store data in the cold phase on less-expensive hardware."})}},ba=()=>{const{isUsingSearchableSnapshotInHotPhase:e}=fe();return Object(ue.jsx)(sa,{phase:"cold",topLevelSettings:Object(ue.jsx)(Xt,{phase:"cold"})},Object(ue.jsx)(ea,{phase:"cold"}),!e&&Object(ue.jsx)(aa,{phase:"cold"}),!e&&Object(ue.jsx)(Zt,{phase:"cold"}),Object(ue.jsx)(It,{description:ga.dataTierAllocation.description,phase:"cold"}),Object(ue.jsx)(ta,{phase:"cold"}))},ja=()=>Object(ue.jsx)(sa,{phase:"frozen",topLevelSettings:Object(ue.jsx)(Xt,{phase:"frozen",canBeDisabled:!1})});a(98);const ya={enabled:Te.deleteEnabled.path},va=()=>{const{setDeletePhaseEnabled:e}=_e(),[t]=Object(o.useFormData)({watch:ya.enabled}),a=Object(O.get)(t,ya.enabled);if(!a)return null;const i=Object(ue.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiTitle,{size:"s"},Object(ue.jsx)("h2",null,U.editPolicy.titles.delete))),Object(ue.jsx)(f.EuiFlexItem,null,Object(ue.jsx)(f.EuiButtonEmpty,{onClick:()=>e(!1),"data-test-subj":"disableDeletePhaseButton"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.deletePhase.removeDeletePhaseButtonLabel",defaultMessage:"Remove"}))),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(na,{phase:"delete"})));return Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(f.EuiComment,{"data-test-subj":"delete-phase",username:i,actions:Object(ue.jsx)(Wt,{phase:"delete"}),className:"ilmDeletePhase ilmPhase",timelineIcon:Object(ue.jsx)(ia,{enabled:a,phase:"delete"})},Object(ue.jsx)(f.EuiText,{color:"subdued",size:"s",style:{maxWidth:"50%"}},U.editPolicy.descriptions.delete),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(Gt,null)))},Oa="name",Ma=()=>{Object(i.useEffect)((()=>{window.scrollTo(0,0)}),[]);const[e,t]=Object(i.useState)(!1),{isNewPolicy:a,policy:n,existingPolicies:s,policyName:r,license:d}=ct(),{services:{cloud:u}}=m(),[b,w]=Object(i.useState)(!1),L=a?"":r,E=d.canUseSearchableSnapshot(),S=Boolean(null==u?void 0:u.isCloudEnabled),F=Object(i.useMemo)((()=>{return e=a?void 0:n,t=>{const{_meta:a,...i}=t;return i.phases={hot:{actions:{}},...i.phases},Object(P.produce)(null!=e?e:x.p,(t=>{var l,n,s;Object(O.merge)(t,i);const o=Boolean((null===(l=a.hot)||void 0===l?void 0:l.isUsingDefaultRollover)||(null===(n=a.hot)||void 0===n?void 0:n.customRollover.enabled));var r,c;if(t.phases.hot&&(t.phases.hot.min_age=null!==(r=t.phases.hot.min_age)&&void 0!==r?r:"0ms",null!==(c=t.phases.hot)&&void 0!==c&&c.actions)){var d,u;const e=t.phases.hot.actions;var m,p,h,f,g,b,j,y,v,M,_,P,T,k,w;if(o)if(null!==(m=a.hot)&&void 0!==m&&m.isUsingDefaultRollover?e.rollover=Object(O.cloneDeep)(x.q):(e.rollover||(e.rollover={}),null!==(v=i.phases.hot.actions.rollover)&&void 0!==v&&v.max_age?e.rollover.max_age=`${e.rollover.max_age}${null===(T=a.hot)||void 0===T?void 0:T.customRollover.maxAgeUnit}`:delete e.rollover.max_age,"number"!=typeof(null===(M=i.phases.hot.actions.rollover)||void 0===M?void 0:M.max_docs)&&delete e.rollover.max_docs,null!==(_=i.phases.hot.actions.rollover)&&void 0!==_&&_.max_primary_shard_size?e.rollover.max_primary_shard_size=`${e.rollover.max_primary_shard_size}${null===(k=a.hot)||void 0===k?void 0:k.customRollover.maxPrimaryShardSizeUnit}`:delete e.rollover.max_primary_shard_size,null!==(P=i.phases.hot.actions.rollover)&&void 0!==P&&P.max_size?e.rollover.max_size=`${e.rollover.max_size}${null===(w=a.hot)||void 0===w?void 0:w.customRollover.maxStorageSizeUnit}`:delete e.rollover.max_size),null!==(p=i.phases.hot.actions)&&void 0!==p&&p.forcemerge?null!==(h=a.hot)&&void 0!==h&&h.bestCompression?e.forcemerge.index_codec="best_compression":delete e.forcemerge.index_codec:delete e.forcemerge,null!==(f=a.hot)&&void 0!==f&&f.bestCompression&&e.forcemerge&&(e.forcemerge.index_codec="best_compression"),null!==(g=a.hot)&&void 0!==g&&g.readonlyEnabled?e.readonly=null!==(y=e.readonly)&&void 0!==y?y:{}:delete e.readonly,null!==(b=i.phases.hot)&&void 0!==b&&null!==(j=b.actions)&&void 0!==j&&j.shrink)if(a.hot.shrink.isUsingShardSize){var L,E;delete e.shrink.number_of_shards,e.shrink.max_primary_shard_size=`${null===(L=e.shrink)||void 0===L?void 0:L.max_primary_shard_size}${null===(E=a.hot)||void 0===E?void 0:E.shrink.maxPrimaryShardSizeUnits}`}else delete e.shrink.max_primary_shard_size;else delete e.shrink;else delete e.rollover,delete e.forcemerge,delete e.readonly,delete e.shrink;null!==(d=i.phases.hot.actions)&&void 0!==d&&d.set_priority||delete e.set_priority,null!==(u=i.phases.hot.actions)&&void 0!==u&&u.searchable_snapshot?e.searchable_snapshot={...e.searchable_snapshot,snapshot_repository:a.searchableSnapshot.repository}:delete e.searchable_snapshot}if(a.warm.enabled){var S,F,C,z,A,D,N,I,R,U,q,$,V;t.phases.warm.actions=null!==(S=null===(F=t.phases.warm)||void 0===F?void 0:F.actions)&&void 0!==S?S:{};const l=t.phases.warm;var W;if(null!==(C=i.phases.warm)&&void 0!==C&&C.min_age&&(l.min_age=`${i.phases.warm.min_age}${a.warm.minAgeUnit}`),l.actions=B(a.warm,l.actions,null==e||null===(z=e.phases.warm)||void 0===z?void 0:z.actions,null===(A=i.phases.warm)||void 0===A||null===(D=A.actions)||void 0===D||null===(N=D.allocate)||void 0===N?void 0:N.number_of_replicas),null!==(I=i.phases.warm)&&void 0!==I&&null!==(R=I.actions)&&void 0!==R&&R.forcemerge?a.warm.bestCompression?l.actions.forcemerge.index_codec="best_compression":delete l.actions.forcemerge.index_codec:delete l.actions.forcemerge,a.warm.readonlyEnabled?l.actions.readonly=null!==(W=l.actions.readonly)&&void 0!==W?W:{}:delete l.actions.readonly,null!==(U=i.phases.warm)&&void 0!==U&&null!==(q=U.actions)&&void 0!==q&&q.set_priority||delete l.actions.set_priority,null!==($=i.phases.warm)&&void 0!==$&&null!==(V=$.actions)&&void 0!==V&&V.shrink)if(a.warm.shrink.isUsingShardSize){var H,G;delete l.actions.shrink.number_of_shards,l.actions.shrink.max_primary_shard_size=`${null===(H=l.actions.shrink)||void 0===H?void 0:H.max_primary_shard_size}${null===(G=a.warm)||void 0===G?void 0:G.shrink.maxPrimaryShardSizeUnits}`}else delete l.actions.shrink.max_primary_shard_size;else delete l.actions.shrink}else delete t.phases.warm;if(a.cold.enabled){var J,K,Y,Q,X,Z,ee,te,ae,ie,le;t.phases.cold.actions=null!==(J=null===(K=t.phases.cold)||void 0===K?void 0:K.actions)&&void 0!==J?J:{};const l=t.phases.cold;var ne,se;null!==(Y=i.phases.cold)&&void 0!==Y&&Y.min_age&&(l.min_age=`${i.phases.cold.min_age}${a.cold.minAgeUnit}`),l.actions=B(a.cold,l.actions,null==e||null===(Q=e.phases.cold)||void 0===Q?void 0:Q.actions,null===(X=i.phases.cold)||void 0===X||null===(Z=X.actions)||void 0===Z||null===(ee=Z.allocate)||void 0===ee?void 0:ee.number_of_replicas),a.cold.freezeEnabled?l.actions.freeze=null!==(ne=l.actions.freeze)&&void 0!==ne?ne:{}:delete l.actions.freeze,a.cold.readonlyEnabled?l.actions.readonly=null!==(se=l.actions.readonly)&&void 0!==se?se:{}:delete l.actions.readonly,null!==(te=i.phases.cold)&&void 0!==te&&null!==(ae=te.actions)&&void 0!==ae&&ae.set_priority||delete l.actions.set_priority,null!==(ie=i.phases.cold)&&void 0!==ie&&null!==(le=ie.actions)&&void 0!==le&&le.searchable_snapshot?l.actions.searchable_snapshot={...l.actions.searchable_snapshot,snapshot_repository:a.searchableSnapshot.repository}:delete l.actions.searchable_snapshot}else delete t.phases.cold;if(null!==(s=a.frozen)&&void 0!==s&&s.enabled){var oe,re,ce,de,ue;t.phases.frozen.actions=null!==(oe=null===(re=t.phases.frozen)||void 0===re?void 0:re.actions)&&void 0!==oe?oe:{};const e=t.phases.frozen;null!==(ce=i.phases.frozen)&&void 0!==ce&&ce.min_age&&(e.min_age=`${i.phases.frozen.min_age}${a.frozen.minAgeUnit}`),null!==(de=i.phases.frozen)&&void 0!==de&&null!==(ue=de.actions)&&void 0!==ue&&ue.searchable_snapshot?e.actions.searchable_snapshot={...e.actions.searchable_snapshot,snapshot_repository:a.searchableSnapshot.repository}:delete e.actions.searchable_snapshot}else delete t.phases.frozen;if(a.delete.enabled){var me,pe,he,xe,fe;const e=t.phases.delete;e.actions=null!==(me=e.actions)&&void 0!==me?me:{},e.actions.delete=null!==(pe=e.actions.delete)&&void 0!==pe?pe:{},null!==(he=i.phases.delete)&&void 0!==he&&he.min_age&&(e.min_age=`${i.phases.delete.min_age}${a.delete.minAgeUnit}`),null!==(xe=i.phases.delete)&&void 0!==xe&&null!==(fe=xe.actions)&&void 0!==fe&&fe.wait_for_snapshot||delete e.actions.wait_for_snapshot}else delete t.phases.delete}))};var e}),[a,n]),z=Object(i.useMemo)((()=>(e=>t=>{var a,i,l,n,s,o,r,c,d,u,m,p;const{phases:{hot:h,warm:x,cold:f,frozen:g,delete:b}}=t;let j=C([null==h?void 0:h.actions.searchable_snapshot,null==f?void 0:f.actions.searchable_snapshot,null==g?void 0:g.actions.searchable_snapshot]);!j&&e&&(j=N);const v={hot:{isUsingDefaultRollover:k(t),customRollover:{enabled:Boolean(null==h||null===(a=h.actions)||void 0===a?void 0:a.rollover)},bestCompression:"best_compression"===(null==h||null===(i=h.actions)||void 0===i||null===(l=i.forcemerge)||void 0===l?void 0:l.index_codec),readonlyEnabled:Boolean(null==h||null===(n=h.actions)||void 0===n?void 0:n.readonly),shrink:{isUsingShardSize:Boolean(null==h||null===(s=h.actions.shrink)||void 0===s?void 0:s.max_primary_shard_size)}},warm:{enabled:Boolean(x),warmPhaseOnRollover:void 0===x||Boolean("0ms"===x.min_age),bestCompression:"best_compression"===(null==x||null===(o=x.actions)||void 0===o||null===(r=o.forcemerge)||void 0===r?void 0:r.index_codec),dataTierAllocationType:T(null==x?void 0:x.actions),readonlyEnabled:Boolean(null==x||null===(c=x.actions)||void 0===c?void 0:c.readonly),minAgeToMilliSeconds:-1,shrink:{isUsingShardSize:Boolean(null==x||null===(d=x.actions.shrink)||void 0===d?void 0:d.max_primary_shard_size)}},cold:{enabled:Boolean(f),dataTierAllocationType:T(null==f?void 0:f.actions),freezeEnabled:Boolean(null==f||null===(u=f.actions)||void 0===u?void 0:u.freeze),readonlyEnabled:Boolean(null==f||null===(m=f.actions)||void 0===m?void 0:m.readonly),minAgeToMilliSeconds:-1},frozen:{enabled:Boolean(g),dataTierAllocationType:T(null==g?void 0:g.actions),freezeEnabled:Boolean(null==g||null===(p=g.actions)||void 0===p?void 0:p.freeze),minAgeToMilliSeconds:-1},delete:{enabled:Boolean(b),minAgeToMilliSeconds:-1},searchableSnapshot:{repository:j}};return Object(P.produce)({...t,_meta:v},(e=>{var t,a,i,l,n,s;if(null!==(t=e.phases.hot)&&void 0!==t&&null!==(a=t.actions)&&void 0!==a&&a.rollover){if(e.phases.hot.actions.rollover.max_size){const t=y(e.phases.hot.actions.rollover.max_size);e.phases.hot.actions.rollover.max_size=t.size,e._meta.hot.customRollover.maxStorageSizeUnit=t.units}if(e.phases.hot.actions.rollover.max_primary_shard_size){const t=y(e.phases.hot.actions.rollover.max_primary_shard_size);e.phases.hot.actions.rollover.max_primary_shard_size=t.size,e._meta.hot.customRollover.maxPrimaryShardSizeUnit=t.units}if(e.phases.hot.actions.rollover.max_age){const t=y(e.phases.hot.actions.rollover.max_age);e.phases.hot.actions.rollover.max_age=t.size,e._meta.hot.customRollover.maxAgeUnit=t.units}}if(null!==(i=e.phases.hot)&&void 0!==i&&null!==(l=i.actions.shrink)&&void 0!==l&&l.max_primary_shard_size){const t=y(e.phases.hot.actions.shrink.max_primary_shard_size);e.phases.hot.actions.shrink.max_primary_shard_size=t.size,e._meta.hot.shrink.maxPrimaryShardSizeUnits=t.units}if(e.phases.warm){var o,r,c;if(null!==(o=e.phases.warm.actions)&&void 0!==o&&null!==(r=o.allocate)&&void 0!==r&&r.require&&Object.entries(e.phases.warm.actions.allocate.require).forEach((t=>{e._meta.warm.allocationNodeAttribute=t.join(":")})),e.phases.warm.min_age){const t=y(e.phases.warm.min_age);e.phases.warm.min_age=t.size,e._meta.warm.minAgeUnit=t.units}if(null!==(c=e.phases.warm.actions.shrink)&&void 0!==c&&c.max_primary_shard_size){const t=y(e.phases.warm.actions.shrink.max_primary_shard_size);e.phases.warm.actions.shrink.max_primary_shard_size=t.size,e._meta.warm.shrink.maxPrimaryShardSizeUnits=t.units}}if(e.phases.cold&&(null!==(n=e.phases.cold.actions)&&void 0!==n&&null!==(s=n.allocate)&&void 0!==s&&s.require&&Object.entries(e.phases.cold.actions.allocate.require).forEach((t=>{e._meta.cold.allocationNodeAttribute=t.join(":")})),e.phases.cold.min_age)){const t=y(e.phases.cold.min_age);e.phases.cold.min_age=t.size,e._meta.cold.minAgeUnit=t.units}if(e.phases.frozen&&e.phases.frozen.min_age){const t=y(e.phases.frozen.min_age);e.phases.frozen.min_age=t.size,e._meta.frozen.minAgeUnit=t.units}if(e.phases.delete&&e.phases.delete.min_age){const t=y(e.phases.delete.min_age);e.phases.delete.min_age=t.size,e._meta.delete.minAgeUnit=t.units}}))})(S)),[S]),A=Object(i.useMemo)((()=>({...n,name:L})),[n,L]),D=Object(i.useMemo)((()=>(e=>({_meta:{hot:{isUsingDefaultRollover:{defaultValue:!0,label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.isUsingDefaultRollover",{defaultMessage:"Use recommended defaults"})},customRollover:{enabled:{defaultValue:!0,label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.enableRolloverLabel",{defaultMessage:"Enable rollover"})},maxStorageSizeUnit:{defaultValue:"gb"},maxPrimaryShardSizeUnit:{defaultValue:"gb"},maxAgeUnit:{defaultValue:"d"}},bestCompression:{label:U.editPolicy.bestCompressionFieldLabel},readonlyEnabled:{defaultValue:!1,label:U.editPolicy.readonlyEnabledFieldLabel},shrink:{isUsingShardSize:{defaultValue:!1},maxPrimaryShardSizeUnits:{defaultValue:"gb"}}},warm:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.warmPhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate warm phase"})},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.warm.min_age","phases.cold.min_age","phases.frozen.min_age","phases.delete.min_age"]},bestCompression:{label:U.editPolicy.bestCompressionFieldLabel},dataTierAllocationType:{label:U.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:U.editPolicy.allocationNodeAttributeFieldLabel},readonlyEnabled:{defaultValue:!1,label:U.editPolicy.readonlyEnabledFieldLabel},shrink:{isUsingShardSize:{defaultValue:!1},maxPrimaryShardSizeUnits:{defaultValue:"gb"}}},cold:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.coldPhase.activateColdPhaseSwitchLabel",{defaultMessage:"Activate cold phase"})},freezeEnabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.coldPhase.freezeIndexLabel",{defaultMessage:"Freeze index"})},readonlyEnabled:{defaultValue:!1,label:U.editPolicy.readonlyEnabledFieldLabel},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.cold.min_age","phases.frozen.min_age","phases.delete.min_age"]},dataTierAllocationType:{label:U.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:U.editPolicy.allocationNodeAttributeFieldLabel}},frozen:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.frozenPhase.activateFrozenPhaseSwitchLabel",{defaultMessage:"Activate frozen phase"})},freezeEnabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.frozePhase.freezeIndexLabel",{defaultMessage:"Freeze index"})},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.frozen.min_age","phases.delete.min_age"]},dataTierAllocationType:{label:U.editPolicy.allocationTypeOptionsFieldLabel},allocationNodeAttribute:{label:U.editPolicy.allocationNodeAttributeFieldLabel}},delete:{enabled:{defaultValue:!1,label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.deletePhase.activateWarmPhaseSwitchLabel",{defaultMessage:"Activate delete phase"})},minAgeUnit:{defaultValue:"d"},minAgeToMilliSeconds:{defaultValue:-1,fieldsToValidateOnChange:["phases.delete.min_age"]}},searchableSnapshot:{repository:{defaultValue:e?N:""}}},phases:{hot:{actions:{rollover:{max_age:{label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumAgeLabel",{defaultMessage:"Maximum age"}),validations:[{validator:Q},{validator:G},{validator:X}],fieldsToValidateOnChange:ee},max_docs:{label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumDocumentsLabel",{defaultMessage:"Maximum documents"}),validations:[{validator:Q},{validator:G},{validator:X}],serializer:ie.stringToNumber,fieldsToValidateOnChange:ee},max_primary_shard_size:{label:U.editPolicy.maxPrimaryShardSizeLabel,validations:[{validator:Q},{validator:G}],fieldsToValidateOnChange:ee},max_size:{label:v.i18n.translate("xpack.indexLifecycleMgmt.hotPhase.maximumIndexSizeLabel",{defaultMessage:"Maximum index size"}),validations:[{validator:Q},{validator:G}],fieldsToValidateOnChange:ee}},forcemerge:{max_num_segments:le},shrink:{number_of_shards:oe,max_primary_shard_size:re},set_priority:{priority:ce("hot")},searchable_snapshot:ne}},warm:{min_age:de("warm"),actions:{allocate:{number_of_replicas:se},shrink:{number_of_shards:oe,max_primary_shard_size:re},forcemerge:{max_num_segments:le},set_priority:{priority:ce("warm")}}},cold:{min_age:de("cold"),actions:{allocate:{number_of_replicas:se},set_priority:{priority:ce("cold")},searchable_snapshot:ne}},frozen:{min_age:de("frozen"),actions:{allocate:{number_of_replicas:se},set_priority:{priority:ce("frozen")},searchable_snapshot:ne}},delete:{min_age:de("delete","365"),actions:{wait_for_snapshot:{policy:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.waitForSnapshot.snapshotPolicyFieldLabel",{defaultMessage:"Policy name (optional)"})}}}}}}))(S)),[S]),{form:I}=Object(o.useForm)({schema:D,defaultValue:A,deserializer:z,serializer:F}),[R]=Object(o.useFormData)({form:I,watch:Oa}),q=()=>a||b?Object(O.get)(R,Oa):L,H=Object(i.useMemo)((()=>(({policies:e,isClonedPolicy:t,originalPolicyName:a})=>[{validator:V(U.editPolicy.errors.policyNameRequiredMessage)},{validator:W({message:U.editPolicy.errors.policyNameStartsWithUnderscoreErrorMessage,char:"_"})},{validator:$({message:U.editPolicy.errors.policyNameContainsInvalidChars,chars:[","," "]})},{validator:e=>{const t=e.value;if(window.TextEncoder&&(new window.TextEncoder).encode(t).length>255)return{message:U.editPolicy.errors.policyNameTooLongErrorMessage}}},{validator:i=>{const l=i.value;return t&&l===a?{message:U.editPolicy.errors.policyNameMustBeDifferentErrorMessage}:l!==a&&e.map((e=>e.name)).includes(l)?{message:U.editPolicy.errors.policyNameAlreadyUsedErrorMessage}:void 0}}])({originalPolicyName:L,policies:s,isClonedPolicy:b})),[L,s,b]),J=Object(p.useHistory)(),K=()=>{J.push("/policies")};return Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiPageHeader,{pageTitle:Object(ue.jsx)("span",{"data-test-subj":"policyTitle"},a?v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createPolicyMessage",{defaultMessage:"Create policy"}):v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.editPolicyMessage",{defaultMessage:"Edit policy {originalPolicyName}",values:{originalPolicyName:L}})),bottomBorder:!0,rightSideItems:[Object(ue.jsx)(f.EuiButtonEmpty,{href:Object(_.a)("index-lifecycle-management.html"),target:"_blank",iconType:"help"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.documentationLinkText",defaultMessage:"Documentation"}))]}),Object(ue.jsx)(f.EuiSpacer,{size:"l"}),Object(ue.jsx)(Le,{form:I},a?null:Object(ue.jsx)(i.Fragment,null,Object(ue.jsx)(pt,null),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(f.EuiFormRow,null,Object(ue.jsx)(f.EuiSwitch,{"data-test-subj":"saveAsNewSwitch",style:{maxWidth:"100%"},checked:b,onChange:e=>{w(e.target.checked)},label:Object(ue.jsx)("span",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewPolicyMessage",defaultMessage:"Save as new policy"}))}))),b||a?Object(ue.jsx)(Ie,{path:Oa,config:{label:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.policyNameLabel",{defaultMessage:"Policy name"}),helpText:v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.validPolicyNameMessage",{defaultMessage:"A policy name cannot start with an underscore and cannot contain a comma or a space."}),validations:H},component:c.TextField,componentProps:{fullWidth:!1,euiFieldProps:{"data-test-subj":"policyNameField"}}}):null,Object(ue.jsx)(f.EuiHorizontalRule,null),Object(ue.jsx)(Ze,null),Object(ue.jsx)(f.EuiSpacer,{size:"l"}),Object(ue.jsx)("div",null,Object(ue.jsx)(ha,null),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(fa,null),Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(ba,null),E&&Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(f.EuiSpacer,null),Object(ue.jsx)(ja,null)),Object(ue.jsx)(va,null)),Object(ue.jsx)(f.EuiHorizontalRule,null),Object(ue.jsx)(tt,null),Object(ue.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiFlexGroup,null,Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiButton,{"data-test-subj":"savePolicyButton",fill:!0,iconType:"check",iconSide:"left",disabled:!1===I.isValid||I.isSubmitting,onClick:async()=>{const{data:e,isValid:t}=await I.submit();if(t){await(async(e,t)=>{try{await Object(j.g)(e)}catch(t){const a=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.saveErrorMessage",{defaultMessage:"Error saving lifecycle policy {lifecycleName}",values:{lifecycleName:e.name}});return Object(Be.a)(t,a),!1}const a=Object(Re.a)(e.phases);a.push(t?x.k:x.n),Object(Re.c)(h.METRIC_TYPE.COUNT,a);const i=v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.successfulSaveMessage",{defaultMessage:'{verb} lifecycle policy "{lifecycleName}"',values:{verb:t?v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.createdMessage",{defaultMessage:"Created"}):v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.updatedMessage",{defaultMessage:"Updated"}),lifecycleName:e.name}});return M.c.addSuccess(i),!0})({...e,name:q()},a||b)&&K()}else M.c.addDanger(v.i18n.translate("xpack.indexLifecycleMgmt.editPolicy.formErrorsMessage",{defaultMessage:"Please fix the errors on this page."}))}},b?Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveAsNewButton",defaultMessage:"Save as new policy"}):Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.saveButton",defaultMessage:"Save policy"}))),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiButtonEmpty,{"data-test-subj":"cancelTestPolicy",onClick:K},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.cancelButton",defaultMessage:"Cancel"}))))),Object(ue.jsx)(f.EuiFlexItem,{grow:!1},Object(ue.jsx)(f.EuiButtonEmpty,{onClick:()=>{t(!e)},"data-test-subj":"requestButton"},e?Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.hidePolicyJsonButton",defaultMessage:"Hide request"}):Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.showPolicyJsonButton",defaultMessage:"Show request"})))),e?Object(ue.jsx)($e,{policyName:q(),close:()=>t(!1)}):null))},_a=({match:{params:{policyName:e}}})=>{var t;const{services:{breadcrumbService:a,license:l}}=m(),{error:n,isLoading:s,data:o,resendRequest:r}=Object(j.k)();if(Object(i.useEffect)((()=>{a.setBreadcrumbs("editPolicy")}),[a]),s)return Object(ue.jsx)(f.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(ue.jsx)(f.EuiEmptyPrompt,{title:Object(ue.jsx)(f.EuiLoadingSpinner,{size:"xl"}),body:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.policiesLoading",defaultMessage:"Loading policies..."})}));if(n||!o){const{statusCode:e,message:t}=n||{statusCode:"",message:""};return Object(ue.jsx)(f.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(ue.jsx)(f.EuiEmptyPrompt,{title:Object(ue.jsx)("h2",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:Object(ue.jsx)("p",null,t," (",e,")"),actions:Object(ue.jsx)(f.EuiButton,{onClick:r,iconType:"refresh",color:"danger"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.lifecyclePoliciesReloadButton",defaultMessage:"Try again"}))}))}const c=((e,t="")=>{if(e&&e.length>0)return e.find((e=>e.name===t))})(o,Object(d.attemptToURIDecode)(e));return Object(ue.jsx)(rt,{value:{isNewPolicy:!(null!=c&&c.policy),policyName:Object(d.attemptToURIDecode)(e),policy:null!==(t=null==c?void 0:c.policy)&&void 0!==t?t:x.p,existingPolicies:o,license:{canUseSearchableSnapshot:()=>l.hasAtLeast(b.a)},indices:c&&c.indices?c.indices:[],indexTemplates:c&&c.indexTemplates?c.indexTemplates:[]}},Object(ue.jsx)(Ma,null))},Pa=Object(i.createContext)({listAction:null,setListAction:()=>{}}),Ta=({children:e})=>{const[t,a]=Object(i.useState)(null);return Object(ue.jsx)(Pa.Provider,{value:{listAction:t,setListAction:a}},e)},ka=()=>{const e=Object(i.useContext)(Pa);if(!e)throw new Error("usePolicyListContext can only be called inside of PolicyListContext!");return e},wa={deleteEnabled:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonText",{defaultMessage:"Delete policy"}),deleteDisabled:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.deletePolicyButtonDisabledTooltip",{defaultMessage:"You cannot delete a policy that is being used by an index"}),viewIndices:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.viewIndicesButtonText",{defaultMessage:"View indices linked to policy"}),addIndexTemplate:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addPolicyToTemplateButtonText",{defaultMessage:"Add policy to index template"})},La=({policies:e})=>{const t=Object(p.useHistory)(),{services:{getUrlForApp:a}}=m(),{setListAction:i}=ka(),l=[{"data-test-subj":"policy-name",field:"name",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.nameHeader",{defaultMessage:"Name"}),sortable:!0,render:e=>Object(ue.jsx)(f.EuiLink,Se()({className:"eui-textBreakAll","data-test-subj":"policyTablePolicyNameLink"},Object(s.reactRouterNavigate)(t,Object(dt.e)(e),(()=>Object(Re.c)(h.METRIC_TYPE.CLICK,x.g)))),e)},{"data-test-subj":"policy-indexTemplates",field:"indexTemplates",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.indexTemplatesHeader",{defaultMessage:"Linked index templates"}),sortable:({indexTemplates:e})=>(null!=e?e:[]).length,render:(e,t)=>e&&e.length>0?Object(ue.jsx)(f.EuiToolTip,{content:wa.viewIndices,position:"left"},Object(ue.jsx)(f.EuiButtonEmpty,{flush:"both","data-test-subj":"viewIndexTemplates",onClick:()=>i({selectedPolicy:t,actionType:"viewIndexTemplates"})},e.length)):"0"},{"data-test-subj":"policy-indices",field:"indices",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.linkedIndicesHeader",{defaultMessage:"Linked indices"}),sortable:({indices:e})=>(null!=e?e:[]).length,render:(e,t)=>e&&e.length>0?Object(ue.jsx)(f.EuiToolTip,{content:wa.viewIndices,position:"left"},Object(ue.jsx)(f.EuiLink,{href:Object(dt.b)(t.name,a)},e.length)):"0"},{"data-test-subj":"policy-modifiedDate",field:"modifiedDate",name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.modifiedDateHeader",{defaultMessage:"Modified date"}),sortable:!0,render:e=>e?L()(e).format("MMM D, YYYY"):e},{actions:[{render:e=>Object(ue.jsx)(f.EuiToolTip,{content:wa.addIndexTemplate},Object(ue.jsx)(f.EuiButtonIcon,{"data-test-subj":"addPolicyToTemplate",onClick:()=>i({selectedPolicy:e,actionType:"addIndexTemplate"}),iconType:"plusInCircle","aria-label":wa.addIndexTemplate}))},{render:(e,t)=>Object(ue.jsx)(f.EuiToolTip,{content:t?wa.deleteEnabled:wa.deleteDisabled},Object(ue.jsx)(f.EuiButtonIcon,{"data-test-subj":"deletePolicy",onClick:()=>i({selectedPolicy:e,actionType:"deletePolicy"}),iconType:"trash","aria-label":wa.deleteEnabled,disabled:!t})),enabled:e=>!(e=>Boolean(e.indices&&e.indices.length))(e)}],name:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.headers.actionsHeader",{defaultMessage:"Actions"})}];return Object(ue.jsx)(f.EuiInMemoryTable,{tableCaption:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.captionText",{defaultMessage:"The table below contains {count, plural, one {# Index Lifecycle policy} other {# Index Lifecycle policies}} .",values:{count:e.length}}),pagination:!0,sorting:{sort:{field:"name",direction:"asc"}},search:{box:{incremental:!0,"data-test-subj":"ilmSearchBar"}},tableLayout:"auto",items:e,columns:l,rowProps:e=>({"data-test-subj":`policyTableRow-${e.name}`})})};var Ea=a(4),Sa=a.n(Ea);class confirm_delete_ConfirmDelete extends i.Component{constructor(...e){super(...e),Sa()(this,"deletePolicy",(async()=>{const{policyToDelete:e,callback:t}=this.props,a=e.name;try{await Object(j.c)(a);const e=v.i18n.translate("xpack.indexLifecycleMgmt.confirmDelete.successMessage",{defaultMessage:"Deleted policy {policyName}",values:{policyName:a}});M.c.addSuccess(e)}catch(e){const t=v.i18n.translate("xpack.indexLifecycleMgmt.confirmDelete.errorMessage",{defaultMessage:"Error deleting policy {policyName}",values:{policyName:a}});Object(Be.a)(e,t)}t&&t()}))}render(){const{policyToDelete:e,onCancel:t}=this.props,a=v.i18n.translate("xpack.indexLifecycleMgmt.confirmDelete.title",{defaultMessage:'Delete policy "{name}"',values:{name:e.name}});return Object(ue.jsx)(f.EuiConfirmModal,{"data-test-subj":"deletePolicyModal",title:a,onCancel:t,onConfirm:this.deletePolicy,cancelButtonText:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.confirmDelete.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.confirmDelete.deleteButton",defaultMessage:"Delete"}),buttonColor:"danger"},Object(ue.jsx)("div",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.confirmDelete.undoneWarning",defaultMessage:"You can't recover a deleted policy."})))}}const Fa=({policy:e,onSuccess:t,onCancel:a})=>{const[n,s]=Object(i.useState)(!1),[o,r]=Object(i.useState)(""),[c,d]=Object(i.useState)(""),[u,m]=Object(i.useState)(""),{error:p,isLoading:h,data:x,resendRequest:b}=Object(j.h)(n),y=v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.title",{defaultMessage:'Add policy "{name}" to index template',values:{name:e.name}});return Object(ue.jsx)(f.EuiConfirmModal,{"data-test-subj":"addPolicyToTemplateModal",title:y,onCancel:a,onConfirm:async()=>{const a=e.name;if(o)try{await Object(j.b)({policyName:a,templateName:o,aliasName:""===c?void 0:c},n);const e=v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.successMessage",{defaultMessage:"Added policy {policyName} to index template {templateName}",values:{policyName:a,templateName:o}});M.c.addSuccess(e),t(o)}catch(e){const t=v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorMessage",{defaultMessage:'Error adding policy "{policyName}" to index template {templateName}',values:{policyName:a,templateName:o}});Object(Be.a)(e,t)}else m(v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.noTemplateSelectedErrorMessage",{defaultMessage:"You must select an index template."}))},cancelButtonText:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.confirmButton",{defaultMessage:"Add policy"}),confirmButtonDisabled:h||!!p||!x},Object(ue.jsx)(f.EuiText,null,Object(ue.jsx)("p",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.explanationText",defaultMessage:"This will apply the lifecycle policy to all indices which match the index template."})," ",Object(ue.jsx)(Ue,{docPath:"index-templates.html",text:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.editPolicy.learnAboutIndexTemplatesLink",defaultMessage:"Learn about index templates"})}))),Object(ue.jsx)(f.EuiSpacer,{size:"m"}),(()=>{let t=[];x&&(t=x.map((({name:e})=>({label:e}))));return Object(ue.jsx)(f.EuiForm,null,Object(ue.jsx)(f.EuiFormRow,null,Object(ue.jsx)(f.EuiSwitch,{label:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.showLegacyTemplates",defaultMessage:"Show legacy index templates"}),checked:n,onChange:e=>{r(""),s(e.target.checked)}})),p?(()=>{const{statusCode:e="",message:t=""}=p;return Object(ue.jsx)(i.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(f.EuiCallOut,{style:{maxWidth:400},title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesTitle",defaultMessage:"Unable to load index templates"}),color:"danger"},Object(ue.jsx)("p",null,t," (",e,")"),Object(ue.jsx)(f.EuiButton,{isLoading:h,color:"danger",onClick:b},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.errorLoadingTemplatesButton",defaultMessage:"Try again"}))),Object(ue.jsx)(f.EuiSpacer,{size:"s"}))})():Object(ue.jsx)(l.a.Fragment,null,(()=>{var e,t,a;const l=x.find((e=>e.name===o)),n=null==l||null===(e=l.settings)||void 0===e||null===(t=e.index)||void 0===t||null===(a=t.lifecycle)||void 0===a?void 0:a.name;if(n)return Object(ue.jsx)(i.Fragment,null,Object(ue.jsx)(f.EuiSpacer,{size:"s"}),Object(ue.jsx)(f.EuiCallOut,{style:{maxWidth:400},title:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.templateHasPolicyWarningTitle",defaultMessage:"Template already has policy"}),color:"warning"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.indexManagementTable.addLifecyclePolicyToTemplateConfirmModal.indexHasNoAliasesWarningMessage",defaultMessage:"This index template already has the policy {existingPolicyName} attached to it. Adding this policy will overwrite that configuration.",values:{existingPolicyName:n}})),Object(ue.jsx)(f.EuiSpacer,{size:"s"}))})(),Object(ue.jsx)(f.EuiFormRow,{isInvalid:!!u,error:u,label:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateLabel",defaultMessage:"Index template"})},Object(ue.jsx)(f.EuiComboBox,{isLoading:h,placeholder:v.i18n.translate("xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.chooseTemplateMessage",{defaultMessage:"Select an index template"}),options:t,selectedOptions:o?[{label:o}]:[],onChange:e=>{m(""),r(e.length>0?e[0].label:"")},singleSelection:{asPlainText:!0},isClearable:!0}))),(null===(a=e.policy.phases.hot)||void 0===a?void 0:a.actions.rollover)?Object(ue.jsx)(f.EuiFormRow,{label:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.addLifecyclePolicyToTemplateConfirmModal.rolloverAliasLabel",defaultMessage:"Alias for rollover index"})},Object(ue.jsx)(f.EuiFieldText,{value:c,onChange:e=>{d(e.target.value)}})):null);var a})())},Ca=({updatePolicies:e})=>{const{listAction:t,setListAction:a}=ka();var i;return"viewIndexTemplates"===(null==t?void 0:t.actionType)?Object(ue.jsx)(mt,{policyName:t.selectedPolicy.name,indexTemplates:null!==(i=t.selectedPolicy.indexTemplates)&&void 0!==i?i:[],close:()=>{a(null)}}):"deletePolicy"===(null==t?void 0:t.actionType)?Object(ue.jsx)(confirm_delete_ConfirmDelete,{policyToDelete:t.selectedPolicy,callback:()=>{e(),a(null)},onCancel:()=>{a(null)}}):"addIndexTemplate"===(null==t?void 0:t.actionType)?Object(ue.jsx)(Fa,{policy:t.selectedPolicy,onSuccess:e=>{t.selectedPolicy.indexTemplates=[...t.selectedPolicy.indexTemplates||[],e],a(null)},onCancel:()=>a(null)}):null},za=({policies:e,updatePolicies:t})=>{const a=Object(p.useHistory)(),n=Object(ue.jsx)(f.EuiButton,Se()({},Object(s.reactRouterNavigate)(a,Object(dt.d)()),{fill:!0,iconType:"plusInCircle","data-test-subj":"createPolicyButton"}),Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.emptyPrompt.createButtonLabel",defaultMessage:"Create policy"}));return 0===e.length?Object(ue.jsx)(f.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(ue.jsx)(f.EuiEmptyPrompt,{iconType:"managementApp",title:Object(ue.jsx)("h1",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptTitle",defaultMessage:"Create your first index lifecycle policy"})),body:Object(ue.jsx)(i.Fragment,null,Object(ue.jsx)("p",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.emptyPromptDescription",defaultMessage:" An index lifecycle policy helps you manage your indices as they age."}))),actions:n})):Object(ue.jsx)(l.a.Fragment,null,Object(ue.jsx)(Ca,{updatePolicies:t}),Object(ue.jsx)(f.EuiPageHeader,{pageTitle:Object(ue.jsx)("span",{"data-test-subj":"ilmPageHeader"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.sectionHeading",defaultMessage:"Index Lifecycle Policies"})),description:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.sectionDescription",defaultMessage:"Manage your indices as they age.  Attach a policy to automate when and how to transition an index through its lifecycle."}),bottomBorder:!0,rightSideItems:[n]}),Object(ue.jsx)(f.EuiSpacer,{size:"l"}),Object(ue.jsx)(La,{policies:e}))},Aa=()=>{const{services:{breadcrumbService:e}}=m(),{data:t,isLoading:a,error:l,resendRequest:n}=Object(j.k)();if(Object(i.useEffect)((()=>{e.setBreadcrumbs("policies")}),[e]),a)return Object(ue.jsx)(f.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(ue.jsx)(f.EuiEmptyPrompt,{title:Object(ue.jsx)(f.EuiLoadingSpinner,{size:"xl"}),body:Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoading",defaultMessage:"Loading policies..."})}));if(l){const{statusCode:e,message:t}=l||{statusCode:"",message:""};return Object(ue.jsx)(f.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(ue.jsx)(f.EuiEmptyPrompt,{title:Object(ue.jsx)("h2",null,Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.policiesLoadingFailedTitle",defaultMessage:"Unable to load existing lifecycle policies"})),body:Object(ue.jsx)("p",null,t," (",e,")"),actions:Object(ue.jsx)(f.EuiButton,{onClick:n,iconType:"refresh",color:"danger"},Object(ue.jsx)(g.FormattedMessage,{id:"xpack.indexLifecycleMgmt.policyTable.policiesReloadButton",defaultMessage:"Try again"}))}))}return Object(ue.jsx)(Ta,null,Object(ue.jsx)(za,{policies:t||[],updatePolicies:n}))},Da=({history:e})=>(Object(i.useEffect)((()=>Object(Re.c)(h.METRIC_TYPE.LOADED,x.a)),[]),Object(ue.jsx)(p.Router,{history:e},Object(ue.jsx)(p.Switch,null,Object(ue.jsx)(p.Redirect,{exact:!0,from:"/",to:dt.a.list}),Object(ue.jsx)(p.Route,{exact:!0,path:dt.a.list,component:Aa}),Object(ue.jsx)(p.Route,{path:dt.a.edit,component:_a})))),Na=(e,t,a,i,l,o,r)=>{const{getUrlForApp:c}=i;return Object(n.render)(Object(ue.jsx)(s.RedirectAppLinks,{application:i,className:u.APP_WRAPPER_CLASS},Object(ue.jsx)(t,null,Object(ue.jsx)(s.KibanaContextProvider,{services:{cloud:r,breadcrumbService:l,license:o,getUrlForApp:c}},Object(ue.jsx)(Da,{history:a})))),e),()=>Object(n.unmountComponentAtNode)(e)}}])]);