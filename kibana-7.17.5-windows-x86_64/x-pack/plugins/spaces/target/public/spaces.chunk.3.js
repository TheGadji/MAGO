/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.spaces_bundle_jsonpfunction=window.spaces_bundle_jsonpfunction||[]).push([[3],{135:function(e,a,t){switch(window.__kbnThemeTag__){case"v7dark":return t(136);case"v7light":return t(138);case"v8dark":return t(140);case"v8light":return t(142)}},136:function(e,a,t){var s=t(34),n=t(137);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},137:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__flyoutBodyWrapper{padding:24px}\n",""]),e.exports=a},138:function(e,a,t){var s=t(34),n=t(139);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},139:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__flyoutBodyWrapper{padding:24px}\n",""]),e.exports=a},140:function(e,a,t){var s=t(34),n=t(141);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},141:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__flyoutBodyWrapper{padding:24px}\n",""]),e.exports=a},142:function(e,a,t){var s=t(34),n=t(143);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},143:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__flyoutBodyWrapper{padding:24px}\n",""]),e.exports=a},144:function(e,a,t){switch(window.__kbnThemeTag__){case"v7dark":return t(145);case"v7light":return t(147);case"v8dark":return t(149);case"v8light":return t(151)}},145:function(e,a,t){var s=t(34),n=t(146);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},146:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),e.exports=a},147:function(e,a,t){var s=t(34),n=t(148);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},148:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),e.exports=a},149:function(e,a,t){var s=t(34),n=t(150);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},150:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),e.exports=a},151:function(e,a,t){var s=t(34),n=t(152);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},152:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpaceIncludeRelated .euiIcon{margin-right:28px}.spcShareToSpaceIncludeRelated__label{font-size:14px}\n",""]),e.exports=a},153:function(e,a,t){switch(window.__kbnThemeTag__){case"v7dark":return t(154);case"v7light":return t(156);case"v8dark":return t(158);case"v8light":return t(160)}},154:function(e,a,t){var s=t(34),n=t(155);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},155:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),e.exports=a},156:function(e,a,t){var s=t(34),n=t(157);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},157:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),e.exports=a},158:function(e,a,t){var s=t(34),n=t(159);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},159:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),e.exports=a},160:function(e,a,t){var s=t(34),n=t(161);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1};s(n,c);e.exports=n.locals||{}},161:function(e,a,t){(a=t(35)(!1)).push([e.i,".spcShareToSpace__spacesList{margin-top:4px}\n",""]),e.exports=a},169:function(e,a,t){"use strict";t.r(a),t.d(a,"ShareToSpaceFlyoutInternal",(function(){return B}));t(135);var s=t(2),n=t(1),c=t.n(n),i=t(3),o=t(10),r=t(6),l=t(11),p=t(23),u=t(12),d=t(5),b=t(0);const j=Object(n.lazy)((()=>Object(d.a)().then((e=>({default:e}))))),g=({spaces:e,aliasesToDisable:a})=>{const[t,i]=Object(n.useState)(0),[r,l]=Object(n.useState)(5),p=Object(n.useMemo)((()=>e.reduce(((e,a)=>e.set(a.id,a)),new Map)),[e]),u=Object(n.useMemo)((()=>a.filter((({spaceExists:e})=>e))),[a]),d=u.length,g={pageIndex:t,pageSize:r,totalItemCount:d,pageSizeOptions:[5,10,15,20]};return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiCallOut,{size:"s",title:Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.aliasTableCalloutTitle",defaultMessage:"Legacy URL conflict"}),color:"warning"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.aliasTableCalloutBody",defaultMessage:"{aliasesToDisableCount, plural, one {# legacy URL} other {# legacy URLs}} will be disabled.",values:{aliasesToDisableCount:d}})),Object(b.jsx)(s.EuiSpacer,{size:"m"}),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(s.EuiLoadingSpinner,null)},Object(b.jsx)(s.EuiInMemoryTable,{items:u,columns:[{name:"Type",field:"targetType",sortable:!0},{name:"ID",field:"sourceId",sortable:!0,truncateText:!0},{name:"Space",render:({targetSpace:e})=>{const a=p.get(e);return Object(b.jsx)(j,{space:a,size:"s"})},sortable:({targetSpace:e})=>e}],sorting:!0,pagination:g,onTableChange:({page:{index:e,size:a}})=>{i(e),l(a)},tableLayout:"auto"}))))},h=e=>{const{savedObjectTarget:a,referenceGraph:t,isDisabled:i}=e,r=Object(n.useMemo)((()=>{const{type:e,id:s}=a;return t.filter((a=>(a.type!==e||a.id!==s)&&a.spaces.length>0&&!a.isMissing)).length}),[a,t]);return r>0?Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiText,{size:"s",color:i?"subdued":void 0},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.relativesControl.description",defaultMessage:"{relativesCount} related {relativesCount, plural, one {object} other {objects}} will also change.",values:{relativesCount:r}})),Object(b.jsx)(s.EuiHorizontalRule,{margin:"s"})):null};t(144),t(153);var f=t(14);const x=e=>{const{capabilities:a,getUrlForApp:t}=e.application;return a.spaces.manage?Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiSpacer,{size:"xs"}),Object(b.jsx)(s.EuiText,{size:"s",color:"subdued"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.text",defaultMessage:"You can {createANewSpaceLink} for sharing your objects.",values:{createANewSpaceLink:Object(b.jsx)(s.EuiLink,{"data-test-subj":"sts-new-space-link",href:t("management",{path:"kibana/spaces/create"})},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.noAvailableSpaces.canCreateNewSpace.linkText",defaultMessage:"create a new space"}))}}))):null},S=Object(n.lazy)((()=>Object(d.a)().then((e=>({default:e}))))),v=Object(b.jsx)(s.EuiBadge,{color:"hollow"},i.i18n.translate("xpack.spaces.shareToSpace.currentSpaceBadge",{defaultMessage:"Current"})),T=Object(b.jsx)(s.EuiIconTip,{content:i.i18n.translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.unchecked",{defaultMessage:"You need additional privileges to select this space."}),position:"left",type:"iInCircle"}),m=Object(b.jsx)(s.EuiIconTip,{content:i.i18n.translate("xpack.spaces.shareToSpace.partiallyAuthorizedSpaceTooltip.checked",{defaultMessage:"You need additional privileges to deselect this space."}),position:"left",type:"iInCircle"}),O=Object(b.jsx)(s.EuiIconTip,{content:i.i18n.translate("xpack.spaces.shareToSpace.featureIsDisabledTooltip",{defaultMessage:"This feature is disabled in this space."}),position:"left",type:"alert",color:"warning"}),y=e=>{const{spaces:a,shareOptions:t,onChange:l,enableCreateNewSpaceLink:p,enableSpaceAgnosticBehavior:d}=e,{services:j}=Object(u.b)(),{application:g,docLinks:h}=j,{selectedSpaceIds:y,initiallySelectedSpaceIds:k}=t,C=!d&&a.find((e=>e.isActiveSpace)).id,M=y.includes(r.a),E=a.filter((({id:e,isFeatureDisabled:a})=>!a||k.includes(e))).sort(function(e){return(a,t)=>a.id===e?-1:t.id===e?1:a.isFeatureDisabled!==t.isFeatureDisabled?a.isFeatureDisabled?1:-1:0}(C)).map((e=>{const a=y.includes(e.id),{isAvatarDisabled:t,...s}=function(e,a,t){if(e.id===a)return{append:v,disabled:!0,checked:"on"};if(!e.isAuthorizedForPurpose("shareSavedObjectsIntoSpace"))return{append:Object(b.jsx)(c.a.Fragment,null,t?m:T,e.isFeatureDisabled?O:null),disabled:!0};if(e.isFeatureDisabled)return{append:O,isAvatarDisabled:!0};return{}}(e,C,a);return{label:e.name,prepend:Object(b.jsx)(S,{space:e,isDisabled:t,size:"s"}),checked:a?"on":void 0,"data-space-id":e.id,"data-test-subj":`sts-space-selector-row-${e.id}`,...M&&{disabled:!0},...s}}));const w=d?0:1,F=y.filter((e=>e!==r.a&&e!==r.f)).length+w,_=y.filter((e=>e===r.f)).length,I=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.selectSpacesLabel",{defaultMessage:"Select spaces"}),L=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.selectedCountLabel",{defaultMessage:"{selectedCount} selected",values:{selectedCount:F}}),A=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.hiddenCountLabel",{defaultMessage:"+{hiddenCount} hidden",values:{hiddenCount:_}}),z=_?Object(b.jsx)(s.EuiText,{size:"xs"},A):null;return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiFormRow,{label:I,labelAppend:Object(b.jsx)(s.EuiFlexGroup,{direction:"column",gutterSize:"none",alignItems:"flexEnd"},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiText,{size:"xs"},L)),Object(b.jsx)(s.EuiFlexItem,{grow:!1},z)),fullWidth:!0},Object(b.jsx)(c.a.Fragment,null)),Object(b.jsx)(s.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(s.EuiLoadingSpinner,null)},Object(b.jsx)(s.EuiSelectable,{options:E,onChange:e=>function(e){const a=[...e.filter((e=>e.checked&&e["data-space-id"]!==C)).map((e=>e["data-space-id"])),...y.filter((e=>e===r.f))];l(a)}(e),listProps:{bordered:!0,rowHeight:40,className:"spcShareToSpace__spacesList","data-test-subj":"sts-form-space-selector"},height:"full",searchable:E.length>f.SPACE_SEARCH_COUNT_THRESHOLD},((e,a)=>Object(b.jsx)(c.a.Fragment,null,a,e))))),(()=>{if(!y.filter((e=>e===r.f)).length)return null;const e=null==h?void 0:h.links.security.kibanaPrivileges;return Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiText,{size:"s",color:"subdued"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.text",defaultMessage:"To view hidden spaces, you need {additionalPrivilegesLink}.",values:{additionalPrivilegesLink:Object(b.jsx)(s.EuiLink,{href:e,target:"_blank"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.unknownSpacesLabel.additionalPrivilegesLink",defaultMessage:"additional privileges"}))}})))})(),p&&a.length<2?Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(x,{application:g})):null))};const k=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.buttonGroupLegend",{defaultMessage:"Choose how this is shared"}),C="shareToAllSpacesId",M=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.buttonLabel",{defaultMessage:"All spaces"}),E="shareToExplicitSpacesId",w=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.buttonLabel",{defaultMessage:"Select spaces"}),F=i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.cannotChangeTooltip",{defaultMessage:"You need additional privileges to change this option."}),_=e=>{const{spaces:a,objectNoun:t,canShareToAllSpaces:n,shareOptions:l,onChange:p,enableCreateNewSpaceLink:d,enableSpaceAgnosticBehavior:j}=e,{services:g}=Object(u.b)(),{docLinks:h}=g;if(0===a.length)return Object(b.jsx)(s.EuiLoadingSpinner,null);const{selectedSpaceIds:f}=l,x=f.includes(r.a);return Object(b.jsx)(c.a.Fragment,null,(()=>{if(n||!x)return null;const e=null==h?void 0:h.links.security.kibanaPrivileges;return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiCallOut,{size:"s",iconType:"help",title:Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningTitle",defaultMessage:"Additional privileges required"}),color:"warning"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningBody",defaultMessage:"To edit the spaces for this {objectNoun}, you need {readAndWritePrivilegesLink} in all spaces.",values:{objectNoun:t,readAndWritePrivilegesLink:Object(b.jsx)(s.EuiLink,{href:e,target:"_blank"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.privilegeWarningLink",defaultMessage:"read and write privileges"}))}})),Object(b.jsx)(s.EuiSpacer,{size:"m"}))})(),Object(b.jsx)(s.EuiButtonGroup,{type:"single",idSelected:x?C:E,options:[{id:E,label:w},{id:C,label:M}],onChange:e=>{const a=e===C?[r.a,...f]:f.filter((e=>e!==r.a));p(a)},legend:k,color:"secondary",isFullWidth:!0,isDisabled:!n}),Object(b.jsx)(s.EuiSpacer,{size:"s"}),Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiFlexGroup,null,Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiText,{color:"subdued",textAlign:"center",size:"s","data-test-subj":"share-mode-control-description"},x?i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToAllSpaces.text",{defaultMessage:"Make {objectNoun} available in all current and future spaces.",values:{objectNoun:t}}):i.i18n.translate("xpack.spaces.shareToSpace.shareModeControl.shareToExplicitSpaces.text",{defaultMessage:"Make {objectNoun} available in selected spaces only.",values:{objectNoun:t}}))),!n&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIconTip,{content:F,position:"left",type:"iInCircle"})))),Object(b.jsx)(s.EuiSpacer,{size:"m"}),Object(b.jsx)(s.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(b.jsx)(y,{spaces:a,shareOptions:l,onChange:p,enableCreateNewSpaceLink:d,enableSpaceAgnosticBehavior:j})))},I=e=>{const{spaces:a,objectNoun:t,onUpdate:i,shareOptions:r,showCreateCopyCallout:l,canShareToAllSpaces:p,makeCopy:u,enableCreateNewSpaceLink:d,enableSpaceAgnosticBehavior:j}=e,g=l?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(s.EuiCallOut,{size:"s",title:Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningTitle",defaultMessage:"Changes are synchronized across spaces"}),color:"warning"},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningBody",defaultMessage:"Your changes appear in each space you select. {makeACopyLink} if you don't want to synchronize your changes.",values:{makeACopyLink:Object(b.jsx)(s.EuiLink,{"data-test-subj":"sts-copy-button",onClick:()=>u()},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.shareWarningLink",defaultMessage:"Make a copy"}))}})),Object(b.jsx)(s.EuiSpacer,{size:"m"})):null;return Object(b.jsx)(c.a.Fragment,null,g,Object(b.jsx)(_,{spaces:a,objectNoun:t,canShareToAllSpaces:p,shareOptions:r,onChange:e=>{return a=e,i({...r,selectedSpaceIds:a});var a},enableCreateNewSpaceLink:d,enableSpaceAgnosticBehavior:j}))},L=Object(n.lazy)((()=>Object(p.a)().then((e=>({default:e}))))),A=i.i18n.translate("xpack.spaces.shareToSpace.allSpacesTarget",{defaultMessage:"all spaces"});function z(e){return e.includes(r.a)?A:i.i18n.translate("xpack.spaces.shareToSpace.spacesTarget",{defaultMessage:"{spacesCount, plural, one {# space} other {# spaces}}",values:{spacesCount:e.length}})}const N=(e,a)=>e.every((e=>a.includes(e)))&&a.every((a=>e.includes(a)));function R(e,a,t){return async(s,n,c)=>{const{title:o}=e,l=s.map((({type:e,id:a})=>({type:e,id:a}))),p=s.length-1,u=i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessTitle",{values:{objectNoun:e.noun},defaultMessage:"Updated {objectNoun}",description:'Object noun can be plural or singular, examples: "Updated objects", "Updated job"'});await a.updateSavedObjectsSpaces(l,n,c);const d=n.includes(r.a);let b;b=n.length>0&&c.length>0&&!d?i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessAddRemoveText",{defaultMessage:"'{object}' {relativesCount, plural, =0 {was} =1 {and {relativesCount} related object were} other {and {relativesCount} related objects were}} added to {spacesTargetAdd} and removed from {spacesTargetRemove}.",values:{object:o,relativesCount:p,spacesTargetAdd:z(n),spacesTargetRemove:z(c)},description:"Uses output of xpack.spaces.shareToSpace.spacesTarget or xpack.spaces.shareToSpace.allSpacesTarget as 'spacesTarget...' inputs. Example strings: \"'Finance dashboard' was added to 1 space and removed from 2 spaces.\", \"'Finance dashboard' and 2 related objects were added to 3 spaces and removed from all spaces.\""}):n.length>0?i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessAddText",{defaultMessage:"'{object}' {relativesCount, plural, =0 {was} =1 {and {relativesCount} related object were} other {and {relativesCount} related objects were}} added to {spacesTarget}.",values:{object:o,relativesCount:p,spacesTarget:z(n)},description:"Uses output of xpack.spaces.shareToSpace.spacesTarget or xpack.spaces.shareToSpace.allSpacesTarget as 'spacesTarget' input. Example strings: \"'Finance dashboard' was added to 1 space.\", \"'Finance dashboard' and 2 related objects were added to all spaces.\""}):i.i18n.translate("xpack.spaces.shareToSpace.shareSuccessRemoveText",{defaultMessage:"'{object}' {relativesCount, plural, =0 {was} =1 {and {relativesCount} related object were} other {and {relativesCount} related objects were}} removed from {spacesTarget}.",values:{object:o,relativesCount:p,spacesTarget:z(c)},description:"Uses output of xpack.spaces.shareToSpace.spacesTarget or xpack.spaces.shareToSpace.allSpacesTarget as 'spacesTarget' input. Example strings: \"'Finance dashboard' was removed from 1 space.\", \"'Finance dashboard' and 2 related objects were removed from all spaces.\""}),t.addSuccess({title:u,text:b})}}const B=e=>{const{spacesManager:a,spacesDataPromise:t,services:p}=Object(u.b)(),{notifications:d}=p,j=d.toasts,{savedObjectTarget:f}=e,x=Object(n.useMemo)((()=>({type:f.type,id:f.id,namespaces:f.namespaces,icon:f.icon,title:f.title||`${f.type} [id=${f.id}]`,noun:f.noun||l.a})),[f]),{flyoutIcon:S,flyoutTitle:v=i.i18n.translate("xpack.spaces.shareToSpace.flyoutTitle",{defaultMessage:"Assign {objectNoun} to spaces",values:{objectNoun:x.noun}}),enableCreateCopyCallout:T=!1,enableCreateNewSpaceLink:m=!1,behaviorContext:O,changeSpacesHandler:y=R(x,a,j),onUpdate:k=(()=>null),onClose:C=(()=>null)}=e,M="outside-space"===O,[E,w]=Object(n.useState)({selectedSpaceIds:[],initiallySelectedSpaceIds:[]}),[F,_]=Object(n.useState)(!1),[A,z]=Object(n.useState)(!1),[{isLoading:B,spaces:D,referenceGraph:U,aliasTargets:W},G]=Object(n.useState)({isLoading:!0,spaces:[],referenceGraph:[],aliasTargets:[]});Object(n.useEffect)((()=>{const{type:e,id:s}=x,n=a.getShareableReferences([{type:e,id:s}]),c=a.getShareSavedObjectPermissions(e);Promise.all([t,n,c]).then((([e,a,t])=>{const s=!M&&e.activeSpaceId,n=x.namespaces.filter((e=>e!==s));w({selectedSpaceIds:n,initiallySelectedSpaceIds:n}),_(t.shareToAllSpaces),G({isLoading:!1,spaces:[...e.spacesMap].map((([,e])=>e)),referenceGraph:a.objects,aliasTargets:a.objects.reduce(((a,t)=>{for(const n of null!==(s=t.spacesWithMatchingAliases)&&void 0!==s?s:[]){var s;if("?"!==n){const s=e.spacesMap.has(n);a.push({targetSpace:n,targetType:t.type,sourceId:t.id,spaceExists:s})}}return a}),[])})})).catch((e=>{j.addError(e,{title:i.i18n.translate("xpack.spaces.shareToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})}))}),[x,a,t,j,M]);const{isSelectionChanged:P,spacesToAdd:H,spacesToRemove:Y,aliasesToDisable:$}=(()=>{if(!D.length)return{isSelectionChanged:!1,spacesToAdd:[],spacesToRemove:[],aliasesToDisable:[]};const e=!M&&D.find((e=>e.isActiveSpace)).id,a=x.namespaces.filter((a=>a!==e&&a!==r.f)),{selectedSpaceIds:t}=E,s=t.filter((e=>e!==r.f)),n=a.includes(r.a),c=s.includes(r.a),i=!n&&c,o=n&&!c,l=!c&&!N(a,s),p=i||o||!i&&!o&&l,u=s.filter((e=>!a.includes(e))),d=a.filter((e=>!s.includes(e))),b=e?[e]:[],j=i?[r.a]:o?[...b,...u]:u,g=new Set(j);return{isSelectionChanged:p,spacesToAdd:j,spacesToRemove:o||!i?d:[...b,...a],aliasesToDisable:i?W:W.filter((({targetSpace:e})=>g.has(e)))}})(),[q,J]=Object(n.useState)(!1),[K,Q]=Object(n.useState)(!1);if(A)return Object(b.jsx)(n.Suspense,{fallback:Object(b.jsx)(s.EuiLoadingSpinner,null)},Object(b.jsx)(L,{onClose:C,savedObjectTarget:x}));const V=!P||K||M&&!E.selectedSpaceIds.length;return Object(b.jsx)(s.EuiFlyout,{onClose:C,maxWidth:500,"data-test-subj":"share-to-space-flyout"},Object(b.jsx)(s.EuiFlyoutHeader,{hasBorder:!0},Object(b.jsx)(s.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},S&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIcon,{size:"m",type:S})),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiTitle,{size:"m"},Object(b.jsx)("h2",null,v))))),Object(b.jsx)(s.EuiFlexGroup,{direction:"column",gutterSize:"none",className:"spcShareToSpace__flyoutBodyWrapper"},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},x.icon&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIcon,{type:x.icon})),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiText,null,Object(b.jsx)("p",null,x.title))))),Object(b.jsx)(s.EuiSpacer,{size:"m"}),(()=>{if(B)return Object(b.jsx)(s.EuiLoadingSpinner,null);if(!q){const e=T&&D.length>1&&1===x.namespaces.length&&!N(x.namespaces,[r.a]);return Object(b.jsx)(I,{spaces:D,objectNoun:x.noun,shareOptions:E,onUpdate:w,showCreateCopyCallout:e,canShareToAllSpaces:F,makeCopy:()=>z(!0),enableCreateNewSpaceLink:m,enableSpaceAgnosticBehavior:M})}return Object(b.jsx)(g,{spaces:D,aliasesToDisable:$})})()),Object(b.jsx)(s.EuiFlyoutFooter,null,(()=>{const e=$.filter((({spaceExists:e})=>e)).length&&!q;return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(h,{savedObjectTarget:x,referenceGraph:U,isDisabled:V}),Object(b.jsx)(s.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiButtonEmpty,{onClick:()=>C(),"data-test-subj":"sts-cancel-button",disabled:K},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.cancelButton",defaultMessage:"Cancel"}))),Object(b.jsx)(s.EuiFlexItem,{grow:!1},e?Object(b.jsx)(s.EuiButton,{fill:!0,onClick:()=>J(!0),"data-test-subj":"sts-continue-button",disabled:V},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.continueButton",defaultMessage:"Continue"})):Object(b.jsx)(s.EuiButton,{fill:!0,onClick:()=>async function(){Q(!0);try{if($.length){const e=$.map((({spaceExists:e,...a})=>a));await a.disableLegacyUrlAliases(e)}await y(U,H,Y);const e=U.map((({type:e,id:a})=>({type:e,id:a})));k(e),C()}catch(e){Q(!1),j.addError(e,{title:i.i18n.translate("xpack.spaces.shareToSpace.shareErrorTitle",{values:{objectNoun:x.noun},defaultMessage:"Error updating {objectNoun}"})})}}(),"data-test-subj":"sts-save-button",disabled:V},Object(b.jsx)(o.FormattedMessage,{id:"xpack.spaces.shareToSpace.saveButton",defaultMessage:"Save & close"})))))})()))}},34:function(e,a,t){"use strict";var s,n=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},c=function(){var e={};return function(a){if(void 0===e[a]){var t=document.querySelector(a);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[a]=t}return e[a]}}(),i=[];function o(e){for(var a=-1,t=0;t<i.length;t++)if(i[t].identifier===e){a=t;break}return a}function r(e,a){for(var t={},s=[],n=0;n<e.length;n++){var c=e[n],r=a.base?c[0]+a.base:c[0],l=t[r]||0,p="".concat(r," ").concat(l);t[r]=l+1;var u=o(p),d={css:c[1],media:c[2],sourceMap:c[3]};-1!==u?(i[u].references++,i[u].updater(d)):i.push({identifier:p,updater:h(d,a),references:1}),s.push(p)}return s}function l(e){var a=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var n=t.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(e){a.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(a);else{var i=c(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(a)}return a}var p,u=(p=[],function(e,a){return p[e]=a,p.filter(Boolean).join("\n")});function d(e,a,t,s){var n=t?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(a,n);else{var c=document.createTextNode(n),i=e.childNodes;i[a]&&e.removeChild(i[a]),i.length?e.insertBefore(c,i[a]):e.appendChild(c)}}function b(e,a,t){var s=t.css,n=t.media,c=t.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),c&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(c))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var j=null,g=0;function h(e,a){var t,s,n;if(a.singleton){var c=g++;t=j||(j=l(a)),s=d.bind(null,t,c,!1),n=d.bind(null,t,c,!0)}else t=l(a),s=b.bind(null,t,a),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return s(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;s(e=a)}else n()}}e.exports=function(e,a){(a=a||{}).singleton||"boolean"==typeof a.singleton||(a.singleton=n());var t=r(e=e||[],a);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<t.length;s++){var n=o(t[s]);i[n].references--}for(var c=r(e,a),l=0;l<t.length;l++){var p=o(t[l]);0===i[p].references&&(i[p].updater(),i.splice(p,1))}t=c}}}},35:function(e,a,t){"use strict";e.exports=function(e){var a=[];return a.toString=function(){return this.map((function(a){var t=function(e,a){var t=e[1]||"",s=e[3];if(!s)return t;if(a&&"function"==typeof btoa){var n=(i=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),c=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[t].concat(c).concat([n]).join("\n")}var i,o,r;return[t].join("\n")}(a,e);return a[2]?"@media ".concat(a[2]," {").concat(t,"}"):t})).join("")},a.i=function(e,t,s){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(s)for(var c=0;c<this.length;c++){var i=this[c][0];null!=i&&(n[i]=!0)}for(var o=0;o<e.length;o++){var r=[].concat(e[o]);s&&n[r[0]]||(t&&(r[2]?r[2]="".concat(t," and ").concat(r[2]):r[2]=t),a.push(r))}},a}}}]);