/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[14],{183:function(e,t,n){"use strict";n.r(t),n.d(t,"ConfigureCases",(function(){return A}));var a=n(2),o=n.n(a),i=n(33),c=n.n(i),r=n(35),s=n(6),l=n(3),u=n(20),d=n(65),p=n(13),m=n(66);var g=n(102),E=n(92),b=n(78),f=n(56),y=n(21);const C=({isLoading:e,casesField:t,selectedActionType:n,selectedThirdParty:i})=>{const c=Object(a.useMemo)((()=>Object(y.capitalize)(n)),[n]);return o.a.createElement(s.EuiFlexGroup,{"data-test-subj":"static-mappings",alignItems:"center",responsive:!1},o.a.createElement(s.EuiFlexItem,null,o.a.createElement(s.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},o.a.createElement(s.EuiFlexItem,{component:"span",grow:!1},o.a.createElement(s.EuiCode,{"data-test-subj":"field-mapping-source"},t)),o.a.createElement(s.EuiFlexItem,{component:"span",grow:!1},o.a.createElement(s.EuiIcon,{type:"sortRight"})))),o.a.createElement(s.EuiFlexItem,null,o.a.createElement(s.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},o.a.createElement(s.EuiFlexItem,{component:"span",grow:!1},e?o.a.createElement(s.EuiLoadingSpinner,{size:"m"}):o.a.createElement(s.EuiCode,{"data-test-subj":"field-mapping-target"},i)))),o.a.createElement(s.EuiFlexItem,null,e?o.a.createElement(s.EuiLoadingSpinner,{size:"m"}):c))},j=o.a.memo(C),h=c.a.div.withConfig({displayName:"FieldRowWrapper",componentId:"sc-lo3da2-0"})(["margin:10px 0;font-size:14px;"]),w=({actionTypeName:e,isLoading:t,mappings:n})=>n.length?o.a.createElement(s.EuiFlexGroup,{direction:"column",gutterSize:"none"},o.a.createElement(s.EuiFlexItem,null," ",o.a.createElement(s.EuiFlexGroup,{responsive:!1},o.a.createElement(s.EuiFlexItem,null,o.a.createElement("span",{className:"euiFormLabel"},f.l)),o.a.createElement(s.EuiFlexItem,{"data-test-subj":"case-configure-field-mappings-second-col-label"},o.a.createElement("span",{className:"euiFormLabel"},f.m(e))),o.a.createElement(s.EuiFlexItem,null,o.a.createElement("span",{className:"euiFormLabel"},f.n)))),o.a.createElement(s.EuiFlexItem,null,o.a.createElement(h,{"data-test-subj":"case-configure-field-mappings-row-wrapper"},n.map((e=>{var n;return o.a.createElement(j,{key:`${e.source}`,casesField:e.source,isLoading:t,selectedActionType:e.actionType,selectedThirdParty:null!==(n=e.target)&&void 0!==n?n:"not_mapped"})}))))):null,x=o.a.memo(w),F=({actionTypeName:e,isLoading:t,mappings:n})=>{const i=Object(a.useMemo)((()=>n.length>0||t?{desc:f.j(e),color:"subdued"}:{desc:f.k(e),color:"danger"}),[t,n.length,e]);return o.a.createElement(s.EuiFlexGroup,{direction:"column",gutterSize:"none"},o.a.createElement(s.EuiFlexItem,{grow:!1},o.a.createElement(s.EuiText,{size:"xs","data-test-subj":"field-mapping-text"},o.a.createElement("h4",null,f.o(e)),o.a.createElement(s.EuiTextColor,{"data-test-subj":"field-mapping-desc",color:i.color},i.desc))),o.a.createElement(s.EuiFlexItem,{grow:!1},o.a.createElement(x,{actionTypeName:e,"data-test-subj":"case-mappings-field",isLoading:t,mappings:n})))},O=o.a.memo(F);var T=n(63),S=n(48);const v=c()(s.EuiFormRow).withConfig({displayName:"EuiFormRowExtended",componentId:"sc-h7jvjf-0"})([".euiFormRow__labelWrapper{.euiFormRow__label{width:100%;}}"]),I=({actionTypes:e,connectors:t,disabled:n,handleShowEditFlyout:i,isLoading:c,mappings:r,onChangeConnector:u,selectedConnector:d,updateConnectorDisabled:p})=>{var m;const g=Object(a.useMemo)((()=>t.find((e=>e.id===d.id))),[t,d.id]),E=null!==(m=null==g?void 0:g.name)&&void 0!==m?m:"none",y=Object(a.useMemo)((()=>{var t,n;return null!==(t=null===(n=e.find((e=>e.id===d.type)))||void 0===n?void 0:n.name)&&void 0!==t?t:"Unknown"}),[e,d.type]),C=Object(a.useMemo)((()=>o.a.createElement(s.EuiFlexGroup,{justifyContent:"spaceBetween"},o.a.createElement(s.EuiFlexItem,{grow:!1},f.q),o.a.createElement(s.EuiFlexItem,{grow:!1},"none"!==E&&o.a.createElement(s.EuiLink,{disabled:p,onClick:i,"data-test-subj":"case-configure-update-selected-connector-button"},f.u(E))))),[E,i,p]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:o.a.createElement("h3",null,f.r),description:f.p,"data-test-subj":"case-connectors-form-group"},o.a.createElement(v,{fullWidth:!0,label:C,"data-test-subj":"case-connectors-form-row"},o.a.createElement(s.EuiFlexGroup,{direction:"column"},o.a.createElement(s.EuiFlexItem,{grow:!1},o.a.createElement(b.a,{connectors:t,disabled:n,selectedConnector:d.id,isLoading:c,onChange:u,"data-test-subj":"case-connectors-dropdown",appendAddConnectorButton:!0})),d.type!==l.ConnectorTypes.none&&Object(S.d)(g)&&o.a.createElement(s.EuiFlexItem,{grow:!1},o.a.createElement(T.a,null)),d.type!==l.ConnectorTypes.none?o.a.createElement(s.EuiFlexItem,{grow:!1},o.a.createElement(O,{actionTypeName:y,isLoading:c,mappings:r})):null))))},z=o.a.memo(I),k=[{id:"close-by-user",label:f.d},{id:"close-by-pushing",label:f.e}],L=({closureTypeSelected:e,disabled:t,onChangeClosureType:n})=>{const i=Object(a.useCallback)((e=>{n(e)}),[n]);return o.a.createElement(s.EuiRadioGroup,{disabled:t,options:k,idSelected:e,onChange:i,name:"closure_options","data-test-subj":"closure-options-radio-group"})},N=o.a.memo(L),W=({closureTypeSelected:e,disabled:t,onChangeClosureType:n})=>o.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:o.a.createElement("h3",null,f.g),description:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,f.b),o.a.createElement("p",null,f.f)),"data-test-subj":"case-closure-options-form-group"},o.a.createElement(s.EuiFormRow,{fullWidth:!0,label:f.c,"data-test-subj":"case-closure-options-form-row"},o.a.createElement(N,{closureTypeSelected:e,disabled:t,onChangeClosureType:n,"data-test-subj":"case-closure-options-radio"}))),$=o.a.memo(W);var R=n(79),M=n(23);const _=c.a.div.withConfig({displayName:"FormWrapper",componentId:"sc-1kx5o74-0"})(["",""],(({theme:e})=>Object(i.css)(["& > *{margin-top 40px;}& >:first-child{margin-top:0;}padding-top:",";padding-bottom:",";.euiFlyout{z-index:",";}"],e.eui.paddingSizes.xl,e.eui.paddingSizes.xl,e.eui.euiZNavigation+1))),G=({userCanCrud:e})=>{const{triggersActionsUi:t}=Object(u.d)().services,[n,i]=Object(a.useState)(!0),[c,b]=Object(a.useState)(!1),[y,C]=Object(a.useState)(!1),[j,h]=Object(a.useState)(null),{connector:w,closureType:x,loading:F,mappings:O,persistLoading:T,persistCaseConfigure:v,refetchCaseConfigure:I,setConnector:k,setClosureType:L}=Object(g.a)(),{loading:N,connectors:W,refetchConnectors:M}=Object(d.a)(),{loading:G,actionTypes:A,refetchActionTypes:B}=(()=>{const e=Object(u.f)(),[t,n]=Object(a.useState)(!0),[o,i]=Object(a.useState)([]),c=Object(a.useRef)(!1),r=Object(a.useRef)(new AbortController),s=Object(a.useRef)(!0),l=Object(a.useCallback)((async()=>{try{n(!0),c.current=!1,r.current.abort(),r.current=new AbortController;const e=await Object(m.a)({signal:r.current.signal});c.current||(n(!1),i(e))}catch(t){c.current||(n(!1),i([]),e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:p.d}))}}),[e]);return Object(a.useEffect)((()=>(s.current&&(l(),s.current=!1),()=>{c.current=!0,r.current.abort(),s.current=!0})),[l]),{loading:t,actionTypes:o,refetchActionTypes:l}})(),D=Object(a.useMemo)((()=>A.filter((e=>l.SUPPORTED_CONNECTORS.includes(e.id)))),[A]),P=Object(a.useCallback)((async()=>{M(),B(),I()}),[B,I,M]),U=N||T||F||G,q=U||!n||"none"===w.id,H=Object(a.useCallback)((()=>{C(!0)}),[]),Z=Object(a.useCallback)((()=>b(!1)),[b]),J=Object(a.useCallback)((()=>C(!1)),[]),K=Object(a.useCallback)((e=>{if("add-connector"===e)return void b(!0);const t=Object(S.a)(e,W),n=null!=t?Object(R.b)(t):Object(R.a)();k(n),v({connector:n,closureType:x})}),[W,x,v,k]),Q=Object(a.useCallback)((e=>{L(e),v({connector:w,closureType:e})}),[w,v,L]);Object(a.useEffect)((()=>{N||"none"===w.id||W.some((e=>e.id===w.id))?N||"none"!==w.id&&!W.some((e=>e.id===w.id))||i(!0):i(!1)}),[W,w,N]),Object(a.useEffect)((()=>{N||"none"===w.id||h(Object(R.c)(W,w))}),[W,w,N]);const V=Object(a.useMemo)((()=>c?t.getAddConnectorFlyout({consumer:"case",onClose:Z,actionTypes:D,reloadConnectors:P}):null),[c,D]),X=Object(a.useMemo)((()=>j&&y?t.getEditConnectorFlyout({initialConnector:j,consumer:"case",onClose:J,reloadConnectors:P}):null),[w.id,y]);return o.a.createElement(_,null,!n&&o.a.createElement(E.c,{style:{marginTop:0}},o.a.createElement(s.EuiCallOut,{title:f.v,color:"warning",iconType:"help","data-test-subj":"configure-cases-warning-callout"},o.a.createElement(r.FormattedMessage,{defaultMessage:"The selected connector has been deleted or you do not have the {appropriateLicense} to use it. Either select a different connector or create a new one.",id:"xpack.cases.configure.connectorDeletedOrLicenseWarning",values:{appropriateLicense:o.a.createElement(s.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},f.s)}}))),o.a.createElement(E.c,null,o.a.createElement($,{closureTypeSelected:x,disabled:T||N||!e,onChangeClosureType:Q})),o.a.createElement(E.c,null,o.a.createElement(z,{actionTypes:A,connectors:null!=W?W:[],disabled:T||N||!e,handleShowEditFlyout:H,isLoading:U,mappings:O,onChangeConnector:K,selectedConnector:w,updateConnectorDisabled:q||!e})),V,X)},A=o.a.memo((e=>o.a.createElement(M.b,{owner:e.owner},o.a.createElement(G,e))));t.default=A},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(2),o=n.n(a),i=n(6),c=n(1);const r=c.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),s=c.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),l=({type:e="warning"})=>o.a.createElement(i.EuiCallOut,{title:r,color:e,iconType:"alert","data-test-subj":"deprecated-connector-warning-callout"},s),u=o.a.memo(l)},92:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var a=n(33),o=n.n(a);const i=o.a.div.withConfig({displayName:"WhitePageWrapper",componentId:"sc-1jiyl3r-0"})(["background-color:",";border-top:",";flex:1 1 auto;"],(({theme:e})=>e.eui.euiColorEmptyShade),(({theme:e})=>e.eui.euiBorderThin)),c=o.a.div.withConfig({displayName:"SectionWrapper",componentId:"sc-1jiyl3r-1"})(["box-sizing:content-box;margin:0 auto;max-width:1175px;width:100%;"]),r=o.a.div.withConfig({displayName:"HeaderWrapper",componentId:"sc-1jiyl3r-2"})(["",";"],(({theme:e})=>`\n      padding: ${e.eui.paddingSizes.l} ${e.eui.paddingSizes.l} 0 ${e.eui.paddingSizes.l};\n      @media only screen and (max-width: ${e.eui.euiBreakpoints.s}) {\n        padding: ${e.eui.paddingSizes.s} ${e.eui.paddingSizes.s} 0\n          ${e.eui.paddingSizes.s};\n      }\n    `)),s=o.a.div.withConfig({displayName:"ContentWrapper",componentId:"sc-1jiyl3r-3"})(["",";"],(({theme:e})=>`\n      padding: ${e.eui.paddingSizes.l} ${e.eui.paddingSizes.l} 70px ${e.eui.paddingSizes.l};\n      @media only screen and (max-width: ${e.eui.euiBreakpoints.s}) {\n        padding: ${e.eui.paddingSizes.s} ${e.eui.paddingSizes.s} 70px\n          ${e.eui.paddingSizes.s};\n      }\n    `))}}]);