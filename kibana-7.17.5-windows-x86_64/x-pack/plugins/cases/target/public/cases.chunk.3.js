/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[3],{112:function(e,t,a){"use strict";a.d(t,"a",(function(){return Ae}));var s=a(2),n=a.n(s),r=a(6),l=a(21),i=a(33),o=a.n(i),c=a(36),u=a.n(c),d=a(3),p=a(12),m=a(95),b=a(70),C=a(71),g=a(96),E=a(43),S=a(115),f=a(114),h=a(53),y=a(58),O=a(73);var j=a(82),w=a(94),T=a(20),v=a(99),I=a(74),x=a(48);const k=o.a.p.withConfig({displayName:"MediumShadeText",componentId:"sc-178ns9e-0"})(["color:",";"],(({theme:e})=>e.eui.euiColorMediumShade)),F=o.a.span.withConfig({displayName:"Spacer",componentId:"sc-178ns9e-1"})(["margin-left:",";"],(({theme:e})=>e.eui.paddingSizes.s)),N=o()(r.EuiBadgeGroup).withConfig({displayName:"TagWrapper",componentId:"sc-178ns9e-2"})(["width:100%;"]),A=(e,t)=>null!=e?n.a.createElement("span",{"data-test-subj":t},e):Object(S.a)(),P=({caseDetailsNavigation:e,disableAlerts:t=!1,dispatchUpdateCaseProperty:a,filterStatus:l,handleIsLoading:i,isLoadingCases:o,refreshCases:c,isSelectorView:u,userCanCrud:m,connectors:b=[]})=>{const{dispatchResetIsDeleted:C,handleOnDeleteConfirm:g,handleToggleModal:T,isDeleted:x,isDisplayConfirmDeleteModal:P,isLoading:R}=Object(j.a)(),[L,B]=Object(s.useState)({id:"",title:"",type:null}),U=Object(s.useCallback)((e=>{T(),B({id:e.id,title:e.title,type:e.type})}),[T]),D=Object(s.useCallback)((e=>{a({...e,refetchCasesStatus:()=>{null!=c&&c()}})}),[a,c]),z=Object(s.useMemo)((()=>(({deleteCaseOnClick:e})=>[{description:y.j(),icon:"trash",name:y.j(),onClick:e,type:"icon","data-test-subj":"action-delete"}])({deleteCaseOnClick:U})),[U]);return Object(s.useEffect)((()=>{i(R||o.indexOf("caseUpdate")>-1)}),[i,R,o]),Object(s.useEffect)((()=>{x&&(null!=c&&c(),C())}),[x,C,c]),[{name:y.l,render:t=>{if(null!=t.id&&null!=t.title){const a=null!=e?n.a.createElement(h.a,{caseDetailsNavigation:e,detailName:Object(O.c)(t)?t.caseParentId:t.id,subCaseId:Object(O.c)(t)?t.id:void 0,title:t.title},n.a.createElement(I.a,{text:t.title})):n.a.createElement(I.a,{text:t.title});return t.status!==d.CaseStatuses.closed?a:n.a.createElement(r.EuiFlexGroup,{direction:"column",gutterSize:"none"},n.a.createElement(r.EuiFlexItem,null,a),n.a.createElement(r.EuiFlexItem,null,n.a.createElement(k,null,y.e)))}return Object(S.a)()}},{field:"createdBy",name:y.w,render:e=>{var t,a;return null!=e?n.a.createElement(n.a.Fragment,null,n.a.createElement(r.EuiAvatar,{className:"userAction__circle",name:e.fullName?e.fullName:null!==(t=e.username)&&void 0!==t?t:y.E,size:"s"}),n.a.createElement(F,{"data-test-subj":"case-table-column-createdBy"},null!==(a=e.username)&&void 0!==a?a:y.E)):Object(S.a)()}},{field:"tags",name:y.D,render:e=>null!=e&&e.length>0?n.a.createElement(N,null,e.map(((e,t)=>n.a.createElement(r.EuiBadge,{color:"hollow",key:`${e}-${t}`,"data-test-subj":`case-table-column-tags-${t}`},e)))):Object(S.a)(),truncateText:!0},...t?[]:[{align:E.RIGHT_ALIGNMENT,field:"totalAlerts",name:p.d,render:e=>null!=e?A(`${e}`,"case-table-column-alertsCount"):Object(S.a)()}],{align:E.RIGHT_ALIGNMENT,field:"totalComment",name:y.g,render:e=>null!=e?A(`${e}`,"case-table-column-commentCount"):Object(S.a)()},l===d.CaseStatuses.closed?{field:"closedAt",name:y.f,sortable:!0,render:e=>null!=e?n.a.createElement("span",{"data-test-subj":"case-table-column-closedAt"},n.a.createElement(f.a,{value:e})):Object(S.a)()}:{field:"createdAt",name:y.s,sortable:!0,render:e=>null!=e?n.a.createElement("span",{"data-test-subj":"case-table-column-createdAt"},n.a.createElement(f.a,{value:e})):Object(S.a)()},{name:y.k,render:e=>null!=e.id?n.a.createElement(_,{theCase:e,connectors:b}):Object(S.a)()},...u?[]:[{name:y.C,render:e=>{if(null==(null==e?void 0:e.subCases)||0===e.subCases.length)return null==e.status||e.type===d.CaseType.collection?Object(S.a)():n.a.createElement(v.a,{currentStatus:e.status,disabled:!m||o.length>0,onStatusChanged:t=>D({updateKey:"status",updateValue:t,caseId:e.id,version:e.version})});return Object(O.a)(e.subCases).map((({color:e,count:t},a)=>n.a.createElement(r.EuiBadge,{key:a,color:e},t)))}}],...m&&!u?[{name:n.a.createElement(n.a.Fragment,null,y.a,n.a.createElement(w.a,{caseTitle:L.title,isModalVisible:P,onCancel:T,onConfirm:g.bind(null,[L])})),actions:z}]:[]]},R=o.a.span.withConfig({displayName:"IconWrapper",componentId:"sc-178ns9e-3"})(["svg{height:20px !important;position:relative;top:3px;width:20px !important;}"]),_=({theCase:e,connectors:t})=>{var a,s,l,i,o,c,u;const{triggersActionsUi:d}=Object(T.d)().services;if(null==e.externalService)return A(y.m,"case-table-column-external-notPushed");const p=t.find((t=>{var a;return t.id===(null===(a=e.externalService)||void 0===a?void 0:a.connectorId)})),m=null!=e.updatedAt?new Date(e.updatedAt):null,b=null!=(null===(a=e.externalService)||void 0===a?void 0:a.pushedAt)?new Date(null===(s=e.externalService)||void 0===s?void 0:s.pushedAt):null,C=null===b||null!=m&&b.getTime()<(null==m?void 0:m.getTime());return n.a.createElement("p",null,n.a.createElement(R,null,n.a.createElement(r.EuiIcon,{size:"original",title:null===(l=e.externalService)||void 0===l?void 0:l.connectorName,type:Object(x.b)(d,null==p?void 0:p.actionTypeId)})),n.a.createElement(r.EuiLink,{"data-test-subj":"case-table-column-external",title:null===(i=e.externalService)||void 0===i?void 0:i.connectorName,href:null===(o=e.externalService)||void 0===o?void 0:o.externalUrl,target:"_blank","aria-label":y.u(null===(c=e.externalService)||void 0===c?void 0:c.connectorName)},null===(u=e.externalService)||void 0===u?void 0:u.externalTitle),C?A(y.x,"case-table-column-external-requiresUpdate"):A(y.F,"case-table-column-external-upToDate"))},L=r.EuiBasicTable,B=o()(L).withConfig({displayName:"BasicTable",componentId:"sc-mt1wqy-0"})(["thead{display:none;}tbody{.euiTableCellContent{padding:8px !important;}.euiTableRowCell{border:0;}}"]);B.displayName="BasicTable";var U=a(113),D=a(57),z=a(50),M=a(47),H=a(13);const G={countClosedCases:null,countInProgressCases:null,countOpenCases:null,isLoading:!0,isError:!1},$=({refresh:e})=>{const{countOpenCases:t,countInProgressCases:a,countClosedCases:l,isLoading:i,fetchCasesStatus:o}=(()=>{const e=Object(z.a)(),[t,a]=Object(s.useState)(G),n=Object(T.f)(),r=Object(s.useRef)(!1),l=Object(s.useRef)(new AbortController),i=Object(s.useCallback)((async()=>{try{r.current=!1,l.current.abort(),l.current=new AbortController,a({...G,isLoading:!0});const t=await Object(M.f)(l.current.signal,e);r.current||a({...t,isLoading:!1,isError:!1})}catch(e){r.current||("AbortError"!==e.name&&n.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:H.d}),a({countClosedCases:0,countInProgressCases:0,countOpenCases:0,isLoading:!1,isError:!0}))}}),[]);return Object(s.useEffect)((()=>(i(),()=>{r.current=!0,l.current.abort()})),[]),{...t,fetchCasesStatus:i}})();return Object(s.useEffect)((()=>{null!=e&&o()}),[o,e]),n.a.createElement(r.EuiFlexGroup,{responsive:!1},n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(D.a,{dataTestSubj:"openStatsHeader",caseCount:t,caseStatus:d.CaseStatuses.open,isLoading:i})),n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(D.a,{dataTestSubj:"inProgressStatsHeader",caseCount:a,caseStatus:d.CaseStatuses["in-progress"],isLoading:i})),n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(D.a,{dataTestSubj:"closedStatsHeader",caseCount:l,caseStatus:d.CaseStatuses.closed,isLoading:i})))},q=({configureCasesNavigation:{href:e,onClick:t},isDisabled:a,label:l,msgTooltip:i,showToolTip:o,titleTooltip:c})=>{const u=Object(s.useMemo)((()=>n.a.createElement(h.c,{onClick:t,href:e,iconType:"controlsHorizontal",isDisabled:a,"aria-label":l,"data-test-subj":"configure-case-button"},l)),[l,a,t,e]);return o?n.a.createElement(r.EuiToolTip,{position:"top",title:c,content:n.a.createElement("p",null,i),"data-test-subj":"configure-case-tooltip"},u):n.a.createElement(n.a.Fragment,null,u)},V=Object(s.memo)(q),Q=o()(r.EuiFlexGroup).withConfig({displayName:"ButtonFlexGroup",componentId:"sc-1l550c5-0"})(["",""],(({theme:e})=>Object(i.css)(["&{@media only screen and (max-width:","){flex-direction:column;}}"],e.eui.euiBreakpoints.s))),W=({actionsErrors:e,configureCasesNavigation:t,createCaseNavigation:a})=>n.a.createElement(Q,{responsive:!1},n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(V,{configureCasesNavigation:t,label:y.h,isDisabled:!Object(l.isEmpty)(e),showToolTip:!Object(l.isEmpty)(e),msgTooltip:Object(l.isEmpty)(e)?n.a.createElement(n.a.Fragment,null):n.a.createElement(n.a.Fragment,null,e[0].description),titleTooltip:Object(l.isEmpty)(e)?"":e[0].title})),n.a.createElement(r.EuiFlexItem,null,n.a.createElement(h.c,{fill:!0,onClick:a.onClick,href:a.href,iconType:"plusInCircle","data-test-subj":"createNewCaseBtn"},y.i))),K=o()(r.EuiFlexItem).withConfig({displayName:"FlexItemDivider",componentId:"sc-mzjkog-0"})(["",""],(({theme:e})=>Object(i.css)([".euiFlexGroup--gutterMedium > &.euiFlexItem{border-right:",";padding-right:",";margin-right:",";@media only screen and (max-width:","){padding-right:0;border-right:0;margin-right:0;}}"],e.eui.euiBorderThin,e.eui.euiSize,e.eui.euiSize,e.eui.euiBreakpoints.l))),X=({actionsErrors:e,configureCasesNavigation:t,createCaseNavigation:a,refresh:s,showTitle:l=!0,userCanCrud:i})=>n.a.createElement(U.a,{title:l?y.t:"",border:!0},n.a.createElement(r.EuiFlexGroup,{alignItems:"center",gutterSize:"m",wrap:!0,"data-test-subj":"all-cases-header"},i?n.a.createElement(n.a.Fragment,null,n.a.createElement(K,null,n.a.createElement($,{refresh:s})),n.a.createElement(r.EuiFlexItem,null,n.a.createElement(W,{actionsErrors:e,configureCasesNavigation:t,createCaseNavigation:a}))):n.a.createElement(r.EuiFlexItem,null,n.a.createElement($,{refresh:s}))));var Y=a(75);const Z={reporters:[],respReporters:[],isLoading:!0,isError:!1},J=o.a.div.withConfig({displayName:"ScrollableDiv",componentId:"sc-1ob1f1e-0"})(["max-height:250px;overflow:auto;"]),ee=({buttonLabel:e,onSelectedOptionsChanged:t,options:a,optionsEmptyLabel:l,selectedOptions:i})=>{const[o,c]=Object(s.useState)(!1),u=Object(s.useCallback)((()=>c(!o)),[o]),d=Object(s.useCallback)((e=>t(((e,t)=>{const a=t.indexOf(e);return a>=0?[...t.slice(0,a),...t.slice(a+1)]:[...t,e]})(e,i))),[i,t]);return n.a.createElement(r.EuiPopover,{ownFocus:!0,button:n.a.createElement(r.EuiFilterButton,{"data-test-subj":`options-filter-popover-button-${e}`,iconType:"arrowDown",onClick:u,isSelected:o,numFilters:a.length,hasActiveFilters:i.length>0,numActiveFilters:i.length,"aria-label":e},e),isOpen:o,closePopover:u,panelPaddingSize:"none",repositionOnScroll:!0},n.a.createElement(J,null,a.map(((e,t)=>n.a.createElement(r.EuiFilterSelectItem,{checked:i.includes(e)?"on":void 0,"data-test-subj":`options-filter-popover-item-${t}`,key:`${t}-${e}`,onClick:d.bind(null,e)},e)))),0===a.length&&n.a.createElement(r.EuiFlexGroup,{gutterSize:"m",justifyContent:"spaceAround"},n.a.createElement(r.EuiFlexItem,{grow:!0},n.a.createElement(r.EuiPanel,null,n.a.createElement(r.EuiText,null,l)))))};ee.displayName="FilterPopoverComponent";const te=n.a.memo(ee);te.displayName="FilterPopover";const ae=({stats:e,selectedStatus:t,onStatusChanged:a,hiddenStatuses:s=[]})=>{const l=Object.keys(D.c),i=[d.StatusAll,...l].filter((e=>!s.includes(e))).map((t=>({value:t,inputDisplay:n.a.createElement(r.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement("span",null,n.a.createElement(D.b,{type:t}))),t!==d.StatusAll&&n.a.createElement(r.EuiFlexItem,{grow:!1},` (${e[t]})`)),"data-test-subj":`case-status-filter-${t}`})));return n.a.createElement(r.EuiSuperSelect,{options:i,valueOfSelected:t,onChange:a,"data-test-subj":"case-status-filter"})},se=Object(s.memo)(ae),ne=o()(r.EuiFlexItem).withConfig({displayName:"StatusFilterWrapper",componentId:"sc-1lfje6r-0"})(["&&{flex-basis:180px;}"]),re={search:"",reporters:[],status:d.StatusAll,tags:[]},le=({countClosedCases:e,countOpenCases:t,countInProgressCases:a,onFilterChanged:i,initial:o=re,setFilterRefetch:c,hiddenStatuses:u})=>{const[p,m]=Object(s.useState)(o.reporters.map((e=>{var t,a;return null!==(t=null!==(a=e.full_name)&&void 0!==a?a:e.username)&&void 0!==t?t:""}))),[b,C]=Object(s.useState)(o.search),[g,E]=Object(s.useState)(o.tags),{tags:S,fetchTags:f}=Object(Y.a)(),{reporters:h,respReporters:O,fetchReporters:j}=(()=>{const e=Object(z.a)(),[t,a]=Object(s.useState)(Z),n=Object(T.f)(),r=Object(s.useRef)(!1),i=Object(s.useRef)(new AbortController),o=Object(s.useCallback)((async()=>{try{r.current=!1,i.current.abort(),i.current=new AbortController,a({...t,isLoading:!0});const s=await Object(M.g)(i.current.signal,e),n=s.map((e=>{var t;return null==e.full_name||Object(l.isEmpty)(e.full_name)?null!==(t=e.username)&&void 0!==t?t:"":e.full_name})).filter((e=>!Object(l.isEmpty)(e)));r.current||a({reporters:n,respReporters:s,isLoading:!1,isError:!1})}catch(e){r.current||("AbortError"!==e.name&&n.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:H.d}),a({reporters:[],respReporters:[],isLoading:!1,isError:!0}))}}),[e,t,n]);return Object(s.useEffect)((()=>(o(),()=>{r.current=!0,i.current.abort()})),[]),{...t,fetchReporters:o}})(),w=Object(s.useCallback)((()=>{f(),j()}),[j,f]);Object(s.useEffect)((()=>{null!=c&&c(w)}),[w,c]);const v=Object(s.useCallback)((e=>{if(!Object(l.isEqual)(e,p)){m(e);const t=O.filter((t=>e.includes(t.username)||e.includes(t.full_name)));i({reporters:t})}}),[p,O,i]);Object(s.useEffect)((()=>{if(p.length){const e=p.filter((e=>h.includes(e)));v(e)}}),[v,h,p]);const I=Object(s.useCallback)((e=>{Object(l.isEqual)(e,g)||(E(e),i({tags:e}))}),[i,g]);Object(s.useEffect)((()=>{if(g.length){const e=g.filter((e=>S.includes(e)));I(e)}}),[I,g,S]);const x=Object(s.useCallback)((e=>{const t=e.trim();Object(l.isEqual)(t,b)||(C(t),i({search:t}))}),[i,b]),k=Object(s.useCallback)((e=>{i({status:e})}),[i]),F=Object(s.useMemo)((()=>({[d.StatusAll]:null,[d.CaseStatuses.open]:null!=t?t:0,[d.CaseStatuses["in-progress"]]:null!=a?a:0,[d.CaseStatuses.closed]:null!=e?e:0})),[e,a,t]);return n.a.createElement(r.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd"},n.a.createElement(r.EuiFlexItem,null,n.a.createElement(r.EuiFlexGroup,{gutterSize:"s"},n.a.createElement(r.EuiFlexItem,null,n.a.createElement(r.EuiFieldSearch,{"aria-label":y.y,"data-test-subj":"search-cases",fullWidth:!0,incremental:!1,placeholder:y.z,onSearch:x})),n.a.createElement(ne,{grow:!1,"data-test-subj":"status-filter-wrapper"},n.a.createElement(se,{selectedStatus:o.status,onStatusChanged:k,stats:F,hiddenStatuses:u})))),n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(r.EuiFilterGroup,null,n.a.createElement(te,{buttonLabel:y.w,onSelectedOptionsChanged:v,selectedOptions:p,options:h,optionsEmptyLabel:y.q}),n.a.createElement(te,{buttonLabel:y.D,onSelectedOptionsChanged:I,selectedOptions:g,options:S,optionsEmptyLabel:y.r}))))};le.displayName="CasesTableFiltersComponent";const ie=n.a.memo(le);ie.displayName="CasesTableFilters";const oe=o.a.aside.attrs({className:"casesUtilityBar"}).withConfig({displayName:"Bar",componentId:"sc-1504427-0"})(["",""],(({border:e,theme:t})=>Object(i.css)([""," @media only screen and (min-width:","){display:flex;justify-content:space-between;}"],e&&Object(i.css)(["border-bottom:",";padding-bottom:",";"],t.eui.euiBorderThin,t.eui.paddingSizes.s),t.eui.euiBreakpoints.l)));oe.displayName="Bar";const ce=o.a.div.attrs({className:"casesUtilityBar__section"}).withConfig({displayName:"BarSection",componentId:"sc-1504427-1"})(["",""],(({grow:e,theme:t})=>Object(i.css)(["& + &{margin-top:",";}@media only screen and (min-width:","){display:flex;flex-wrap:wrap;}@media only screen and (min-width:","){& + &{margin-top:0;margin-left:",";}}",""],t.eui.euiSizeS,t.eui.euiBreakpoints.m,t.eui.euiBreakpoints.l,t.eui.euiSize,e&&Object(i.css)(["flex:1;"]))));ce.displayName="BarSection";const ue=o.a.div.attrs({className:"casesUtilityBar__group"}).withConfig({displayName:"BarGroup",componentId:"sc-1504427-2"})(["",""],(({grow:e,theme:t})=>Object(i.css)(["align-items:flex-start;display:flex;flex-wrap:wrap;& + &{margin-top:",";}@media only screen and (min-width:","){border-right:",";flex-wrap:nowrap;margin-right:",";padding-right:",";& + &{margin-top:0;}&:last-child{border-right:none;margin-right:0;padding-right:0;}}& > *{margin-right:",";&:last-child{margin-right:0;}}",""],t.eui.euiSizeS,t.eui.euiBreakpoints.m,t.eui.euiBorderThin,t.eui.paddingSizes.m,t.eui.paddingSizes.m,t.eui.euiSize,e&&Object(i.css)(["flex:1;"]))));ue.displayName="BarGroup";const de=o.a.p.attrs({className:"casesUtilityBar__text"}).withConfig({displayName:"BarText",componentId:"sc-1504427-3"})(["",""],(({theme:e})=>Object(i.css)(["color:",";font-size:",";line-height:",";white-space:nowrap;"],e.eui.euiTextSubduedColor,e.eui.euiFontSizeXS,e.eui.euiLineHeight)));de.displayName="BarText";const pe=o.a.div.attrs({className:"casesUtilityBar__action"}).withConfig({displayName:"BarAction",componentId:"sc-1504427-4"})(["",""],(({theme:e})=>Object(i.css)(["font-size:",";line-height:",";"],e.eui.euiFontSizeXS,e.eui.euiLineHeight)));pe.displayName="BarAction";const me=o.a.div.attrs({className:"casesUtilityBar__spacer"}).withConfig({displayName:"BarSpacer",componentId:"sc-1504427-5"})(["",""],(()=>Object(i.css)(["flex:1;"])));me.displayName="BarSpacer";const be=n.a.memo((({border:e,children:t})=>n.a.createElement(oe,{border:e},t)));be.displayName="UtilityBar";var Ce=a(100);const ge=n.a.memo((({children:e,color:t,iconSide:a,iconSize:l,iconType:i,popoverContent:o,disabled:c,ownFocus:u})=>{const[d,p]=Object(s.useState)(!1),m=Object(s.useCallback)((()=>p(!1)),[p]);return n.a.createElement(r.EuiPopover,{ownFocus:u,button:n.a.createElement(Ce.a,{color:t,iconSide:a,iconSize:l,iconType:i,onClick:()=>p(!d),disabled:c},e),closePopover:()=>p(!1),isOpen:d,repositionOnScroll:!0},null==o?void 0:o(m))}));ge.displayName="Popover";const Ee=n.a.memo((({children:e,color:t,dataTestSubj:a,disabled:s,href:r,iconSide:l,iconSize:i,iconType:o,ownFocus:c,onClick:u,popoverContent:d})=>n.a.createElement(pe,{"data-test-subj":a},d?n.a.createElement(ge,{disabled:s,color:t,iconSide:l,iconSize:i,iconType:o,ownFocus:c,popoverContent:d},e):n.a.createElement(Ce.a,{color:t,disabled:s,href:r,iconSide:l,iconSize:i,iconType:o,onClick:u},e))));Ee.displayName="UtilityBarAction";const Se=n.a.memo((({grow:e,children:t})=>n.a.createElement(ue,{grow:e},t)));Se.displayName="UtilityBarGroup";const fe=n.a.memo((({grow:e,children:t})=>n.a.createElement(ce,{grow:e},t)));fe.displayName="UtilityBarSection";n.a.memo((({dataTestSubj:e})=>n.a.createElement(me,{"data-test-subj":e}))).displayName="UtilityBarSpacer";const he=n.a.memo((({children:e,dataTestSubj:t})=>n.a.createElement(de,{"data-test-subj":t},e)));he.displayName="UtilityBarText";const ye=a(1).i18n.translate("xpack.cases.caseTable.bulkActions.deleteSelectedTitle",{defaultMessage:"Delete selected"}),Oe=({caseStatus:e,closePopover:t,deleteCasesAction:a,includeCollections:s,selectedCases:l,updateCaseStatus:i})=>{let o=[];const c=n.a.createElement(r.EuiContextMenuItem,{"data-test-subj":"cases-bulk-open-button",disabled:0===l.length||s,icon:D.c[d.CaseStatuses.open].icon,key:"cases-bulk-open-button",onClick:()=>{t(),i(d.CaseStatuses.open)}},D.c[d.CaseStatuses.open].actions.bulk.title),u=n.a.createElement(r.EuiContextMenuItem,{"data-test-subj":"cases-bulk-in-progress-button",disabled:0===l.length||s,icon:D.c[d.CaseStatuses["in-progress"]].icon,key:"cases-bulk-in-progress-button",onClick:()=>{t(),i(d.CaseStatuses["in-progress"])}},D.c[d.CaseStatuses["in-progress"]].actions.bulk.title),p=n.a.createElement(r.EuiContextMenuItem,{"data-test-subj":"cases-bulk-close-button",disabled:0===l.length||s,icon:D.c[d.CaseStatuses.closed].icon,key:"cases-bulk-close-button",onClick:()=>{t(),i(d.CaseStatuses.closed)}},D.c[d.CaseStatuses.closed].actions.bulk.title);switch(e){case d.CaseStatuses.open:o=[u,p];break;case d.CaseStatuses["in-progress"]:o=[c,p];break;case d.CaseStatuses.closed:o=[c,u]}return[...o,n.a.createElement(r.EuiContextMenuItem,{"data-test-subj":"cases-bulk-delete-button",key:ye,icon:"trash",disabled:0===l.length,onClick:()=>{t(),a(l)}},ye)]},je=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,isUpdated:t.payload};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};case"RESET_IS_UPDATED":return{...e,isUpdated:!1};default:return e}},we=()=>{const[e,t]=Object(s.useReducer)(je,{isLoading:!1,isError:!1,isUpdated:!1}),a=Object(T.f)(),n=Object(s.useRef)(!1),r=Object(s.useRef)(new AbortController),l=Object(s.useCallback)((async(e,s)=>{try{n.current=!1,r.current.abort(),r.current=new AbortController,t({type:"FETCH_INIT"});const l=await Object(M.l)(e,r.current.signal);if(!n.current){const e=Object.keys(l).length,n=l[0].title;t({type:"FETCH_SUCCESS",payload:!0});const r={totalCases:e,caseTitle:1===e?n:""},i="status"===s?((e,t)=>e===d.CaseStatuses.open?H.f(t):e===d.CaseStatuses["in-progress"]?H.e(t):e===d.CaseStatuses.closed?H.a(t):"")(l[0].status,r):"";a.addSuccess(i)}}catch(e){n.current||("AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:H.d}),t({type:"FETCH_FAILURE"}))}}),[]),i=Object(s.useCallback)((()=>{t({type:"RESET_IS_UPDATED"})}),[]),o=Object(s.useCallback)(((e,t)=>{const a=e.map((e=>({status:t,id:e.id,version:e.version})));l(a,"status")}),[]);return Object(s.useEffect)((()=>()=>{n.current=!0,r.current.abort()}),[]),{...e,updateBulkStatus:o,dispatchResetIsUpdated:i}},Te=({data:e,enableBulkActions:t=!1,filterOptions:a,handleIsLoading:l,refreshCases:i,selectedCases:o})=>{var c,u,d;const[p,m]=Object(s.useState)([]),{dispatchResetIsDeleted:b,handleOnDeleteConfirm:C,handleToggleModal:g,isLoading:E,isDeleted:S,isDisplayConfirmDeleteModal:f}=Object(j.a)(),{dispatchResetIsUpdated:h,isLoading:T,isUpdated:v,updateBulkStatus:I}=we();Object(s.useEffect)((()=>{l(E)}),[l,E]),Object(s.useEffect)((()=>{l(T)}),[l,T]),Object(s.useEffect)((()=>{S&&(null!=i&&i(),b()),v&&(null!=i&&i(),h())}),[S,v,i,b,h]);const x=Object(s.useCallback)((e=>{g();const t=e.map((({id:e,title:t,type:a})=>({id:e,title:t,type:a})));m(t)}),[m,g]),k=Object(s.useCallback)((e=>{I(o,e)}),[o,I]),F=Object(s.useCallback)((e=>n.a.createElement(r.EuiContextMenuPanel,{"data-test-subj":"cases-bulk-actions",items:Oe({caseStatus:a.status,closePopover:e,deleteCasesAction:x,selectedCases:o,updateCaseStatus:k,includeCollections:Object(O.b)(o)})})),[o,a.status,x,k]);return n.a.createElement(be,{border:!0},n.a.createElement(fe,null,n.a.createElement(Se,null,n.a.createElement(he,{"data-test-subj":"case-table-case-count"},y.A(null!==(c=e.total)&&void 0!==c?c:0))),n.a.createElement(Se,{"data-test-subj":"case-table-utility-bar-actions"},t&&n.a.createElement(n.a.Fragment,null,n.a.createElement(he,{"data-test-subj":"case-table-selected-case-count"},y.B(o.length)),n.a.createElement(Ee,{"data-test-subj":"case-table-bulk-actions",iconSide:"right",iconType:"arrowDown",popoverContent:F},y.c)),n.a.createElement(Ee,{iconSide:"left",iconType:"refresh",onClick:i},y.v))),n.a.createElement(w.a,{caseTitle:null!==(u=null===(d=p[0])||void 0===d?void 0:d.title)&&void 0!==u?u:"",isModalVisible:f,caseQuantity:p.length,onCancel:g,onConfirm:C.bind(null,p)}))},ve=r.EuiBasicTable,Ie=o()(ve).withConfig({displayName:"BasicTable",componentId:"sc-r0db03-0"})(["",""],(({theme:e})=>`\n    .euiTableRow-isExpandedRow.euiTableRow-isSelectable .euiTableCellContent {\n      padding: 8px 0 8px 32px;\n    }\n\n    &.isSelectorView .euiTableRow.isDisabled {\n      cursor: not-allowed;\n      background-color: ${e.eui.euiTableHoverClickableColor};\n    }\n\n    &.isSelectorView .euiTableRow.euiTableRow-isExpandedRow .euiTableRowCell,\n    &.isSelectorView .euiTableRow.euiTableRow-isExpandedRow:hover {\n      background-color: transparent;\n    }\n\n    &.isSelectorView .euiTableRow.euiTableRow-isExpandedRow {\n      .subCase:hover {\n        background-color: ${e.eui.euiTableHoverClickableColor};\n      }\n    }\n  `)),xe=o.a.div.withConfig({displayName:"Div",componentId:"sc-r0db03-1"})(["margin-top:",";"],(({theme:e})=>e.eui.paddingSizes.m)),ke=({columns:e,createCaseNavigation:t,data:a,filterOptions:s,goToCreateCase:l,handleIsLoading:i,isCasesLoading:o,isCommentUpdating:c,isDataEmpty:d,isSelectorView:p,itemIdToExpandedRowMap:m,onChange:b,pagination:C,refreshCases:g,selectedCases:E,selection:S,showActions:f,sorting:O,tableRef:j,tableRowProps:w,userCanCrud:T})=>o&&d?n.a.createElement(xe,null,n.a.createElement(r.EuiLoadingContent,{"data-test-subj":"initialLoadingPanelAllCases",lines:10})):n.a.createElement(xe,null,n.a.createElement(Te,{data:a,enableBulkActions:f,filterOptions:s,handleIsLoading:i,selectedCases:E,refreshCases:g}),n.a.createElement(Ie,{className:u()({isSelectorView:p}),columns:e,"data-test-subj":"cases-table",isSelectable:f,itemId:"id",items:a.cases,itemIdToExpandedRowMap:m,loading:c,noItemsMessage:n.a.createElement(r.EuiEmptyPrompt,{title:n.a.createElement("h3",null,y.n),titleSize:"xs",body:T?y.o:y.p,actions:T&&n.a.createElement(h.c,{isDisabled:!T,fill:!0,size:"s",onClick:l,href:t.href,iconType:"plusInCircle","data-test-subj":"cases-table-add-case"},y.b)}),onChange:b,pagination:C,ref:j,rowProps:w,selection:f?S:void 0,sorting:O}));var Fe=a(65);const Ne=o()(r.EuiProgress).withConfig({displayName:"ProgressLoader",componentId:"sc-3ctaem-0"})(["",""],(({$isShow:e})=>e?Object(i.css)(["top:2px;border-radius:",";z-index:",";"],(({theme:e})=>e.eui.euiBorderRadius),(({theme:e})=>e.eui.euiZHeader)):"\n      display: none;\n    ")),Ae=n.a.memo((({alertData:e,caseDetailsNavigation:t,configureCasesNavigation:a,createCaseNavigation:r,disableAlerts:i,hiddenStatuses:o=[],isSelectorView:c,onRowClick:E,showTitle:S,updateCase:f,userCanCrud:h})=>{const{actionLicense:y}=Object(m.a)(),O=Object(l.head)(Object(l.difference)(d.caseStatuses,o)),j=!Object(l.isEmpty)(o)&&O?{status:O}:{},{data:w,dispatchUpdateCaseProperty:T,filterOptions:v,loading:I,queryParams:x,selectedCases:k,refetchCases:F,setFilters:N,setQueryParams:A,setSelectedCases:R}=Object(b.c)({initialFilterOptions:j}),{postComment:_,isLoading:L}=Object(C.a)(),{connectors:U}=Object(Fe.a)({toastPermissionsErrors:!1}),D=Object(s.useMemo)((()=>({sort:{field:x.sortField,direction:x.sortOrder}})),[x.sortField,x.sortOrder]),z=Object(s.useRef)(),M=Object(s.useRef)(),H=Object(s.useCallback)((e=>{z.current=e}),[z]),[G,$]=Object(s.useState)(0),[q,V]=Object(s.useState)(!1),Q=Object(s.useCallback)(((e=!0)=>{e&&F(),$((e=>e+1)),R([]),null!=z.current&&z.current()}),[z,F,R]),{onClick:W}=r,K=Object(s.useCallback)((e=>{e.preventDefault(),c&&null!=E?E():W&&W(e)}),[c,W,E]),Y=Object(s.useMemo)((()=>Object(g.a)(y)),[y]),Z=Object(s.useCallback)((({page:e,sort:t})=>{let a=x;var s;t&&(a={...a,sortField:(s=t.field,s===d.SortFieldCase.closedAt?d.SortFieldCase.closedAt:d.SortFieldCase.createdAt),sortOrder:t.direction}),e&&(a={...a,page:e.index+1,perPage:e.size}),A(a),Q(!1)}),[x,Q,A]),J=Object(s.useCallback)((e=>{var t;e.status&&e.status===d.CaseStatuses.closed?A({sortField:d.SortFieldCase.closedAt}):(e.status&&e.status===d.CaseStatuses.open||e.status&&e.status===d.CaseStatuses["in-progress"])&&A({sortField:d.SortFieldCase.createdAt}),R([]),null===(t=M.current)||void 0===t||t.setSelection([]),N(e),Q(!1)}),[R,N,Q,A]),ee=h&&!c,te=P({caseDetailsNavigation:t,disableAlerts:i,dispatchUpdateCaseProperty:T,filterStatus:v.status,handleIsLoading:V,isLoadingCases:I,refreshCases:Q,isSelectorView:!!c,userCanCrud:h,connectors:U}),ae=Object(s.useMemo)((()=>(({data:e,columns:t,onSubCaseClick:a})=>{if(null==e)return{};const s=e=>({...a?{onClick:()=>a(e)}:{},className:"subCase"});return e.reduce(((e,a)=>{if(null!=a.subCases){const r=a.subCases.map(((e,t)=>({...e,caseParentId:a.id,title:`${a.title} ${t+1}`,associationType:d.AssociationType.subCase})));return{...e,[a.id]:n.a.createElement(B,{columns:t,"data-test-subj":`sub-cases-table-${a.id}`,itemId:"id",items:r,rowProps:s})}}return e}),{})})({columns:te,data:w.cases,onSubCaseClick:E})),[w.cases,te,E]),se=Object(s.useMemo)((()=>({pageIndex:x.page-1,pageSize:x.perPage,totalItemCount:w.total,pageSizeOptions:[5,10,15,20,25]})),[w,x]),ne=Object(s.useMemo)((()=>({onSelectionChange:R,selectableMessage:e=>e?"":p.N,initialSelected:k})),[k,R]),re=Object(s.useMemo)((()=>I.indexOf("cases")>-1),[I]),le=Object(s.useMemo)((()=>0===w.total),[w]),oe=Object(s.useCallback)((t=>{const a=Object(l.memoize)((async()=>{null!=e&&await _({caseId:t.id,data:{type:d.CommentType.alert,...e},updateCase:f}),E&&E(t)}));return{"data-test-subj":`cases-table-row-${t.id}`,className:u()({isDisabled:t.type===d.CaseType.collection}),...c&&t.type!==d.CaseType.collection?{onClick:a}:{}}}),[c,e,E,_,f]);return n.a.createElement(n.a.Fragment,null,null!=a&&n.a.createElement(X,{actionsErrors:Y,createCaseNavigation:r,configureCasesNavigation:a,refresh:G,showTitle:S,userCanCrud:h}),n.a.createElement(Ne,{size:"xs",color:"accent",className:"essentialAnimation",$isShow:(re||q||L)&&!le}),n.a.createElement(ie,{countClosedCases:w.countClosedCases,countOpenCases:w.countOpenCases,countInProgressCases:w.countInProgressCases,onFilterChanged:J,initial:{search:v.search,reporters:v.reporters,tags:v.tags,status:v.status},setFilterRefetch:H,hiddenStatuses:o}),n.a.createElement(ke,{columns:te,createCaseNavigation:r,data:w,filterOptions:v,goToCreateCase:K,handleIsLoading:V,isCasesLoading:re,isCommentUpdating:L,isDataEmpty:le,isSelectorView:c,itemIdToExpandedRowMap:ae,onChange:Z,pagination:se,refreshCases:Q,selectedCases:k,selection:ne,showActions:ee,sorting:D,tableRef:M,tableRowProps:oe,userCanCrud:h}))}));Ae.displayName="AllCasesGeneric"},70:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return b}));var s=a(2);var n=a(54),r=a(20),l=a(13),i=a(47),o=a(50);const c=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isError:!1,loading:[...e.loading.filter((e=>e!==t.payload)),t.payload]};case"FETCH_UPDATE_CASE_SUCCESS":return{...e,loading:e.loading.filter((e=>"caseUpdate"!==e))};case"FETCH_CASES_SUCCESS":return{...e,data:t.payload,isError:!1,loading:e.loading.filter((e=>"cases"!==e))};case"FETCH_FAILURE":return{...e,isError:!0,loading:e.loading.filter((e=>e!==t.payload))};case"UPDATE_FILTER_OPTIONS":return{...e,filterOptions:{...e.filterOptions,...t.payload}};case"UPDATE_QUERY_PARAMS":return{...e,queryParams:{...e.queryParams,...t.payload}};case"UPDATE_TABLE_SELECTIONS":return{...e,selectedCases:t.payload};default:return e}},u={search:"",reporters:[],status:n.b,tags:[],onlyCollectionType:!1},d={page:1,perPage:5,sortField:n.a.createdAt,sortOrder:"desc"},p={cases:[],countClosedCases:null,countInProgressCases:null,countOpenCases:null,page:0,perPage:0,total:0},m={},b=(e={})=>{const t=Object(o.a)(),{initialQueryParams:a=m,initialFilterOptions:n=m}=e,[b,C]=Object(s.useReducer)(c,{data:p,filterOptions:{...u,...n},isError:!1,loading:[],queryParams:{...d,...a},selectedCases:[]}),g=Object(r.f)(),E=Object(s.useRef)(!1),S=Object(s.useRef)(!1),f=Object(s.useRef)(new AbortController),h=Object(s.useRef)(new AbortController),y=Object(s.useCallback)((e=>{C({type:"UPDATE_TABLE_SELECTIONS",payload:e})}),[]),O=Object(s.useCallback)((e=>{C({type:"UPDATE_QUERY_PARAMS",payload:e})}),[]),j=Object(s.useCallback)((e=>{C({type:"UPDATE_FILTER_OPTIONS",payload:e})}),[]),w=Object(s.useCallback)((async(e,a)=>{try{E.current=!1,f.current.abort(),f.current=new AbortController,C({type:"FETCH_INIT",payload:"cases"});const s=await Object(i.e)({filterOptions:{...e,owner:t},queryParams:a,signal:f.current.signal});E.current||C({type:"FETCH_CASES_SUCCESS",payload:s})}catch(e){E.current||("AbortError"!==e.name&&g.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:l.d}),C({type:"FETCH_FAILURE",payload:"cases"}))}}),[t,g]),T=Object(s.useCallback)((async({updateKey:e,updateValue:t,caseId:a,refetchCasesStatus:s,version:n})=>{try{S.current=!1,h.current.abort(),h.current=new AbortController,C({type:"FETCH_INIT",payload:"caseUpdate"}),await Object(i.k)(a,{[e]:t},null!=n?n:"",h.current.signal),S.current||(C({type:"FETCH_UPDATE_CASE_SUCCESS"}),w(b.filterOptions,b.queryParams),s())}catch(e){S.current||("AbortError"!==e.name&&g.addError(e,{title:l.d}),C({type:"FETCH_FAILURE",payload:"caseUpdate"}))}}),[b.filterOptions,b.queryParams]),v=Object(s.useCallback)((()=>{w(b.filterOptions,b.queryParams)}),[b.filterOptions,b.queryParams]);return Object(s.useEffect)((()=>(w(b.filterOptions,b.queryParams),()=>{E.current=!0,S.current=!0,f.current.abort(),h.current.abort()})),[b.queryParams,b.filterOptions]),{...b,dispatchUpdateCaseProperty:T,refetchCases:v,setFilters:j,setQueryParams:O,setSelectedCases:y}}},73:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var s=a(21),n=a(3),r=a(57);const l=e=>e.length>0&&e.some((e=>e.type===n.CaseType.collection)),i=e=>void 0!==e.caseParentId&&e.associationType===n.AssociationType.subCase,o=e=>[{color:r.c[n.CaseStatuses.open].color,count:Object(s.filter)({status:n.CaseStatuses.open},e).length,name:n.CaseStatuses.open},{color:r.c[n.CaseStatuses["in-progress"]].color,count:Object(s.filter)({status:n.CaseStatuses["in-progress"]},e).length,name:n.CaseStatuses["in-progress"]},{color:r.c[n.CaseStatuses.closed].color,count:Object(s.filter)({status:n.CaseStatuses.closed},e).length,name:n.CaseStatuses.closed}]}}]);