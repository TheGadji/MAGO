/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[5],{105:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return f})),a.d(t,"g",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"f",(function(){return b}));var n=a(70),i=a(96),r=a(43),s=a(132),o=a(140);const l=10,c=new Set([r.ES_FIELD_TYPES.UNSIGNED_LONG,r.ES_FIELD_TYPES.LONG,r.ES_FIELD_TYPES.INTEGER,r.ES_FIELD_TYPES.SHORT,r.ES_FIELD_TYPES.BYTE]),u=new Set([r.ES_FIELD_TYPES.DOUBLE,r.ES_FIELD_TYPES.FLOAT,r.ES_FIELD_TYPES.HALF_FLOAT,r.ES_FIELD_TYPES.SCALED_FLOAT]),d="ml__id_copy",f="ml__incremental_id",p=e=>{var t;const{fields:a}=s.a,n=null===(t=a.find((t=>t.name===e)))||void 0===t?void 0:t.type;let i=!1;if(void 0!==n&&n===r.ES_FIELD_TYPES.KEYWORD){const t=s.a.getFieldById(e.replace(/\.keyword$/,""));i=null!==t&&t.type===r.ES_FIELD_TYPES.TEXT}else if(void 0!==n&&n===r.ES_FIELD_TYPES.TEXT){const t=s.a.getFieldById(`${e}.keyword`);i=null!==t&&t.type===r.ES_FIELD_TYPES.KEYWORD}return i},m=(e,t,a)=>{const n=a.dest.results_field;if(Object(i.g)(a.analysis)){if(e===`${n}.${o.c}`)return-1;if(t===`${n}.${o.c}`)return 1}if(Object(i.f)(a.analysis)||Object(i.h)(a.analysis)){const r=Object(i.c)(a.analysis),s=Object(i.d)(n,a.analysis,!0);if(e===`${n}.is_training`)return-1;if(t===`${n}.is_training`)return 1;if(e===s)return-1;if(t===s)return 1;if(e===r||e===r.replace(/\.keyword$/,""))return-1;if(t===r||t===r.replace(/\.keyword$/,""))return 1;if(e===`${n}.prediction_probability`)return-1;if(t===`${n}.prediction_probability`)return 1}const r=typeof e,s=typeof t,l=e.split("."),c=l[0],u=t.split("."),d=u[0];return c===n&&l.length>1&&d!==n?(l.shift(),l.shift(),l.join(".")===t?1:l.join(".").localeCompare(t)):d===n&&u.length>1&&c!==n?(u.shift(),u.shift(),u.join(".")===e?-1:e.localeCompare(u.join("."))):"string"!==r&&"string"===s?1:"string"===r&&"string"!==s?-1:e.localeCompare(t)},b=(e,t,a)=>{const l={selectedFields:[],docFields:[]};if(0===e.length)return l;const c=t.dest.results_field,u=[];let d,f;if(Object(i.g)(t.analysis)&&(e=t.analysis.outlier_detection.compute_feature_influence?e.filter((e=>!e.name.includes(`${c}.${o.b}.`))):e.filter((e=>!e.name.includes(`${c}.${o.b}`))),!0===a&&u.push({id:`${c}.${o.c}`,name:`${c}.${o.c}`,type:r.KBN_FIELD_TYPES.NUMBER})),Object(i.f)(t.analysis)||Object(i.h)(t.analysis)){var p;const l=Object(i.c)(t.analysis);d=null===(p=s.a.getFieldById(l))||void 0===p?void 0:p.type;const m=Object(i.e)(t.analysis),b=Object(n.q)(t.analysis),g=Object(n.p)(t.analysis),h=`${l}_prediction`;f=`${c}.${m||h}`,e=0===(null!=b?b:0)?e.filter((e=>!e.name.includes(`${c}.${o.a}`))):e.filter((e=>!e.name.includes(`${c}.${o.a}.`))),e=0===(null!=g?g:0)?e.filter((e=>!e.name.includes(`${c}.${o.d}`))):e.filter((e=>!e.name.includes(`${c}.${o.d}.`))),!0===a&&u.push({id:`${c}.is_training`,name:`${c}.is_training`,type:r.ES_FIELD_TYPES.BOOLEAN},{id:f,name:f,type:d})}u.push(...e),u.sort((({name:e},{name:a})=>m(e,a,t)));let b=u.filter((e=>e.name===f||!e.name.includes(".keyword")));return b.length>8&&(b=b.slice(0,8)),{selectedFields:b,docFields:u,depVarType:d}}},115:function(e,t,a){"use strict";a.d(t,"e",(function(){return n.i})),a.d(t,"c",(function(){return n.g})),a.d(t,"d",(function(){return n.h})),a.d(t,"g",(function(){return n.k})),a.d(t,"b",(function(){return n.f})),a.d(t,"i",(function(){return n.n})),a.d(t,"j",(function(){return n.o})),a.d(t,"l",(function(){return n.p})),a.d(t,"h",(function(){return n.l})),a.d(t,"f",(function(){return O})),a.d(t,"k",(function(){return A})),a.d(t,"a",(function(){return pe}));var n=a(93),i=a(21),r=a.n(i),s=a(23),o=a(15),l=a.n(o),c=a(135),u=a.n(c),d=a(40),f=a(2),p=a(43);const m=e=>"object"==typeof e&&e.hasOwnProperty("data")&&e.hasOwnProperty("id")&&e.hasOwnProperty("interval")&&e.hasOwnProperty("stats")&&e.hasOwnProperty("type")&&"numeric"===e.type,b=e=>"object"==typeof e&&e.hasOwnProperty("data")&&e.hasOwnProperty("cardinality")&&e.hasOwnProperty("id")&&e.hasOwnProperty("type")&&("ordinal"===e.type||"boolean"===e.type);var g=a(11);const h=new s.BehaviorSubject(null),_=Object(d.euiPaletteColorBlind)()[0],y=Object(d.euiPaletteColorBlind)({rotations:2})[10],O=e=>{if(e===n.c)return;let t;switch(e){case"datetime":t=p.KBN_FIELD_TYPES.DATE;break;case"numeric":t=p.KBN_FIELD_TYPES.NUMBER;break;case"boolean":t=p.KBN_FIELD_TYPES.BOOLEAN;break;case"json":t=p.KBN_FIELD_TYPES.OBJECT;break;default:t=p.KBN_FIELD_TYPES.STRING}return t},j=(e,t=20)=>{if("unsupported"===e.type)return f.i18n.translate("xpack.ml.dataGridChart.histogramNotAvailable",{defaultMessage:"Chart not supported."});if(0===e.data.length)return f.i18n.translate("xpack.ml.dataGridChart.notEnoughData",{defaultMessage:"0 documents contain field."});if("boolean"===e.type)return Object(g.jsx)("table",{className:"mlDataGridChart__legendBoolean"},Object(g.jsx)("tbody",null,Object(g.jsx)("tr",null,void 0!==e.data[0]&&Object(g.jsx)("td",null,e.data[0].key_as_string),void 0!==e.data[1]&&Object(g.jsx)("td",null,e.data[1].key_as_string))));if(b(e)&&e.cardinality<=t)return f.i18n.translate("xpack.ml.dataGridChart.singleCategoryLegend",{defaultMessage:"{cardinality, plural, one {# category} other {# categories}}",values:{cardinality:e.cardinality}});if(b(e)&&e.cardinality>t)return f.i18n.translate("xpack.ml.dataGridChart.topCategoriesLegend",{defaultMessage:"top {maxChartColumns} of {cardinality} categories",values:{cardinality:e.cardinality,maxChartColumns:t}});if(m(e)){const t=Math.round(100*e.stats[0])/100,a=Math.round(100*e.stats[1])/100;return t!==a?`${t} - ${a}`:""+t}return""},E=(e,t,a)=>{const n=O(t.schema),i=u()(h),s=(e=>{switch(e){case p.KBN_FIELD_TYPES.BOOLEAN:case p.KBN_FIELD_TYPES.IP:case p.KBN_FIELD_TYPES.STRING:return"ordinal";case p.KBN_FIELD_TYPES.DATE:return"time";case p.KBN_FIELD_TYPES.NUMBER:return"linear"}})(n),o=a=>null==i||b(e)&&"ordinal"===s&&i._source[t.id]===a.key||m(e)&&"linear"===s&&i._source[t.id]>=+a.key&&i._source[t.id]<+a.key+e.interval||m(e)&&"time"===s&&1e3*r()(i._source[t.id]).unix()>=+a.key&&1e3*r()(i._source[t.id]).unix()<+a.key+e.interval?_:y;let l=[];return b(e)?l=e.data.map((e=>{var t;return{...e,key_as_string:null!==(t=e.key_as_string)&&void 0!==t?t:e.key,color:o(e)}})):m(e)&&(l=e.data.map((e=>({...e,key_as_string:e.key_as_string||e.key,color:o(e)})))),{data:l,legendText:j(e,a),xScaleType:s}};var x=a(12),v=a(75),D=a(58),S=a.n(D),T=a(44);a(374);const C={background:{color:"transparent"},chartMargins:{left:0,right:0,top:0,bottom:1},chartPaddings:{left:0,right:0,top:0,bottom:0},scales:{barsPadding:.1}},I=({chartData:e,columnType:t,dataTestSubj:a,hideLabel:n,maxChartColumns:i})=>{const{data:r,legendText:s,xScaleType:o}=E(e,t,i);return Object(g.jsx)("div",{"data-test-subj":a},!("object"==typeof(l=e)&&l.hasOwnProperty("type")&&"unsupported"===l.type)&&r.length>0&&Object(g.jsx)("div",{className:"mlDataGridChart__histogram","data-test-subj":`${a}-histogram`},Object(g.jsx)(T.Chart,null,Object(g.jsx)(T.Settings,{theme:C}),Object(g.jsx)(T.BarSeries,{id:"histogram",name:"count",xScaleType:o,yScaleType:"linear",xAccessor:"key_as_string",yAccessors:["doc_count"],styleAccessor:e=>e.datum.color,data:r}))),Object(g.jsx)("div",{className:S()("mlDataGridChart__legend",{"mlDataGridChart__legend--numeric":"number"===t.schema}),"data-test-subj":`${a}-legend`},s),!n&&Object(g.jsx)("div",{"data-test-subj":`${a}-id`},t.id));var l},A=(e,t=5,a=n.b,i)=>{const r={pageIndex:0,pageSize:t},[s,l]=Object(o.useState)(!1),[c,u]=Object(o.useState)(""),[d,f]=Object(o.useState)(""),[p,m]=Object(o.useState)(v.b.UNUSED),[b,h]=Object(o.useState)(0),[_,y]=Object(o.useState)(void 0),[O,j]=Object(o.useState)([]),[E,D]=Object(o.useState)([]),[S,T]=Object(o.useState)(r),[C,A]=Object(o.useState)([]),[P,F]=Object(o.useState)(void 0),w=Object(o.useCallback)((e=>{T((t=>({pageIndex:Math.floor(t.pageSize*t.pageIndex/e),pageSize:e})))}),[]),N=Object(o.useCallback)((e=>T((t=>({...t,pageIndex:e})))),[]),[L,k]=Object(o.useState)([]),M=e.map((e=>e.id)),R=(void 0!==i?M.filter(i):M).splice(0,a);Object(o.useEffect)((()=>{k(R)}),[R.join()]);const[G,B]=Object(o.useState)([]),$=Object(o.useCallback)((t=>{const a=t.reduce(((t,a)=>{const n=e.find((e=>e.id===a.id));return"json"===(null==n?void 0:n.schema)&&t.push(a.id),t}),[]);B(a),0===a.length&&A(t)}),[e]),Y=Object(o.useMemo)((()=>e.map(((e,t)=>{const a=O.find((t=>t.id===e.id));return{...e,display:void 0!==a&&!0===P?Object(g.jsx)(I,{chartData:a,columnType:e,dataTestSubj:`mlDataGridChart-${e.id}`}):void 0}})).sort(((e,t)=>-1===L.indexOf(e.id)&&L.indexOf(t.id)>-1?1:-1===L.indexOf(t.id)&&L.indexOf(e.id)>-1?-1:-1===L.indexOf(e.id)&&-1===L.indexOf(t.id)?e.id.localeCompare(t.id):L.indexOf(e.id)-L.indexOf(t.id)))),[e,O,P,JSON.stringify(L)]);return Object(o.useEffect)((()=>{void 0===P&&b>0&&void 0!==_&&F(b<=n.a&&_!==x.a.GTE)}),[P,b,_]),{ccsWarning:s,chartsVisible:P,chartsButtonVisible:!0,columnsWithCharts:Y,errorMessage:d,invalidSortingColumnns:G,noDataMessage:c,onChangeItemsPerPage:w,onChangePage:N,onSort:$,pagination:S,resetPagination:()=>T(r),rowCount:b,rowCountRelation:_,setColumnCharts:j,setCcsWarning:l,setErrorMessage:f,setNoDataMessage:u,setPagination:T,setRowCount:h,setRowCountRelation:y,setSortingColumns:A,setStatus:m,setTableItems:D,setVisibleColumns:k,sortingColumns:C,status:p,tableItems:E,toggleChartVisibility:()=>{void 0!==P&&F(!P)},visibleColumns:L}};var P=a(8),F=a(41),w=a(202),N=a(106),L=a.n(N),k=a(167);const M="feature_name",R="importance",G=1e-5,B=f.i18n.translate("xpack.ml.dataframe.analytics.decisionPathFeatureOtherTitle",{defaultMessage:"other"}),$=e=>Array.isArray(e)&&e.length>0&&3===e[0].length,Y=e=>null==e?"":"boolean"==typeof e?e?"True":"False":"number"==typeof e?e.toString():e,H=({baseline:e,featureImportance:t,predictedValue:a,predictedProbability:n})=>({decisionPathData:Object(o.useMemo)((()=>{if(void 0!==e)return Object(k.c)(e)?z({baseline:e.baseline,featureImportance:t,predictedValue:a}):Object(k.a)(e)?K({baselines:e.classes,featureImportance:t,currentClass:a,predictedProbability:n}):void 0}),[e,t,a])}),z=({baseline:e,featureImportance:t,predictedValue:a})=>{const n=t.map((e=>({...e,absImportance:Math.abs(e.importance)})));if(e&&void 0!==a&&Number.isFinite(a)){const t=a-n.reduce(((e,t)=>e+t.importance),0)-e;n.push({[M]:f.i18n.translate("xpack.ml.dataframe.analytics.decisionPathFeatureBaselineTitle",{defaultMessage:"baseline"}),[R]:e,absImportance:-1}),Math.abs(t)>G&&n.push({[M]:B,[R]:t,absImportance:0})}const i=n.filter((e=>void 0!==e)),r=i.sort(((e,t)=>t.absImportance-e.absImportance)).map((e=>[e.feature_name,e.importance,NaN]));let s=0;for(let e=i.length-1;e>=0;e--)s+=r[e][1],r[e][2]=s;return r},U=({predictedProbability:e,decisionPlotData:t})=>{if(e&&t.length>0){const a=e-t[0][2];Math.abs(a)>G&&(t.forEach((e=>e[2]=e[2]+a)),t.push([B,a,t[t.length-1][2]-a]))}return t},V=({baselines:e,featureImportance:t})=>{let a=0;for(let n=0;n<e.length;n++){let i=0;for(let a=0;a<t.length;a++){const r=t[a],s=Array.isArray(r.classes)?r.classes.find((t=>Y(t.class_name)===Y(e[n].class_name))):r;s&&void 0!==s.importance&&"number"==typeof s.importance&&(i+=s.importance)}a+=Math.exp(e[n].baseline+i)}return a},K=({baselines:e,featureImportance:t,currentClass:a,predictedProbability:n})=>{if(void 0===a||!(Array.isArray(e)&&e.length>=2))return[];const i=t.map((e=>{const t=Array.isArray(e.classes)?e.classes.find((e=>Y(e.class_name)===Y(a))):e;if(t&&"number"==typeof t.importance)return{[M]:e.feature_name,[R]:t.importance,absImportance:Math.abs(t.importance)}})),r=e.find((e=>Y(e.class_name)===Y(a))),s=null!=r&&r.baseline?null==r?void 0:r.baseline:0,o=i.filter((e=>void 0!==e)).sort(((e,t)=>t.absImportance-e.absImportance)).map((e=>[e.feature_name,e.importance,NaN]));return 2===e.length?(({decisionPlotData:e,startingBaseline:t,predictedProbability:a})=>{const n=e;let i=t;for(let e=n.length-1;e>=0;e--){i+=n[e][1];const t=Math.exp(i)/(Math.exp(i)+1);n[e][2]=t}return U({predictedProbability:a,decisionPlotData:n})})({startingBaseline:s,decisionPlotData:o,predictedProbability:n}):(({baselines:e,decisionPlotData:t,startingBaseline:a,featureImportance:n,predictedProbability:i})=>{const r=V({baselines:e,featureImportance:n}),s=a;let o=0;for(let e=t.length-1;e>=0;e--){o+=t[e][1];const a=Math.exp(s+o);t[e][2]=a/r}return U({predictedProbability:i,decisionPlotData:t})})({baselines:e,decisionPlotData:o,startingBaseline:s,featureImportance:t,predictedProbability:n})};var J=a(51),q=a(125);const{euiColorFullShade:W,euiColorMediumShade:Q}=J.euiLightVars,X={line:{strokeWidth:1,stroke:W,opacity:.75},details:{fontFamily:"Arial",fontSize:10,fill:Q,padding:0}},Z={axes:{axisLine:{stroke:Q},tickLabel:{fontSize:10,fill:Q},tickLine:{stroke:Q},gridLine:{horizontal:{dash:[1,2]},vertical:{strokeWidth:0}}}},ee=Object(g.jsx)(d.EuiIcon,{type:"dot",size:"m"}),te=({decisionPathData:e,predictionFieldName:t,minDomain:a,maxDomain:n,baseline:i})=>{const r=Object(o.useMemo)((()=>i&&Object(k.c)(i)?[{dataValue:i.baseline,header:Object(q.a)(i.baseline,"").toString(),details:f.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathBaselineText",{defaultMessage:"baseline (average of predictions for all data points in the training data set)"})}]:void 0),[i]),s=r?f.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathLinePredictionTitle",{defaultMessage:"Prediction"}):f.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathLinePredictionProbabilityTitle",{defaultMessage:"Prediction probability"}),l=Object(o.useCallback)((e=>Object(q.a)(e,"").toString()),[]);return Object(g.jsx)("div",{"data-test-subj":"mlDFADecisionPathChart"},Object(g.jsx)(T.Chart,{size:{height:125+10*e.length}},Object(g.jsx)(T.Settings,{theme:Z,rotation:90}),r&&Object(g.jsx)(T.LineAnnotation,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathBaseline",domainType:T.AnnotationDomainType.YDomain,dataValues:r,style:X,marker:ee}),Object(g.jsx)(T.Axis,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathXAxis",tickFormat:l,title:f.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathXAxisTitle",{defaultMessage:"{xAxisLabel} for '{predictionFieldName}'",values:{predictionFieldName:t,xAxisLabel:s}}),showGridLines:!1,position:T.Position.Top,showOverlappingTicks:!0,domain:a&&n?{min:a,max:n}:void 0}),Object(g.jsx)(T.Axis,{showGridLines:!0,id:"left",position:T.Position.Left}),Object(g.jsx)(T.LineSeries,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathLine",name:s,xScaleType:T.ScaleType.Ordinal,yScaleType:T.ScaleType.Linear,xAccessor:0,yAccessors:[2],data:e})))},ae=()=>Object(g.jsx)(d.EuiCallOut,{color:"warning"},Object(g.jsx)(F.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.regressionDecisionPathDataMissingCallout",defaultMessage:"No decision path data available."})),ne=({baseline:e,featureImportance:t,predictedValue:a,predictionFieldName:n})=>{const{decisionPathData:i}=H({baseline:e,featureImportance:t,predictedValue:a}),r=Object(o.useMemo)((()=>{let t,a;if(i&&$(i)){const[n,r]=L.a.extent(i,(e=>e[2]));t=r,a=n;const s=.1*Math.abs(t-a);t=("number"==typeof e?Math.max(t,e):t)+s,a=("number"==typeof e?Math.min(a,e):a)-s}return{maxDomain:t,minDomain:a}}),[i,e]);return i?Object(g.jsx)(l.a.Fragment,null,void 0===e&&Object(g.jsx)(d.EuiCallOut,{size:"s",heading:"p",title:Object(g.jsx)(F.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.missingBaselineCallout",defaultMessage:"Unable to calculate baseline value, which might result in a shifted decision path."}),color:"warning",iconType:"alert"}),Object(g.jsx)(te,{decisionPathData:i,predictionFieldName:n,minDomain:r.minDomain,maxDomain:r.maxDomain,baseline:e})):Object(g.jsx)(ae,null)},ie=({featureImportance:e})=>Object(g.jsx)(d.EuiCodeBlock,{isCopyable:!0},JSON.stringify(e)),re=({featureImportance:e,predictedValue:t,topClasses:a,predictionFieldName:n,predictedProbability:i,baseline:r})=>{const[s,c]=Object(o.useState)(Y(a[0].class_name)),{decisionPathData:u}=H({baseline:r,featureImportance:e,predictedValue:s,predictedProbability:i}),p=Object(o.useMemo)((()=>{const e=Y(t);return Array.isArray(a)?a.map((t=>{const a=Y(t.class_name);return{value:a,inputDisplay:a===e?Object(g.jsx)(d.EuiHealth,{color:"success",style:{lineHeight:"inherit"}},a):a}})):void 0}),[a,t]),m=Object(o.useMemo)((()=>{let e,t;if(u&&$(u)){const[a,n]=L.a.extent(u,(e=>e[2])),i=.1*Math.abs(n-a);e=n+i,t=a-i}return{maxDomain:e,minDomain:t}}),[u]);return u?Object(g.jsx)(l.a.Fragment,null,Object(g.jsx)(d.EuiSpacer,{size:"xs"}),Object(g.jsx)(d.EuiTitle,{size:"xxxs"},Object(g.jsx)("span",null,f.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.classificationDecisionPathClassNameTitle",{defaultMessage:"Class name"}))),void 0!==p&&Object(g.jsx)(d.EuiSuperSelect,{"data-test-subj":"mlDFADecisionPathClassNameSelect",compressed:!0,options:p,valueOfSelected:s,onChange:c}),Object(g.jsx)(te,{decisionPathData:u,predictionFieldName:n,minDomain:m.minDomain,maxDomain:m.maxDomain})):Object(g.jsx)(ae,null)};var se,oe=a(66);!function(e){e.CHART="decision_path_chart",e.JSON="decision_path_json"}(se||(se={}));const le=({baseline:e,featureImportance:t,predictedValue:a,topClasses:n,analysisType:i,predictionFieldName:r,predictedProbability:s})=>{const[c,u]=Object(o.useState)(se.CHART),{services:{docLinks:f}}=Object(oe.b)(),p=f.links.ml.featureImportance;if(t.length<2)return Object(g.jsx)("div",{"data-test-subj":"mlDFADecisionPathJSONViewer"},Object(g.jsx)(ie,{featureImportance:t}));const m=[{id:se.CHART,name:Object(g.jsx)(F.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathPlotTab",defaultMessage:"Decision plot"})},{id:se.JSON,name:Object(g.jsx)(F.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathJSONTab",defaultMessage:"JSON"})}];return Object(g.jsx)("div",{"data-test-subj":"mlDFADecisionPathPopover"},Object(g.jsx)("div",{style:{display:"flex",width:300}},Object(g.jsx)(d.EuiTabs,{size:"s"},m.map((e=>Object(g.jsx)(d.EuiTab,{"data-test-subj":`mlDFADecisionPathPopoverTab-${e.id}`,isSelected:e.id===c,onClick:()=>u(e.id),key:e.id},e.name))))),c===se.CHART&&Object(g.jsx)(l.a.Fragment,null,Object(g.jsx)(d.EuiText,{size:"xs",color:"subdued",style:{paddingTop:5}},Object(g.jsx)(F.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathPlotHelpText",defaultMessage:"SHAP decision plots use {linkedFeatureImportanceValues} to show how models arrive at the predicted value for '{predictionFieldName}'.",values:{predictionFieldName:r,linkedFeatureImportanceValues:Object(g.jsx)(d.EuiLink,{href:p,target:"_blank"},Object(g.jsx)(F.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.linkedFeatureImportanceValues",defaultMessage:"feature importance values"}))}})),i===v.a.CLASSIFICATION&&Object(k.a)(e)&&Object(g.jsx)(re,{featureImportance:t,topClasses:n,predictedValue:Y(a),predictedProbability:s,predictionFieldName:r,baseline:e}),i===v.a.REGRESSION&&Object(k.c)(e)&&void 0!==a&&Object(g.jsx)(ne,{featureImportance:t,baseline:e,predictedValue:"string"==typeof a?parseFloat(a):a,predictionFieldName:r})),c===se.JSON&&Object(g.jsx)(ie,{featureImportance:t}))};var ce=a(5),ue=a(82);a(383);const de=({title:e})=>Object(g.jsx)(d.EuiTitle,{size:"xs"},Object(g.jsx)("span",null,e));function fe(e){return"string"==typeof(null==e?void 0:e.title)&&""!==(null==e?void 0:e.title)}const pe=Object(o.memo)((e=>{const{baseline:t,chartsVisible:a,chartsButtonVisible:i,ccsWarning:r,columnsWithCharts:s,dataTestSubj:l,errorMessage:c,invalidSortingColumnns:u,noDataMessage:p,onChangeItemsPerPage:m,onChangePage:b,onSort:h,pagination:_,setVisibleColumns:y,renderCellValue:O,rowCount:j,sortingColumns:E,status:x,tableItems:D,toastNotifications:S,toggleChartVisibility:T,visibleColumns:C,predictionFieldName:I,resultsField:A,analysisType:P}=e,N=s.map((e=>(!0===a&&(e.actions=!1),e))),L=Object(o.useMemo)((()=>P===v.a.REGRESSION||P===v.a.CLASSIFICATION||P===v.a.OUTLIER_DETECTION?{featureImportance:({children:e})=>{var a;const i=null==e||null===(a=e.props)||void 0===a?void 0:a.visibleRowIndex,r=D[i];if(!r)return Object(g.jsx)("div",null);const s=null!=A?A:ue.d;let o,l,c=[];void 0!==I&&r&&void 0!==r[`${s}.${I}`]&&(o=r[`${s}.${I}`],c=Object(n.m)(r,s),l=r[`${s}.prediction_probability`]);const u=c.reduce(((e,t)=>"boolean"==typeof t.class_name||e),!1),d=Object(n.j)(r,s,u);return Object(g.jsx)("div",{"data-test-subj":"mlDFAFeatureImportancePopover"},Object(g.jsx)(le,{analysisType:P,predictedValue:o,predictedProbability:l,baseline:t,featureImportance:d,topClasses:c,predictionFieldName:I?I.replace("_prediction",""):void 0}))},featureInfluence:({cellContentsElement:e})=>Object(g.jsx)(d.EuiCodeBlock,{isCopyable:!0},e.textContent)}:void 0),[t,D]);Object(o.useEffect)((()=>{u.length>0&&u.forEach((e=>{S.addDanger(f.i18n.translate("xpack.ml.dataGrid.invalidSortingColumnError",{defaultMessage:"The column '{columnId}' cannot be used for sorting.",values:{columnId:e}}))}))}),[u,S]);const k=Object(o.useRef)(null);if(x===v.b.LOADED&&0===D.length)return Object(g.jsx)("div",{"data-test-subj":`${l} empty`},fe(e)&&Object(g.jsx)(de,{title:e.title}),Object(g.jsx)(d.EuiCallOut,{title:f.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutTitle",{defaultMessage:"Empty index query result."}),color:"primary"},Object(g.jsx)("p",null,f.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutBody",{defaultMessage:"The query for the index returned no results. Please make sure you have sufficient permissions, the index contains documents and your query is not too restrictive."}))));if(""!==p)return Object(g.jsx)("div",{"data-test-subj":`${l} empty`},fe(e)&&Object(g.jsx)(de,{title:e.title}),Object(g.jsx)(d.EuiCallOut,{title:f.i18n.translate("xpack.ml.dataGrid.dataGridNoDataCalloutTitle",{defaultMessage:"Index preview not available"}),color:"primary"},Object(g.jsx)("p",null,p)));let M;x===v.b.ERROR&&(M=c&&!c.includes("failed to create query")?Object(g.jsx)(d.EuiCallOut,{title:f.i18n.translate("xpack.ml.dataframe.analytics.exploration.querySyntaxError",{defaultMessage:"An error occurred loading the index data. Please ensure your query syntax is valid."}),color:"danger",iconType:"cross"},Object(g.jsx)("p",null,c)):Object(g.jsx)(d.EuiCallOut,{title:f.i18n.translate("xpack.ml.dataGrid.indexDataError",{defaultMessage:"An error occurred loading the index data."}),color:"danger",iconType:"cross"},Object(g.jsx)(d.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s",isCopyable:!0},c)));return Object(g.jsx)("div",{"data-test-subj":`${l} ${x===v.b.ERROR?"error":"loaded"}`,ref:k},fe(e)&&Object(g.jsx)(d.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(g.jsx)(d.EuiFlexItem,null,Object(g.jsx)(de,{title:e.title})),e.copyToClipboard&&e.copyToClipboardDescription&&Object(g.jsx)(d.EuiFlexItem,{grow:!1},Object(g.jsx)(d.EuiCopy,{beforeMessage:e.copyToClipboardDescription,textToCopy:e.copyToClipboard},(t=>Object(g.jsx)(d.EuiButtonIcon,{onClick:t,iconType:"copyClipboard","aria-label":e.copyToClipboardDescription}))))),void 0!==M&&Object(g.jsx)("div",{"data-test-subj":`${l} error`},M,Object(g.jsx)(d.EuiSpacer,{size:"m"})),r&&Object(g.jsx)("div",{"data-test-subj":`${l} ccsWarning`},Object(g.jsx)(d.EuiCallOut,{title:f.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutTitle",{defaultMessage:"Cross-cluster search returned no fields data."}),color:"warning"},Object(g.jsx)("p",null,f.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutBody",{defaultMessage:"There was an issue retrieving data for the index pattern. Source preview in combination with cross-cluster search is only supported for versions 7.10 and above. You may still configure and create the transform."}))),Object(g.jsx)(d.EuiSpacer,{size:"m"})),Object(g.jsx)(d.EuiMutationObserver,{observerOptions:{subtree:!0,attributes:!0,childList:!0},onMutation:()=>{if(null!==k.current){const e=k.current.querySelectorAll(".euiDataGrid__virtualized");for(const t of Array.from(e))Object(ce.b)(t)&&Object(ce.b)(t.style)&&"auto"!==t.style.height&&(t.style.height="auto")}}},(t=>Object(g.jsx)("div",{className:"mlDataGrid",ref:t},Object(g.jsx)(d.EuiDataGrid,{"aria-label":fe(e)?e.title:"",columns:N.map((e=>(e.initialWidth=165,e))),columnVisibility:{visibleColumns:C,setVisibleColumns:y},gridStyle:n.d,rowCount:j,renderCellValue:O,sorting:{columns:E,onSort:h},toolbarVisibility:{...n.e,...i?{additionalControls:Object(g.jsx)(d.EuiToolTip,{content:f.i18n.translate("xpack.ml.dataGrid.histogramButtonToolTipContent",{defaultMessage:"Queries run to fetch histogram chart data will use a sample size per shard of {samplerShardSize} documents.",values:{samplerShardSize:w.a}})},Object(g.jsx)(d.EuiButtonEmpty,{"aria-pressed":!0===a,className:"euiDataGrid__controlBtn"+(!0===a?" euiDataGrid__controlBtn--active":""),"data-test-subj":`${l}HistogramButton`,size:"xs",iconType:"visBarVertical",color:"text",onClick:T,disabled:void 0===a},Object(g.jsx)(F.FormattedMessage,{id:"xpack.ml.dataGrid.histogramButtonText",defaultMessage:"Histogram charts"})))}:{}},popoverContents:L,pagination:{..._,pageSizeOptions:[5,10,25],onChangeItemsPerPage:m,onChangePage:b}})))))}),((e,t)=>Object(P.isEqual)(me(e),me(t))));function me(e){return[e.columnsWithCharts,e.dataTestSubj,e.errorMessage,e.invalidSortingColumnns,e.noDataMessage,e.pagination,e.rowCount,e.sortingColumns,e.status,e.tableItems,e.visibleColumns,...fe(e)?[e.copyToClipboard,e.copyToClipboardDescription,e.title]:[]]}},132:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(43),i=a(264),r=a(67);class NewJobCapsServiceAnalytics extends i.a{async initializeFromIndexPattern(e){try{const t=function(e,t){const a=e[t],i=[],r={};return void 0!==a&&(a.fields.forEach((e=>{e.type===n.ES_FIELD_TYPES.NESTED&&void 0===r[e.name]&&(r[e.name]=!0,i.push(e))})),Object.keys(r).length>0?a.fields.forEach((e=>{if(e.type!==n.ES_FIELD_TYPES.NESTED){const t=e.name.split(".").shift();t&&void 0===r[t]&&i.push(e)}})):i.push(...a.fields)),i}(await r.ml.dataFrameAnalytics.newJobCapsAnalytics(e.title,"rollup"===e.type),e.title),{fieldsPreferringKeyword:a}=Object(i.b)(t);this._fields=a}catch(e){console.error("Unable to load analytics index fields",e)}}}const s=new NewJobCapsServiceAnalytics},135:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(47),i=a(15),r=n.__importDefault(a(373));t.default=function(e,t){var a=i.useState(t),n=a[0],s=a[1];return r.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),n}},140:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return s}));const n="feature_importance",i="feature_influence",r="top_classes",s="outlier_score"},153:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return u}));var n=a(2),i=a(67),r=a(75),s=a(94),o=a(82);const l=e=>({}.hasOwnProperty.call(e,"count")&&{}.hasOwnProperty.call(e,"data_frame_analytics")&&Array.isArray(e.data_frame_analytics));function c(e){const t=e.data_frame_analytics.reduce(((e,{state:t})=>(Object(s.f)(t)?e.failed.value=++e.failed.value:Object(s.g)(t)?e.started.value=++e.started.value:Object(s.i)(t)&&(e.stopped.value=++e.stopped.value),e)),{total:{label:n.i18n.translate("xpack.ml.overview.statsBar.totalAnalyticsLabel",{defaultMessage:"Total analytics jobs"}),value:0,show:!0},started:{label:n.i18n.translate("xpack.ml.overview.statsBar.runningAnalyticsLabel",{defaultMessage:"Running"}),value:0,show:!0},stopped:{label:n.i18n.translate("xpack.ml.overview.statsBar.stoppedAnalyticsLabel",{defaultMessage:"Stopped"}),value:0,show:!0},failed:{label:n.i18n.translate("xpack.ml.overview.statsBar.failedAnalyticsLabel",{defaultMessage:"Failed"}),value:0,show:!1}});return t.failed.show=t.failed.value>0,t.total.value=e.count,t}const u=(e,t,a,n,u,d,f)=>{let p=0;const m=async(b=!1)=>{if(!0===b||!1===d){if(r.u.next(r.e.LOADING),p++,p>1)return;try{const d=await i.ml.dataFrameAnalytics.getDataFrameAnalytics(),p=await i.ml.dataFrameAnalytics.getDataFrameAnalyticsStats();let m={};if(f){const e=await i.ml.savedObjects.jobsSpaces();m=e["data-frame-analytics"]}const b=l(p)?c(p):void 0;let g=0;const h=d.data_frame_analytics.reduce(((e,t)=>{var a;const n=l(p)?p.data_frame_analytics.find((e=>t.id===e.id)):void 0;return Object(s.h)(n)?(n.state===o.c.STARTING&&void 0===n.node&&g++,e.push({checkpointing:{},config:t,id:t.id,job_type:Object(r.h)(t.analysis),mode:s.a.BATCH,state:n.state,stats:n,spaceIds:null!==(a=m[t.id])&&void 0!==a?a:[]}),e):e}),[]);e(h),t(b),a(void 0),n(!0),u(g),r.u.next(r.e.IDLE)}catch(i){r.u.next(r.e.ERROR),r.u.next(r.e.IDLE),e([]),t(void 0),a(i),n(!0)}if(p--,p>0)return p=0,void m(!0)}};return m}},167:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return o}));var n=a(5);function i(e){return void 0!==e.classes}function r(e){return void 0!==e.importance}function s(e){return Object(n.b)(e,["classes"])&&Array.isArray(e.classes)}function o(e){return Object(n.b)(e,["baseline"])}},193:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d}));var n=a(6),i=a(263),r=a(111);const s={canGetJobs:!1,canAccessML:!1},o={canAccessML:!1,canGetJobs:!1,canGetDatafeeds:!1,canGetCalendars:!1,canFindFileStructure:!1,canGetDataFrameAnalytics:!1,canGetAnnotations:!1,canCreateAnnotation:!1,canDeleteAnnotation:!1,canUseMlAlerts:!1},l={canCreateJob:!1,canDeleteJob:!1,canOpenJob:!1,canCloseJob:!1,canResetJob:!1,canUpdateJob:!1,canForecastJob:!1,canCreateDatafeed:!1,canDeleteDatafeed:!1,canStartStopDatafeed:!1,canUpdateDatafeed:!1,canPreviewDatafeed:!1,canGetFilters:!1,canCreateCalendar:!1,canDeleteCalendar:!1,canCreateFilter:!1,canDeleteFilter:!1,canCreateDataFrameAnalytics:!1,canDeleteDataFrameAnalytics:!1,canStartStopDataFrameAnalytics:!1,canCreateMlAlerts:!1,canUseMlAlerts:!1},c=["canAccessML","canFindFileStructure"];function u(){return{...o,...l}}function d(){const e=Object.keys(s),t=Object.keys(o),a=[...Object.keys(l),...t],c=["index-pattern","dashboard","search","visualization",i.a],u={app:[n.e,"kibana"],excludeFromBasePrivileges:!0,management:{insightsAndAlerting:["jobsListLink"]},catalogue:[n.e]};return{admin:{...u,api:["fileUpload:analyzeFile",...a.map((e=>`ml:${e}`))],catalogue:[n.e,`${n.e}_file_data_visualizer`],ui:a,savedObject:{all:c,read:c},alerting:{rule:{all:Object.values(r.d)},alert:{all:Object.values(r.d)}}},user:{...u,api:["fileUpload:analyzeFile",...t.map((e=>`ml:${e}`))],catalogue:[n.e],management:{insightsAndAlerting:[]},ui:t,savedObject:{all:[],read:c},alerting:{rule:{read:Object.values(r.d)},alert:{read:Object.values(r.d)}}},apmUser:{excludeFromBasePrivileges:!0,app:[],catalogue:[],savedObject:{all:[],read:[i.a]},api:e.map((e=>`ml:${e}`)),ui:e}}}},194:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2);function i(e,t){if(void 0===e||void 0===t)return{iconType:"empty",message:""};let a,i="alert",r=0,s=0;if(Array.isArray(e)){if(1!==e.length)return{iconType:"alert",message:n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unusualValuesDescription",{defaultMessage:"Unusual values"})};r=e[0]}else r=e;if(Array.isArray(t)?1===t.length&&(s=t[0]):s=t,r===s)a=n.i18n.translate("xpack.ml.formatters.metricChangeDescription.actualSameAsTypicalDescription",{defaultMessage:"actual same as typical"});else{const e=r>s;if(i=e?"sortUp":"sortDown",0!==s&&0!==r){const t=e?r/s:s/r;a=t>1.5?t<=100?e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndHalfxHigherDescription",{defaultMessage:"{factor}x higher",values:{factor:Math.round(t)}}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndHalfxLowerDescription",{defaultMessage:"{factor}x lower",values:{factor:Math.round(t)}}):e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThan100xHigherDescription",{defaultMessage:"More than 100x higher"}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThan100xLowerDescription",{defaultMessage:"More than 100x lower"}):t>=1.05?e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndFiveHundredthsxHigherDescription",{defaultMessage:"{factor}x higher",values:{factor:t.toPrecision(2)}}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndFiveHundredthsxLowerDescription",{defaultMessage:"{factor}x lower",values:{factor:t.toPrecision(2)}}):e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unusuallyHighDescription",{defaultMessage:"Unusually high"}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unusuallyLowDescription",{defaultMessage:"Unusually low"})}else a=0===r?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unexpectedZeroValueDescription",{defaultMessage:"Unexpected zero value"}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unexpectedNonZeroValueDescription",{defaultMessage:"Unexpected non-zero value"})}return{iconType:i,message:a}}},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(70),i=a(200);const r=e=>{switch(e){case n.b.CLASSIFICATION:return i.a.NOMINAL;case n.b.REGRESSION:return i.a.QUANTITATIVE;default:return}}},200:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n={NOMINAL:"nominal",QUANTITATIVE:"quantitative"}},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(15),i=a(67),r=a(66);function s(){const{services:{mlServices:{httpService:e}}}=Object(r.b)();return Object(n.useMemo)((()=>function(e){const t=Object(i.basePath)();return{getTrainedModels(a,n){let i=null!=a?a:"";return Array.isArray(a)&&(i=a.join(",")),e.http({path:`${t}/trained_models${i&&`/${i}`}`,method:"GET",...n?{query:n}:{}})},getTrainedModelStats(a,n){let i=null!=a?a:"_all";return Array.isArray(a)&&(i=a.join(",")),e.http({path:`${t}/trained_models/${i}/_stats`,method:"GET"})},getTrainedModelPipelines(a){let n=a;return Array.isArray(a)&&(n=a.join(",")),e.http({path:`${t}/trained_models/${n}/pipelines`,method:"GET"})},deleteTrainedModel:a=>e.http({path:`${t}/trained_models/${a}`,method:"DELETE"})}}(e)),[e])}},202:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=5e3},263:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="ml-job"},264:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return NewJobCapabilitiesServiceBase}));var n=a(4),i=a.n(n),r=a(43);function s(e){const t=e.filter((e=>e.type===r.ES_FIELD_TYPES.KEYWORD)).map((e=>e.id)),a=e.filter((e=>e.type===r.ES_FIELD_TYPES.TEXT)).map((e=>e.id));return{fieldsPreferringKeyword:e.filter((e=>e.type!==r.ES_FIELD_TYPES.TEXT||e.type===r.ES_FIELD_TYPES.TEXT&&!1===t.includes(`${e.id}.keyword`))),fieldsPreferringText:e.filter((e=>e.type!==r.ES_FIELD_TYPES.KEYWORD||e.type===r.ES_FIELD_TYPES.KEYWORD&&!1===a.includes(e.id.replace(/\.keyword$/,""))))}}class NewJobCapabilitiesServiceBase{constructor(){i()(this,"_fields",void 0),i()(this,"_aggs",void 0),this._fields=[],this._aggs=[]}get fields(){return this._fields}get aggs(){return this._aggs}get newJobCaps(){return{fields:this._fields,aggs:this._aggs}}getFieldById(e){const t=this._fields.find((t=>t.id===e));return void 0===t?null:t}getAggById(e){const t=this._aggs.find((t=>t.id===e));return void 0===t?null:t}}},373:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(15),i="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=i},374:function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(375);case"v7light":return a(377);case"v8dark":return a(379);case"v8light":return a(381)}},375:function(e,t,a){var n=a(68),i=a(376);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},376:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGridChart__histogram{width:100%;height:72px}.mlDataGridChart__legend{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;font-size:12px;font-size:.75rem;line-height:1.5;color:#535966;display:block;overflow-x:hidden;margin:4px 0 0 0;font-style:italic;font-weight:normal;text-align:left}.mlDataGridChart__legend--numeric{text-align:right}.mlDataGridChart__legendBoolean{width:100%;min-width:112px}.mlDataGridChart__legendBoolean td{text-align:center}.mlDataGrid .euiDataGridHeaderCell__content{margin-top:auto}\n",""]),e.exports=t},377:function(e,t,a){var n=a(68),i=a(378);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},378:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGridChart__histogram{width:100%;height:72px}.mlDataGridChart__legend{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;font-size:12px;font-size:.75rem;line-height:1.5;color:#98A2B3;display:block;overflow-x:hidden;margin:4px 0 0 0;font-style:italic;font-weight:normal;text-align:left}.mlDataGridChart__legend--numeric{text-align:right}.mlDataGridChart__legendBoolean{width:100%;min-width:112px}.mlDataGridChart__legendBoolean td{text-align:center}.mlDataGrid .euiDataGridHeaderCell__content{margin-top:auto}\n",""]),e.exports=t},379:function(e,t,a){var n=a(68),i=a(380);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},380:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGridChart__histogram{width:100%;height:72px}.mlDataGridChart__legend{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;font-size:12px;font-size:.85714rem;line-height:1.14286rem;color:#535966;display:block;overflow-x:hidden;margin:4px 0 0 0;font-style:italic;font-weight:normal;text-align:left}.mlDataGridChart__legend--numeric{text-align:right}.mlDataGridChart__legendBoolean{width:100%;min-width:112px}.mlDataGridChart__legendBoolean td{text-align:center}.mlDataGrid .euiDataGridHeaderCell__content{margin-top:auto}\n",""]),e.exports=t},381:function(e,t,a){var n=a(68),i=a(382);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},382:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGridChart__histogram{width:100%;height:72px}.mlDataGridChart__legend{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;font-size:12px;font-size:.85714rem;line-height:1.14286rem;color:#98A2B3;display:block;overflow-x:hidden;margin:4px 0 0 0;font-style:italic;font-weight:normal;text-align:left}.mlDataGridChart__legend--numeric{text-align:right}.mlDataGridChart__legendBoolean{width:100%;min-width:112px}.mlDataGridChart__legendBoolean td{text-align:center}.mlDataGrid .euiDataGridHeaderCell__content{margin-top:auto}\n",""]),e.exports=t},383:function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(384);case"v7light":return a(386);case"v8dark":return a(388);case"v8light":return a(390)}},384:function(e,t,a){var n=a(68),i=a(385);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},385:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGrid .euiDataGridRowCell--boolean{text-transform:none}.mlDataGrid .euiDataGridHeaderCell .euiDataGridHeaderCell__sortingArrow{margin-top:auto;margin-bottom:0}\n",""]),e.exports=t},386:function(e,t,a){var n=a(68),i=a(387);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},387:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGrid .euiDataGridRowCell--boolean{text-transform:none}.mlDataGrid .euiDataGridHeaderCell .euiDataGridHeaderCell__sortingArrow{margin-top:auto;margin-bottom:0}\n",""]),e.exports=t},388:function(e,t,a){var n=a(68),i=a(389);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},389:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGrid .euiDataGridRowCell--boolean{text-transform:none}.mlDataGrid .euiDataGridHeaderCell .euiDataGridHeaderCell__sortingArrow{margin-top:auto;margin-bottom:0}\n",""]),e.exports=t},390:function(e,t,a){var n=a(68),i=a(391);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},391:function(e,t,a){(t=a(69)(!1)).push([e.i,".mlDataGrid .euiDataGridRowCell--boolean{text-transform:none}.mlDataGrid .euiDataGridHeaderCell .euiDataGridHeaderCell__sortingArrow{margin-top:auto;margin-bottom:0}\n",""]),e.exports=t},70:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"f",(function(){return f})),a.d(t,"i",(function(){return p})),a.d(t,"k",(function(){return m})),a.d(t,"j",(function(){return b})),a.d(t,"e",(function(){return g})),a.d(t,"l",(function(){return h})),a.d(t,"n",(function(){return _})),a.d(t,"d",(function(){return y})),a.d(t,"t",(function(){return O})),a.d(t,"p",(function(){return j})),a.d(t,"q",(function(){return E})),a.d(t,"A",(function(){return x})),a.d(t,"z",(function(){return v})),a.d(t,"w",(function(){return D})),a.d(t,"g",(function(){return S})),a.d(t,"D",(function(){return T})),a.d(t,"E",(function(){return C})),a.d(t,"c",(function(){return I})),a.d(t,"u",(function(){return A})),a.d(t,"h",(function(){return F})),a.d(t,"C",(function(){return w})),a.d(t,"B",(function(){return N}));var n=a(15),i=a(23),r=a(25),s=a(8),o=a(67),l=a(24),c=a(96);a.d(t,"x",(function(){return c.g})),a.d(t,"y",(function(){return c.h})),a.d(t,"v",(function(){return c.f})),a.d(t,"s",(function(){return c.e})),a.d(t,"o",(function(){return c.c})),a.d(t,"r",(function(){return c.d}));var u=a(82);let d,f;a.d(t,"b",(function(){return u.a})),a.d(t,"m",(function(){return c.a})),function(e){e.ALPHA="alpha",e.ETA="eta",e.ETA_GROWTH_RATE_PER_TREE="eta_growth_rate_per_tree",e.DOWNSAMPLE_FACTOR="downsample_factor",e.FEATURE_BAG_FRACTION="feature_bag_fraction",e.FEATURE_INFLUENCE_THRESHOLD="feature_influence_threshold",e.GAMMA="gamma",e.LAMBDA="lambda",e.MAX_TREES="max_trees",e.MAX_OPTIMIZATION_ROUNDS_PER_HYPERPARAMETER="max_optimization_rounds_per_hyperparameter",e.METHOD="method",e.N_NEIGHBORS="n_neighbors",e.NUM_TOP_CLASSES="num_top_classes",e.NUM_TOP_FEATURE_IMPORTANCE_VALUES="num_top_feature_importance_values",e.OUTLIER_FRACTION="outlier_fraction",e.RANDOMIZE_SEED="randomize_seed",e.SOFT_TREE_DEPTH_LIMIT="soft_tree_depth_limit",e.SOFT_TREE_DEPTH_TOLERANCE="soft_tree_depth_tolerance"}(d||(d={})),function(e){e.LOF="lof",e.LDOF="ldof",e.DISTANCE_KTH_NN="distance_kth_nn",e.DISTANCE_KNN="distance_knn"}(f||(f={}));const p=1e3,m=1,b=100,g=0,h={match_all:{}},_=(e,t)=>({bool:{minimum_should_match:1,should:[{match:{[`${e}.is_training`]:t}}]}});let y;!function(e){e[e.UNUSED=0]="UNUSED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR"}(y||(y={}));const O=e=>{let t;return Object(c.h)(e)&&(t=e.regression.training_percent),Object(c.f)(e)&&(t=e.classification.training_percent),t},j=e=>{let t;return Object(c.f)(e)&&void 0!==e.classification.num_top_classes&&(t=e.classification.num_top_classes),t},E=e=>{let t;return Object(c.h)(e)&&void 0!==e.regression.num_top_feature_importance_values?t=e.regression.num_top_feature_importance_values:Object(c.f)(e)&&void 0!==e.classification.num_top_feature_importance_values&&(t=e.classification.num_top_feature_importance_values),t},x=e=>{if(void 0===e)return!1;const t=Object.keys(e);return 1===t.length&&"bool"===t[0]},v=e=>{var t,a;const n=Object.keys(e);return 1===n.length&&n[0]===u.a.REGRESSION&&void 0!==(null==e||null===(t=e.regression)||void 0===t?void 0:t.mse)&&void 0!==(null==e||null===(a=e.regression)||void 0===a?void 0:a.r_squared)},D=e=>{var t,a;const n=Object.keys(e);return 1===n.length&&n[0]===u.a.CLASSIFICATION&&(void 0!==(null==e||null===(t=e.classification)||void 0===t?void 0:t.multiclass_confusion_matrix)||void 0!==(null==e||null===(a=e.classification)||void 0===a?void 0:a.auc_roc))};let S;!function(e){e.ERROR="error",e.IDLE="idle",e.LOADING="loading",e.REFRESH="refresh"}(S||(S={}));const T=new i.BehaviorSubject(S.IDLE),C=(e={},t=!1)=>(Object(n.useEffect)((()=>{const a=T.pipe(Object(r.distinctUntilChanged)()),n=[];return"function"==typeof e.onRefresh&&(t&&e.onRefresh(),n.push(a.pipe(Object(r.filter)((e=>e===S.REFRESH))).subscribe((()=>{"function"==typeof e.onRefresh&&e.onRefresh()})))),"function"==typeof e.isLoading&&n.push(a.subscribe((t=>"function"==typeof e.isLoading&&e.isLoading(t===S.LOADING)))),()=>{n.map((e=>e.unsubscribe()))}}),[e.onRefresh]),{refresh:()=>{T.next(S.REFRESH),T.next(S.LOADING)}}),I="--";function A(e){const t={mse:I,msle:I,huber:I,r_squared:I};if(null!=e&&e.regression)for(const n in e.regression)if(e.regression.hasOwnProperty(n)){var a;let i=null===(a=e.regression[n])||void 0===a?void 0:a.value;i&&Number.isFinite(i)&&(i=Number(i.toPrecision(3))),t[n]=i}return t}function P({resultsField:e,isTraining:t,searchQuery:a,ignoreDefaultQuery:n}){let i;const r={term:{[`${e}.is_training`]:{value:t}}},o=Object(s.cloneDeep)(a);return x(o)?(void 0===o.bool.must&&(o.bool.must=[]),void 0!==t&&o.bool.must.push(r),i=o):(e=>{if(void 0===e)return!1;const t=Object.keys(e);return 1===t.length&&"query_string"===t[0]})(o)?(i={bool:{must:[o]}},void 0!==t&&i.bool.must.push(r)):i={bool:{must:void 0!==t?[r]:[]}},i}let F;!function(e){e.MSE="mse",e.MSLE="msle",e.R_SQUARED="rSquared",e.HUBER="huber"}(F||(F={}));const w=async({isTraining:e,index:t,dependentVariable:a,resultsField:n,predictionFieldName:i,searchQuery:r,ignoreDefaultQuery:s,jobType:c,requiresKeyword:d,rocCurveClassName:f,includeMulticlassConfusionMatrix:p=!0})=>{const m={success:!1,eval:null,error:null};let b=`${n}.${i||`${a}_prediction`}`;c===u.a.CLASSIFICATION&&!0===d&&(b=`${b}.keyword`);const g={classification:{accuracy:{},recall:{},...p?{multiclass_confusion_matrix:{}}:{},...void 0!==f?{auc_roc:{include_curve:!0,class_name:f}}:{}},regression:{r_squared:{},mse:{},msle:{},huber:{}}},h={index:t,query:P({resultsField:n,isTraining:e,searchQuery:r,ignoreDefaultQuery:s}),evaluation:{[c]:{actual_field:a,predicted_field:b,...c===u.a.CLASSIFICATION?{top_classes_field:`${n}.top_classes`}:{},metrics:g[c]}}};try{const e=await o.ml.dataFrameAnalytics.evaluateDataFrameAnalytics(h);return m.success=!0,m.eval=e,m}catch(e){return m.error=Object(l.b)(e),m}},N=async({ignoreDefaultQuery:e=!0,isTraining:t,searchQuery:a,resultsField:n,destIndex:i})=>{const r=P({resultsField:n,isTraining:t,ignoreDefaultQuery:e,searchQuery:a});try{const e={track_total_hits:!0,query:r},t=await o.ml.esSearch({index:i,size:0,body:e}),a=t.hits.total&&t.hits.total.value;return{docsCount:a,success:void 0!==a}}catch(e){return{docsCount:null,success:!1}}}},75:function(e,t,a){"use strict";a.d(t,"h",(function(){return n.m})),a.d(t,"k",(function(){return n.o})),a.d(t,"o",(function(){return n.s})),a.d(t,"j",(function(){return n.n})),a.d(t,"r",(function(){return n.x})),a.d(t,"u",(function(){return n.D})),a.d(t,"w",(function(){return n.E})),a.d(t,"e",(function(){return n.g})),a.d(t,"d",(function(){return n.f})),a.d(t,"q",(function(){return n.u})),a.d(t,"t",(function(){return n.C})),a.d(t,"s",(function(){return n.B})),a.d(t,"n",(function(){return n.r})),a.d(t,"b",(function(){return n.d})),a.d(t,"f",(function(){return n.i})),a.d(t,"g",(function(){return n.l})),a.d(t,"a",(function(){return n.b})),a.d(t,"i",(function(){return i.f})),a.d(t,"v",(function(){return i.h})),a.d(t,"c",(function(){return i.c})),a.d(t,"l",(function(){return l})),a.d(t,"m",(function(){return u})),a.d(t,"p",(function(){return d.a})),a.d(t,"x",(function(){return O}));var n=a(70),i=a(105),r=a(24),s=a(115),o=a(67);const l=async(e,t,a,l)=>{if(void 0!==e){const{pagination:c,setErrorMessage:u,setRowCount:d,setRowCountRelation:f,setStatus:p,setTableItems:m,sortingColumns:b}=t;u(""),p(n.d.LOADING);try{const t=b.map((e=>{const{id:t}=e;return e.id=Object(i.g)(t)?`${t}.keyword`:t,e})).reduce(((e,t)=>(e[t.id]={order:t.direction},e)),{}),{pageIndex:r,pageSize:u}=c,g=await o.ml.esSearch({index:e.dest.index,body:{fields:["*"],_source:!1,query:a,from:r*u,size:u,...Object.keys(t).length>0?{sort:t}:{}}});l.didCancel||(d("number"==typeof g.hits.total?g.hits.total:g.hits.total.value),f("number"==typeof g.hits.total?"eq":g.hits.total.relation),m(g.hits.hits.map((t=>{var a;return Object(s.h)(null!==(a=t.fields)&&void 0!==a?a:{},(t=>t.startsWith(`${e.dest.results_field}.feature_importance`)))}))),p(n.d.LOADED))}catch(e){u(Object(r.b)(e)),p(n.d.ERROR)}}};var c=a(132);const u=(e,t)=>{const{fields:a}=c.a;if(void 0!==e){const{selectedFields:n,docFields:r}=Object(i.f)(a,e,t),s={},o=[];return r.forEach((e=>{s[e.id]=e.type,o.push(e.id)})),{defaultSelectedFields:n.map((e=>e.id)),fieldTypes:s,tableFields:o}}return{defaultSelectedFields:[],fieldTypes:{},tableFields:[]}};var d=a(199),f=a(15),p=a(2),m=a(87),b=a(92),g=a(153),h=a(201),_=a(73),y=a(96);const O=e=>{const t=Object(b.b)(),a=Object(h.a)(),[n,i]=Object(f.useState)(void 0),[s,l]=Object(f.useState)(void 0),[u,d]=Object(f.useState)(!1),[O,j]=Object(f.useState)(!1),[E,x]=Object(f.useState)(!1),[v,D]=Object(f.useState)(void 0),[S,T]=Object(f.useState)(void 0),[C,I]=Object(f.useState)(void 0),[A,P]=Object(f.useState)(void 0),[F,w]=Object(f.useState)(void 0);return Object(f.useEffect)((()=>{!async function(){x(!1);try{const u=await o.ml.dataFrameAnalytics.getDataFrameAnalytics(e),f=await o.ml.dataFrameAnalytics.getDataFrameAnalyticsStats(e),b=Object(g.b)(f)?f.data_frame_analytics[0]:void 0;if(void 0!==b&&b.state&&P(b.state),Array.isArray(u.data_frame_analytics)&&u.data_frame_analytics.length>0){const o=u.data_frame_analytics[0];if(Object(y.f)(o.analysis)||Object(y.h)(o.analysis))try{var n;const t=(await a.getTrainedModels(`${e}*`,{include:"total_feature_importance"})).find((t=>{var a,n;return(null===(a=t.metadata)||void 0===a||null===(n=a.analytics_config)||void 0===n?void 0:n.id)===e}));var s;if(!0===Array.isArray(null==t||null===(n=t.metadata)||void 0===n?void 0:n.total_feature_importance))w(null==t||null===(s=t.metadata)||void 0===s?void 0:s.total_feature_importance)}catch(e){Object(_.a)().displayErrorToast(e)}try{const e=Array.isArray(o.dest.index)?o.dest.index[0]:o.dest.index,a=Object(m.c)(e)||e;let n;try{n=await t.indexPatterns.get(a),await t.indexPatterns.refreshFields(n)}catch(e){n=void 0}if(void 0===n){j(!0);const e=o.source.index[0],a=Object(m.c)(e)||e;try{n=await t.indexPatterns.get(a)}catch(e){n=void 0}}void 0!==n?(await c.a.initializeFromIndexPattern(n),D(u.data_frame_analytics[0]),i(n),d(!0),x(!1)):l(p.i18n.translate("xpack.ml.dataframe.analytics.results.indexPatternsMissingErrorMessage",{defaultMessage:"To view this page, a Kibana index pattern is necessary for either the destination or source index of this analytics job."}))}catch(e){T(Object(r.b)(e)),x(!1)}}}catch(e){I(Object(r.b)(e)),x(!1)}}()}),[]),{indexPattern:n,indexPatternErrorMessage:s,isInitialized:u,isLoadingJobConfig:E,jobCapsServiceErrorMessage:S,jobConfig:v,jobConfigErrorMessage:C,jobStatus:A,needsDestIndexPattern:O,totalFeatureImportance:F}}},82:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return o}));const n={OUTLIER_DETECTION:"outlier_detection",REGRESSION:"regression",CLASSIFICATION:"classification"},i={ANALYZING:"analyzing",FAILED:"failed",REINDEXING:"reindexing",STARTED:"started",STARTING:"starting",STOPPED:"stopped"},r="ml",s={ANALYTICS:"analytics",TRANSFORM:"transform",INDEX:"index",TRAINED_MODEL:"trainedModel"},o="prepackaged"},92:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var n=a(15);const i=a.n(n).a.createContext({}),r=()=>{const e=Object(n.useContext)(i);if(void 0===e.combinedQuery||void 0===e.currentIndexPattern||void 0===e.currentSavedSearch||void 0===e.indexPatterns||void 0===e.kibanaConfig)throw new Error("required attribute is undefined");return e}},93:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return h})),a.d(t,"d",(function(){return _})),a.d(t,"e",(function(){return y})),a.d(t,"k",(function(){return O})),a.d(t,"f",(function(){return j})),a.d(t,"i",(function(){return E})),a.d(t,"c",(function(){return x})),a.d(t,"g",(function(){return v})),a.d(t,"h",(function(){return D})),a.d(t,"j",(function(){return T})),a.d(t,"m",(function(){return C})),a.d(t,"p",(function(){return I})),a.d(t,"n",(function(){return A})),a.d(t,"o",(function(){return P})),a.d(t,"l",(function(){return F}));var n=a(48),i=a.n(n),r=a(15),s=a(2),o=a(43),l=a(82),c=a(24),u=a(105),d=a(140),f=a(76),p=a(196),m=a(133),b=a(18);const g=10,h=1e4,_={border:"all",fontSize:"s",cellPadding:"s",stripes:!1,rowHover:"none",header:"shade"},y={showColumnSelector:!0,showStyleSelector:!1,showSortSelector:!0,showFullScreenSelector:!1},O=e=>{const t=e.fields.map((e=>e.name));return t.filter((a=>{if(e.metaFields.includes(a))return!1;const n=a.split(".");return"keyword"!==n.pop()||!t.includes(n.join("."))}))};function j(e,t){let a={};if(e){const t=null==e?void 0:e.getComputedFields();if(void 0!==(null==t?void 0:t.runtimeFields)){const e=t.runtimeFields;Object(b.b)(e)&&(a={...a,...e})}}if(Object(b.b)(t)&&(a={...a,...t}),Object(b.b)(a))return a}const E=(e,t)=>Object.keys(e).map((a=>{let n;const i=e[a];switch(void 0!==i&&(u.a.has(i)||u.b.has(i))&&(n="numeric"),i){case"date":n="datetime";break;case"nested":case"geo_point":n="json";break;case"boolean":n="boolean";break;case"text":n=x}return a===`${t}.${d.c}`&&(n="numeric"),a.includes(`${t}.${d.d}`)&&(n="json"),a.includes(`${t}.${d.a}`)&&(n="featureImportance"),a===`${t}.${d.b}`&&(n="featureInfluence"),{id:a,schema:n,isSortable:!0}})),x="non-aggregatable",v=e=>{let t;switch(e){case o.ES_FIELD_TYPES.GEO_POINT:case o.ES_FIELD_TYPES.GEO_SHAPE:t="json";break;case o.ES_FIELD_TYPES.BOOLEAN:t="boolean";break;case o.ES_FIELD_TYPES.DATE:case o.ES_FIELD_TYPES.DATE_NANOS:t="datetime";break;case o.ES_FIELD_TYPES.BYTE:case o.ES_FIELD_TYPES.DOUBLE:case o.ES_FIELD_TYPES.FLOAT:case o.ES_FIELD_TYPES.HALF_FLOAT:case o.ES_FIELD_TYPES.INTEGER:case o.ES_FIELD_TYPES.LONG:case o.ES_FIELD_TYPES.SCALED_FLOAT:case o.ES_FIELD_TYPES.SHORT:t="numeric";case o.ES_FIELD_TYPES.KEYWORD:case o.ES_FIELD_TYPES.TEXT:}return t},D=e=>{let t;switch(null==e?void 0:e.type){case o.KBN_FIELD_TYPES.BOOLEAN:t="boolean";break;case o.KBN_FIELD_TYPES.DATE:t="datetime";break;case o.KBN_FIELD_TYPES.GEO_POINT:case o.KBN_FIELD_TYPES.GEO_SHAPE:t="json";break;case o.KBN_FIELD_TYPES.NUMBER:t="numeric";break;case o.KBN_FIELD_TYPES.NESTED:t="json"}return void 0===t&&!1===(null==e?void 0:e.aggregatable)?x:t},S=(e,t)=>t?"true"===e:e,T=(e,t,a=!1)=>{const n=e[`${t}.feature_importance`];return void 0===n?[]:n.map((e=>({feature_name:Array.isArray(e.feature_name)?e.feature_name[0]:e.feature_name,classes:Array.isArray(e.classes)?e.classes.map((e=>{const t=F(e);return{importance:t.importance,class_name:S(t.class_name,a)}})):e.classes,importance:Array.isArray(e.importance)?e.importance[0]:e.importance})))},C=(e,t)=>{const a=e[`${t}.top_classes`];return void 0===a?[]:a.map((e=>F(e)))},I=(e,t,a,n,s)=>Object(r.useMemo)((()=>({rowIndex:c,columnId:u,setCellProps:d})=>{const b=c-t.pageIndex*t.pageSize,g=a[b];if(void 0===g)return null;if(void 0===e)return null;let h;void 0!==e&&(h=m.a.getFieldFormatFromIndexPattern(e,u,""));const _=function(e){if(a.hasOwnProperty(b)){const t=a[b];return t.hasOwnProperty(e)?t[e]:e===`${n}.feature_importance`?T(g,null!=n?n:l.d):e===`${n}.top_classes`?C(g,null!=n?n:l.d):Object(p.a)(a[b],e,null)}return null}(u);if(Object(r.useEffect)((()=>{"function"==typeof s&&s(u,_,g,d)}),[u,_]),"object"==typeof _&&null!==_)return JSON.stringify(_);if(null==_)return null;if(void 0!==h)return h.convert(_,"text");if("string"==typeof _||null===_)return _;const y=e.fields.getByName(u);return(null==y?void 0:y.type)===o.KBN_FIELD_TYPES.DATE?Object(f.c)(1e3*i()(_).unix()):"boolean"==typeof _?_?"true":"false":_}),[null==e?void 0:e.fields,t.pageIndex,t.pageSize,a]),A=e=>{const t=e=>"string"==typeof e,a=(n,i,r=0)=>{const s=e[r],o=Object(p.a)(n,s.id,null),l=Object(p.a)(i,s.id,null);if("number"==typeof o&&"number"==typeof l){if(o<l)return"asc"===s.direction?-1:1;if(o>l)return"asc"===s.direction?1:-1}if(t(o)&&t(l)){if(-1===o.localeCompare(l))return"asc"===s.direction?-1:1;if(1===o.localeCompare(l))return"asc"===s.direction?1:-1}return r+1<e.length?a(n,i,r+1):0};return a},P=(e,t)=>{const a=Object(c.b)(e);t.addDanger(s.i18n.translate("xpack.ml.dataGrid.columnChart.ErrorMessageToast",{defaultMessage:"An error occurred fetching the histogram charts data: {error}",values:{error:""!==a?a:e}}))},F=(e,t)=>{const a={...e};for(const e of Object.keys(a))void 0===t?Array.isArray(a[e])&&1===a[e].length&&(a[e]=a[e][0]):!1===t(e)&&Array.isArray(a[e])&&1===a[e].length&&(a[e]=a[e][0]);return a}},94:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"i",(function(){return o})),a.d(t,"h",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"e",(function(){return d}));a(40);var n=a(82);let i;function r(e){return e===n.c.FAILED}function s(e){return e===n.c.ANALYZING||e===n.c.REINDEXING||e===n.c.STARTED||e===n.c.STARTING}function o(e){return e===n.c.STOPPED}function l(e){return"object"==typeof e&&null!==e&&{}.hasOwnProperty.call(e,"state")&&Object.values(n.c).includes(e.state)&&{}.hasOwnProperty.call(e,"progress")&&Array.isArray(e.progress)}function c(e){let t=0,a=0;for(const n of e.progress)if(t++,a=n.progress_percent,n.progress_percent<100)break;return{currentPhase:t,progress:a,totalPhases:e.progress.length}}a.d(t,"b",(function(){return n.c})),function(e){e.BATCH="batch",e.CONTINUOUS="continuous"}(i||(i={}));const u={configDestIndex:"config.dest.index",configSourceIndex:"config.source.index",configCreateTime:"config.create_time",description:"config.description",id:"id",memoryStatus:"stats.memory_usage.status"};function d(e){const t=function(e){if(l(e))return Math.round(e.progress.reduce(((e,t)=>e+t.progress_percent),0)/e.progress.length)}(e);return e.state===n.c.STOPPED&&100===t}},96:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"h",(function(){return r})),a.d(t,"f",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return d}));var n=a(82);const i=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===n.a.OUTLIER_DETECTION},r=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===n.a.REGRESSION},s=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===n.a.CLASSIFICATION},o=e=>{let t="";return r(e)&&(t=e.regression.dependent_variable),s(e)&&(t=e.classification.dependent_variable),t},l=e=>{let t;return r(e)&&void 0!==e.regression.prediction_field_name?t=e.regression.prediction_field_name:s(e)&&void 0!==e.classification.prediction_field_name&&(t=e.classification.prediction_field_name),t},c=e=>`${o(e)}_prediction`,u=(e,t,a)=>{const n=l(t);return`${e}.${n||c(t)}`},d=e=>{const t=Object.keys(e||{});return 1===t.length?t[0]:"unknown"}}}]);