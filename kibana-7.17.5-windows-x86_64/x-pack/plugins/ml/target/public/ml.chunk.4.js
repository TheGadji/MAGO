/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[4],{108:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return o}));const a=500,l=500,o={KUERY:"kuery",LUCENE:"lucene"}},128:function(e,t,r){"use strict";r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return v})),r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return j}));var a=r(15),l=r(2),o=r(41),i=r(40),n=r(7),s=r(81),c=r(16),p=r(11);const d=l.i18n.translate("xpack.ml.controls.selectSeverity.warningLabel",{defaultMessage:"warning"}),m=l.i18n.translate("xpack.ml.controls.selectSeverity.minorLabel",{defaultMessage:"minor"}),u=l.i18n.translate("xpack.ml.controls.selectSeverity.majorLabel",{defaultMessage:"major"}),h=l.i18n.translate("xpack.ml.controls.selectSeverity.criticalLabel",{defaultMessage:"critical"}),x={[d]:c.ANOMALY_THRESHOLD.LOW,[m]:c.ANOMALY_THRESHOLD.MINOR,[u]:c.ANOMALY_THRESHOLD.MAJOR,[h]:c.ANOMALY_THRESHOLD.CRITICAL},f=[{val:c.ANOMALY_THRESHOLD.LOW,display:d,color:Object(n.j)(c.ANOMALY_THRESHOLD.LOW)},{val:c.ANOMALY_THRESHOLD.MINOR,display:m,color:Object(n.j)(c.ANOMALY_THRESHOLD.MINOR)},{val:c.ANOMALY_THRESHOLD.MAJOR,display:u,color:Object(n.j)(c.ANOMALY_THRESHOLD.MAJOR)},{val:c.ANOMALY_THRESHOLD.CRITICAL,display:h,color:Object(n.j)(c.ANOMALY_THRESHOLD.CRITICAL)}];function b(e){let t=f.find((t=>t.val===e));return void 0===t&&(t=f[0]),t}const g=f[0],v=()=>Object(s.b)("mlSelectSeverity",g),y=({classNames:e}={classNames:""})=>{const[t,r]=v();return Object(p.jsx)(j,{severity:t,onChange:r})},j=({classNames:e="",severity:t,onChange:r,compressed:n})=>{const s=Object(a.useMemo)((()=>f.map((({color:e,display:t,val:r})=>({value:t,inputDisplay:Object(p.jsx)(a.Fragment,null,Object(p.jsx)(i.EuiHealth,{color:e,style:{lineHeight:"inherit"}},t)),dropdownDisplay:Object(p.jsx)(a.Fragment,null,Object(p.jsx)(i.EuiHealth,{color:e,style:{lineHeight:"inherit"}},t),Object(p.jsx)(i.EuiSpacer,{size:"xs"}),Object(p.jsx)(i.EuiText,{size:"xs",color:"subdued"},Object(p.jsx)("p",{className:"euiTextColor--subdued"},Object(p.jsx)(o.FormattedMessage,{id:"xpack.ml.controls.selectSeverity.scoreDetailsDescription",defaultMessage:"score {value} and above",values:{value:r}}))))})))),[]);return Object(p.jsx)(i.EuiSuperSelect,{prepend:l.i18n.translate("xpack.ml.explorer.severityThresholdLabel",{defaultMessage:"Severity"}),id:"severityThreshold","data-test-subj":"mlAnomalySeverityThresholdControls",className:e,hasDividers:!0,options:s,valueOfSelected:t.display,onChange:e=>{r(b(x[e]))},compressed:!0})}},172:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(2),l=r(22);function o(e,t,r,o){let i="",n=`ml-job-${t}`;switch(e){case"explorer":i=a.i18n.translate("xpack.ml.anomalyExplorerPageLabel",{defaultMessage:"Anomaly Explorer"});break;case"timeseriesexplorer":i=a.i18n.translate("xpack.ml.singleMetricViewerPageLabel",{defaultMessage:"Single Metric Viewer"});break;case"jobs/new_job/datavisualizer":i=a.i18n.translate("xpack.ml.dataVisualizerPageLabel",{defaultMessage:"Data Visualizer"}),n=`ml-datavisualizer-${t}`;break;default:return void console.error("addItemToRecentlyAccessed - No page specified")}(null!=o?o:Object(l.h)()).add(r,`ML - ${t} - ${i}`,n)}},228:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a=e=>t=>{t.target.blur(),e()}},229:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(15),l=r.n(a),o=r(40),i=r(11);const n=({height:e,label:t})=>(e=e?+e:100,Object(i.jsx)("div",{className:"ml-loading-indicator",style:{height:`${e}px`},"data-test-subj":"mlLoadingIndicator"},Object(i.jsx)(o.EuiLoadingChart,{size:"xl",mono:!0}),t&&Object(i.jsx)(l.a.Fragment,null,Object(i.jsx)(o.EuiSpacer,{size:"s"}),Object(i.jsx)("div",null,t))))},231:function(e,t,r){"use strict";r(232);var a=r(233);r.d(t,"a",(function(){return a.b}))},348:function(e,t,r){"use strict";r.d(t,"a",(function(){return W}));r(700);var a=r(15),l=r.n(a),o=r(40),i=r(148),n=r(2),s=r(106),c=r.n(s),p=r(61),d=r.n(p),m=r(21),u=r.n(m),h=r(76),x=r(125),f=r(7),b=r(229),g=r(133),v=r(78),y=r(11);class explorer_chart_distribution_ExplorerChartDistribution extends l.a.Component{componentDidMount(){this.renderChart()}componentDidUpdate(){this.renderChart()}renderChart(){const{tooManyBuckets:e,tooltipService:t,timeBuckets:r,showSelectedInterval:a}=this.props,l=this.rootNode,o=this.props.seriesConfig,s=this.props.severity;if(void 0===o||!1===Array.isArray(o.chartData))return;const p=g.a.getFieldFormat(o.jobId,o.detectorIndex);let m=0;const b=170,y=Object(i.i)(o),j={top:10,right:0,bottom:30,left:0};y===v.b.POPULATION_DISTRIBUTION&&(j.left=60);let O,k=null,w=null,E=null;const _=y===v.b.EVENT_DISTRIBUTION?"entity":"value";let I=o.chartData.find((e=>void 0!==e.anomalyScore));I=I&&I.entity;const T=function({chartData:e,functionDescription:t}){const r=d()(".ml-explorer-chart"),a=c.a.select(l).select(".content-wrapper");a.select("svg").remove();const n=r.width(),s=b+j.top+j.bottom,u=a.append("svg").classed("ml-explorer-chart-svg",!0).attr("width",n).attr("height",s),h=c.a.nest().key((e=>e.entity)).entries(e).sort(((e,t)=>t.values.length-e.values.length)).filter(((e,t)=>y!==v.b.EVENT_DISTRIBUTION||(t<30||e.key===I))).map((e=>e.key));if(e=e.filter((e=>h.includes(e.entity))),y===v.b.POPULATION_DISTRIBUTION){const r=e.filter((e=>e.entity===I)),{min:a,max:l}=Object(i.e)(r,t);e=e.filter((e=>e.value<=l)),w=c.a.scale.linear().range([b,0]).domain([a<0?a:0,l]).nice()}else{if(y!==v.b.EVENT_DISTRIBUTION)throw`chartType '${y}' not supported`;{const e=5;w=c.a.scale.ordinal().rangePoints([e,b-e]).domain(h)}}const x=c.a.svg.axis().scale(w).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);let f=0;const g=u.append("g").attr("class","temp-axis-label tick"),T=y===v.b.POPULATION_DISTRIBUTION?w.ticks():h;g.selectAll("text.temp.axis").data(T).enter().append("text").text((e=>void 0!==p?p.convert(e,"text"):y===v.b.POPULATION_DISTRIBUTION?w.tickFormat()(e):e)).each((function(){f=Math.max(this.getBBox().width+x.tickPadding(),f)})).remove(),c.a.select(".temp-axis-label").remove(),(y===v.b.POPULATION_DISTRIBUTION||y===v.b.EVENT_DISTRIBUTION&&h.length<=10)&&(j.left=Math.max(f,40));return m=n-j.left-j.right,k=c.a.time.scale().range([0,m]).domain([o.plotEarliest,o.plotLatest]),E=c.a.svg.line().x((e=>k(e.date))).y((e=>w(e[_]))).defined((e=>null!==e.value)),O=u.append("g").attr("class","line-chart").attr("transform","translate("+j.left+","+j.top+")"),e}(o);var L;L=T,O.append("rect").attr("x",0).attr("y",0).attr("height",b).attr("width",m).style("stroke","#cccccc").style("fill","none").style("stroke-width",1),function(){const t={min:u()(o.plotEarliest),max:u()(o.plotLatest)};r.setBounds(t),r.setInterval("auto");const a=r.getScaledDateFormat(),l=Math.max(o.selectedEarliest,o.plotEarliest),n=o.selectedLatest-o.selectedEarliest+1,s=c.a.svg.axis().scale(k).orient("bottom").innerTickSize(-170).outerTickSize(0).tickPadding(10).tickFormat((e=>u()(e).format(a))),d=!0===e||n>=o.plotLatest-o.plotEarliest;if(!1===d){const e=Object(i.k)(l,n,o.plotEarliest,o.plotLatest);s.tickValues(e)}else s.ticks(Object(i.m)(m,a));const h=c.a.svg.axis().scale(w).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);void 0!==p&&h.tickFormat((e=>p.convert(e,"text")));const x=O.append("g"),f=x.append("g").attr("class","x axis").attr("transform","translate(0,170)").call(s);x.append("g").attr("class","y axis").call(h),y===v.b.EVENT_DISTRIBUTION&&x.select(".y").selectAll("text").each((function(e){c.a.select(this).classed("ml-explorer-chart-axis-emphasis",e===I)})),!1===d&&Object(i.n)(f,l,n,m)}(),function(){if(!1===a)return;const e=Math.max(o.selectedEarliest,o.plotEarliest),t=Math.min(o.selectedLatest,o.plotLatest),r=k(t)-k(e);O.append("rect").attr("class","selected-interval").attr("x",k(new Date(e))+2).attr("y",2).attr("rx",3).attr("ry",3).attr("width",r-4).attr("height",166)}(),function(e,t,r,a=1.5){const l=(t.select(".values-dots").empty()?t.append("g").classed("values-dots",!0):t.select(".values-dots")).selectAll("circle").data(e);l.enter().append("circle").classed("values-dots-circle",!0).classed("values-dots-circle-blur",(e=>e.entity!==I)).attr("r",(e=>e.entity===I?1.5*a:a)),l.attr("cx",r.x()).attr("cy",r.y()),l.exit().remove()}(L,O,E),function(e){const r=O.append("g").attr("class","chart-markers").selectAll(".metric-value").data(e.filter((e=>null!==e.value)));r.exit().remove(),r.enter().append("circle").attr("r",7).on("mouseover",(function(e){!function(e,r){const a=[{label:Object(h.b)(e.date)}],l=o.detectorLabel;if(void 0!==e.entity&&a.push({label:n.i18n.translate("xpack.ml.explorer.distributionChart.entityLabel",{defaultMessage:"entity"}),value:e.entity,seriesIdentifier:{key:l},valueAccessor:"entity"}),void 0!==e.anomalyScore){const t=parseInt(e.anomalyScore),r=Object(f.g)(t);a.push({label:n.i18n.translate("xpack.ml.explorer.distributionChart.anomalyScoreLabel",{defaultMessage:"anomaly score"}),value:r,color:Object(f.j)(t),seriesIdentifier:{key:l},valueAccessor:"anomaly_score"}),y!==v.b.EVENT_DISTRIBUTION&&(a.push({label:n.i18n.translate("xpack.ml.explorer.distributionChart.valueLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,o.functionDescription,p),seriesIdentifier:{key:l},valueAccessor:"value"}),void 0!==e.numberOfCauses&&1!==e.numberOfCauses||a.push({label:n.i18n.translate("xpack.ml.explorer.distributionChart.typicalLabel",{defaultMessage:"typical"}),value:Object(x.b)(e.typical,o.functionDescription,p),seriesIdentifier:{key:l},valueAccessor:"typical"}),void 0!==e.byFieldName&&void 0!==e.numberOfCauses&&a.push({label:n.i18n.translate("xpack.ml.explorer.distributionChart.unusualByFieldValuesLabel",{defaultMessage:"{ numberOfCauses, plural, one {# unusual {byFieldName} value} other {#{plusSign} unusual {byFieldName} values}}",values:{numberOfCauses:e.numberOfCauses,byFieldName:e.byFieldName,plusSign:e.numberOfCauses<10?"":"+"}}),seriesIdentifier:{key:l},valueAccessor:"numberOfCauses"}))}else y!==v.b.EVENT_DISTRIBUTION&&a.push({label:n.i18n.translate("xpack.ml.explorer.distributionChart.valueWithoutAnomalyScoreLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,o.functionDescription,p),seriesIdentifier:{key:l},valueAccessor:"value"});void 0!==e.scheduledEvents&&e.scheduledEvents.forEach(((t,r)=>{a.push({label:n.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.scheduledEventsLabel",{defaultMessage:"scheduled event{counter}",values:{counter:e.scheduledEvents.length>1?` #${r+1}`:""}}),value:t,seriesIdentifier:{key:l},valueAccessor:`scheduled_events_${r+1}`})})),t.show(a,r,{x:21,y:14})}(e,this)})).on("mouseout",(()=>t.hide())),r.attr("cx",(e=>k(e.date))).attr("cy",(e=>w(e[_]))).attr("class",(e=>{let t="metric-value";return void 0!==e.anomalyScore&&Number(e.anomalyScore)>=s&&(t+=" anomaly-marker ",t+=Object(f.l)(e.anomalyScore).id),t}));const a=O.select(".chart-markers").selectAll(".scheduled-event-marker").data(e.filter((e=>void 0!==e.scheduledEvents)));a.exit().remove(),a.enter().append("rect").attr("width",14).attr("height",5).attr("class","scheduled-event-marker").attr("rx",1).attr("ry",1),a.attr("x",(e=>k(e.date)-7)).attr("y",(e=>w(e[_])-2.5))}(L)}shouldComponentUpdate(){return!0}setRef(e){this.rootNode=e}render(){const{seriesConfig:e}=this.props;if(void 0===e)return null;const t=e.loading;return Object(y.jsx)("div",{className:"ml-explorer-chart",ref:this.setRef.bind(this)},t&&Object(y.jsx)(b.a,{height:215}),!t&&Object(y.jsx)("div",{className:"content-wrapper"}))}}const j="ml-explorer-chart-content-wrapper";class explorer_chart_single_metric_ExplorerChartSingleMetric extends l.a.Component{componentDidMount(){this.renderChart()}componentDidUpdate(){this.renderChart()}renderChart(){const{tooManyBuckets:e,tooltipService:t,timeBuckets:r,showSelectedInterval:a}=this.props,l=this.rootNode,o=this.props.seriesConfig,s=this.props.severity;if(void 0===o||!1===Array.isArray(o.chartData))return;const p=g.a.getFieldFormat(o.jobId,o.detectorIndex);let m=0;const b=170,v={top:10,right:0,bottom:30,left:60};let y,O=null,k=null,w=null;var E;function _(e,r){const a=[{label:Object(h.b)(e.date)}],l=o.detectorLabel;if(void 0!==e.anomalyScore){const t=parseInt(e.anomalyScore);a.push({label:n.i18n.translate("xpack.ml.explorer.singleMetricChart.anomalyScoreLabel",{defaultMessage:"anomaly score"}),value:Object(f.g)(t),color:Object(f.j)(t),seriesIdentifier:{key:l},valueAccessor:"anomaly_score"}),!0===Object(i.p)(e)&&a.push({label:n.i18n.translate("xpack.ml.explorer.singleMetricChart.multiBucketImpactLabel",{defaultMessage:"multi-bucket impact"}),value:Object(f.h)(e.multiBucketImpact),seriesIdentifier:{key:l},valueAccessor:"multi_bucket_impact"}),void 0!==e.actual&&"rare"!==o.functionDescription?(a.push({label:n.i18n.translate("xpack.ml.explorer.singleMetricChart.actualLabel",{defaultMessage:"actual"}),value:Object(x.b)(e.actual,o.functionDescription,p),seriesIdentifier:{key:l},valueAccessor:"actual"}),a.push({label:n.i18n.translate("xpack.ml.explorer.singleMetricChart.typicalLabel",{defaultMessage:"typical"}),value:Object(x.b)(e.typical,o.functionDescription,p),seriesIdentifier:{key:l},valueAccessor:"typical"})):(a.push({label:n.i18n.translate("xpack.ml.explorer.singleMetricChart.valueLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,o.functionDescription,p),seriesIdentifier:{key:l},valueAccessor:"value"}),void 0!==e.byFieldName&&void 0!==e.numberOfCauses&&a.push({label:n.i18n.translate("xpack.ml.explorer.distributionChart.unusualByFieldValuesLabel",{defaultMessage:"{ numberOfCauses, plural, one {# unusual {byFieldName} value} other {#{plusSign} unusual {byFieldName} values}}",values:{numberOfCauses:e.numberOfCauses,byFieldName:e.byFieldName,plusSign:e.numberOfCauses<10?"":"+"}}),seriesIdentifier:{key:l},valueAccessor:"numberOfCauses"}))}else a.push({label:n.i18n.translate("xpack.ml.explorer.singleMetricChart.valueWithoutAnomalyScoreLabel",{defaultMessage:"value"}),value:Object(x.b)(e.value,o.functionDescription,p),seriesIdentifier:{key:l},valueAccessor:"value"});void 0!==e.scheduledEvents&&a.push({label:n.i18n.translate("xpack.ml.explorer.singleMetricChart.scheduledEventsLabel",{defaultMessage:"Scheduled events"}),value:e.scheduledEvents,seriesIdentifier:{key:l},valueAccessor:"scheduledEvents"}),t.show(a,r,{x:3*i.b,y:2*i.b})}!function(e){const t=d()(".ml-explorer-chart"),r=c.a.select(l).select(`.${j}`);r.select("svg").remove();const a=t.width(),i=b+v.top+v.bottom,n=r.append("svg").classed("ml-explorer-chart-svg",!0).attr("width",a).attr("height",i);k=c.a.scale.linear().range([b,0]).domain([e.min,e.max]).nice();const s=c.a.svg.axis().scale(k).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);let u=0;n.append("g").attr("class","temp-axis-label tick").selectAll("text.temp.axis").data(k.ticks()).enter().append("text").text((e=>void 0!==p?p.convert(e,"text"):k.tickFormat()(e))).each((function(){u=Math.max(this.getBBox().width+s.tickPadding(),u)})).remove(),c.a.select(".temp-axis-label").remove(),v.left=Math.max(u,40),m=a-v.left-v.right,O=c.a.time.scale().range([0,m]).domain([o.plotEarliest,o.plotLatest]),w=c.a.svg.line().x((e=>O(e.date))).y((e=>k(e.value))).defined((e=>null!==e.value)),y=n.append("g").attr("class","line-chart").attr("transform","translate("+v.left+","+v.top+")")}(o.chartLimits),E=o.chartData,y.append("rect").attr("x",0).attr("y",0).attr("height",b).attr("width",m).style("stroke","#cccccc").style("fill","none").style("stroke-width",1),function(){const t={min:u()(o.plotEarliest),max:u()(o.plotLatest)};r.setBounds(t),r.setInterval("auto");const a=r.getScaledDateFormat(),l=Math.max(o.selectedEarliest,o.plotEarliest),n=o.selectedLatest-o.selectedEarliest+1,s=c.a.svg.axis().scale(O).orient("bottom").innerTickSize(-170).outerTickSize(0).tickPadding(10).tickFormat((e=>u()(e).format(a))),d=!0===e||n>=o.plotLatest-o.plotEarliest;if(!1===d){const e=Object(i.k)(l,n,o.plotEarliest,o.plotLatest);s.tickValues(e)}else s.ticks(Object(i.m)(m,a));const h=c.a.svg.axis().scale(k).orient("left").innerTickSize(0).outerTickSize(0).tickPadding(10);void 0!==p&&h.tickFormat((e=>p.convert(e,"text")));const x=y.append("g"),f=x.append("g").attr("class","x axis").attr("transform","translate(0,170)").call(s);x.append("g").attr("class","y axis").call(h),!1===d&&Object(i.n)(f,l,n,m)}(),function(){if(!1===a)return;const e=Math.max(o.selectedEarliest,o.plotEarliest),t=Math.min(o.selectedLatest,o.plotLatest),r=O(t)-O(e);y.append("rect").attr("class","selected-interval").attr("x",O(new Date(e))+2).attr("y",2).attr("rx",3).attr("ry",3).attr("width",r-4).attr("height",166)}(),function(e){y.append("path").attr("class","values-line").attr("d",w(e))}(E),Object(i.g)(E,y,w),function(e){const r=y.append("g").attr("class","chart-markers").selectAll(".metric-value").data(e.filter((e=>(null!==e.value||"number"==typeof e.anomalyScore)&&!Object(i.o)(e))));r.exit().remove(),r.enter().append("circle").attr("r",i.b).on("mouseover",(function(e){_(e,this)})).on("mouseout",(()=>t.hide()));const a=e=>void 0!==e.anomalyScore&&Number(e.anomalyScore)>=s;r.attr("cx",(e=>O(e.date))).attr("cy",(e=>k(e.value))).attr("class",(e=>{let t="metric-value";return a(e)&&(t+=` anomaly-marker ${Object(f.l)(e.anomalyScore).id}`),t}));const l=y.select(".chart-markers").selectAll(".multi-bucket").data(e.filter((e=>a(e)&&!0===Object(i.o)(e))));l.exit().remove(),l.enter().append("path").attr("d",c.a.svg.symbol().size(i.c).type("cross")).attr("transform",(e=>`translate(${O(e.date)}, ${k(e.value)})`)).attr("class",(e=>`anomaly-marker multi-bucket ${Object(f.l)(e.anomalyScore).id}`)).on("mouseover",(function(e){_(e,this)})).on("mouseout",(()=>t.hide()));const o=y.select(".chart-markers").selectAll(".scheduled-event-marker").data(e.filter((e=>void 0!==e.scheduledEvents)));o.exit().remove(),o.enter().append("rect").attr("width",2*i.b).attr("height",i.d).attr("class","scheduled-event-marker").attr("rx",1).attr("ry",1),o.attr("x",(e=>O(e.date)-i.b)).attr("y",(e=>k(e.value)-i.d/2))}(E)}shouldComponentUpdate(){return!0}setRef(e){this.rootNode=e}render(){const{seriesConfig:e}=this.props;if(void 0===e)return null;const t=e.loading;return Object(y.jsx)("div",{className:"ml-explorer-chart",ref:this.setRef.bind(this)},t&&Object(y.jsx)(b.a,{height:215}),!t&&Object(y.jsx)("div",{className:j}))}}r(709);function O({entity:e}){return Object(y.jsx)("span",{className:"ml-explorer-chart-label-badge"},Object(y.jsx)(o.EuiBadge,{color:"hollow",className:"ml-reset-font-weight"},e.fieldName," ",Object(y.jsx)("strong",null,e.fieldValue)))}r(718);const k={[v.b.EVENT_DISTRIBUTION]:n.i18n.translate("xpack.ml.explorer.charts.infoTooltip.chartEventDistributionDescription",{defaultMessage:"The gray dots depict the approximate distribution of occurrences over time for a sample of {byFieldValuesParam} with more frequent event types at the top and rarer ones at the bottom.",values:{byFieldValuesParam:"by_field_values"}}),[v.b.POPULATION_DISTRIBUTION]:n.i18n.translate("xpack.ml.explorer.charts.infoTooltip.chartPopulationDistributionDescription",{defaultMessage:"The gray dots depict the approximate distribution of values over time for a sample of {overFieldValuesParam}.",values:{overFieldValuesParam:"over_field_values"}})};function w({toolTipData:e}){return Object(y.jsx)("dl",{className:"mlDescriptionList"},e.map((({title:e,description:t})=>Object(y.jsx)(l.a.Fragment,{key:`${e} ${t}`},Object(y.jsx)("dt",{className:"mlDescriptionList__title"},e),Object(y.jsx)("dd",{className:"mlDescriptionList__description"},t)))))}const E=({jobId:e,aggregationInterval:t,chartFunction:r,chartType:a,entityFields:i=[]})=>{const s=k[a],c=[{title:n.i18n.translate("xpack.ml.explorer.charts.infoTooltip.jobIdTitle",{defaultMessage:"job ID"}),description:e},{title:n.i18n.translate("xpack.ml.explorer.charts.infoTooltip.aggregationIntervalTitle",{defaultMessage:"aggregation interval"}),description:t},{title:n.i18n.translate("xpack.ml.explorer.charts.infoTooltip.chartFunctionTitle",{defaultMessage:"chart function"}),description:r}];return i.forEach((e=>{c.push({title:e.fieldName,description:e.fieldValue})})),Object(y.jsx)("div",{className:"ml-explorer-chart-info-tooltip"},Object(y.jsx)(w,{toolTipData:c}),s&&Object(y.jsx)(l.a.Fragment,null,Object(y.jsx)(o.EuiSpacer,{size:"s"}),Object(y.jsx)("div",{className:"ml-explorer-chart-description"},s)))};var _=r(41),I=r(228);r(727);const T=({onFilter:e,influencerFieldName:t,influencerFieldValue:r})=>Object(y.jsx)(l.a.Fragment,null,Object(y.jsx)(o.EuiToolTip,{content:Object(y.jsx)(_.FormattedMessage,{id:"xpack.ml.entityFilter.addFilterTooltip",defaultMessage:"Add filter"})},Object(y.jsx)(o.EuiButtonIcon,{size:"s",className:"filter-button",onClick:Object(I.a)((()=>{e({influencerFieldName:t,influencerFieldValue:r,action:f.a.ADD})})),iconType:"plusInCircle","aria-label":n.i18n.translate("xpack.ml.entityFilter.addFilterAriaLabel",{defaultMessage:"Add filter for {influencerFieldName} {influencerFieldValue}",values:{influencerFieldName:t,influencerFieldValue:r}})})),Object(y.jsx)(o.EuiToolTip,{content:Object(y.jsx)(_.FormattedMessage,{id:"xpack.ml.entityFilter.removeFilterTooltip",defaultMessage:"Remove filter"})},Object(y.jsx)(o.EuiButtonIcon,{size:"s",className:"filter-button",onClick:Object(I.a)((()=>{e({influencerFieldName:t,influencerFieldValue:r,action:f.a.REMOVE})})),iconType:"minusInCircle","aria-label":n.i18n.translate("xpack.ml.entityFilter.removeFilterAriaLabel",{defaultMessage:"Remove filter for {influencerFieldName} {influencerFieldValue}",values:{influencerFieldName:t,influencerFieldValue:r}})})));function L({detectorLabel:e,entityFields:t,infoTooltip:r,wrapLabel:i=!1,onSelectEntity:n}){const s=!0===i||0===t.length||0===e.length?Object(y.jsx)(l.a.Fragment,null," "):Object(y.jsx)(l.a.Fragment,null," – "),c=Object(a.useCallback)((({influencerFieldName:e,influencerFieldValue:t,action:r})=>n(e,t,r)),[n]),p=t.map((e=>{const t=`${r.chartFunction}-${e.fieldName}-${e.fieldType}-${e.fieldValue}`;return Object(y.jsx)(a.Fragment,{key:`badge-wrapper-${t}`},Object(y.jsx)(O,{entity:e}),void 0!==n&&Object(y.jsx)(T,{onFilter:c,influencerFieldName:e.fieldName,influencerFieldValue:e.fieldValue}))})),d=Object(y.jsx)("span",{className:"ml-explorer-chart-info-icon"},Object(y.jsx)(o.EuiIconTip,{className:"ml-explorer-chart-eui-icon-tip",content:Object(y.jsx)(E,r),position:"top",size:"s"}));return Object(y.jsx)(l.a.Fragment,null,Object(y.jsx)("span",{className:"ml-explorer-chart-label"},Object(y.jsx)("span",{className:"ml-explorer-chart-label-detector"},e,s),i&&d,!i&&Object(y.jsx)(l.a.Fragment,null,p," ",d)),i&&Object(y.jsx)("span",{className:"ml-explorer-chart-label-badges"},p))}var S=r(231),M=r(42),A=r(86);const D=({errorMessagesByType:e})=>{if(!e||0===Object.keys(e).length)return null;const t=Object.keys(e).map((t=>Object(y.jsx)(o.EuiCallOut,{color:"warning",size:"s",key:t},Object(y.jsx)(_.FormattedMessage,{id:"xpack.ml.explorerCharts.errorCallOutMessage",defaultMessage:"You can't view anomaly charts for {jobs} because {reason}.",values:{jobs:[...e[t]].join(", "),reason:t}}))));return Object(y.jsx)(l.a.Fragment,null,t,Object(y.jsx)(o.EuiSpacer,{size:"m"}))};var F=r(172),C=r(57),N=r(16);const B=[{stop:N.ANOMALY_THRESHOLD.LOW,color:N.SEVERITY_COLORS.WARNING},{stop:N.ANOMALY_THRESHOLD.MINOR,color:N.SEVERITY_COLORS.MINOR},{stop:N.ANOMALY_THRESHOLD.MAJOR,color:N.SEVERITY_COLORS.MAJOR},{stop:N.ANOMALY_THRESHOLD.CRITICAL,color:N.SEVERITY_COLORS.CRITICAL}];function R(e,t){const r=[];for(let l=0;l<e.length;l++){var a;const o=e[l],i=o.geo_results||(null==o?void 0:o.causes)&&(null==o||null===(a=o.causes[0])||void 0===a?void 0:a.geo_results),n=i&&i[t];if(void 0!==n){const e=n.split(",").map((e=>Number(e))).reverse();r.push({type:"Feature",geometry:{type:"Point",coordinates:e},properties:{record_score:Math.floor(o.record_score),[t]:e.map((e=>e.toFixed(2)))}})}}return r}const z=e=>({id:"anomalies_typical_layer",label:"Typical",sourceDescriptor:{id:"b7486535-171b-4d3b-bb2e-33c1a0a2854e",type:"GEOJSON_FILE",__featureCollection:{features:R(e,"typical_point"),type:"FeatureCollection"}},visible:!0,style:{type:"VECTOR",properties:{fillColor:{type:"STATIC",options:{color:"#98A2B2"}},lineColor:{type:"STATIC",options:{color:"#fff"}},lineWidth:{type:"STATIC",options:{size:2}},iconSize:{type:"STATIC",options:{size:6}}}},type:"VECTOR"});var V=r(359);function U({seriesConfig:e}){const[t,r]=Object(a.useState)([]);return Object(a.useEffect)((()=>{var t;e.mapData&&e.mapData.length>0&&r([(t=e.mapData,{id:"anomalies_actual_layer",label:"Actual",sourceDescriptor:{id:"b7486535-171b-4d3b-bb2e-33c1a0a2854d",type:"GEOJSON_FILE",__fields:[{name:"record_score",type:"number"}],__featureCollection:{features:R(t,"actual_point"),type:"FeatureCollection"}},visible:!0,style:{type:"VECTOR",properties:{fillColor:{type:C.STYLE_TYPE.DYNAMIC,options:{customColorRamp:B,field:{name:"record_score",origin:C.FIELD_ORIGIN.SOURCE},useCustomColorRamp:!0}},lineColor:{type:"STATIC",options:{color:"#fff"}},lineWidth:{type:"STATIC",options:{size:2}},iconSize:{type:"STATIC",options:{size:6}}}},type:"VECTOR"}),z(e.mapData)])}),[e]),Object(y.jsx)("div",{"data-test-subj":"xpack.ml.explorer.embeddedMap",style:{width:"100%",height:300}},Object(y.jsx)(V.a,{layerList:t}))}const P=n.i18n.translate("xpack.ml.explorer.charts.tooManyBucketsDescription",{defaultMessage:"This selection contains too many buckets to be displayed. You should shorten the time range of the view or narrow the selection in the timeline."}),H=n.i18n.translate("xpack.ml.explorer.charts.openInSingleMetricViewerButtonLabel",{defaultMessage:"Open in Single Metric Viewer"}),$=n.i18n.translate("xpack.ml.explorer.charts.mapsPluginMissingMessage",{defaultMessage:"maps or embeddable start plugin not found"});function Y(e){const{jobId:t,detectorLabel:r,entityFields:a}=e;return`${t}_${r}_${a.map((e=>`${e.fieldName}/${e.fieldValue}`)).join(",")}`}function J({series:e,severity:t,tooManyBuckets:r,wrapLabel:n,mlLocator:s,timeBuckets:c,timefilter:p,onSelectEntity:d,recentlyAccessed:m,tooManyBucketsCalloutMsg:u,showSelectedInterval:h}){const[x,f]=Object(a.useState)("");Object(a.useEffect)((()=>{let t=!1;return(async()=>{if(!t&&e.functionDescription!==A.b.LAT_LONG)try{const t=await Object(i.j)(s,e,p);f(t)}catch(e){f("")}})(),()=>{t=!0}}),[s,e]);const b=Object(a.useCallback)((()=>{m&&Object(F.a)("timeseriesexplorer",e.jobId,x,m)}),[x,m]),{detectorLabel:g,entityFields:j}=e,O=Object(i.i)(e);let k=Object(y.jsx)(l.a.Fragment,null,g);if(O===v.b.EVENT_DISTRIBUTION){const t=e.entityFields.find((e=>"by"===e.fieldType));void 0!==t&&(k=Object(y.jsx)(l.a.Fragment,null,Object(y.jsx)(_.FormattedMessage,{id:"xpack.ml.explorer.charts.detectorLabel",defaultMessage:'{detectorLabel}{br}y-axis event distribution split by "{fieldName}"',values:{detectorLabel:g,br:Object(y.jsx)("br",null),fieldName:t.fieldName}})),n=!0)}return Object(y.jsx)(l.a.Fragment,null,Object(y.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(o.EuiFlexItem,{grow:!1},Object(y.jsx)(L,{detectorLabel:k,entityFields:j,infoTooltip:{...e.infoTooltip,chartType:O},wrapLabel:n,onSelectEntity:d})),Object(y.jsx)(o.EuiFlexItem,{grow:!1},Object(y.jsx)("div",{className:"ml-explorer-chart-icons"},r&&Object(y.jsx)("span",{className:"ml-explorer-chart-icon"},Object(y.jsx)(o.EuiIconTip,{content:null!=u?u:P,position:"top",size:"s",type:"alert",color:"warning"})),x&&Object(y.jsx)(o.EuiToolTip,{position:"top",content:H},Object(y.jsx)(o.EuiButtonEmpty,{iconSide:"right",iconType:"visLine",size:"xs",href:x,onClick:b},Object(y.jsx)(_.FormattedMessage,{id:"xpack.ml.explorer.charts.viewLabel",defaultMessage:"View"})))))),O===v.b.GEO_MAP?Object(y.jsx)(S.a,null,(t=>Object(y.jsx)(U,{seriesConfig:e,tooltipService:t}))):O===v.b.EVENT_DISTRIBUTION||O===v.b.POPULATION_DISTRIBUTION?Object(y.jsx)(S.a,null,(a=>Object(y.jsx)(explorer_chart_distribution_ExplorerChartDistribution,{timeBuckets:c,tooManyBuckets:r,seriesConfig:e,severity:t,tooltipService:a,showSelectedInterval:h}))):O===v.b.SINGLE_METRIC?Object(y.jsx)(S.a,null,(a=>Object(y.jsx)(explorer_chart_single_metric_ExplorerChartSingleMetric,{timeBuckets:c,tooManyBuckets:r,seriesConfig:e,severity:t,tooltipService:a,showSelectedInterval:h}))):void 0)}const W=Object(M.withKibana)((({chartsPerRow:e,seriesToPlot:t,severity:r,tooManyBuckets:a,kibana:n,errorMessages:s,mlLocator:c,timeBuckets:p,timefilter:d,onSelectEntity:m,tooManyBucketsCalloutMsg:u,showSelectedInterval:h})=>{const{services:{chrome:{recentlyAccessed:x},embeddable:f,maps:b}}=n;let g;f&&b||(g=[],t.forEach((e=>{"lat_long"===e.functionDescription?void 0===s[$]?s[$]=new Set([e.jobId]):s[$].add(e.jobId):g.push(e)})));const v=void 0!==g?g:t,j=1===e?"calc(100% - 20px)":"auto",O=1===e?0:e,k=v.some((e=>Object(i.l)(e)));return Object(y.jsx)(l.a.Fragment,null,Object(y.jsx)(D,{errorMessagesByType:s}),Object(y.jsx)(o.EuiFlexGrid,{columns:O,"data-test-subj":"mlExplorerChartsContainer"},v.length>0&&v.map((e=>Object(y.jsx)(o.EuiFlexItem,{key:Y(e),className:"ml-explorer-chart-container",style:{minWidth:j}},Object(y.jsx)(J,{series:e,severity:r,tooManyBuckets:a,wrapLabel:k,mlLocator:c,timeBuckets:p,timefilter:d,onSelectEntity:m,recentlyAccessed:x,tooManyBucketsCalloutMsg:u,showSelectedInterval:h}))))))}))},359:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(15),l=r(40),o=r(57),i=r(45),n=r(66),s=r(11);function c({layerList:e,mapEmbeddableInput:t,renderTooltipContent:r}){const[c,p]=Object(a.useState)(),d=Object(a.useRef)(null),m=Object(a.useRef)(),{services:{embeddable:u,maps:h}}=Object(n.b)(),x=u?u.getEmbeddableFactory(o.MAP_SAVED_OBJECT_TYPE):void 0;return Object(a.useEffect)((()=>{!async function(){c&&!Object(i.isErrorEmbeddable)(c)&&Array.isArray(e)&&Array.isArray(m.current)&&c.setLayerList([...m.current,...e])}()}),[c,e]),Object(a.useEffect)((()=>{!async function(){if(!x)return void console.error("Map embeddable not found.");const e={id:Object(l.htmlIdGenerator)()(),attributes:{title:""},filters:[],hidePanelTitles:!0,viewMode:i.ViewMode.VIEW,isLayerTOCOpen:!1,hideFilterActions:!0,mapSettings:{disableInteractive:!1,hideToolbarOverlay:!1,hideLayerControl:!1,hideViewControl:!1,initialLocation:o.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS,autoFitToDataBounds:!0}},t=await x.create(e);if(t&&!Object(i.isErrorEmbeddable)(t)){const e=h?await h.createLayerDescriptors.createBasemapLayerDescriptor():null;e&&(m.current=[e],await t.setLayerList(m.current))}p(t)}()}),[]),Object(a.useEffect)((()=>{c&&!Object(i.isErrorEmbeddable)(c)&&void 0!==t&&c.updateInput(t)}),[c,t]),Object(a.useEffect)((()=>{c&&!Object(i.isErrorEmbeddable)(c)&&void 0!==r&&c.setRenderTooltipContent(r)}),[c,r]),Object(a.useEffect)((()=>{d.current&&c&&c.render(d.current)}),[c,d]),u?h?Object(s.jsx)("div",{"data-test-subj":"mlEmbeddedMapContent",className:"mlEmbeddedMapContent",ref:d}):(console.error("Maps start plugin not found"),null):(console.error("Embeddable start plugin not found"),null)}},700:function(e,t,r){switch(window.__kbnThemeTag__){case"v7dark":return r(701);case"v7light":return r(703);case"v8dark":return r(705);case"v8light":return r(707)}},701:function(e,t,r){var a=r(68),l=r(702);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},702:function(e,t,r){(t=r(69)(!1)).push([e.i,'.ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}.ml-reset-font-weight{font-weight:normal}.ml-explorer-chart-container{overflow:hidden}.ml-explorer-chart-container .ml-explorer-chart-svg{font-size:12px;font-family:"Inter UI",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#1D1E24;opacity:1}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:rgba(200,200,200,0.1);stroke:#98A2B3;stroke-width:2px;stroke-opacity:.8}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#98A2B3;fill:#343741;pointer-events:none}.ml-explorer-chart-container .axis path,.ml-explorer-chart-container .axis line{fill:none;stroke:#343741;shape-rendering:crispEdges}.ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:rgba(0,0,0,0.2)}.ml-explorer-chart-container .axis text{fill:#98A2B3}.ml-explorer-chart-container .axis .tick line{stroke:#343741;stroke-width:1px}.ml-explorer-chart-container .values-line{fill:none;stroke:#1BA9F5;stroke-width:2}.ml-explorer-chart-container .values-dots circle,.ml-explorer-chart-container .values-dots-circle{fill:#1BA9F5;stroke-width:0}.ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#535966}.ml-explorer-chart-container .metric-value{opacity:1;fill:transparent;stroke:#1BA9F5;stroke-width:0}.ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#535966}.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#1BA9F5}.ml-explorer-chart-container .anomaly-marker.critical{fill:#FE5050}.ml-explorer-chart-container .anomaly-marker.major{fill:#FBA740}.ml-explorer-chart-container .anomaly-marker.minor{fill:#FDEC25}.ml-explorer-chart-container .anomaly-marker.warning{fill:#8BC8FB}.ml-explorer-chart-container .anomaly-marker.low{fill:#D2E9F7}.ml-explorer-chart-container .metric-value:hover,.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke-opacity:.65}.ml-explorer-chart{overflow:hidden}.ml-explorer-chart-content-wrapper{height:215px}.ml-explorer-chart-axis-emphasis{font-weight:bold}.explorer-charts ml-explorer-charts-container .row{padding:10px}.explorer-charts ml-explorer-charts-container label{font-size:12px}.explorer-charts ml-explorer-charts-container select{font-size:14px;font-style:400}.explorer-charts ml-explorer-charts-container .chart-controls label{padding:0 0 10px 0}.explorer-charts ml-explorer-charts-container .no-results-item{text-align:center;padding-top:10px}.explorer-charts ml-explorer-charts-container .ml-anomaly-interim-result{font-style:italic;padding-bottom:3px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded{width:100%;padding:5px 20px;overflow:hidden;font-size:12px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td{padding:0 0 2px 0}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded table tr>td:first-child{padding-left:2px;vertical-align:top}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:first-child{width:140px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:nth-child(2){padding-left:5px}.ml-explorer-chart-icons{float:right;padding-left:5px;margin:2px -8px 0 0}\n',""]),e.exports=t},703:function(e,t,r){var a=r(68),l=r(704);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},704:function(e,t,r){(t=r(69)(!1)).push([e.i,'.ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}.ml-reset-font-weight{font-weight:normal}.ml-explorer-chart-container{overflow:hidden}.ml-explorer-chart-container .ml-explorer-chart-svg{font-size:12px;font-family:"Inter UI",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#fff;opacity:1}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:rgba(200,200,200,0.1);stroke:#69707D;stroke-width:2px;stroke-opacity:.8}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#69707D;fill:#D3DAE6;pointer-events:none}.ml-explorer-chart-container .axis path,.ml-explorer-chart-container .axis line{fill:none;stroke:#D3DAE6;shape-rendering:crispEdges}.ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:rgba(0,0,0,0.2)}.ml-explorer-chart-container .axis text{fill:#69707D}.ml-explorer-chart-container .axis .tick line{stroke:#D3DAE6;stroke-width:1px}.ml-explorer-chart-container .values-line{fill:none;stroke:#006BB4;stroke-width:2}.ml-explorer-chart-container .values-dots circle,.ml-explorer-chart-container .values-dots-circle{fill:#006BB4;stroke-width:0}.ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#98A2B3}.ml-explorer-chart-container .metric-value{opacity:1;fill:transparent;stroke:#006BB4;stroke-width:0}.ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#98A2B3}.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#006BB4}.ml-explorer-chart-container .anomaly-marker.critical{fill:#FE5050}.ml-explorer-chart-container .anomaly-marker.major{fill:#FBA740}.ml-explorer-chart-container .anomaly-marker.minor{fill:#FDEC25}.ml-explorer-chart-container .anomaly-marker.warning{fill:#8BC8FB}.ml-explorer-chart-container .anomaly-marker.low{fill:#D2E9F7}.ml-explorer-chart-container .metric-value:hover,.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke-opacity:.65}.ml-explorer-chart{overflow:hidden}.ml-explorer-chart-content-wrapper{height:215px}.ml-explorer-chart-axis-emphasis{font-weight:bold}.explorer-charts ml-explorer-charts-container .row{padding:10px}.explorer-charts ml-explorer-charts-container label{font-size:12px}.explorer-charts ml-explorer-charts-container select{font-size:14px;font-style:400}.explorer-charts ml-explorer-charts-container .chart-controls label{padding:0 0 10px 0}.explorer-charts ml-explorer-charts-container .no-results-item{text-align:center;padding-top:10px}.explorer-charts ml-explorer-charts-container .ml-anomaly-interim-result{font-style:italic;padding-bottom:3px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded{width:100%;padding:5px 20px;overflow:hidden;font-size:12px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td{padding:0 0 2px 0}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded table tr>td:first-child{padding-left:2px;vertical-align:top}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:first-child{width:140px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:nth-child(2){padding-left:5px}.ml-explorer-chart-icons{float:right;padding-left:5px;margin:2px -8px 0 0}\n',""]),e.exports=t},705:function(e,t,r){var a=r(68),l=r(706);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},706:function(e,t,r){(t=r(69)(!1)).push([e.i,'.ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}.ml-reset-font-weight{font-weight:normal}.ml-explorer-chart-container{overflow:hidden}.ml-explorer-chart-container .ml-explorer-chart-svg{font-size:12px;font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#1D1E24;opacity:1}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:rgba(200,200,200,0.1);stroke:#98A2B3;stroke-width:2px;stroke-opacity:.8}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#98A2B3;fill:#343741;pointer-events:none}.ml-explorer-chart-container .axis path,.ml-explorer-chart-container .axis line{fill:none;stroke:#343741;shape-rendering:crispEdges}.ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:rgba(0,0,0,0.2)}.ml-explorer-chart-container .axis text{fill:#98A2B3}.ml-explorer-chart-container .axis .tick line{stroke:#343741;stroke-width:1px}.ml-explorer-chart-container .values-line{fill:none;stroke:#36A2EF;stroke-width:2}.ml-explorer-chart-container .values-dots circle,.ml-explorer-chart-container .values-dots-circle{fill:#36A2EF;stroke-width:0}.ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#535966}.ml-explorer-chart-container .metric-value{opacity:1;fill:transparent;stroke:#36A2EF;stroke-width:0}.ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#535966}.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#36A2EF}.ml-explorer-chart-container .anomaly-marker.critical{fill:#FE5050}.ml-explorer-chart-container .anomaly-marker.major{fill:#FBA740}.ml-explorer-chart-container .anomaly-marker.minor{fill:#FDEC25}.ml-explorer-chart-container .anomaly-marker.warning{fill:#8BC8FB}.ml-explorer-chart-container .anomaly-marker.low{fill:#D2E9F7}.ml-explorer-chart-container .metric-value:hover,.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke-opacity:.65}.ml-explorer-chart{overflow:hidden}.ml-explorer-chart-content-wrapper{height:215px}.ml-explorer-chart-axis-emphasis{font-weight:bold}.explorer-charts ml-explorer-charts-container .row{padding:10px}.explorer-charts ml-explorer-charts-container label{font-size:12px}.explorer-charts ml-explorer-charts-container select{font-size:14px;font-style:400}.explorer-charts ml-explorer-charts-container .chart-controls label{padding:0 0 10px 0}.explorer-charts ml-explorer-charts-container .no-results-item{text-align:center;padding-top:10px}.explorer-charts ml-explorer-charts-container .ml-anomaly-interim-result{font-style:italic;padding-bottom:3px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded{width:100%;padding:5px 20px;overflow:hidden;font-size:12px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td{padding:0 0 2px 0}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded table tr>td:first-child{padding-left:2px;vertical-align:top}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:first-child{width:140px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:nth-child(2){padding-left:5px}.ml-explorer-chart-icons{float:right;padding-left:5px;margin:2px -8px 0 0}\n',""]),e.exports=t},707:function(e,t,r){var a=r(68),l=r(708);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},708:function(e,t,r){(t=r(69)(!1)).push([e.i,'.ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}.ml-reset-font-weight{font-weight:normal}.ml-explorer-chart-container{overflow:hidden}.ml-explorer-chart-container .ml-explorer-chart-svg{font-size:12px;font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#fff;opacity:1}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:rgba(200,200,200,0.1);stroke:#69707D;stroke-width:2px;stroke-opacity:.8}.ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#69707D;fill:#D3DAE6;pointer-events:none}.ml-explorer-chart-container .axis path,.ml-explorer-chart-container .axis line{fill:none;stroke:#D3DAE6;shape-rendering:crispEdges}.ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:rgba(0,0,0,0.2)}.ml-explorer-chart-container .axis text{fill:#69707D}.ml-explorer-chart-container .axis .tick line{stroke:#D3DAE6;stroke-width:1px}.ml-explorer-chart-container .values-line{fill:none;stroke:#07C;stroke-width:2}.ml-explorer-chart-container .values-dots circle,.ml-explorer-chart-container .values-dots-circle{fill:#07C;stroke-width:0}.ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#98A2B3}.ml-explorer-chart-container .metric-value{opacity:1;fill:transparent;stroke:#07C;stroke-width:0}.ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#98A2B3}.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#07C}.ml-explorer-chart-container .anomaly-marker.critical{fill:#FE5050}.ml-explorer-chart-container .anomaly-marker.major{fill:#FBA740}.ml-explorer-chart-container .anomaly-marker.minor{fill:#FDEC25}.ml-explorer-chart-container .anomaly-marker.warning{fill:#8BC8FB}.ml-explorer-chart-container .anomaly-marker.low{fill:#D2E9F7}.ml-explorer-chart-container .metric-value:hover,.ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke-opacity:.65}.ml-explorer-chart{overflow:hidden}.ml-explorer-chart-content-wrapper{height:215px}.ml-explorer-chart-axis-emphasis{font-weight:bold}.explorer-charts ml-explorer-charts-container .row{padding:10px}.explorer-charts ml-explorer-charts-container label{font-size:12px}.explorer-charts ml-explorer-charts-container select{font-size:14px;font-style:400}.explorer-charts ml-explorer-charts-container .chart-controls label{padding:0 0 10px 0}.explorer-charts ml-explorer-charts-container .no-results-item{text-align:center;padding-top:10px}.explorer-charts ml-explorer-charts-container .ml-anomaly-interim-result{font-style:italic;padding-bottom:3px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded{width:100%;padding:5px 20px;overflow:hidden;font-size:12px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td{padding:0 0 2px 0}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded table tr>td:first-child{padding-left:2px;vertical-align:top}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:first-child{width:140px}.explorer-charts ml-explorer-charts-container .ml-tablerow-expanded td:nth-child(2){padding-left:5px}.ml-explorer-chart-icons{float:right;padding-left:5px;margin:2px -8px 0 0}\n',""]),e.exports=t},709:function(e,t,r){switch(window.__kbnThemeTag__){case"v7dark":return r(710);case"v7light":return r(712);case"v8dark":return r(714);case"v8light":return r(716)}},710:function(e,t,r){var a=r(68),l=r(711);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},711:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}\n",""]),e.exports=t},712:function(e,t,r){var a=r(68),l=r(713);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},713:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}\n",""]),e.exports=t},714:function(e,t,r){var a=r(68),l=r(715);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},715:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}\n",""]),e.exports=t},716:function(e,t,r){var a=r(68),l=r(717);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},717:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-eui-icon-tip{max-width:none}.ml-explorer-chart-label-badges{margin-top:4px;display:flex;align-items:center}\n",""]),e.exports=t},718:function(e,t,r){switch(window.__kbnThemeTag__){case"v7dark":return r(719);case"v7light":return r(721);case"v8dark":return r(723);case"v8light":return r(725)}},719:function(e,t,r){var a=r(68),l=r(720);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},720:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-info-tooltip{max-width:384px}.ml-explorer-chart-description{font-size:12px;font-style:italic}.ml-explorer-chart-info-tooltip .mlDescriptionList>*{margin-top:4px}.ml-explorer-chart-info-tooltip .mlDescriptionList{display:grid;grid-template-columns:max-content auto}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__title{color:#fff;font-size:12px;font-weight:normal;white-space:nowrap;grid-column-start:1}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__description{color:#fff;font-size:12px;font-weight:bold;padding-left:8px;max-width:256px;grid-column-start:2}\n",""]),e.exports=t},721:function(e,t,r){var a=r(68),l=r(722);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},722:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-info-tooltip{max-width:384px}.ml-explorer-chart-description{font-size:12px;font-style:italic}.ml-explorer-chart-info-tooltip .mlDescriptionList>*{margin-top:4px}.ml-explorer-chart-info-tooltip .mlDescriptionList{display:grid;grid-template-columns:max-content auto}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__title{color:#fff;font-size:12px;font-weight:normal;white-space:nowrap;grid-column-start:1}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__description{color:#fff;font-size:12px;font-weight:bold;padding-left:8px;max-width:256px;grid-column-start:2}\n",""]),e.exports=t},723:function(e,t,r){var a=r(68),l=r(724);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},724:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-info-tooltip{max-width:384px}.ml-explorer-chart-description{font-size:12px;font-style:italic}.ml-explorer-chart-info-tooltip .mlDescriptionList>*{margin-top:4px}.ml-explorer-chart-info-tooltip .mlDescriptionList{display:grid;grid-template-columns:max-content auto}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__title{color:#fff;font-size:12px;font-weight:normal;white-space:nowrap;grid-column-start:1}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__description{color:#fff;font-size:12px;font-weight:bold;padding-left:8px;max-width:256px;grid-column-start:2}\n",""]),e.exports=t},725:function(e,t,r){var a=r(68),l=r(726);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},726:function(e,t,r){(t=r(69)(!1)).push([e.i,".ml-explorer-chart-info-tooltip{max-width:384px}.ml-explorer-chart-description{font-size:12px;font-style:italic}.ml-explorer-chart-info-tooltip .mlDescriptionList>*{margin-top:4px}.ml-explorer-chart-info-tooltip .mlDescriptionList{display:grid;grid-template-columns:max-content auto}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__title{color:#fff;font-size:12px;font-weight:normal;white-space:nowrap;grid-column-start:1}.ml-explorer-chart-info-tooltip .mlDescriptionList .mlDescriptionList__description{color:#fff;font-size:12px;font-weight:bold;padding-left:8px;max-width:256px;grid-column-start:2}\n",""]),e.exports=t},727:function(e,t,r){switch(window.__kbnThemeTag__){case"v7dark":return r(728);case"v7light":return r(730);case"v8dark":return r(732);case"v8light":return r(734)}},728:function(e,t,r){var a=r(68),l=r(729);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},729:function(e,t,r){(t=r(69)(!1)).push([e.i,".filter-button{opacity:.5;width:16px;height:16px;transform:translateY(-1px)}.filter-button .euiIcon{width:12px;height:12px}.filter-button:hover{opacity:1}\n",""]),e.exports=t},730:function(e,t,r){var a=r(68),l=r(731);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},731:function(e,t,r){(t=r(69)(!1)).push([e.i,".filter-button{opacity:.5;width:16px;height:16px;transform:translateY(-1px)}.filter-button .euiIcon{width:12px;height:12px}.filter-button:hover{opacity:1}\n",""]),e.exports=t},732:function(e,t,r){var a=r(68),l=r(733);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},733:function(e,t,r){(t=r(69)(!1)).push([e.i,".filter-button{opacity:.5;width:16px;height:16px;transform:translateY(-1px)}.filter-button .euiIcon{width:12px;height:12px}.filter-button:hover{opacity:1}\n",""]),e.exports=t},734:function(e,t,r){var a=r(68),l=r(735);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var o={insert:"head",singleton:!1};a(l,o);e.exports=l.locals||{}},735:function(e,t,r){(t=r(69)(!1)).push([e.i,".filter-button{opacity:.5;width:16px;height:16px;transform:translateY(-1px)}.filter-button .euiIcon{width:12px;height:12px}.filter-button:hover{opacity:1}\n",""]),e.exports=t},97:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"d",(function(){return b})),r.d(t,"f",(function(){return g})),r.d(t,"p",(function(){return v})),r.d(t,"g",(function(){return y})),r.d(t,"e",(function(){return j})),r.d(t,"k",(function(){return O})),r.d(t,"i",(function(){return k})),r.d(t,"j",(function(){return w})),r.d(t,"l",(function(){return E})),r.d(t,"m",(function(){return _})),r.d(t,"q",(function(){return I})),r.d(t,"n",(function(){return T})),r.d(t,"o",(function(){return L})),r.d(t,"r",(function(){return S})),r.d(t,"c",(function(){return A})),r.d(t,"b",(function(){return D})),r.d(t,"h",(function(){return F})),r.d(t,"s",(function(){return C}));var a=r(8),l=r(48),o=r.n(l),i=r(108),n=r(7),s=r(24),c=r(74),p=r(26),d=r(67),m=r(79),u=r(99),h=r(22),x=r(78);function f(e){return e.map((e=>{const t=Object(p.a)(e.analysis_config.bucket_span);return{id:e.job_id,selected:!1,bucketSpanSeconds:t.asSeconds()}}))}function b(){return{selectedCells:void 0,viewByLoadedForTimeFormatted:null,swimlaneLimit:void 0}}function g(){return{fieldName:"",laneLabels:[],points:[],interval:3600}}async function v(e,t,r,l,o,i,n,s){const c={};i.forEach((e=>{const t=e.fieldName;void 0===c[e.fieldName]&&(c[e.fieldName]=[]),c[t].push(e.fieldValue)})),o.forEach((e=>{(e.influencers||[]).forEach((e=>{const t=e.influencer_field_name,r=e.influencer_field_values;void 0===c[t]&&(c[t]=[]),c[t].push(...r)}))}));const p={};Object.keys(c).forEach((e=>{const t=c[e];p[e]=Object(a.uniq)(t)}));const d=[];return Object.keys(p).forEach((e=>{void 0!==i.find((t=>t.fieldName===e))?d.push(...i):p[e].forEach((t=>{d.push({fieldName:e,fieldValue:t})}))})),await S(e,t,r,l,d,n,s)}function y(e=[]){const t=[];return e.forEach((e=>{const r=m.a.getJob(e.id);void 0!==r&&r.analysis_config&&r.analysis_config.influencers&&t.push(...r.analysis_config.influencers)})),t}function j(){const e=Object(h.l)().get("dateFormat:tz");return"Browser"!==e?e:o.a.tz.guess()}function O(e,t,r){let a=r.min.valueOf(),l=r.max.valueOf();return void 0!==e&&void 0!==e.times&&(a=void 0!==e.times[0]?1e3*e.times[0]:r.min.valueOf(),l=r.max.valueOf(),void 0!==e.times[1]&&(l=1e3*e.times[1]-1)),{earliestMs:a,latestMs:l}}function k(e,t){return void 0!==e&&e.type!==x.h.OVERALL&&void 0!==e.viewByFieldName&&e.viewByFieldName!==x.j?e.lanes.map((e=>({fieldName:t,fieldValue:e}))):[]}function w(e,t){return void 0!==e&&e.type!==x.h.OVERALL&&void 0!==e.viewByFieldName&&e.viewByFieldName===x.j?e.lanes:t.map((e=>e.id))}function E(e,t){const r=Object(h.j)().getActiveBounds(),a=Object(u.c)();a.setInterval("auto"),a.setBounds(r);const l=a.getInterval().asSeconds(),o=(r.max.valueOf()-r.min.valueOf())/1e3,i=parseInt(o/l);Math.floor(t/i*100)/100<8&&a.setInterval(2*l+"s");const n=e.reduce(((e,t)=>Math.max(e,t.bucketSpanSeconds)),0);return n>l&&(a.setInterval(n+"s"),a.setBounds(r)),a.getInterval()}function _({currentViewBySwimlaneFieldName:e,filterActive:t,filteredFields:r,isAndOperator:l,selectedCells:o,selectedJobs:i}){const n=i.map((e=>e.id)),s=Object(a.sortBy)(Object(a.uniq)(m.a.jobs.reduce(((e,t)=>n.some((e=>e===t.job_id))?e.concat(t.analysis_config.influencers||[]):e),[])),(e=>e.toLowerCase()));s.push(x.j);let c,p=s;if(-1!==p.indexOf(e))c=e;else if(n.length>1)c=x.j;else if(m.a.jobs.length>0&&n.length>0){const e=m.a.jobs.find((e=>e.job_id===n[0])),t=e.analysis_config.influencers||[];e.analysis_config.detectors.forEach((e=>void 0!==e.partition_field_name&&-1!==t.indexOf(e.partition_field_name)?(c=e.partition_field_name,!1):void 0!==e.over_field_name&&-1!==t.indexOf(e.over_field_name)?(c=e.over_field_name,!1):void 0!==e.by_field_name&&void 0===e.over_field_name&&-1!==t.indexOf(e.by_field_name)?(c=e.by_field_name,!1):void 0)),void 0===c&&(c=t.length>0?t[0]:p.length>0?p[0]:void 0)}if(!0===t&&!0===l&&null===o)p=[x.j];else if(!0===t&&Array.isArray(p)&&Array.isArray(r)){const e=p.filter((e=>r.includes(e)||e===x.j||o&&o.viewByFieldName===e));e.length>1&&(p=e)}return{viewBySwimlaneFieldName:c,viewBySwimlaneOptions:p}}function I(e,t,r){const a=e.map((e=>e.id)),l=O(void 0,0,r);return new Promise((e=>{d.ml.annotations.getAnnotations$({jobIds:a,earliestMs:l.earliestMs,latestMs:l.latestMs,maxAnnotations:i.a}).toPromise().then((t=>{if(void 0!==t.error||void 0===t.annotations){const r=Object(s.b)(t.error);return e({annotationsData:[],error:""!==r?r:void 0})}const r=[];return a.forEach((e=>{const a=t.annotations[e];void 0!==a&&r.push(...a)})),e({annotationsData:r.sort(((e,t)=>e.timestamp-t.timestamp)).map(((e,t)=>(e.key=(t+1).toString(),e)))})})).catch((t=>{const r=Object(s.b)(t);return e({annotationsData:[],error:""!==r?r:void 0})}))}))}function T(e,t,r,a){const l=w(e,t),o=O(e,0,a);return new Promise((e=>{d.ml.annotations.getAnnotations$({jobIds:l,earliestMs:o.earliestMs,latestMs:o.latestMs,maxAnnotations:i.a}).toPromise().then((t=>{if(void 0!==t.error||void 0===t.annotations){const r=Object(s.b)(t.error);return e({annotationsData:[],totalCount:0,error:""!==r?r:void 0})}const r=[];return l.forEach((e=>{const a=t.annotations[e];void 0!==a&&r.push(...a)})),e({annotationsData:r.sort(((e,t)=>e.timestamp-t.timestamp)).map(((e,t)=>(e.key=(t+1).toString(),e))),totalCount:t.totalCount})})).catch((t=>{const r=Object(s.b)(t);return e({annotationsData:[],totalCount:0,error:""!==r?r:void 0})}))}))}async function L(e,t,r,l,o,s,p,u,h){const f=w(e,t),b=k(e,s),g=O(e,0,o);return new Promise(((e,t)=>{d.ml.results.getAnomaliesTableData(f,[],b,p,u,g.earliestMs,g.latestMs,r,i.b,x.e,h).toPromise().then((t=>{const r=t.anomalies,l=m.a.detectorsByJob;r.forEach((e=>{const t=e.jobId,r=Object(a.get)(l,[t,e.detectorIndex]);e.detector=Object(a.get)(r,["detector_description"],e.source.function_description),void 0!==r&&void 0!==r.custom_rules&&(e.rulesLength=r.custom_rules.length);const o=m.a.getJob(t);let i=Object(c.n)(o,e.detectorIndex);if(!1===i&&Object(c.l)(o,e.detectorIndex)){const t=Object(n.d)(e.source);i=Object(c.m)(o,e.detectorIndex,t)}e.isTimeSeriesViewRecord=i,void 0!==m.a.customUrlsByJob[t]&&(e.customUrls=m.a.customUrlsByJob[t])})),e({anomalies:r,interval:t.interval,examplesByJobId:t.examplesByJobId,showViewSeriesLink:!0,jobIds:f})})).catch((e=>{console.log("Explorer - error loading data for anomalies table:",e),t()}))}))}async function S(e,t,r,a,l=[],o,i){return new Promise((n=>{!0!==o?e.getTopInfluencers(t,r,a,x.f,10,1,l,i).then((e=>{n(e.influencers)})):n({})}))}function M(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(e){return e.replace(/[()]/g,"\\$&")}function D(e){return e.replace(/[\\"]/g,"\\$&")}function F(e,t){const r=M(e),a=M(t);return new RegExp(`(${r})\\s?:\\s?(")?(${a})(")?`,"i")}function C(e,t,r){let a="";const l=F(t,r);a=e.replace(l,"");return a=a.replace(/\s+(and|or)\s+(and|or)\s+/gi," $1 "),a=a.replace(/\s(and|or)\s*$/gi,""),a=a.replace(/^\s*(and|or)\s/gi,""),a}}}]);