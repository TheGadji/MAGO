/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[47],{254:function(e,t,n){"use strict";n.r(t),n.d(t,"IndexParamsFields",(function(){return x})),n.d(t,"default",(function(){return x}));var i=n(1),s=n.n(i),a=n(13),r=n(0),o=n(36),c=n(14),d=n(138),u=n(59),l=n(5);const x=({actionParams:e,index:t,editAction:n,messageVariables:x,errors:g,actionConnector:b})=>{const{docLinks:j}=Object(u.b)().services,{documents:p,indexOverride:f}=e,m=c.c.replace(c.a,""),[O,A]=Object(i.useState)(!1),v=e=>e&&e.length>0?e[0]:void 0,[I,k]=Object(i.useState)(v(p)),[h,y]=Object(i.useState)(f?f.replace(c.a,""):m),[T,E]=Object(i.useState)(!1);Object(i.useEffect)((()=>{k(v(p)),null===p&&k("{}")}),[p]),Object(i.useEffect)((()=>{(null==b?void 0:b.id)===c.e?(E(!0),n("documents",[JSON.stringify(c.d)],t),k(JSON.stringify(c.d))):O&&(E(!1),n("documents",void 0,t),k(void 0)),A(!0)}),[null==b?void 0:b.id]);const F=e=>{try{const i=JSON.parse(e);n("documents",[i],t),k(e)}catch(e){n("documents",[{}],t),k(void 0)}},M=r.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.documentsFieldLabel",{defaultMessage:"Document to index"}),S=f&&f!==c.c?Object(l.jsx)(a.EuiText,{size:"xs"},Object(l.jsx)(a.EuiLink,{"data-test-subj":"resetDefaultIndex",onClick:()=>{n("indexOverride",c.c,t),y(m)}},Object(l.jsx)(a.EuiIcon,{type:"refresh"}),Object(l.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.resetDefaultIndexLabel",defaultMessage:"Reset default index"}))):Object(l.jsx)(s.a.Fragment,null),L=Object(l.jsx)(s.a.Fragment,null,Object(l.jsx)(a.EuiFormRow,{fullWidth:!0,error:g.indexOverride,isInvalid:void 0!==g.indexOverride&&g.indexOverride&&g.indexOverride.length>0,label:r.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.preconfiguredIndex",{defaultMessage:"Elasticsearch index"}),labelAppend:S,helpText:Object(l.jsx)(s.a.Fragment,null,Object(l.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.preconfiguredIndexHelpText",defaultMessage:"Documents are indexed into the {alertHistoryIndex} index. ",values:{alertHistoryIndex:`${c.a}${h}`}}),Object(l.jsx)(a.EuiLink,{href:j.links.alerting.preconfiguredAlertHistoryConnector,target:"_blank"},Object(l.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.preconfiguredIndexDocLink",defaultMessage:"View docs."})))},Object(l.jsx)(a.EuiFieldText,{fullWidth:!0,"data-test-subj":"preconfiguredIndexToUse",prepend:c.a,value:h,onChange:e=>{n("indexOverride",`${c.a}${e.target.value}`,t),y(e.target.value)}})),Object(l.jsx)(a.EuiSpacer,{size:"m"}),Object(l.jsx)(a.EuiFormRow,{fullWidth:!0,label:M},Object(l.jsx)(a.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s","data-test-subj":"preconfiguredDocumentToIndex"},JSON.stringify(c.d,null,2)))),U=Object(l.jsx)(d.a,{messageVariables:x,paramsProperty:"documents","data-test-subj":"documentToIndex",inputTargetValue:null===I?"{}":I,label:M,"aria-label":r.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.jsonDocAriaLabel",{defaultMessage:"Code editor"}),errors:g.documents,onDocumentsChange:F,helpText:Object(l.jsx)(a.EuiLink,{href:j.links.alerting.indexAction,target:"_blank"},Object(l.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.indexAction.indexDocumentHelpLabel",defaultMessage:"Index document example."})),onBlur:()=>{I||F("{}")}});return T?L:U}},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return i.KibanaContextProvider})),n.d(t,"b",(function(){return s}));var i=n(35);const s=()=>Object(i.useKibana)()}}]);