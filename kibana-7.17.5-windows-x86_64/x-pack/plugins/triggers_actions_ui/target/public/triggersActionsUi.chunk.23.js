/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[23],{124:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s(3),i=s(0);function n(e){return!1===(null==e?void 0:e.enabledInLicense)?(e=>({isEnabled:!1,message:i.i18n.translate("xpack.triggersActionsUI.checkAlertTypeEnabled.ruleTypeDisabledByLicenseMessage",{defaultMessage:"This rule type requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(a.upperFirst)(e.minimumLicenseRequired)}})}))(e):{isEnabled:!0}}},136:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return u}));var a=s(1),i=s(36),n=s(13),l=s(17),r=s(90),o=s(5);const c=({selectedStatuses:e,onChange:t})=>{const[s,c]=Object(a.useState)(e),[d,b]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{t&&t(s)}),[s]),Object(a.useEffect)((()=>{c(e)}),[e]),Object(o.jsx)(n.EuiFilterGroup,null,Object(o.jsx)(n.EuiPopover,{isOpen:d,closePopover:()=>b(!1),button:Object(o.jsx)(n.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:()=>b(!d),"data-test-subj":"alertStatusFilterButton"},Object(o.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.alertStatusFilterLabel",defaultMessage:"Status"}))},Object(o.jsx)("div",{className:"euiFilterSelect__items"},[...l.AlertExecutionStatusValues].sort().map((e=>{const t=u(e);return Object(o.jsx)(n.EuiFilterSelectItem,{key:e,style:{textTransform:"capitalize"},onClick:()=>{const t=s.includes(e);c(t?s.filter((t=>t!==e)):s.concat(e))},checked:s.includes(e)?"on":void 0,"data-test-subj":`alertStatus${e}FilerOption`},Object(o.jsx)(n.EuiHealth,{color:t},r.c[e]))})))))};function u(e){switch(e){case"active":return"success";case"error":return"danger";case"ok":return"primary";case"pending":return"accent";default:return"subdued"}}},137:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(13),i=s(0),n=s(1),l=s(59),r=s(5);const o=({idsToDelete:e,apiDeleteCall:t,onDeleted:s,onCancel:o,onErrors:c,singleTitle:u,multipleTitle:d,setIsLoadingState:b})=>{const[g,p]=Object(n.useState)(!1);Object(n.useEffect)((()=>{p(e.length>0)}),[e]);const{http:j,notifications:{toasts:m}}=Object(l.b)().services,x=e.length;if(!g)return null;const f=i.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You can't recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:x,singleTitle:u,multipleTitle:d}}),O=i.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:x,singleTitle:u,multipleTitle:d}}),I=i.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});return Object(r.jsx)(a.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:O,onCancel:()=>{p(!1),o()},onConfirm:async()=>{p(!1),b(!0);const{successes:a,errors:n}=await t({ids:e,http:j});b(!1);const l=a.length,r=n.length;l>0&&m.addSuccess(i.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:l,singleTitle:u,multipleTitle:d}})),r>0&&(m.addDanger(i.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:r,singleTitle:u,multipleTitle:d}})),await c()),await s(a)},cancelButtonText:I,confirmButtonText:O},f)}},217:function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(218);case"v7light":return s(220);case"v8dark":return s(222);case"v8light":return s(224)}},218:function(e,t,s){var a=s(57),i=s(219);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},219:function(e,t,s){(t=s(58)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),e.exports=t},220:function(e,t,s){var a=s(57),i=s(221);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},221:function(e,t,s){(t=s(58)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),e.exports=t},222:function(e,t,s){var a=s(57),i=s(223);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},223:function(e,t,s){(t=s(58)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),e.exports=t},224:function(e,t,s){var a=s(57),i=s(225);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},225:function(e,t,s){(t=s(58)(!1)).push([e.i,".actBulkActionPopover__deleteAll .euiButtonEmpty__text{padding-top:4px}\n",""]),e.exports=t},226:function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(227);case"v7light":return s(229);case"v8dark":return s(231);case"v8light":return s(233)}},227:function(e,t,s){var a=s(57),i=s(228);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},228:function(e,t,s){(t=s(58)(!1)).push([e.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}button[data-test-subj='deleteAlert']{color:#F66}\n",""]),e.exports=t},229:function(e,t,s){var a=s(57),i=s(230);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},230:function(e,t,s){(t=s(58)(!1)).push([e.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}button[data-test-subj='deleteAlert']{color:#BD271E}\n",""]),e.exports=t},231:function(e,t,s){var a=s(57),i=s(232);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},232:function(e,t,s){(t=s(58)(!1)).push([e.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}button[data-test-subj='deleteAlert']{color:#F86B63}\n",""]),e.exports=t},233:function(e,t,s){var a=s(57),i=s(234);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},234:function(e,t,s){(t=s(58)(!1)).push([e.i,".actCollapsedItemActions .euiContextMenuItem:hover{text-decoration:none}button[data-test-subj='deleteAlert']{color:#BD271E}\n",""]),e.exports=t},235:function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(236);case"v7light":return s(238);case"v8dark":return s(240);case"v8light":return s(242)}},236:function(e,t,s){var a=s(57),i=s(237);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},237:function(e,t,s){(t=s(58)(!1)).push([e.i,".actAlertsList__tableRowDisabled{background-color:#25262E}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#98A2B3}.euiTableRow:hover .alertSidebarItem__action,.euiTableRow:focus-within .alertSidebarItem__action,.euiTableRow[class*='-isActive'] .alertSidebarItem__action{opacity:1}.alertSidebarItem__action{opacity:0}.alertSidebarItem__action.alertSidebarItem__mobile{opacity:1}.alertSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}\n",""]),e.exports=t},238:function(e,t,s){var a=s(57),i=s(239);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},239:function(e,t,s){(t=s(58)(!1)).push([e.i,".actAlertsList__tableRowDisabled{background-color:#F5F7FA}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#69707D}.euiTableRow:hover .alertSidebarItem__action,.euiTableRow:focus-within .alertSidebarItem__action,.euiTableRow[class*='-isActive'] .alertSidebarItem__action{opacity:1}.alertSidebarItem__action{opacity:0}.alertSidebarItem__action.alertSidebarItem__mobile{opacity:1}.alertSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}\n",""]),e.exports=t},240:function(e,t,s){var a=s(57),i=s(241);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},241:function(e,t,s){(t=s(58)(!1)).push([e.i,".actAlertsList__tableRowDisabled{background-color:#25262E}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#98A2B3}.euiTableRow:hover .alertSidebarItem__action,.euiTableRow:focus-within .alertSidebarItem__action,.euiTableRow[class*='-isActive'] .alertSidebarItem__action{opacity:1}.alertSidebarItem__action{opacity:0}.alertSidebarItem__action.alertSidebarItem__mobile{opacity:1}.alertSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}\n",""]),e.exports=t},242:function(e,t,s){var a=s(57),i=s(243);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},243:function(e,t,s){(t=s(58)(!1)).push([e.i,".actAlertsList__tableRowDisabled{background-color:#F5F7FA}.actAlertsList__tableRowDisabled .actAlertsList__tableCellDisabled{color:#69707D}.euiTableRow:hover .alertSidebarItem__action,.euiTableRow:focus-within .alertSidebarItem__action,.euiTableRow[class*='-isActive'] .alertSidebarItem__action{opacity:1}.alertSidebarItem__action{opacity:0}.alertSidebarItem__action.alertSidebarItem__mobile{opacity:1}.alertSidebarItem__action:focus{opacity:1}.ruleDurationWarningIcon{margin-bottom:4px;margin-left:8px}.ruleDisabledQuestionIcon{bottom:4px;margin-left:4px;position:relative}\n",""]),e.exports=t},244:function(e,t,s){"use strict";s.r(t),s.d(t,"AlertsList",(function(){return z})),s.d(t,"default",(function(){return z}));var a=s(0),i=s(3),n=s(23),l=s.n(n),r=s(36),o=s(1),c=s.n(o),u=s(13),d=s(37),b=s(15),g=s(5);const p=({children:e})=>{const[t,s]=Object(o.useState)(!1);return Object(g.jsx)(u.EuiPopover,{isOpen:t,closePopover:()=>s(!1),"data-test-subj":"bulkAction",panelPaddingSize:"s",button:Object(g.jsx)(u.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>s(!t)},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.buttonTitle",defaultMessage:"Manage rules"}))},e&&c.a.Children.map(e,(e=>c.a.isValidElement(e)?Object(g.jsx)(c.a.Fragment,null,c.a.cloneElement(e,{})):e)))};var j=s(87),m=(s(217),s(59));const x=Object(j.a)((({selectedItems:e,onPerformingAction:t=I,onActionPerformed:s=I,muteAlerts:i,unmuteAlerts:n,enableAlerts:l,disableAlerts:c,setAlertsToDelete:d})=>{const{notifications:{toasts:b}}=Object(m.b)().services,[p,j]=Object(o.useState)(!1),[x,A]=Object(o.useState)(!1),[y,T]=Object(o.useState)(!1),[h,E]=Object(o.useState)(!1),[v,k]=Object(o.useState)(!1),S=e.every(O),_=e.every(f),L=p||x||y||h||v,M=!!e.find((e=>!e.enabledInLicense));return Object(g.jsx)(u.EuiFlexGroup,{alignItems:"baseline",direction:"column",gutterSize:"none"},!S&&Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),j(!0);try{await i(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToMuteRulesMessage",{defaultMessage:"Failed to mute rule(s)"})})}finally{j(!1),s()}},isLoading:p,isDisabled:L||M,"data-test-subj":"muteAll"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.muteAllTitle",defaultMessage:"Mute"}))),S&&Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),A(!0);try{await n(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToUnmuteRulesMessage",{defaultMessage:"Failed to unmute rule(s)"})})}finally{A(!1),s()}},isLoading:x,isDisabled:L||M,"data-test-subj":"unmuteAll"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.unmuteAllTitle",defaultMessage:"Unmute"}))),_&&Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),T(!0);try{await l(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToEnableRulesMessage",{defaultMessage:"Failed to enable rule(s)"})})}finally{T(!1),s()}},isLoading:y,isDisabled:L||M,"data-test-subj":"enableAll"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.enableAllTitle",defaultMessage:"Enable"}))),!_&&Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),E(!0);try{await c(e)}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToDisableRulesMessage",{defaultMessage:"Failed to disable rule(s)"})})}finally{E(!1),s()}},isLoading:h,isDisabled:L||M,"data-test-subj":"disableAll"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.disableAllTitle",defaultMessage:"Disable"}))),Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiButtonEmpty,{onClick:async function(){t(),k(!0);try{d(e.map((e=>e.id)))}catch(e){b.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.failedToDeleteRulesMessage",{defaultMessage:"Failed to delete rule(s)"})})}finally{k(!1),s()}},isLoading:v,iconType:"trash",color:"danger",isDisabled:L,"data-test-subj":"deleteAll",className:"actBulkActionPopover__deleteAll"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.bulkActionPopover.deleteAllTitle",defaultMessage:"Delete"}))))}));function f(e){return!1===e.enabled}function O(e){return!0===e.muteAll}function I(){}var A=s(54);s(226);const y=Object(j.a)((({item:e,onAlertChanged:t,disableAlert:s,enableAlert:i,unmuteAlert:n,muteAlert:l,setAlertsToDelete:r,onEditAlert:c})=>{const{ruleTypeRegistry:d}=Object(m.b)().services,[b,p]=Object(o.useState)(!1),[j,x]=Object(o.useState)(!e.enabled),[f,O]=Object(o.useState)(e.muteAll);Object(o.useEffect)((()=>{x(!e.enabled),O(e.muteAll)}),[e.enabled,e.muteAll]);const I=!!d.has(e.alertTypeId)&&!d.get(e.alertTypeId).requiresAppContext,y=Object(g.jsx)(u.EuiButtonIcon,{disabled:!e.isEditable,"data-test-subj":"selectActionButton",iconType:"boxesHorizontal",onClick:()=>p(!b),"aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.popoverButtonTitle",{defaultMessage:"Actions"})}),T=[{id:0,hasFocus:!1,items:[{disabled:!(e.isEditable&&!j&&e.enabledInLicense),"data-test-subj":"muteButton",onClick:async()=>{const s=f;A.asyncScheduler.schedule((async()=>{s?await n({...e,muteAll:s}):await l({...e,muteAll:s}),t()}),10),O(!f),p(!b)},name:f?a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.unmuteTitle",{defaultMessage:"Unmute"}):a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.muteTitle",{defaultMessage:"Mute"})},{disabled:!e.isEditable||!e.enabledInLicense,"data-test-subj":"disableButton",onClick:async()=>{const a=!j;A.asyncScheduler.schedule((async()=>{a?await s({...e,enabled:a}):await i({...e,enabled:a}),t()}),10),x(!j),p(!b)},name:j?a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.enableTitle",{defaultMessage:"Enable"}):a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.disableTitle",{defaultMessage:"Disable"})},{disabled:!e.isEditable||!I,"data-test-subj":"editAlert",onClick:()=>{p(!b),c(e)},name:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.editTitle",{defaultMessage:"Edit rule"})},{disabled:!e.isEditable,"data-test-subj":"deleteAlert",onClick:()=>{p(!b),r([e.id])},name:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.collapsedItemActons.deleteRuleTitle",{defaultMessage:"Delete rule"})}]}];return Object(g.jsx)(u.EuiPopover,{button:y,isOpen:b,closePopover:()=>p(!1),ownFocus:!0,panelPaddingSize:"none","data-test-subj":"collapsedItemActions"},Object(g.jsx)(u.EuiContextMenu,{initialPanelId:0,panels:T,className:"actCollapsedItemActions","data-test-subj":"collapsedActionPanel"}))})),T=({options:e,onChange:t})=>{const[s,a]=Object(o.useState)([]),[i,n]=Object(o.useState)(!1);return Object(o.useEffect)((()=>{t&&t(s)}),[s]),Object(g.jsx)(u.EuiFilterGroup,null,Object(g.jsx)(u.EuiPopover,{isOpen:i,closePopover:()=>n(!1),button:Object(g.jsx)(u.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:()=>n(!i),"data-test-subj":"alertTypeFilterButton"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.typeFilterLabel",defaultMessage:"Type"}))},Object(g.jsx)("div",{className:"euiFilterSelect__items"},e.map(((e,t)=>Object(g.jsx)(o.Fragment,{key:`group${t}`},Object(g.jsx)(u.EuiTitle,{"data-test-subj":`alertType${t}Group`,size:"xxs"},Object(g.jsx)("h3",null,e.groupName)),e.subOptions.map(((e,t)=>Object(g.jsx)(u.EuiFilterSelectItem,{key:t,onClick:()=>{const t=s.includes(e.value);a(t?s.filter((t=>t!==e.value)):s.concat(e.value))},checked:s.includes(e.value)?"on":void 0,"data-test-subj":`alertType${e.value}FilterOption`},e.name)))))))))},h=({actionTypes:e,onChange:t})=>{const[s,a]=Object(o.useState)([]),[i,n]=Object(o.useState)(!1);return Object(o.useEffect)((()=>{t&&t(s)}),[s]),Object(g.jsx)(u.EuiFilterGroup,null,Object(g.jsx)(u.EuiPopover,{isOpen:i,closePopover:()=>n(!1),button:Object(g.jsx)(u.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:s.length>0,numActiveFilters:s.length,numFilters:s.length,onClick:()=>n(!i),"data-test-subj":"actionTypeFilterButton"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.actionTypeFilterLabel",defaultMessage:"Action type"}))},Object(g.jsx)("div",{className:"euiFilterSelect__items"},e.map((e=>Object(g.jsx)(u.EuiFilterSelectItem,{key:e.id,onClick:()=>{const t=s.includes(e.id);a(t?s.filter((t=>t!==e.id)):s.concat(e.id))},checked:s.includes(e.id)?"on":void 0,"data-test-subj":`actionType${e.id}FilterOption`},e.name))))))};var E=s(136),v=s(83),k=s(76),S=s(63),_=s(7),L=s(137);const M=({onCTAClicked:e})=>Object(g.jsx)(u.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"createFirstAlertEmptyPrompt",title:Object(g.jsx)("h2",null,Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyTitle",defaultMessage:"Create your first rule"})),body:Object(g.jsx)("p",null,Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyDesc",defaultMessage:"Receive an alert through email, Slack, or another connector when a condition is met."})),actions:Object(g.jsx)(u.EuiButton,{"data-test-subj":"createFirstAlertButton",key:"create-action",fill:!0,onClick:e},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyPrompt.emptyButton",defaultMessage:"Create rule"}))});var w=s(17),C=s(90),F=s(18),D=(s(235),s(22));const U=({licenseType:e,alertTypeId:t,onConfirm:s,onCancel:n})=>{const l=Object(i.capitalize)(e);return Object(g.jsx)(u.EuiConfirmModal,{title:a.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseTitle",{defaultMessage:"{licenseRequired} license required",values:{licenseRequired:l}}),onCancel:n,onConfirm:s,confirmButtonText:a.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseConfirmButtonText",{defaultMessage:"Manage license"}),cancelButtonText:a.i18n.translate("xpack.triggersActionsUI.sections.manageLicense.manageLicenseCancelButtonText",{defaultMessage:"Cancel"}),defaultFocusedButton:"confirm","data-test-subj":"manageLicenseModal"},Object(g.jsx)("p",null,Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.manageLicense.manageLicenseMessage",defaultMessage:"Rule type {alertTypeId} is disabled because it requires a {licenseRequired} license. Continue to License Management to view upgrade options.",values:{alertTypeId:t,licenseRequired:l}})))};var B=s(124);const P=({item:e,onAlertChanged:t,disableAlert:s,enableAlert:a})=>{const[i,n]=Object(o.useState)(!e.enabled);Object(o.useEffect)((()=>{n(e.enabled)}),[e.enabled]);const[l,r]=Object(o.useState)(!1);return l?Object(g.jsx)(u.EuiLoadingSpinner,{"data-test-subj":"enableSpinner",size:"m"}):Object(g.jsx)(u.EuiSwitch,{name:"enable",disabled:!e.isEditable||!e.enabledInLicense,compressed:!0,checked:i,"data-test-subj":"enableSwitch",onChange:async()=>{r(!0);const l=e.enabled;l?await s({...e,enabled:l}):await a({...e,enabled:l}),n(!i),r(!1),t()},label:""})};var R=s(98);const z=()=>{const e=Object(d.useHistory)(),{http:t,notifications:{toasts:s},application:{capabilities:n},ruleTypeRegistry:j,actionTypeRegistry:f,kibanaFeatures:O}=Object(m.b)().services,I=Object(S.c)(n),[A,z]=Object(o.useState)([]),[H,G]=Object(o.useState)([]),[W,J]=Object(o.useState)(!1),[Y,Q]=Object(o.useState)({index:0,size:_.d}),[V,K]=Object(o.useState)(),[X,Z]=Object(o.useState)(),[ee,te]=Object(o.useState)([]),[se,ae]=Object(o.useState)([]),[ie,ne]=Object(o.useState)([]),[le,re]=Object(o.useState)(!1),[oe,ce]=Object(o.useState)(!1),[ue,de]=Object(o.useState)(!1),[be,ge]=Object(o.useState)(null),[pe,je]=Object(o.useState)(-1),[me,xe]=Object(o.useState)({field:"name",direction:"asc"}),[fe,Oe]=Object(o.useState)(null),[Ie,Ae]=Object(o.useState)(w.AlertExecutionStatusValues.reduce(((e,t)=>({...e,[t]:0})),{})),[ye,Te]=Object(o.useState)({isLoading:!1,isInitialized:!1,data:new Map}),[he,Ee]=Object(o.useState)({isLoading:!1,data:[],totalItemCount:0}),[ve,ke]=Object(o.useState)([]),Se=e=>{de(!0),ge(e)};async function _e(){if(ye.data.size>0){Ee({...he,isLoading:!0});try{var e;const i=await Object(v.m)({http:t,page:Y,searchText:V,typesFilter:ee,actionTypesFilter:se,alertStatusesFilter:ie,sort:me});await async function(){try{const e=await Object(v.i)({http:t,searchText:V,typesFilter:ee,actionTypesFilter:se,alertStatusesFilter:ie});null!=e&&e.alertExecutionStatus&&Ae(e.alertExecutionStatus)}catch(e){s.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadRuleStatusInfoMessage",{defaultMessage:"Unable to load rule status info"})})}}(),Ee({isLoading:!1,data:i.data,totalItemCount:i.total}),(null===(e=i.data)||void 0===e||!e.length)&&Y.index>0&&Q({...Y,index:0})}catch(e){s.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadRulesMessage",{defaultMessage:"Unable to load rules"})}),Ee({...he,isLoading:!1})}}}Object(o.useEffect)((()=>{_e()}),[ye,Y,V,JSON.stringify(ee),JSON.stringify(se),JSON.stringify(ie)]),Object(o.useEffect)((()=>{(async()=>{try{Te({...ye,isLoading:!0});const e=await Object(v.l)({http:t}),s=new Map;for(const t of e)s.set(t.id,t);Te({isLoading:!1,data:s,isInitialized:!0})}catch(e){s.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"})}),Te({...ye,isLoading:!1})}})()}),[]),Object(o.useEffect)((()=>{(async()=>{try{const e=(await Object(k.d)({http:t})).filter((({id:e})=>f.has(e)&&!F.DEFAULT_HIDDEN_ACTION_TYPES.includes(e))).sort(((e,t)=>e.name.localeCompare(t.name)));z(e)}catch(e){s.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}})()}),[]);const Le=[{field:"enabled",name:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.enabledTitle",{defaultMessage:"Enabled"}),width:"50px",render:(e,s)=>Object(g.jsx)(P,{disableAlert:async()=>await Object(v.d)({http:t,id:s.id}),enableAlert:async()=>await Object(v.f)({http:t,id:s.id}),item:s,onAlertChanged:()=>_e()}),sortable:!0,"data-test-subj":"alertsTableCell-enabled"},{field:"name",name:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.nameTitle",{defaultMessage:"Name"}),sortable:!0,truncateText:!0,width:"30%","data-test-subj":"alertsTableCell-name",render:(t,s)=>{const a=ye.data.get(s.alertTypeId),i=Object(B.a)(a),n=Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"xs"},Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiLink,{title:t,onClick:()=>{e.push(_.l.replace(":ruleId",s.id))}},t)),Object(g.jsx)(u.EuiFlexItem,{grow:!1},!i.isEnabled&&Object(g.jsx)(u.EuiIconTip,{anchorClassName:"ruleDisabledQuestionIcon","data-test-subj":"ruleDisabledByLicenseTooltip",type:"questionInCircle",content:i.message,position:"right"})))),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiText,{color:"subdued",size:"xs"},s.alertType))));return Object(g.jsx)(c.a.Fragment,null,n,s.enabled&&s.muteAll&&Object(g.jsx)(u.EuiBadge,{"data-test-subj":"mutedActionsBadge",color:"hollow"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.mutedBadge",defaultMessage:"Muted"})))}},{field:"tags",name:"",sortable:!1,width:"50px","data-test-subj":"alertsTableCell-tagsPopover",render:(e,t)=>e.length>0?Object(g.jsx)(u.EuiPopover,{button:Object(g.jsx)(u.EuiBadge,{"data-test-subj":"ruleTagsBadge",color:"hollow",iconType:"tag",iconSide:"left",tabIndex:-1,onClick:()=>je(t.index),onClickAriaLabel:"Tags",iconOnClick:()=>je(t.index),iconOnClickAriaLabel:"Tags"},e.length),anchorPosition:"upCenter",isOpen:pe===t.index,closePopover:()=>je(-1)},Object(g.jsx)(u.EuiPopoverTitle,{"data-test-subj":"ruleTagsPopoverTitle"},"Tags"),Object(g.jsx)("div",{style:{width:"300px"}}),e.map(((e,t)=>Object(g.jsx)(u.EuiBadge,{"data-test-subj":"ruleTagsPopoverTag",key:t,color:"hollow",iconType:"tag",iconSide:"left"},e)))):null},{field:"executionStatus.lastExecutionDate",name:Object(g.jsx)(u.EuiToolTip,{"data-test-subj":"alertsTableCell-lastExecutionDateTooltip",content:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.lastExecutionDateTitle",{defaultMessage:"Start time of the last execution."})},Object(g.jsx)("span",null,"Last run"," ",Object(g.jsx)(u.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,width:"15%","data-test-subj":"alertsTableCell-lastExecutionDate",render:e=>{if(e)return Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(g.jsx)(u.EuiFlexItem,{grow:!1},l()(e).format("MMM D, YYYY HH:mm:ssa")),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiText,{color:"subdued",size:"xs"},l()(e).fromNow()))))}},{field:"schedule.interval",width:"6%",name:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.scheduleTitle",{defaultMessage:"Interval"}),sortable:!1,truncateText:!1,"data-test-subj":"alertsTableCell-interval",render:e=>Object(w.formatDuration)(e)},{field:"executionStatus.lastDuration",width:"12%",name:Object(g.jsx)(u.EuiToolTip,{"data-test-subj":"alertsTableCell-durationTooltip",content:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.durationTitle",{defaultMessage:"The length of time it took for the rule to run."})},Object(g.jsx)("span",null,"Duration"," ",Object(g.jsx)(u.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:!0,truncateText:!1,"data-test-subj":"alertsTableCell-duration",render:(e,t)=>{const s=Object(R.b)(ye.data.get(t.alertTypeId),e);return Object(g.jsx)(c.a.Fragment,null,`${Object(R.a)(e)}`,s&&Object(g.jsx)(u.EuiIconTip,{"data-test-subj":"ruleDurationWarning",anchorClassName:"ruleDurationWarningIcon",type:"alert",color:"warning",content:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.ruleTypeExcessDurationMessage",{defaultMessage:"Duration exceeds the rule's expected run time."}),position:"right"}))}},{field:"executionStatus.status",name:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.statusTitle",{defaultMessage:"Status"}),sortable:!0,truncateText:!1,width:"120px","data-test-subj":"alertsTableCell-status",render:(e,t)=>((e,t)=>{var s,a;const i=Object(E.b)(e.status),n="error"===e.status?`Error: ${null==e||null===(s=e.error)||void 0===s?void 0:s.message}`:null,l=(null===(a=e.error)||void 0===a?void 0:a.reason)===w.AlertExecutionStatusErrorReasons.License,o=l?C.a:C.c[e.status],c=Object(g.jsx)(u.EuiHealth,{"data-test-subj":`alertStatus-${e.status}`,color:i},o),d=n?Object(g.jsx)(u.EuiToolTip,{"data-test-subj":"alertStatus-error-tooltip",position:"top",content:n},c):c;return Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"none"},Object(g.jsx)(u.EuiFlexItem,null,d),l&&Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiButtonEmpty,{size:"xs","data-test-subj":"alertStatus-error-license-fix",onClick:()=>{var e;return Oe({licenseType:null===(e=ye.data.get(t.alertTypeId))||void 0===e?void 0:e.minimumLicenseRequired,alertTypeId:t.alertTypeId})}},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.fixLicenseLink",defaultMessage:"Fix"}))))})(t.executionStatus,t)},{name:"",width:"10%",render(e){return Object(g.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s"},Object(g.jsx)(u.EuiFlexItem,{grow:!1,className:"alertSidebarItem"},Object(g.jsx)(u.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},e.isEditable&&(t=e.alertTypeId,j.has(t)&&!j.get(t).requiresAppContext)?Object(g.jsx)(u.EuiFlexItem,{grow:!1,"data-test-subj":"alertSidebarEditAction"},Object(g.jsx)(u.EuiButtonIcon,{color:"primary",title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.editButtonTooltip",{defaultMessage:"Edit"}),className:"alertSidebarItem__action","data-test-subj":"editActionHoverButton",onClick:()=>Se(e),iconType:"pencil","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.editAriaLabel",{defaultMessage:"Edit"})})):null,e.isEditable?Object(g.jsx)(u.EuiFlexItem,{grow:!1,"data-test-subj":"alertSidebarDeleteAction"},Object(g.jsx)(u.EuiButtonIcon,{color:"danger",title:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.deleteButtonTooltip",{defaultMessage:"Delete"}),className:"alertSidebarItem__action","data-test-subj":"deleteActionHoverButton",onClick:()=>ke([e.id]),iconType:"trash","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertsListTable.columns.deleteAriaLabel",{defaultMessage:"Delete"})})):null)),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(y,{key:e.id,item:e,onAlertChanged:()=>_e(),setAlertsToDelete:ke,onEditAlert:()=>Se(e)})));var t}}],Me=[...ye.data.values()],we=Me.some((e=>{var t;return null===(t=e.authorizedConsumers[w.ALERTS_FEATURE_ID])||void 0===t?void 0:t.all})),Ce=[Object(g.jsx)(T,{key:"type-filter",onChange:e=>te(e),options:Object(i.sortBy)(Object.entries(Me.reduce(((e,t)=>{const s=t.producer;return(e[s]=e[s]||[]).push({value:t.id,name:t.name}),e}),{}))).map((([e,t])=>{var s,a,n;return{groupName:null!==(a=e,s=null==O||null===(n=O.find((e=>e.id===a)))||void 0===n?void 0:n.name)&&void 0!==s?s:Object(i.capitalize)(e),subOptions:t.sort(((e,t)=>e.name.localeCompare(t.name)))}}))}),Object(g.jsx)(h,{key:"action-type-filter",actionTypes:A,onChange:e=>ae(e)}),Object(g.jsx)(E.a,{key:"alert-status-filter",selectedStatuses:ie,onChange:e=>ne(e)}),Object(g.jsx)(u.EuiButtonEmpty,{"data-test-subj":"refreshAlertsButton",iconType:"refresh",onClick:_e,name:"refresh",color:"primary"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.refreshAlertsButtonLabel",defaultMessage:"Refresh"}))],Fe=!!H.length&&$(he.data,H).every((e=>Object(S.a)(e,ye.data.get(e.alertTypeId)))),De=Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"s"},H.length>0&&Fe&&Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(p,null,Object(g.jsx)(x,{selectedItems:q($(he.data,H),ye.data,I),onPerformingAction:()=>J(!0),onActionPerformed:()=>{_e(),J(!1)},setAlertsToDelete:ke}))),we?Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiButton,{key:"create-alert","data-test-subj":"createAlertButton",fill:!0,onClick:()=>re(!0)},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.addRuleButtonLabel",defaultMessage:"Create rule"}))):null,Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiFieldSearch,{fullWidth:!0,isClearable:!0,"data-test-subj":"alertSearchField",onChange:e=>{Z(e.target.value),""===e.target.value&&K(e.target.value)},onKeyUp:e=>{13===e.keyCode&&K(X)},placeholder:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.searchPlaceholderTitle",{defaultMessage:"Search"})})),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Ce.map(((e,t)=>Object(g.jsx)(u.EuiFlexItem,{key:t,grow:!1},e)))))),Object(g.jsx)(u.EuiSpacer,{size:"xs"}),!oe&&Ie.error>0?Object(g.jsx)(u.EuiFlexGroup,null,Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiCallOut,{color:"danger",size:"s",title:Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.attentionBannerTitle",defaultMessage:"Error found in {totalStatusesError, plural, one {# rule} other {# rules}}.",values:{totalStatusesError:Ie.error}}),iconType:"alert","data-test-subj":"alertsErrorBanner"},Object(g.jsx)(u.EuiButton,{type:"primary",size:"s",color:"danger",onClick:()=>ne(["error"])},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.viewBunnerButtonLabel",defaultMessage:"View"})),Object(g.jsx)(u.EuiButtonEmpty,{color:"danger",onClick:()=>ce(!0)},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.dismissBunnerButtonLabel",defaultMessage:"Dismiss"}))))):null,Object(g.jsx)(u.EuiSpacer,{size:"m"}),Object(g.jsx)(u.EuiFlexGroup,null,Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiText,{size:"s",color:"subdued","data-test-subj":"totalAlertsCount"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalItemsCountDescription",defaultMessage:"Showing: {pageSize} of {totalItemCount} rules.",values:{totalItemCount:he.totalItemCount,pageSize:he.data.length}}))),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiHealth,{color:"success","data-test-subj":"totalActiveAlertsCount"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStatusesActiveDescription",defaultMessage:"Active: {totalStatusesActive}",values:{totalStatusesActive:Ie.active}}))),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiHealth,{color:"danger","data-test-subj":"totalErrorAlertsCount"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStatusesErrorDescription",defaultMessage:"Error: {totalStatusesError}",values:{totalStatusesError:Ie.error}}))),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiHealth,{color:"primary","data-test-subj":"totalOkAlertsCount"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStatusesOkDescription",defaultMessage:"Ok: {totalStatusesOk}",values:{totalStatusesOk:Ie.ok}}))),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiHealth,{color:"accent","data-test-subj":"totalPendingAlertsCount"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStatusesPendingDescription",defaultMessage:"Pending: {totalStatusesPending}",values:{totalStatusesPending:Ie.pending}}))),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiHealth,{color:"subdued","data-test-subj":"totalUnknownAlertsCount"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.totalStatusesUnknownDescription",defaultMessage:"Unknown: {totalStatusesUnknown}",values:{totalStatusesUnknown:Ie.unknown}})))),Object(g.jsx)(u.EuiHorizontalRule,{margin:"xs"}),Object(g.jsx)(u.EuiBasicTable,{loading:he.isLoading||ye.isLoading||W,items:!1===ye.isInitialized?[]:q(he.data,ye.data,I),itemId:"id",columns:Le,sorting:{sort:me},rowProps:e=>{var t;return{"data-test-subj":"alert-row",className:null!==(t=ye.data.get(e.alertTypeId))&&void 0!==t&&t.enabledInLicense?"":"actAlertsList__tableRowDisabled"}},cellProps:e=>{var t;return{"data-test-subj":"cell",className:null!==(t=ye.data.get(e.alertTypeId))&&void 0!==t&&t.enabledInLicense?"":"actAlertsList__tableCellDisabled"}},"data-test-subj":"alertsList",pagination:{pageIndex:Y.index,pageSize:Y.size,totalItemCount:!1===ye.isInitialized?0:he.totalItemCount},selection:{selectable:e=>e.isEditable,onSelectionChange(e){G(e.map((e=>e.id)))}},onChange:({page:e,sort:t})=>{e&&Q(e),t&&xe(t)}}),fe&&Object(g.jsx)(U,{licenseType:fe.licenseType,alertTypeId:fe.alertTypeId,onConfirm:()=>{window.open(`${t.basePath.get()}/app/management/stack/license_management`,"_blank"),Oe(null)},onCancel:()=>Oe(null)})),Ue=q(he.data,ye.data,I),Be=!(Object(i.isEmpty)(V)&&Object(i.isEmpty)(ee)&&Object(i.isEmpty)(se)&&Object(i.isEmpty)(ie));return Object(g.jsx)("section",{"data-test-subj":"alertsList"},Object(g.jsx)(L.a,{onDeleted:async()=>{ke([]),G([]),await _e()},onErrors:async()=>{await _e(),ke([])},onCancel:()=>{ke([])},apiDeleteCall:v.c,idsToDelete:ve,singleTitle:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.singleTitle",{defaultMessage:"rule"}),multipleTitle:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.multipleTitle",{defaultMessage:"rules"}),setIsLoadingState:e=>{Ee({...he,isLoading:e})}}),Object(g.jsx)(u.EuiSpacer,{size:"xs"}),Ue.length||Be?De:ye.isLoading||he.isLoading?Object(g.jsx)(D.a,null):we?Object(g.jsx)(M,{onCTAClicked:()=>re(!0)}):N,le&&Object(g.jsx)(b.a,{consumer:w.ALERTS_FEATURE_ID,onClose:()=>{re(!1)},actionTypeRegistry:f,ruleTypeRegistry:j,ruleTypeIndex:ye.data,onSave:_e}),ue&&be&&Object(g.jsx)(b.b,{initialAlert:be,onClose:()=>{de(!1)},actionTypeRegistry:f,ruleTypeRegistry:j,ruleType:ye.data.get(be.alertTypeId),onSave:_e}))},N=Object(g.jsx)(u.EuiEmptyPrompt,{iconType:"securityApp",title:Object(g.jsx)("h1",null,Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.noPermissionToCreateTitle",defaultMessage:"No permissions to create rules"})),body:Object(g.jsx)("p",{"data-test-subj":"permissionDeniedMessage"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsList.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))});function $(e,t){return e.filter((e=>t.includes(e.id)))}function q(e,t,s){return e.map(((e,a)=>{var i,n,l;return{...e,index:a,actionsCount:e.actions.length,alertType:null!==(i=null===(n=t.get(e.alertTypeId))||void 0===n?void 0:n.name)&&void 0!==i?i:e.alertTypeId,isEditable:Object(S.a)(e,t.get(e.alertTypeId))&&(s||!s&&!e.actions.length),enabledInLicense:!(null===(l=t.get(e.alertTypeId))||void 0===l||!l.enabledInLicense)}}))}},75:function(e,t,s){e.exports=s(30)(1075)},76:function(e,t,s){"use strict";s.d(t,"d",(function(){return a.a})),s.d(t,"e",(function(){return l})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return u})),s.d(t,"f",(function(){return d}));var a=s(21),i=s(7);const n=({connector_type_id:e,is_preconfigured:t,referenced_by_count:s,is_missing_secrets:a,...i})=>({actionTypeId:e,isPreconfigured:t,referencedByCount:s,isMissingSecrets:a,...i});async function l({http:e}){const t=await e.get(`${i.a}/connectors`);return t.map((e=>n(e)))}const r=({actionTypeId:e,isPreconfigured:t,...s})=>({...s,connector_type_id:e,is_preconfigured:t});async function o({http:e,connector:t}){return(({connector_type_id:e,is_preconfigured:t,is_missing_secrets:s,...a})=>({...a,actionTypeId:e,isPreconfigured:t,isMissingSecrets:s}))(await e.post(`${i.a}/connector`,{body:JSON.stringify(r(t))}))}async function c({ids:e,http:t}){const s=[],a=[];return await Promise.all(e.map((e=>t.delete(`${i.a}/connector/${encodeURIComponent(e)}`)))).then((function(e){s.push(...e)}),(function(e){a.push(...e)})),{successes:s,errors:a}}async function u({id:e,params:t,http:s}){return(({connector_id:e,service_message:t,...s})=>({...s,actionId:e,serviceMessage:t}))(await s.post(`${i.a}/connector/${encodeURIComponent(e)}/_execute`,{body:JSON.stringify({params:t})}))}async function d({http:e,connector:t,id:s}){return(({connector_type_id:e,is_preconfigured:t,is_missing_secrets:s,...a})=>({...a,actionTypeId:e,isPreconfigured:t,isMissingSecrets:s}))(await e.put(`${i.a}/connector/${encodeURIComponent(s)}`,{body:JSON.stringify({name:t.name,config:t.config,secrets:t.secrets})}))}},87:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(75),i=s.n(a),n=(s(1),s(83)),l=s(59),r=s(5);function o(e){return t=>{const{http:s}=Object(l.b)().services;return Object(r.jsx)(e,i()({},t,{muteAlerts:async e=>Object(n.p)({http:s,ids:e.filter((e=>!u(e))).map((e=>e.id))}),unmuteAlerts:async e=>Object(n.t)({http:s,ids:e.filter(u).map((e=>e.id))}),enableAlerts:async e=>Object(n.g)({http:s,ids:e.filter(c).map((e=>e.id))}),disableAlerts:async e=>Object(n.e)({http:s,ids:e.filter((e=>!c(e))).map((e=>e.id))}),deleteAlerts:async e=>Object(n.c)({http:s,ids:e.map((e=>e.id))}),muteAlert:async e=>{if(!u(e))return await Object(n.n)({http:s,id:e.id})},unmuteAlert:async e=>{if(u(e))return await Object(n.r)({http:s,id:e.id})},muteAlertInstance:async(e,t)=>{if(!d(e,t))return Object(n.o)({http:s,id:e.id,instanceId:t})},unmuteAlertInstance:async(e,t)=>{if(d(e,t))return Object(n.s)({http:s,id:e.id,instanceId:t})},enableAlert:async e=>{if(c(e))return await Object(n.f)({http:s,id:e.id})},disableAlert:async e=>{if(!c(e))return await Object(n.d)({http:s,id:e.id})},deleteAlert:async e=>Object(n.c)({http:s,ids:[e.id]}),loadAlert:async e=>Object(n.h)({http:s,alertId:e}),loadAlertState:async e=>Object(n.k)({http:s,alertId:e}),loadAlertInstanceSummary:async e=>Object(n.j)({http:s,alertId:e}),loadAlertTypes:async()=>Object(n.l)({http:s}),resolveRule:async e=>Object(n.q)({http:s,ruleId:e}),getHealth:async()=>Object(n.a)({http:s})}))}}function c(e){return!1===e.enabled}function u(e){return!0===e.muteAll}function d(e,t){return e.mutedInstanceIds.findIndex((e=>e===t))>=0}},90:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return u}));var a=s(0);const i=a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusOk",{defaultMessage:"Ok"}),n=a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusActive",{defaultMessage:"Active"}),l=a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusError",{defaultMessage:"Error"}),r=a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusLicenseError",{defaultMessage:"License Error"}),o={ok:i,active:n,error:l,pending:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusPending",{defaultMessage:"Pending"}),unknown:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertStatusUnknown",{defaultMessage:"Unknown"})},c=a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonUnknown",{defaultMessage:"An error occurred for unknown reasons."}),u={read:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonReading",{defaultMessage:"An error occurred when reading the rule."}),decrypt:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonDecrypting",{defaultMessage:"An error occurred when decrypting the rule."}),execute:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonRunning",{defaultMessage:"An error occurred when running the rule."}),unknown:c,license:a.i18n.translate("xpack.triggersActionsUI.sections.alertsList.alertErrorReasonLicense",{defaultMessage:"Cannot run rule"})}},98:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var a=s(23),i=s.n(a),n=s(3),l=s(17);function r(e){if(!e)return"00:00:00.000";const t=i.a.duration(e);return`${[t.hours(),t.minutes(),t.seconds()].map((e=>Object(n.padStart)(`${e}`,2,"0"))).join(":")}.${Object(n.padStart)(`${t.milliseconds()}`,3,"0")}`}function o(e,t){if(!e||!e.ruleTaskTimeout)return!1;const s=e.ruleTaskTimeout;return t>Object(l.parseDuration)(s)}}}]);