/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[39],{42:function(e,t,i){"use strict";i.r(t),i.d(t,"EmailActionConnectorFields",(function(){return x})),i.d(t,"nullableString",(function(){return h})),i.d(t,"default",(function(){return x}));var s=i(1),n=i.n(s),a=i(13),l=i(0),r=i(36),c=i(59),o=i(72),u=i(24),d=i(3),j=i(7);var b=i(6);function p(e,t,i){const[n,a]=Object(s.useState)(!1),[l,r]=Object(s.useState)(void 0),c=Object(s.useCallback)((async t=>{let i;try{i=await async function({http:e,service:t}){return await e.get(`${j.e}/connector/_email_config/${t}`)}({http:e,service:t}),a(Object(d.isEmpty)(i))}catch(e){i={},a(!0)}return i}),[i]);return Object(s.useEffect)((()=>{(async()=>{if(l){if(i("service",l),l===b.AdditionalEmailServices.EXCHANGE)return;const e=await c(l);i("host",null!=e&&e.host?e.host:""),i("port",null!=e&&e.port?e.port:0),i("secure",null!=(null==e?void 0:e.secure)&&e.secure)}})()}),[l]),Object(s.useEffect)((()=>{(async()=>{t&&await c(t)})()}),[t]),{emailServiceConfigurable:n,setEmailService:r}}var g=i(5);const m=Object(s.lazy)((()=>i.e(60).then(i.bind(null,284)))),x=({action:e,editActionConfig:t,editActionSecrets:i,errors:d,readOnly:j})=>{var x;const{docLinks:f,http:O,isCloud:v}=Object(c.b)().services,{from:E,host:A,port:F,secure:I,hasAuth:y,service:w}=e.config,{user:S,password:C}=e.secrets,{emailServiceConfigurable:T,setEmailService:k}=p(O,w,t);Object(s.useEffect)((()=>{e.id||t("hasAuth",!0)}),[]);const L=void 0!==E&&void 0!==d.from&&d.from.length>0,M=void 0!==A&&void 0!==d.host&&d.host.length>0,U=void 0!==w&&void 0!==d.service&&d.service.length>0,z=void 0!==F&&void 0!==d.port&&d.port.length>0,P=void 0!==C&&void 0!==d.password&&d.password.length>0,W=void 0!==S&&void 0!==d.user&&d.user.length>0,B=Object(g.jsx)(n.a.Fragment,null,Object(o.a)(!e.id,2,null!==(x=e.isMissingSecrets)&&void 0!==x&&x,l.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.emailAction.reenterValuesLabel",{defaultMessage:"Username and password are encrypted. Please reenter values for these fields."})),Object(g.jsx)(a.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFormRow,{id:"emailUser",fullWidth:!0,error:d.user,isInvalid:W,label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.userTextFieldLabel",{defaultMessage:"Username"})},Object(g.jsx)(a.EuiFieldText,{fullWidth:!0,isInvalid:W,name:"user",readOnly:j,value:S||"","data-test-subj":"emailUserInput",onChange:e=>{i("user",h(e.target.value))},onBlur:()=>{S||i("user","")}}))),Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFormRow,{id:"emailPassword",fullWidth:!0,error:d.password,isInvalid:P,label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.passwordFieldLabel",{defaultMessage:"Password"})},Object(g.jsx)(a.EuiFieldPassword,{fullWidth:!0,readOnly:j,isInvalid:P,name:"password",value:C||"","data-test-subj":"emailPasswordInput",onChange:e=>{i("password",h(e.target.value))},onBlur:()=>{C||i("password","")}})))));return Object(g.jsx)(n.a.Fragment,null,Object(g.jsx)(a.EuiFlexGroup,null,Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFormRow,{id:"from",fullWidth:!0,error:d.from,isInvalid:L,label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.fromTextFieldLabel",{defaultMessage:"Sender"}),helpText:Object(g.jsx)(a.EuiLink,{href:f.links.alerting.emailActionConfig,target:"_blank"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.emailAction.configureAccountsHelpLabel",defaultMessage:"Configure email accounts"}))},Object(g.jsx)(a.EuiFieldText,{fullWidth:!0,readOnly:j,isInvalid:L,name:"from",value:E||"","data-test-subj":"emailFromInput",onChange:e=>{t("from",e.target.value)},onBlur:()=>{E||t("from","")}})))),Object(g.jsx)(a.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFormRow,{label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.serviceTextFieldLabel",{defaultMessage:"Service"}),error:d.serverType,isInvalid:U},Object(g.jsx)(a.EuiSelect,{name:"service",hasNoInitialSelection:!0,value:w,disabled:j,isInvalid:U,"data-test-subj":"emailServiceSelectInput",options:Object(u.b)(v),onChange:e=>{k(e.target.value)}})))),w===b.AdditionalEmailServices.EXCHANGE?Object(g.jsx)(m,{action:e,editActionConfig:t,editActionSecrets:i,errors:d,readOnly:j}):Object(g.jsx)(n.a.Fragment,null,Object(g.jsx)(a.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFormRow,{id:"emailHost",fullWidth:!0,error:d.host,isInvalid:M,label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.hostTextFieldLabel",{defaultMessage:"Host"})},Object(g.jsx)(a.EuiFieldText,{fullWidth:!0,disabled:!T,readOnly:j,isInvalid:M,name:"host",value:A||"","data-test-subj":"emailHostInput",onChange:e=>{t("host",e.target.value)},onBlur:()=>{A||t("host","")}}))),Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFormRow,{id:"emailPort",fullWidth:!0,placeholder:"587",error:d.port,isInvalid:z,label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.portTextFieldLabel",{defaultMessage:"Port"})},Object(g.jsx)(a.EuiFieldNumber,{prepend:":",isInvalid:z,fullWidth:!0,disabled:!T,readOnly:j,name:"port",value:F||"","data-test-subj":"emailPortInput",onChange:e=>{t("port",parseInt(e.target.value,10))},onBlur:()=>{F||t("port",0)}}))),Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiFormRow,{hasEmptyLabelSpace:!0},Object(g.jsx)(a.EuiSwitch,{label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.secureSwitchLabel",{defaultMessage:"Secure"}),"data-test-subj":"emailSecureSwitch",disabled:j||!T,checked:I||!1,onChange:e=>{t("secure",e.target.checked)}}))))))),Object(g.jsx)(a.EuiFlexGroup,null,Object(g.jsx)(a.EuiFlexItem,null,Object(g.jsx)(a.EuiSpacer,{size:"m"}),Object(g.jsx)(a.EuiTitle,{size:"xxs"},Object(g.jsx)("h4",null,Object(g.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.authenticationLabel",defaultMessage:"Authentication"}))),Object(g.jsx)(a.EuiSpacer,{size:"s"}),Object(g.jsx)(a.EuiSwitch,{label:l.i18n.translate("xpack.triggersActionsUI.sections.builtinActionTypes.emailAction.hasAuthSwitchLabel",{defaultMessage:"Require authentication for this server"}),disabled:j,checked:y||!1,onChange:e=>{t("hasAuth",e.target.checked),e.target.checked||(i("user",null),i("password",null))}}))),y?B:null))};function h(e){return null==e||""===e.trim()?null:e}},59:function(e,t,i){"use strict";i.d(t,"a",(function(){return s.KibanaContextProvider})),i.d(t,"b",(function(){return n}));var s=i(35);const n=()=>Object(s.useKibana)()},72:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i(13),n=i(0),a=i(1),l=i.n(a),r=i(36),c=i(5);const o=(e,t,i,a)=>i?Object(c.jsx)(l.a.Fragment,null,Object(c.jsx)(s.EuiSpacer,{size:"m"}),Object(c.jsx)(s.EuiCallOut,{size:"s",color:"warning",iconType:"alert","data-test-subj":"missingSecretsMessage",title:n.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.missingSecretsValuesLabel",{defaultMessage:"Sensitive information is not imported. Please enter value{encryptedFieldsLength, plural, one {} other {s}} for the following field{encryptedFieldsLength, plural, one {} other {s}}.",values:{encryptedFieldsLength:t}})}),Object(c.jsx)(s.EuiSpacer,{size:"m"})):e?Object(c.jsx)(l.a.Fragment,null,Object(c.jsx)(s.EuiSpacer,{size:"s"}),Object(c.jsx)(s.EuiText,{size:"s","data-test-subj":"rememberValuesMessage"},Object(c.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.components.builtinActionTypes.rememberValueLabel",defaultMessage:"Remember {encryptedFieldsLength, plural, one {this} other {these}} value. You must reenter {encryptedFieldsLength, plural, one {it} other {them}} each time you edit the connector.",values:{encryptedFieldsLength:t}})),Object(c.jsx)(s.EuiSpacer,{size:"s"})):Object(c.jsx)(l.a.Fragment,null,Object(c.jsx)(s.EuiSpacer,{size:"s"}),Object(c.jsx)(s.EuiCallOut,{size:"s",iconType:"iInCircle","data-test-subj":"reenterValuesMessage",title:a}),Object(c.jsx)(s.EuiSpacer,{size:"m"}))}}]);