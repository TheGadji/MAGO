/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[45],{38:function(e,t,n){"use strict";n.r(t),n.d(t,"AddConnectorInline",(function(){return u})),n.d(t,"default",(function(){return u}));var o=n(1),c=n.n(o),i=n(0),s=n(36),a=n(13),r=n(63),l=n(59),d=n(5);const u=({actionTypesIndex:e,actionItem:t,index:n,connectors:u,onAddConnector:j,onDeleteConnector:b,onSelectConnector:g,actionTypeRegistry:x,emptyActionsIds:p})=>{const{application:{capabilities:I}}=Object(l.b)().services,A=Object(r.d)(I),[m,O]=Object(o.useState)([]),[f,C]=Object(o.useState)(!1),[v,y]=Object(o.useState)([]),T=e?e[t.actionTypeId].name:t.actionTypeId,E=e[t.actionTypeId],F=x.get(t.actionTypeId),M=Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.emptyConnectorsLabel",defaultMessage:"No {actionTypeName} connectors",values:{actionTypeName:T}}),U=Object(d.jsx)(a.EuiText,{color:"danger"},Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle",defaultMessage:"Unable to load connector"}));Object(o.useEffect)((()=>{if(u){const e=u.filter((e=>e.actionTypeId===t.actionTypeId&&((null==E?void 0:E.enabledInConfig)||e.isPreconfigured))).map((({name:e,id:t,isPreconfigured:n})=>({label:`${e} ${n?"(preconfigured)":""}`,key:t,id:t})));O(e),e.length>0&&y([`Unable to load ${F.actionTypeTitle} connector`])}C(!!p.find((e=>t.id===e)))}),[]);const k=Object(d.jsx)(a.EuiFlexGroup,{component:"div"},Object(d.jsx)(a.EuiFlexItem,null,Object(d.jsx)(a.EuiFormRow,{fullWidth:!0,label:Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.actionIdLabel",defaultMessage:"Use another {connectorInstance} connector",values:{connectorInstance:T}}),labelAppend:Object(d.jsx)(a.EuiButtonEmpty,{size:"xs","data-test-subj":`addNewActionConnectorButton-${t.actionTypeId}`,onClick:j},Object(d.jsx)(s.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.addNewConnectorEmptyButton"})),error:v,isInvalid:v.length>0},Object(d.jsx)(a.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},options:m,id:`selectActionConnector-${t.id}-${n}`,"data-test-subj":`selectActionConnector-${t.actionTypeId}-${n}`,onChange:e=>{setTimeout((()=>{var t;g(null!==(t=e[0].id)&&void 0!==t?t:"")}))},isClearable:!1}))));return Object(d.jsx)(c.a.Fragment,null,Object(d.jsx)(a.EuiAccordion,{key:n,initialIsOpen:!0,id:n.toString(),className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${n}`,buttonContent:Object(d.jsx)(a.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(d.jsx)(a.EuiFlexItem,{grow:!1},Object(d.jsx)(a.EuiIcon,{type:F.iconClass,size:"m"})),Object(d.jsx)(a.EuiFlexItem,null,Object(d.jsx)(a.EuiText,null,Object(d.jsx)("div",null,Object(d.jsx)(s.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.connectorAddInline.newAlertActionTypeEditTitle",values:{actionConnectorName:F.actionTypeTitle}})))),!f&&Object(d.jsx)(a.EuiFlexItem,{grow:!1},Object(d.jsx)(a.EuiIconTip,{type:"alert",size:"m",color:"danger","data-test-subj":"alertActionAccordionErrorTooltip",content:Object(d.jsx)(s.FormattedMessage,{defaultMessage:"Unable to load connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle'"})}))),extraAction:Object(d.jsx)(a.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":i.i18n.translate("xpack.triggersActionsUI.sections.connectorAddInline.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:b}),paddingSize:"l"},A?m.length>0?k:Object(d.jsx)(a.EuiEmptyPrompt,{title:f?M:U,actions:Object(d.jsx)(a.EuiButton,{color:"primary",fill:!0,size:"s","data-test-subj":`createActionConnectorButton-${n}`,onClick:j},Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.addConnectorButtonLabel",defaultMessage:"Create a connector"}))}):Object(d.jsx)(a.EuiCallOut,{title:M},Object(d.jsx)("p",null,Object(d.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unauthorizedToCreateForEmptyConnectors",defaultMessage:"Only authorized users can configure a connector. Contact your administrator."})))),Object(d.jsx)(a.EuiSpacer,{size:"xs"}))}},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return o.KibanaContextProvider})),n.d(t,"b",(function(){return c}));var o=n(35);const c=()=>Object(o.useKibana)()},63:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));const o=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},c=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},s=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function a(e,t){var n,o;return null!==(n=null==t||null===(o=t.authorizedConsumers[e.consumer])||void 0===o?void 0:o.all)&&void 0!==n&&n}}}]);