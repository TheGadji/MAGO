/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.watcher_bundle_jsonpfunction=window.watcher_bundle_jsonpfunction||[]).push([[1],Array(36).concat([function(e,t,n){e.exports=n(8)(1076)},function(e,t,n){e.exports=n(8)(1270)},function(e,t,n){e.exports=n(8)(114)},function(e,t,n){e.exports=n(8)(1075)},function(e,t,n){var s=n(47),r=n(48),a=r;a.v1=s,a.v4=r,e.exports=a},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var s=new Uint8Array(16);e.exports=function(){return n(s),s}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],s=0;s<256;++s)n[s]=(s+256).toString(16).substr(1);e.exports=function(e,t){var s=t||0,r=n;return[r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ElasticsearchSqlHighlightRules",{enumerable:!0,get:function(){return s.ElasticsearchSqlHighlightRules}}),Object.defineProperty(t,"ScriptHighlightRules",{enumerable:!0,get:function(){return s.ScriptHighlightRules}}),Object.defineProperty(t,"XJsonHighlightRules",{enumerable:!0,get:function(){return s.XJsonHighlightRules}}),Object.defineProperty(t,"XJsonMode",{enumerable:!0,get:function(){return s.XJsonMode}}),Object.defineProperty(t,"addXJsonToRules",{enumerable:!0,get:function(){return s.addXJsonToRules}}),Object.defineProperty(t,"installXJsonMode",{enumerable:!0,get:function(){return s.installXJsonMode}});var s=n(44)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ElasticsearchSqlHighlightRules",{enumerable:!0,get:function(){return s.ElasticsearchSqlHighlightRules}}),Object.defineProperty(t,"ScriptHighlightRules",{enumerable:!0,get:function(){return s.ScriptHighlightRules}}),Object.defineProperty(t,"XJsonHighlightRules",{enumerable:!0,get:function(){return s.XJsonHighlightRules}}),Object.defineProperty(t,"XJsonMode",{enumerable:!0,get:function(){return r.XJsonMode}}),Object.defineProperty(t,"addXJsonToRules",{enumerable:!0,get:function(){return s.addXJsonToRules}}),Object.defineProperty(t,"installXJsonMode",{enumerable:!0,get:function(){return r.installXJsonMode}});var s=n(50),r=n(54)},function(e,t,n){"use strict";var s=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.ElasticsearchSqlHighlightRules=void 0;var r=s(n(37));const{TextHighlightRules:a}=r.default.acequire("ace/mode/text_highlight_rules"),i=r.default.acequire("ace/lib/oop"),o=function(){const e=this.createKeywordMapper({keyword:["describe|between|in|like|not|and|or|desc|select|from|where|having|group|by|orderasc|desc|pivot|for|in|as|show|columns|include|frozen|tables|escape|limit|rlike|all|distinct|is","avg|count|first|first_value|last|last_value|max|min|sum|kurtosis|mad|percentile|percentile_rank|skewness|stddev_pop|sum_of_squares|var_pop|histogram|case|coalesce|greatest|ifnull|iif|isnull|least|nullif|nvl|curdate|current_date|current_time|current_timestamp|curtime|dateadd|datediff|datepart|datetrunc|date_add|date_diff|date_part|date_trunc|day|dayname|dayofmonth|dayofweek|dayofyear|day_name|day_of_month|day_of_week|day_of_year|dom|dow|doy|hour|hour_of_day|idow|isodayofweek|isodow|isoweek|isoweekofyear|iso_day_of_week|iso_week_of_year|iw|iwoy|minute|minute_of_day|minute_of_hour|month|monthname|month_name|month_of_year|now|quarter|second|second_of_minute|timestampadd|timestampdiff|timestamp_add|timestamp_diff|today|week|week_of_year|year|abs|acos|asin|atan|atan2|cbrt|ceil|ceiling|cos|cosh|cot|degrees|e|exp|expm1|floor|log|log10|mod|pi|power|radians|rand|random|round|sign|signum|sin|sinh|sqrt|tan|truncate|ascii|bit_length|char|character_length|char_length|concat|insert|lcase|left|length|locate|ltrim|octet_length|position|repeat|replace|right|rtrim|space|substring|ucase|cast|convert|database|user|st_astext|st_aswkt|st_distance|st_geometrytype|st_geomfromtext|st_wkttosql|st_x|st_y|st_z|score","true|false","null|boolean|byte|short|integer|long|double|float|half_float|scaled_float|keyword|text|binary|date|ip|object|nested|time|interval_year|interval_month|interval_day|interval_hour|interval_minute|interval_second|interval_year_to_monthinteval_day_to_hour|interval_day_to_minute|interval_day_to_second|interval_hour_to_minute|interval_hour_to_secondinterval_minute_to_second|geo_point|geo_shape|shape"].join("|")},"identifier",!0);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"constant",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"entity.name.function",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"⇐|<⇒|\\*|\\.|\\:\\:|\\+|\\-|\\/|\\/\\/|%|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]},this.normalizeRules()};t.ElasticsearchSqlHighlightRules=o,i.inherits(o,a)},function(e,t,n){"use strict";var s=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptHighlightRules=o;var r=s(n(37));const a=r.default.acequire("ace/lib/oop"),{TextHighlightRules:i}=r.default.acequire("ace/mode/text_highlight_rules");function o(){this.name="ScriptHighlightRules",this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:"def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx"},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}a.inherits(o,i)},function(e,t,n){var s,r,a=n(41),i=n(42),o=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||s,h=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==h){var p=a();null==d&&(d=s=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=r=16383&(p[6]<<8|p[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,f=m-o+(g-c)/1e4;if(f<0&&void 0===e.clockseq&&(h=h+1&16383),(f<0||m>o)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=m,c=g,r=h;var w=(1e4*(268435455&(m+=122192928e5))+g)%4294967296;u[l++]=w>>>24&255,u[l++]=w>>>16&255,u[l++]=w>>>8&255,u[l++]=255&w;var b=m/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=h>>>8|128,u[l++]=255&h;for(var j=0;j<6;++j)u[l+j]=d[j];return t||i(u)}},function(e,t,n){var s=n(41),r=n(42);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[a+o]=i[o];return t||r(i)}},function(e,t,n){var s,r,a,i,o;
/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */i=this,o=function(e){var t=!1,n=!1,s=!1,r=!1,a="escape years months weeks days hours minutes seconds milliseconds general".split(" "),i=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function o(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function c(e){for(var t="";e;)t+="0",e-=1;return t}function l(e,t){var n=e+"+"+b(k(t).sort(),(function(e){return e+":"+t[e]})).join(",");return l.cache[n]||(l.cache[n]=Intl.NumberFormat(e,t)),l.cache[n]}function u(e,t,a){var i,o,d,h=t.useToLocaleString,p=t.useGrouping,m=p&&t.grouping.slice(),g=t.maximumSignificantDigits,f=t.minimumIntegerDigits||1,w=t.fractionDigits||0,b=t.groupingSeparator,j=t.decimalSeparator;if(h&&a){var x,y={minimumIntegerDigits:f,useGrouping:p};return w&&(y.maximumFractionDigits=w,y.minimumFractionDigits=w),g&&e>0&&(y.maximumSignificantDigits=g),s?(r||((x=_({},t)).useGrouping=!1,x.decimalSeparator=".",e=parseFloat(u(e,x),10)),l(a,y).format(e)):(n||((x=_({},t)).useGrouping=!1,x.decimalSeparator=".",e=parseFloat(u(e,x),10)),e.toLocaleString(a,y))}var v=(g?e.toPrecision(g+1):e.toFixed(w+1)).split("e");d=v[1]||"",o=(v=v[0].split("."))[1]||"";var O=(i=v[0]||"").length,E=o.length,k=O+E,S=i+o;(g&&k===g+1||!g&&E===w+1)&&((S=function(e){for(var t=e.split("").reverse(),n=0,s=!0;s&&n<t.length;)n?"9"===t[n]?t[n]="0":(t[n]=(parseInt(t[n],10)+1).toString(),s=!1):(parseInt(t[n],10)<5&&(s=!1),t[n]="0"),n+=1;return s&&t.push("1"),t.reverse().join("")}(S)).length===k+1&&(O+=1),E&&(S=S.slice(0,-1)),i=S.slice(0,O),o=S.slice(O)),g&&(o=o.replace(/0*$/,""));var M=parseInt(d,10);M>0?o.length<=M?(i+=o+=c(M-o.length),o=""):(i+=o.slice(0,M),o=o.slice(M)):M<0&&(o=c(Math.abs(M)-i.length)+i+o,i="0"),g||((o=o.slice(0,w)).length<w&&(o+=c(w-o.length)),i.length<f&&(i=c(f-i.length)+i));var T,A="";if(p)for(v=i;v.length;)m.length&&(T=m.shift()),A&&(A=b+A),A=v.slice(-T)+A,v=v.slice(0,-T);else A=i;return o&&(A=A+j+o),A}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function h(e,t){var n=[];return w(k(t),(function(s){if("_durationLabels"===s.slice(0,15)){var r=s.slice(15).toLowerCase();w(k(t[s]),(function(a){a.slice(0,1)===e&&n.push({type:r,key:a,label:t[s][a]})}))}})),n}l.cache={};var p={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,n){return 1===t&&null===n?e:e+e}};function m(e){return"[object Array]"===Object.prototype.toString.call(e)}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(e,t){var n,s=0,r=e&&e.length||0;for("function"!=typeof t&&(n=t,t=function(e){return e===n});s<r;){if(t(e[s]))return e[s];s+=1}}function w(e,t){var n=0,s=e.length;if(e&&s)for(;n<s;){if(!1===t(e[n],n))return;n+=1}}function b(e,t){var n=0,s=e.length,r=[];if(!e||!s)return r;for(;n<s;)r[n]=t(e[n],n),n+=1;return r}function j(e,t){return b(e,(function(e){return e[t]}))}function x(e){var t=[];return w(e,(function(e){e&&t.push(e)})),t}function y(e){var t=[];return w(e,(function(e){f(t,e)||t.push(e)})),t}function v(e,t){var n=[];return w(e,(function(e){w(t,(function(t){e===t&&n.push(e)}))})),y(n)}function O(e,t){var n=[];return w(e,(function(s,r){if(!t(s))return n=e.slice(r),!1})),n}function E(e,t){return O(e.slice().reverse(),t).reverse()}function _(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function k(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function S(e,t){var n=0,s=e.length;if(!e||!s)return!1;for(;n<s;){if(!0===t(e[n],n))return!0;n+=1}return!1}function M(e){var t=[];return w(e,(function(e){t=t.concat(e)})),t}function T(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function A(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function R(){var e,t=[].slice.call(arguments),n={};if(w(t,(function(t,s){if(!s){if(!m(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?g(t)&&_(n,t):n.precision=t:n.template=t})),!e||!e.length)return[];n.returnMomentTypes=!0;var s=b(e,(function(e){return e.format(n)})),r=v(a,y(j(M(s),"type"))),i=n.largest;return i&&(r=r.slice(0,i)),n.returnMomentTypes=!1,n.outputTypes=r,b(e,(function(e){return e.format(n)}))}function L(){var n=[].slice.call(arguments),r=_({},this.format.defaults),c=this.asMilliseconds(),l=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(c=0,l=0);var M=c<0,T=e.duration(Math.abs(c),"milliseconds"),A=e.duration(Math.abs(l),"months");w(n,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?g(e)&&_(r,e):r.precision=e:r.template=e}));var R={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},L={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};r.types=a;var I=function(e){return f(a,(function(t){return L[t].test(e)}))},P=new RegExp(b(a,(function(e){return L[e].source})).join("|"),"g");r.duration=this;var F="function"==typeof r.template?r.template.apply(r):r.template,C=r.outputTypes,N=r.returnMomentTypes,J=r.largest,D=[];C||(m(r.stopTrim)&&(r.stopTrim=r.stopTrim.join("")),r.stopTrim&&w(r.stopTrim.match(P),(function(e){var t=I(e);"escape"!==t&&"general"!==t&&D.push(t)})));var W=e.localeData();W||(W={}),w(k(p),(function(e){"function"!=typeof p[e]?W["_"+e]||(W["_"+e]=p[e]):W[e]||(W[e]=p[e])})),w(k(W._durationTimeTemplates),(function(e){F=F.replace("_"+e+"_",W._durationTimeTemplates[e])}));var B=r.userLocale||e.locale(),q=r.useLeftUnits,z=r.usePlural,H=r.precision,U=r.forceLength,$=r.useGrouping,V=r.trunc,G=r.useSignificantDigits&&H>0,K=G?r.precision:0,X=K,Y=r.minValue,Z=!1,Q=r.maxValue,ee=!1,te=r.useToLocaleString,ne=r.groupingSeparator,se=r.decimalSeparator,re=r.grouping;te=te&&(t||s);var ae=r.trim;m(ae)&&(ae=ae.join(" ")),null===ae&&(J||Q||G)&&(ae="all"),null!==ae&&!0!==ae&&"left"!==ae&&"right"!==ae||(ae="large"),!1===ae&&(ae="");var ie=function(e){return e.test(ae)},oe=/large/,ce=/small/,le=/both/,ue=/mid/,de=/^all|[^sm]all/,he=/final/,pe=J>0||S([oe,le,de],ie),me=S([ce,le,de],ie),ge=S([ue,de],ie),fe=S([he,de],ie),we=b(F.match(P),(function(e,t){var n=I(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==n&&"general"!==n&&D.push(n)),{index:t,length:e.length,text:"",token:"escape"===n?e.replace(L.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}})),be={index:0,length:0,token:"",text:"",type:null},je=[];q&&we.reverse(),w(we,(function(e){if(e.type)return(be.type||be.text)&&je.push(be),void(be=e);q?be.text=e.token+be.text:be.text+=e.token})),(be.type||be.text)&&je.push(be),q&&je.reverse();var xe=v(a,y(x(j(je,"type"))));if(!xe.length)return j(je,"text").join("");xe=b(xe,(function(e,t){var n,s=t+1===xe.length,a=!t;n="years"===e||"months"===e?A.as(e):T.as(e);var i=Math.floor(n),o=n-i,c=f(je,(function(t){return e===t.type}));return a&&Q&&n>Q&&(ee=!0),s&&Y&&Math.abs(r.duration.as(e))<Y&&(Z=!0),a&&null===U&&c.length>1&&(U=!0),T.subtract(i,e),A.subtract(i,e),{rawValue:n,wholeValue:i,decimalValue:s?o:0,isSmallest:s,isLargest:a,type:e,tokenLength:c.length}}));var ye=V?Math.floor:Math.round,ve=function(e,t){var n=Math.pow(10,t);return ye(e*n)/n},Oe=!1,Ee=!1,_e=function(e,t){var n={useGrouping:$,groupingSeparator:ne,decimalSeparator:se,grouping:re,useToLocaleString:te};return G&&(K<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(n.maximumSignificantDigits=K,e.significantDigits=K)),ee&&!Ee&&(e.isLargest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),Z&&!Ee&&(e.isSmallest?(e.wholeValue=Y,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?H<0?e.value=ve(e.wholeValue,H):0===H?e.value=ye(e.wholeValue+e.decimalValue):G?(e.value=V?ve(e.rawValue,K-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(K-=e.wholeValue.toString().length)):(n.fractionDigits=H,e.value=V?e.wholeValue+ve(e.decimalValue,H):e.wholeValue+e.decimalValue):G&&e.wholeValue?(e.value=Math.round(ve(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),K-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(U||Oe)&&(n.minimumIntegerDigits=e.tokenLength,Ee&&n.maximumSignificantDigits<e.tokenLength&&delete n.maximumSignificantDigits),!Oe&&(e.value>0||""===ae||f(D,e.type)||f(C,e.type))&&(Oe=!0),e.formattedValue=u(e.value,n,B),n.useGrouping=!1,n.decimalSeparator=".",e.formattedValueEn=u(e.value,n,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((xe=x(xe=b(xe,_e))).length>1){var ke=function(e){return f(xe,(function(t){return t.type===e}))},Se=function(e){var t=ke(e.type);t&&w(e.targets,(function(e){var n=ke(e.type);n&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,n.rawValue+=1,n.wholeValue+=1,n.decimalValue=0,n.formattedValueEn=n.wholeValue.toString(),Ee=!0)}))};w(i,Se)}return Ee&&(Oe=!1,K=X,xe=x(xe=b(xe,_e))),!C||ee&&!r.trim?(pe&&(xe=O(xe,(function(e){return!e.isSmallest&&!e.wholeValue&&!f(D,e.type)}))),J&&xe.length&&(xe=xe.slice(0,J)),me&&xe.length>1&&(xe=E(xe,(function(e){return!e.wholeValue&&!f(D,e.type)&&!e.isLargest}))),ge&&(xe=x(xe=b(xe,(function(e,t){return t>0&&t<xe.length-1&&!e.wholeValue?null:e})))),!fe||1!==xe.length||xe[0].wholeValue||!V&&xe[0].isSmallest&&xe[0].rawValue<Y||(xe=[])):xe=x(xe=b(xe,(function(e){return f(C,(function(t){return e.type===t}))?e:null}))),N?xe:(w(je,(function(e){var t=R[e.type],n=f(xe,(function(t){return t.type===e.type}));if(t&&n){var s=n.formattedValueEn.split(".");s[0]=parseInt(s[0],10),s[1]?s[1]=parseFloat("0."+s[1],10):s[1]=null;var r=W.durationPluralKey(t,s[0],s[1]),a=h(t,W),i=!1,c={};w(W._durationLabelTypes,(function(t){var n=f(a,(function(e){return e.type===t.type&&e.key===r}));n&&(c[n.type]=n.label,o(e.text,t.string)&&(e.text=e.text.replace(t.string,n.label),i=!0))})),z&&!i&&(a.sort(d),w(a,(function(t){return c[t.type]===t.label?!o(e.text,t.label)&&void 0:o(e.text,t.label)?(e.text=e.text.replace(t.label,c[t.type]),!1):void 0})))}})),(je=b(je,(function(e){if(!e.type)return e.text;var t=f(xe,(function(t){return t.type===e.type}));if(!t)return"";var n="";return q&&(n+=e.text),(M&&ee||!M&&Z)&&(n+="< ",ee=!1,Z=!1),(M&&Z||!M&&ee)&&(n+="> ",ee=!1,Z=!1),M&&(t.value>0||""===ae||f(D,t.type)||f(C,t.type))&&(n+="-",M=!1),"milliseconds"===e.type&&t.formattedValueMS?n+=t.formattedValueMS:n+=t.formattedValue,q||(n+=e.text),n}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function I(){var e=this.duration,t=function(t){return e._data[t]},n=f(this.types,t),s=function(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}(this.types,t);switch(n){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(n===s)return"d __";case"weeks":return n===s?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(n===s)return"M __";case"years":return n===s?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function P(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=R,e.duration.fn.format=L,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:I,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",p)}var F=function(e,t,n){return e.toLocaleString(t,n)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&A(F),n=t&&T(F);var C=function(e,t,n){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,n).format(e)};return s=A(C),r=s&&T(C),P(e),P},r=[n(28)],void 0===(a="function"==typeof(s=o)?s.apply(t,r):s)||(e.exports=a),i&&(i.momentDurationFormatSetup=i.moment?o(i.moment):o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ElasticsearchSqlHighlightRules",{enumerable:!0,get:function(){return s.ElasticsearchSqlHighlightRules}}),Object.defineProperty(t,"ScriptHighlightRules",{enumerable:!0,get:function(){return r.ScriptHighlightRules}}),Object.defineProperty(t,"XJsonHighlightRules",{enumerable:!0,get:function(){return a.XJsonHighlightRules}}),Object.defineProperty(t,"addXJsonToRules",{enumerable:!0,get:function(){return a.addToRules}});var s=n(45),r=n(46),a=n(51)},function(e,t,n){"use strict";var s=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.XJsonHighlightRules=d,t.addToRules=function(e,t){e.$rules=(0,r.defaultsDeep)(e.$rules,u(t)),e.embedRules(o.ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]),e.embedRules(i.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])};var r=n(24),a=s(n(37));n(52);var i=n(45),o=n(46);const{JsonHighlightRules:c}=a.default.acequire("ace/mode/json_highlight_rules"),l=a.default.acequire("ace/lib/oop"),u=function(e){const t={},n=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:!1,push:!0},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:!1,push:!0},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:!1,regex:"{",next:e=e||"json",push:!0},{token:"paren.lparen",merge:!1,regex:"[[(]"},{token:"paren.rparen",merge:!1,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:!1,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];return t[e]=n,t[e+"-sql"]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("query")(\\s*?)(:)(\\s*?)(""")',next:"sql-start",merge:!1,push:!0}].concat(n),t.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}],t};function d(){this.$rules={...u("start")},this.embedRules(o.ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]),this.embedRules(i.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}l.inherits(d,c)},function(e,t,n){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var s=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,a=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};s.inherits(a,r),t.JsonHighlightRules=a})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var s=e("../range").Range,r=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var r=n[1].length,a=e.findMatchingBracket({row:t,column:r});if(!a||a.row==t)return 0;var i=this.$getIndent(e.getLine(a.row));e.replace(new s(t,0,t,r-1),i)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(r.prototype),t.MatchingBraceOutdent=r})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){"use strict";var s=e("../../lib/oop"),r=e("../../range").Range,a=e("./fold_mode").FoldMode,i=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};s.inherits(i,a),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var s=e.getLine(n);if(this.singleLineBlockCommentRe.test(s)&&!this.startRegionRe.test(s)&&!this.tripleStarBlockCommentRe.test(s))return"";var r=this._getFoldWidgetBase(e,t,n);return!r&&this.startRegionRe.test(s)?"start":r},this.getFoldWidgetRange=function(e,t,n,s){var r,a=e.getLine(n);if(this.startRegionRe.test(a))return this.getCommentRegionBlock(e,a,n);if(r=a.match(this.foldingStartMarker)){var i=r.index;if(r[1])return this.openingBracketBlock(e,r[1],n,i);var o=e.getCommentFoldRange(n,i+r[0].length,1);return o&&!o.isMultiLine()&&(s?o=this.getSectionRange(e,n):"all"!=t&&(o=null)),o}if("markbegin"!==t&&(r=a.match(this.foldingStopMarker))){i=r.index+r[0].length;return r[1]?this.closingBracketBlock(e,r[1],n,i):e.getCommentFoldRange(n,i,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),s=n.search(/\S/),a=t,i=n.length,o=t+=1,c=e.getLength();++t<c;){var l=(n=e.getLine(t)).search(/\S/);if(-1!==l){if(s>l)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=a)break;if(u.isMultiLine())t=u.end.row;else if(s==l)break}o=t}}return new r(a,i,o,e.getLine(o).length)},this.getCommentRegionBlock=function(e,t,n){for(var s=t.search(/\s*$/),a=e.getLength(),i=n,o=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,c=1;++n<a;){t=e.getLine(n);var l=o.exec(t);if(l&&(l[1]?c--:c++,!c))break}if(n>i)return new r(i,s,n,t.length)}}.call(i.prototype)})),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(e,t,s){"use strict";var r=e("../lib/oop"),a=e("./text").Mode,i=e("./json_highlight_rules").JsonHighlightRules,o=e("./matching_brace_outdent").MatchingBraceOutdent,c=e("./behaviour/cstyle").CstyleBehaviour,l=e("./folding/cstyle").FoldMode,u=e("../worker/worker_client").WorkerClient,d=function(){this.HighlightRules=i,this.$outdent=new o,this.$behaviour=new c,this.foldingRules=new l};r.inherits(d,a),function(){this.getNextLineIndent=function(e,t,n){var s=this.$getIndent(t);"start"==e&&(t.match(/^.*[\{\(\[]\s*$/)&&(s+=n));return s},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new u(["ace"],n(53),"JsonWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t},this.$id="ace/mode/json"}.call(d.prototype),t.Mode=d}))},function(e,t){e.exports.id="ace/mode/json_worker",e.exports.src='"no use strict";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if("[object Object]"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"XJsonMode",{enumerable:!0,get:function(){return s.XJsonMode}}),Object.defineProperty(t,"installXJsonMode",{enumerable:!0,get:function(){return s.installXJsonMode}});var s=n(55)},function(e,t,n){"use strict";var s=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.XJsonMode=void 0,t.installXJsonMode=function(e){e.getSession().setMode(new m)};var r=s(n(37)),a=n(44),i=n(56);const{WorkerClient:o}=r.default.acequire("ace/worker/worker_client"),c=r.default.acequire("ace/lib/oop"),{Mode:l}=r.default.acequire("ace/mode/json"),{Tokenizer:u}=r.default.acequire("ace/tokenizer"),{MatchingBraceOutdent:d}=r.default.acequire("ace/mode/matching_brace_outdent"),{CstyleBehaviour:h}=r.default.acequire("ace/mode/behaviour/cstyle"),{FoldMode:p}=r.default.acequire("ace/mode/folding/cstyle"),m=function(){const e=new a.XJsonHighlightRules;e.normalizeRules(),this.$tokenizer=new u(e.getRules()),this.$outdent=new d,this.$behaviour=new h,this.foldingRules=new p};t.XJsonMode=m,c.inherits(m,l),m.prototype.createWorker=function(e){const t=new o(["ace"],i.workerModule,"JsonWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t}},function(e,t,n){"use strict";var s=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.workerModule=void 0;const r={id:"ace/mode/json_worker",src:s(n(57)).default};t.workerModule=r},function(e,t,n){"use strict";n.r(t),t.default='/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\n/* @notice\n *\n * This product includes code that is based on Ace editor, which was available\n * under a "BSD" license.\n *\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable */\n/*\n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the json\n  mode from the brace distro.\n\n  It is very likely that this file will be removed in future but for now it enables\n  extended JSON parsing, like e.g. """{}""" (triple quotes)\n*/\n// @internal\n// @ts-nocheck\n"no use strict";\n! function(window) {\n  function resolveModuleId(id, paths) {\n    for (var testPath = id, tail = ""; testPath;) {\n      var alias = paths[testPath];\n      if ("string" == typeof alias) return alias + tail;\n      if (alias) return alias.location.replace(/\\/*$/, "/") + (tail || alias.main || alias.name);\n      if (alias === !1) return "";\n      var i = testPath.lastIndexOf("/");\n      if (-1 === i) break;\n      tail = testPath.substr(i) + tail, testPath = testPath.slice(0, i)\n    }\n    return id\n  }\n  if (!(void 0 !== window.window && window.document || window.acequire && window.define)) {\n    window.console || (window.console = function() {\n      var msgs = Array.prototype.slice.call(arguments, 0);\n      postMessage({\n        type: "log",\n        data: msgs\n      })\n    }, window.console.error = window.console.warn = window.console.log = window.console.trace = window.console), window.window = window, window.ace = window, window.onerror = function(message, file, line, col, err) {\n      postMessage({\n        type: "error",\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack\n        }\n      })\n    }, window.normalizeModule = function(parentId, moduleName) {\n      if (-1 !== moduleName.indexOf("!")) {\n        var chunks = moduleName.split("!");\n        return window.normalizeModule(parentId, chunks[0]) + "!" + window.normalizeModule(parentId, chunks[1])\n      }\n      if ("." == moduleName.charAt(0)) {\n        var base = parentId.split("/").slice(0, -1).join("/");\n        for (moduleName = (base ? base + "/" : "") + moduleName; - 1 !== moduleName.indexOf(".") && previous != moduleName;) {\n          var previous = moduleName;\n          moduleName = moduleName.replace(/^\\.\\//, "").replace(/\\/\\.\\//, "/").replace(/[^\\/]+\\/\\.\\.\\//, "")\n        }\n      }\n      return moduleName\n    }, window.acequire = function acequire(parentId, id) {\n      if (id || (id = parentId, parentId = null), !id.charAt) throw Error("worker.js acequire() accepts only (parentId, id) as arguments");\n      id = window.normalizeModule(parentId, id);\n      var module = window.acequire.modules[id];\n      if (module) return module.initialized || (module.initialized = !0, module.exports = module.factory().exports), module.exports;\n      if (!window.acequire.tlns) return console.log("unable to load " + id);\n      var path = resolveModuleId(id, window.acequire.tlns);\n      return ".js" != path.slice(-3) && (path += ".js"), window.acequire.id = id, window.acequire.modules[id] = {}, importScripts(path), window.acequire(parentId, id)\n    }, window.acequire.modules = {}, window.acequire.tlns = {}, window.define = function(id, deps, factory) {\n      if (2 == arguments.length ? (factory = deps, "string" != typeof id && (deps = id, id = window.acequire.id)) : 1 == arguments.length && (factory = id, deps = [], id = window.acequire.id), "function" != typeof factory) return window.acequire.modules[id] = {\n        exports: factory,\n        initialized: !0\n      }, void 0;\n      deps.length || (deps = ["require", "exports", "module"]);\n      var req = function(childId) {\n        return window.acequire(id, childId)\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function() {\n          var module = this,\n            returnExports = factory.apply(this, deps.map(function(dep) {\n              switch (dep) {\n                case "require":\n                  return req;\n                case "exports":\n                  return module.exports;\n                case "module":\n                  return module;\n                default:\n                  return req(dep)\n              }\n            }));\n          return returnExports && (module.exports = returnExports), module\n        }\n      }\n    }, window.define.amd = {}, acequire.tlns = {}, window.initBaseUrls = function(topLevelNamespaces) {\n      for (var i in topLevelNamespaces) acequire.tlns[i] = topLevelNamespaces[i]\n    }, window.initSender = function() {\n      var EventEmitter = window.acequire("ace/lib/event_emitter").EventEmitter,\n        oop = window.acequire("ace/lib/oop"),\n        Sender = function() {};\n      return function() {\n        oop.implement(this, EventEmitter), this.callback = function(data, callbackId) {\n          postMessage({\n            type: "call",\n            id: callbackId,\n            data: data\n          })\n        }, this.emit = function(name, data) {\n          postMessage({\n            type: "event",\n            name: name,\n            data: data\n          })\n        }\n      }.call(Sender.prototype), new Sender\n    };\n    var main = window.main = null,\n      sender = window.sender = null;\n    window.onmessage = function(e) {\n      var msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command]) throw Error("Unknown command:" + msg.command);\n          window[msg.command].apply(window, msg.args)\n        }\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns), acequire("ace/lib/es5-shim"), sender = window.sender = window.initSender();\n        var clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender)\n      }\n    }\n  }\n}(this), ace.define("ace/lib/oop", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor, ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    })\n  }, exports.mixin = function(obj, mixin) {\n    for (var key in mixin) obj[key] = mixin[key];\n    return obj\n  }, exports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin)\n  }\n}), ace.define("ace/range", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var comparePoints = function(p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column\n    },\n    Range = function(startRow, startColumn, endRow, endColumn) {\n      this.start = {\n        row: startRow,\n        column: startColumn\n      }, this.end = {\n        row: endRow,\n        column: endColumn\n      }\n    };\n  (function() {\n    this.isEqual = function(range) {\n      return this.start.row === range.start.row && this.end.row === range.end.row && this.start.column === range.start.column && this.end.column === range.end.column\n    }, this.toString = function() {\n      return "Range: [" + this.start.row + "/" + this.start.column + "] -> [" + this.end.row + "/" + this.end.column + "]"\n    }, this.contains = function(row, column) {\n      return 0 == this.compare(row, column)\n    }, this.compareRange = function(range) {\n      var cmp, end = range.end,\n        start = range.start;\n      return cmp = this.compare(end.row, end.column), 1 == cmp ? (cmp = this.compare(start.row, start.column), 1 == cmp ? 2 : 0 == cmp ? 1 : 0) : -1 == cmp ? -2 : (cmp = this.compare(start.row, start.column), -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n    }, this.comparePoint = function(p) {\n      return this.compare(p.row, p.column)\n    }, this.containsRange = function(range) {\n      return 0 == this.comparePoint(range.start) && 0 == this.comparePoint(range.end)\n    }, this.intersects = function(range) {\n      var cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp\n    }, this.isEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column\n    }, this.isStart = function(row, column) {\n      return this.start.row == row && this.start.column == column\n    }, this.setStart = function(row, column) {\n      "object" == typeof row ? (this.start.column = row.column, this.start.row = row.row) : (this.start.row = row, this.start.column = column)\n    }, this.setEnd = function(row, column) {\n      "object" == typeof row ? (this.end.column = row.column, this.end.row = row.row) : (this.end.row = row, this.end.column = column)\n    }, this.inside = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) || this.isStart(row, column) ? !1 : !0 : !1\n    }, this.insideStart = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) ? !1 : !0 : !1\n    }, this.insideEnd = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isStart(row, column) ? !1 : !0 : !1\n    }, this.compare = function(row, column) {\n      return this.isMultiLine() || row !== this.start.row ? this.start.row > row ? -1 : row > this.end.row ? 1 : this.start.row === row ? column >= this.start.column ? 0 : -1 : this.end.row === row ? this.end.column >= column ? 0 : 1 : 0 : this.start.column > column ? -1 : column > this.end.column ? 1 : 0\n    }, this.compareStart = function(row, column) {\n      return this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.compareEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.compare(row, column)\n    }, this.compareInside = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.clipRows = function(firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.end.row) var end = {\n        row: firstRow,\n        column: 0\n      };\n      if (this.start.row > lastRow) var start = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.start.row) var start = {\n        row: firstRow,\n        column: 0\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.extend = function(row, column) {\n      var cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = {\n        row: row,\n        column: column\n      };\n      else var end = {\n        row: row,\n        column: column\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.isEmpty = function() {\n      return this.start.row === this.end.row && this.start.column === this.end.column\n    }, this.isMultiLine = function() {\n      return this.start.row !== this.end.row\n    }, this.clone = function() {\n      return Range.fromPoints(this.start, this.end)\n    }, this.collapseRows = function() {\n      return 0 == this.end.column ? new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0) : new Range(this.start.row, 0, this.end.row, 0)\n    }, this.toScreenRange = function(session) {\n      var screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column)\n    }, this.moveBy = function(row, column) {\n      this.start.row += row, this.start.column += column, this.end.row += row, this.end.column += column\n    }\n  }).call(Range.prototype), Range.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column)\n  }, Range.comparePoints = comparePoints, Range.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column\n  }, exports.Range = Range\n}), ace.define("ace/apply_delta", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.applyDelta = function(docLines, delta) {\n    var row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || "";\n    switch (delta.action) {\n      case "insert":\n        var lines = delta.lines;\n        if (1 === lines.length) docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n        else {\n          var args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args), docLines[row] = line.substring(0, startColumn) + docLines[row], docLines[row + delta.lines.length - 1] += line.substring(startColumn)\n        }\n        break;\n      case "remove":\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow ? docLines[row] = line.substring(0, startColumn) + line.substring(endColumn) : docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn))\n    }\n  }\n}), ace.define("ace/lib/event_emitter", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var EventEmitter = {},\n    stopPropagation = function() {\n      this.propagationStopped = !0\n    },\n    preventDefault = function() {\n      this.defaultPrevented = !0\n    };\n  EventEmitter._emit = EventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {}), this._defaultHandlers || (this._defaultHandlers = {});\n    var listeners = this._eventRegistry[eventName] || [],\n      defaultHandler = this._defaultHandlers[eventName];\n    if (listeners.length || defaultHandler) {\n      "object" == typeof e && e || (e = {}), e.type || (e.type = eventName), e.stopPropagation || (e.stopPropagation = stopPropagation), e.preventDefault || (e.preventDefault = preventDefault), listeners = listeners.slice();\n      for (var i = 0; listeners.length > i && (listeners[i](e, this), !e.propagationStopped); i++);\n      return defaultHandler && !e.defaultPrevented ? defaultHandler(e, this) : void 0\n    }\n  }, EventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (listeners) {\n      listeners = listeners.slice();\n      for (var i = 0; listeners.length > i; i++) listeners[i](e, this)\n    }\n  }, EventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    callback && this.addEventListener(eventName, function newCallback() {\n      _self.removeEventListener(eventName, newCallback), callback.apply(null, arguments)\n    })\n  }, EventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers || (handlers = this._defaultHandlers = {\n        _disabled_: {}\n      }), handlers[eventName]) {\n      var old = handlers[eventName],\n        disabled = handlers._disabled_[eventName];\n      disabled || (handlers._disabled_[eventName] = disabled = []), disabled.push(old);\n      var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n    }\n    handlers[eventName] = callback\n  }, EventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers) {\n      var disabled = handlers._disabled_[eventName];\n      if (handlers[eventName] == callback) handlers[eventName], disabled && this.setDefaultHandler(eventName, disabled.pop());\n      else if (disabled) {\n        var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n      }\n    }\n  }, EventEmitter.on = EventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    return listeners || (listeners = this._eventRegistry[eventName] = []), -1 == listeners.indexOf(callback) && listeners[capturing ? "unshift" : "push"](callback), callback\n  }, EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    if (listeners) {\n      var index = listeners.indexOf(callback); - 1 !== index && listeners.splice(index, 1)\n    }\n  }, EventEmitter.removeAllListeners = function(eventName) {\n    this._eventRegistry && (this._eventRegistry[eventName] = [])\n  }, exports.EventEmitter = EventEmitter\n}), ace.define("ace/anchor", ["require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Anchor = exports.Anchor = function(doc, row, column) {\n      this.$onChange = this.onChange.bind(this), this.attach(doc), column === void 0 ? this.setPosition(row.row, row.column) : this.setPosition(row, column)\n    };\n  (function() {\n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n      var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n      return point1.row < point2.row || point1.row == point2.row && bColIsAfter\n    }\n\n    function $getTransformedPoint(delta, point, moveIfEqual) {\n      var deltaIsInsert = "insert" == delta.action,\n        deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n        deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column),\n        deltaStart = delta.start,\n        deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n      return $pointsInOrder(point, deltaStart, moveIfEqual) ? {\n        row: point.row,\n        column: point.column\n      } : $pointsInOrder(deltaEnd, point, !moveIfEqual) ? {\n        row: point.row + deltaRowShift,\n        column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n      } : {\n        row: deltaStart.row,\n        column: deltaStart.column\n      }\n    }\n    oop.implement(this, EventEmitter), this.getPosition = function() {\n      return this.$clipPositionToDocument(this.row, this.column)\n    }, this.getDocument = function() {\n      return this.document\n    }, this.$insertRight = !1, this.onChange = function(delta) {\n      if (!(delta.start.row == delta.end.row && delta.start.row != this.row || delta.start.row > this.row)) {\n        var point = $getTransformedPoint(delta, {\n          row: this.row,\n          column: this.column\n        }, this.$insertRight);\n        this.setPosition(point.row, point.column, !0)\n      }\n    }, this.setPosition = function(row, column, noClip) {\n      var pos;\n      if (pos = noClip ? {\n          row: row,\n          column: column\n        } : this.$clipPositionToDocument(row, column), this.row != pos.row || this.column != pos.column) {\n        var old = {\n          row: this.row,\n          column: this.column\n        };\n        this.row = pos.row, this.column = pos.column, this._signal("change", {\n          old: old,\n          value: pos\n        })\n      }\n    }, this.detach = function() {\n      this.document.removeEventListener("change", this.$onChange)\n    }, this.attach = function(doc) {\n      this.document = doc || this.document, this.document.on("change", this.$onChange)\n    }, this.$clipPositionToDocument = function(row, column) {\n      var pos = {};\n      return row >= this.document.getLength() ? (pos.row = Math.max(0, this.document.getLength() - 1), pos.column = this.document.getLine(pos.row).length) : 0 > row ? (pos.row = 0, pos.column = 0) : (pos.row = row, pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column))), 0 > column && (pos.column = 0), pos\n    }\n  }).call(Anchor.prototype)\n}), ace.define("ace/document", ["require", "exports", "module", "ace/lib/oop", "ace/apply_delta", "ace/lib/event_emitter", "ace/range", "ace/anchor"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    applyDelta = acequire("./apply_delta").applyDelta,\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Range = acequire("./range").Range,\n    Anchor = acequire("./anchor").Anchor,\n    Document = function(textOrLines) {\n      this.$lines = [""], 0 === textOrLines.length ? this.$lines = [""] : Array.isArray(textOrLines) ? this.insertMergedLines({\n        row: 0,\n        column: 0\n      }, textOrLines) : this.insert({\n        row: 0,\n        column: 0\n      }, textOrLines)\n    };\n  (function() {\n    oop.implement(this, EventEmitter), this.setValue = function(text) {\n      var len = this.getLength() - 1;\n      this.remove(new Range(0, 0, len, this.getLine(len).length)), this.insert({\n        row: 0,\n        column: 0\n      }, text)\n    }, this.getValue = function() {\n      return this.getAllLines().join(this.getNewLineCharacter())\n    }, this.createAnchor = function(row, column) {\n      return new Anchor(this, row, column)\n    }, this.$split = 0 === "aaa".split(/a/).length ? function(text) {\n      return text.replace(/\\r\\n|\\r/g, "\\n").split("\\n")\n    } : function(text) {\n      return text.split(/\\r\\n|\\r|\\n/)\n    }, this.$detectNewLine = function(text) {\n      var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n      this.$autoNewLine = match ? match[1] : "\\n", this._signal("changeNewLineMode")\n    }, this.getNewLineCharacter = function() {\n      switch (this.$newLineMode) {\n        case "windows":\n          return "\\r\\n";\n        case "unix":\n          return "\\n";\n        default:\n          return this.$autoNewLine || "\\n"\n      }\n    }, this.$autoNewLine = "", this.$newLineMode = "auto", this.setNewLineMode = function(newLineMode) {\n      this.$newLineMode !== newLineMode && (this.$newLineMode = newLineMode, this._signal("changeNewLineMode"))\n    }, this.getNewLineMode = function() {\n      return this.$newLineMode\n    }, this.isNewLine = function(text) {\n      return "\\r\\n" == text || "\\r" == text || "\\n" == text\n    }, this.getLine = function(row) {\n      return this.$lines[row] || ""\n    }, this.getLines = function(firstRow, lastRow) {\n      return this.$lines.slice(firstRow, lastRow + 1)\n    }, this.getAllLines = function() {\n      return this.getLines(0, this.getLength())\n    }, this.getLength = function() {\n      return this.$lines.length\n    }, this.getTextRange = function(range) {\n      return this.getLinesForRange(range).join(this.getNewLineCharacter())\n    }, this.getLinesForRange = function(range) {\n      var lines;\n      if (range.start.row === range.end.row) lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n      else {\n        lines = this.getLines(range.start.row, range.end.row), lines[0] = (lines[0] || "").substring(range.start.column);\n        var l = lines.length - 1;\n        range.end.row - range.start.row == l && (lines[l] = lines[l].substring(0, range.end.column))\n      }\n      return lines\n    }, this.insertLines = function(row, lines) {\n      return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."), this.insertFullLines(row, lines)\n    }, this.removeLines = function(firstRow, lastRow) {\n      return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."), this.removeFullLines(firstRow, lastRow)\n    }, this.insertNewLine = function(position) {\n      return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."), this.insertMergedLines(position, ["", ""])\n    }, this.insert = function(position, text) {\n      return 1 >= this.getLength() && this.$detectNewLine(text), this.insertMergedLines(position, this.$split(text))\n    }, this.insertInLine = function(position, text) {\n      var start = this.clippedPos(position.row, position.column),\n        end = this.pos(position.row, position.column + text.length);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: [text]\n      }, !0), this.clonePos(end)\n    }, this.clippedPos = function(row, column) {\n      var length = this.getLength();\n      void 0 === row ? row = length : 0 > row ? row = 0 : row >= length && (row = length - 1, column = void 0);\n      var line = this.getLine(row);\n      return void 0 == column && (column = line.length), column = Math.min(Math.max(column, 0), line.length), {\n        row: row,\n        column: column\n      }\n    }, this.clonePos = function(pos) {\n      return {\n        row: pos.row,\n        column: pos.column\n      }\n    }, this.pos = function(row, column) {\n      return {\n        row: row,\n        column: column\n      }\n    }, this.$clipPosition = function(position) {\n      var length = this.getLength();\n      return position.row >= length ? (position.row = Math.max(0, length - 1), position.column = this.getLine(length - 1).length) : (position.row = Math.max(0, position.row), position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length)), position\n    }, this.insertFullLines = function(row, lines) {\n      row = Math.min(Math.max(row, 0), this.getLength());\n      var column = 0;\n      this.getLength() > row ? (lines = lines.concat([""]), column = 0) : (lines = [""].concat(lines), row--, column = this.$lines[row].length), this.insertMergedLines({\n        row: row,\n        column: column\n      }, lines)\n    }, this.insertMergedLines = function(position, lines) {\n      var start = this.clippedPos(position.row, position.column),\n        end = {\n          row: start.row + lines.length - 1,\n          column: (1 == lines.length ? start.column : 0) + lines[lines.length - 1].length\n        };\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: lines\n      }), this.clonePos(end)\n    }, this.remove = function(range) {\n      var start = this.clippedPos(range.start.row, range.start.column),\n        end = this.clippedPos(range.end.row, range.end.column);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }), this.clonePos(start)\n    }, this.removeInLine = function(row, startColumn, endColumn) {\n      var start = this.clippedPos(row, startColumn),\n        end = this.clippedPos(row, endColumn);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }, !0), this.clonePos(start)\n    }, this.removeFullLines = function(firstRow, lastRow) {\n      firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1), lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n      var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0,\n        deleteLastNewLine = this.getLength() - 1 > lastRow,\n        startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n        startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n        endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n        endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n        range = new Range(startRow, startCol, endRow, endCol),\n        deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n      return this.applyDelta({\n        start: range.start,\n        end: range.end,\n        action: "remove",\n        lines: this.getLinesForRange(range)\n      }), deletedLines\n    }, this.removeNewLine = function(row) {\n      this.getLength() - 1 > row && row >= 0 && this.applyDelta({\n        start: this.pos(row, this.getLine(row).length),\n        end: this.pos(row + 1, 0),\n        action: "remove",\n        lines: ["", ""]\n      })\n    }, this.replace = function(range, text) {\n      if (range instanceof Range || (range = Range.fromPoints(range.start, range.end)), 0 === text.length && range.isEmpty()) return range.start;\n      if (text == this.getTextRange(range)) return range.end;\n      this.remove(range);\n      var end;\n      return end = text ? this.insert(range.start, text) : range.start\n    }, this.applyDeltas = function(deltas) {\n      for (var i = 0; deltas.length > i; i++) this.applyDelta(deltas[i])\n    }, this.revertDeltas = function(deltas) {\n      for (var i = deltas.length - 1; i >= 0; i--) this.revertDelta(deltas[i])\n    }, this.applyDelta = function(delta, doNotValidate) {\n      var isInsert = "insert" == delta.action;\n      (isInsert ? 1 >= delta.lines.length && !delta.lines[0] : !Range.comparePoints(delta.start, delta.end)) || (isInsert && delta.lines.length > 2e4 && this.$splitAndapplyLargeDelta(delta, 2e4), applyDelta(this.$lines, delta, doNotValidate), this._signal("change", delta))\n    }, this.$splitAndapplyLargeDelta = function(delta, MAX) {\n      for (var lines = delta.lines, l = lines.length, row = delta.start.row, column = delta.start.column, from = 0, to = 0;;) {\n        from = to, to += MAX - 1;\n        var chunk = lines.slice(from, to);\n        if (to > l) {\n          delta.lines = chunk, delta.start.row = row + from, delta.start.column = column;\n          break\n        }\n        chunk.push(""), this.applyDelta({\n          start: this.pos(row + from, column),\n          end: this.pos(row + to, column = 0),\n          action: delta.action,\n          lines: chunk\n        }, !0)\n      }\n    }, this.revertDelta = function(delta) {\n      this.applyDelta({\n        start: this.clonePos(delta.start),\n        end: this.clonePos(delta.end),\n        action: "insert" == delta.action ? "remove" : "insert",\n        lines: delta.lines.slice()\n      })\n    }, this.indexToPosition = function(index, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, i = startRow || 0, l = lines.length; l > i; i++)\n        if (index -= lines[i].length + newlineLength, 0 > index) return {\n          row: i,\n          column: index + lines[i].length + newlineLength\n        };\n      return {\n        row: l - 1,\n        column: lines[l - 1].length\n      }\n    }, this.positionToIndex = function(pos, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, index = 0, row = Math.min(pos.row, lines.length), i = startRow || 0; row > i; ++i) index += lines[i].length + newlineLength;\n      return index + pos.column\n    }\n  }).call(Document.prototype), exports.Document = Document\n}), ace.define("ace/lib/lang", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.last = function(a) {\n    return a[a.length - 1]\n  }, exports.stringReverse = function(string) {\n    return string.split("").reverse().join("")\n  }, exports.stringRepeat = function(string, count) {\n    for (var result = ""; count > 0;) 1 & count && (result += string), (count >>= 1) && (string += string);\n    return result\n  };\n  var trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  exports.stringTrimLeft = function(string) {\n    return string.replace(trimBeginRegexp, "")\n  }, exports.stringTrimRight = function(string) {\n    return string.replace(trimEndRegexp, "")\n  }, exports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) copy[key] = obj[key];\n    return copy\n  }, exports.copyArray = function(array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++) copy[i] = array[i] && "object" == typeof array[i] ? this.copyObject(array[i]) : array[i];\n    return copy\n  }, exports.deepCopy = function deepCopy(obj) {\n    if ("object" != typeof obj || !obj) return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++) copy[key] = deepCopy(obj[key]);\n      return copy\n    }\n    if ("[object Object]" !== Object.prototype.toString.call(obj)) return obj;\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy\n  }, exports.arrayToMap = function(arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map\n  }, exports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) map[i] = props[i];\n    return map\n  }, exports.arrayRemove = function(array, value) {\n    for (var i = 0; array.length >= i; i++) value === array[i] && array.splice(i, 1)\n  }, exports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, "\\\\$1")\n  }, exports.escapeHTML = function(str) {\n    return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/\'/g, "&#39;").replace(/</g, "&#60;")\n  }, exports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n    return string.replace(regExp, function(str) {\n      matches.push({\n        offset: arguments[arguments.length - 2],\n        length: str.length\n      })\n    }), matches\n  }, exports.deferredCall = function(fcn) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      deferred = function(timeout) {\n        return deferred.cancel(), timer = setTimeout(callback, timeout || 0), deferred\n      };\n    return deferred.schedule = deferred, deferred.call = function() {\n      return this.cancel(), fcn(), deferred\n    }, deferred.cancel = function() {\n      return clearTimeout(timer), timer = null, deferred\n    }, deferred.isPending = function() {\n      return timer\n    }, deferred\n  }, exports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      _self = function(timeout) {\n        null == timer && (timer = setTimeout(callback, timeout || defaultTimeout))\n      };\n    return _self.delay = function(timeout) {\n      timer && clearTimeout(timer), timer = setTimeout(callback, timeout || defaultTimeout)\n    }, _self.schedule = _self, _self.call = function() {\n      this.cancel(), fcn()\n    }, _self.cancel = function() {\n      timer && clearTimeout(timer), timer = null\n    }, _self.isPending = function() {\n      return timer\n    }, _self\n  }\n}), ace.define("ace/worker/mirror", ["require", "exports", "module", "ace/range", "ace/document", "ace/lib/lang"], function(acequire, exports) {\n  "use strict";\n  acequire("../range").Range;\n  var Document = acequire("../document").Document,\n    lang = acequire("../lib/lang"),\n    Mirror = exports.Mirror = function(sender) {\n      this.sender = sender;\n      var doc = this.doc = new Document(""),\n        deferredUpdate = this.deferredUpdate = lang.delayedCall(this.onUpdate.bind(this)),\n        _self = this;\n      sender.on("change", function(e) {\n        var data = e.data;\n        if (data[0].start) doc.applyDeltas(data);\n        else\n          for (var i = 0; data.length > i; i += 2) {\n            if (Array.isArray(data[i + 1])) var d = {\n              action: "insert",\n              start: data[i],\n              lines: data[i + 1]\n            };\n            else var d = {\n              action: "remove",\n              start: data[i],\n              end: data[i + 1]\n            };\n            doc.applyDelta(d, !0)\n          }\n        return _self.$timeout ? deferredUpdate.schedule(_self.$timeout) : (_self.onUpdate(), void 0)\n      })\n    };\n  (function() {\n    this.$timeout = 500, this.setTimeout = function(timeout) {\n      this.$timeout = timeout\n    }, this.setValue = function(value) {\n      this.doc.setValue(value), this.deferredUpdate.schedule(this.$timeout)\n    }, this.getValue = function(callbackId) {\n      this.sender.callback(this.doc.getValue(), callbackId)\n    }, this.onUpdate = function() {}, this.isPending = function() {\n      return this.deferredUpdate.isPending()\n    }\n  }).call(Mirror.prototype)\n}), ace.define("ace/mode/json/json_parse", ["require", "exports", "module"], function() {\n  "use strict";\n  var at, ch, text, value, escapee = {\n      \'"\': \'"\',\n      "\\\\": "\\\\",\n      "/": "/",\n      b: "\\b",\n      f: "\\f",\n      n: "\\n",\n      r: "\\r",\n      t: "\t"\n    },\n    error = function(m) {\n      throw {\n        name: "SyntaxError",\n        message: m,\n        at: at,\n        text: text\n      }\n    },\n    reset = function (newAt) {\n      ch = text.charAt(newAt);\n      at = newAt + 1;\n    },\n    next = function(c) {\n      return c && c !== ch && error("Expected \'" + c + "\' instead of \'" + ch + "\'"), ch = text.charAt(at), at += 1, ch\n    },\n    nextUpTo = function (upTo, errorMessage) {\n      let currentAt = at,\n        i = text.indexOf(upTo, currentAt);\n      if (i < 0) {\n        error(errorMessage || \'Expected \\\'\' + upTo + \'\\\'\');\n      }\n      reset(i + upTo.length);\n      return text.substring(currentAt, i);\n    },\n    peek = function (c) {\n      return text.substr(at, c.length) === c; // nocommit - double check\n    },\n    number = function() {\n      var number, string = "";\n      for ("-" === ch && (string = "-", next("-")); ch >= "0" && "9" >= ch;) string += ch, next();\n      if ("." === ch)\n        for (string += "."; next() && ch >= "0" && "9" >= ch;) string += ch;\n      if ("e" === ch || "E" === ch)\n        for (string += ch, next(), ("-" === ch || "+" === ch) && (string += ch, next()); ch >= "0" && "9" >= ch;) string += ch, next();\n      return number = +string, isNaN(number) ? (error("Bad number"), void 0) : number\n    },\n    string = function() {\n      var hex, i, uffff, string = "";\n      if (\'"\' === ch) {\n        if (peek(\'""\')) {\n          // literal\n          next(\'"\');\n          next(\'"\');\n          return nextUpTo(\'"""\', \'failed to find closing \\\'"""\\\'\');\n        } else {\n          for (; next();) {\n            if (\'"\' === ch) return next(), string;\n            if ("\\\\" === ch)\n              if (next(), "u" === ch) {\n                for (uffff = 0, i = 0; 4 > i && (hex = parseInt(next(), 16), isFinite(hex)); i += 1) uffff = 16 * uffff + hex;\n                string += String.fromCharCode(uffff)\n              } else {\n                if ("string" != typeof escapee[ch]) break;\n                string += escapee[ch]\n              }\n            else string += ch\n          }\n        }\n      }\n      error("Bad string")\n    },\n    white = function() {\n      for (; ch && " " >= ch;) next()\n    },\n    word = function() {\n      switch (ch) {\n        case "t":\n          return next("t"), next("r"), next("u"), next("e"), !0;\n        case "f":\n          return next("f"), next("a"), next("l"), next("s"), next("e"), !1;\n        case "n":\n          return next("n"), next("u"), next("l"), next("l"), null\n      }\n      error("Unexpected \'" + ch + "\'")\n    },\n    array = function() {\n      var array = [];\n      if ("[" === ch) {\n        if (next("["), white(), "]" === ch) return next("]"), array;\n        for (; ch;) {\n          if (array.push(value()), white(), "]" === ch) return next("]"), array;\n          next(","), white()\n        }\n      }\n      error("Bad array")\n    },\n    object = function() {\n      var key, object = {};\n      if ("{" === ch) {\n        if (next("{"), white(), "}" === ch) return next("}"), object;\n        for (; ch;) {\n          if (key = string(), white(), next(":"), Object.hasOwnProperty.call(object, key) && error(\'Duplicate key "\' + key + \'"\'), object[key] = value(), white(), "}" === ch) return next("}"), object;\n          next(","), white()\n        }\n      }\n      error("Bad object")\n    };\n  return value = function() {\n      switch (white(), ch) {\n        case "{":\n          return object();\n        case "[":\n          return array();\n        case \'"\':\n          return string();\n        case "-":\n          return number();\n        default:\n          return ch >= "0" && "9" >= ch ? number() : word()\n      }\n    },\n    function(source, reviver) {\n      var result;\n      return text = source, at = 0, ch = " ", result = value(), white(), ch && error("Syntax error"), "function" == typeof reviver ? function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && "object" == typeof value)\n          for (k in value) Object.hasOwnProperty.call(value, k) && (v = walk(value, k), void 0 !== v ? value[k] = v : delete value[k]);\n        return reviver.call(holder, key, value)\n      }({\n        "": result\n      }, "") : result\n    }\n}), ace.define("ace/mode/json_worker", ["require", "exports", "module", "ace/lib/oop", "ace/worker/mirror", "ace/mode/json/json_parse"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("../lib/oop"),\n    Mirror = acequire("../worker/mirror").Mirror,\n    parse = acequire("./json/json_parse"),\n    JsonWorker = exports.JsonWorker = function(sender) {\n      Mirror.call(this, sender), this.setTimeout(200)\n    };\n  oop.inherits(JsonWorker, Mirror),\n    function() {\n      this.onUpdate = function() {\n        var value = this.doc.getValue(),\n          errors = [];\n        try {\n          value && parse(value)\n        } catch (e) {\n          var pos = this.doc.indexToPosition(e.at - 1);\n          errors.push({\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: "error"\n          })\n        }\n        this.sender.emit("annotate", errors)\n      }\n    }.call(JsonWorker.prototype)\n}), ace.define("ace/lib/es5-shim", ["require", "exports", "module"], function() {\n  function Empty() {}\n\n  function doesDefinePropertyWork(object) {\n    try {\n      return Object.defineProperty(object, "sentinel", {}), "sentinel" in object\n    } catch (exception) {}\n  }\n\n  function toInteger(n) {\n    return n = +n, n !== n ? n = 0 : 0 !== n && n !== 1 / 0 && n !== -(1 / 0) && (n = (n > 0 || -1) * Math.floor(Math.abs(n))), n\n  }\n  Function.prototype.bind || (Function.prototype.bind = function(that) {\n    var target = this;\n    if ("function" != typeof target) throw new TypeError("Function.prototype.bind called on incompatible " + target);\n    var args = slice.call(arguments, 1),\n      bound = function() {\n        if (this instanceof bound) {\n          var result = target.apply(this, args.concat(slice.call(arguments)));\n          return Object(result) === result ? result : this\n        }\n        return target.apply(that, args.concat(slice.call(arguments)))\n      };\n    return target.prototype && (Empty.prototype = target.prototype, bound.prototype = new Empty, Empty.prototype = null), bound\n  });\n  var defineGetter, defineSetter, lookupGetter, lookupSetter, supportsAccessors, call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__")) && (defineGetter = call.bind(prototypeOfObject.__defineGetter__), defineSetter = call.bind(prototypeOfObject.__defineSetter__), lookupGetter = call.bind(prototypeOfObject.__lookupGetter__), lookupSetter = call.bind(prototypeOfObject.__lookupSetter__)), 2 != [1, 2].splice(0).length)\n    if (function() {\n        function makeArray(l) {\n          var a = Array(l + 2);\n          return a[0] = a[1] = 0, a\n        }\n        var lengthBefore, array = [];\n        return array.splice.apply(array, makeArray(20)), array.splice.apply(array, makeArray(26)), lengthBefore = array.length, array.splice(5, 0, "XXX"), lengthBefore + 1 == array.length, lengthBefore + 1 == array.length ? !0 : void 0\n      }()) {\n      var array_splice = Array.prototype.splice;\n      Array.prototype.splice = function(start, deleteCount) {\n        return arguments.length ? array_splice.apply(this, [void 0 === start ? 0 : start, void 0 === deleteCount ? this.length - start : deleteCount].concat(slice.call(arguments, 2))) : []\n      }\n    } else Array.prototype.splice = function(pos, removeCount) {\n      var length = this.length;\n      pos > 0 ? pos > length && (pos = length) : void 0 == pos ? pos = 0 : 0 > pos && (pos = Math.max(length + pos, 0)), length > pos + removeCount || (removeCount = length - pos);\n      var removed = this.slice(pos, pos + removeCount),\n        insert = slice.call(arguments, 2),\n        add = insert.length;\n      if (pos === length) add && this.push.apply(this, insert);\n      else {\n        var remove = Math.min(removeCount, length - pos),\n          tailOldPos = pos + remove,\n          tailNewPos = tailOldPos + add - remove,\n          tailCount = length - tailOldPos,\n          lengthAfterRemove = length - remove;\n        if (tailOldPos > tailNewPos)\n          for (var i = 0; tailCount > i; ++i) this[tailNewPos + i] = this[tailOldPos + i];\n        else if (tailNewPos > tailOldPos)\n          for (i = tailCount; i--;) this[tailNewPos + i] = this[tailOldPos + i];\n        if (add && pos === lengthAfterRemove) this.length = lengthAfterRemove, this.push.apply(this, insert);\n        else\n          for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i) this[pos + i] = insert[i]\n      }\n      return removed\n    };\n  Array.isArray || (Array.isArray = function(obj) {\n    return "[object Array]" == _toString(obj)\n  });\n  var boxedString = Object("a"),\n    splitString = "a" != boxedString[0] || !(0 in boxedString);\n  if (Array.prototype.forEach || (Array.prototype.forEach = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        thisp = arguments[1],\n        i = -1,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError;\n      for (; length > ++i;) i in self && fun.call(thisp, self[i], i, object)\n    }), Array.prototype.map || (Array.prototype.map = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = Array(length),\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (result[i] = fun.call(thisp, self[i], i, object));\n      return result\n    }), Array.prototype.filter || (Array.prototype.filter = function(fun) {\n      var value, object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = [],\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (value = self[i], fun.call(thisp, value, i, object) && result.push(value));\n      return result\n    }), Array.prototype.every || (Array.prototype.every = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && !fun.call(thisp, self[i], i, object)) return !1;\n      return !0\n    }), Array.prototype.some || (Array.prototype.some = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && fun.call(thisp, self[i], i, object)) return !0;\n      return !1\n    }), Array.prototype.reduce || (Array.prototype.reduce = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduce of empty array with no initial value");\n      var result, i = 0;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i++];\n            break\n          }\n          if (++i >= length) throw new TypeError("reduce of empty array with no initial value")\n        }\n      for (; length > i; i++) i in self && (result = fun.call(void 0, result, self[i], i, object));\n      return result\n    }), Array.prototype.reduceRight || (Array.prototype.reduceRight = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduceRight of empty array with no initial value");\n      var result, i = length - 1;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i--];\n            break\n          }\n          if (0 > --i) throw new TypeError("reduceRight of empty array with no initial value")\n        }\n      do i in this && (result = fun.call(void 0, result, self[i], i, object)); while (i--);\n      return result\n    }), Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2) || (Array.prototype.indexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = 0;\n      for (arguments.length > 1 && (i = toInteger(arguments[1])), i = i >= 0 ? i : Math.max(0, length + i); length > i; i++)\n        if (i in self && self[i] === sought) return i;\n      return -1\n    }), Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3) || (Array.prototype.lastIndexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = length - 1;\n      for (arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))), i = i >= 0 ? i : length - Math.abs(i); i >= 0; i--)\n        if (i in self && sought === self[i]) return i;\n      return -1\n    }), Object.getPrototypeOf || (Object.getPrototypeOf = function(object) {\n      return object.__proto__ || (object.constructor ? object.constructor.prototype : prototypeOfObject)\n    }), !Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a non-object: ";\n    Object.getOwnPropertyDescriptor = function(object, property) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT + object);\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (descriptor = {\n            enumerable: !0,\n            configurable: !0\n          }, supportsAccessors) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (object.__proto__ = prototype, getter || setter) return getter && (descriptor.get = getter), setter && (descriptor.set = setter), descriptor\n        }\n        return descriptor.value = object[property], descriptor\n      }\n    }\n  }\n  if (Object.getOwnPropertyNames || (Object.getOwnPropertyNames = function(object) {\n      return Object.keys(object)\n    }), !Object.create) {\n    var createEmpty;\n    createEmpty = null === Object.prototype.__proto__ ? function() {\n      return {\n        __proto__: null\n      }\n    } : function() {\n      var empty = {};\n      for (var i in empty) empty[i] = null;\n      return empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null, empty\n    }, Object.create = function(prototype, properties) {\n      var object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ("object" != typeof prototype) throw new TypeError("typeof prototype[" + typeof prototype + "] != \'object\'");\n        var Type = function() {};\n        Type.prototype = prototype, object = new Type, object.__proto__ = prototype\n      }\n      return void 0 !== properties && Object.defineProperties(object, properties), object\n    }\n  }\n  if (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom = "undefined" == typeof document || doesDefinePropertyWork(document.createElement("div"));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) var definePropertyFallback = Object.defineProperty\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ",\n      ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: ",\n      ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined on this javascript engine";\n    Object.defineProperty = function(object, property, descriptor) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n      if ("object" != typeof descriptor && "function" != typeof descriptor || null === descriptor) throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n      if (definePropertyFallback) try {\n        return definePropertyFallback.call(Object, object, property, descriptor)\n      } catch (exception) {}\n      if (owns(descriptor, "value"))\n        if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject, delete object[property], object[property] = descriptor.value, object.__proto__ = prototype\n        } else object[property] = descriptor.value;\n      else {\n        if (!supportsAccessors) throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n        owns(descriptor, "get") && defineGetter(object, property, descriptor.get), owns(descriptor, "set") && defineSetter(object, property, descriptor.set)\n      }\n      return object\n    }\n  }\n  Object.defineProperties || (Object.defineProperties = function(object, properties) {\n    for (var property in properties) owns(properties, property) && Object.defineProperty(object, property, properties[property]);\n    return object\n  }), Object.seal || (Object.seal = function(object) {\n    return object\n  }), Object.freeze || (Object.freeze = function(object) {\n    return object\n  });\n  try {\n    Object.freeze(function() {})\n  } catch (exception) {\n    Object.freeze = function(freezeObject) {\n      return function(object) {\n        return "function" == typeof object ? object : freezeObject(object)\n      }\n    }(Object.freeze)\n  }\n  if (Object.preventExtensions || (Object.preventExtensions = function(object) {\n      return object\n    }), Object.isSealed || (Object.isSealed = function() {\n      return !1\n    }), Object.isFrozen || (Object.isFrozen = function() {\n      return !1\n    }), Object.isExtensible || (Object.isExtensible = function(object) {\n      if (Object(object) === object) throw new TypeError;\n      for (var name = ""; owns(object, name);) name += "?";\n      object[name] = !0;\n      var returnValue = owns(object, name);\n      return delete object[name], returnValue\n    }), !Object.keys) {\n    var hasDontEnumBug = !0,\n      dontEnums = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],\n      dontEnumsLength = dontEnums.length;\n    for (var key in {\n        toString: null\n      }) hasDontEnumBug = !1;\n    Object.keys = function(object) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError("Object.keys called on a non-object");\n      var keys = [];\n      for (var name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n          var dontEnum = dontEnums[i];\n          owns(object, dontEnum) && keys.push(dontEnum)\n        }\n      return keys\n    }\n  }\n  Date.now || (Date.now = function() {\n    return (new Date).getTime()\n  });\n  var ws = "\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";\n  if (!String.prototype.trim || ws.trim()) {\n    ws = "[" + ws + "]";\n    var trimBeginRegexp = RegExp("^" + ws + ws + "*"),\n      trimEndRegexp = RegExp(ws + ws + "*$");\n    String.prototype.trim = function() {\n      return (this + "").replace(trimBeginRegexp, "").replace(trimEndRegexp, "")\n    }\n  }\n  var toObject = function(o) {\n    if (null == o) throw new TypeError("can\'t convert " + o + " to object");\n    return Object(o)\n  }\n});\n'},function(e,t,n){"use strict";n.r(t),n.d(t,"renderApp",(function(){return Kt}));var s=n(21),r=n.n(s),a=n(30),i=n(31),o=n(23),c=n(25),l=n(0);class Settings{constructor(e){this.actionTypes=e.actionTypes}static fromUpstreamJson(e){const t=e.action_types;return new Settings({actionTypes:t})}}var u=n(6),d=n.n(u),h=n(27),p=n(24),m=n.n(p),g=n(2),f=n(40),w=n.n(f);class base_action_BaseAction{constructor(e={}){this.id=Object(p.get)(e,"id"),this.type=Object(p.get)(e,"type"),this.isNew=Object(p.get)(e,"isNew",!1)}get upstreamJson(){return{id:this.id,type:this.type}}get typeName(){return this.constructor.typeName}get iconClass(){return this.constructor.iconClass}get selectMessage(){return this.constructor.selectMessage}get simulateMessage(){return l.i18n.translate("xpack.watcher.models.baseAction.simulateMessage",{defaultMessage:"Action {id} simulated successfully",values:{id:this.id}})}get simulatePrompt(){return this.constructor.simulatePrompt}}let b;d()(base_action_BaseAction,"typeName",l.i18n.translate("xpack.watcher.models.baseAction.typeName",{defaultMessage:"Action"})),d()(base_action_BaseAction,"iconClass","apps"),d()(base_action_BaseAction,"selectMessage",l.i18n.translate("xpack.watcher.models.baseAction.selectMessageText",{defaultMessage:"Perform an action."})),d()(base_action_BaseAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.baseAction.simulateButtonLabel",{defaultMessage:"Simulate this action now"}));class email_action_EmailAction extends base_action_BaseAction{constructor(e={}){super(e);const t=Object(p.get)(e,"to",b);this.to=Object(p.isArray)(t)?t:t&&[t];const n=l.i18n.translate("xpack.watcher.models.emailAction.defaultSubjectText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});this.subject=Object(p.get)(e,"subject",e.ignoreDefaults?null:n),this.body=Object(p.get)(e,"body")}validate(){const e={to:[]};return this.to&&this.to.length||e.to.push(l.i18n.translate("xpack.watcher.watchActions.email.emailRecipientIsRequiredValidationMessage",{defaultMessage:'"To" email address is required.'})),e}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{to:this.to,subject:this.subject,body:this.body,email:{to:this.to&&this.to.length>0?this.to:void 0,subject:this.subject,body:{text:this.body}}}),e}get simulateMessage(){const e=this.to.join(", ");return l.i18n.translate("xpack.watcher.models.emailAction.simulateMessage",{defaultMessage:"Sample email sent to {toList}",values:{toList:e}})}get simulateFailMessage(){const e=this.to.join(", ");return l.i18n.translate("xpack.watcher.models.emailAction.simulateFailMessage",{defaultMessage:"Failed to send email to {toList}.",values:{toList:e}})}static fromUpstreamJson(e){return new email_action_EmailAction(e)}}d()(email_action_EmailAction,"typeName",l.i18n.translate("xpack.watcher.models.emailAction.typeName",{defaultMessage:"Email"})),d()(email_action_EmailAction,"iconClass","email"),d()(email_action_EmailAction,"selectMessage",l.i18n.translate("xpack.watcher.models.emailAction.selectMessageText",{defaultMessage:"Send an email from your server."})),d()(email_action_EmailAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.emailAction.simulateButtonLabel",{defaultMessage:"Send test email"}));class logging_action_LoggingAction extends base_action_BaseAction{constructor(e={}){super(e);const t=l.i18n.translate("xpack.watcher.models.loggingAction.defaultText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});this.text=Object(p.get)(e,"text",e.ignoreDefaults?null:t)}validate(){const e={text:[]};return this.text||e.text.push(l.i18n.translate("xpack.watcher.watchActions.logging.logTextIsRequiredValidationMessage",{defaultMessage:"Log text is required."})),e}get upstreamJson(){const e=super.upstreamJson;let t;return"string"==typeof this.text?this.text.trim()&&(t=this.text):t=this.text,Object.assign(e,{text:t,logging:{text:t}}),e}get simulateMessage(){return l.i18n.translate("xpack.watcher.models.loggingAction.simulateMessage",{defaultMessage:"Sample message logged"})}get simulateFailMessage(){return l.i18n.translate("xpack.watcher.models.loggingAction.simulateFailMessage",{defaultMessage:"Failed to log sample message."})}static fromUpstreamJson(e){return new logging_action_LoggingAction(e)}}d()(logging_action_LoggingAction,"typeName",l.i18n.translate("xpack.watcher.models.loggingAction.typeName",{defaultMessage:"Logging"})),d()(logging_action_LoggingAction,"iconClass","logsApp"),d()(logging_action_LoggingAction,"selectMessage",l.i18n.translate("xpack.watcher.models.loggingAction.selectMessageText",{defaultMessage:"Add an item to the logs."})),d()(logging_action_LoggingAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.loggingAction.simulateButtonLabel",{defaultMessage:"Log a sample message"}));class slack_action_SlackAction extends base_action_BaseAction{constructor(e={}){super(e);const t=Object(p.get)(e,"to");this.to=Object(p.isArray)(t)?t:t&&[t];const n=l.i18n.translate("xpack.watcher.models.slackAction.defaultText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});this.text=Object(p.get)(e,"text",e.ignoreDefaults?null:n)}validate(){return{to:[],text:[]}}get upstreamJson(){const e=super.upstreamJson,t=this.to&&this.to.length>0?this.to:void 0,n=this.text||t?{text:this.text,to:t}:{};return Object.assign(e,{to:t,text:this.text,slack:{message:n}}),e}get simulateMessage(){const e=this.to&&this.to.join(", ");return l.i18n.translate("xpack.watcher.models.slackAction.simulateMessage",{defaultMessage:"Sample Slack message sent {toList}.",values:{toList:e?`to ${e}`:""}})}get simulateFailMessage(){const e=this.to&&this.to.join(", ");return l.i18n.translate("xpack.watcher.models.slackAction.simulateFailMessage",{defaultMessage:"Failed to send sample Slack message {toList}.",values:{toList:e?`to ${e}`:""}})}static fromUpstreamJson(e){return new slack_action_SlackAction(e)}}d()(slack_action_SlackAction,"typeName",l.i18n.translate("xpack.watcher.models.slackAction.TypeName",{defaultMessage:"Slack"})),d()(slack_action_SlackAction,"iconClass","logoSlack"),d()(slack_action_SlackAction,"selectMessage",l.i18n.translate("xpack.watcher.models.slackAction.selectMessageText",{defaultMessage:"Send a message to a Slack user or channel."})),d()(slack_action_SlackAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.slackAction.simulateButtonLabel",{defaultMessage:"Send a sample message"}));class webhook_action_WebhookAction extends base_action_BaseAction{constructor(e={}){super(e);const t=JSON.stringify({message:"Watch [{{ctx.metadata.name}}] has exceeded the threshold"},null,2);this.body=Object(p.get)(e,"body",e.ignoreDefaults?null:t),this.method=Object(p.get)(e,"method"),this.host=Object(p.get)(e,"host"),this.port=Object(p.get)(e,"port"),this.scheme=Object(p.get)(e,"scheme","http"),this.path=Object(p.get)(e,"path"),this.username=Object(p.get)(e,"username"),this.password=Object(p.get)(e,"password"),this.contentType=Object(p.get)(e,"contentType"),this.fullPath=`${this.host}:${this.port}${this.path?"/"+this.path:""}`}validate(){const e={host:[],port:[],body:[],username:[],password:[]};if(this.host||e.host.push(l.i18n.translate("xpack.watcher.watchActions.webhook.hostIsRequiredValidationMessage",{defaultMessage:"Webhook host is required."})),this.port||e.port.push(l.i18n.translate("xpack.watcher.watchActions.webhook.portIsRequiredValidationMessage",{defaultMessage:"Webhook port is required."})),"application/json"===this.contentType&&"string"==typeof this.body&&""!==this.body){const t=l.i18n.translate("xpack.watcher.watchActions.webhook.invalidJsonValidationMessage",{defaultMessage:"Invalid JSON"});try{const n=JSON.parse(this.body);n&&"object"!=typeof n&&e.body.push(t)}catch(n){e.body.push(t)}}return this.username&&!this.password&&e.password.push(l.i18n.translate("xpack.watcher.watchActions.webhook.passwordIsRequiredIfUsernameValidationMessage",{defaultMessage:"Password is required."})),this.password&&!this.username&&e.username.push(l.i18n.translate("xpack.watcher.watchActions.webhook.usernameIsRequiredIfPasswordValidationMessage",{defaultMessage:"Username is required."})),e}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{method:this.method,host:this.host,port:this.port,scheme:this.scheme,path:this.path,body:this.body,username:this.username,password:this.password,webhook:{host:this.host,port:this.port}}),e}get simulateMessage(){return l.i18n.translate("xpack.watcher.models.webhookAction.simulateMessage",{defaultMessage:"Sample request sent to {fullPath}",values:{fullPath:this.fullPath}})}get simulateFailMessage(){return l.i18n.translate("xpack.watcher.models.webhookAction.simulateFailMessage",{defaultMessage:"Failed to send request to {fullPath}.",values:{fullPath:this.fullPath}})}static fromUpstreamJson(e){return new webhook_action_WebhookAction(e)}}d()(webhook_action_WebhookAction,"typeName",l.i18n.translate("xpack.watcher.models.webhookAction.typeName",{defaultMessage:"Webhook"})),d()(webhook_action_WebhookAction,"iconClass","logoWebhook"),d()(webhook_action_WebhookAction,"selectMessage",l.i18n.translate("xpack.watcher.models.webhookAction.selectMessageText",{defaultMessage:"Send a request to a web service."})),d()(webhook_action_WebhookAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.webhookAction.simulateButtonLabel",{defaultMessage:"Send request"}));class index_action_IndexAction extends base_action_BaseAction{constructor(e={}){super(e),this.index=Object(p.get)(e,"index")}validate(){return{index:[]}}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{index:{index:this.index}}),e}get simulateMessage(){const e=this.index||"";return l.i18n.translate("xpack.watcher.models.indexAction.simulateMessage",{defaultMessage:"Index {index} has been indexed.",values:{index:e}})}get simulateFailMessage(){const e=this.index||"";return l.i18n.translate("xpack.watcher.models.indexAction.simulateFailMessage",{defaultMessage:"Failed to index {index}.",values:{index:e}})}static fromUpstreamJson(e){return new index_action_IndexAction(e)}}d()(index_action_IndexAction,"typeName",l.i18n.translate("xpack.watcher.models.indexAction.typeName",{defaultMessage:"Index"})),d()(index_action_IndexAction,"iconClass","indexOpen"),d()(index_action_IndexAction,"selectMessage",l.i18n.translate("xpack.watcher.models.indexAction.selectMessageText",{defaultMessage:"Index data into Elasticsearch."})),d()(index_action_IndexAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.indexAction.simulateButtonLabel",{defaultMessage:"Index data"}));class pagerduty_action_PagerDutyAction extends base_action_BaseAction{constructor(e={}){super(e);const t=l.i18n.translate("xpack.watcher.models.pagerdutyAction.defaultDescriptionText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});this.description=Object(p.get)(e,"description",e.ignoreDefaults?null:t)}validate(){const e={description:[]};return this.description||e.description.push(l.i18n.translate("xpack.watcher.watchActions.pagerduty.descriptionIsRequiredValidationMessage",{defaultMessage:"PagerDuty description is required."})),e}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{description:this.description,pagerduty:{description:this.description}}),e}get simulateMessage(){return l.i18n.translate("xpack.watcher.models.pagerDutyAction.simulateMessage",{defaultMessage:"PagerDuty event has been sent."})}get simulateFailMessage(){return l.i18n.translate("xpack.watcher.models.pagerDutyAction.simulateFailMessage",{defaultMessage:"Failed to send PagerDuty event."})}static fromUpstreamJson(e){return new pagerduty_action_PagerDutyAction(e)}}d()(pagerduty_action_PagerDutyAction,"typeName",l.i18n.translate("xpack.watcher.models.pagerDutyAction.typeName",{defaultMessage:"PagerDuty"})),d()(pagerduty_action_PagerDutyAction,"iconClass","apps"),d()(pagerduty_action_PagerDutyAction,"selectMessage",l.i18n.translate("xpack.watcher.models.pagerDutyAction.selectMessageText",{defaultMessage:"Create an event in PagerDuty."})),d()(pagerduty_action_PagerDutyAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.pagerDutyAction.simulateButtonLabel",{defaultMessage:"Send a PagerDuty event"}));class jira_action_JiraAction extends base_action_BaseAction{constructor(e={}){super(e);const t=l.i18n.translate("xpack.watcher.models.jiraAction.defaultSummaryText",{defaultMessage:"Watch [{context}] has exceeded the threshold",values:{context:"{{ctx.metadata.name}}"}});this.summary=Object(p.get)(e,"summary",e.ignoreDefaults?null:t),this.projectKey=Object(p.get)(e,"projectKey"),this.issueType=Object(p.get)(e,"issueType")}validate(){const e={projectKey:[],issueType:[],summary:[]};return this.projectKey||e.projectKey.push(l.i18n.translate("xpack.watcher.watchActions.jira.projectKeyIsRequiredValidationMessage",{defaultMessage:"Jira project key is required."})),this.issueType||e.issueType.push(l.i18n.translate("xpack.watcher.watchActions.jira.issueTypeNameIsRequiredValidationMessage",{defaultMessage:"Jira issue type is required."})),this.summary||e.summary.push(l.i18n.translate("xpack.watcher.watchActions.jira.summaryIsRequiredValidationMessage",{defaultMessage:"Jira summary is required."})),e}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{projectKey:this.projectKey,issueType:this.issueType,summary:this.summary,jira:{fields:{project:{key:this.projectKey},issuetype:{name:this.issueType},summary:this.summary}}}),e}get simulateMessage(){return l.i18n.translate("xpack.watcher.models.jiraAction.simulateMessage",{defaultMessage:"Jira issue has been created."})}get simulateFailMessage(){return l.i18n.translate("xpack.watcher.models.jiraAction.simulateFailMessage",{defaultMessage:"Failed to create Jira issue."})}static fromUpstreamJson(e){return new jira_action_JiraAction(e)}}d()(jira_action_JiraAction,"typeName",l.i18n.translate("xpack.watcher.models.jiraAction.typeName",{defaultMessage:"Jira"})),d()(jira_action_JiraAction,"iconClass","apps"),d()(jira_action_JiraAction,"selectMessage",l.i18n.translate("xpack.watcher.models.jiraAction.selectMessageText",{defaultMessage:"Create an issue in Atlassian’s Jira Software."})),d()(jira_action_JiraAction,"simulatePrompt",l.i18n.translate("xpack.watcher.models.jiraAction.simulateButtonLabel",{defaultMessage:"Create a sample Jira issue"}));class unknown_action_UnknownAction extends base_action_BaseAction{constructor(e={}){super(e),this.actionJson=Object(p.get)(e,"actionJson")}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{actionJson:this.actionJson}),e}static fromUpstreamJson(e){return new unknown_action_UnknownAction(e)}}const j={};Object(h.set)(j,g.c.EMAIL,email_action_EmailAction),Object(h.set)(j,g.c.LOGGING,logging_action_LoggingAction),Object(h.set)(j,g.c.SLACK,slack_action_SlackAction),Object(h.set)(j,g.c.WEBHOOK,webhook_action_WebhookAction),Object(h.set)(j,g.c.INDEX,index_action_IndexAction),Object(h.set)(j,g.c.PAGERDUTY,pagerduty_action_PagerDutyAction),Object(h.set)(j,g.c.JIRA,jira_action_JiraAction);class action_Action{static fromUpstreamJson(e){const t=Object(p.get)(e,"type");return(j[t]||unknown_action_UnknownAction).fromUpstreamJson(e)}}d()(action_Action,"getActionTypes",(()=>j));var x=n(28),y=n.n(x);function v(e){return e?y()(e):null}class action_status_ActionStatus{constructor(e={}){this.id=Object(p.get)(e,"id"),this.state=Object(p.get)(e,"state"),this.isAckable=Object(p.get)(e,"isAckable"),this.lastAcknowledged=v(Object(p.get)(e,"lastAcknowledged")),this.lastThrottled=v(Object(p.get)(e,"lastThrottled")),this.lastExecution=v(Object(p.get)(e,"lastExecution")),this.lastExecutionSuccessful=Object(p.get)(e,"lastExecutionSuccessful"),this.lastExecutionReason=Object(p.get)(e,"lastExecutionReason"),this.lastSuccessfulExecution=v(Object(p.get)(e,"lastSuccessfulExecution")),this.lastAcknowledged&&(this.lastAcknowledgedHumanized=this.lastAcknowledged.fromNow()),this.lastExecution&&(this.lastExecutionHumanized=this.lastExecution.fromNow()),this.lastThrottled&&(this.lastThrottledHumanized=this.lastThrottled.fromNow())}static fromUpstreamJson(e){return new action_status_ActionStatus(e)}}class watch_status_WatchStatus{constructor(e={}){this.id=Object(p.get)(e,"id"),this.state=Object(p.get)(e,"state"),this.comment=Object(p.get)(e,"comment"),this.isActive=Object(p.get)(e,"isActive"),this.lastFired=v(Object(p.get)(e,"lastFired")),this.lastChecked=v(Object(p.get)(e,"lastChecked")),this.lastMetCondition=v(Object(p.get)(e,"lastMetCondition")),this.lastFired&&(this.lastFiredHumanized=this.lastFired.fromNow()),this.lastChecked&&(this.lastCheckedHumanized=this.lastChecked.fromNow());const t=Object(p.get)(e,"actionStatuses",[]);this.actionStatuses=t.map((e=>action_status_ActionStatus.fromUpstreamJson(e)))}static fromUpstreamJson(e){return new watch_status_WatchStatus(e)}}class watch_errors_WatchErrors{constructor(e={}){this.actionErrors=Object(p.get)(e,"actions")}static fromUpstreamJson(e){return new watch_errors_WatchErrors(e)}}function O(e,t){const n=e.map((e=>e.id));let s,r=1;for(;void 0===s;){const e=`${t}_${r}`;n.includes(e)?r++:s=e}return s}class base_watch_BaseWatch{constructor(e={}){var t;d()(this,"updateWatchStatus",(e=>{this.watchStatus=e})),d()(this,"createAction",((e,t)=>{const n=action_Action.getActionTypes()[e];if(!Boolean(n))throw new Error(l.i18n.translate("xpack.watcher.models.baseWatch.createUnknownActionTypeErrorMessage",{defaultMessage:"Attempted to create unknown action type {type}.",values:{type:e}}));const s=new n({id:O(this.actions,e),type:e,...t});this.addAction(s)})),d()(this,"addAction",(e=>{(function(e,t){const n=Object(p.find)(e,{id:t.id});return Boolean(n)})(this.actions,e)&&(e.id=O(this.actions,e.type)),this.actions.push(e)})),d()(this,"deleteAction",(e=>{Object(p.remove)(this.actions,e)})),d()(this,"resetActions",(()=>{this.actions=[]})),d()(this,"isEqualTo",(e=>{const t={...this},n={...e};return Object(p.isEqual)(t,n)})),this.id=Object(p.get)(e,"id"),this.type=Object(p.get)(e,"type"),this.isNew=Object(p.get)(e,"isNew",!0),this.name=Object(p.get)(e,"name"),this.isSystemWatch=Boolean(Object(p.get)(e,"isSystemWatch")),this.watchStatus=watch_status_WatchStatus.fromUpstreamJson(Object(p.get)(e,"watchStatus")),this.watchErrors=watch_errors_WatchErrors.fromUpstreamJson(Object(p.get)(e,"watchErrors")),this.isActive=null===(t=this.watchStatus.isActive)||void 0===t||t;const n=Object(p.get)(e,"actions",[]);this.actions=n.map(action_Action.fromUpstreamJson)}get displayName(){return this.name?this.name:this.id}get searchValue(){return e=this,t=["id","name"],Object(p.values)(Object(p.pick)(e,t)).join("\n");var e,t}get typeName(){return this.constructor.typeName}get iconClass(){return this.constructor.iconClass}get selectMessage(){return this.constructor.selectMessage}get selectSortOrder(){return this.constructor.selectSortOrder}get upstreamJson(){return{id:this.id,name:this.name,type:this.type,isNew:this.isNew,isActive:this.isActive,actions:Object(p.map)(this.actions,(e=>e.upstreamJson))}}}d()(base_watch_BaseWatch,"typeName",l.i18n.translate("xpack.watcher.models.baseWatch.typeName",{defaultMessage:"Watch"})),d()(base_watch_BaseWatch,"iconClass",""),d()(base_watch_BaseWatch,"selectMessage",l.i18n.translate("xpack.watcher.models.baseWatch.selectMessageText",{defaultMessage:"Set up a new watch."})),d()(base_watch_BaseWatch,"isCreatable",!0),d()(base_watch_BaseWatch,"selectSortOrder",0);const E={trigger:{schedule:{interval:"30m"}},input:{search:{request:{body:{size:0,query:{match_all:{}}},indices:["*"]}}},condition:{compare:{"ctx.payload.hits.total":{gte:10}}},actions:{"my-logging-action":{logging:{text:"There are {{ctx.payload.hits.total}} documents in your index. Threshold is 10."}}}};class json_watch_JsonWatch extends base_watch_BaseWatch{constructor(e={}){e.type=g.n.JSON,e.id=void 0===e.id?w.a.v4():e.id,super(e);const t=Object(p.get)(e,"watch");this.watch=t||E,this.watchString=Object(p.get)(e,"watchString",JSON.stringify(t||E,null,2)),this.id=e.id}validate(){const e={},t={id:[],json:[]};if(e.errors=t,this.id?/^[A-Za-z0-9\-\_.]+$/.test(this.id)||t.id.push(l.i18n.translate("xpack.watcher.sections.watchEdit.json.error.invalidIdText",{defaultMessage:"ID can only contain letters, underscores, dashes, periods and numbers."})):t.id.push(l.i18n.translate("xpack.watcher.sections.watchEdit.json.error.requiredIdText",{defaultMessage:"ID is required"})),this.watchString&&""!==this.watchString)try{const e=JSON.parse(this.watchString);if(e&&"object"==typeof e){const{actions:n}=e;if(n){const e=Object.keys(n).find((e=>{const t=Object.keys(n[e]);let s;return Object.keys(g.c).forEach((e=>{t.includes(g.c[e])&&!t.includes(g.c.UNKNOWN)&&(s=g.c[e])})),!s}));e&&t.json.push(l.i18n.translate("xpack.watcher.sections.watchEdit.json.error.invalidActionType",{defaultMessage:'Unknown action type provided for action "{action}".',values:{action:e}}))}}}catch(e){t.json.push(l.i18n.translate("xpack.watcher.sections.watchEdit.json.error.invalidJsonText",{defaultMessage:"Invalid JSON"}))}else t.json.push(l.i18n.translate("xpack.watcher.sections.watchEdit.json.error.requiredJsonText",{defaultMessage:"JSON is required"}));return e}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{watch:this.watch}),e}static fromUpstreamJson(e){return new json_watch_JsonWatch(e)}}function _(e=g.l.SECOND,t="0"){switch(e){case g.l.SECOND:return l.i18n.translate("xpack.watcher.timeUnits.secondLabel",{defaultMessage:"{timeValue, plural, one {second} other {seconds}}",values:{timeValue:t}});case g.l.MINUTE:return l.i18n.translate("xpack.watcher.timeUnits.minuteLabel",{defaultMessage:"{timeValue, plural, one {minute} other {minutes}}",values:{timeValue:t}});case g.l.HOUR:return l.i18n.translate("xpack.watcher.timeUnits.hourLabel",{defaultMessage:"{timeValue, plural, one {hour} other {hours}}",values:{timeValue:t}});case g.l.DAY:return l.i18n.translate("xpack.watcher.timeUnits.dayLabel",{defaultMessage:"{timeValue, plural, one {day} other {days}}",values:{timeValue:t}})}}d()(json_watch_JsonWatch,"typeName",l.i18n.translate("xpack.watcher.models.jsonWatch.typeName",{defaultMessage:"Advanced Watch"})),d()(json_watch_JsonWatch,"iconClass",""),d()(json_watch_JsonWatch,"selectMessage",l.i18n.translate("xpack.watcher.models.jsonWatch.selectMessageText",{defaultMessage:"Set up a custom watch in raw JSON."})),d()(json_watch_JsonWatch,"isCreatable",!0),d()(json_watch_JsonWatch,"selectSortOrder",100);const k={count:{text:"count()",fieldRequired:!1,value:g.d.COUNT,validNormalizedTypes:[]},avg:{text:"average()",fieldRequired:!0,validNormalizedTypes:["number"],value:g.d.AVERAGE},sum:{text:"sum()",fieldRequired:!0,validNormalizedTypes:["number"],value:g.d.SUM},min:{text:"min()",fieldRequired:!0,validNormalizedTypes:["number","date"],value:g.d.MIN},max:{text:"max()",fieldRequired:!0,validNormalizedTypes:["number","date"],value:g.d.MAX}},S={all:{text:l.i18n.translate("xpack.watcher.thresholdWatchExpression.groupByLabel.allDocumentsLabel",{defaultMessage:"all documents"}),sizeRequired:!1,value:"all",validNormalizedTypes:[]},top:{text:l.i18n.translate("xpack.watcher.thresholdWatchExpression.groupByLabel.topLabel",{defaultMessage:"top"}),sizeRequired:!0,value:"top",validNormalizedTypes:["number","date","keyword"]}},M={[g.e.GREATER_THAN]:{text:l.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isAboveLabel",{defaultMessage:"Is above"}),value:g.e.GREATER_THAN,requiredValues:1},[g.e.GREATER_THAN_OR_EQUALS]:{text:l.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isAboveOrEqualsLabel",{defaultMessage:"Is above or equals"}),value:g.e.GREATER_THAN_OR_EQUALS,requiredValues:1},[g.e.LESS_THAN]:{text:l.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isBelowLabel",{defaultMessage:"Is below"}),value:g.e.LESS_THAN,requiredValues:1},[g.e.LESS_THAN_OR_EQUALS]:{text:l.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isBelowOrEqualsLabel",{defaultMessage:"Is below or equals"}),value:g.e.LESS_THAN_OR_EQUALS,requiredValues:1},[g.e.BETWEEN]:{text:l.i18n.translate("xpack.watcher.thresholdWatchExpression.comparators.isBetweenLabel",{defaultMessage:"Is between"}),value:g.e.BETWEEN,requiredValues:2}},{BETWEEN:T}=g.e,A={AGG_TYPE:"count",TERM_SIZE:5,THRESHOLD_COMPARATOR:g.e.GREATER_THAN,TIME_WINDOW_SIZE:5,TIME_WINDOW_UNIT:"m",TRIGGER_INTERVAL_SIZE:1,TRIGGER_INTERVAL_UNIT:"m",THRESHOLD:[1e3,5e3],GROUP_BY:"all"};class threshold_watch_ThresholdWatch extends base_watch_BaseWatch{constructor(e={}){e.id=e.id||w.a.v4(),e.type=g.n.THRESHOLD,super(e),this.index=e.index,this.timeField=e.timeField,this.timeFields=e.timeFields||void 0,this.triggerIntervalSize=null==e.triggerIntervalSize?A.TRIGGER_INTERVAL_SIZE:e.triggerIntervalSize,this.triggerIntervalUnit=e.triggerIntervalUnit||A.TRIGGER_INTERVAL_UNIT,this.aggType=e.aggType||A.AGG_TYPE,this.aggField=e.aggField,this.termSize=null==e.termSize?A.TERM_SIZE:e.termSize,this.termField=e.termField,this.thresholdComparator=e.thresholdComparator||A.THRESHOLD_COMPARATOR,this.timeWindowSize=null==e.timeWindowSize?A.TIME_WINDOW_SIZE:e.timeWindowSize,this.timeWindowUnit=e.timeWindowUnit||A.TIME_WINDOW_UNIT,this.groupBy=e.groupBy||A.GROUP_BY,null!=this.termField&&(this.groupBy="top"),this.threshold=null==e.threshold?A.THRESHOLD:e.threshold}get hasTermsAgg(){return Boolean(this.termField)}get termOrder(){return this.thresholdComparator===g.e.GREATER_THAN?g.k.DESCENDING:g.k.ASCENDING}get titleDescription(){const e=l.i18n.translate("xpack.watcher.models.thresholdWatch.sendAlertOnSpecificConditionTitleDescription",{defaultMessage:"Send an alert when your specified condition is met."});if(isNaN(this.triggerIntervalSize))return e;const t=_(this.triggerIntervalUnit,this.triggerIntervalSize);return`${e} ${l.i18n.translate("xpack.watcher.models.thresholdWatch.thresholdWatchIntervalTitleDescription",{defaultMessage:"Your watch will run every {triggerIntervalSize} {timeUnitLabel}.",values:{triggerIntervalSize:this.triggerIntervalSize,timeUnitLabel:t}})}`}validate(){const e={},t={name:[],index:[],timeField:[],triggerIntervalSize:[],aggField:[],termSize:[],termField:[],timeWindowSize:[]};return e.errors=t,this.name||t.name.push(l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.error.requiredNameText",{defaultMessage:"Name is required."})),void 0!==this.index&&this.index.length<1&&t.index.push(l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.enterOneOrMoreIndicesValidationMessage",{defaultMessage:"Enter one or more indices."})),void 0!==this.index&&this.index.length>0&&void 0!==this.timeFields&&1===this.timeFields.length&&t.index.push(l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.invalidIndexValidationMessage",{defaultMessage:"Index does not have a time field."})),this.timeField||t.timeField.push(l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.timeFieldIsRequiredValidationText",{defaultMessage:"A time field is required."})),this.triggerIntervalSize||t.triggerIntervalSize.push(l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.intervalSizeIsRequiredValidationMessage",{defaultMessage:"Interval size is required."})),void 0!==this.triggerIntervalSize&&this.triggerIntervalSize<0&&t.triggerIntervalSize.push(l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.intervalSizeNegativeNumberValidationMessage",{defaultMessage:"Interval size cannot be a negative number."})),k[this.aggType].fieldRequired&&!this.aggField&&t.aggField.push(l.i18n.translate("xpack.watcher.watchEdit.thresholdWatchExpression.aggType.fieldIsRequiredValidationMessage",{defaultMessage:"This field is required."})),S[this.groupBy].sizeRequired&&(this.termSize||t.termSize.push(l.i18n.translate("xpack.watcher.thresholdWatchExpression.aggType.xpack.watcher.thresholdWatchExpression.groupBy.requiredValueValidationMessage",{defaultMessage:"A value is required."})),this.termField||t.termField.push(l.i18n.translate("xpack.watcher.thresholdWatchExpression.groupBy.requiredFieldValidationMessage",{defaultMessage:"This field is required."}))),Array.from(Array(M[this.thresholdComparator].requiredValues)).forEach(((e,n)=>{const s=`threshold${n}`;t[s]=[],null!=this.threshold[n]&&""!==this.threshold[n]||t[s].push(l.i18n.translate("xpack.watcher.thresholdWatchExpression.thresholdLevel.valueIsRequiredValidationMessage",{defaultMessage:"A value is required."}))})),this.thresholdComparator!==T||!this.threshold[0]||!this.threshold[1]||this.threshold[1]>this.threshold[0]||t.threshold1.push(l.i18n.translate("xpack.watcher.thresholdWatchExpression.thresholdLevel.secondValueMustBeGreaterMessage",{defaultMessage:"Value must be greater than {lowerBound}.",values:{lowerBound:this.threshold[0]}})),this.timeWindowSize||t.timeWindowSize.push(l.i18n.translate("xpack.watcher.thresholdWatchExpression.timeWindow.durationSizeIsRequiredValidationMessage",{defaultMessage:"Window duration size is required."})),e}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{index:this.index,timeField:this.timeField,triggerIntervalSize:this.triggerIntervalSize,triggerIntervalUnit:this.triggerIntervalUnit,aggType:this.aggType,aggField:this.aggField,termSize:this.termSize,termField:this.termField,termOrder:this.termOrder,thresholdComparator:this.thresholdComparator,timeWindowSize:this.timeWindowSize,timeWindowUnit:this.timeWindowUnit,hasTermsAgg:this.hasTermsAgg,threshold:M[this.thresholdComparator].requiredValues>1?this.threshold:this.threshold[0]}),e}static fromUpstreamJson(e){return new threshold_watch_ThresholdWatch(e)}get DEFAULT_VALUES(){return A}}d()(threshold_watch_ThresholdWatch,"typeName",l.i18n.translate("xpack.watcher.models.thresholdWatch.typeName",{defaultMessage:"Threshold Alert"})),d()(threshold_watch_ThresholdWatch,"iconClass",""),d()(threshold_watch_ThresholdWatch,"selectMessage",l.i18n.translate("xpack.watcher.models.thresholdWatch.selectMessageText",{defaultMessage:"Send an alert on a specific condition"})),d()(threshold_watch_ThresholdWatch,"isCreatable",!0),d()(threshold_watch_ThresholdWatch,"selectSortOrder",1);class monitoring_watch_MonitoringWatch extends base_watch_BaseWatch{constructor(e={}){e.type=g.n.MONITORING,super(e)}get upstreamJson(){const e=super.upstreamJson;return Object.assign(e,{watch:this.watch}),e}static fromUpstreamJson(e){return new monitoring_watch_MonitoringWatch(e)}}d()(monitoring_watch_MonitoringWatch,"isCreatable",!1);const R={};Object(h.set)(R,g.n.JSON,json_watch_JsonWatch),Object(h.set)(R,g.n.THRESHOLD,threshold_watch_ThresholdWatch),Object(h.set)(R,g.n.MONITORING,monitoring_watch_MonitoringWatch);class watch_Watch{static fromUpstreamJson(e={}){const t=Object(p.get)(e,"type"),n=R[t];return Object.assign(e,{isNew:!1}),n.fromUpstreamJson(e)}}d()(watch_Watch,"getWatchTypes",(()=>R));n(49);class watch_history_item_WatchHistoryItem{constructor(e={}){this.id=e.id,this.watchId=e.watchId,this.details=e.details,this.startTime=v(e.startTime),this.watchStatus=watch_status_WatchStatus.fromUpstreamJson(Object(p.get)(e,"watchStatus"))}static fromUpstreamJson(e){return new watch_history_item_WatchHistoryItem(e)}}var L=n(26);const I=e=>Object(L.sendRequest)(C(),e),P=e=>Object(L.useRequest)(C(),e);let F;const C=()=>F;let N;const J=g.j.API_ROOT,D=({watches:e=[]})=>e.map((e=>watch_Watch.fromUpstreamJson(e))),W=({watch:e={}})=>watch_Watch.fromUpstreamJson(e),B=({watchHistoryItems:e=[]})=>e.map((e=>watch_history_item_WatchHistoryItem.fromUpstreamJson(e))),q=({watchHistoryItem:e})=>watch_history_item_WatchHistoryItem.fromUpstreamJson(e),z=async e=>I({path:`${J}/watch/${e}/deactivate`,method:"put"}),H=async e=>I({path:`${J}/watch/${e}/activate`,method:"put"}),U=async(e,t)=>I({path:`${J}/watch/execute`,method:"put",body:JSON.stringify({executeDetails:e.upstreamJson,watch:t.upstreamJson})}),$=async()=>{const{savedObjects:e}=await N.find({type:"index-pattern",fields:["title"],perPage:1e4});return e},V=e=>null==e?void 0:e.visualizeData,G=e=>Settings.fromUpstreamJson(e);var K=n(22);function X({id:e}){return Object(K.jsx)(o.EuiEmptyPrompt,{iconType:"alert",title:Object(K.jsx)("h1",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.pageErrorNotExist.title",defaultMessage:"Couldn't find watch"})),body:Object(K.jsx)("p",null,e?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.pageErrorNotExist.description",defaultMessage:"A watch with ID '{id}' could not be found.",values:{id:e}}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.pageErrorNotExist.noWatchIdDescription",defaultMessage:"A watch could not be found."}))})}function Y(){return Object(K.jsx)(o.EuiEmptyPrompt,{iconType:"alert",title:Object(K.jsx)("h1",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.pageErrorForbidden.title",defaultMessage:"You don't have privileges to use Watcher"}))})}function Z(e){const t=(Array.isArray(e)?e:[e]).find((e=>!!e&&[403,404].includes(e.statusCode)));if(t)return t.statusCode}function Q({errorCode:e,id:t}){return 404===e?Object(K.jsx)(X,{id:t}):Object(K.jsx)(Y,null)}const ee=Object(s.createContext)(null),te=({links:e})=>({putWatchApiUrl:`${e.apis.putWatch}`,executeWatchApiUrl:`${e.apis.executeWatchActionModes}`,watcherGettingStartedUrl:`${e.watcher.ui}`,watchActionsConfigurationMap:{[g.c.SLACK]:`${e.watcher.slackAction}`,[g.c.PAGERDUTY]:`${e.watcher.pagerDutyAction}`,[g.c.JIRA]:`${e.watcher.jiraAction}`}}),ne=({children:e,value:t})=>{const{docLinks:n,...s}=t;return Object(K.jsx)(ee.Provider,{value:Object.freeze({...s,links:te(n)})},e)},se=()=>{const e=Object(s.useContext)(ee);if(!e)throw new Error('"useAppContext" can only be called inside of AppContext.Provider!');return e},re=({watchesToDelete:e,callback:t})=>{const{toasts:n}=se(),s=e.length;if(!s)return null;const r=l.i18n.translate("xpack.watcher.deleteSelectedWatchesConfirmModal.descriptionText",{defaultMessage:"You can't recover {numWatchesToDelete, plural, one {a deleted watch} other {deleted watches}}.",values:{numWatchesToDelete:s}}),a=l.i18n.translate("xpack.watcher.deleteSelectedWatchesConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numWatchesToDelete, plural, one {watch} other {# watches}} ",values:{numWatchesToDelete:s}}),i=l.i18n.translate("xpack.watcher.deleteSelectedWatchesConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});return Object(K.jsx)(o.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteWatchesConfirmation",title:a,onCancel:()=>t(),onConfirm:async()=>{const{successes:s,errors:r}=await(async e=>{const t=JSON.stringify({watchIds:e}),{results:n}=await C().post(`${J}/watches/delete`,{body:t});return n})(e),a=s.length,i=r.length;t(s),a>0&&n.addSuccess(l.i18n.translate("xpack.watcher.sections.watchList.deleteSelectedWatchesSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {watch} other {watches}}",values:{numSuccesses:a}})),i>0&&n.addDanger(l.i18n.translate("xpack.watcher.sections.watchList.deleteSelectedWatchesErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {watch} other {watches}}",values:{numErrors:i}}))},cancelButtonText:i,confirmButtonText:a},r)};var ae=n(39),ie=n.n(ae);const oe=({errorKey:e,isShowingErrors:t,errors:n,children:r,...a})=>Object(K.jsx)(o.EuiFormRow,ie()({isInvalid:t&&n[e].length>0,error:n[e]},a),Object(K.jsx)(s.Fragment,null,s.Children.map(r,(e=>Object(s.cloneElement)(e)))));function ce({status:e}){switch(e){case g.m.FIRING:case g.b.FIRING:return Object(K.jsx)(o.EuiIcon,{type:"play",color:"primary"});case g.m.OK:case g.b.OK:case g.b.ACKNOWLEDGED:return Object(K.jsx)(o.EuiIcon,{type:"check",color:"secondary"});case g.b.THROTTLED:return Object(K.jsx)(o.EuiIcon,{type:"clock",color:"warning"});case g.m.DISABLED:return Object(K.jsx)(o.EuiIcon,{type:"minusInCircleFilled",color:"subdued"});case g.m.CONFIG_ERROR:case g.m.ERROR:case g.b.UNKNOWN:return Object(K.jsx)(o.EuiIcon,{type:"cross",color:"subdued"});case g.b.CONFIG_ERROR:case g.b.ERROR:return Object(K.jsx)(o.EuiIcon,{type:"crossInACircleFilled",color:"danger"})}return null}function le({status:e,size:t="s"}){return Object(K.jsx)(o.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(ce,{status:e})),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiText,{size:t},e)))}const ue=({children:e})=>Object(K.jsx)(o.EuiEmptyPrompt,{title:Object(K.jsx)(o.EuiLoadingSpinner,{size:"xl"}),body:Object(K.jsx)(o.EuiText,{color:"subdued"},e),"data-test-subj":"sectionLoading"}),de=({title:e,error:t,...n})=>{const r=t.data||t,{error:a,cause:i,message:c}=r;return Object(K.jsx)(o.EuiCallOut,ie()({title:e,color:"danger",iconType:"alert"},n),Object(K.jsx)("div",{"data-test-subj":"sectionErrorMessage"},c||a),i&&Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiSpacer,{size:"m"}),Object(K.jsx)("ul",null,i.map(((e,t)=>Object(K.jsx)("li",{key:t},e))))))},he=r.a.createContext({}),pe=()=>{const{toasts:e}=se(),{watchDetail:t}=Object(s.useContext)(he),[n,r]=Object(s.useState)([]),[a,i]=Object(s.useState)(!1),[u,d]=Object(s.useState)(null),{id:h,watchErrors:p,watchStatus:m,isSystemWatch:f}=t,w=p&&p.actionErrors,b=m&&m.actionStatuses,j=w&&Object.keys(w).length>0;Object(s.useEffect)((()=>{const e=b&&b.map((e=>{const t=w&&w[e.id];return{...e,errors:t||[]}}));r(e)}),[t,w,b]);const x=[{field:"id",name:l.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.actionHeader",{defaultMessage:"Name"}),sortable:!0,truncateText:!0},{field:"state",name:l.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.stateHeader",{defaultMessage:"State"}),sortable:!0,truncateText:!0,render:e=>Object(K.jsx)(le,{status:e})}],y={field:"errors",name:l.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.errorsHeader",{defaultMessage:"Errors"}),render:(e,t)=>{const{id:n}=t;return e&&e.length>0?Object(K.jsx)(o.EuiButtonEmpty,{onClick:()=>d(n),"data-test-subj":"actionErrorsButton"},l.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.errorsCellText",{defaultMessage:"{total, number} {total, plural, one {error} other {errors}}",values:{total:e.length}})):Object(K.jsx)(s.Fragment,null)}},v={actions:[{available:e=>e.isAckable&&!f,render:t=>{const{id:n}=t;return Object(K.jsx)(o.EuiToolTip,{content:l.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.ackActionCellTooltipTitle",{defaultMessage:"Acknowledge watch action."})},Object(K.jsx)(o.EuiButtonEmpty,{iconType:"check",isLoading:a,"data-test-subj":"acknowledgeWatchButton",onClick:async()=>{i(!0);try{const e=await(async(e,t)=>{const{watchStatus:n}=await C().put(`${J}/watch/${e}/action/${t}/acknowledge`);return watch_status_WatchStatus.fromUpstreamJson(n)})(h,n),t=e.actionStatuses.map((e=>{const t=w&&w[e.id];return{...e,errors:t||[]}}));return i(!1),r(t)}catch(n){i(!1),e.addDanger(l.i18n.translate("xpack.watcher.sections.watchDetail.watchTable.ackActionErrorMessage",{defaultMessage:"Error acknowledging action {actionId}",values:{actionId:t.id}}))}}},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.watchTable.ackActionCellTitle",defaultMessage:"Acknowledge"})))}}]},O=j?[...x,y,v]:[...x,v];return Object(K.jsx)("div",{"data-test-subj":"watchDetailSection"},u&&Object(K.jsx)(o.EuiFlyout,{size:"s","aria-labelledby":"flyoutActionErrorTitle","data-test-subj":"actionErrorsFlyout",onClose:()=>d(null)},Object(K.jsx)(o.EuiFlyoutHeader,{hasBorder:!0},Object(K.jsx)(o.EuiTitle,{size:"s"},Object(K.jsx)("h2",{id:"flyoutActionErrorTitle","data-test-subj":"title"},u))),Object(K.jsx)(o.EuiFlyoutBody,null,Object(K.jsx)(o.EuiCallOut,{title:l.i18n.translate("xpack.watcher.sections.watchDetail.actionErrorsCalloutTitle",{defaultMessage:"This action contains errors"}),color:"danger",iconType:"cross","data-test-subj":"errorMessage"},w[u].length>1?Object(K.jsx)("ul",null,w[u].map(((e,t)=>Object(K.jsx)("li",{key:`action-error-${t}`},e.message)))):Object(K.jsx)("p",null,w[u][0].message)))),Object(K.jsx)(o.EuiInMemoryTable,{items:n,itemId:"id",columns:O,pagination:g.g,sorting:!0,"data-test-subj":"watchActionStatusTable",message:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.watchTable.noWatchesMessage",defaultMessage:"No actions to show"})}))},me=[{value:"now-1h",text:l.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.1h",{defaultMessage:"Last one hour"})},{value:"now-24h",text:l.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.24h",{defaultMessage:"Last 24 hours"})},{value:"now-7d",text:l.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.7d",{defaultMessage:"Last 7 days"})},{value:"now-30d",text:l.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.30d",{defaultMessage:"Last 30 days"})},{value:"now-6M",text:l.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.6M",{defaultMessage:"Last 6 months"})},{value:"now-1y",text:l.i18n.translate("xpack.watcher.sections.watchHistory.timeSpan.1y",{defaultMessage:"Last 1 year"})}],ge=()=>{const{watchDetail:e}=Object(s.useContext)(he),[t,n]=Object(s.useState)(void 0),[r,a]=Object(s.useState)(void 0),[i,u]=Object(s.useState)(me[0].value);if(void 0===t){n(e.watchStatus&&e.watchStatus.isActive||!1)}const{error:d,data:h,isLoading:p}=(m=e.id,P({query:(f=i)?{startTime:f}:void 0,path:`${J}/watch/${m}/history`,method:"get",deserializer:B}));var m,f;const{error:w,data:b}=(e=>P({path:e?`${J}/history/${e}`:"",method:"get",deserializer:q}))(r),j=b?JSON.stringify(b.details,null,2):"";if(d)return Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiSpacer,{size:"s"}),Object(K.jsx)(de,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchExecutionErrorTitle",defaultMessage:"Error loading execution history"}),error:d}));const x=[{field:"startTime",name:l.i18n.translate("xpack.watcher.sections.watchHistory.watchTable.startTimeHeader",{defaultMessage:"Trigger time"}),sortable:!0,truncateText:!0,render:(e,t)=>{const n=e.format();return Object(K.jsx)(o.EuiLink,{"data-test-subj":`watchStartTimeColumn-${n}`,onClick:()=>a(t.id)},n)}},{field:"watchStatus.state",name:l.i18n.translate("xpack.watcher.sections.watchHistory.watchTable.stateHeader",{defaultMessage:"State"}),sortable:!0,truncateText:!0,render:e=>Object(K.jsx)(le,{status:e})},{field:"watchStatus.comment",name:l.i18n.translate("xpack.watcher.sections.watchHistory.watchTable.commentHeader",{defaultMessage:"Comment"}),sortable:!0,truncateText:!0}];let y;if(void 0!==r&&(w&&(y=Object(K.jsx)(o.EuiFlyout,{"data-test-subj":"watchHistoryErrorDetailFlyout",onClose:()=>a(void 0),"aria-labelledby":"watchHistoryErrorDetailsFlyoutTitle",maxWidth:600},Object(K.jsx)(o.EuiFlyoutHeader,null,Object(K.jsx)(o.EuiTitle,{size:"s"},Object(K.jsx)("h3",{"data-test-subj":"title"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.errorTitle",defaultMessage:"Execution details"})))),Object(K.jsx)(o.EuiFlyoutBody,null,Object(K.jsx)(de,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetailsErrorTitle",defaultMessage:"Error loading execution details"}),error:w,"data-test-subj":"errorMessage"})))),void 0!==b)){const e=[{field:"id",name:l.i18n.translate("xpack.watcher.sections.watchHistory.watchActionStatusTable.id",{defaultMessage:"Name"}),sortable:!0,truncateText:!0},{field:"state",name:l.i18n.translate("xpack.watcher.sections.watchHistory.watchActionStatusTable.state",{defaultMessage:"State"}),sortable:!0,truncateText:!0,render:e=>Object(K.jsx)(le,{status:e})}];y=Object(K.jsx)(o.EuiFlyout,{"data-test-subj":"watchHistoryDetailFlyout",onClose:()=>a(void 0),"aria-labelledby":"watchHistoryDetailsFlyoutTitle",maxWidth:600},Object(K.jsx)(o.EuiFlyoutHeader,null,Object(K.jsx)(o.EuiTitle,{size:"s"},Object(K.jsx)("h3",{"data-test-subj":"title"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.title",defaultMessage:"Executed on {date}",values:{date:b.startTime}})))),Object(K.jsx)(o.EuiFlyoutBody,null,Object(K.jsx)(o.EuiTitle,{size:"xs"},Object(K.jsx)("h4",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.actionsTitle",defaultMessage:"Actions"}))),Object(K.jsx)(o.EuiInMemoryTable,{items:b.watchStatus.actionStatuses,itemId:"id",columns:e,message:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.noWatchesMessage",defaultMessage:"No current status to show"}),"data-test-subj":"watchActionsTable"}),Object(K.jsx)(o.EuiSpacer,null),Object(K.jsx)(o.EuiTitle,{size:"xs"},Object(K.jsx)("h4",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchHistoryDetail.jsonTitle",defaultMessage:"JSON"}))),Object(K.jsx)(o.EuiSpacer,{size:"s"}),Object(K.jsx)(o.EuiCodeBlock,{language:"json"},j)))}return Object(K.jsx)("div",{"data-test-subj":"watchHistorySection"},Object(K.jsx)(o.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexStart",alignItems:"center"},Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiSelect,{options:me,value:i,onChange:e=>{const t=e.target.value;u(t)},"aria-label":l.i18n.translate("xpack.watcher.sections.watchHistory.changeTimespanSelectAriaLabel",{defaultMessage:"Change timespan of watch history"})}))),Object(K.jsx)(o.EuiSpacer,{size:"s"}),Object(K.jsx)(o.EuiInMemoryTable,{items:h||[],columns:x,pagination:g.g,sorting:!0,loading:p,"data-test-subj":"watchHistoryTable",message:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.noCurrentStatus",defaultMessage:"No execution history to show"})}),y)},fe={text:l.i18n.translate("xpack.watcher.breadcrumb.listLabel",{defaultMessage:"Watcher"}),href:"/watches"},we={text:l.i18n.translate("xpack.watcher.breadcrumb.createLabel",{defaultMessage:"Create"})},be={text:l.i18n.translate("xpack.watcher.breadcrumb.editLabel",{defaultMessage:"Edit"})},je={text:l.i18n.translate("xpack.watcher.breadcrumb.statusLabel",{defaultMessage:"Status"})};let xe;const ye=()=>{xe.history.push({pathname:"/watches"})},ve=()=>{xe.history.push({pathname:"/watches/new-watch/threshold"})},Oe=()=>{xe.history.push({pathname:"/watches/new-watch/json"})},Ee="watchExecutionHistoryTab",_e="watchActionsTab",ke=[{id:Ee,name:l.i18n.translate("xpack.watcher.sections.watchStatus.executionHistoryTabLabel",{defaultMessage:"Execution history"})},{id:_e,name:l.i18n.translate("xpack.watcher.sections.watchStatus.actionsTabLabel",{defaultMessage:"Action statuses"})}],Se=({match:{params:{id:e}}})=>{const{setBreadcrumbs:t,toasts:n}=se(),{error:a,data:i,isLoading:u}=(e=>P({path:`${J}/watch/${e}`,method:"get",deserializer:W}))(e),[d,h]=Object(s.useState)(Ee),[p,m]=Object(s.useState)(void 0),[g,f]=Object(s.useState)([]),[w,b]=Object(s.useState)(!1);Object(s.useEffect)((()=>{t([fe,je])}),[e,t]);const j=Z(a);if(u)return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(K.jsx)(ue,null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchStatus.loadingWatchDetailsDescription",defaultMessage:"Loading watch details…"})));if(j)return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(K.jsx)(Q,{errorCode:j,id:e}));if(i){const{isSystemWatch:e,id:t,watchStatus:s,name:j}=i;void 0===p&&m(void 0!==s.isActive&&s.isActive);const x=p?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.deactivateWatchLabel",defaultMessage:"Deactivate"}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.watchTable.activateWatchLabel",defaultMessage:"Activate"}),y=async()=>{const e=p?z:H;b(!0);const{error:s}=await e(t);if(b(!1),s){const e=p?l.i18n.translate("xpack.watcher.sections.watchList.toggleActivatationErrorNotification.deactivateDescriptionText",{defaultMessage:"Couldn't deactivate watch"}):l.i18n.translate("xpack.watcher.sections.watchList.toggleActivatationErrorNotification.activateDescriptionText",{defaultMessage:"Couldn't activate watch"});return n.addDanger(e)}m(!p)};return Object(K.jsx)(he.Provider,{value:{watchDetailError:a,watchDetail:i,isWatchDetailLoading:u}},Object(K.jsx)(r.a.Fragment,null,Object(K.jsx)(o.EuiPageHeader,{pageTitle:Object(K.jsx)(r.a.Fragment,null,Object(K.jsx)("span",{"data-test-subj":"pageTitle"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.header",defaultMessage:"Current status for '{watch}'",values:{watch:j||t}})),e&&Object(K.jsx)(r.a.Fragment,null," ",Object(K.jsx)(o.EuiToolTip,{content:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.headerBadgeToolipText",defaultMessage:"You cannot deactivate or delete a system watch."})},Object(K.jsx)(o.EuiBadge,{color:"hollow"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchDetail.headerBadgeText",defaultMessage:"System watch"}))))),bottomBorder:!0,rightSideItems:e?[]:[Object(K.jsx)(o.EuiButtonEmpty,{"data-test-subj":"toggleWatchActivationButton",onClick:()=>y(),isLoading:w},x),Object(K.jsx)(o.EuiButtonEmpty,{"data-test-subj":"deleteWatchButton",onClick:()=>{f([t])},color:"danger",disabled:!1},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchHistory.deleteWatchButtonLabel",defaultMessage:"Delete"}))],tabs:ke.map(((e,t)=>({onClick:()=>{h(e.id)},isSelected:e.id===d,key:t,"data-test-subj":"tab",label:e.name})))}),Object(K.jsx)(o.EuiSpacer,{size:"l"}),d===_e?Object(K.jsx)(pe,null):Object(K.jsx)(ge,null),Object(K.jsx)(re,{callback:e=>{e&&ye(),f([])},watchesToDelete:g})))}return null},Me=r.a.createContext({}),Te=(e,t)=>0===t?"now":`now+${t}${e}`;class execute_details_ExecuteDetails{constructor(e={}){this.triggeredTimeValue=e.triggeredTimeValue,this.triggeredTimeUnit=e.triggeredTimeUnit,this.scheduledTimeValue=e.scheduledTimeValue,this.scheduledTimeUnit=e.scheduledTimeUnit,this.ignoreCondition=e.ignoreCondition,this.alternativeInput=e.alternativeInput||"",this.actionModes=e.actionModes,this.recordExecution=e.recordExecution}validate(){const e={json:[]},t=l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.invalidJsonFieldError",{defaultMessage:"Invalid JSON"});if(""!==this.alternativeInput)try{const n=JSON.parse(this.alternativeInput);n&&"object"!=typeof n&&e.json.push(t)}catch(n){e.json.push(t)}return e}get upstreamJson(){return{triggerData:{triggeredTime:this.triggeredTimeValue&&""!==this.triggeredTimeValue?Te(this.triggeredTimeUnit,this.triggeredTimeValue):void 0,scheduledTime:this.scheduledTimeValue&&""!==this.scheduledTimeValue?Te(this.scheduledTimeUnit,this.scheduledTimeValue):void 0},ignoreCondition:this.ignoreCondition,alternativeInput:""!==this.alternativeInput?JSON.parse(this.alternativeInput):void 0,actionModes:this.actionModes,recordExecution:this.recordExecution}}}function Ae(e){return Object(p.intersection)(Object(p.keys)(e),Object(p.values)(g.c))[0]||g.c.UNKNOWN}var Re=n(43);function Le(e,t){const{metadata:n={}}=t;Object(h.set)(n,"xpack.type",g.n.JSON);const s={...t,metadata:n};return e&&(s.metadata.name=e),s}class action_base_action_BaseAction{constructor(e,t){this.id=e.id,this.type=e.type,this.errors=t}get downstreamJson(){return{id:this.id,type:this.type}}get upstreamJson(){return{}}static getPropsFromDownstreamJson(e){return{id:e.id}}static getPropsFromUpstreamJson(e){return{id:e.id}}}class action_logging_action_LoggingAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.LOGGING,super(e,t),this.text=e.text}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{text:this.text}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{text:e.text});return{action:new action_logging_action_LoggingAction(t,n),errors:n}}get upstreamJson(){const e=super.upstreamJson;return e[this.id]={logging:{text:this.text}},e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),{errors:n}=this.validateJson(e.actionJson);Object.assign(t,{text:e.actionJson.logging.text});return{action:new action_logging_action_LoggingAction(t,n),errors:n}}static validateJson(e){const t=[];return e.logging||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.loggingAction.actionJsonLoggingPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonLogging} property",values:{actionJsonLogging:"actionJson.logging"}})}),e.logging&&!e.logging.text&&t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.loggingAction.actionJsonLoggingTextPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonLoggingText} property",values:{actionJsonLoggingText:"actionJson.logging.text"}})}),{errors:t.length?t:null}}}class action_email_action_EmailAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.EMAIL,super(e,t),this.to=e.to,this.subject=e.subject,this.body=e.body}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{to:this.to,subject:this.subject,body:this.body}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{to:e.to,subject:e.subject,body:e.body});return{action:new action_email_action_EmailAction(t,n),errors:n}}get upstreamJson(){const e=super.upstreamJson,t={};return this.subject&&(t.subject=this.subject),this.body&&(t.body={text:this.body}),e[this.id]={email:{profile:"standard",to:this.to,...t}},e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),{errors:n}=this.validateJson(e.actionJson),s={};e.actionJson.email.subject&&(s.subject=e.actionJson.email.subject),e.actionJson.email.body&&(s.body=e.actionJson.email.body.text),Object.assign(t,{to:e.actionJson.email.to,subject:e.actionJson.email.subject,...s});return{action:new action_email_action_EmailAction(t,n),errors:n}}static validateJson(e){const t=[];if(!e.email){const e=l.i18n.translate("xpack.watcher.models.emailAction.actionJsonEmailPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonEmail} property",values:{actionJsonEmail:"actionJson.email"}});t.push({code:g.f.ERR_PROP_MISSING,message:e})}if(e.email&&!e.email.to){const e=l.i18n.translate("xpack.watcher.models.emailAction.actionJsonEmailToPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonEmailTo} property",values:{actionJsonEmailTo:"actionJson.email.to"}});t.push({code:g.f.ERR_PROP_MISSING,message:e})}return{errors:t.length?t:null}}}class action_slack_action_SlackAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.SLACK,super(e,t),this.to=e.to,this.text=e.text}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{to:this.to,text:this.text}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{to:e.to,text:e.text});return{action:new action_slack_action_SlackAction(t,n),errors:n}}get upstreamJson(){const e=super.upstreamJson;return e[this.id]={slack:{message:{to:this.to,text:this.text}}},e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),{errors:n}=this.validateJson(e.actionJson);Object.assign(t,{to:e.actionJson.slack.message.to,text:e.actionJson.slack.message.text});return{action:new action_slack_action_SlackAction(t,n),errors:n}}static validateJson(e){const t=[];return e.slack||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.slackAction.actionJsonSlackPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonSlack} property",values:{actionJsonSlack:"actionJson.slack"}})}),e.slack&&!e.slack.message&&t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.slackAction.actionJsonSlackMessagePropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonSlackMessage} property",values:{actionJsonSlackMessage:"actionJson.slack.message"}})}),{errors:t.length?t:null}}}class action_index_action_IndexAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.INDEX,super(e,t),this.index=e.index}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{index:this.index}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{index:e.index});return{action:new action_index_action_IndexAction(t,n),errors:n}}get upstreamJson(){const e=super.upstreamJson;return e[this.id]={index:this.index},e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),{errors:n}=this.validateJson(e.actionJson);Object.assign(t,{index:e.actionJson.index.index});return{action:new action_index_action_IndexAction(t,n),errors:n}}static validateJson(e){const t=[];return e.index||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.indexAction.actionJsonIndexPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonIndex} property",values:{actionJsonIndex:"actionJson.index"}})}),{errors:t.length?t:null}}}class action_webhook_action_WebhookAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.WEBHOOK,super(e,t),this.method=e.method,this.host=e.host,this.port=e.port,this.scheme=e.scheme,this.path=e.path,this.body=e.body,this.contentType=e.contentType,this.username=e.username,this.password=e.password}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{method:this.method,host:this.host,port:this.port,scheme:this.scheme,path:this.path,body:this.body,contentType:this.contentType,username:this.username}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{method:e.method,host:e.host,port:e.port,scheme:e.scheme,path:e.path,body:e.body,contentType:e.contentType,username:e.username,password:e.password});return{action:new action_webhook_action_WebhookAction(t,n),errors:n}}get upstreamJson(){const e=super.upstreamJson,t={};return this.path&&(t.path=this.path),this.method&&(t.method=this.method),this.scheme&&(t.scheme=this.scheme),this.body&&(t.body=this.body),this.contentType&&(t.headers={"Content-Type":this.contentType}),this.username&&this.password&&(t.auth={basic:{username:this.username,password:this.password}}),e[this.id]={webhook:{host:this.host,port:this.port,...t}},e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),n=e&&e.actionJson&&e.actionJson.webhook,{errors:s}=this.validateJson(e.actionJson),{path:r,method:a,scheme:i,body:o,auth:c,headers:l}=n,u={};r&&(u.path=r),a&&(u.method=a),i&&(u.scheme=i),o&&(u.body=o),l["Content-Type"]&&(u.contentType=l["Content-Type"]),c&&c.basic&&(u.username=c.basic.username),Object.assign(t,{host:e.actionJson.webhook.host,port:e.actionJson.webhook.port,...u});return{action:new action_webhook_action_WebhookAction(t,s),errors:s}}static validateJson(e){const t=[];return e.webhook&&!e.webhook.host&&t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.loggingAction.actionJsonWebhookHostPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonWebhookHost} property",values:{actionJsonWebhookHost:"actionJson.webhook.host"}})}),e.webhook&&!e.webhook.port&&t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.loggingAction.actionJsonWebhookPortPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonWebhookPort} property",values:{actionJsonWebhookPort:"actionJson.webhook.port"}})}),{errors:t.length?t:null}}}class action_pagerduty_action_PagerDutyAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.PAGERDUTY,super(e,t),this.description=e.description}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{description:this.description}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{description:e.description});return{action:new action_pagerduty_action_PagerDutyAction(t,n),errors:n}}get upstreamJson(){const e=super.upstreamJson;return e[this.id]={pagerduty:{description:this.description}},e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),{errors:n}=this.validateJson(e.actionJson);Object.assign(t,{description:e.actionJson.pagerduty.description});return{action:new action_pagerduty_action_PagerDutyAction(t,n),errors:n}}static validateJson(e){const t=[];return e.pagerduty||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.pagerDutyAction.actionJsonPagerDutyPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonPagerDuty} property",values:{actionJsonPagerDuty:"actionJson.pagerduty"}})}),e.pagerduty&&!e.pagerduty.description&&t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.pagerDutyAction.actionJsonPagerDutyDescriptionPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonPagerDutyText} property",values:{actionJsonPagerDutyText:"actionJson.pagerduty.description"}})}),{errors:t.length?t:null}}}class action_jira_action_JiraAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.JIRA,super(e,t),this.projectKey=e.projectKey,this.issueType=e.issueType,this.summary=e.summary}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{projectKey:this.projectKey,issueType:this.issueType,summary:this.summary}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{projectKey:e.projectKey,issueType:e.issueType,summary:e.summary});return{action:new action_jira_action_JiraAction(t,n),errors:n}}get upstreamJson(){const e=super.upstreamJson;return e[this.id]={jira:{fields:{project:{key:this.projectKey},issuetype:{name:this.issueType},summary:this.summary}}},e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),{errors:n}=this.validateJson(e.actionJson);Object.assign(t,{projectKey:Object(p.get)(e,"actionJson.jira.fields.project.key"),issueType:Object(p.get)(e,"actionJson.jira.fields.issuetype.name"),summary:Object(p.get)(e,"actionJson.jira.fields.summary")});return{action:new action_jira_action_JiraAction(t,n),errors:n}}static validateJson(e){const t=[];return e.jira||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJira} property",values:{actionJsonJira:"actionJson.jira"}})}),Object(p.get)(e,"jira.fields.project.key")||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraProjectKeyPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJiraProjectKey} property",values:{actionJsonJiraProjectKey:"actionJson.jira.fields.project.key"}})}),Object(p.get)(e,"jira.fields.issuetype.name")||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraIssueTypePropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJiraIssueType} property",values:{actionJsonJiraIssueType:"actionJson.jira.fields.issuetype.name"}})}),Object(p.get)(e,"jira.fields.summary")||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.jiraAction.actionJsonJiraSummaryPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJsonJiraSummary} property",values:{actionJsonJiraSummary:"actionJson.jira.fields.summary"}})}),{errors:t.length?t:null}}}class action_unknown_action_UnknownAction extends action_base_action_BaseAction{constructor(e,t){e.type=g.c.UNKNOWN,super(e,t),this.actionJson=e.actionJson}get downstreamJson(){const e=super.downstreamJson;return Object.assign(e,{actionJson:this.actionJson}),e}static fromDownstreamJson(e){const t=super.getPropsFromDownstreamJson(e);return Object.assign(t,{actionJson:e.actionJson}),new action_unknown_action_UnknownAction(t)}get upstreamJson(){const e=super.upstreamJson;return e[this.id]=this.actionJson,e}static fromUpstreamJson(e){const t=super.getPropsFromUpstreamJson(e),{errors:n}=this.validateJson(e);Object.assign(t,{actionJson:e.actionJson});return{action:new action_unknown_action_UnknownAction(t,n),errors:n}}static validateJson(e){const t=[];return e.actionJson||t.push({code:g.f.ERR_PROP_MISSING,message:l.i18n.translate("xpack.watcher.models.unknownAction.actionJsonPropertyMissingBadRequestMessage",{defaultMessage:"JSON argument must contain an {actionJson} property",values:{actionJson:"actionJson"}})}),{errors:t.length?t:null}}}const Ie={};Object(h.set)(Ie,g.c.LOGGING,action_logging_action_LoggingAction),Object(h.set)(Ie,g.c.EMAIL,action_email_action_EmailAction),Object(h.set)(Ie,g.c.SLACK,action_slack_action_SlackAction),Object(h.set)(Ie,g.c.INDEX,action_index_action_IndexAction),Object(h.set)(Ie,g.c.WEBHOOK,action_webhook_action_WebhookAction),Object(h.set)(Ie,g.c.PAGERDUTY,action_pagerduty_action_PagerDutyAction),Object(h.set)(Ie,g.c.JIRA,action_jira_action_JiraAction),Object(h.set)(Ie,g.c.UNKNOWN,action_unknown_action_UnknownAction);class action_action_Action{static fromUpstreamJson(e){const t=Ae(e.actionJson),n=Ie[t]||action_unknown_action_UnknownAction,{action:s}=n.fromUpstreamJson(e);return s}static fromDownstreamJson(e){const t=Ie[e.type]||action_unknown_action_UnknownAction,{action:n}=t.fromDownstreamJson(e);return n}}function Pe(e){const t={};return Object(p.forEach)(e,(e=>{const n=action_action_Action.fromDownstreamJson(e);Object.assign(t,n.upstreamJson)})),t}function Fe(e){return e.replace(/\s+/g," ").trim()}d()(action_action_Action,"getActionTypes",(()=>Ie));const{BETWEEN:Ce}=g.e;function Ne(e,t,n){let s="";return"count"!==e||n||(s=t===Ce?"\n      if (ctx.payload.hits.total >= params.threshold[0] && ctx.payload.hits.total <= params.threshold[1]) {\n        return true;\n      }\n\n      return false;\n    ":`\n      if (ctx.payload.hits.total ${t} params.threshold) {\n        return true;\n      }\n\n      return false;\n    `),"count"===e&&n&&(s=t===Ce?"\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i].doc_count >= params.threshold[0] && arr[i].doc_count <= params.threshold[1]) {\n          return true;\n        }\n      }\n\n      return false;\n    ":`\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i].doc_count ${t} params.threshold) {\n          return true;\n        }\n      }\n\n      return false;\n    `),"count"===e||n||(s=t===Ce?"\n      if (ctx.payload.aggregations.metricAgg.value >= params.threshold[0]\n        && ctx.payload.aggregations.metricAgg.value <= params.threshold[1]) {\n        return true;\n      }\n\n      return false;\n    ":`\n      if (ctx.payload.aggregations.metricAgg.value ${t} params.threshold) {\n        return true;\n      }\n\n      return false;\n    `),"count"!==e&&n&&(s=t===Ce?"\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i]['metricAgg'].value >= params.threshold[0] && arr[i]['metricAgg'].value <= params.threshold[1]) {\n          return true;\n        }\n      }\n\n      return false;\n    ":`\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      for (int i = 0; i < arr.length; i++) {\n        if (arr[i]['metricAgg'].value ${t} params.threshold) {\n          return true;\n        }\n      }\n\n      return false;\n    `),Fe(s)}function Je(e){return{threshold:e}}function De({aggType:e,thresholdComparator:t,hasTermsAgg:n,threshold:s}){return{script:{source:Ne(e,t,n),params:Je(s)}}}function We(e){return Array.isArray(e)?e:[e]}function Be(e,t,n){return{[n]:{gte:`{{ctx.trigger.scheduled_time}}||-${e}${t}`,lte:"{{ctx.trigger.scheduled_time}}",format:"strict_date_optional_time||epoch_millis"}}}function qe(e,t,n){return{bool:{filter:{range:Be(e,t,n)}}}}function ze(e,t,n,s,r,a,i,o){const c={size:0,query:qe(e,t,n)},l=function(e,t,n,s,r){if("count"===e&&!n)return null;if("count"===e&&n)return{bucketAgg:{terms:{field:n,size:s,order:{_count:r}}}};if("count"!==e&&!n){const n={metricAgg:{}};return Object(h.set)(n,`metricAgg.${e}`,{field:t}),n}if("count"!==e&&n){const a={bucketAgg:{terms:{field:n,size:s,order:{metricAgg:r}},aggs:{metricAgg:{}}}};return Object(h.set)(a,`bucketAgg.aggs.metricAgg.${e}`,{field:t}),a}}(s,r,a,i,o);return Boolean(l)&&(c.aggs=l),c}function He({index:e,timeWindowSize:t,timeWindowUnit:n,timeField:s,aggType:r,aggField:a,termField:i,termSize:o,termOrder:c}){return{search:{request:{body:ze(t,n,s,r,a,i,o,c),indices:We(e)}}}}function Ue({index:e,timeField:t,triggerIntervalSize:n,triggerIntervalUnit:s,aggType:r,aggField:a,termSize:i,termField:o,thresholdComparator:c,timeWindowSize:l,timeWindowUnit:u,threshold:d}){return{watcherui:{index:e,time_field:t,trigger_interval_size:n,trigger_interval_unit:s,agg_type:r,agg_field:a,term_size:i,term_field:o,threshold_comparator:c,time_window_size:l,time_window_unit:u,threshold:d}}}const{BETWEEN:$e}=g.e;function Ve(e,t,n){let s="";return"count"!==e||n||(s="\n      HashMap result = new HashMap();\n      result.result = ctx.payload.hits.total;\n\n      return result;\n    "),"count"===e&&n&&(s=t===$e?"\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i].doc_count;\n        if (filteredHit.value >= params.threshold[0] && filteredHit.value <= params.threshold[1]) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    ":`\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i].doc_count;\n        if (filteredHit.value ${t} params.threshold) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    `),"count"===e||n||(s="\n      HashMap result = new HashMap();\n      result.result = ctx.payload.aggregations.metricAgg.value;\n\n      return result;\n    "),"count"!==e&&n&&(s=t===$e?"\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i]['metricAgg'].value;\n        if (filteredHit.value >= params.threshold[0] && filteredHit.value <= params.threshold[1]) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    ":`\n      HashMap result = new HashMap();\n      ArrayList arr = ctx.payload.aggregations.bucketAgg.buckets;\n      ArrayList filteredHits = new ArrayList();\n\n      for (int i = 0; i < arr.length; i++) {\n        HashMap filteredHit = new HashMap();\n        filteredHit.key = arr[i].key;\n        filteredHit.value = arr[i]['metricAgg'].value;\n        if (filteredHit.value ${t} params.threshold) {\n          filteredHits.add(filteredHit);\n        }\n      }\n      result.results = filteredHits;\n\n      return result;\n    `),Fe(s)}function Ge(e){return{threshold:e}}function Ke({aggType:e,thresholdComparator:t,hasTermsAgg:n,threshold:s}){return{script:{source:Ve(e,t,n),params:Ge(s)}}}function Xe(e,t){return{schedule:{interval:`${e}${t}`}}}function Ye({name:e,triggerIntervalSize:t,triggerIntervalUnit:n,index:s,timeWindowSize:r,timeWindowUnit:a,timeField:i,aggType:o,aggField:c,termField:l,termSize:u,termOrder:d,thresholdComparator:h,hasTermsAgg:p,threshold:m,actions:f,includeMetadata:w=!0}){const b={trigger:Xe(t,n),input:He({index:s,timeWindowSize:r,timeWindowUnit:a,timeField:i,aggType:o,aggField:c,termField:l,termSize:u,termOrder:d}),condition:De({aggType:o,thresholdComparator:h,hasTermsAgg:p,threshold:m}),transform:Ke({aggType:o,thresholdComparator:h,hasTermsAgg:p,threshold:m}),actions:Pe(f)};return w&&(b.metadata={xpack:{type:g.n.THRESHOLD},...Ue({index:s,timeField:i,triggerIntervalSize:t,triggerIntervalUnit:n,aggType:o,aggField:c,termSize:u,termField:l,thresholdComparator:h,timeWindowSize:r,timeWindowUnit:a,threshold:m})},e&&(b.metadata.name=e)),b}function Ze(e){const t=Object.keys(e);let n;return Object.keys(g.c).forEach((e=>{t.includes(g.c[e])&&(n=g.c[e])})),n||g.c.UNKNOWN}function Qe(e,t){if(e===g.c.SLACK)return t[e].message;if(e===g.c.JIRA){const n={};return n.projectKey=Object(p.get)(t[e],"fields.project.key"),n.issueType=Object(p.get)(t[e],"fields.issuetype.name"),n.summary=Object(p.get)(t[e],"fields.summary"),n}return t[e]}async function et(e,t){try{await(async e=>await C().put(`${J}/watch/${e.id}`,{body:JSON.stringify(e.upstreamJson)}))(e),t.addSuccess(e.isNew?l.i18n.translate("xpack.watcher.sections.watchEdit.json.createSuccessNotificationText",{defaultMessage:"Created '{watchDisplayName}'",values:{watchDisplayName:e.displayName}}):l.i18n.translate("xpack.watcher.sections.watchEdit.json.saveSuccessNotificationText",{defaultMessage:"Saved '{watchDisplayName}'",values:{watchDisplayName:e.displayName}})),ye()}catch(e){var n;return{error:null!==(n=null==e?void 0:e.response.data)&&void 0!==n?n:e.body||e}}}async function tt(e,t){const n=e.watch&&e.watch.actions?((s=e).resetActions(),Object.keys(s.watch.actions).forEach((e=>{const t=s.watch.actions[e],n=Ze(t),r={...Qe(n,t),ignoreDefaults:!0};s.createAction(n,r)})),s):e;var s;if(n.type===g.n.JSON){const e=n.actions.reduce(((e,t)=>{if(t.validate){const n=t.validate(),s=Object.keys(n);if(!!!s.find((e=>n[e].length>=1)))return e;const r=s.map((e=>n[e])),a=r&&r.length?[].concat(...r):[];return[...e,...a]}return e}),[]);return e.length>0?{error:{data:{message:e,error:"validation"}}}:et(n,t)}return et(n,t)}class request_flyout_RequestFlyout extends s.PureComponent{getEsJson(e){return JSON.stringify(e,null,2)}render(){const{id:e,payload:t,close:n}=this.props,s=`${`PUT _watcher/watch/${e||"<watchId>"}`}\n${this.getEsJson(t)}`;return Object(K.jsx)(o.EuiFlyout,{maxWidth:480,onClose:n},Object(K.jsx)(o.EuiFlyoutHeader,null,Object(K.jsx)(o.EuiTitle,null,Object(K.jsx)("h2",null,e?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.requestFlyout.namedTitle",defaultMessage:"Request for '{id}'",values:{id:e}}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.requestFlyout.unnamedTitle",defaultMessage:"Request"})))),Object(K.jsx)(o.EuiFlyoutBody,null,Object(K.jsx)(o.EuiText,null,Object(K.jsx)("p",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.requestFlyout.descriptionText",defaultMessage:"This Elasticsearch request will create or update this watch."}))),Object(K.jsx)(o.EuiSpacer,null),Object(K.jsx)(o.EuiCodeBlock,{language:"json",isCopyable:!0},s)),Object(K.jsx)(o.EuiFlyoutFooter,null,Object(K.jsx)(o.EuiButtonEmpty,{iconType:"cross",onClick:n,flush:"left"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.requestFlyout.closeButtonLabel",defaultMessage:"Close"}))))}}const nt=new Re.XJsonMode,{useXJsonMode:st}=L.XJson,rt=()=>{const{links:{putWatchApiUrl:e},toasts:t}=se(),{watch:n,setWatchProperty:r}=Object(s.useContext)(Me),{convertToJson:a,setXJson:i,xJson:u}=st(n.watchString),{errors:d}=n.validate(),h=!!Object.keys(d).find((e=>d[e].length>=1)),[p,m]=Object(s.useState)(null),[g,f]=Object(s.useState)(!1),[w,b]=Object(s.useState)(null),[j,x]=Object(s.useState)(!1),y=!!p,v=l.i18n.translate("xpack.watcher.sections.watchEdit.json.form.actionValidationErrorMessage",{defaultMessage:"Invalid watch actions"}),O={...d,json:y?[...d.json,v]:[...d.json]};return 0===d.json.length&&r("watch",JSON.parse(n.watchString)),Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiForm,{isInvalid:y,error:p||[],"data-test-subj":"jsonWatchForm"},w&&Object(K.jsx)(s.Fragment,null,Object(K.jsx)(de,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.saveWatchErrorTitle",defaultMessage:"Error saving watch"}),error:w,"data-test-subj":"sectionError"}),Object(K.jsx)(o.EuiSpacer,null)),Object(K.jsx)(o.EuiFormRow,{id:"watchName",label:l.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchNameLabel",{defaultMessage:"Name (optional)"})},Object(K.jsx)(o.EuiFieldText,{id:"watchName",name:"name",value:n.name||"","data-test-subj":"nameInput",onChange:e=>{const t=e.target.value;r("name",t)},onBlur:()=>{n.name||r("name","")}})),Object(K.jsx)(oe,{id:"watchId",label:l.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchIDLabel",{defaultMessage:"ID"}),errorKey:"id",isShowingErrors:h&&void 0!==n.id,errors:d},Object(K.jsx)(o.EuiFieldText,{id:"id",name:"id","data-test-subj":"idInput",value:n.id||"",readOnly:!n.isNew,onChange:e=>{r("id",e.target.value)},onBlur:()=>{n.id||r("id","")}})),Object(K.jsx)(o.EuiSpacer,{size:"m"}),Object(K.jsx)(oe,{id:"watchJson",label:Object(K.jsx)(s.Fragment,null,l.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchJsonLabel",{defaultMessage:"Watch JSON"})," ","(",Object(K.jsx)(o.EuiLink,{href:e,target:"_blank"},l.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchJsonDocLink",{defaultMessage:"API syntax"})),")"),errorKey:"json",isShowingErrors:h||y,fullWidth:!0,errors:O},Object(K.jsx)(L.EuiCodeEditor,{mode:nt,width:"100%",theme:"textmate","data-test-subj":"jsonEditor","aria-label":l.i18n.translate("xpack.watcher.sections.watchEdit.json.form.watchJsonAriaLabel",{defaultMessage:"Code editor"}),value:u,onChange:e=>{p&&m(null),i(e),r("watchString",a(e))}})),Object(K.jsx)(o.EuiSpacer,null),Object(K.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(K.jsx)(o.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiButton,{"data-test-subj":"saveWatchButton",fill:!0,color:"secondary",type:"submit",iconType:"check",isLoading:j,isDisabled:h,onClick:async()=>{x(!0);const e=await tt(n,t);if(e&&e.error){const{data:t}=e.error;return x(!1),t&&"validation"===t.error?m(t.message):b(e.error)}}},n.isNew?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.createButtonLabel",defaultMessage:"Create watch"}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.saveButtonLabel",defaultMessage:"Save watch"}))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiButtonEmpty,{"data-test-subj":"btnCancelWatch",onClick:()=>ye()},l.i18n.translate("xpack.watcher.sections.watchEdit.json.cancelButtonLabel",{defaultMessage:"Cancel"})))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiButtonEmpty,{onClick:()=>f(!g)},g?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.hideRequestButtonLabel",defaultMessage:"Hide request"}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.showRequestButtonLabel",defaultMessage:"Show request"}))))),g?Object(K.jsx)(request_flyout_RequestFlyout,{id:n.id,payload:Le(n.name,n.watch),close:()=>f(!1)}):null)},at=({executeResults:e,executeDetails:t,onCloseFlyout:n,error:r})=>{const{watch:a}=Object(s.useContext)(Me),{actionModes:i}=t,u=(()=>{const t=a.watch&&a.watch.actions;if(e&&t){const n=e.watchStatus&&e.watchStatus.actionStatuses;return Object.keys(t).map((e=>{const s=n.find((t=>t.id===e));return{actionId:e,actionType:Ze(t[e]),actionMode:i[e],actionState:s&&s.state,actionReason:s&&s.lastExecutionReason}}))}return[]})(),d=[{field:"actionId",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.actionColumnLabel",{defaultMessage:"ID"}),sortable:!0,truncateText:!0},{field:"actionType",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.typeColumnLabel",{defaultMessage:"Type"}),truncateText:!0},{field:"actionMode",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.modeColumnLabel",{defaultMessage:"Mode"})},{field:"actionState",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.stateColumnLabel",{defaultMessage:"State"}),dataType:"string",render:(e,t)=>Object(K.jsx)(le,{status:e})},{field:"actionReason",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.table.reasonColumnLabel",{defaultMessage:"Reason"})}],h=Object(K.jsx)(o.EuiTitle,{size:"s"},Object(K.jsx)("h2",{id:"simulateResultsFlyOutTitle","data-test-subj":"simulateResultsFlyoutTitle"},l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.title",{defaultMessage:"Simulation results"})));if(r)return Object(K.jsx)(o.EuiFlyout,{onClose:()=>{n()},"aria-labelledby":"simulateResultsFlyOutTitle"},Object(K.jsx)(o.EuiFlyoutHeader,{hasBorder:!0},h),Object(K.jsx)(o.EuiFlyoutBody,null,Object(K.jsx)(de,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.simulateResults.errorTitle",defaultMessage:"Cannot simulate watch"}),error:r})));if(!e)return null;const{watchStatus:{state:p},details:m}=e;return Object(K.jsx)(o.EuiFlyout,{onClose:()=>{n()},"data-test-subj":"simulateResultsFlyout","aria-labelledby":"simulateResultsFlyOutTitle"},Object(K.jsx)(o.EuiFlyoutHeader,{hasBorder:!0},h,Object(K.jsx)(o.EuiSpacer,{size:"xs"}),Object(K.jsx)(le,{status:p,size:"m"})),Object(K.jsx)(o.EuiFlyoutBody,null,u&&u.length>0&&Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiText,null,Object(K.jsx)("h5",null,l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.actionsSectionTitle",{defaultMessage:"Actions"}))),Object(K.jsx)(o.EuiSpacer,{size:"m"}),Object(K.jsx)(o.EuiBasicTable,{columns:d,items:u}),Object(K.jsx)(o.EuiSpacer,{size:"l"})),Object(K.jsx)(o.EuiText,null,Object(K.jsx)("h5",null,l.i18n.translate("xpack.watcher.sections.watchEdit.simulateResults.simulationOutputSectionTitle",{defaultMessage:"Simulation output"}))),Object(K.jsx)(o.EuiSpacer,{size:"l"}),Object(K.jsx)(o.EuiCodeBlock,{language:"json"},JSON.stringify(m,null,2))))},it=new Re.XJsonMode,{useXJsonMode:ot}=L.XJson,ct=Object.keys(g.a).map((e=>({text:g.a[e],value:g.a[e]}))),lt=(e="0")=>Object.entries(g.l).filter((([e])=>e!==g.l.DAY)).map((([t,n])=>({text:_(n,e),value:n}))),ut=({executeWatchErrors:e,hasExecuteWatchErrors:t,executeDetails:n,setExecuteDetails:r,watchActions:a})=>{const{links:{executeWatchApiUrl:i}}=se(),{watch:u}=Object(s.useContext)(Me),[d,h]=Object(s.useState)(null),[p,m]=Object(s.useState)(!1),[f,w]=Object(s.useState)(null),{errors:b}=u.validate(),j=b.json.length>=1,{actionModes:x,scheduledTimeValue:y,scheduledTimeUnit:v,triggeredTimeValue:O,alternativeInput:E,ignoreCondition:k}=n,{setXJson:S,convertToJson:M,xJson:T}=ot(E),A=[{field:"actionId",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.idColumnLabel",{defaultMessage:"ID"}),sortable:!0,truncateText:!0},{field:"type",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.typeColumnLabel",{defaultMessage:"Type"}),truncateText:!0},{field:"actionMode",name:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.modeColumnLabel",{defaultMessage:"Mode"}),render:({},e)=>Object(K.jsx)(o.EuiSelect,{options:ct,value:x[e.actionId],"data-test-subj":"actionModesSelect",onChange:t=>{r(new execute_details_ExecuteDetails({...n,actionModes:{...x,[e.actionId]:t.target.value}}))},"aria-label":l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.table.modeSelectLabel",{defaultMessage:"Action modes"})})}];return Object(K.jsx)(s.Fragment,null,Object(K.jsx)(at,{executeResults:d,executeDetails:n,error:f,onCloseFlyout:()=>{h(null),w(null)}}),Object(K.jsx)(o.EuiText,null,Object(K.jsx)("p",null,l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.pageDescription",{defaultMessage:"Use the simulator to override the watch schedule, condition, actions, and input results."}))),Object(K.jsx)(o.EuiSpacer,{size:"l"}),Object(K.jsx)(o.EuiForm,{"data-test-subj":"jsonWatchSimulateForm"},Object(K.jsx)(o.EuiDescribedFormGroup,{fullWidth:!0,title:Object(K.jsx)("h2",null,l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.triggerOverridesTitle",{defaultMessage:"Trigger"})),description:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.triggerOverridesDescription",{defaultMessage:"Set the time and date for starting the watch."})},Object(K.jsx)(o.EuiFormRow,{label:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.scheduledTimeFieldLabel",{defaultMessage:"Schedule every"})},Object(K.jsx)(o.EuiFlexGroup,null,Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiFieldNumber,{value:null==y||""===y?y:parseInt(y,10),min:0,"data-test-subj":"scheduledTimeInput",onChange:e=>{const t=e.target.value;r(new execute_details_ExecuteDetails({...n,scheduledTimeValue:""===t?t:parseInt(t,10)}))}})),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiSelect,{value:v,options:lt(y),onChange:e=>{r(new execute_details_ExecuteDetails({...n,scheduledTimeUnit:e.target.value}))}})))),Object(K.jsx)(o.EuiFormRow,{label:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.triggeredTimeFieldLabel",{defaultMessage:"Trigger after"})},Object(K.jsx)(o.EuiFieldNumber,{value:null==O||""===O?O:parseInt(O,10),min:0,"data-test-subj":"triggeredTimeInput",append:Object(K.jsx)(o.EuiText,{size:"s"},_(g.l.SECOND,O)),onChange:e=>{const t=e.target.value;r(new execute_details_ExecuteDetails({...n,triggeredTimeValue:""===t?t:parseInt(t,10),triggeredTimeUnit:g.l.SECOND}))}}))),Object(K.jsx)(o.EuiDescribedFormGroup,{fullWidth:!0,title:Object(K.jsx)("h2",null,l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.conditionOverridesTitle",{defaultMessage:"Condition"})),description:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.conditionOverridesDescription",{defaultMessage:"Execute the watch when the condition is met. Otherwise, ignore the condition and run the watch on a fixed schedule."})},Object(K.jsx)(o.EuiSwitch,{label:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.ignoreConditionFieldLabel",{defaultMessage:"Ignore condition"}),checked:k,"data-test-subj":"ignoreConditionSwitch",onChange:e=>{r(new execute_details_ExecuteDetails({...n,ignoreCondition:e.target.checked}))}})),Object(K.jsx)(o.EuiDescribedFormGroup,{fullWidth:!0,title:Object(K.jsx)("h2",null,l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.actionOverridesTitle",{defaultMessage:"Actions"})),description:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.simulate.form.actionOverridesDescription",defaultMessage:"Allow the watch to execute or skip actions. {actionsLink}",values:{actionsLink:Object(K.jsx)(o.EuiLink,{href:i,target:"_blank"},l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.actionOverridesDescription.linkLabel",{defaultMessage:"Learn about actions."}))}})},Object(K.jsx)(o.EuiFormRow,{label:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.actionModesFieldLabel",{defaultMessage:"Action modes"}),fullWidth:!0},Object(K.jsx)(o.EuiBasicTable,{items:a,itemId:"simulateExecutionActionModesTable",columns:A}))),Object(K.jsx)(o.EuiDescribedFormGroup,{fullWidth:!0,title:Object(K.jsx)("h2",null,l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.inputOverridesTitle",{defaultMessage:"Input"})),description:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.inputOverridesDescription",{defaultMessage:"Enter JSON data to override the watch payload that comes from running the input."})},Object(K.jsx)(oe,{id:"executeWatchJson",label:l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.alternativeInputFieldLabel",{defaultMessage:"Alternative input"}),errorKey:"json",isShowingErrors:t,fullWidth:!0,errors:e},Object(K.jsx)(L.EuiCodeEditor,{mode:it,width:"100%",height:"200px",theme:"textmate","aria-label":l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.alternativeInputAriaLabel",{defaultMessage:"Code editor"}),value:T,onChange:e=>{S(e),r(new execute_details_ExecuteDetails({...n,alternativeInput:M(e)}))}}))),Object(K.jsx)(o.EuiButton,{iconType:"play","data-test-subj":"simulateWatchButton",fill:!0,type:"submit",isLoading:p,isDisabled:t||j,onClick:async()=>{m(!0);const{data:e,error:t}=await U(n,u);if(m(!1),t)return w(t);const s=watch_history_item_WatchHistoryItem.fromUpstreamJson(e.watchHistoryItem);h(s)}},l.i18n.translate("xpack.watcher.sections.watchEdit.simulate.form.saveButtonLabel",{defaultMessage:"Simulate watch"}))))},dt="watchEditTab",ht="watchSimulateTab",pt=[{id:dt,name:l.i18n.translate("xpack.watcher.sections.watchEdit.json.editTabLabel",{defaultMessage:"Edit"})},{id:ht,name:l.i18n.translate("xpack.watcher.sections.watchEdit.json.simulateTabLabel",{defaultMessage:"Simulate"})}],mt={triggeredTimeValue:0,triggeredTimeUnit:g.l.SECOND,scheduledTimeValue:0,scheduledTimeUnit:g.l.SECOND,ignoreCondition:!1};function gt(e){return e.reduce(((e,t)=>(t.actionId&&(e[t&&t.actionId]=t.actionMode),e)),{})}const ft=({pageTitle:e})=>{const{watch:t}=Object(s.useContext)(Me),n=function(e){const t=e.watch&&e.watch.actions||{};return Object.keys(t).map((e=>({actionId:e,type:Ae(t[e]),actionMode:g.a.SIMULATE})))}(t),[r,a]=Object(s.useState)(dt),[i,c]=Object(s.useState)(new execute_details_ExecuteDetails({...mt,actionModes:gt(n)})),l=i.validate(),u=!!Object.keys(l).find((e=>l[e].length>=1));return Object(K.jsx)(o.EuiPageContentBody,{restrictWidth:!0,style:{width:"100%"}},Object(K.jsx)(o.EuiPageHeader,{pageTitle:Object(K.jsx)("span",{"data-test-subj":"pageTitle"},e),bottomBorder:!0,tabs:pt.map(((e,t)=>({onClick:()=>{a(e.id),c(new execute_details_ExecuteDetails({...i,actionModes:gt(n)}))},isSelected:e.id===r,key:t,"data-test-subj":"tab",label:e.name})))}),Object(K.jsx)(o.EuiSpacer,{size:"l"}),r===ht&&Object(K.jsx)(ut,{executeDetails:i,setExecuteDetails:e=>c(e),executeWatchErrors:l,hasExecuteWatchErrors:u,watchActions:n}),r===dt&&Object(K.jsx)(rt,null))};var wt=n(32),bt=n(38),jt=n.n(bt),xt=n(33),yt=n.n(xt);class VisualizeOptions{constructor(e={}){this.rangeFrom=e.rangeFrom,this.rangeTo=e.rangeTo,this.interval=e.interval,this.timezone=e.timezone}get upstreamJson(){return{rangeFrom:this.rangeFrom,rangeTo:this.rangeTo,interval:this.interval,timezone:this.timezone}}}const vt=e=>{const t="dateFormat:tz";if(!e.isDefault(t))return e.get(t);const n=yt.a.tz.guess();return n||yt()().format("Z")},Ot=e=>{const t=`now-${5*e.timeWindowSize}${e.timeWindowUnit}`,n=jt.a.parse(t),s=jt.a.parse("now");return{min:n?n.valueOf():0,max:s?s.valueOf():0}},Et=()=>{const{createTimeBuckets:e,theme:t,uiSettings:n}=se(),{watch:r}=Object(s.useContext)(Me),a=t.useChartsTheme(),{index:i,timeField:l,triggerIntervalSize:u,triggerIntervalUnit:d,aggType:h,aggField:p,termSize:m,termField:g,thresholdComparator:f,timeWindowSize:w,timeWindowUnit:b,groupBy:j,threshold:x}=r,y=Object(s.useMemo)((()=>Ot(r)),[r]),v=e();v.setBounds(y);const O=v.getInterval().expression,E=new VisualizeOptions({rangeFrom:y.min,rangeTo:y.max,interval:O,timezone:vt(n)}),_=new threshold_watch_ThresholdWatch({...r,actions:[]}),{isInitialRequest:S,isLoading:T,data:A,error:R,resendRequest:L}=((e,t)=>P({path:`${J}/watch/visualize`,method:"post",body:JSON.stringify({watch:e.upstreamJson,options:t.upstreamJson}),deserializer:V}))(_,E);if(Object(s.useEffect)((()=>{S||L()}),[i,l,u,d,h,p,m,g,f,w,b,j,x]),S&&T)return Object(K.jsx)(o.EuiEmptyPrompt,{title:Object(K.jsx)(o.EuiLoadingChart,{size:"xl"}),body:Object(K.jsx)(o.EuiText,{color:"subdued"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.loadingWatchVisualizationDescription",defaultMessage:"Loading watch visualization…"}))});if(R)return Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiSpacer,{size:"l"}),Object(K.jsx)(de,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.errorLoadingWatchVisualizationTitle",defaultMessage:"Cannot load watch visualization"}),error:R}),Object(K.jsx)(o.EuiSpacer,{size:"l"}));if(A){const t=Object.keys(A),s=vt(n),i=(e=>e.threshold.slice(0,M[e.thresholdComparator].requiredValues))(r);let l=i[i.length-1];Object.values(A).forEach((e=>{e.forEach((([,e])=>{e>l&&(l=e)}))}));const u=t=>yt()(t).tz(s).format(((e,t)=>{const n=Ot(e);return t.setBounds(n),t})(r,e()).getScaledDateFormat()),d=k[r.aggType].text;return Object(K.jsx)("div",{"data-test-subj":"watchVisualizationChart"},Object(K.jsx)(o.EuiSpacer,{size:"l"}),t.length?Object(K.jsx)(wt.Chart,{size:["100%",300],renderer:"canvas"},Object(K.jsx)(wt.Settings,{theme:[{lineSeriesStyle:{line:{strokeWidth:3},point:{visible:!1}}},a],xDomain:y,showLegend:!!r.termField,showLegendExtra:!0,legendPosition:wt.Position.Bottom}),Object(K.jsx)(wt.Axis,{id:"bottom",position:wt.Position.Bottom,showOverlappingTicks:!0,tickFormat:u}),Object(K.jsx)(wt.Axis,{domain:{max:l,min:NaN},id:"left",title:d,position:wt.Position.Left}),t.map((e=>Object(K.jsx)(wt.LineSeries,{key:e,id:e,xScaleType:wt.ScaleType.Time,yScaleType:wt.ScaleType.Linear,data:A[e],xAccessor:0,yAccessors:[1],timeZone:s}))),i.map(((e,t)=>{const n=0===t?"threshold":`threshold${t}`;return Object(K.jsx)(wt.LineAnnotation,{key:n,id:n,domainType:wt.AnnotationDomainType.YDomain,dataValues:[{dataValue:r.threshold[t],details:n}]})}))):Object(K.jsx)(o.EuiCallOut,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.thresholdPreviewChart.noDataTitle",defaultMessage:"No data"}),color:"warning"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.thresholdPreviewChart.dataDoesNotExistTextMessage",defaultMessage:"Your index and condition did not return any data."})),Object(K.jsx)(o.EuiSpacer,{size:"l"}))}return null},_t=l.i18n.translate("xpack.watcher.sections.watchEdit.actions.disabledOptionLabel",{defaultMessage:"Disabled. Configure your elasticsearch.yml."}),kt=({settings:e,isLoading:t})=>{const{addAction:n}=Object(s.useContext)(Me),[r,a]=Object(s.useState)(!1),i=action_Action.getActionTypes(),l=Object.entries(i).map((([t,{typeName:n,iconClass:s,selectMessage:r}])=>({type:t,typeName:n,iconClass:s,selectMessage:r,isEnabled:!(e&&e.actionTypes&&e.actionTypes[t]&&void 0!==e.actionTypes[t].enabled)||e.actionTypes[t].enabled}))),u=Object(K.jsx)(o.EuiButton,{"data-test-subj":"addWatchActionButton",iconType:"arrowDown",iconSide:"right",onClick:()=>a(!r)},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.actions.addActionButtonLabel",defaultMessage:"Add action"}));return Object(K.jsx)(o.EuiPopover,{id:"watchActionPanel",button:u,isOpen:r,closePopover:()=>a(!1),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(K.jsx)(o.EuiContextMenuPanel,{items:l.map(((e,t)=>{const s=e.type===g.c.EMAIL&&!e.isEnabled,r=s?_t:e.selectMessage;return Object(K.jsx)(o.EuiContextMenuItem,{key:`${e.type}-${t}`,disabled:s,"data-test-subj":`${e.type}ActionButton`,onClick:()=>{n({type:e.type,defaults:{isNew:!0}}),a(!1)}},Object(K.jsx)(o.EuiFlexGroup,{responsive:!1},Object(K.jsx)(o.EuiFlexItem,{grow:!1,className:"watcherThresholdWatchActionContextMenuItem"},Object(K.jsx)(o.EuiIcon,{type:e.iconClass})),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)("strong",null,e.typeName),Object(K.jsx)(o.EuiSpacer,{size:"xs"}),Object(K.jsx)(o.EuiText,{size:"s"},Object(K.jsx)("p",null,r)))))}))}))},St=["head","get","post","put","delete"],Mt=["http","https"],Tt={[g.c.LOGGING]:({action:e,editAction:t,errors:n,hasErrors:s})=>{const{text:r}=e;return Object(K.jsx)(oe,{id:"loggingText",errorKey:"text",fullWidth:!0,errors:n,isShowingErrors:s&&void 0!==r,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.loggingAction.logTextFieldLabel",{defaultMessage:"Log text"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,name:"text",value:r||"","data-test-subj":"loggingTextInput",onChange:e=>{t({key:"text",value:e.target.value})},onBlur:()=>{r||t({key:"text",value:""})}}))},[g.c.SLACK]:({action:e,editAction:t,children:n})=>{const{text:r,to:a}=e,i=a?a.map((e=>({label:e}))):[];return Object(K.jsx)(s.Fragment,null,n,Object(K.jsx)(o.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.slackAction.recipientTextFieldLabel",{defaultMessage:"Recipient (optional)"})},Object(K.jsx)(o.EuiComboBox,{noSuggestions:!0,fullWidth:!0,selectedOptions:i,"data-test-subj":"slackRecipientComboBox",onCreateOption:e=>{const n=[...i,{label:e}];t({key:"to",value:n.map((e=>e.label))})},onChange:e=>{t({key:"to",value:e.map((e=>e.label))})}})),Object(K.jsx)(o.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.slackAction.messageTextAreaFieldLabel",{defaultMessage:"Message (optional)"})},Object(K.jsx)(o.EuiTextArea,{fullWidth:!0,name:"text",value:r,"data-test-subj":"slackMessageTextarea",onChange:e=>{t({key:"text",value:e.target.value})}})))},[g.c.EMAIL]:({action:e,editAction:t,errors:n,hasErrors:r})=>{const{to:a,subject:i,body:c}=e,u=a?a.map((e=>({label:e}))):[];return Object(K.jsx)(s.Fragment,null,Object(K.jsx)(oe,{id:"emailRecipient",errorKey:"to",fullWidth:!0,errors:n,isShowingErrors:r&&null!==a,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.emailAction.recipientTextFieldLabel",{defaultMessage:"To email address"})},Object(K.jsx)(o.EuiComboBox,{noSuggestions:!0,fullWidth:!0,"data-test-subj":"toEmailAddressInput",selectedOptions:u,onCreateOption:e=>{const n=[...u,{label:e}];t({key:"to",value:n.map((e=>e.label))})},onChange:e=>{t({key:"to",value:e.map((e=>e.label))})},onBlur:()=>{a||t({key:"to",value:[]})}})),Object(K.jsx)(o.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.emailAction.subjectTextFieldLabel",{defaultMessage:"Subject (optional)"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,name:"subject","data-test-subj":"emailSubjectInput",value:i||"",onChange:e=>{t({key:"subject",value:e.target.value})}})),Object(K.jsx)(o.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.emailAction.bodyTextAreaFieldLabel",{defaultMessage:"Body"})},Object(K.jsx)(o.EuiTextArea,{fullWidth:!0,value:c||"",name:"body","data-test-subj":"emailBodyInput",onChange:e=>{t({key:"body",value:e.target.value})}})))},[g.c.INDEX]:({action:e,editAction:t,errors:n,hasErrors:s})=>{const{index:r}=e;return Object(K.jsx)(oe,{id:"indexName",errorKey:"index",fullWidth:!0,errors:n,isShowingErrors:s&&void 0!==r,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.indexAction.indexFieldLabel",{defaultMessage:"Index"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,name:"index","data-test-subj":"indexInput",value:r||"",onChange:e=>{t({key:"index",value:e.target.value})},onBlur:()=>{r||t({key:"index",value:""})}}))},[g.c.WEBHOOK]:({action:e,editAction:t,errors:n,hasErrors:r})=>{const{method:a,host:i,port:c,scheme:u,path:d,body:h,username:p,password:m}=e;return Object(s.useEffect)((()=>{t({key:"contentType",value:"application/json"})}),[t]),Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiFormRow,{label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.methodFieldLabel",{defaultMessage:"Method"})},Object(K.jsx)(o.EuiSelect,{name:"method",value:a||"get","data-test-subj":"webhookMethodSelect",options:St.map((e=>({text:e.toUpperCase(),value:e}))),onChange:e=>{t({key:"method",value:e.target.value})}}))),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiFormRow,{label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.schemeFieldLabel",{defaultMessage:"Scheme"})},Object(K.jsx)(o.EuiSelect,{name:"scheme",value:u,"data-test-subj":"webhookSchemeSelect",options:Mt.map((e=>({text:e,value:e}))),onChange:e=>{t({key:"scheme",value:e.target.value})}}))),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(oe,{id:"webhookHost",errorKey:"host",fullWidth:!0,errors:n,isShowingErrors:r&&void 0!==i,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.hostFieldLabel",{defaultMessage:"Host"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,name:"host",value:i||"","data-test-subj":"webhookHostInput",onChange:e=>{t({key:"host",value:e.target.value})},onBlur:()=>{i||t({key:"host",value:""})}}))),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(oe,{id:"webhookPort",errorKey:"port",fullWidth:!0,errors:n,isShowingErrors:r&&void 0!==c,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.methodPortLabel",{defaultMessage:"Port"})},Object(K.jsx)(o.EuiFieldNumber,{prepend:":",fullWidth:!0,name:"port",value:c||"","data-test-subj":"webhookPortInput",onChange:e=>{t({key:"port",value:parseInt(e.target.value,10)})},onBlur:()=>{c||t({key:"port",value:""})}}))),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.pathFieldLabel",{defaultMessage:"Path (optional)"})},Object(K.jsx)(o.EuiFieldText,{prepend:"/",fullWidth:!0,name:"path",value:d||"","data-test-subj":"webhookPathInput",onChange:e=>{t({key:"path",value:e.target.value})}})))),Object(K.jsx)(o.EuiFlexGroup,null,Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(oe,{id:"webhookBasicAuthUsername",errorKey:"username",isShowingErrors:r,errors:n,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.basicAuthUsername",{defaultMessage:"Username (optional)"})},Object(K.jsx)(o.EuiFieldText,{name:"username",value:p||"","data-test-subj":"webhookUsernameInput",onChange:e=>{t({key:"username",value:e.target.value})}}))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(oe,{id:"webhookBasicAuthPassword",errorKey:"password",isShowingErrors:r,errors:n,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.basicAuthPassword",{defaultMessage:"Password (optional)"})},Object(K.jsx)(o.EuiFieldPassword,{name:"password",value:m||"","data-test-subj":"webhookPasswordInput",onChange:e=>{t({key:"password",value:e.target.value})}})))),Object(K.jsx)(o.EuiSpacer,{size:"s"}),Object(K.jsx)(oe,{id:"webhookBody",label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.bodyFieldLabel",{defaultMessage:"Body"}),errorKey:"body",isShowingErrors:r,fullWidth:!0,errors:n},Object(K.jsx)(L.EuiCodeEditor,{mode:"json",width:"100%",height:"200px",theme:"textmate","data-test-subj":"webhookBodyEditor","aria-label":l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.webhookAction.bodyCodeEditorAriaLabel",{defaultMessage:"Code editor"}),value:h||"",onChange:e=>{t({key:"body",value:e})}})))},[g.c.PAGERDUTY]:({errors:e,hasErrors:t,action:n,editAction:r,children:a})=>{const{description:i}=n;return Object(K.jsx)(s.Fragment,null,a,Object(K.jsx)(oe,{id:"pagerDutyDescription",errorKey:"description",fullWidth:!0,errors:e,isShowingErrors:t&&void 0!==i,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.pagerDutyAction.descriptionFieldLabel",{defaultMessage:"Description"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,name:"description",value:i||"","data-test-subj":"pagerdutyDescriptionInput",onChange:e=>{r({key:"description",value:e.target.value})},onBlur:()=>{i||r({key:"description",value:""})}})))},[g.c.JIRA]:({action:e,editAction:t,errors:n,hasErrors:r,children:a})=>{const{projectKey:i,issueType:c,summary:u}=e;return Object(K.jsx)(s.Fragment,null,a,Object(K.jsx)(oe,{id:"jiraProjectKey",errorKey:"projectKey",fullWidth:!0,errors:n,isShowingErrors:r&&void 0!==i,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.jiraAction.projectKeyFieldLabel",{defaultMessage:"Project key"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,name:"projectKey",value:i||"","data-test-subj":"jiraProjectKeyInput",onChange:e=>{t({key:"projectKey",value:e.target.value})},onBlur:()=>{i||t({key:"projectKey",value:""})}})),Object(K.jsx)(oe,{id:"jiraIssueType",errorKey:"issueType",fullWidth:!0,errors:n,isShowingErrors:r&&void 0!==c,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.jiraAction.issueTypeFieldLabel",{defaultMessage:"Issue type"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,value:c||"",name:"issueType","data-test-subj":"jiraIssueTypeInput",onChange:e=>{t({key:"issueType",value:e.target.value})},onBlur:()=>{c||t({key:"issueType",value:""})}})),Object(K.jsx)(oe,{id:"jiraSummary",errorKey:"summary",fullWidth:!0,errors:n,isShowingErrors:r&&void 0!==u,label:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.jiraAction.summaryFieldLabel",{defaultMessage:"Summary"})},Object(K.jsx)(o.EuiFieldText,{fullWidth:!0,value:u||"",name:"summary","data-test-subj":"jiraSummaryInput",onChange:e=>{t({key:"summary",value:e.target.value})},onBlur:()=>{u||t({key:"summary",value:""})}})))}},At=({settings:e,actionErrors:t})=>{const{links:{watchActionsConfigurationMap:n},toasts:r}=se(),{watch:a,setWatchProperty:i}=Object(s.useContext)(Me),{actions:u}=a,[d,h]=Object(s.useState)({}),[p,m]=Object(s.useState)(null);return u&&u.length>=1?u.map((f=>{const w=Tt[f.type],b=t[f.id],j=!!Object.keys(b).find((e=>b[e].length>=1));return Object(K.jsx)(o.EuiAccordion,{initialIsOpen:f.isNew||j,key:f.id,id:f.id,className:"euiAccordionForm",buttonContentClassName:"euiAccordionForm__button","data-test-subj":"watchActionAccordion",buttonContent:Object(K.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiIcon,{type:f.iconClass,size:"m"})),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiTitle,{size:"s",className:"euiAccordionForm__title"},Object(K.jsx)("h6",null,f.typeName)))),extraAction:Object(K.jsx)(o.EuiButtonIcon,{iconType:"cross",color:"danger",className:"euiAccordionForm__extraAction","aria-label":l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:()=>{const e=u.filter((e=>e.id!==f.id));i("actions",e)}}),paddingSize:"l"},p&&p[f.id]&&Object(K.jsx)(s.Fragment,null,Object(K.jsx)(de,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.accordion.simulateResultsErrorTitle",defaultMessage:"Error testing action"}),error:p[f.id]}),Object(K.jsx)(o.EuiSpacer,{size:"s"})),Object(K.jsx)(o.EuiForm,null,Object(K.jsx)(w,{action:f,errors:b,hasErrors:j,editAction:e=>{const t=u.map((t=>{if(t.id===f.id){const t=action_Action.getActionTypes()[f.type],{key:n,value:s}=e;return new t({...f,[n]:s})}return t}));i("actions",t)}},e&&!1===e.actionTypes[f.type].enabled?Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiCallOut,{title:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.actions.actionConfigurationWarningTitleText",{defaultMessage:"Account may not be configured"}),color:"warning",iconType:"help"},Object(K.jsx)(o.EuiText,null,Object(K.jsx)("p",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.actions.actionConfigurationWarningDescriptionText",defaultMessage:"To create this action, you must configure at least one {accountType} account. {docLink}",values:{accountType:f.typeName,docLink:Object(K.jsx)(o.EuiLink,{href:n[f.type],target:"_blank"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.actions.actionConfigurationWarningHelpLinkText",defaultMessage:"Learn more."}))}})))),Object(K.jsx)(o.EuiSpacer,null)):null),Object(K.jsx)(o.EuiButton,{type:"submit",isDisabled:j,isLoading:d[f.id],"data-test-subj":"simulateActionButton",onClick:async()=>{const e=a.actions.filter((e=>e.id===f.id)),t=new execute_details_ExecuteDetails({ignoreCondition:!0,recordExecution:!1,actionModes:{[f.id]:g.a.FORCE_EXECUTE}}),n=new threshold_watch_ThresholdWatch({...a,actions:e});h({[f.id]:!0}),m(null);const{data:s,error:i}=await U(t,n);if(h({[f.id]:!1}),i)return m({[f.id]:i});const o=watch_history_item_WatchHistoryItem.fromUpstreamJson(s.watchHistoryItem).watchStatus.actionStatuses.find((e=>e.id===f.id));if(o&&!1===o.lastExecutionSuccessful){const e=o.lastExecutionReason||f.simulateFailMessage;return r.addDanger(e)}return r.addSuccess(f.simulateMessage)}},f.simulatePrompt)))})):null},Rt=({actionErrors:e})=>{const{watch:t}=Object(s.useContext)(Me),{data:n,isLoading:r}=P({path:`${J}/settings`,method:"get",deserializer:G});return Object(K.jsx)("div",{"data-test-subj":"watchActionsPanel"},Object(K.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiTitle,{size:"s"},Object(K.jsx)("h2",null,l.i18n.translate("xpack.watcher.sections.watchEdit.actions.title",{defaultMessage:"Perform {watchActionsCount, plural, one{# action} other {# actions}} when condition is met",values:{watchActionsCount:t.actions.length}})))),Object(K.jsx)(o.EuiFlexItem,{className:"watcherThresholdWatchActionDropdownContainer"},Object(K.jsx)(kt,{settings:n,isLoading:r}))),Object(K.jsx)(o.EuiSpacer,{size:"l"}),Object(K.jsx)(At,{settings:n,actionErrors:e}))},Lt=["aggField","termSize","termField","threshold0","threshold1","timeWindowSize"],It=["aggType","aggField","termSize","termField","thresholdComparator","timeWindowSize","timeWindowUnit","triggerIntervalSize","triggerIntervalUnit","threshold","groupBy"],Pt=l.i18n.translate("xpack.watcher.thresholdWatchExpression.fixErrorInExpressionBelowValidationMessage",{defaultMessage:"Expression contains errors."}),Ft={text:l.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.timeFieldOptionLabel",{defaultMessage:"Select a field"}),value:""},Ct=e=>Object.entries(g.l).map((([t,n])=>({text:_(n,e),value:n}))),Nt=async e=>await(async e=>{const{fields:t}=await C().post(`${J}/fields`,{body:JSON.stringify({indexes:e})});return t})(e),Jt=e=>{const t=[Ft];return e.forEach((e=>{"date"===e.type&&t.push({text:e.name,value:e.name})})),t},Dt=async(e,t)=>{const n=[];if(!e)return n;const s=await(async e=>{e.startsWith("*")||(e=`*${e}`),e.endsWith("*")||(e=`${e}*`);const t=JSON.stringify({pattern:e}),{indices:n}=await C().post(`${J}/indices`,{body:t});return n})(e),r=t.filter((t=>t.includes(e)));if(s.length||r.length){const e=m.a.uniq([...s,...r]);n.push({label:l.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.indicesAndIndexPatternsLabel",{defaultMessage:"Based on your indices and index patterns"}),options:e.map((e=>({label:e,value:e}))).sort(((e,t)=>String(e.label).localeCompare(t.label)))})}return n.push({label:l.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.chooseLabel",{defaultMessage:"Choose…"}),options:[{key:"UNIQUE_CHOOSE_KEY",value:e,label:e}]}),n},Wt=({pageTitle:e})=>{const{toasts:t}=se(),[n,r]=Object(s.useState)([]),[a,i]=Object(s.useState)([]),[u,d]=Object(s.useState)([]),[h,p]=Object(s.useState)([Ft]),[m,g]=Object(s.useState)(!1),[f,w]=Object(s.useState)(!1),[b,j]=Object(s.useState)(!1),[x,y]=Object(s.useState)(!1),[v,O]=Object(s.useState)(!1),[E,T]=Object(s.useState)(null),[A,R]=Object(s.useState)(!1),[L,I]=Object(s.useState)(!1),[P,F]=Object(s.useState)(!1),{watch:C,setWatchProperty:N}=Object(s.useContext)(Me);Object(s.useEffect)((()=>{(async()=>{if(C.index&&C.index.length>0){const e=await Nt(C.index),t=Jt(e);i(e),p(t),N("timeFields",t)}(async()=>{const e=(await $()).map((e=>e.attributes.title));r(e)})()})()}),[]);const{errors:J}=C.validate(),D=!!Object.keys(J).find((e=>J[e].length>=1)),W=C.actions.reduce(((e,t)=>{const n=t.validate();return e[t.id]=n,e}),{}),B=!!Object.keys(W).find((e=>!!Object.keys(W[e]).find((t=>W[e][t].length>=1)))),q=!!Object.keys(J).find((e=>Lt.includes(e)&&J[e].length>=1)),z=C.index&&C.index.length>0&&C.timeField,H=l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.andLabel",{defaultMessage:"AND"}),U={...C.upstreamJson,includeMetadata:!1};return Object(K.jsx)(o.EuiPageContentBody,{restrictWidth:!0,style:{width:"100%"}},Object(K.jsx)(o.EuiPageHeader,{pageTitle:Object(K.jsx)("span",{"data-test-subj":"pageTitle"},e),description:C.titleDescription,bottomBorder:!0}),Object(K.jsx)(o.EuiSpacer,{size:"l"}),Object(K.jsx)(o.EuiForm,{"data-test-subj":"thresholdWatchForm"},E&&Object(K.jsx)(s.Fragment,null,Object(K.jsx)(de,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.saveWatchErrorTitle",defaultMessage:"Error saving watch"}),error:E}),Object(K.jsx)(o.EuiSpacer,null)),Object(K.jsx)(oe,{id:"watchName",label:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.watchNameLabel",defaultMessage:"Name"}),errorKey:"name",isShowingErrors:D&&void 0!==C.name,errors:J},Object(K.jsx)(o.EuiFieldText,{name:"name","data-test-subj":"nameInput",value:C.name||"",onChange:e=>{N("name",e.target.value)},onBlur:()=>{C.name||N("name","")}})),Object(K.jsx)(o.EuiSpacer,null),Object(K.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(oe,{id:"indexSelectSearchBox",fullWidth:!0,label:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.indicesToQueryLabel",defaultMessage:"Indices to query"}),errorKey:"index",isShowingErrors:D&&void 0!==C.index,errors:J,helpText:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.howToBroadenSearchQueryDescription",defaultMessage:"Use * to broaden your query."})},Object(K.jsx)(o.EuiComboBox,{fullWidth:!0,async:!0,isLoading:L,noSuggestions:!u.length,options:u,"data-test-subj":"indicesComboBox",selectedOptions:(C.index||[]).map((e=>({label:e,value:e}))),onChange:async e=>{N("index",e.map((e=>e.value)));const t=e.map((e=>e.value));if(0===t.length)return p(Jt([])),N("timeFields",[]),void It.forEach((e=>{N(e,null)}));const n=await Nt(t),s=Jt(n);i(n),N("timeFields",s),p(s)},onSearchChange:async e=>{I(!0),d(await Dt(e,n)),I(!1)},onBlur:()=>{C.index||N("index",[])}}))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(oe,{id:"timeField",fullWidth:!0,label:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.timeFieldLabel",defaultMessage:"Time field"}),errorKey:"timeField",isShowingErrors:D&&void 0!==C.timeField,errors:J},Object(K.jsx)(o.EuiSelect,{options:h,fullWidth:!0,name:"watchTimeField","data-test-subj":"watchTimeFieldSelect",value:C.timeField,onChange:e=>{N("timeField",e.target.value)},onBlur:()=>{void 0===C.timeField&&N("timeField","")}}))),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(oe,{id:"watchInterval",fullWidth:!0,label:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.titlePanel.watchIntervalLabel",defaultMessage:"Run watch every"}),errorKey:"triggerIntervalSize",isShowingErrors:D&&void 0!==C.triggerIntervalSize,errors:J},Object(K.jsx)(o.EuiFlexGroup,null,Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiFieldNumber,{fullWidth:!0,min:1,value:C.triggerIntervalSize,"data-test-subj":"triggerIntervalSizeInput",onChange:e=>{const{value:t}=e.target,n=""!==t?parseInt(t,10):t;N("triggerIntervalSize",n)},onBlur:e=>{void 0===C.triggerIntervalSize&&N("triggerIntervalSize","")}})),Object(K.jsx)(o.EuiFlexItem,null,Object(K.jsx)(o.EuiSelect,{fullWidth:!0,value:C.triggerIntervalUnit,"aria-label":l.i18n.translate("xpack.watcher.sections.watchEdit.titlePanel.durationAriaLabel",{defaultMessage:"Duration time unit"}),onChange:e=>{N("triggerIntervalUnit",e.target.value)},options:Ct(C.triggerIntervalSize)})))))),Object(K.jsx)(o.EuiSpacer,null),z?Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiTitle,{size:"s"},Object(K.jsx)("h2",{"data-test-subj":"watchConditionTitle"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.watchConditionSectionTitle",defaultMessage:"Match the following condition"}))),Object(K.jsx)(o.EuiSpacer,{size:"m"}),Object(K.jsx)(o.EuiFlexGroup,{gutterSize:"s"},Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiPopover,{id:"aggTypePopover",button:Object(K.jsx)(o.EuiExpression,{description:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.whenLabel",{defaultMessage:"when"}),value:k[C.aggType].text,isActive:v,onClick:()=>{O(!0)}}),isOpen:v,closePopover:()=>{O(!1)},ownFocus:!0,anchorPosition:"downLeft"},Object(K.jsx)("div",null,Object(K.jsx)(o.EuiPopoverTitle,null,l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.whenButtonLabel",{defaultMessage:"when"})),Object(K.jsx)(o.EuiSelect,{value:C.aggType,onChange:e=>{N("aggType",e.target.value),O(!1)},options:Object.values(k).map((({text:e,value:t})=>({text:e,value:t})))})))),C.aggType&&k[C.aggType].fieldRequired?Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiPopover,{id:"aggFieldPopover",button:Object(K.jsx)(o.EuiExpression,{description:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.ofLabel",{defaultMessage:"of"}),value:C.aggField||Ft.text,isActive:m||!C.aggField,onClick:()=>{g(!0)},color:C.aggField?"secondary":"danger"}),isOpen:m,closePopover:()=>{g(!1)},anchorPosition:"downLeft"},Object(K.jsx)("div",null,Object(K.jsx)(o.EuiPopoverTitle,null,l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.ofButtonLabel",{defaultMessage:"of"})),Object(K.jsx)(o.EuiFlexGroup,null,Object(K.jsx)(o.EuiFlexItem,{grow:!1,className:"watcherThresholdAlertAggFieldContainer"},Object(K.jsx)(oe,{errorKey:"aggField",isShowingErrors:D&&void 0!==C.aggField,errors:J},Object(K.jsx)(o.EuiComboBox,{singleSelection:{asPlainText:!0},placeholder:Ft.text,options:a.reduce(((e,t)=>(k[C.aggType].validNormalizedTypes.includes(t.normalizedType)&&e.push({label:t.name}),e)),[]),selectedOptions:C.aggField?[{label:C.aggField}]:[],onChange:e=>{N("aggField",1===e.length?e[0].label:void 0),g(!1)}}))))))):null,Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiPopover,{id:"groupByPopover",button:Object(K.jsx)(o.EuiExpression,{description:`${S[C.groupBy].sizeRequired?l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.groupedOverLabel",{defaultMessage:"grouped over"}):l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.overLabel",{defaultMessage:"over"})}`,value:`${S[C.groupBy].text} ${S[C.groupBy].sizeRequired?`${C.termSize||""} ${C.termField?`'${C.termField}'`:""}`:""}`,isActive:f||"top"===C.groupBy&&!(C.termSize&&C.termField),onClick:()=>{w(!0)},color:"all"===C.groupBy||C.termSize&&C.termField?"secondary":"danger"}),isOpen:f,closePopover:()=>{w(!1)},ownFocus:!0,anchorPosition:"downLeft"},Object(K.jsx)("div",null,Object(K.jsx)(o.EuiPopoverTitle,null,l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.overButtonLabel",{defaultMessage:"over"})),Object(K.jsx)(o.EuiFlexGroup,null,Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiSelect,{value:C.groupBy,onChange:e=>{N("termSize",null),N("termField",null),N("groupBy",e.target.value)},options:Object.values(S).map((({text:e,value:t})=>({text:e,value:t})))})),S[C.groupBy].sizeRequired?Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(oe,{errorKey:"termSize",isShowingErrors:D,errors:J},Object(K.jsx)(o.EuiFieldNumber,{value:C.termSize,onChange:e=>{N("termSize",e.target.value)},min:1}))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(oe,{errorKey:"termField",isShowingErrors:D&&void 0!==C.termField,errors:J},Object(K.jsx)(o.EuiSelect,{value:C.termField||"",onChange:e=>{N("termField",e.target.value)},options:a.reduce(((e,t)=>(S[C.groupBy].validNormalizedTypes.includes(t.normalizedType)&&e.push({text:t.name,value:t.name}),e)),[Ft])})))):null)))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiPopover,{id:"watchThresholdPopover",button:Object(K.jsx)(o.EuiExpression,{"data-test-subj":"watchThresholdButton",description:M[C.thresholdComparator].text,value:C.threshold.slice(0,M[C.thresholdComparator].requiredValues).join(` ${H} `),isActive:Boolean(b||J.threshold0.length||J.threshold1&&J.threshold1.length),onClick:()=>{j(!0)},color:J.threshold0.length||J.threshold1&&J.threshold1.length?"danger":"secondary"}),isOpen:b,closePopover:()=>{j(!1)},ownFocus:!0,anchorPosition:"downLeft"},Object(K.jsx)("div",null,Object(K.jsx)(o.EuiPopoverTitle,null,M[C.thresholdComparator].text),Object(K.jsx)(o.EuiFlexGroup,null,Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiSelect,{value:C.thresholdComparator,onChange:e=>{N("thresholdComparator",e.target.value)},options:Object.values(M).map((({text:e,value:t})=>({text:e,value:t})))})),Array.from(Array(M[C.thresholdComparator].requiredValues)).map(((e,t)=>Object(K.jsx)(s.Fragment,{key:`threshold${t}`},t>0?Object(K.jsx)(o.EuiFlexItem,{grow:!1,className:"watcherThresholdWatchInBetweenComparatorText"},Object(K.jsx)(o.EuiText,null,H),D&&Object(K.jsx)(o.EuiSpacer,null)):null,Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(oe,{errorKey:`threshold${t}`,isShowingErrors:D,errors:J},Object(K.jsx)(o.EuiFieldNumber,{"data-test-subj":"watchThresholdInput",value:null==C.threshold[t]?"":C.threshold[t],min:0,step:.1,onChange:e=>{const{value:n}=e.target,s=""!==n?parseFloat(n):n,r=[...C.threshold];r[t]=s,N("threshold",r)}})))))))))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiPopover,{id:"watchDurationPopover",button:Object(K.jsx)(o.EuiExpression,{description:l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.forTheLastLabel",{defaultMessage:"for the last"}),value:`${C.timeWindowSize} ${_(C.timeWindowUnit,parseInt(C.timeWindowSize,10).toString())}`,isActive:x||!C.timeWindowSize,onClick:()=>{y(!0)},color:C.timeWindowSize?"secondary":"danger"}),isOpen:x,closePopover:()=>{y(!1)},ownFocus:!0,anchorPosition:"downLeft"},Object(K.jsx)("div",null,Object(K.jsx)(o.EuiPopoverTitle,null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.forTheLastButtonLabel",defaultMessage:"For the last"})),Object(K.jsx)(o.EuiFlexGroup,null,Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(oe,{errorKey:"timeWindowSize",isShowingErrors:D,errors:J},Object(K.jsx)(o.EuiFieldNumber,{min:1,value:C.timeWindowSize||"",onChange:e=>{const{value:t}=e.target,n=""!==t?parseInt(t,10):t;N("timeWindowSize",n)}}))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiSelect,{value:C.timeWindowUnit,onChange:e=>{N("timeWindowUnit",e.target.value)},options:Ct(C.timeWindowSize)}))))))),q?Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiSpacer,{size:"m"}),Object(K.jsx)(o.EuiText,{color:"danger",size:"s"},Pt),Object(K.jsx)(o.EuiSpacer,{size:"m"})):null,D?null:Object(K.jsx)(s.Fragment,null,Object(K.jsx)(Et,null),Object(K.jsx)(Rt,{actionErrors:W})),Object(K.jsx)(o.EuiSpacer,null)):null,Object(K.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiButton,{fill:!0,color:"secondary","data-test-subj":"saveWatchButton",type:"submit",iconType:"check",disabled:D||B,isLoading:A,onClick:async()=>{R(!0);const e=await tt(C,t);if(e&&e.error)return R(!1),T(e.error)}},C.isNew?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.createButtonLabel",defaultMessage:"Create alert"}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.threshold.saveButtonLabel",defaultMessage:"Save alert"}))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiButtonEmpty,{onClick:()=>ye()},l.i18n.translate("xpack.watcher.sections.watchEdit.threshold.cancelButtonLabel",{defaultMessage:"Cancel"}))))),Object(K.jsx)(o.EuiFlexItem,{grow:!1},Object(K.jsx)(o.EuiButtonEmpty,{onClick:()=>F(!P)},P?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.hideRequestButtonLabel",defaultMessage:"Hide request"}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.json.showRequestButtonLabel",defaultMessage:"Show request"}))))),P?Object(K.jsx)(request_flyout_RequestFlyout,{id:C.id,payload:Ye(U),close:()=>F(!1)}):null)};var Bt=n(29);const qt=({pageTitle:e})=>{const{watch:t}=Object(s.useContext)(Me),{history:n}=se(),r=Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.monitoring.edit.calloutDescriptionText",defaultMessage:"Watch '{watchName}' is a system watch and cannot be edited.",values:{watchName:t.name}});return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(K.jsx)(o.EuiEmptyPrompt,{iconType:"",title:Object(K.jsx)("h1",null,e),body:Object(K.jsx)("p",null,r),actions:[Object(K.jsx)(o.EuiLink,Object(Bt.reactRouterNavigate)(n,`/watches/watch/${t.id}/status`),Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.monitoring.header.watchLinkTitle",defaultMessage:"View watch status"}))]}))},zt=(e,t)=>{const{command:n,payload:s}=t,{watch:r}=e;switch(n){case"setWatch":return{...e,watch:s};case"setProperty":const{property:t,value:n}=s;return Object(p.isEqual)(r[t],n)?e:{...e,watch:new(watch_Watch.getWatchTypes()[r.type])({...r,[t]:n})};case"addAction":const{type:a,defaults:i}=s,o=new(watch_Watch.getWatchTypes()[r.type])(r);return o.createAction(a,i),{...e,watch:o};case"setError":return{...e,loadError:s}}},Ht=({match:{params:{id:e,type:t}}})=>{const{setBreadcrumbs:n}=se(),[{watch:r,loadError:a},i]=Object(s.useReducer)(zt,{watch:null});Object(s.useEffect)((()=>{(async()=>{if(e)try{const t=await(async e=>{const{watch:t}=await C().get(`${J}/watch/${e}`);return watch_Watch.fromUpstreamJson(t)})(e);i({command:"setWatch",payload:t})}catch(e){i({command:"setError",payload:e.body})}else if(t){const e=watch_Watch.getWatchTypes()[t];e&&i({command:"setWatch",payload:new e})}})()}),[e,t]),Object(s.useEffect)((()=>{n([fe,e?be:we])}),[e,n]);const u=Z(a);if(u)return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(K.jsx)(Q,{errorCode:u,id:e}));if(a)return Object(K.jsx)(L.PageError,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.errorTitle",defaultMessage:"Error loading watch"}),error:a});if(!r)return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(K.jsx)(ue,null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchEdit.loadingWatchDescription",defaultMessage:"Loading watch…"})));const d=(e=>{if(e.isNew){const t=e.typeName.toLowerCase();return l.i18n.translate("xpack.watcher.sections.watchEdit.json.titlePanel.createNewTypeOfWatchTitle",{defaultMessage:"Create {typeName}",values:{typeName:t}})}return l.i18n.translate("xpack.watcher.sections.watchEdit.json.titlePanel.editWatchTitle",{defaultMessage:"Edit {watchName}",values:{watchName:e.name?e.name:e.id}})})(r);let h=null;switch(r.type){case g.n.THRESHOLD:h=Wt;break;case g.n.MONITORING:h=qt;break;case g.n.JSON:default:h=ft}return Object(K.jsx)(Me.Provider,{value:{watch:r,setWatchProperty:(e,t)=>{i({command:"setProperty",payload:{property:e,value:t}})},addAction:e=>{i({command:"addAction",payload:e})}}},Object(K.jsx)(h,{pageTitle:d}))},Ut=()=>{const{setBreadcrumbs:e,history:t,links:{watcherGettingStartedUrl:n}}=se(),[a,i]=Object(s.useState)([]),[u,d]=Object(s.useState)([]),[h,p]=Object(s.useState)([]),[m,f]=Object(s.useState)({pageIndex:0,pageSize:g.g.initialPageSize}),[w,b]=Object(s.useState)("");Object(s.useEffect)((()=>{e([fe])}),[e]);const{isLoading:j,data:x,error:y}=(v=g.i.WATCH_LIST,P({path:`${J}/watches`,method:"get",pollIntervalMs:v,deserializer:D}));var v;const[O,E]=Object(s.useState)(!1),_=Object(s.useMemo)((()=>x?x.filter((e=>!h.includes(e.id))):void 0),[x,h]),k=Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.subhead",defaultMessage:"Watch for changes or anomalies in your data and take action if needed."}),S=Object(K.jsx)(o.EuiPopover,{id:"createWatchPanel",button:Object(K.jsx)(o.EuiButton,{fill:!0,"data-test-subj":"createWatchButton",iconType:"arrowDown",iconSide:"right",onClick:()=>E(!O)},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.createWatchButtonLabel",defaultMessage:"Create"})),isOpen:O,closePopover:()=>E(!1),panelPaddingSize:"none",anchorPosition:"downCenter"},Object(K.jsx)(o.EuiContextMenuPanel,{items:[g.n.THRESHOLD,g.n.JSON].map((e=>Object(K.jsx)(o.EuiContextMenuItem,{key:e,"data-test-subj":`${e}WatchCreateLink`,onClick:()=>{E(!1);(e===g.n.THRESHOLD?ve:Oe)()}},e===g.n.THRESHOLD?Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiText,{size:"m"},Object(K.jsx)("span",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.createThresholdAlertButtonLabel",defaultMessage:"Create threshold alert"}))),Object(K.jsx)(o.EuiText,{size:"s",color:"subdued"},Object(K.jsx)("span",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.createThresholdAlertButtonTooltip",defaultMessage:"Send an alert on a specified condition."})))):Object(K.jsx)(s.Fragment,null,Object(K.jsx)(o.EuiText,{size:"m"},Object(K.jsx)("span",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.createAdvancedWatchButtonLabel",defaultMessage:"Create advanced watch"}))),Object(K.jsx)(o.EuiText,{size:"s",color:"subdued"},Object(K.jsx)("span",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.createAdvancedWatchTooltip",defaultMessage:"Set up a custom watch in JSON."})))))))}));if(j)return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(K.jsx)(ue,null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.loadingWatchesDescription",defaultMessage:"Loading watches…"})));const M=Z(y);if(M)return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(K.jsx)(Q,{errorCode:M}));if(y)return Object(K.jsx)(L.PageError,{title:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.errorTitle",defaultMessage:"Error loading watches"}),error:y});if(_&&0===_.length){const e=Object(K.jsx)(o.EuiText,{color:"subdued"},Object(K.jsx)("p",null,k," ",Object(K.jsx)(o.EuiLink,{href:n,target:"_blank"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.watcherLearnMoreLinkText",defaultMessage:"Learn more."}))));return Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"subdued"},Object(K.jsx)(o.EuiEmptyPrompt,{iconType:"managementApp",title:Object(K.jsx)("h1",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.emptyPromptTitle",defaultMessage:"You don’t have any watches yet"})),body:e,actions:S,"data-test-subj":"emptyPrompt"}))}let T;if(_){const e=[{field:"id",name:l.i18n.translate("xpack.watcher.sections.watchList.watchTable.idHeader",{defaultMessage:"ID"}),sortable:!0,truncateText:!0,render:e=>Object(K.jsx)(o.EuiLink,ie()({"data-test-subj":`watchIdColumn-${e}`},Object(Bt.reactRouterNavigate)(t,`/watches/watch/${e}/status`)),e)},{field:"name",name:l.i18n.translate("xpack.watcher.sections.watchList.watchTable.nameHeader",{defaultMessage:"Name"}),render:(e,t)=>Object(K.jsx)("span",{"data-test-subj":`watchNameColumn-${t.id}`},e),sortable:!0,truncateText:!0},{field:"watchStatus.state",name:l.i18n.translate("xpack.watcher.sections.watchList.watchTable.stateHeader",{defaultMessage:"State"}),sortable:!0,width:"130px",render:e=>Object(K.jsx)(le,{status:e})},{field:"watchStatus.lastMetCondition",name:l.i18n.translate("xpack.watcher.sections.watchList.watchTable.lastFiredHeader",{defaultMessage:"Last fired"}),sortable:!0,truncateText:!0,width:"130px",render:e=>e?e.fromNow():e},{field:"watchStatus.lastChecked",name:l.i18n.translate("xpack.watcher.sections.watchList.watchTable.lastTriggeredHeader",{defaultMessage:"Last triggered"}),sortable:!0,truncateText:!0,width:"130px",render:e=>e?e.fromNow():e},{field:"watchStatus.comment",name:l.i18n.translate("xpack.watcher.sections.watchList.watchTable.commentHeader",{defaultMessage:"Comment"}),sortable:!0,truncateText:!0},{name:l.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionHeader",{defaultMessage:"Actions"}),width:"75px",actions:[{render:e=>{const n=l.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionEditTooltipLabel",{defaultMessage:"Edit"});return Object(K.jsx)(o.EuiToolTip,{content:n,delay:"long"},Object(K.jsx)(o.EuiButtonIcon,ie()({isDisabled:e.isSystemWatch,"aria-label":l.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionEditAriaLabel",{defaultMessage:"Edit watch '{name}'",values:{name:e.name}}),iconType:"pencil",color:"primary"},Object(Bt.reactRouterNavigate)(t,`/watches/watch/${e.id}/edit`),{"data-test-subj":"editWatchButton"})))}},{render:e=>{const t=l.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionDeleteTooltipLabel",{defaultMessage:"Delete"});return Object(K.jsx)(o.EuiToolTip,{content:t,delay:"long"},Object(K.jsx)(o.EuiButtonIcon,{isDisabled:e.isSystemWatch,"aria-label":l.i18n.translate("xpack.watcher.sections.watchList.watchTable.actionDeleteAriaLabel",{defaultMessage:"Delete watch '{name}'",values:{name:e.name}}),iconType:"trash",color:"danger",onClick:()=>{d([e.id])},"data-test-subj":"deleteWatchButton"}))}}]}],n={onSelectionChange:i,selectable:e=>!e.isSystemWatch,selectableMessage:e=>e?"":l.i18n.translate("xpack.watcher.sections.watchList.watchTable.disabledWatchTooltipText",{defaultMessage:"This watch is read-only"})},s={query:w,onChange:e=>(b(e.queryText),!0),box:{incremental:!0},toolsLeft:a.length>0?Object(K.jsx)(o.EuiButton,{"data-test-subj":"btnDeleteWatches",onClick:()=>{d(a.map((e=>e.id)))},color:"danger"},a.length>1?Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.deleteMultipleWatchesButtonLabel",defaultMessage:"Delete watches"}):Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.deleteSingleWatchButtonLabel",defaultMessage:"Delete watch"})):void 0,toolsRight:S};T=Object(K.jsx)("div",{"data-test-subj":"watchesTableContainer"},Object(K.jsx)(o.EuiInMemoryTable,{onTableChange:({page:{index:e,size:t}})=>f({pageIndex:e,pageSize:t}),items:_,itemId:"id",columns:e,search:s,pagination:{...g.g,pageIndex:m.pageIndex,pageSize:m.pageSize},sorting:{sort:{field:"name",direction:"asc"}},selection:n,isSelectable:!0,message:Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.watchTable.noWatchesMessage",defaultMessage:"No watches to show"}),rowProps:()=>({"data-test-subj":"row"}),cellProps:()=>({"data-test-subj":"cell"}),"data-test-subj":"watchesTable"}))}return Object(K.jsx)(r.a.Fragment,null,Object(K.jsx)(o.EuiPageHeader,{pageTitle:Object(K.jsx)("span",{"data-test-subj":"appTitle"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.header",defaultMessage:"Watcher"})),bottomBorder:!0,rightSideItems:[Object(K.jsx)(o.EuiButtonEmpty,{href:n,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.sections.watchList.watcherGettingStartedDocsLinkText",defaultMessage:"Watcher docs"}))],description:k}),Object(K.jsx)(re,{callback:e=>{e&&p([...h,...u]),d([])},watchesToDelete:u}),Object(K.jsx)(o.EuiSpacer,{size:"l"}),T)},$t=Object(i.withRouter)((({children:e,history:t})=>(xe={history:t},e))),Vt=e=>{const[{valid:t,message:n},r]=Object(s.useState)({valid:!0});return Object(s.useEffect)((()=>{const t=e.licenseStatus$.subscribe(r);return()=>t.unsubscribe()}),[e.licenseStatus$]),t?Object(K.jsx)(i.Router,{history:e.history},Object(K.jsx)($t,null,Object(K.jsx)(ne,{value:e},Object(K.jsx)(Gt,null)))):Object(K.jsx)(o.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",color:"danger"},Object(K.jsx)(o.EuiEmptyPrompt,{iconType:"alert",title:Object(K.jsx)("h1",null,Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.app.licenseErrorTitle",defaultMessage:"License error"})),body:Object(K.jsx)("p",null,n),actions:[Object(K.jsx)(o.EuiLink,{href:e.getUrlForApp("management",{path:"stack/license_management/home"})},Object(K.jsx)(c.FormattedMessage,{id:"xpack.watcher.app.licenseErrorLinkText",defaultMessage:"Manage your license"}))]}))},Gt=()=>Object(K.jsx)(i.Switch,null,Object(K.jsx)(i.Route,{exact:!0,path:"/watches",component:Ut}),Object(K.jsx)(i.Route,{exact:!0,path:"/watches/watch/:id/status",component:Se}),Object(K.jsx)(i.Route,{exact:!0,path:"/watches/watch/:id/edit",component:Ht}),Object(K.jsx)(i.Route,{exact:!0,path:"/watches/new-watch/:type(json|threshold)",component:Ht}),Object(K.jsx)(i.Redirect,{exact:!0,from:"/",to:"/watches"}),Object(K.jsx)(i.Redirect,{exact:!0,from:"",to:"/watches"})),Kt=e=>{const{I18nContext:t,element:n,savedObjects:s,...r}=e;var i,o;return i=e.uiSettings.get("xPack:defaultAdminEmail"),b=i,o=r.http,F=o,N=s,Object(a.render)(Object(K.jsx)(t,null,Object(K.jsx)(Vt,r)),n),()=>{Object(a.unmountComponentAtNode)(n)}}}])]);