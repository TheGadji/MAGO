/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.transform_bundle_jsonpfunction=window.transform_bundle_jsonpfunction||[]).push([[3],{106:function(e,t,n){"use strict";n.r(t);var l=n(20),s=n(4),r=n.n(s),a=n(21),o=n(0);var i=n(5),u=n(19);const c=r.a.memo((({config:e,onChange:t,errors:n})=>{const o=function(e){var t,n;return{notStarted:{enabled:null===(t=null==e||null===(n=e.notStarted)||void 0===n?void 0:n.enabled)||void 0===t||t}}}(e),c=Object(s.useCallback)((n=>{t({...null!=e?e:{},...n})}),[t,e]);return Object(u.jsx)(r.a.Fragment,null,Object(u.jsx)(l.EuiForm,{component:"div",isInvalid:!(null==n||!n.length),error:n},Object.entries(o).map((([e,t],n)=>{var s,r;return Object(u.jsx)(l.EuiDescribedFormGroup,{key:e,title:Object(u.jsx)("h4",null,null===(s=i.h[e])||void 0===s?void 0:s.name),description:null===(r=i.h[e])||void 0===r?void 0:r.description,fullWidth:!0,gutterSize:"s"},Object(u.jsx)(l.EuiFormRow,null,Object(u.jsx)(l.EuiSwitch,{disabled:!0,label:Object(u.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.testsSelection.enableTestLabel",defaultMessage:"Enable"}),onChange:c.bind(null,{[e]:{...o[e],enabled:!o[e].enabled}}),checked:o[e].enabled})))}))),Object(u.jsx)(l.EuiSpacer,{size:"l"}))}));var d=n(62);function b(e){return e.map((e=>({value:e,label:e})))}const m=({label:e,errors:t,onChange:n,selectedOptions:r,options:a,allowSelectAll:o=!1})=>{const c=Object(s.useMemo)((()=>b(r)),[r]),m=Object(s.useMemo)((()=>b(o?[i.a,...a]:a)),[a,o]);return Object(u.jsx)(l.EuiFormRow,{fullWidth:!0,label:e,isInvalid:!(null==t||!t.length),error:t},Object(u.jsx)(l.EuiComboBox,{singleSelection:!1,selectedOptions:c,options:m,onChange:e=>{null!=e&&e.length?e[e.length-1].value!==i.a?n(e.slice(e[0].value===i.a?1:0).map((e=>e.value)).filter(d.b)):n([i.a]):n([])},fullWidth:!0,"data-test-subj":"transformSelection",isInvalid:!(null==t||!t.length)}))};var f=n(53),j=n(44);t.default=({alertParams:e,setAlertParams:t,errors:n})=>{var d,b,g;const O=Object.values(n).flat(),h=O.length>0,p=Object(f.a)(),v=Object(j.b)(),[x,T]=Object(s.useState)([]),C=Object(s.useCallback)((e=>n=>{t(e,n)}),[t]);Object(s.useEffect)((function(){let e=!1;return p.getTransforms().then((t=>{e||T(t.transforms.filter((e=>e.sync)).map((e=>e.id)))})).catch((e=>{v.addError(e,{title:o.i18n.translate("xpack.transform.alertingRuleTypes.transformHealth.fetchErrorMessage",{defaultMessage:"Unable to fetch transforms"})})})),()=>{e=!0}}),[p,v]);const E=Object(s.useMemo)((()=>{var t;return null!==(t=e.includeTransforms)&&void 0!==t&&t.some((e=>e===i.a))?x:null}),[x,e.includeTransforms]);return Object(u.jsx)(l.EuiForm,{"data-test-subj":"transformHealthAlertingRuleForm",invalidCallout:"none",error:O,isInvalid:h},Object(u.jsx)(m,{label:Object(u.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.includeTransformsLabel",defaultMessage:"Include transforms"}),options:x,selectedOptions:null!==(d=e.includeTransforms)&&void 0!==d?d:[],onChange:C("includeTransforms"),allowSelectAll:!0,errors:n.includeTransforms}),Object(u.jsx)(l.EuiSpacer,{size:"m"}),null!=E&&E.length||null!==(b=e.excludeTransforms)&&void 0!==b&&b.length?Object(u.jsx)(r.a.Fragment,null,Object(u.jsx)(m,{label:Object(u.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.excludeTransformsLabel",defaultMessage:"Exclude transforms"}),options:null!=E?E:[],selectedOptions:null!==(g=e.excludeTransforms)&&void 0!==g?g:[],onChange:C("excludeTransforms")}),Object(u.jsx)(l.EuiSpacer,{size:"m"})):null,Object(u.jsx)(c,{config:e.testsConfig,onChange:C("testsConfig"),errors:Array.isArray(n.testsConfig)?n.testsConfig:[]}))}}}]);