/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.reporting_bundle_jsonpfunction=window.reporting_bundle_jsonpfunction||[]).push([[2],{43:function(e,t,s){"use strict";s.r(t),s.d(t,"mountManagementSection",(function(){return A}));var i=s(5),o=s(4),n=s.n(o),a=s(32),r=s(14),l=s(0);const c=Object(o.createContext)(void 0),p=({children:e})=>{const{isLoading:t,data:s,resendRequest:i}=Object(r.c)();return Object(l.jsx)(c.Provider,{value:{isLoading:t,status:null==s?void 0:s.status,recheckStatus:i}},e)},u=()=>{const e=Object(o.useContext)(c);if(!e)throw new Error('"useIlmPolicyStatus" can only be used inside of "IlmPolicyStatusContext"');return e};var g=s(10),d=s(15),b=s.n(d),j=s(1),h=s.n(j),m=s(6),f=s(3),x=s(2),M=s(20),O=s(22),y=s(11);const C={buttonLabel:f.i18n.translate("xpack.reporting.listing.reports.ilmPolicyLinkText",{defaultMessage:"Edit reporting ILM policy"})},E=({locator:e,navigateToUrl:t})=>Object(l.jsx)(m.EuiButtonEmpty,{"data-test-subj":"ilmPolicyLink",size:"xs",onClick:()=>{e.getUrl({page:"policy_edit",policyName:x.ILM_POLICY_NAME}).then((e=>{t(e)}))}},C.buttonLabel),T={title:f.i18n.translate("xpack.reporting.listing.ilmPolicyCallout.migrationNeededTitle",{defaultMessage:"Apply new lifecycle policy for reports"}),description:Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.ilmPolicyCallout.migrationNeededDescription",defaultMessage:"To ensure your reports are managed consistently, all reporting indices should use the {ilmPolicyName} policy.",values:{ilmPolicyName:Object(l.jsx)(m.EuiCode,null,x.ILM_POLICY_NAME)}}),buttonLabel:f.i18n.translate("xpack.reporting.listing.ilmPolicyCallout.migrateIndicesButtonLabel",{defaultMessage:"Apply {ilmPolicyName} policy",values:{ilmPolicyName:x.ILM_POLICY_NAME}}),migrateErrorTitle:f.i18n.translate("xpack.reporting.listing.ilmPolicyCallout.migrateIndicesErrorTitle",{defaultMessage:"Could not migrate reporting indices"}),migrateSuccessTitle:f.i18n.translate("xpack.reporting.listing.ilmPolicyCallout.migrateIndicesSuccessTitle",{defaultMessage:"Reporting policy active for all reporting indices"})},S=({toasts:e,onMigrationDone:t})=>{const[s,i]=Object(o.useState)(!1),{apiClient:n}=Object(r.d)();return Object(l.jsx)(m.EuiCallOut,{"data-test-subj":"migrateReportingIndicesPolicyCallOut",title:T.title},Object(l.jsx)("p",null,T.description),Object(l.jsx)(m.EuiButton,{"data-test-subj":"migrateReportingIndicesButton",isLoading:s,onClick:async()=>{try{i(!0),await n.migrateReportingIndicesIlmPolicy(),t(),e.addSuccess({title:T.migrateSuccessTitle})}catch(t){var s;e.addError(t,{title:T.migrateErrorTitle,toastMessage:null===(s=t.body)||void 0===s?void 0:s.message})}finally{i(!1)}}},T.buttonLabel))},k=({toasts:e})=>{const{isLoading:t,recheckStatus:s,status:i}=u();return t||!i||"ok"===i?null:Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(m.EuiSpacer,{size:"m"}),Object(l.jsx)(m.EuiFlexItem,null,Object(l.jsx)(S,{toasts:e,onMigrationDone:s})))};class report_delete_button_ReportDeleteButton extends o.PureComponent{constructor(e){super(e),this.state={showConfirm:!1}}hideConfirm(){this.setState({showConfirm:!1})}showConfirm(){this.setState({showConfirm:!0})}renderConfirm(){const{intl:e,jobsToDelete:t}=this.props,s=t.length>1?e.formatMessage({id:"xpack.reporting.listing.table.deleteNumConfirmTitle",defaultMessage:"Delete {num} reports?"},{num:t.length}):e.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmTitle",defaultMessage:'Delete the "{name}" report?'},{name:t[0].title}),i=e.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmMessage",defaultMessage:"You can't recover deleted reports."}),o=e.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmButton",defaultMessage:"Delete"}),n=e.formatMessage({id:"xpack.reporting.listing.table.deleteCancelButton",defaultMessage:"Cancel"});return Object(l.jsx)(m.EuiConfirmModal,{title:s,onCancel:()=>this.hideConfirm(),onConfirm:()=>this.props.performDelete(),confirmButtonText:o,cancelButtonText:n,defaultFocusedButton:"confirm",buttonColor:"danger"},i)}render(){const{jobsToDelete:e,intl:t}=this.props;return 0===e.length?null:Object(l.jsx)(o.Fragment,null,Object(l.jsx)(m.EuiButton,{onClick:()=>this.showConfirm(),iconType:"trash",color:"danger","data-test-subj":"deleteReportButton"},t.formatMessage({id:"xpack.reporting.listing.table.deleteReportButton",defaultMessage:"Delete {num, plural, one {report} other {reports} }"},{num:e.length})),this.state.showConfirm?this.renderConfirm():null)}}var I;!function(e){e.chromeStatus="chromeStatus",e.screenshotStatus="screenshotStatus"}(I||(I={}));const F={[I.chromeStatus]:"incomplete",[I.screenshotStatus]:"incomplete",isFlyoutVisible:!1,help:[],logs:"",isBusy:!1,success:!0},w=({apiClient:e})=>{const[t,s]=Object(o.useState)(F),n=e=>s({...t,...e}),{isBusy:a,screenshotStatus:r,chromeStatus:c,isFlyoutVisible:p,help:u,logs:g,success:d}=t,b=()=>n({...F,isFlyoutVisible:!1}),j=(e,t)=>()=>{n({isBusy:!0,[t]:"incomplete"}),e().then((e=>{n({isBusy:!1,help:e.help,logs:e.logs,success:e.success,[t]:e.success?"complete":"danger"})})).catch((e=>{n({isBusy:!1,help:[f.i18n.translate("xpack.reporting.listing.diagnosticApiCallFailure",{defaultMessage:"There was a problem running the diagnostic: {error}",values:{error:e}})],logs:`${e.message}`,success:!1,[t]:"danger"})}))},h=[{title:f.i18n.translate("xpack.reporting.listing.diagnosticBrowserTitle",{defaultMessage:"Check browser"}),children:Object(l.jsx)(o.Fragment,null,Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticBrowserMessage",defaultMessage:"Reporting uses a headless browser to generate PDF and PNGs. Validate that the browser can launch successfully."}),Object(l.jsx)(m.EuiSpacer,null),Object(l.jsx)(m.EuiButton,{disabled:a||"complete"===c,onClick:j((()=>e.verifyBrowser()),I.chromeStatus),isLoading:a&&"incomplete"===c,iconType:"complete"===c?"check":void 0},Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticBrowserButton",defaultMessage:"Check browser"}))),status:d||"complete"===c?c:"danger"}];let x;return"complete"===c&&h.push({title:f.i18n.translate("xpack.reporting.listing.diagnosticScreenshotTitle",{defaultMessage:"Check screen capture"}),children:Object(l.jsx)(o.Fragment,null,Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticScreenshotMessage",defaultMessage:"Ensure that the headless browser can capture a screenshot of a page."}),Object(l.jsx)(m.EuiSpacer,null),Object(l.jsx)(m.EuiButton,{disabled:a||"complete"===r,onClick:j((()=>e.verifyScreenCapture()),I.screenshotStatus),isLoading:a&&"incomplete"===r,iconType:"complete"===r?"check":void 0},Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticScreenshotButton",defaultMessage:"Capture screenshot"}))),status:d||"complete"===r?r:"danger"}),"complete"===r&&h.push({title:f.i18n.translate("xpack.reporting.listing.diagnosticSuccessTitle",{defaultMessage:"All set!"}),children:Object(l.jsx)(o.Fragment,null,Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticSuccessMessage",defaultMessage:"Everything looks good for reporting to function."})),status:d?r:"danger"}),d||h.push({title:f.i18n.translate("xpack.reporting.listing.diagnosticFailureTitle",{defaultMessage:"Something isn't working properly."}),children:Object(l.jsx)(o.Fragment,null,u.length?Object(l.jsx)(o.Fragment,null,Object(l.jsx)(m.EuiCallOut,{color:"danger",iconType:"alert"},Object(l.jsx)("p",null,u.join("\n")))):null,g.length?Object(l.jsx)(o.Fragment,null,Object(l.jsx)(m.EuiSpacer,null),Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticFailureDescription",defaultMessage:"Here are some details about the issue:"}),Object(l.jsx)(m.EuiSpacer,null),Object(l.jsx)(m.EuiCodeBlock,null,g)):null),status:"danger"}),p&&(x=Object(l.jsx)(m.EuiFlyout,{onClose:b,"aria-labelledby":"reportingHelperTitle",size:"m"},Object(l.jsx)(m.EuiFlyoutHeader,{hasBorder:!0},Object(l.jsx)(m.EuiTitle,{size:"m"},Object(l.jsx)("h2",null,Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticTitle",defaultMessage:"Reporting Diagnostics"}))),Object(l.jsx)(m.EuiSpacer,{size:"s"}),Object(l.jsx)(m.EuiText,{color:"subdued"},Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticDescription",defaultMessage:"Run diagnostics to automatically troubleshoot common reporting problems."}))),Object(l.jsx)(m.EuiFlyoutBody,null,Object(l.jsx)(m.EuiSteps,{steps:h})))),Object(l.jsx)("div",null,x,Object(l.jsx)(m.EuiButtonEmpty,{size:"xs",flush:"left",onClick:()=>n({isFlyoutVisible:!0})},Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.diagnosticButton",defaultMessage:"Run reporting diagnostics"})))},v=e=>{const{job:t,apiClient:s,intl:i}=e;if(t.status!==x.JOB_STATUSES.COMPLETED&&t.status!==x.JOB_STATUSES.WARNINGS)return null;const o=Object(l.jsx)(m.EuiButtonIcon,{onClick:()=>s.downloadReport(t.id),iconType:"importAction","aria-label":i.formatMessage({id:"xpack.reporting.listing.table.downloadReportAriaLabel",defaultMessage:"Download report"})});return t.getWarnings()?Object(l.jsx)(m.EuiToolTip,{position:"top",content:i.formatMessage({id:"xpack.reporting.listing.table.downloadReportWithWarnings",defaultMessage:"Download report with warnings"})},o):Object(l.jsx)(m.EuiToolTip,{position:"top",content:i.formatMessage({id:"xpack.reporting.listing.table.downloadReport",defaultMessage:"Download report"})},o)},L="n/a",P="unknown",B=e=>{var t;const{width:s,height:i}=(null===(t=e.layout)||void 0===t?void 0:t.dimensions)||{width:null,height:null};return s&&i?`Width: ${s} x Height: ${i}`:P};class report_info_button_ReportInfoButtonUi extends o.Component{constructor(e){super(e),h()(this,"mounted",void 0),h()(this,"loadInfo",(async()=>{this.setState({isLoading:!0});try{const e=await this.props.apiClient.getInfo(this.props.job.id);this.mounted&&this.setState({isLoading:!1,info:e})}catch(e){this.mounted&&this.setState({isLoading:!1,calloutTitle:this.props.intl.formatMessage({id:"xpack.reporting.listing.table.reportInfoUnableToFetch",defaultMessage:"Unable to fetch report info."}),info:null,error:e})}})),h()(this,"closeFlyout",(()=>{this.setState({isFlyoutVisible:!1,info:null})})),h()(this,"showFlyout",(()=>{this.setState({isFlyoutVisible:!0}),this.state.info||this.loadInfo()})),this.state={isLoading:!1,isFlyoutVisible:!1,calloutTitle:e.intl.formatMessage({id:"xpack.reporting.listing.table.reportCalloutTitle",defaultMessage:"Report info"}),info:null,error:null},this.closeFlyout=this.closeFlyout.bind(this),this.showFlyout=this.showFlyout.bind(this)}renderInfo(){var e,t,s;const{info:i,error:o}=this.state;if(o)return o.message;if(!i)return null;const a=i.timeout?i.timeout.toString():L,r=[{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.titleInfo",defaultMessage:"Title"}),description:i.title||L},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.createdAtInfo",defaultMessage:"Created at"}),description:i.getCreatedAtLabel()},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.statusInfo",defaultMessage:"Status"}),description:i.getStatus()},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.tzInfo",defaultMessage:"Time zone"}),description:i.browserTimezone||L}],c=[{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.startedAtInfo",defaultMessage:"Started at"}),description:i.started_at||L},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.completedAtInfo",defaultMessage:"Completed at"}),description:i.completed_at||L},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.processedByInfo",defaultMessage:"Processed by"}),description:i.kibana_name&&i.kibana_id?`${i.kibana_name} (${i.kibana_id})`:L},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.contentTypeInfo",defaultMessage:"Content type"}),description:i.content_type||L},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.sizeInfo",defaultMessage:"Size in bytes"}),description:(null===(e=i.size)||void 0===e?void 0:e.toString())||L},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.attemptsInfo",defaultMessage:"Attempts"}),description:i.attempts.toString()},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.maxAttemptsInfo",defaultMessage:"Max attempts"}),description:(null===(t=i.max_attempts)||void 0===t?void 0:t.toString())||L},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.timeoutInfo",defaultMessage:"Timeout"}),description:a},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.exportTypeInfo",defaultMessage:"Export type"}),description:i.isDeprecated?this.props.intl.formatMessage({id:"xpack.reporting.listing.table.reportCalloutExportTypeDeprecated",defaultMessage:"{jobtype} (DEPRECATED)"},{jobtype:i.jobtype}):i.jobtype}],p=[{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.dimensionsInfo",defaultMessage:"Dimensions"}),description:B(i)},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.layoutInfo",defaultMessage:"Layout"}),description:(null===(s=i.layout)||void 0===s?void 0:s.id)||P},{title:this.props.intl.formatMessage({id:"xpack.reporting.listing.infoPanel.browserTypeInfo",defaultMessage:"Browser type"}),description:i.browser_type||L}],u=i.getWarnings(),g=u&&[{title:Object(l.jsx)(m.EuiText,{color:"danger"},"Warnings"),description:Object(l.jsx)(m.EuiText,{color:"warning"},u)}],d=i.getError(),b=d&&[{title:Object(l.jsx)(m.EuiText,{color:"danger"},"Error"),description:Object(l.jsx)(m.EuiText,{color:"danger"},d)}];return Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(m.EuiDescriptionList,{listItems:r,type:"column",align:"center",compressed:!0}),Object(l.jsx)(m.EuiSpacer,{size:"s"}),Object(l.jsx)(m.EuiDescriptionList,{listItems:c,type:"column",align:"center",compressed:!0}),x.USES_HEADLESS_JOB_TYPES.includes(i.jobtype)?Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(m.EuiSpacer,{size:"s"}),Object(l.jsx)(m.EuiDescriptionList,{listItems:p,type:"column",align:"center",compressed:!0})):null,g?Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(m.EuiSpacer,{size:"s"}),Object(l.jsx)(m.EuiDescriptionList,{listItems:g,type:"column",align:"center",compressed:!0})):null,b?Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(m.EuiSpacer,{size:"s"}),Object(l.jsx)(m.EuiDescriptionList,{listItems:b,type:"column",align:"center",compressed:!0})):null)}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.mounted=!0}render(){const e=this.props.job;let t;this.state.isFlyoutVisible&&(t=Object(l.jsx)(m.EuiPortal,null,Object(l.jsx)(m.EuiFlyout,{ownFocus:!0,onClose:this.closeFlyout,size:"s","aria-labelledby":"flyoutTitle","data-test-subj":"reportInfoFlyout"},Object(l.jsx)(m.EuiFlyoutHeader,{hasBorder:!0},Object(l.jsx)(m.EuiTitle,{size:"m"},Object(l.jsx)("h2",{id:"flyoutTitle"},this.state.calloutTitle))),Object(l.jsx)(m.EuiFlyoutBody,null,Object(l.jsx)(m.EuiText,null,this.renderInfo())))));let s=this.props.intl.formatMessage({id:"xpack.reporting.listing.table.reportInfoButtonTooltip",defaultMessage:"See report info."});e.getError()?s=this.props.intl.formatMessage({id:"xpack.reporting.listing.table.reportInfoAndErrorButtonTooltip",defaultMessage:"See report info and error message."}):e.getWarnings()&&(s=this.props.intl.formatMessage({id:"xpack.reporting.listing.table.reportInfoAndWarningsButtonTooltip",defaultMessage:"See report info and warnings."}));let i="iInCircle",o="primary";return(e.getWarnings()||e.getError())&&(i="alert",o="danger"),e.getWarnings()&&(o="warning"),Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(m.EuiToolTip,{position:"top",content:s},Object(l.jsx)(m.EuiButtonIcon,{onClick:this.showFlyout,iconType:i,color:o,"data-test-subj":"reportInfoButton","aria-label":this.props.intl.formatMessage({id:"xpack.reporting.listing.table.showReportInfoAriaLabel",defaultMessage:"Show report info"})})),t)}}const _=Object(i.injectI18n)(report_info_button_ReportInfoButtonUi);class report_listing_ReportListingUi extends o.Component{constructor(e){super(e),h()(this,"isInitialJobsFetch",void 0),h()(this,"licenseSubscription",void 0),h()(this,"mounted",void 0),h()(this,"poller",void 0),h()(this,"licenseHandler",(e=>{const{enableLinks:t,showLinks:s,message:i}=Object(y.a)(e.check("reporting","basic"));this.setState({enableLinks:t,showLinks:s,badLicenseMessage:i})})),h()(this,"onSelectionChange",(e=>{this.setState((t=>({...t,selectedJobs:e})))})),h()(this,"removeJob",(e=>{const{jobs:t}=this.state,s=t.filter((t=>t.id!==e.id));this.setState((e=>({...e,jobs:s})))})),h()(this,"renderDeleteButton",(()=>{const{selectedJobs:e}=this.state;if(0===e.length)return;return Object(l.jsx)(report_delete_button_ReportDeleteButton,b()({jobsToDelete:e,performDelete:async()=>{for(const t of e)try{await this.props.apiClient.deleteReport(t.id),this.removeJob(t),this.props.toasts.addSuccess(this.props.intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfim",defaultMessage:"The {reportTitle} report was deleted"},{reportTitle:t.title}))}catch(e){throw this.props.toasts.addDanger(this.props.intl.formatMessage({id:"xpack.reporting.listing.table.deleteFailedErrorMessage",defaultMessage:"The report was not deleted: {error}"},{error:e})),e}this.setState((()=>({page:0})),this.fetchJobs)}},this.props))})),h()(this,"onTableChange",(({page:e})=>{const{index:t}=e;this.setState((()=>({page:t})),this.fetchJobs)})),h()(this,"fetchJobs",(async()=>{let e,t;this.isInitialJobsFetch&&this.setState((()=>({isLoading:!0})));try{e=await this.props.apiClient.list(this.state.page),t=await this.props.apiClient.total(),this.isInitialJobsFetch=!1}catch(e){return this.licenseAllowsToShowThisPage()?("Failed to fetch"===e.message&&this.props.toasts.addDanger(e.message||this.props.intl.formatMessage({id:"xpack.reporting.listing.table.requestFailedErrorMessage",defaultMessage:"Request failed"})),void(this.mounted&&this.setState((()=>({isLoading:!1,jobs:[],total:0}))))):(this.props.toasts.addDanger(this.state.badLicenseMessage),void this.props.redirect("management"))}this.mounted&&this.setState((()=>({isLoading:!1,total:t,jobs:e})))})),h()(this,"licenseAllowsToShowThisPage",(()=>this.state.showLinks&&this.state.enableLinks)),this.state={page:0,total:0,jobs:[],selectedJobs:[],isLoading:!1,showLinks:!1,enableLinks:!1,badLicenseMessage:""},this.isInitialJobsFetch=!0}render(){var e,t;const{ilmPolicyContextValue:s,urlService:o,navigateToUrl:a,capabilities:r}=this.props,c=o.locators.get("ILM_LOCATOR_ID"),p="policy-not-found"!==s.status,u=Boolean(c&&p);return Object(l.jsx)(n.a.Fragment,null,Object(l.jsx)(m.EuiPageHeader,{"data-test-subj":"reportingPageHeader",bottomBorder:!0,pageTitle:Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.reportstitle",defaultMessage:"Reports"}),description:Object(l.jsx)(i.FormattedMessage,{id:"xpack.reporting.listing.reports.subtitle",defaultMessage:"Get reports generated in Kibana applications."})}),Object(l.jsx)(k,{toasts:this.props.toasts}),Object(l.jsx)(m.EuiSpacer,{size:"l"}),Object(l.jsx)("div",null,this.renderTable()),Object(l.jsx)(m.EuiSpacer,{size:"s"}),Object(l.jsx)(m.EuiFlexGroup,{justifyContent:"flexEnd"},(null==r||null===(e=r.management)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.index_lifecycle_management)&&Object(l.jsx)(m.EuiFlexItem,{grow:!1},s.isLoading?Object(l.jsx)(m.EuiLoadingSpinner,null):u&&Object(l.jsx)(E,{navigateToUrl:a,locator:c})),Object(l.jsx)(m.EuiFlexItem,{grow:!1},Object(l.jsx)(w,{apiClient:this.props.apiClient}))))}componentWillUnmount(){var e;this.mounted=!1,null===(e=this.poller)||void 0===e||e.stop(),this.licenseSubscription&&this.licenseSubscription.unsubscribe()}componentDidMount(){this.mounted=!0;const{pollConfig:e,license$:t}=this.props,s=Object(O.a)(e.jobsRefresh.interval);this.poller=new M.a({functionToPoll:()=>this.fetchJobs(),pollFrequencyInMillis:s,trailing:!1,continuePollingOnError:!0,pollFrequencyErrorMultiplier:e.jobsRefresh.intervalErrorMultiplier}),this.poller.start(),this.licenseSubscription=t.subscribe(this.licenseHandler)}renderTable(){const{intl:e}=this.props,t=[{field:"title",name:e.formatMessage({id:"xpack.reporting.listing.tableColumns.reportTitle",defaultMessage:"Report"}),render:(e,t)=>Object(l.jsx)("div",{"data-test-subj":"reportingListItemObjectTitle"},Object(l.jsx)("div",null,e),Object(l.jsx)(m.EuiText,{size:"s"},Object(l.jsx)(m.EuiTextColor,{color:"subdued"},t.objectType)))},{field:"created_at",name:e.formatMessage({id:"xpack.reporting.listing.tableColumns.createdAtTitle",defaultMessage:"Created at"}),render:(e,t)=>Object(l.jsx)("div",{"data-test-subj":"reportJobCreatedAt"},t.getCreatedAtLabel())},{field:"status",name:e.formatMessage({id:"xpack.reporting.listing.tableColumns.statusTitle",defaultMessage:"Status"}),render:(e,t)=>Object(l.jsx)("div",{"data-test-subj":"reportJobStatus"},t.getStatusLabel())},{name:e.formatMessage({id:"xpack.reporting.listing.tableColumns.actionsTitle",defaultMessage:"Actions"}),actions:[{render:e=>Object(l.jsx)("div",{"data-test-subj":"reportJobActions"},Object(l.jsx)(v,b()({},this.props,{job:e})),Object(l.jsx)(_,b()({},this.props,{job:e})))}]}],s={pageIndex:this.state.page,pageSize:10,totalItemCount:this.state.total,hidePerPageOptions:!0},i={itemId:"id",onSelectionChange:this.onSelectionChange};return Object(l.jsx)(o.Fragment,null,this.state.selectedJobs.length>0&&Object(l.jsx)(o.Fragment,null,Object(l.jsx)(m.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"m"},Object(l.jsx)(m.EuiFlexItem,{grow:!1},this.renderDeleteButton())),Object(l.jsx)(m.EuiSpacer,{size:"l"})),Object(l.jsx)(m.EuiBasicTable,{tableCaption:f.i18n.translate("xpack.reporting.listing.table.captionDescription",{defaultMessage:"Reports generated in Kibana applications"}),itemId:"id",items:this.state.jobs,loading:this.state.isLoading,columns:t,noItemsMessage:this.state.isLoading?e.formatMessage({id:"xpack.reporting.listing.table.loadingReportsDescription",defaultMessage:"Loading reports"}):e.formatMessage({id:"xpack.reporting.listing.table.noCreatedReportsDescription",defaultMessage:"No reports have been created"}),pagination:s,selection:i,isSelectable:!0,onChange:this.onTableChange,"data-test-subj":x.REPORT_TABLE_ID,rowProps:()=>({"data-test-subj":x.REPORT_TABLE_ROW_ID})}))}}const D=Object(i.injectI18n)(report_listing_ReportListingUi),R=e=>{const t=u(),{apiClient:s}=Object(r.d)(),{services:{application:{capabilities:i}}}=Object(g.b)();return Object(l.jsx)(D,b()({},e,{apiClient:s,capabilities:i,ilmPolicyContextValue:t}))};async function A(e,t,s,o,n,c,u){return Object(a.render)(Object(l.jsx)(i.I18nProvider,null,Object(l.jsx)(g.a,{services:{http:e.http,application:t.application}},Object(l.jsx)(r.a,{apiClient:n},Object(l.jsx)(p,null,Object(l.jsx)(R,{toasts:e.notifications.toasts,license$:s,pollConfig:o,redirect:t.application.navigateToApp,navigateToUrl:t.application.navigateToUrl,urlService:c}))))),u.element),()=>{Object(a.unmountComponentAtNode)(u.element)}}}}]);