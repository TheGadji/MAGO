/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.uptime_bundle_jsonpfunction=window.uptime_bundle_jsonpfunction||[]).push([[12],{219:function(E,a,S){"use strict";S.r(a),S.d(a,"SyntheticsPolicyEditExtensionWrapper",(function(){return y}));var _=S(1),e=S.n(_),l=S(44),T=S(22),n=S(50),R=S(149),u=S(152),I=S(147),t=S(148);const C=Object(_.memo)((({newPolicy:E,onChange:a,defaultConfig:S})=>{Object(T.useTrackPageview)({app:"fleet",path:"syntheticsEdit"}),Object(T.useTrackPageview)({app:"fleet",path:"syntheticsEdit",delay:15e3});const{monitorType:_}=Object(n.z)(),l=Object(I.a)(E.name);return Object(u.a)({defaultConfig:S,config:l[_],newPolicy:E,onChange:a,validate:t.a,monitorType:_}),e.a.createElement(R.a,{validate:t.a[_]})}));C.displayName="SyntheticsPolicyEditExtension";var O=S(85);function i(E,a){return S=>{var _,e;return null!==(_=null==S||null===(e=S[E])||void 0===e?void 0:e.value)&&void 0!==_?_:a[E]}}function o(E,a){return S=>{var _,e,l;return null!==(_=(l=null==S||null===(e=S[E])||void 0===e?void 0:e.value)?JSON.parse(l):null)&&void 0!==_?_:a[E]}}function A(E,a){return S=>{var _,e,l;return null!==(_=(l=null==S||null===(e=S[E])||void 0===e?void 0:e.value)?l.slice(0,l.length-1):null)&&void 0!==_?_:a[E]}}const r=E=>i(E,O.a),v={[l.a.NAME]:E=>{var a,S;return null!==(a=null==E||null===(S=E[l.a.NAME])||void 0===S?void 0:S.value)&&void 0!==a?a:""},[l.a.MONITOR_TYPE]:r(l.a.MONITOR_TYPE),[l.a.SCHEDULE]:E=>{var a;if(null==E||null===(a=E[l.a.SCHEDULE])||void 0===a?void 0:a.value){var S;const a=JSON.parse(null==E||null===(S=E[l.a.SCHEDULE])||void 0===S?void 0:S.value).replace("@every ","");return{unit:a.slice(-1),number:a.slice(0,a.length-1)}}return O.a[l.a.SCHEDULE]},[l.a.APM_SERVICE_NAME]:r(l.a.APM_SERVICE_NAME),[l.a.TAGS]:(L=l.a.TAGS,o(L,O.a)),[l.a.TIMEOUT]:(E=>A(E,O.a))(l.a.TIMEOUT)};var L;const d={[l.a.TLS_CERTIFICATE_AUTHORITIES]:E=>{var a;return U(null==E||null===(a=E[l.a.TLS_CERTIFICATE_AUTHORITIES])||void 0===a?void 0:a.value,l.a.TLS_CERTIFICATE_AUTHORITIES)},[l.a.TLS_CERTIFICATE]:E=>{var a;return U(null==E||null===(a=E[l.a.TLS_CERTIFICATE])||void 0===a?void 0:a.value,l.a.TLS_CERTIFICATE)},[l.a.TLS_KEY]:E=>{var a;return U(null==E||null===(a=E[l.a.TLS_KEY])||void 0===a?void 0:a.value,l.a.TLS_KEY)},[l.a.TLS_KEY_PASSPHRASE]:E=>{var a;return P(null==E||null===(a=E[l.a.TLS_KEY_PASSPHRASE])||void 0===a?void 0:a.value,l.a.TLS_KEY_PASSPHRASE)},[l.a.TLS_VERIFICATION_MODE]:E=>{var a;return P(null==E||null===(a=E[l.a.TLS_VERIFICATION_MODE])||void 0===a?void 0:a.value,l.a.TLS_VERIFICATION_MODE)},[l.a.TLS_VERSION]:E=>{var a;return U(null==E||null===(a=E[l.a.TLS_VERSION])||void 0===a?void 0:a.value,l.a.TLS_VERSION)}},P=(E="",a)=>null!=E?E:n.t[a],U=(E="",a)=>E?JSON.parse(E):n.t[a],N={...n.p,...n.o},c=E=>i(E,N),H=E=>o(E,N),s={[l.a.METADATA]:H(l.a.METADATA),[l.a.URLS]:c(l.a.URLS),[l.a.MAX_REDIRECTS]:c(l.a.MAX_REDIRECTS),[l.a.USERNAME]:c(l.a.USERNAME),[l.a.PASSWORD]:c(l.a.PASSWORD),[l.a.PROXY_URL]:c(l.a.PROXY_URL),[l.a.RESPONSE_BODY_CHECK_NEGATIVE]:H(l.a.RESPONSE_BODY_CHECK_NEGATIVE),[l.a.RESPONSE_BODY_CHECK_POSITIVE]:H(l.a.RESPONSE_BODY_CHECK_POSITIVE),[l.a.RESPONSE_BODY_INDEX]:c(l.a.RESPONSE_BODY_INDEX),[l.a.RESPONSE_HEADERS_CHECK]:H(l.a.RESPONSE_HEADERS_CHECK),[l.a.RESPONSE_HEADERS_INDEX]:c(l.a.RESPONSE_HEADERS_INDEX),[l.a.RESPONSE_STATUS_CHECK]:H(l.a.RESPONSE_STATUS_CHECK),[l.a.REQUEST_BODY_CHECK]:E=>{var a,S;const _=null==E||null===(a=E[l.a.REQUEST_BODY_CHECK])||void 0===a?void 0:a.value,e=null==E||null===(S=E[l.a.REQUEST_HEADERS_CHECK])||void 0===S?void 0:S.value;if(_){var T,R,u;const a=e?JSON.parse(null==E||null===(T=E[l.a.REQUEST_HEADERS_CHECK])||void 0===T?void 0:T.value):n.o[l.a.REQUEST_HEADERS_CHECK],S=null!=_?JSON.parse(_):null===(R=n.o[l.a.REQUEST_BODY_CHECK])||void 0===R?void 0:R.value;let I=null===(u=n.o[l.a.REQUEST_BODY_CHECK])||void 0===u?void 0:u.type;return Object.keys(a||[]).some((E=>{if("Content-Type"===E&&l.l[a[E]])return I=l.l[a[E]],!0})),{value:S,type:I}}return n.o[l.a.REQUEST_BODY_CHECK]},[l.a.REQUEST_HEADERS_CHECK]:H(l.a.REQUEST_HEADERS_CHECK),[l.a.REQUEST_METHOD_CHECK]:c(l.a.REQUEST_METHOD_CHECK),...v,...d},D={...n.s,...n.r},M=E=>i(E,D),Y={[l.a.METADATA]:(E=>o(E,D))(l.a.METADATA),[l.a.HOSTS]:M(l.a.HOSTS),[l.a.PROXY_URL]:M(l.a.PROXY_URL),[l.a.PROXY_USE_LOCAL_RESOLVER]:M(l.a.PROXY_USE_LOCAL_RESOLVER),[l.a.RESPONSE_RECEIVE_CHECK]:M(l.a.RESPONSE_RECEIVE_CHECK),[l.a.REQUEST_SEND_CHECK]:M(l.a.REQUEST_SEND_CHECK),...d,...v},p={[l.a.HOSTS]:(E=>i(E,n.q))(l.a.HOSTS),[l.a.WAIT]:(E=>A(E,n.q))(l.a.WAIT),...v},K={...n.n,...n.m},f=E=>i(E,K),V=E=>o(E,K),m={[l.a.METADATA]:V(l.a.METADATA),[l.a.SOURCE_ZIP_URL]:f(l.a.SOURCE_ZIP_URL),[l.a.SOURCE_ZIP_USERNAME]:f(l.a.SOURCE_ZIP_USERNAME),[l.a.SOURCE_ZIP_PASSWORD]:f(l.a.SOURCE_ZIP_PASSWORD),[l.a.SOURCE_ZIP_FOLDER]:f(l.a.SOURCE_ZIP_FOLDER),[l.a.SOURCE_INLINE]:V(l.a.SOURCE_INLINE),[l.a.SOURCE_ZIP_PROXY_URL]:f(l.a.SOURCE_ZIP_PROXY_URL),[l.a.PARAMS]:f(l.a.PARAMS),[l.a.SCREENSHOTS]:f(l.a.SCREENSHOTS),[l.a.SYNTHETICS_ARGS]:V(l.a.SYNTHETICS_ARGS),[l.a.ZIP_URL_TLS_CERTIFICATE_AUTHORITIES]:V(l.a.ZIP_URL_TLS_CERTIFICATE_AUTHORITIES),[l.a.ZIP_URL_TLS_CERTIFICATE]:V(l.a.ZIP_URL_TLS_CERTIFICATE),[l.a.ZIP_URL_TLS_KEY]:V(l.a.ZIP_URL_TLS_KEY),[l.a.ZIP_URL_TLS_KEY_PASSPHRASE]:f(l.a.ZIP_URL_TLS_KEY_PASSPHRASE),[l.a.ZIP_URL_TLS_VERIFICATION_MODE]:f(l.a.ZIP_URL_TLS_VERIFICATION_MODE),[l.a.ZIP_URL_TLS_VERSION]:V(l.a.ZIP_URL_TLS_VERSION),[l.a.JOURNEY_FILTERS_MATCH]:V(l.a.JOURNEY_FILTERS_MATCH),[l.a.JOURNEY_FILTERS_TAGS]:V(l.a.JOURNEY_FILTERS_TAGS),[l.a.IGNORE_HTTPS_ERRORS]:f(l.a.IGNORE_HTTPS_ERRORS),...v},F=(l.c.HTTP,l.c.ICMP,l.c.TCP,l.c.BROWSER,{...s,...p,...Y,...m,...v}),y=Object(_.memo)((({policy:E,newPolicy:a,onChange:S})=>{const{enableTLS:T,enableZipUrlTLS:R,fullConfig:u,monitorTypeConfig:I,monitorType:t,tlsConfig:O}=Object(_.useMemo)((()=>{let a=!1,S=!1;return(()=>{var _,e,T;const n=E.inputs.find((E=>!0===E.enabled)),R=null==n||null===(_=n.streams.find((E=>Object.values(l.c).includes(E.data_stream.dataset))))||void 0===_?void 0:_.vars,u=null==R?void 0:R[l.a.MONITOR_TYPE].value,I=(Object.values(l.a)||[]).reduce(((E,a)=>{var S;return{...E,[a]:null===(S=F[a])||void 0===S?void 0:S.call(F,R)}}),{}),t={[l.a.TLS_CERTIFICATE_AUTHORITIES]:I[l.a.TLS_CERTIFICATE_AUTHORITIES],[l.a.TLS_CERTIFICATE]:I[l.a.TLS_CERTIFICATE],[l.a.TLS_KEY]:I[l.a.TLS_KEY],[l.a.TLS_KEY_PASSPHRASE]:I[l.a.TLS_KEY_PASSPHRASE],[l.a.TLS_VERIFICATION_MODE]:I[l.a.TLS_VERIFICATION_MODE],[l.a.TLS_VERSION]:I[l.a.TLS_VERSION]};a=I[l.a.METADATA].is_tls_enabled||Boolean(null==R||null===(e=R[l.a.TLS_VERIFICATION_MODE])||void 0===e?void 0:e.value),S=I[l.a.METADATA].is_zip_url_tls_enabled||Boolean(null==R||null===(T=R[l.a.ZIP_URL_TLS_VERIFICATION_MODE])||void 0===T?void 0:T.value);return{fullConfig:{[u]:I},monitorTypeConfig:I,tlsConfig:t,monitorType:u,enableTLS:a,enableZipUrlTLS:S}})()}),[E]);return e.a.createElement(n.h,{defaultMonitorType:t,defaultIsTLSEnabled:T,defaultIsZipUrlTLSEnabled:R,isEditable:!0},e.a.createElement(n.l,{defaultValues:T?O:void 0},e.a.createElement(n.e,{defaultValues:null==u?void 0:u[l.c.HTTP]},e.a.createElement(n.j,{defaultValues:null==u?void 0:u[l.c.TCP]},e.a.createElement(n.g,{defaultValues:null==u?void 0:u[l.c.ICMP]},e.a.createElement(n.b,{defaultValues:null==u?void 0:u[l.c.BROWSER]},e.a.createElement(C,{newPolicy:a,onChange:S,defaultConfig:I})))))))}));y.displayName="SyntheticsPolicyEditExtensionWrapper"}}]);