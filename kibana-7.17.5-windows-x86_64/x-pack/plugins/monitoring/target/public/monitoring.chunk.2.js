/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.monitoring_bundle_jsonpfunction=window.monitoring_bundle_jsonpfunction||[]).push([[2],Array(35).concat([function(e,t,s){"use strict";var a,i=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},n=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),o=[];function r(e){for(var t=-1,s=0;s<o.length;s++)if(o[s].identifier===e){t=s;break}return t}function l(e,t){for(var s={},a=[],i=0;i<e.length;i++){var n=e[i],l=t.base?n[0]+t.base:n[0],c=s[l]||0,u="".concat(l," ").concat(c);s[l]=c+1;var d=r(u),p={css:n[1],media:n[2],sourceMap:n[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:u,updater:j(p,t),references:1}),a.push(u)}return a}function c(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var i=s.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var o=n(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,s,a){var i=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var n=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(n,o[t]):e.appendChild(n)}}function m(e,t,s){var a=s.css,i=s.media,n=s.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var g=null,b=0;function j(e,t){var s,a,i;if(t.singleton){var n=b++;s=g||(g=c(t)),a=p.bind(null,s,n,!1),i=p.bind(null,s,n,!0)}else s=c(t),a=m.bind(null,s,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var s=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var i=r(s[a]);o[i].references--}for(var n=l(e,t),c=0;c<s.length;c++){var u=r(s[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}s=n}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",a=e[3];if(!a)return s;if(t&&"function"==typeof btoa){var i=(o=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(l," */")),n=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[s].concat(n).concat([i]).join("\n")}var o,r,l;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var n=0;n<this.length;n++){var o=this[n][0];null!=o&&(i[o]=!0)}for(var r=0;r<e.length;r++){var l=[].concat(e[r]);a&&i[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5),i=!1,n="_NP_";function o(e){return function(){var t=a.useContext(e);return t}}t.default=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];var l=a.createContext(n),c=function(t){var i=e(t),n=s[0],o=n&&n(i);var r=Array.isArray(o)?a.useMemo((function(){return i}),o):i;return a.createElement(l.Provider,{value:r},t.children)},u=o(l);u.Context=l,u.Provider=c;var d=[];if(s.length){var p=[],m=function(t){for(var i=e(t),n=t.children,o=0;o<p.length;o+=1){var r=p[o],l=s[o];n=a.createElement(r.Provider,{value:l(i)},n)}return n};i,d.push(m);for(var g=0;g<s.length;g+=1){var b=a.createContext(n);p.push(b),d.push(o(b))}}else d.push(c,o(l));for(var j=0;j<d.length;j+=1)u[j]=d[j];return"function"==typeof Symbol&&Symbol.iterator&&(u[Symbol.iterator]=function(){return d[Symbol.iterator]()}),u}},function(e,t,s){var a,i,n,o,r;
/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */o=this,r=function(e){var t=!1,s=!1,a=!1,i=!1,n="escape years months weeks days hours minutes seconds milliseconds general".split(" "),o=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function r(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function l(e){for(var t="";e;)t+="0",e-=1;return t}function c(e,t){var s=e+"+"+h(k(t).sort(),(function(e){return e+":"+t[e]})).join(",");return c.cache[s]||(c.cache[s]=Intl.NumberFormat(e,t)),c.cache[s]}function u(e,t,n){var o,r,d,p=t.useToLocaleString,m=t.useGrouping,g=m&&t.grouping.slice(),b=t.maximumSignificantDigits,j=t.minimumIntegerDigits||1,x=t.fractionDigits||0,h=t.groupingSeparator,f=t.decimalSeparator;if(p&&n){var O,v={minimumIntegerDigits:j,useGrouping:m};return x&&(v.maximumFractionDigits=x,v.minimumFractionDigits=x),b&&e>0&&(v.maximumSignificantDigits=b),a?(i||((O=_({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),c(n,v).format(e)):(s||((O=_({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),e.toLocaleString(n,v))}var y=(b?e.toPrecision(b+1):e.toFixed(x+1)).split("e");d=y[1]||"",r=(y=y[0].split("."))[1]||"";var M=(o=y[0]||"").length,E=r.length,k=M+E,S=o+r;(b&&k===b+1||!b&&E===x+1)&&((S=function(e){for(var t=e.split("").reverse(),s=0,a=!0;a&&s<t.length;)s?"9"===t[s]?t[s]="0":(t[s]=(parseInt(t[s],10)+1).toString(),a=!1):(parseInt(t[s],10)<5&&(a=!1),t[s]="0"),s+=1;return a&&t.push("1"),t.reverse().join("")}(S)).length===k+1&&(M+=1),E&&(S=S.slice(0,-1)),o=S.slice(0,M),r=S.slice(M)),b&&(r=r.replace(/0*$/,""));var w=parseInt(d,10);w>0?r.length<=w?(o+=r+=l(w-r.length),r=""):(o+=r.slice(0,w),r=r.slice(w)):w<0&&(r=l(Math.abs(w)-o.length)+o+r,o="0"),b||((r=r.slice(0,x)).length<x&&(r+=l(x-r.length)),o.length<j&&(o=l(j-o.length)+o));var T,C="";if(m)for(y=o;y.length;)g.length&&(T=g.shift()),C&&(C=h+C),C=y.slice(-T)+C,y=y.slice(0,-T);else C=o;return r&&(C=C+f+r),C}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function p(e,t){var s=[];return x(k(t),(function(a){if("_durationLabels"===a.slice(0,15)){var i=a.slice(15).toLowerCase();x(k(t[a]),(function(n){n.slice(0,1)===e&&s.push({type:i,key:n,label:t[a][n]})}))}})),s}c.cache={};var m={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,s){return 1===t&&null===s?e:e+e}};function g(e){return"[object Array]"===Object.prototype.toString.call(e)}function b(e){return"[object Object]"===Object.prototype.toString.call(e)}function j(e,t){var s,a=0,i=e&&e.length||0;for("function"!=typeof t&&(s=t,t=function(e){return e===s});a<i;){if(t(e[a]))return e[a];a+=1}}function x(e,t){var s=0,a=e.length;if(e&&a)for(;s<a;){if(!1===t(e[s],s))return;s+=1}}function h(e,t){var s=0,a=e.length,i=[];if(!e||!a)return i;for(;s<a;)i[s]=t(e[s],s),s+=1;return i}function f(e,t){return h(e,(function(e){return e[t]}))}function O(e){var t=[];return x(e,(function(e){e&&t.push(e)})),t}function v(e){var t=[];return x(e,(function(e){j(t,e)||t.push(e)})),t}function y(e,t){var s=[];return x(e,(function(e){x(t,(function(t){e===t&&s.push(e)}))})),v(s)}function M(e,t){var s=[];return x(e,(function(a,i){if(!t(a))return s=e.slice(i),!1})),s}function E(e,t){return M(e.slice().reverse(),t).reverse()}function _(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}function k(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t}function S(e,t){var s=0,a=e.length;if(!e||!a)return!1;for(;s<a;){if(!0===t(e[s],s))return!0;s+=1}return!1}function w(e){var t=[];return x(e,(function(e){t=t.concat(e)})),t}function T(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function C(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function I(){var e,t=[].slice.call(arguments),s={};if(x(t,(function(t,a){if(!a){if(!g(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?b(t)&&_(s,t):s.precision=t:s.template=t})),!e||!e.length)return[];s.returnMomentTypes=!0;var a=h(e,(function(e){return e.format(s)})),i=y(n,v(f(w(a),"type"))),o=s.largest;return o&&(i=i.slice(0,o)),s.returnMomentTypes=!1,s.outputTypes=i,h(e,(function(e){return e.format(s)}))}function L(){var s=[].slice.call(arguments),i=_({},this.format.defaults),l=this.asMilliseconds(),c=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(l=0,c=0);var w=l<0,T=e.duration(Math.abs(l),"milliseconds"),C=e.duration(Math.abs(c),"months");x(s,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?b(e)&&_(i,e):i.precision=e:i.template=e}));var I={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},L={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};i.types=n;var P=function(e){return j(n,(function(t){return L[t].test(e)}))},F=new RegExp(h(n,(function(e){return L[e].source})).join("|"),"g");i.duration=this;var N="function"==typeof i.template?i.template.apply(i):i.template,D=i.outputTypes,R=i.returnMomentTypes,z=i.largest,A=[];D||(g(i.stopTrim)&&(i.stopTrim=i.stopTrim.join("")),i.stopTrim&&x(i.stopTrim.match(F),(function(e){var t=P(e);"escape"!==t&&"general"!==t&&A.push(t)})));var B=e.localeData();B||(B={}),x(k(m),(function(e){"function"!=typeof m[e]?B["_"+e]||(B["_"+e]=m[e]):B[e]||(B[e]=m[e])})),x(k(B._durationTimeTemplates),(function(e){N=N.replace("_"+e+"_",B._durationTimeTemplates[e])}));var V=i.userLocale||e.locale(),U=i.useLeftUnits,$=i.usePlural,G=i.precision,q=i.forceLength,H=i.useGrouping,W=i.trunc,K=i.useSignificantDigits&&G>0,J=K?i.precision:0,Y=J,Q=i.minValue,X=!1,Z=i.maxValue,ee=!1,te=i.useToLocaleString,se=i.groupingSeparator,ae=i.decimalSeparator,ie=i.grouping;te=te&&(t||a);var ne=i.trim;g(ne)&&(ne=ne.join(" ")),null===ne&&(z||Z||K)&&(ne="all"),null!==ne&&!0!==ne&&"left"!==ne&&"right"!==ne||(ne="large"),!1===ne&&(ne="");var oe=function(e){return e.test(ne)},re=/large/,le=/small/,ce=/both/,ue=/mid/,de=/^all|[^sm]all/,pe=/final/,me=z>0||S([re,ce,de],oe),ge=S([le,ce,de],oe),be=S([ue,de],oe),je=S([pe,de],oe),xe=h(N.match(F),(function(e,t){var s=P(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==s&&"general"!==s&&A.push(s)),{index:t,length:e.length,text:"",token:"escape"===s?e.replace(L.escape,"$1"):e,type:"escape"===s||"general"===s?null:s}})),he={index:0,length:0,token:"",text:"",type:null},fe=[];U&&xe.reverse(),x(xe,(function(e){if(e.type)return(he.type||he.text)&&fe.push(he),void(he=e);U?he.text=e.token+he.text:he.text+=e.token})),(he.type||he.text)&&fe.push(he),U&&fe.reverse();var Oe=y(n,v(O(f(fe,"type"))));if(!Oe.length)return f(fe,"text").join("");Oe=h(Oe,(function(e,t){var s,a=t+1===Oe.length,n=!t;s="years"===e||"months"===e?C.as(e):T.as(e);var o=Math.floor(s),r=s-o,l=j(fe,(function(t){return e===t.type}));return n&&Z&&s>Z&&(ee=!0),a&&Q&&Math.abs(i.duration.as(e))<Q&&(X=!0),n&&null===q&&l.length>1&&(q=!0),T.subtract(o,e),C.subtract(o,e),{rawValue:s,wholeValue:o,decimalValue:a?r:0,isSmallest:a,isLargest:n,type:e,tokenLength:l.length}}));var ve=W?Math.floor:Math.round,ye=function(e,t){var s=Math.pow(10,t);return ve(e*s)/s},Me=!1,Ee=!1,_e=function(e,t){var s={useGrouping:H,groupingSeparator:se,decimalSeparator:ae,grouping:ie,useToLocaleString:te};return K&&(J<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(s.maximumSignificantDigits=J,e.significantDigits=J)),ee&&!Ee&&(e.isLargest?(e.wholeValue=Z,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),X&&!Ee&&(e.isSmallest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?G<0?e.value=ye(e.wholeValue,G):0===G?e.value=ve(e.wholeValue+e.decimalValue):K?(e.value=W?ye(e.rawValue,J-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(J-=e.wholeValue.toString().length)):(s.fractionDigits=G,e.value=W?e.wholeValue+ye(e.decimalValue,G):e.wholeValue+e.decimalValue):K&&e.wholeValue?(e.value=Math.round(ye(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),J-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(q||Me)&&(s.minimumIntegerDigits=e.tokenLength,Ee&&s.maximumSignificantDigits<e.tokenLength&&delete s.maximumSignificantDigits),!Me&&(e.value>0||""===ne||j(A,e.type)||j(D,e.type))&&(Me=!0),e.formattedValue=u(e.value,s,V),s.useGrouping=!1,s.decimalSeparator=".",e.formattedValueEn=u(e.value,s,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((Oe=O(Oe=h(Oe,_e))).length>1){var ke=function(e){return j(Oe,(function(t){return t.type===e}))},Se=function(e){var t=ke(e.type);t&&x(e.targets,(function(e){var s=ke(e.type);s&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,s.rawValue+=1,s.wholeValue+=1,s.decimalValue=0,s.formattedValueEn=s.wholeValue.toString(),Ee=!0)}))};x(o,Se)}return Ee&&(Me=!1,J=Y,Oe=O(Oe=h(Oe,_e))),!D||ee&&!i.trim?(me&&(Oe=M(Oe,(function(e){return!e.isSmallest&&!e.wholeValue&&!j(A,e.type)}))),z&&Oe.length&&(Oe=Oe.slice(0,z)),ge&&Oe.length>1&&(Oe=E(Oe,(function(e){return!e.wholeValue&&!j(A,e.type)&&!e.isLargest}))),be&&(Oe=O(Oe=h(Oe,(function(e,t){return t>0&&t<Oe.length-1&&!e.wholeValue?null:e})))),!je||1!==Oe.length||Oe[0].wholeValue||!W&&Oe[0].isSmallest&&Oe[0].rawValue<Q||(Oe=[])):Oe=O(Oe=h(Oe,(function(e){return j(D,(function(t){return e.type===t}))?e:null}))),R?Oe:(x(fe,(function(e){var t=I[e.type],s=j(Oe,(function(t){return t.type===e.type}));if(t&&s){var a=s.formattedValueEn.split(".");a[0]=parseInt(a[0],10),a[1]?a[1]=parseFloat("0."+a[1],10):a[1]=null;var i=B.durationPluralKey(t,a[0],a[1]),n=p(t,B),o=!1,l={};x(B._durationLabelTypes,(function(t){var s=j(n,(function(e){return e.type===t.type&&e.key===i}));s&&(l[s.type]=s.label,r(e.text,t.string)&&(e.text=e.text.replace(t.string,s.label),o=!0))})),$&&!o&&(n.sort(d),x(n,(function(t){return l[t.type]===t.label?!r(e.text,t.label)&&void 0:r(e.text,t.label)?(e.text=e.text.replace(t.label,l[t.type]),!1):void 0})))}})),(fe=h(fe,(function(e){if(!e.type)return e.text;var t=j(Oe,(function(t){return t.type===e.type}));if(!t)return"";var s="";return U&&(s+=e.text),(w&&ee||!w&&X)&&(s+="< ",ee=!1,X=!1),(w&&X||!w&&ee)&&(s+="> ",ee=!1,X=!1),w&&(t.value>0||""===ne||j(A,t.type)||j(D,t.type))&&(s+="-",w=!1),"milliseconds"===e.type&&t.formattedValueMS?s+=t.formattedValueMS:s+=t.formattedValue,U||(s+=e.text),s}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function P(){var e=this.duration,t=function(t){return e._data[t]},s=j(this.types,t),a=function(e,t){for(var s=e.length;s-=1;)if(t(e[s]))return e[s]}(this.types,t);switch(s){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(s===a)return"d __";case"weeks":return s===a?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(s===a)return"M __";case"years":return s===a?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function F(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=I,e.duration.fn.format=L,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:P,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",m)}var N=function(e,t,s){return e.toLocaleString(t,s)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&C(N),s=t&&T(N);var D=function(e,t,s){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,s).format(e)};return a=C(D),i=a&&T(D),F(e),F},i=[s(19)],void 0===(n="function"==typeof(a=r)?a.apply(t,i):a)||(e.exports=n),o&&(o.momentDurationFormatSetup=o.moment?r(o.moment):r)},function(e,t,s){(function(t){const s="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=s}).call(this,s(147))},function(e,t){const s=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:s,MAX_SAFE_COMPONENT_LENGTH:16}},,,,function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(47);case"v7light":return s(49);case"v8dark":return s(51);case"v8light":return s(53)}},function(e,t,s){var a=s(35),i=s(48);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSetupModeEnterButton__buttonWrapper{padding:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(50);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSetupModeEnterButton__buttonWrapper{padding:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(52);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSetupModeEnterButton__buttonWrapper{padding:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(54);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSetupModeEnterButton__buttonWrapper{padding:12px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(56);case"v7light":return s(58);case"v8dark":return s(60);case"v8light":return s(62)}},function(e,t,s){var a=s(35),i=s(57);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monNoData__content{max-width:600px;text-align:center;position:relative}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(59);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monNoData__content{max-width:600px;text-align:center;position:relative}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(61);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monNoData__content{max-width:600px;text-align:center;position:relative}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(63);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monNoData__content{max-width:600px;text-align:center;position:relative}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(65);case"v7light":return s(67);case"v8dark":return s(69);case"v8light":return s(71)}},function(e,t,s){var a=s(35),i=s(66);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(68);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(70);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(72);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(74);case"v7light":return s(76);case"v8dark":return s(78);case"v8light":return s(80)}},function(e,t,s){var a=s(35),i=s(75);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__legendItem{font-size:12px;cursor:pointer;color:#DFE5EF;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{overflow:hidden;white-space:nowrap;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendValue{overflow:hidden;white-space:nowrap;margin-left:4px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(77);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__legendItem{font-size:12px;cursor:pointer;color:#343741;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{overflow:hidden;white-space:nowrap;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendValue{overflow:hidden;white-space:nowrap;margin-left:4px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(79);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__legendItem{font-size:12px;cursor:pointer;color:#DFE5EF;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{overflow:hidden;white-space:nowrap;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendValue{overflow:hidden;white-space:nowrap;margin-left:4px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(81);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__legendItem{font-size:12px;cursor:pointer;color:#343741;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{overflow:hidden;white-space:nowrap;display:flex;flex-direction:row;align-items:center}.monRhythmChart__legendValue{overflow:hidden;white-space:nowrap;margin-left:4px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(83);case"v7light":return s(85);case"v8dark":return s(87);case"v8light":return s(89)}},function(e,t,s){var a=s(35),i=s(84);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart{position:relative;display:flex;flex-direction:column;flex:1 0 auto}.monRhythmChart__content{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex:1 0 auto}.monRhythmChart__visualization{display:flex;flex-direction:column;flex:1 0 auto;position:relative}.monRhythmChart__visualization>div{min-width:1px;width:100%;height:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(86);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart{position:relative;display:flex;flex-direction:column;flex:1 0 auto}.monRhythmChart__content{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex:1 0 auto}.monRhythmChart__visualization{display:flex;flex-direction:column;flex:1 0 auto;position:relative}.monRhythmChart__visualization>div{min-width:1px;width:100%;height:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(88);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart{position:relative;display:flex;flex-direction:column;flex:1 0 auto}.monRhythmChart__content{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex:1 0 auto}.monRhythmChart__visualization{display:flex;flex-direction:column;flex:1 0 auto;position:relative}.monRhythmChart__visualization>div{min-width:1px;width:100%;height:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(90);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart{position:relative;display:flex;flex-direction:column;flex:1 0 auto}.monRhythmChart__content{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex:1 0 auto}.monRhythmChart__visualization{display:flex;flex-direction:column;flex:1 0 auto;position:relative}.monRhythmChart__visualization>div{min-width:1px;width:100%;height:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(92);case"v7light":return s(94);case"v8dark":return s(96);case"v8light":return s(98)}},function(e,t,s){var a=s(35),i=s(93);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{text-align:left;font-size:12px;padding:4px;word-wrap:break-word;white-space:normal}.monChart__tooltipLabel{font-weight:700}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(95);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{text-align:left;font-size:12px;padding:4px;word-wrap:break-word;white-space:normal}.monChart__tooltipLabel{font-weight:700}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(97);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{text-align:left;font-size:12px;padding:4px;word-wrap:break-word;white-space:normal}.monChart__tooltipLabel{font-weight:700}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(99);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{text-align:left;font-size:12px;padding:4px;word-wrap:break-word;white-space:normal}.monChart__tooltipLabel{font-weight:700}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(101);case"v7light":return s(103);case"v8dark":return s(105);case"v8light":return s(107)}},function(e,t,s){var a=s(35),i=s(102);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{visibility:hidden;padding-right:12px}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(104);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{visibility:hidden;padding-right:12px}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(106);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{visibility:hidden;padding-right:12px}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(108);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{visibility:hidden;padding-right:12px}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(110);case"v7light":return s(112);case"v8dark":return s(114);case"v8light":return s(116)}},function(e,t,s){var a=s(35),i=s(111);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monClusterTitle{font-size:20px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monUnassigned__children,.monCluster .monAssigned__children{padding-top:24px}.monCluster .monChild{float:left;align-self:center;background-color:#25262E;margin:8px;border:1px solid #535966;border-radius:4px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #7DE2D1}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #F66}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #FFCE7A}.monCluster .monChild .monChild__title{padding:4px 8px;text-align:center;font-size:12px;color:#fff;display:flex;flex-direction:row;align-items:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;padding:4px 8px;font-size:12px;position:relative;display:inline-block}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(113);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monClusterTitle{font-size:20px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monUnassigned__children,.monCluster .monAssigned__children{padding-top:24px}.monCluster .monChild{float:left;align-self:center;background-color:#F5F7FA;margin:8px;border:1px solid #98A2B3;border-radius:4px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #017D73}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #BD271E}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #F5A700}.monCluster .monChild .monChild__title{padding:4px 8px;text-align:center;font-size:12px;color:#fff;display:flex;flex-direction:row;align-items:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;padding:4px 8px;font-size:12px;position:relative;display:inline-block}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(115);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monUnassigned__children,.monCluster .monAssigned__children{padding-top:24px}.monCluster .monChild{float:left;align-self:center;background-color:#25262E;margin:8px;border:1px solid #535966;border-radius:4px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #7DDED8}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #F86B63}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #F3D371}.monCluster .monChild .monChild__title{padding:4px 8px;text-align:center;font-size:12px;color:#fff;display:flex;flex-direction:row;align-items:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;padding:4px 8px;font-size:12px;position:relative;display:inline-block}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(117);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monUnassigned__children,.monCluster .monAssigned__children{padding-top:24px}.monCluster .monChild{float:left;align-self:center;background-color:#F5F7FA;margin:8px;border:1px solid #98A2B3;border-radius:4px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #00BFB3}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #BD271E}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #FEC514}.monCluster .monChild .monChild__title{padding:4px 8px;text-align:center;font-size:12px;color:#fff;display:flex;flex-direction:row;align-items:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;padding:4px 8px;font-size:12px;position:relative;display:inline-block}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(119);case"v7light":return s(121);case"v8dark":return s(123);case"v8light":return s(125)}},function(e,t,s){var a=s(35),i=s(120);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monElasticsearchIndicesTable__status{display:flex;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(122);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monElasticsearchIndicesTable__status{display:flex;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(124);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monElasticsearchIndicesTable__status{display:flex;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(126);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monElasticsearchIndicesTable__status{display:flex;align-items:center}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(128);case"v7light":return s(130);case"v8dark":return s(132);case"v8light":return s(134)}},function(e,t,s){var a=s(35),i=s(129);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#DFE5EF}.monTableCell__clusterCellLicense{font-size:16px}.monTableCell__clusterCellExpiration{color:#98A2B3}.monTableCell__name,.monTableCell__status{font-size:18px;font-size:1.125rem;line-height:1.5}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{font-size:14px;font-size:.875rem;line-height:1.5;color:#98A2B3}.monTableCell__number{font-size:20px;font-size:1.25rem;line-height:1.5}.monTableCell__splitNumber{font-size:18px;font-size:1.125rem;line-height:1.5}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(131);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#343741}.monTableCell__clusterCellLicense{font-size:16px}.monTableCell__clusterCellExpiration{color:#69707D}.monTableCell__name,.monTableCell__status{font-size:18px;font-size:1.125rem;line-height:1.5}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{font-size:14px;font-size:.875rem;line-height:1.5;color:#69707D}.monTableCell__number{font-size:20px;font-size:1.25rem;line-height:1.5}.monTableCell__splitNumber{font-size:18px;font-size:1.125rem;line-height:1.5}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(133);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#DFE5EF}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#98A2B3}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{font-size:14px;font-size:1rem;line-height:1.71429rem;color:#98A2B3}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(135);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#343741}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#69707D}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{font-size:14px;font-size:1rem;line-height:1.71429rem;color:#69707D}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(137);case"v7light":return s(139);case"v8dark":return s(141);case"v8light":return s(143)}},function(e,t,s){var a=s(35),i=s(138);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(140);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(142);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(144);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}\n",""]),e.exports=t},function(e,t,s){const a=s(146);e.exports=(e,t)=>new a(e,t).major},function(e,t,s){const a=s(41),{MAX_LENGTH:i,MAX_SAFE_INTEGER:n}=s(42),{re:o,t:r}=s(148),l=s(149),{compareIdentifiers:c}=s(150);class SemVer{constructor(e,t){if(t=l(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);a("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?o[r.LOOSE]:o[r.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(a("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],i=e.prerelease[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const s=this.build[t],i=e.build[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=SemVer},function(e,t,s){e.exports=s(9)(915)},function(e,t,s){const{MAX_SAFE_COMPONENT_LENGTH:a}=s(42),i=s(41),n=(t=e.exports={}).re=[],o=t.src=[],r=t.t={};let l=0;const c=(e,t,s)=>{const a=l++;i(a,t),r[e]=a,o[a]=t,n[a]=new RegExp(t,s?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${o[r.NUMERICIDENTIFIER]})\\.(${o[r.NUMERICIDENTIFIER]})\\.(${o[r.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${o[r.NUMERICIDENTIFIERLOOSE]})\\.(${o[r.NUMERICIDENTIFIERLOOSE]})\\.(${o[r.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${o[r.NUMERICIDENTIFIER]}|${o[r.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${o[r.NUMERICIDENTIFIERLOOSE]}|${o[r.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${o[r.PRERELEASEIDENTIFIER]}(?:\\.${o[r.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${o[r.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[r.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${o[r.BUILDIDENTIFIER]}(?:\\.${o[r.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${o[r.MAINVERSION]}${o[r.PRERELEASE]}?${o[r.BUILD]}?`),c("FULL",`^${o[r.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${o[r.MAINVERSIONLOOSE]}${o[r.PRERELEASELOOSE]}?${o[r.BUILD]}?`),c("LOOSE",`^${o[r.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${o[r.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${o[r.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${o[r.XRANGEIDENTIFIER]})(?:\\.(${o[r.XRANGEIDENTIFIER]})(?:\\.(${o[r.XRANGEIDENTIFIER]})(?:${o[r.PRERELEASE]})?${o[r.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${o[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[r.XRANGEIDENTIFIERLOOSE]})(?:${o[r.PRERELEASELOOSE]})?${o[r.BUILD]}?)?)?`),c("XRANGE",`^${o[r.GTLT]}\\s*${o[r.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${o[r.GTLT]}\\s*${o[r.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),c("COERCERTL",o[r.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${o[r.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${o[r.LONETILDE]}${o[r.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${o[r.LONETILDE]}${o[r.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${o[r.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${o[r.LONECARET]}${o[r.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${o[r.LONECARET]}${o[r.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${o[r.GTLT]}\\s*(${o[r.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${o[r.GTLT]}\\s*(${o[r.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${o[r.GTLT]}\\s*(${o[r.LOOSEPLAIN]}|${o[r.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${o[r.XRANGEPLAIN]})\\s+-\\s+(${o[r.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${o[r.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[r.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(e,t){const s=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:s.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},function(e,t){const s=/^[0-9]+$/,a=(e,t)=>{const a=s.test(e),i=s.test(t);return a&&i&&(e=+e,t=+t),e===t?0:a&&!i?-1:i&&!a?1:e<t?-1:1};e.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(152);case"v7light":return s(154);case"v8dark":return s(156);case"v8light":return s(158)}},function(e,t,s){var a=s(35),i=s(153);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{font-weight:normal;background:rgba(212,218,229,0.7);font-size:12px;padding:4px;border-radius:4px;pointer-events:none}.monSparklineTooltip__xValue{color:rgba(255,255,255,0.7)}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{font-size:20px;color:rgba(212,218,229,0.7);display:none}.monSparklineTooltip__container{position:fixed;z-index:2000;display:flex;flex-direction:row;justify-content:center;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(155);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{font-weight:normal;background:rgba(52,55,65,0.7);font-size:12px;padding:4px;border-radius:4px;pointer-events:none}.monSparklineTooltip__xValue{color:rgba(255,255,255,0.7)}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{font-size:20px;color:rgba(52,55,65,0.7);display:none}.monSparklineTooltip__container{position:fixed;z-index:2000;display:flex;flex-direction:row;justify-content:center;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(157);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{font-weight:normal;background:rgba(212,218,229,0.7);font-size:12px;padding:4px;border-radius:6px;pointer-events:none}.monSparklineTooltip__xValue{color:rgba(255,255,255,0.7)}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{font-size:22px;color:rgba(212,218,229,0.7);display:none}.monSparklineTooltip__container{position:fixed;z-index:2000;display:flex;flex-direction:row;justify-content:center;align-items:center}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(159);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{font-weight:normal;background:rgba(52,55,65,0.7);font-size:12px;padding:4px;border-radius:6px;pointer-events:none}.monSparklineTooltip__xValue{color:rgba(255,255,255,0.7)}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{font-size:22px;color:rgba(52,55,65,0.7);display:none}.monSparklineTooltip__container{position:fixed;z-index:2000;display:flex;flex-direction:row;justify-content:center;align-items:center}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(161);case"v7light":return s(163);case"v8dark":return s(165);case"v8light":return s(167)}},function(e,t,s){var a=s(35),i=s(162);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(164);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(166);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(168);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(170);case"v7light":return s(172);case"v8dark":return s(174);case"v8light":return s(176)}},function(e,t,s){var a=s(35),i=s(171);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__queueMessage{margin-left:24px;color:#98A2B3}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(173);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__queueMessage{margin-left:24px;color:#69707D}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(175);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__queueMessage{margin-left:24px;color:#98A2B3}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(177);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__queueMessage{margin-left:24px;color:#69707D}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(179);case"v7light":return s(181);case"v8dark":return s(183);case"v8light":return s(185)}},function(e,t,s){var a=s(35),i=s(180);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(182);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(184);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(186);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(188);case"v7light":return s(190);case"v8dark":return s(192);case"v8light":return s(194)}},function(e,t,s){var a=s(35),i=s(189);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px !important}.monPipelineViewer__metric{text-align:left;padding-left:32px}}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(191);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px !important}.monPipelineViewer__metric{text-align:left;padding-left:32px}}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(193);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px !important}.monPipelineViewer__metric{text-align:left;padding-left:32px}}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(195);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px !important}.monPipelineViewer__metric{text-align:left;padding-left:32px}}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(197);case"v7light":return s(199);case"v8dark":return s(201);case"v8light":return s(203)}},function(e,t,s){var a=s(35),i=s(198);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(200);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(202);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(204);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}\n",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(206);case"v7light":return s(208);case"v8dark":return s(210);case"v8light":return s(212)}},function(e,t,s){var a=s(35),i=s(207);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__spaceContainer{background-color:#1D1E24;align-self:stretch;display:flex;border-bottom:solid 2px #1D1E24}.monPipelineViewer__spacer{width:12px;align-self:stretch;margin-left:12px;border-left:1px #343741 dashed}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{display:flex;min-height:32px;align-items:center;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(2n+1){background:#24252d}.monPipelineViewer__conditional{font-weight:bold}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__spacer{border:none}}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(209);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__spaceContainer{background-color:#fff;align-self:stretch;display:flex;border-bottom:solid 2px #fff}.monPipelineViewer__spacer{width:12px;align-self:stretch;margin-left:12px;border-left:1px #D3DAE6 dashed}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{display:flex;min-height:32px;align-items:center;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(2n+1){background:#f5f7fa}.monPipelineViewer__conditional{font-weight:bold}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__spacer{border:none}}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(211);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__spaceContainer{background-color:#1D1E24;align-self:stretch;display:flex;border-bottom:solid 2px #1D1E24}.monPipelineViewer__spacer{width:12px;align-self:stretch;margin-left:12px;border-left:1px #343741 dashed}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{display:flex;min-height:32px;align-items:center;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(2n+1){background:#24252d}.monPipelineViewer__conditional{font-weight:bold}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__spacer{border:none}}\n",""]),e.exports=t},function(e,t,s){var a=s(35),i=s(213);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};a(i,n);e.exports=i.locals||{}},function(e,t,s){(t=s(36)(!1)).push([e.i,".monPipelineViewer__spaceContainer{background-color:#fff;align-self:stretch;display:flex;border-bottom:solid 2px #fff}.monPipelineViewer__spacer{width:12px;align-self:stretch;margin-left:12px;border-left:1px #D3DAE6 dashed}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{display:flex;min-height:32px;align-items:center;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(2n+1){background:#f5f7fa}.monPipelineViewer__conditional{font-weight:bold}@media only screen and (min-width: 768px) and (max-width: 991px){.monPipelineViewer__spacer{border:none}}\n",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e,t){var s=a.useRef((function(){}));a.useEffect((function(){s.current=e})),a.useEffect((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},,,,,,,,,function(e,t,s){"use strict";s.r(t),s.d(t,"renderApp",(function(){return go}));var a=s(5),i=s.n(a),n=s(25),o=s.n(n),r=s(18),l=s(17),c=s(0),u=s(6),d=s(15);var p=s(39),m=s.n(p),g=s(7),b=s(8),j=s.n(b),x=s(26),h=s(21),f=s(22);class url_state_GlobalState{constructor(e,t,s){j()(this,"stateSyncRef",void 0),j()(this,"stateContainer",void 0),j()(this,"stateStorage",void 0),j()(this,"stateContainerChangeSub",void 0),j()(this,"syncQueryStateWithUrlManager",void 0),j()(this,"timefilterRef",void 0),j()(this,"lastAssignedState",{}),this.timefilterRef=e.timefilter.timefilter;const a=Object(x.createHashHistory)();this.stateStorage=Object(f.createKbnUrlStateStorage)({useHash:!1,history:a,...Object(f.withNotifyOnErrors)(t)});const i=this.stateStorage.get("_g");this.stateContainer=Object(f.createStateContainer)(i,{set:e=>(t,s)=>({...e,[t]:s})}),this.stateSyncRef=Object(f.syncState)({storageKey:"_g",stateContainer:this.stateContainer,stateStorage:this.stateStorage}),this.stateContainerChangeSub=this.stateContainer.state$.subscribe((()=>{this.lastAssignedState=this.getState(),g.a.isInitializated()&&g.a.shims.breadcrumbs.update(),this.syncExternalState(s)})),this.syncQueryStateWithUrlManager=Object(h.syncQueryStateWithUrl)(e,this.stateStorage),this.stateSyncRef.start(),this.lastAssignedState=this.getState()}syncExternalState(e){const t=this.stateContainer.get();for(const s in t)({save:1,time:1,refreshInterval:1,filters:1})[s]||t[s]!==e[s]&&(e[s]=t[s])}setState(e){const t=this.getState(),s={...t,...e};if(e&&(a=s,i=t,JSON.stringify(a)===JSON.stringify(i)))return;var a,i;const n={...s,refreshInterval:this.timefilterRef.getRefreshInterval(),time:this.timefilterRef.getTime()};this.lastAssignedState=n,this.stateContainer.set(n)}getState(){const e={...this.lastAssignedState,...this.stateContainer.get()};delete e.filters;const{refreshInterval:t,time:s,...a}=e;return a||{}}destroy(){this.syncQueryStateWithUrlManager.stop(),this.stateContainerChangeSub.unsubscribe(),this.stateSyncRef.stop()}}var O=s(2);const v=Object(a.createContext)({}),y=({query:e,toasts:t,children:s})=>{const a={},i=new url_state_GlobalState(e,t,a),n=i.getState();for(const e in n)n.hasOwnProperty(e)&&(a[e]=n[e]);a.refreshInterval={value:1e4,pause:!1},a.save=()=>{const e={...a};delete e.save,i.setState(e)};const{value:o,pause:r}=g.a.shims.timefilter.getRefreshInterval();var l;!o&&r&&(g.a.shims.timefilter.setRefreshInterval(a.refreshInterval),null===(l=a.save)||void 0===l||l.call(a));return Object(O.jsx)(v.Provider,{value:a},s)},M={from:"now-1h",to:"now",interval:">=10s"},E=m()((()=>{var e,t;const{services:s}=Object(l.useKibana)(),i=Object(a.useContext)(v),n={...M,...null===(e=s.data)||void 0===e?void 0:e.query.timefilter.timefilter.getTime()},{value:o,pause:r}=null===(t=s.data)||void 0===t?void 0:t.query.timefilter.timefilter.getRefreshInterval(),[c,u]=Object(a.useState)(o||1e4),[d,p]=Object(a.useState)(r||false),[m,b]=Object(a.useState)(n),[j,x]=Object(a.useState)(!1),h=Object(a.useCallback)(((e,t)=>{var s;b({...m,from:e,to:t}),i.time={from:e,to:t},g.a.shims.timefilter.setTime(i.time),null===(s=i.save)||void 0===s||s.call(i)}),[m,b,i]);return Object(a.useEffect)((()=>{const e=g.a.shims.timefilter.getTimeUpdate$().subscribe((function(){var e;const t=g.a.shims.timefilter.getTime();b({...m,...t}),i.time={...t},null===(e=i.save)||void 0===e||e.call(i)}));return()=>e.unsubscribe()}),[]),{currentTimerange:m,setTimeRange:b,handleTimeChange:h,setRefreshInterval:u,refreshInterval:c,setIsPaused:p,isPaused:d,setIsDisabled:x,isDisabled:j}}));var _=s(29);const k=({pageTitle:e,onRefresh:t})=>{const{services:s}=Object(l.useKibana)(),i=s.uiSettings.get(_.UI_SETTINGS.TIMEPICKER_QUICK_RANGES),n=Object(a.useMemo)((()=>i.map((({from:e,to:t,display:s})=>({start:e,end:t,label:s})))),[i]),{currentTimerange:o,handleTimeChange:r,setRefreshInterval:c,refreshInterval:d,setIsPaused:p,isPaused:m,isDisabled:b}=Object(a.useContext)(E.Context),j=Object(a.useContext)(v),x=Object(a.useCallback)((e=>{e.isInvalid||r(e.start,e.end)}),[r]),h=Object(a.useCallback)((({refreshInterval:e,isPaused:t})=>{var s;c(e),p(t),j.refreshInterval={pause:t,value:e},g.a.shims.timefilter.setRefreshInterval(j.refreshInterval),null===(s=j.save)||void 0===s||s.call(j)}),[c,p,j]);return Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"l",justifyContent:"spaceBetween",responsive:!0},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"none",justifyContent:"spaceEvenly",direction:"column",responsive:!0},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)("div",{id:"setupModeNav"})),Object(O.jsx)(u.EuiFlexItem,{className:"monTopNavSecondItem"},e&&Object(O.jsx)("div",{"data-test-subj":"monitoringPageTitle"},Object(O.jsx)(u.EuiTitle,{size:"xs"},Object(O.jsx)("h1",null,e)))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)("div",{style:{padding:8}},Object(O.jsx)(u.EuiSuperDatePicker,{isDisabled:b,start:o.from,end:o.to,onTimeChange:x,onRefresh:t,isPaused:m,refreshInterval:d,onRefreshChange:h,commonlyUsedRanges:n}))))};var S=s(16),w=(s(46),s(27)),T=s(1);const C=e=>{const[t,s]=i.a.useState(!1),a=Object(w.useUiTracker)({app:"stack_monitoring"});if(!e.enabled)return null;return Object(O.jsx)("div",{className:"monSetupModeEnterButton__buttonWrapper","data-test-subj":"monitoringSetupModeBtn"},Object(O.jsx)(u.EuiButton,{onClick:async function(){s(!0),await e.toggleSetupMode(!0),a({metric:`${T.Y}setupmode_enter`,metricType:w.METRIC_TYPE.CLICK}),s(!1)},iconType:"flag",size:"s",iconSide:"right",isLoading:t},c.i18n.translate("xpack.monitoring.setupMode.enter",{defaultMessage:"Enter setup mode"})))};var I=s(4);let L,P,F;const N={enabled:!1,data:null,callback:null,hideBottomBar:!1},D=()=>N,R=()=>N.callback&&N.callback(),z=async(e,t=!1)=>{const s=await(async(e,t=!1)=>{const s=L.cluster_uuid,a=L.ccs;let i="../api/monitoring/v1/setup/collection";i+=e?`/node/${e}`:!t&&s?`/cluster/${s}`:"/cluster";try{return await P.post(i,{body:JSON.stringify({ccs:a})})}catch(e){throw F(e),e}})(e,t);N.data=s;const a=Object(d.get)(s,"_meta.hasPermissions",!1);if(!a){let e="";return a||(e=c.i18n.translate("xpack.monitoring.setupMode.notAvailablePermissions",{defaultMessage:"You do not have the necessary permissions to do this."})),g.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.setupMode.notAvailableTitle",{defaultMessage:"Setup mode is not available"}),text:e}),A(!1)}R();if(!L.cluster_uuid){const e=Object(d.get)(s,"_meta.liveClusterUuid"),t=Object.values(Object(d.get)(s,"elasticsearch.byUuid",{})).filter((e=>e.isPartiallyMigrated||e.isFullyMigrated));e&&t.length>0&&(e=>{var t,s;L.cluster_uuid=e,null===(t=(s=L).save)||void 0===t||t.call(s)})(e)}},A=e=>{var t,s;N.enabled=e,L.inSetupMode=e,null===(t=(s=L).save)||void 0===t||t.call(s),B(),R(),e&&z()},B=()=>{if(e="no-data",Object(d.includes)(window.location.hash,e))return;var e;const t=!L.inSetupMode,s=g.a.shims.I18nContext;Object(n.render)(Object(O.jsx)(l.KibanaContextProvider,{services:g.a.shims.kibanaServices},Object(O.jsx)(s,null,Object(O.jsx)(C,{enabled:t,toggleSetupMode:A}))),document.getElementById("setupModeNav"))},V=async(e,t,s,a)=>{L=e,P=t,F=s,a&&(N.callback=a),L.inSetupMode&&A(!0)},U=(e,t=L)=>!1!==(null==e?void 0:e.setupModeSupported)&&(!!N.enabled||t.inSetupMode),$=e=>!!N.enabled&&(e!==I.d.MetricbeatMigration||!g.a.shims.isCloud),G=()=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiTitle,{size:"l"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataTitle",defaultMessage:"We're looking for your monitoring data"}))),Object(O.jsx)(u.EuiTextColor,{color:"subdued"},Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),q=()=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiTitle,{size:"l"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffTitle",defaultMessage:"Monitoring is currently off"}))),Object(O.jsx)(u.EuiTextColor,{color:"subdued"},Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),H=()=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiTitle,{size:"l"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededTitle",defaultMessage:"You need to make some adjustments"}))),Object(O.jsx)(u.EuiTextColor,{color:"subdued"},Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededDescription",defaultMessage:"To run monitoring please perform the following steps"}))))),W=()=>{const{ELASTIC_WEBSITE_URL:e}=g.a.shims.docLinks;return Object(O.jsx)(u.EuiTextColor,{color:"subdued"},Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription",defaultMessage:"Configure monitoring through "}),Object(O.jsx)(u.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Elasticsearch Service Console")," ",Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription2",defaultMessage:"Go to "}),Object(O.jsx)(u.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Logs and metrics")," ",Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription3",defaultMessage:"section for a deployment to configure monitoring. For more information visit "}),Object(O.jsx)(u.EuiLink,{href:`${e}guide/en/cloud/current/ec-enable-logging-and-monitoring.html`,target:"_blank"},"the documentation page."))))};function K({checkMessage:e}){const t=e||Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.defaultLoadingMessage",defaultMessage:"Loading, please wait..."});return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(G,null),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiLoadingSpinner,{size:"m"})),Object(O.jsx)(u.EuiFlexItem,{grow:!1},t)))}class collection_enabled_ExplainCollectionEnabled extends i.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.waitedTooLongTimer=null,this.state={waitedTooLong:!1}}componentWillUnmount(){clearInterval(this.waitedTooLongTimer)}handleClick(){const{enabler:e}=this.props;e.enableCollectionEnabled(),this.waitedTooLongTimer=setTimeout((()=>{this.setState({waitedTooLong:!0})}),22e3)}render(){const{reason:e,isCollectionEnabledUpdated:t,isCollectionEnabledUpdating:s}=this.props,{property:i,data:n,context:o}=e,r=this.state.waitedTooLong?Object(O.jsx)("p",null,Object(O.jsx)("a",{href:"#/"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.stillWaitingLinkText",defaultMessage:"Still waiting?"}))):null;return Object(O.jsx)(a.Fragment,null,t?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiTitle,{size:"l","data-test-subj":"monitoringCollectionEnabledMessage"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnTitle",defaultMessage:"Success! Getting your monitoring data."}))),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnDescription",defaultMessage:"When the data is in your cluster, your monitoring dashboard will show up here. This might take a few seconds."}))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiLoadingSpinner,{size:"l"}),Object(O.jsx)(u.EuiSpacer,null),r):(()=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(q,null),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:o,property:Object(O.jsx)(u.EuiCode,null,i),data:Object(O.jsx)(u.EuiCode,null,n)}})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnItOnDescription",defaultMessage:"Would you like to turn it on?"}))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionEnabled",isLoading:s},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}class collection_interval_ExplainCollectionInterval extends i.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{enabler:e}=this.props;e.enableCollectionInterval()}render(){const{reason:e,isCollectionIntervalUpdated:t,isCollectionIntervalUpdating:s}=this.props,{context:i,property:n,data:o}=e;return Object(O.jsx)(a.Fragment,null,t?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiTitle,{size:"l"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnTitle",defaultMessage:"Success! Wait a moment please."}))),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnDescription",defaultMessage:"As soon as monitoring data appears in your cluster the page will automatically refresh with your monitoring dashboard. This only takes only a few seconds."}))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiLoadingSpinner,{size:"l"})):(()=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(q,null),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionIntervalDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:i,property:Object(O.jsx)(u.EuiCode,null,n),data:Object(O.jsx)(u.EuiCode,null,o)}})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.wrongIntervalValueDescription",defaultMessage:"The collection interval setting needs to be a positive integer (10s is recommended) in order for the collection agents to be active."})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.changeIntervalDescription",defaultMessage:"Would you like us to change it and enable monitoring?"}))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionInterval",isLoading:s},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}function J({reason:e}){const{context:t,property:s,data:i}=e;return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(H,null),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.pluginEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data} set, which disables monitoring. Removing the {monitoringEnableFalse} setting from your configuration will put the default into effect and enable Monitoring.",values:{context:t,property:Object(O.jsx)(u.EuiCode,null,s),data:Object(O.jsx)(u.EuiCode,null,i),monitoringEnableFalse:Object(O.jsx)(u.EuiCode,null,"xpack.monitoring.enabled: false")}}))))}function Y({reason:e}){const{context:t,property:s,data:i}=e;return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(H,null),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,{className:"eui-textLeft"},Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersDescription",defaultMessage:"We checked the {context} settings for {property}, and found the reason: {data}.",values:{context:Object(O.jsx)(u.EuiCode,null,t),property:Object(O.jsx)(u.EuiCode,null,s),data:Object(O.jsx)(u.EuiCode,null,i)}})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.problemWithConfigDescription",defaultMessage:"Using monitoring exporters to ship the monitoring data to a remote monitoring cluster is highly recommended as it keeps the integrity of the monitoring data safe no matter what the state of the production cluster. However, as this instance of Kibana could not find any monitoring data, there seems to be a problem with the {property} configuration, or the {monitoringEs} settings in {kibanaConfig}.",values:{property:Object(O.jsx)(u.EuiCode,null,s),monitoringEs:Object(O.jsx)(u.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(O.jsx)(u.EuiCode,null,"kibana.yml")}})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.checkConfigDescription",defaultMessage:"Check that the intended exporters are enabled for sending statistics to the monitoring cluster, and that the monitoring cluster host matches the {monitoringEs} setting in {kibanaConfig} to see monitoring data in this instance of Kibana.",values:{monitoringEs:Object(O.jsx)(u.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(O.jsx)(u.EuiCode,null,"kibana.yml")}}))))}function Q(){return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(W,null),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,{className:"eui-textLeft"},Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersCloudDescription",defaultMessage:"In Elastic Cloud, your monitoring data is stored in your dedicated monitoring cluster."}))))}const X=e=>{const{reason:t}=e,{property:s,data:a,context:i}=t;switch(s){case"xpack.monitoring.collection.enabled":return Object(O.jsx)(collection_enabled_ExplainCollectionEnabled,e);case"xpack.monitoring.collection.interval":return Object(O.jsx)(collection_interval_ExplainCollectionInterval,e);case"xpack.monitoring.exporters":return Object(O.jsx)(Y,e);case"xpack.monitoring.exporters.cloud_enabled":return Object(O.jsx)(Q,null);case"xpack.monitoring.enabled":return Object(O.jsx)(J,e);case"custom":return Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,t.message));default:return Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.reasons.explainWhyNoDataDescription",defaultMessage:"There is a {context} setting that has {property} set to {data}.",values:{context:Object(O.jsx)(u.EuiCode,null,i),property:Object(O.jsx)(u.EuiCode,null,s),data:Object(O.jsx)(u.EuiCode,null,a)}})))}};function Z(e){return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(X,e))}function ee(){return Object(O.jsx)("div",{"data-test-subj":"weTriedContainer"},Object(O.jsx)(u.EuiTitle,{size:"l"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.reasons.couldNotActivateMonitoringTitle",defaultMessage:"We couldn't activate monitoring"}))),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,{className:"eui-textLeft"},Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.reasons.noMonitoringDataFoundDescription",defaultMessage:'No monitoring data found. Try setting the time filter to "Last 1 hour" or check if data is available for a different time period.'})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.reasons.ifDataInClusterDescription",defaultMessage:"If data is in your cluster, your monitoring dashboards will show up here."}))))}const te=({errors:e})=>{const t={};return e.filter((e=>{const{statusCode:s,error:a,message:i}=e,n=`${s}${a}${i}`;if(!t[n])return t[n]=!0,!0})).map(((e,t)=>{const{message:s,statusCode:i,error:n}=e;return Object(O.jsx)(a.Fragment,{key:`checker-error-${t}`},Object(O.jsx)(u.EuiDescriptionListTitle,null,i," ",n),Object(O.jsx)(u.EuiDescriptionListDescription,null,s))}))};function se(e){return void 0===e.errors||0===e.errors.length?null:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiCallOut,{title:"Errors found",color:"danger",className:"eui-textLeft"},Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.checkerErrors.checkEsSettingsErrorMessage",defaultMessage:"There were some errors encountered in trying to check Elasticsearch settings. You need administrator rights to check the settings and, if needed, to enable the monitoring collection setting."})),Object(O.jsx)(u.EuiDescriptionList,null,Object(O.jsx)(te,e))))}function ae(e,t={},s=window.location){let a=s.hash?s.hash.split("?")[1]:"";const i=/_g=\((.+)\)$/.exec(a);if(!i||!i.length)return a?`${e.split("?")[0]}?${a}`:e;let n=i[1];return Object.keys(t).forEach((e=>{let s=t[e];"cluster_uuid"===e&&(s=`'${s}'`);const a=new RegExp(`${e}:([^,]+)`).exec(n);a&&a.length?n=n.replace(a[0],`${e}:${s}`):n+=`,${e}:${s}`})),a=a.replace(i[0],`_g=(${n})`),`${e.split("?")[0]}?${a}`}function ie(e){const{isLoading:t,reason:s,checkMessage:a,isCollectionEnabledUpdated:i}=e;return i&&!s||t?Object(O.jsx)(K,{checkMessage:a}):s?Object(O.jsx)(Z,e):Object(O.jsx)(ee,null)}function ne(e){const[t,s]=Object(a.useState)(!1),[i,n]=Object(a.useState)(!1);const o=({children:e})=>Object(O.jsx)(u.EuiPage,{"data-test-subj":"noDataContainer"},e);return e.isCloudEnabled?Object(O.jsx)(o,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.cloud.heading",defaultMessage:"No monitoring data found."}))),Object(O.jsx)(u.EuiPageBody,{restrictWidth:600},Object(O.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(O.jsx)(u.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiTitle,{size:"l"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.cloud.title",defaultMessage:"Monitoring data not available"}))),Object(O.jsx)(u.EuiTextColor,{color:"subdued"},Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.cloud.description",defaultMessage:"Monitoring provides insight to your hardware performance and load."})))),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(W,null)))):i?Object(O.jsx)(o,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.no_data.internal_collection.heading",defaultMessage:"No monitoring data found."}))),Object(O.jsx)(u.EuiPageBody,{restrictWidth:600},Object(O.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(O.jsx)(u.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(ie,e),Object(O.jsx)(se,{errors:e.errors}),e.isCloudEnabled?null:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiButtonEmpty,{isDisabled:e.isCollectionEnabledUpdated,onClick:()=>n(!1)},Object(O.jsx)(u.EuiTextColor,{color:"default"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.setupMetricbeatInstead",defaultMessage:"Or, set up with Metricbeat (recommended)"}))))))):Object(O.jsx)(o,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.no_data.heading",defaultMessage:"No monitoring data found."}))),Object(O.jsx)(u.EuiPageBody,{restrictWidth:600},Object(O.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"eui-textCenter"},Object(O.jsx)(u.EuiIcon,{type:"monitoringApp",size:"xxl"}),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiTitle,{size:"l"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDetected",defaultMessage:"No monitoring data found"}))),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDataFound",defaultMessage:"Have you set up monitoring yet? If so, make sure that the selected time period in the upper right includes monitoring data."}))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiButton,{fill:!0,onClick:async function(){s(!0),await A(!0),window.location.hash=ae("#/elasticsearch/nodes")},type:"button","data-test-subj":"enableCollectionInterval",isLoading:t},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Set up monitoring with Metricbeat"})))),Object(O.jsx)(u.EuiHorizontalRule,{size:"half"}),Object(O.jsx)(u.EuiButtonEmpty,{onClick:()=>n(!0),"data-test-subj":"useInternalCollection"},Object(O.jsx)(u.EuiTextColor,{color:"subdued"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.noData.setupInternalInstead",defaultMessage:"Or, set up with self monitoring"}))))))}const oe=({uploadPath:e})=>Object(O.jsx)(u.EuiCard,{title:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.updateLicenseTitle",defaultMessage:"Update your license"}),description:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.useAvailableLicenseDescription",defaultMessage:"If you already have a new license, upload it now."}),footer:Object(O.jsx)(u.EuiButton,{"data-test-subj":"updateLicenseButton",href:e},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.updateLicenseButtonLabel",defaultMessage:"Update license"}))});class license_LicenseStatus extends i.a.PureComponent{render(){const{isExpired:e,status:t,type:s,expiryDate:i}=this.props,n=s.charAt(0).toUpperCase()+s.substr(1).toLowerCase();let o,r,l;return e?(o=Object(O.jsx)(u.EuiIcon,{color:"danger",type:"alert"}),l=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusDescription",defaultMessage:"Your license expired on {expiryDate}",values:{expiryDate:Object(O.jsx)("strong",null,i)}})),r=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license has expired",values:{typeTitleCase:n}})):(o=Object(O.jsx)(u.EuiIcon,{color:"success",type:"checkInCircleFilled",size:"l"}),l=i?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusDescription",defaultMessage:"Your license will expire on {expiryDate}",values:{expiryDate:Object(O.jsx)("strong",null,i)}})):Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.permanentActiveLicenseStatusDescription",defaultMessage:"Your license will never expire."})),r=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license is {status}",values:{typeTitleCase:n,status:t.toLowerCase()}})),Object(O.jsx)(u.EuiTextAlign,{textAlign:"center"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},o),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"m"},Object(O.jsx)("h1",{"data-test-subj":"licenseText"},r)))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiText,{"data-test-subj":"licenseSubText"},l))}}const re=({isPrimaryCluster:e,uploadLicensePath:t})=>e?Object(O.jsx)(oe,{uploadPath:t}):null,le=({isPrimaryCluster:e})=>e?null:Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.license.howToUpdateLicenseDescription",defaultMessage:"To update the license for this cluster, provide the license file through the Elasticsearch {apiText}:",values:{apiText:"API"}})),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiCodeBlock,null,"curl -XPUT -u <user> 'https://<host>:<port>/_license' -H 'Content-Type: application/json' -d @license.json")),ce=e=>{const{status:t,type:s,isExpired:a,expiryDate:i}=e,n=`${g.a.shims.getBasePath()}/app/management/stack/license_management`;return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.license.heading",defaultMessage:"License"}))),Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(license_LicenseStatus,{isExpired:a,status:t,type:s,expiryDate:i}),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(re,e),Object(O.jsx)(le,e))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiText,{size:"s",textAlign:"center"},Object(O.jsx)("p",null,"For more license options please visit ",Object(O.jsx)(u.EuiLink,{href:n},"License Management"),"."))))};s(55);function ue(){return Object(O.jsx)(u.EuiPage,{style:{height:"calc(100vh - 50px)"}},Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"monNoData__content"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceAround"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiLoadingSpinner,{size:"xl"})),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.pageLoadingTitle",defaultMessage:"Loading…"}))))))))}const de=({pageViewTitle:e})=>{const t=e.toLowerCase().replace(/-/g,"").replace(/\s+/g,"_");return Object(w.useTrackPageview)({app:"stack_monitoring",path:t}),Object(w.useTrackPageview)({app:"stack_monitoring",path:t,delay:15e3}),Object(O.jsx)(ue,null)},pe=({pageViewTitle:e})=>e?Object(O.jsx)(de,{pageViewTitle:e}):Object(O.jsx)(ue,null);var me=s(3),ge=s.n(me);const be={RED:"RED",YELLOW:"YELLOW",GREEN:"GREEN",GRAY:"GRAY"},je={[be.RED]:"danger",[be.YELLOW]:"warning",[be.GREEN]:"success",[be.GRAY]:"subdued"},xe=({type:e,label:t})=>{const s=je[e];return Object(O.jsx)(u.EuiIcon,{alt:t,size:"l","data-test-subj":"statusIcon",type:"dot",color:s})},he=i.a.createContext({setupModeSupported:!1});var fe=s(19),Oe=s.n(fe);s(40);function ve(e,t,s){let a,i;if(s=s||Oe()(),t===T.c)a=Oe.a.duration(s-Oe()(e));else{if(t!==T.d)throw new Error('[formatTimestampToDuration] requires a [calculationFlag] parameter to specify format as "since" or "until" the given time.');a=Oe.a.duration(Oe()(e)-s)}return i=Math.abs(s.diff(e,"months"))>=1?Oe.a.duration(a).format(T.r):Math.abs(s.diff(e,"minutes"))>=1?Oe.a.duration(a).format(T.s):Oe.a.duration(a).format(T.t),i.replace(/ -?0 mins$/,"").replace(/ -?0 hrs$/,"").replace(/ -?0 days$/,"")}function ye(e){if(!e)return null;let t=e.text;if(!e.tokens||!e.tokens.length)return t;const s=e.tokens.filter((e=>e.type===I.a.Time)),i=e.tokens.filter((e=>e.type===I.a.Link)),n=e.tokens.filter((e=>e.type===I.a.DocLink));for(const e of s){const s=e;t=t.replace(s.startToken,s.isRelative?ve(s.timestamp,T.d):Oe.a.tz(s.timestamp,Oe.a.tz.guess()).format("LLL z"))}let o=Object(O.jsx)(a.Fragment,null,t);for(const e of i){const s=e,i=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!i||i.length<2)continue;const n=t.indexOf(i[0]),r=t.substring(0,n),l=t.substring(n+i[0].length),c=ae(`#/${s.url}`);o=Object(O.jsx)(a.Fragment,null,r,Object(O.jsx)(u.EuiLink,{href:c},i[1]),l)}for(const e of n){const s=e,i=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!i||i.length<2)continue;const n=s.partialUrl.replace("{basePath}",g.a.shims.getBasePath()).replace("{elasticWebsiteUrl}",g.a.shims.docLinks.ELASTIC_WEBSITE_URL).replace("{docLinkVersion}",g.a.shims.docLinks.DOC_LINK_VERSION),r=t.indexOf(i[0]),l=t.substring(0,r),c=t.substring(r+i[0].length);o=Object(O.jsx)(a.Fragment,null,l,Object(O.jsx)(u.EuiLink,{href:n,target:"_blank",external:!0},i[1]),c)}return o}var Me=s(30);const Ee=e=>{const{alert:t,compressed:s}=e,[n,o]=i.a.useState(!1),[r,l]=i.a.useState(t.enabled),[d,p]=i.a.useState(t.muteAll),[m,b]=i.a.useState(!1);const j=Object(a.useMemo)((()=>n&&g.a.shims.triggersActionsUi.getEditAlertFlyout({initialAlert:t,onClose:()=>{o(!1),N.hideBottomBar=!1,R()}})),[n]);return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiFlexGroup,{justifyContent:s?"flexStart":"spaceBetween",gutterSize:s?"m":"xs",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiButton,{size:s?"s":"m",onClick:()=>{o(!0),N.hideBottomBar=!0,R()}},c.i18n.translate("xpack.monitoring.alerts.panel.editAlert",{defaultMessage:"Edit rule"}))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiSwitch,{name:"disable",disabled:m,checked:!r,onChange:async()=>{r?(l(!1),await async function(){b(!0);try{await g.a.shims.http.post(`${Me.LEGACY_BASE_ALERT_API_PATH}/alert/${t.id}/_disable`)}catch(e){g.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.disableAlert.errorTitle",{defaultMessage:"Unable to disable rule"}),text:e.message})}b(!1)}()):(l(!0),await async function(){b(!0);try{await g.a.shims.http.post(`${Me.LEGACY_BASE_ALERT_API_PATH}/alert/${t.id}/_enable`)}catch(e){g.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.enableAlert.errorTitle",{defaultMessage:"Unable to enable rule"}),text:e.message})}b(!1)}())},label:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.panel.disableTitle",defaultMessage:"Disable"})})),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiSwitch,{name:"mute",disabled:m,checked:d,"data-test-subj":"muteSwitch",onChange:async()=>{d?(p(!1),await async function(){b(!0);try{await g.a.shims.http.post(`${Me.LEGACY_BASE_ALERT_API_PATH}/alert/${t.id}/_unmute_all`)}catch(e){g.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.ummuteAlert.errorTitle",{defaultMessage:"Unable to unmute rule"}),text:e.message})}b(!1)}()):(p(!0),await async function(){b(!0);try{await g.a.shims.http.post(`${Me.LEGACY_BASE_ALERT_API_PATH}/alert/${t.id}/_mute_all`)}catch(e){g.a.shims.toastNotifications.addDanger({title:c.i18n.translate("xpack.monitoring.alerts.panel.muteAlert.errorTitle",{defaultMessage:"Unable to mute rule"}),text:e.message})}b(!1)}())},label:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.panel.muteTitle",defaultMessage:"Mute"})}))),j)},_e=e=>{const{alert:t,alertState:s}=e,n=U(i.a.useContext(he));if(!t)return null;if(n||!s)return Object(O.jsx)("div",{style:{padding:"1rem"}},Object(O.jsx)(Ee,{alert:t}));const o=s.state.ui.message.nextSteps&&s.state.ui.message.nextSteps.length?Object(O.jsx)(u.EuiListGroup,null,s.state.ui.message.nextSteps.map(((e,t)=>Object(O.jsx)(u.EuiListGroupItem,{size:"s",key:t,label:ye(e)})))):null,{code:r}=s.state.ui.message;return Object(O.jsx)(a.Fragment,null,Object(O.jsx)("div",{style:{padding:"1rem"}},Object(O.jsx)(u.EuiTitle,{size:"xs"},Object(O.jsx)("h5",null,ye(s.state.ui.message))),null!=r&&r.length?Object(O.jsx)(u.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:150},r):null,o?Object(O.jsx)(u.EuiSpacer,{size:"s"}):null,o),Object(O.jsx)(u.EuiHorizontalRule,{margin:"s"}),Object(O.jsx)("div",{style:{padding:"0 1rem 1rem 1rem"}},Object(O.jsx)(Ee,{alert:t})))};var ke=s(23),Se=s.n(ke);const we="0,0.[00]",Te="0,0.0 b",Ce="0,0.[0]a";function Ie(e,t=!1,s=null){return t?Se.a.utc(e).format("LL LTS"):Se.a.tz(e,s||Se.a.tz.guess()).format("LL LTS")}function Le(e,t){return Se()(e).tz("Browser"===t?Se.a.tz.guess():t).fromNow()}function Pe(e,t){return Se()(e).tz("Browser"===t?Se.a.tz.guess():t).calendar()}function Fe(e,t){return e.state.ui.triggeredMS===t.state.ui.triggeredMS?0:e.state.ui.triggeredMS<t.state.ui.triggeredMS?1:-1}const Ne=e=>`${e} alert${e>1?"s":""}`,De=e=>`${e} rule${e>1?"s":""}`,Re=c.i18n.translate("xpack.monitoring.alerts.badge.panelTitle",{defaultMessage:"Alerts"}),ze=c.i18n.translate("xpack.monitoring.rules.badge.panelTitle",{defaultMessage:"Rules"}),Ae=c.i18n.translate("xpack.monitoring.alerts.badge.groupByNode",{defaultMessage:"Group by node"}),Be=c.i18n.translate("xpack.monitoring.alerts.badge.groupByType",{defaultMessage:"Group by alert type"}),Ve=e=>{const{stateFilter:t=(()=>!0)}=e,s=Object.values(e.alerts).flat().filter((e=>Boolean(null==e?void 0:e.sanitizedRule))),[n,o]=i.a.useState(null),r=U(i.a.useContext(he)),l=r?s.length:s.reduce(((e,{states:s})=>e+s.filter((({state:e})=>t(e))).length),0),[c,d]=i.a.useState(!r&&l>8),p=r?ze:Re;if(i.a.useEffect((()=>{r&&c&&d(!1)}),[r,c]),0===l)return null;const m=Ae,b=c?function(e,t,s){const i={},n={};for(const{states:e,sanitizedRule:a}of t){const{id:t}=a;for(const o of e.filter((({state:e})=>s(e)))){const{state:e}=o;n[e.nodeId]=n[e.nodeId]||[],n[e.nodeId].push(o),i[e.nodeId]=i[e.nodeId]||{},i[e.nodeId][t]=i[o.state.nodeId][t]||{alert:a,states:[],count:0},i[e.nodeId][t].count++,i[e.nodeId][t].states.push(o)}}for(const e of Object.values(i))for(const{states:t}of Object.values(e))t.sort(Fe);const o=Object.keys(n).length;let r=o,l=o;return[{id:0,title:e,items:[...Object.keys(n).map(((e,t)=>{const a=n[e].filter((({state:e})=>s(e))),{nodeName:i,itemLabel:o}=a[0].state;return{name:Object(O.jsx)(u.EuiText,null,i||o," (",a.length,")"),panel:t+1}}))]},...Object.keys(n).reduce(((e,t,s)=>{const n=Object.values(i[t]),o=[];let l="";for(const{alert:e,states:t}of n)for(const s of t){const{nodeName:t,itemLabel:i}=s.state;l=t||i,o.push({name:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiToolTip,{position:"top",content:Pe(s.state.ui.triggeredMS,g.a.shims.uiSettings.get("dateFormat:tz"))},Object(O.jsx)(u.EuiText,{size:"s"},Le(s.state.ui.triggeredMS,g.a.shims.uiSettings.get("dateFormat:tz")))),Object(O.jsx)(u.EuiText,{size:"s"},e.name)),panel:++r})}return e.push({id:s+1,title:l,items:o}),e}),[]),...Object.keys(n).reduce(((e,t,s)=>{const a=Object.values(i[t]);for(const{alert:t,states:s}of a)for(const a of s)e.push({id:++l,title:t.name,width:400,content:Object(O.jsx)(_e,{alert:t,alertState:a})});return e}),[])]}(p,s,t):function(e,t,s,i){const n=t?T.S.reduce(((e,t)=>{const a=t.rules.filter((e=>s.find((({sanitizedRule:t})=>t.alertTypeId===e.ruleName))));return a.length>0&&e.push({...t,alerts:a.map((({ruleName:e})=>s.filter((({sanitizedRule:t})=>t.alertTypeId===e)).map((t=>({alert:t.sanitizedRule,states:[],ruleName:e}))))).flat(),alertCount:0}),e}),[]):T.S.reduce(((e,t)=>{const a=[];let n=0;for(const{ruleName:e}of t.rules){const t=s.filter((({sanitizedRule:t,states:s})=>e===t.alertTypeId&&s.length>0));t.length>0&&t.forEach((t=>{const s=t.states.filter((({state:e})=>i(e)));s.length>0&&(a.push({alert:t.sanitizedRule,states:s,ruleName:e}),n+=s.length)}))}return a.length>0&&e.push({...t,alertCount:n,alerts:a}),e}),[]);for(const e of n)for(const t of e.alerts)t.states.sort(Fe);const o=[{id:0,title:e,items:[...n.map(((e,s)=>({name:t?Object(O.jsx)(u.EuiText,null,e.label):Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,e.label," (",e.alertCount,")")),panel:s+1})))]}];if(t){let e=n.length,t=n.length,s=0;for(const t of n)o.push({id:s+1,title:`${t.label}`,items:t.alerts.map((t=>({name:Object(O.jsx)(u.EuiText,null,t.alert.name),panel:++e}))).flat()}),s++;for(const e of n)for(const{alert:s}of e.alerts)o.push({id:++t,title:`${s.name}`,width:400,content:Object(O.jsx)(_e,{alert:s})})}else{let e=n.length,s=0;for(const a of n)o.push({id:s+1,title:`${a.label}`,items:a.alerts.map((({alert:s,ruleName:a,states:n})=>{const o=n.filter((({state:e})=>i(e)));return{name:t?Object(O.jsx)(u.EuiText,null,s.name):Object(O.jsx)(u.EuiText,null,s.name," (",o.length,")"),panel:++e}}))}),s++;let r=n.length,l=n.reduce(((e,t)=>e+t.alerts.length),n.length);for(const e of n)for(const{alert:t,states:s}of e.alerts){const e=[];for(const t of s.filter((({state:e})=>i(e)))){const{nodeName:s,itemLabel:i}=t.state;e.push({name:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiToolTip,{position:"top",content:Pe(t.state.ui.triggeredMS,g.a.shims.uiSettings.get("dateFormat:tz"))},Object(O.jsx)(u.EuiText,{size:"s"},Le(t.state.ui.triggeredMS,g.a.shims.uiSettings.get("dateFormat:tz")))),Object(O.jsx)(u.EuiText,{size:"s"},s||i)),panel:++l}),e.push({isSeparator:!0})}o.push({id:++r,title:`${t.name}`,items:e})}let c=n.reduce(((e,t)=>e+t.alerts.length),n.length);for(const e of n)for(const{alert:t,states:s}of e.alerts)for(const e of s.filter((({state:e})=>i(e))))o.push({id:++c,title:`${t.name}`,width:400,content:Object(O.jsx)(_e,{alert:t,alertState:e})})}return o}(p,!!r,s,t);b.length&&!r&&b[0].items&&b[0].items.push({isSeparator:!0},{name:Object(O.jsx)(u.EuiSwitch,{checked:!1,onChange:()=>d(!c),label:c?Be:m})});const j=Object(O.jsx)(u.EuiBadge,{iconType:"bell",color:r?"default":"danger",onClickAriaLabel:r?De(l):Ne(l),onClick:()=>o(!0)},r?De(l):Ne(l));return Object(O.jsx)(u.EuiPopover,{id:"monitoringAlertMenu",button:j,isOpen:!0===n,closePopover:()=>o(null),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(O.jsx)(u.EuiContextMenu,{key:`${c?"byNode":"byType"}_${b.length}`,initialPanelId:0,panels:b}))},Ue=e=>{const{alerts:t,showBadge:s=!1,showOnlyCount:a=!1,stateFilter:n=(()=>!0)}=e,o=U(i.a.useContext(he));if(!t)return null;let r=!1;const l=Object.values(t).flat().reduce(((e,t)=>{const s=t.states.filter((e=>e.firing));if(e+=s.filter((e=>n(e.state))).length,s.length&&!r)for(const e of t.states)if(n(e.state)&&e.state.ui.severity===I.c.Danger){r=!0;break}return e}),0);if(0===l&&(!o||a))return Object(O.jsx)(u.EuiToolTip,{content:c.i18n.translate("xpack.monitoring.alerts.status.clearToolip",{defaultMessage:"No alerts firing"}),position:"bottom"},Object(O.jsx)(u.EuiHealth,{color:"success","data-test-subj":"alertIcon"},a?l:Object(O.jsx)("span",{"data-test-subj":"alertStatusText"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.status.clearText",defaultMessage:"Clear"}))));if(s||o)return Object(O.jsx)(Ve,{alerts:t,stateFilter:n});const d=r?I.c.Danger:I.c.Warning,p=(()=>{switch(d){case I.c.Danger:return c.i18n.translate("xpack.monitoring.alerts.status.highSeverityTooltip",{defaultMessage:"There are some critical issues that require your immediate attention!"});case I.c.Warning:return c.i18n.translate("xpack.monitoring.alerts.status.mediumSeverityTooltip",{defaultMessage:"There are some issues that might have impact on the stack."});default:return c.i18n.translate("xpack.monitoring.alerts.status.lowSeverityTooltip",{defaultMessage:"There are some low-severity issues."})}})();return Object(O.jsx)(u.EuiToolTip,{content:p,position:"bottom"},Object(O.jsx)(u.EuiHealth,{color:d,"data-test-subj":"alertIcon"},a?l:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.status.alertsTooltip",defaultMessage:"Alerts"})))};s(64);const $e=({label:e,value:t,...s},a)=>Object(O.jsx)(u.EuiFlexItem,ge()({style:{maxWidth:200},key:`summary-status-item-${a}`,grow:!1},s),Object(O.jsx)(u.EuiStat,{title:t,className:"monSummaryStatusNoWrap__stat",titleSize:"xxxs",textAlign:"left",description:e?`${e}`:""})),Ge=({status:e})=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.summaryStatus.statusIconTitle",defaultMessage:"Status: {statusIcon}",values:{statusIcon:Object(O.jsx)(xe,{type:e.toUpperCase(),label:c.i18n.translate("xpack.monitoring.summaryStatus.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:e}})})}})),qe=({status:e,isOnline:t,IconComponent:s})=>Object(d.isEmpty)(e)?null:Object(O.jsx)(u.EuiFlexItem,{className:"eui-textTruncate",style:{maxWidth:200},key:"summary-status-item-status",grow:!1},Object(O.jsx)(u.EuiStat,{title:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(s,{status:e,isOnline:t})," ",Object(d.capitalize)(e)),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:c.i18n.translate("xpack.monitoring.summaryStatus.statusDescription",{defaultMessage:"Status"})}));function He({metrics:e,status:t,alerts:s,isOnline:a,IconComponent:i=Ge,...n}){return Object(O.jsx)("div",ge()({},n,{className:"monSummaryStatusNoWrap"}),Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"m",alignItems:"center",justifyContent:"spaceBetween"},Object(O.jsx)(qe,{status:t,IconComponent:i,isOnline:a}),s?Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiStat,{title:Object(O.jsx)(Ue,{showOnlyCount:!0,alerts:s}),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:c.i18n.translate("xpack.monitoring.summaryStatus.alertsDescription",{defaultMessage:"Alerts"})})):null,e.map($e)))}function We({status:e}){const t=(()=>{const t=e.toUpperCase();return be[t]||be.GRAY})();return Object(O.jsx)(xe,{type:t,label:c.i18n.translate("xpack.monitoring.elasticsearch.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}var Ke=s(20),Je=s.n(Ke);function Ye(e,t){return Xe(e,"byte")+" / "+Xe(t,"byte")}function Qe(e,t){return Xe(e/t,"0.00%")}function Xe(e,t){const s=Number.isNaN(e);let a="0,0.0";if("number"!=typeof e||s){if(void 0!==e&&!s)return e;e=0,a="0"}let i="";switch(t){case"time_since":return Oe()(Oe()()-e).from(Oe()(),!0);case"time":return Oe()(e).format("H:mm:ss");case"int_commas":a="0,0";break;case"byte":case"bytes":a+=" b";break;case"ms":i="ms";break;default:t&&(a=t)}return Je()(e).format(a)+i}function Ze(e,t,s,a={}){const{prependSpace:i=!0}=a;if(Boolean(e)||0===e){let a="";return void 0!==s&&(a=i?` ${s}`:s),Xe(e,t)+a}return c.i18n.translate("xpack.monitoring.formatNumbers.notAvailableLabel",{defaultMessage:"N/A"})}function et({stats:e,alerts:t}){const{dataSize:s,nodesCount:a,indicesCount:i,memUsed:n,memMax:o,totalShards:r,unassignedShards:l,documentCount:u,status:d}=e,p=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:a,"data-test-subj":"nodesCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.indicesLabel",{defaultMessage:"Indices"}),value:i,"data-test-subj":"indicesCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.memoryLabel",{defaultMessage:"JVM Heap"}),value:Ze(n,"byte")+" / "+Ze(o,"byte"),"data-test-subj":"memory"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.totalShardsLabel",{defaultMessage:"Total shards"}),value:r,"data-test-subj":"totalShards"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.unassignedShardsLabel",{defaultMessage:"Unassigned shards"}),value:l,"data-test-subj":"unassignedShards"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.documentsLabel",{defaultMessage:"Documents"}),value:Ze(u,"int_commas"),"data-test-subj":"documentCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.dataLabel",{defaultMessage:"Data"}),value:Ze(s,"byte"),"data-test-subj":"dataSize"}];return Object(O.jsx)(He,{metrics:p,status:d,alerts:t,IconComponent:({status:e})=>Object(O.jsx)(We,{status:e}),"data-test-subj":"elasticsearchClusterStatus"})}const tt=c.i18n.translate("xpack.monitoring.setupMode.node",{defaultMessage:"node"}),st=c.i18n.translate("xpack.monitoring.setupMode.nodes",{defaultMessage:"nodes"}),at=c.i18n.translate("xpack.monitoring.setupMode.instance",{defaultMessage:"instance"}),it=c.i18n.translate("xpack.monitoring.setupMode.instances",{defaultMessage:"instances"}),nt=c.i18n.translate("xpack.monitoring.setupMode.server",{defaultMessage:"server"}),ot=c.i18n.translate("xpack.monitoring.setupMode.servers",{defaultMessage:"servers"});function rt(e){return e===T.a?e.toUpperCase():Object(d.capitalize)(e)}const lt=[T.D,T.p],ct=[T.z,T.b];function ut(e,t=!1){return ct.includes(e)?t?it:at:lt.includes(e)?t?st:tt:e===T.a?t?ot:nt:e}const dt=({rows:e,search:t={},columns:s,setupMode:n,productName:o,...r})=>{const[l,d]=i.a.useState(e.length>0);if(t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar"),t.box&&!t.box.schema&&(t.box.schema=!0),t){const s=t.onChange;t.onChange=t=>{const a=u.EuiSearchBar.Query.execute(t.query,e,r.executeQueryOptions);return d(a.length>0),s&&s(t),!0}}const p=s.map((e=>("sortable"in e||(e.sortable=!0),e)));let m=null;return n&&$(I.d.MetricbeatMigration)&&(m=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiButton,{iconType:"flag",onClick:()=>n.openFlyout({},!0)},c.i18n.translate("xpack.monitoring.euiTable.setupNewButtonLabel",{defaultMessage:"Monitor another {identifier} with Metricbeat",values:{identifier:ut(o)}})))),Object(O.jsx)("div",{"data-test-subj":`${r.className}Container`},Object(O.jsx)(u.EuiInMemoryTable,ge()({"data-test-subj":e.length&&!0===l?"monitoringTableHasData":"monitoringTableNoData",items:e,search:t,columns:p},r)),m)};function pt({rows:e,search:t={},pagination:s,columns:n,onTableChange:o,setupMode:r,productName:l,...d}){const[p,m]=i.a.useState(""),[g,b]=i.a.useState(!1),[j,x]=i.a.useState({index:s.pageIndex,size:s.pageSize});s.totalItemCount||(s.totalItemCount=e&&e.length||0);const[h,f]=i.a.useState(d.sorting);t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar");const v=n.map((e=>("sortable"in e||(e.sortable=!0),e)));let y=null;r&&r.enabled&&$(I.d.MetricbeatMigration)&&(y=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiButton,{iconType:"flag",onClick:()=>r.openFlyout({},!0)},c.i18n.translate("xpack.monitoring.euiSSPTable.setupNewButtonLabel",{defaultMessage:"Set up monitoring for new {identifier}",values:{identifier:ut(l)}}))));return Object(O.jsx)("div",{"data-test-subj":`${d.className}Container`},Object(O.jsx)(u.EuiSearchBar,ge()({},t,{onChange:async({queryText:e})=>{const t={...j,index:0};x(t),m(e),d.fetchMoreData?(b(!0),await d.fetchMoreData({page:t,sort:h,queryText:e}),b(!1)):o({page:j,sort:h.sort,queryText:e})}})),Object(O.jsx)(u.EuiSpacer,{size:"l"}),Object(O.jsx)(u.EuiBasicTable,ge()({},d,{"data-test-subj":e.length?"monitoringTableHasData":"monitoringTableNoData",items:e,pagination:s,onChange:async({page:e,sort:t})=>{x(e),f({sort:t}),d.fetchMoreData?(b(!0),await d.fetchMoreData({page:e,sort:{sort:t},queryText:p}),b(!1),o({page:e,sort:t})):o({page:e,sort:t,queryText:p})},columns:v,loading:d.isLoading||g})),y)}var mt=s(31);const gt=({isSnapshot:e,repo:t,snapshot:s})=>e?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.snapshotTitle",defaultMessage:"Repo: {repo} / Snapshot: {snapshot}",values:{repo:t,snapshot:s}})):null,bt=e=>{const{name:t,shard:s,relocationType:a}=e;return Object(O.jsx)("div",null,Object(O.jsx)(u.EuiLink,{href:ae(`#/elasticsearch/indices/${t}`)},t),Object(O.jsx)("br",null),Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.shardDescription",defaultMessage:"Shard: {shard}",values:{shard:s}}),Object(O.jsx)("br",null),Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.recoveryTypeDescription",defaultMessage:"Recovery type: {relocationType}",values:{relocationType:a}}),Object(O.jsx)("div",null,Object(O.jsx)(gt,e)))},jt=({startTime:e,totalTime:t})=>Object(O.jsx)(u.EuiToolTip,{content:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.totalTimeTooltip",defaultMessage:"Started: {startTime}",values:{startTime:e}}),position:"bottom"},Object(O.jsx)(u.EuiLink,null,t)),xt=({isCopiedFromPrimary:e,sourceTransportAddress:t,children:s})=>{if(!t)return s;const i=Object(O.jsx)(a.Fragment,null,t,Object(O.jsx)("br",null),Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip",defaultMessage:"Copied from {copiedFrom} shard",values:{copiedFrom:e?Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.primarySourceText",defaultMessage:"primary"}):Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.replicaSourceText",defaultMessage:"replica"})}}));return Object(O.jsx)(u.EuiToolTip,{content:i,position:"bottom"},Object(O.jsx)(u.EuiLink,null,s))},ht=e=>{const{sourceName:t,targetName:s,targetTransportAddress:a}=e,i=a||c.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.unknownTargetAddressContent",{defaultMessage:"Unknown"});return Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(xt,e,t)),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiIcon,{type:"arrowRight",size:"s"})),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiToolTip,{content:i,position:"bottom"},Object(O.jsx)(u.EuiLink,null,s))))},ft=({filesPercent:e,filesDone:t,filesTotal:s})=>Object(O.jsx)(a.Fragment,null,e,Object(O.jsx)("br",null),t," / ",s),Ot=({bytesPercent:e,bytesDone:t,bytesTotal:s})=>Object(O.jsx)(a.Fragment,null,e,Object(O.jsx)("br",null),t," / ",s),vt=({hasTranslog:e,translogPercent:t,translogDone:s,translogTotal:i})=>e?Object(O.jsx)(a.Fragment,null,t,Object(O.jsx)("br",null),s," / ",i):Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.progress.noTranslogProgressLabel",defaultMessage:"n/a"}),yt=e=>{if(void 0!==e){const t=e.match(/([\d\.:]+)\]$/);if(t)return t[1]}return e},Mt=e=>Object(d.capitalize)(e.toLowerCase()),Et=[{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.indexTitle",{defaultMessage:"Index"}),field:"name",render:(e,t)=>Object(O.jsx)(bt,t)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.stageTitle",{defaultMessage:"Stage"}),field:"stage"},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.totalTimeTitle",{defaultMessage:"Total Time"}),field:null,render:e=>Object(O.jsx)(jt,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.sourceDestinationTitle",{defaultMessage:"Source / Destination"}),field:null,render:e=>Object(O.jsx)(ht,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.filesTitle",{defaultMessage:"Files"}),field:null,render:e=>Object(O.jsx)(ft,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.bytesTitle",{defaultMessage:"Bytes"}),field:null,render:e=>Object(O.jsx)(Ot,e)},{name:c.i18n.translate("xpack.monitoring.kibana.shardActivity.translogTitle",{defaultMessage:"Translog"}),field:null,render:e=>Object(O.jsx)(vt,e)}],_t=e=>{var t;const{data:s,sorting:i,pagination:n,onTableChange:o,toggleShardActivityHistory:r,showShardActivityHistory:d}=e,{services:p}=Object(l.useKibana)(),m=null===(t=p.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),g=s.map((e=>(e=>{const{id:t,stage:s,index:a,index_name:i,primary:n,start_time_in_millis:o,total_time_in_millis:r,source:l,target:c,translog:u,type:d,timezone:p}=e,{files:m,size:g}=a;return{name:i||a.name,shard:`${t} / ${n?"Primary":"Replica"}`,relocationType:"PRIMARY_RELOCATION"===d?"Primary Relocation":Mt(d),stage:Mt(s),startTime:Ie(o,p),totalTime:Ze(Math.floor(r/1e3),"00:00:00"),isCopiedFromPrimary:!n||"PRIMARY_RELOCATION"===d,sourceName:void 0===l.name?"n/a":l.name,targetName:c.name,sourceTransportAddress:yt(l.transport_address),targetTransportAddress:yt(c.transport_address),isSnapshot:"SNAPSHOT"===d,repo:l.repository,snapshot:l.snapshot,filesPercent:m.percent,filesDone:m.reused?m.reused:m.recovered,filesTotal:m.total,bytesPercent:g.percent,bytesDone:Ze(g.recovered_in_bytes+g.reused_in_bytes,"byte"),bytesTotal:Ze(g.total_in_bytes,"byte"),hasTranslog:u.total>0,translogPercent:u.percent,translogDone:u.total,translogTotal:u.total_on_start}})({...e,timezone:m})));return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivityTitle",defaultMessage:"Shard Activity"})))),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiSwitch,{id:"monitoring_completed_recoveries",label:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.completedRecoveriesLabel",defaultMessage:"Completed recoveries"}),onChange:r,checked:d}),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(dt,{className:"esShardActivityTable",rows:g,columns:Et,message:d?c.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.noDataMessage",{defaultMessage:"There are no historical shard activity records for the selected time range."}):Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextProblem",defaultMessage:"There are no active shard recoveries for this cluster."}),Object(O.jsx)("br",null),Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextSolution",defaultMessage:"Try viewing {shardActivityHistoryLink}.",values:{shardActivityHistoryLink:Object(O.jsx)(u.EuiLink,{onClick:r},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkText",defaultMessage:"completed recoveries"}))}})),sorting:i,search:!1,pagination:n,onTableChange:o,executeQueryOptions:{defaultFields:["name"]}}))};var kt=s(32);function St(e,t){let s;return s="elasticsearch"===e?["#3ebeb0","#3b73ac","#f08656","#6c478f"]:"apm"===e?Object(kt.euiPaletteColorBlind)():["#e8488b","#3b73ac","#3cab63","#6c478f"],s[t]?s[t]:"#000"}var wt=s(24),Tt=s.n(wt);const Ct=Tt()({});class chart_target_ChartTarget extends i.a.Component{shouldComponentUpdate(){return!this.plot}shutdownChart(){if(!this.plot)return;const{target:e}=this.refs;Tt()(e).off("plothover"),Tt()(e).off("mouseleave"),Tt()(e).off("plotselected"),Tt()(e).off("plotselecting"),this.plot.shutdown(),Ct.off("thorPlotHover"),Ct.off("thorPlotLeave"),Ct.off("thorPlotSelecting"),Ct.off("thorPlotBrush")}componentWillUnmount(){this.shutdownChart(),window.removeEventListener("resize",this._handleResize),this.componentUnmounted=!0}filterByShow(e){return e?t=>e.some((e=>e.toLowerCase()===t.id.toLowerCase())):()=>!0}UNSAFE_componentWillReceiveProps(e){if(this.plot&&!Object(d.isEqual)(e,this.props)){const{series:t,timeRange:s}=e,a=this.plot.getAxes().xaxis.options;a.min=Object(d.get)(s,"min"),a.max=Object(d.get)(s,"max"),this.plot.setData(this.filterData(t,e.seriesToShow)),this.plot.setupGrid(),this.plot.draw()}}componentDidMount(){this.renderChart()}componentDidUpdate(){this.shutdownChart(),this.renderChart()}filterData(e,t){return Object(d.filter)(e,this.filterByShow(t))}async getOptions(){return{...await async function(e){var t;const s=null===(t=g.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),a={legend:{show:!1},xaxis:{color:T.e,timezone:"Browser"===s?"browser":"utc",mode:"time",font:{color:T.f}},yaxis:{color:T.e,font:{color:T.f}},series:{points:{show:!0,radius:1},lines:{show:!0,lineWidth:2},shadowSize:0},grid:{margin:0,borderWidth:1,borderColor:T.e,hoverable:!0},crosshair:{mode:"x",color:"#c66",lineWidth:2},selection:{mode:"x",color:T.f}};return Object(d.merge)(a,e)}({yaxis:{tickFormatter:this.props.tickFormatter},xaxis:this.props.timeRange}),...this.props.options}}async renderChart(){const{target:e}=this.refs,{series:t}=this.props,s=this.filterData(t,this.props.seriesToShow);this.plot=Tt.a.plot(e,s,await this.getOptions()),!this.componentUnmounted&&this.plot&&(this._handleResize=()=>{if(this.plot)try{this.plot.resize(),this.plot.setupGrid(),this.plot.draw()}catch(e){}},window.addEventListener("resize",this._handleResize,!1),this.handleMouseLeave=()=>{Ct.trigger("thorPlotLeave",[])},this.handlePlotHover=(e,t,s)=>{Ct.trigger("thorPlotHover",[t,s,this.plot])},this.handleThorPlotHover=(e,t,s,a)=>{this.plot!==a&&this.plot.setCrosshair({x:Object(d.get)(t,"x")}),this.props.updateLegend(t,s)},this.handleThorPlotLeave=()=>{this.plot.clearCrosshair(),this.props.updateLegend()},this.handleThorPlotSelecting=(e,t,s)=>{if(this.plot!==s){const e=!0;this.plot.setSelection({xaxis:t},e)}},this.handleThorPlotBrush=()=>{this.plot.clearSelection()},this.selectingChart=(e,t)=>{if(t){const e=t.xaxis;Ct.trigger("thorPlotSelecting",[e,this.plot])}},this.brushChart=(e,t)=>{this.props.onBrush(t),Ct.trigger("thorPlotBrush")},Tt()(e).on("plothover",this.handlePlotHover),Tt()(e).on("mouseleave",this.handleMouseLeave),Tt()(e).on("plotselected",this.brushChart),Tt()(e).on("plotselecting",this.selectingChart),Ct.on("thorPlotHover",this.handleThorPlotHover),Ct.on("thorPlotLeave",this.handleThorPlotLeave),Ct.on("thorPlotSelecting",this.handleThorPlotSelecting),Ct.on("thorPlotBrush",this.handleThorPlotBrush))}render(){return Object(O.jsx)("div",{ref:"target",style:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto"}})}}function It(e){return Object(O.jsx)("div",{style:{display:"flex",rowDirection:"column",flex:"1 0 auto",position:"relative"}},Object(O.jsx)(chart_target_ChartTarget,e))}s(73);class horizontal_legend_HorizontalLegend extends i.a.Component{constructor(){super(),this.formatter=this.formatter.bind(this),this.createSeries=this.createSeries.bind(this)}displayValue(e){return Object(O.jsx)("span",{className:"monRhythmChart__legendValue"},e)}validValue(e){return null!=e&&("string"==typeof e||!isNaN(e))}formatter(e,t){return this.validValue(e)?t&&t.tickFormatter?this.displayValue(t.tickFormatter(e)):Object(d.isFunction)(this.props.tickFormatter)?this.displayValue(this.props.tickFormatter(e)):this.displayValue(e):Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.chart.horizontalLegend.notAvailableLabel",defaultMessage:"N/A"})}createSeries(e,t){const s=["monRhythmChart__legendItem"];return Object(d.includes)(this.props.seriesFilter,e.id)||s.push("monRhythmChart__legendItem-isDisabled"),e.label&&!1!==e.legend?Object(O.jsx)(u.EuiFlexItem,{grow:!1,key:t},Object(O.jsx)("button",{className:s.join(" "),onClick:t=>this.props.onToggle(t,e.id)},Object(O.jsx)("span",{className:"monRhythmChart__legendLabel"},Object(O.jsx)(u.EuiIcon,{className:"monRhythmChart__legendIndicator","aria-label":c.i18n.translate("xpack.monitoring.chart.horizontalLegend.toggleButtonAriaLabel",{defaultMessage:"toggle button"}),size:"l",type:"dot",color:e.color})," "+e.label+" "),this.formatter(this.props.seriesValues[e.id],e))):Object(O.jsx)("div",{key:t,style:{display:"none"}})}render(){const e=this.props.series.map(this.createSeries);return Object(O.jsx)("div",{className:"monRhythmChart__legendHorizontal"},Object(O.jsx)(u.EuiFlexGroup,{wrap:!0,gutterSize:"s",className:"monRhythmChart__legendSeries"},e))}}function Lt(e,t,s){for(let a=0;a<e.length;a++){const i=e[a],n=i.data;let o=null;n.length>t&&n[t]&&(o=n[t][1]),s(i.id,o)}}function Pt(e,t){const s=e.length;if(1===s)return 0;if(0!==s){let a=null;e[0]&&(a=0);for(let i=1;i<s;++i)if(e[i]){if(e[i][0]>t){const s=e[i][0]-t;return null!==a&&s>Math.abs(t-e[a][0])?a:i}a=i}}return s-1}s(82);class timeseries_visualization_TimeseriesVisualization extends i.a.Component{constructor(e){super(e),this.debouncedUpdateLegend=Object(d.debounce)(this.updateLegend,T.o),this.debouncedUpdateLegend=this.debouncedUpdateLegend.bind(this),this.toggleFilter=this.toggleFilter.bind(this);const t=this.getLastValues(e);this.state={values:{},seriesToShow:Object(d.keys)(t),ignoreVisibilityUpdates:!1}}filterLegend(e){if(!Object(d.has)(this.state.values,e))return[];const t=Object(d.keys)(this.state.values).length!==this.state.seriesToShow.length,s=Object(d.includes)(this.state.seriesToShow,e),a=[];return t&&s?this.setState({ignoreVisibilityUpdates:!1,seriesToShow:Object.keys(this.state.values)}):(a.push(e),this.setState({ignoreVisibilityUpdates:!0,seriesToShow:[e]})),a}toggleFilter(e,t){const s=this.filterLegend(t);Object(d.isFunction)(this.props.onFilter)&&this.props.onFilter(s)}getLastValues(e){e=e||this.props;const t={};return e.series.forEach((e=>{e.id||(e.id=e.label),t[e.id]=function(e){if(Object(d.isNumber)(e))return e;if(!Array.isArray(e))return null;const t=Object(d.get)(Object(d.last)(e),"[1]");return Object(d.isNumber)(t)?t:null}(e.data)})),t}updateLegend(e,t){const s={};if(e){const a=(e,t)=>{s[e]=t};t?Lt(this.props.series,t.dataIndex,a):function(e,t,s){for(let a=0;a<e.length;a++){const i=Pt(e[a].data,t);if(-1!==i){Lt(e,i,s);break}}}(this.props.series,e.x,a)}else Object(d.assign)(s,this.getLastValues());this.setState({values:s})}UNSAFE_componentWillReceiveProps(e){const t=this.getLastValues(e),s=Object(d.keys)(this.state.values),a=Object(d.keys)(t),i={values:t};Object(d.difference)(a,s).length&&!this.state.ignoreVisibilityUpdates&&(i.seriesToShow=a),this.setState(i)}render(){const e=this.props.hasLegend?Object(O.jsx)(horizontal_legend_HorizontalLegend,ge()({seriesFilter:this.state.seriesToShow,seriesValues:this.state.values,onToggle:this.toggleFilter},this.props)):null;return Object(O.jsx)("div",{className:"monRhythmChart"},Object(O.jsx)("div",{style:{flexDirection:"column"},className:"monRhythmChart__content"},Object(O.jsx)("div",{className:"monRhythmChart__visualization"},Object(O.jsx)(It,ge()({seriesToShow:this.state.seriesToShow,updateLegend:this.debouncedUpdateLegend},this.props))),e))}}function Ft({series:e,onBrush:t}){const s=e.map(((e,t)=>({color:St(e.metric.app,t),data:e.data,label:e.metric.label}))),a=Object(d.first)(e),i=Object(d.get)(a,"timeRange"),n=function(e){const t=Object(d.get)(e,"metric.format","0,0.0"),s=Object(d.get)(e,"metric.units","");return function(e){let a=Je()(e).format(t);return"B"!==s&&""!==s&&(a+=" "+s),a}}(a);return Object(O.jsx)(timeseries_visualization_TimeseriesVisualization,{series:s,timeRange:i,tickFormatter:n,onBrush:t})}timeseries_visualization_TimeseriesVisualization.defaultProps={hasLegend:!0};s(91);function Nt({series:e,bucketSize:t}){const s=e.map(((e,t)=>Object(O.jsx)("tr",{key:`chart-tooltip-${t}`,"data-debug-metric-agg":e.metric.metricAgg,"data-debug-metric-field":e.metric.field,"data-debug-metric-is-derivative":e.metric.isDerivative,"data-debug-metric-has-calculation":e.metric.hasCalculation},Object(O.jsx)("td",{className:"monChart__tooltipLabel"},e.metric.label),Object(O.jsx)("td",{className:"monChart__tooltipValue"},e.metric.description))));return Object(O.jsx)("table",null,Object(O.jsx)("tbody",null,Object(O.jsx)("tr",null,Object(O.jsx)("td",{className:"monChart__tooltipLabel"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.chart.infoTooltip.intervalLabel",defaultMessage:"Interval"})),Object(O.jsx)("td",{className:"monChart__tooltipValue"},t)),s))}function Dt(e=[]){return Object(d.chain)(e.map((e=>e.metric.title||e.metric.label))).first().value()}s(100);function Rt({series:e,onBrush:t,zoomInfo:s}){if(void 0===e)return null;const i=Dt(e).replace(/\s+/,"--"),n=function(e){let t=Object(d.get)(e,"[0].metric.units");if("B"===t){let s=0;Object(d.forEach)(e,(e=>{const t=Object(d.last)(e.data)||[null,0];s=Math.max(s,t[1])})),t=Je()(s).byteUnits()}return t}(e),o=Object(d.get)(Object(d.first)(e),"bucket_size"),r=[c.i18n.translate("xpack.monitoring.chart.seriesScreenReaderListDescription",{defaultMessage:"Interval: {bucketSize}",values:{bucketSize:o}})].concat(e.map((e=>`${e.metric.label}: ${e.metric.description}`)));let l=null;return e.alerts&&(l=Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(Ve,{alerts:e.alerts}))),Object(O.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"s",className:"monRhythmChart__wrapper"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s",tabIndex:"0"},Object(O.jsx)("h2",null,Dt(e),n?` (${n})`:"",Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("span",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.chart.screenReaderUnaccessibleTitle",defaultMessage:"This chart is not screen reader accessible"})))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiIconTip,{anchorClassName:"eui-textRight eui-alignMiddle monChart__tooltipTrigger",type:"iInCircle",position:"right",content:Object(O.jsx)(Nt,{series:e,bucketSize:o})}),Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("span",{id:`monitoringChart${i}`},r.join(". "))))),(e=>e&&e.showZoomOutBtn()?Object(O.jsx)(u.EuiFlexItem,{className:"monRhythmChart__zoom"},Object(O.jsx)(u.EuiTextAlign,{textAlign:"right"},Object(O.jsx)(u.EuiButtonEmpty,{color:"primary",size:"s",iconType:"magnifyWithMinus",onClick:e.zoomOutHandler},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.zoomOut",defaultMessage:"Zoom out"})))):null)(s))),l)),Object(O.jsx)(u.EuiFlexItem,{style:{minHeight:"200px"}},Object(O.jsx)(Ft,{series:e,onBrush:t})))}const zt=({children:e})=>Object(O.jsx)("span",{style:{fontFamily:"monospace"}},e),At=({reason:e})=>{const t=g.a.shims.docLinks.links.filebeat.installation,s=g.a.shims.docLinks.links.filebeat.elasticsearchModule,a=g.a.shims.docLinks.links.monitoring.troubleshootKibana;let i=c.i18n.translate("xpack.monitoring.logs.reason.defaultTitle",{defaultMessage:"No log data found"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessage",defaultMessage:"We did not find any log data and we are unable to diagnose why. {link}",values:{link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:t},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessageLink",defaultMessage:"Please verify your setup is correct."}))}});return!1===e.indexPatternExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternTitle",{defaultMessage:"No log data found"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternMessage",defaultMessage:"Set up {link}, then configure your Elasticsearch output to your monitoring cluster.",values:{link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:t},c.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternLink",{defaultMessage:"Filebeat"}))}})):!1===e.indexPatternInTimeRangeExists||!1===e.typeExists&&e.typeExistsAtAnyTime?(i=c.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternInTimePeriodTitle",{defaultMessage:"No logs for the selected time"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternInTimePeriodMessage",defaultMessage:"Use the time filter to adjust your timeframe."})):!1===e.typeExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noTypeTitle",{defaultMessage:"No logs for Elasticsearch"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.noTypeMessage",defaultMessage:"Follow {link} to set up Elasticsearch.",values:{link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noTypeLink",{defaultMessage:"these directions"}))}})):!1===e.usingStructuredLogs?(i=c.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsTitle",{defaultMessage:"No structured logs found"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.notUsingStructuredLogsMessage",defaultMessage:"Check if the {varPaths} setting {link}.",values:{varPaths:Object(O.jsx)(zt,null,"var.paths"),link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsLink",{defaultMessage:"points to JSON logs"}))}})):!1===e.clusterExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noClusterTitle",{defaultMessage:"No logs for this cluster"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.noClusterMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noClusterLink",{defaultMessage:"setup"}))}})):!1===e.nodeExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noNodeTitle",{defaultMessage:"No logs for this Elasticsearch node"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.noNodeMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noNodeLink",{defaultMessage:"setup"}))}})):!1===e.indexExists?(i=c.i18n.translate("xpack.monitoring.logs.reason.noIndexTitle",{defaultMessage:"No logs for this index"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexMessage",defaultMessage:"We found logs, but none for this index. If this problem continues, check that your {link} is correct.",values:{link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:s},c.i18n.translate("xpack.monitoring.logs.reason.noIndexLink",{defaultMessage:"setup"}))}})):!1===e.correctIndexName&&(i=c.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameTitle",{defaultMessage:"Corrupted filebeat index"}),n=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.reason.correctIndexNameMessage",defaultMessage:"There is an issue reading from your filebeat indices.  {link}.",values:{link:Object(O.jsx)(u.EuiLink,{target:"_blank",href:a},c.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameLink",{defaultMessage:"Click here for more information"}))}})),Object(O.jsx)(u.EuiCallOut,{title:i,color:"warning",iconType:"help"},Object(O.jsx)("p",null,n))},Bt=e=>{var t;return Ie(e,null===(t=g.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"))},Vt=c.i18n.translate("xpack.monitoring.logs.listing.timestampTitle",{defaultMessage:"Timestamp"}),Ut=c.i18n.translate("xpack.monitoring.logs.listing.levelTitle",{defaultMessage:"Level"}),$t=c.i18n.translate("xpack.monitoring.logs.listing.typeTitle",{defaultMessage:"Type"}),Gt=c.i18n.translate("xpack.monitoring.logs.listing.messageTitle",{defaultMessage:"Message"}),qt=c.i18n.translate("xpack.monitoring.logs.listing.componentTitle",{defaultMessage:"Component"}),Ht=c.i18n.translate("xpack.monitoring.logs.listing.nodeTitle",{defaultMessage:"Node"}),Wt=[{field:"timestamp",name:Vt,width:"12%",render:e=>Bt(e)},{field:"level",name:Ut,width:"5%"},{field:"type",name:$t,width:"10%",render:e=>Object(d.upperFirst)(e)},{field:"message",name:Gt,width:"55%"},{field:"component",name:qt,width:"18%"}],Kt=[{field:"timestamp",name:Vt,width:"12%",render:e=>Bt(e)},{field:"level",name:Ut,width:"5%"},{field:"type",name:$t,width:"10%",render:e=>Object(d.upperFirst)(e)},{field:"message",name:Gt,width:"45%"},{field:"component",name:qt,width:"15%"},{field:"node",name:Ht,width:"13%"}];function Jt(e,t,s){const a=`${g.a.shims.getBasePath()}/app/logs/link-to/${T.y}/logs`,i=[];return e&&i.push(`elasticsearch.cluster.uuid:${e}`),t&&i.push(`elasticsearch.node.id:${t}`),s&&i.push(`elasticsearch.index.name:${s}`),0===i.length?a:`${a}?filter=${i.join(" and ")}`}class logs_Logs extends a.PureComponent{renderLogs(){const{logs:{enabled:e,logs:t},nodeId:s,indexUuid:a}=this.props;return e?Object(O.jsx)(u.EuiBasicTable,{items:t||[],columns:s||a?Wt:Kt}):null}renderNoLogs(){const{logs:{enabled:e,reason:t}}=this.props;return e?null:Object(O.jsx)(At,{reason:t})}renderCallout(){const e=g.a.shims.capabilities,t=e.logs&&e.logs.show,{logs:{enabled:s},nodeId:a,clusterUuid:i,indexUuid:n}=this.props;return s&&t?Object(O.jsx)(u.EuiCallOut,{size:"m",title:c.i18n.translate("xpack.monitoring.logs.listing.calloutTitle",{defaultMessage:"Want to see more log entries?"}),iconType:"logsApp"},Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logs.listing.linkText",defaultMessage:"Visit {link} to dive deeper.",values:{link:Object(O.jsx)(u.EuiLink,{href:Jt(i,a,n)},c.i18n.translate("xpack.monitoring.logs.listing.calloutLinkText",{defaultMessage:"Logs"}))}}))):null}render(){const{nodeId:e,indexUuid:t,logs:{limit:s}}=this.props;let a;return a=e?c.i18n.translate("xpack.monitoring.logs.listing.nodePageDescription",{defaultMessage:"Showing the most recent log entries for this node, up to {limit} total log entries.",values:{limit:s}}):t?c.i18n.translate("xpack.monitoring.logs.listing.indexPageDescription",{defaultMessage:"Showing the most recent log entries for this index, up to {limit} total log entries.",values:{limit:s}}):c.i18n.translate("xpack.monitoring.logs.listing.clusterPageDescription",{defaultMessage:"Showing the most recent log entries for this cluster, up to {limit} total log entries.",values:{limit:s}}),Object(O.jsx)("div",null,Object(O.jsx)(u.EuiTitle,null,Object(O.jsx)("h1",null,c.i18n.translate("xpack.monitoring.logs.listing.pageTitle",{defaultMessage:"Recent Log Entries"}))),Object(O.jsx)(u.EuiText,{size:"s"},Object(O.jsx)("p",null,a)),Object(O.jsx)(u.EuiSpacer,{size:"m"}),this.renderLogs(),this.renderNoLogs(),Object(O.jsx)(u.EuiSpacer,{size:"m"}),this.renderCallout())}}function Yt({clusterStatus:e,metrics:t,logs:s,cluster:a,shardActivity:i,...n}){const o=[t.cluster_search_request_rate,t.cluster_query_latency,t.cluster_index_request_rate,t.cluster_index_latency];return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(et,{stats:e})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e},n)),Object(O.jsx)(u.EuiSpacer,null)))))),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(logs_Logs,{logs:s,clusterUuid:a.cluster_uuid})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(_t,ge()({data:i},n)))))}const Qt=c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingDownText",{defaultMessage:"down"}),Xt=c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingUpText",{defaultMessage:"up"});function Zt(){return Object(O.jsx)("div",{className:"monTableCell__number monTableCell__offline"},"N/A")}const es=e=>e||0===e?e>0?Xt:Qt:null,ts=e=>e||0===e?e>0?"sortUp":"sortDown":null,ss=(e,t,s)=>s?Ze(e,t,"%",{prependSpace:!1}):Ze(e,t);function as({isOnline:e,metric:t={},isPercent:s,...i}){const[n,o]=Object(a.useState)(!1),r=()=>o((e=>!e)),l=()=>o(!1);if(e){const{lastVal:e,maxVal:a,minVal:o,slope:p}=Object(d.get)(t,"summary",{}),m=Object(d.get)(t,"metric.format"),g=(Object(d.get)(t,"metric.units"),[{title:c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.trending",{defaultMessage:"Trending"}),description:es(p)},{title:c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.max",{defaultMessage:"Max value"}),description:ss(a,m,s)},{title:c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.min",{defaultMessage:"Min value"}),description:ss(o,m,s)}]),b=c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.iconLabel",{defaultMessage:"More information about this metric"}),j=Object(O.jsx)(u.EuiButtonIcon,{color:"text",onClick:r,iconType:ts(p),"data-test-subj":`monitoringCellIcon-${i["data-test-subj"]}`,title:b,"aria-label":b});return Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(O.jsx)(u.EuiFlexItem,{grow:!1}),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{"data-test-subj":i["data-test-subj"],gutterSize:"xs"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiPopover,{ownFocus:!0,button:j,isOpen:n,closePopover:l},Object(O.jsx)("div",{"data-test-subj":`monitoringCellPopover-${i["data-test-subj"]}`},Object(O.jsx)(u.EuiDescriptionList,{type:"column",compressed:!0,listItems:g,style:{maxWidth:"150px"}}),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,{size:"xs"},c.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.preface",{defaultMessage:"Applies to current time period"}))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiText,null,ss(e,m,s))))))}return Object(O.jsx)(Zt,null)}const is=c.i18n.translate("xpack.monitoring.setupMode.clickToMonitorWithMetricbeat",{defaultMessage:"Monitor with Metricbeat"}),ns=c.i18n.translate("xpack.monitoring.setupMode.clickToDisableInternalCollection",{defaultMessage:"Disable self monitoring"}),os=c.i18n.translate("xpack.monitoring.setupMode.usingMetricbeatCollection",{defaultMessage:"Monitored with Metricbeat"}),rs=c.i18n.translate("xpack.monitoring.setupMode.unknown",{defaultMessage:"N/A"});function ls({setupMode:e,productName:t,status:s,instance:i,clusterUuid:n}){let o=null,r=null;const l=e.data||{},d=e.meta||{},p=l.totalUniquePartiallyMigratedCount===l.totalUniqueInstanceCount;if(s.isPartiallyMigrated&&t===T.p){if(!p)return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiIcon,{type:"flag"})," ",Object(O.jsx)(u.EuiTextColor,{color:"warning",size:"xs"},c.i18n.translate("xpack.monitoring.setupMode.monitorAllNodes",{defaultMessage:"Some nodes use only self monitoring"})));r=ns,d.liveClusterUuid===n&&(o=e.shortcutToFinishMigration)}const m={};(s.isInternalCollector||s.isPartiallyMigrated||s.isNetNewUser)&&(m.onClick=o||(()=>e.openFlyout(i)));let g=null;return s.isInternalCollector?(m.onClick&&(m.onClickAriaLabel=r||is),g=Object(O.jsx)(u.EuiBadge,ge()({color:"danger",iconType:"flag"},m),r||is)):s.isPartiallyMigrated?(m.onClick&&(m.onClickAriaLabel=r||ns),g=Object(O.jsx)(u.EuiBadge,ge()({color:"warning",iconType:"flag"},m),r||ns)):s.isFullyMigrated?(m.onClick&&(m.onClickAriaLabel=r||os),g=Object(O.jsx)(u.EuiBadge,ge()({color:"primary",iconType:"flag"},m),r||os)):s.isNetNewUser?(m.onClick&&(m.onClickAriaLabel=r||is),g=Object(O.jsx)(u.EuiBadge,ge()({color:"danger",iconType:"flag"},m),r||is)):(m.onClick&&(m.onClickAriaLabel=r||rs),g=Object(O.jsx)(u.EuiBadge,ge()({color:"danger",iconType:"flag"},m),r||rs)),g}const cs=c.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeat",{defaultMessage:"Monitor with Metricbeat"});function us({setupModeData:e,productName:t,customRenderer:s=null}){if(s){const{shouldRender:e,componentToRender:t}=s();if(e)return t}const i=Object(d.get)(e,"detected.mightExist");return e.totalUniqueInstanceCount>0?e.totalUniqueFullyMigratedCount===e.totalUniqueInstanceCount?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.metricbeatAllNodes",{defaultMessage:"Metricbeat is monitoring all {identifier}.",values:{identifier:ut(t,!0)}}),color:"success",iconType:"flag"}),Object(O.jsx)(u.EuiSpacer,{size:"m"})):e.totalUniquePartiallyMigratedCount===e.totalUniqueInstanceCount?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring"}),color:"warning",iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionDescription",{defaultMessage:"Metricbeat is now monitoring your {product} {identifier}. Disable self monitoring to finish the migration.",values:{product:rt(t),identifier:ut(t,!0)}}))),Object(O.jsx)(u.EuiSpacer,{size:"m"})):e.totalUniqueInstanceCount>0?0===e.totalUniqueFullyMigratedCount&&0===e.totalUniquePartiallyMigratedCount?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:cs,color:"danger",iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeatDescription",{defaultMessage:"These {product} {identifier} are self monitored.\n                Click 'Monitor with Metricbeat' to migrate.",values:{product:rt(t),identifier:ut(t,!0)}}))),Object(O.jsx)(u.EuiSpacer,{size:"m"})):Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:cs,color:"danger",iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.migrateSomeToMetricbeatDescription",{defaultMessage:"Some {product} {identifier} are monitored through self monitoring. Migrate to monitor with Metricbeat.",values:{product:rt(t),identifier:ut(t,!0)}}))),Object(O.jsx)(u.EuiSpacer,{size:"m"})):null:i?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.detectedNodeTitle",{defaultMessage:"{product} {identifier} detected",values:{product:rt(t),identifier:ut(t)}}),color:"warning",iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.detectedNodeDescription",{defaultMessage:"Click 'Set up monitoring' below to start monitoring this {identifier}.",values:{identifier:ut(t)}}))),Object(O.jsx)(u.EuiSpacer,{size:"m"})):Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.setupMode.noMonitoringDataFound",{defaultMessage:"No {product} {identifier} detected",values:{product:rt(t),identifier:ut(t,!0)}}),iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.setupMode.netNewUserDescription",{defaultMessage:"Click 'Set up monitoring' to start monitoring with Metricbeat."}))),Object(O.jsx)(u.EuiSpacer,{size:"m"}))}const ds=e=>t=>Object(d.get)(t,[e,"summary","lastVal"]),ps=(e,t,s,a)=>{const n=[],o=c.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuUsageColumnTitle",{defaultMessage:"CPU Usage"});return n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.nameColumnTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(e,a)=>{let n=Object(O.jsx)(u.EuiLink,{href:ae(`#/elasticsearch/nodes/${a.resolver}`),"data-test-subj":`nodeLink-${a.resolver}`},e),o=null;if($(I.d.MetricbeatMigration)){const i=Object(d.get)(t,"data.byUuid",{})[a.resolver]||{},r={uuid:a.resolver,name:a.name};o=Object(O.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(O.jsx)(ls,{setupMode:t,status:i,instance:r,productName:T.p,clusterUuid:s})),i.isNetNewUser&&(n=e)}return Object(O.jsx)("div",null,Object(O.jsx)("div",{className:"monTableCell__name"},Object(O.jsx)(u.EuiText,{size:"m"},(e=>{const{nodeTypeLabel:t,nodeTypeClass:s}=e,a=t||c.i18n.translate("xpack.monitoring.elasticsearch.nodes.unknownNodeTypeLabel",{defaultMessage:"Unknown"}),n=s||"empty";return t?Object(O.jsx)(i.a.Fragment,null,Object(O.jsx)(u.EuiToolTip,{position:"bottom",content:a},Object(O.jsx)(u.EuiIcon,{type:n}))," "," "):null})(a),Object(O.jsx)("span",{"data-test-subj":"name"},n))),Object(O.jsx)("div",{className:"monTableCell__transportAddress"},function(e){if("string"!=typeof e)return null;const t=e.match(/inet\[[^\/]*\/([^\/\]]+)\]/);return t?t[1]:e}(a.transport_address)),o)}}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(e,t)=>Object(O.jsx)(Ue,{showBadge:!0,alerts:a,stateFilter:e=>(e.nodeId||e.nodeUuid)===t.resolver})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumnTitle",{defaultMessage:"Status"}),dataType:"boolean",field:"isOnline",sortable:!0,render:e=>{const t=e?c.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.onlineLabel",{defaultMessage:"Online"}):c.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.offlineLabel",{defaultMessage:"Offline"});return Object(O.jsx)(u.EuiToolTip,{content:t,position:"bottom",trigger:"hover"},Object(O.jsx)(u.EuiHealth,{color:e?"success":"subdued","data-test-subj":"statusIcon",alt:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.healthAltIcon",{defaultMessage:"Status: {status}",values:{status:t}})},t))}}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.shardsColumnTitle",{defaultMessage:"Shards"}),dataType:"number",field:"shardCount",sortable:!0,render:(e,t)=>t.isOnline?Object(O.jsx)("span",{"data-test-subj":"shards"},e):Object(O.jsx)(Zt,null)}),e?(n.push({name:o,dataType:"number",field:"node_cgroup_quota",sortable:ds("node_cgroup_quota"),render:(e,t)=>Object(O.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuQuota"})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuThrottlingColumnTitle",{defaultMessage:"CPU Throttling"}),dataType:"number",field:"node_cgroup_throttled",sortable:ds("node_cgroup_throttled"),render:(e,t)=>Object(O.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"cpuThrottled"})})):(n.push({name:o,dataType:"number",field:"node_cpu_utilization",sortable:ds("node_cpu_utilization"),render:(e,t)=>Object(O.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuUsage"})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.loadAverageColumnTitle",{defaultMessage:"Load Average"}),dataType:"number",field:"node_load_average",sortable:ds("node_load_average"),render:(e,t)=>Object(O.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"loadAverage"})})),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.jvmMemoryColumnTitle",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),dataType:"number",field:"node_jvm_mem_percent",sortable:ds("node_jvm_mem_percent"),render:(e,t)=>Object(O.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"jvmMemory"})}),n.push({name:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.diskFreeSpaceColumnTitle",{defaultMessage:"Disk Free Space"}),dataType:"number",field:"node_free_space",sortable:ds("node_free_space"),render:(e,t)=>Object(O.jsx)(as,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"diskFreeSpace"})}),n};function ms({clusterStatus:e,showCgroupMetricsElasticsearch:t,...s}){const{sorting:i,pagination:n,onTableChange:o,clusterUuid:r,setupMode:l,alerts:p}=s,m=ps(t,l,r,p),g=s.nodes||[];if(l&&l.enabled&&$(I.d.MetricbeatMigration)){const e=g.reduce(((e,t)=>({...e,[t.id||t.resolver]:t})),{});g.push(...Object.entries(l.data.byUuid).reduce(((t,[s,a])=>(!e[s]&&a.node&&t.push(a.node),t)),[]))}let b=null;return $(I.d.MetricbeatMigration)&&(b=Object(O.jsx)(us,{setupModeData:l.data,useNodeIdentifier:!0,productName:T.p,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null},t=0===l.data.totalUniqueInstanceCount,s=0===l.data.totalUniqueInternallyCollectedCount&&0===l.data.totalUniqueFullyMigratedCount&&0===l.data.totalUniquePartiallyMigratedCount;if(t||s)e.shouldRender=!0,e.componentToRender=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Elasticsearch node detected"}),color:l.data.totalUniqueInstanceCount>0?"danger":"warning",iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following nodes are not monitored. Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(O.jsx)(u.EuiSpacer,{size:"m"}));else if(l.data.totalUniquePartiallyMigratedCount===l.data.totalUniqueInstanceCount){const t=Object(d.get)(l.meta,"liveClusterUuid")===r?l.shortcutToFinishMigration:l.openFlyout;e.shouldRender=!0,e.componentToRender=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionTitle",{defaultMessage:"Metricbeat is now monitoring your Elasticsearch nodes"}),color:"warning",iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionDescription",{defaultMessage:"Disable self monitoring to finish the migration."})),Object(O.jsx)(u.EuiButton,{onClick:t,size:"s",color:"warning",fill:!0},c.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionMigrationButtonLabel",{defaultMessage:"Disable self monitoring"}))),Object(O.jsx)(u.EuiSpacer,{size:"m"}))}return e}})),Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,e?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(et,{stats:e,alerts:p})),Object(O.jsx)(u.EuiSpacer,{size:"m"})):null,b,Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(pt,ge()({className:"elasticsearchNodesTable",rows:g,columns:m,sorting:i,pagination:n,setupMode:l,productName:T.p,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.elasticsearch.nodes.monitoringTablePlaceholder",{defaultMessage:"Filter Nodes…"})}},onTableChange:o},s)))))}function gs({isOnline:e,status:t}){const s=e?be.GREEN:be.GRAY;return Object(O.jsx)(xe,{type:s,label:c.i18n.translate("xpack.monitoring.elasticsearch.node.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:t}})})}function bs({stats:e,alerts:t={}}){const{transport_address:s,usedHeap:i,freeSpace:n,totalSpace:o,documents:r,dataSize:l,indexCount:u,totalShards:d,nodeTypeLabel:p,status:m,isOnline:g}=e,b=n/o*100,j=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(O.jsx)(Ue,{alerts:t,showOnlyCount:!0})},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.transportAddress",{defaultMessage:"Transport Address"}),value:s,"data-test-subj":"transportAddress"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.jvmHeapLabel",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),value:Ze(i,"0,0.[00]","%",{prependSpace:!1}),"data-test-subj":"jvmHeap"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.freeDiskSpaceLabel",{defaultMessage:"Free Disk Space"}),value:Ze(n,"0.0 b")+" ("+Ze(b,"0,0.[00]","%",{prependSpace:!1})+")","data-test-subj":"freeDiskSpace"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.documentsLabel",{defaultMessage:"Documents"}),value:Ze(r,"0.[0]a"),"data-test-subj":"documentCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.dataLabel",{defaultMessage:"Data"}),value:Ze(l,"0.0 b"),"data-test-subj":"dataSize"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.indicesLabel",{defaultMessage:"Indices"}),value:Ze(u,"int_commas"),"data-test-subj":"indicesCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.shardsLabel",{defaultMessage:"Shards"}),value:Ze(d,"int_commas"),"data-test-subj":"shardsCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.typeLabel",{defaultMessage:"Type"}),value:p,"data-test-subj":"nodeType"}];return Object(O.jsx)(He,{metrics:j,status:m,isOnline:g,IconComponent:({status:e,isOnline:t})=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(gs,{status:e,isOnline:t})),"data-test-subj":"elasticsearchNodeDetailStatus"})}const js=e=>{const{alerts:t}=e;if(U(i.a.useContext(he)))return null;const s=Object.values(t).flat().map((e=>e.states.map((t=>({alert:e,state:t}))))).flat();if(0===s.length)return null;const n=s.map(((e,t)=>{const a=Object(O.jsx)("div",null,Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiIcon,{type:"alert",size:"m",color:"danger"})),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiTextColor,{color:"danger"},ye(e.state.state.ui.message))))),{code:i}=e.state.state.ui.message,n=Object(O.jsx)(u.EuiAccordion,{id:`monitoringAlertCallout_${t}`,buttonContent:a,paddingSize:"s"},null!=i&&i.length?Object(O.jsx)(u.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:300},i):null,Object(O.jsx)(u.EuiListGroup,{flush:!0,bordered:!0,gutterSize:"m",size:"xs",style:{marginTop:"0.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem"}},(e.state.state.ui.message.nextSteps||[]).map(((e,s)=>Object(O.jsx)(u.EuiListGroupItem,{onClick:()=>{},label:ye(e),key:t+s}))),Object(O.jsx)(u.EuiListGroupItem,{label:Object(O.jsx)(Ee,{alert:e.alert.sanitizedRule,key:t,compressed:!0})}))),o=t!==s.length-1?Object(O.jsx)(u.EuiSpacer,null):null;return Object(O.jsx)("div",{key:t},n,o)}));return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiPanel,null,n),Object(O.jsx)(u.EuiSpacer,null))};s(109);class table_head_IndexLabel extends i.a.Component{constructor(e){super(e),this.state={showSystemIndices:e.showSystemIndices},this.toggleShowSystemIndicesState=this.toggleShowSystemIndicesState.bind(this)}toggleShowSystemIndicesState(e){const t=e.target.checked;this.setState({showSystemIndices:t}),this.props.toggleShowSystemIndices(t)}render(){return Object(O.jsx)(u.EuiFlexGroup,null,Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableHead.indicesLabel",defaultMessage:"Indices"})),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiSwitch,{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableHead.filterSystemIndices",{defaultMessage:"Filter for system indices"}),onChange:this.toggleShowSystemIndicesState,checked:this.state.showSystemIndices,"data-test-subj":"shardShowSystemIndices"})))}}class table_head_TableHead extends i.a.Component{constructor(e){super(e)}createColumn({key:e,content:t}){return Object(O.jsx)("th",{scope:"col",key:e,colSpan:1},t)}render(){const e=(this.props.labels||[]).map((e=>{const t={key:e.content.toLowerCase()};return e.showToggleSystemIndicesComponent?t.content=Object(O.jsx)(table_head_IndexLabel,{toggleShowSystemIndices:this.props.toggleShowSystemIndices,showSystemIndices:this.props.showSystemIndices}):t.content=e.content,t})).map(this.createColumn);return Object(O.jsx)("thead",null,Object(O.jsx)("tr",null,e))}}function xs(e,t){const s=[e.type];return t&&s.push(t),"shard"===e.type&&(s.push("monShard"),Object(d.get)(e,"shard.primary",e.primary)?s.push("primary"):s.push("replica"),s.push(Object(d.get)(e,"shard.state",e.state).toLowerCase()),"UNASSIGNED"===Object(d.get)(e,"shard.state",e.state)&&Object(d.get)(e,"shard.primary",e.primary)&&s.push("emergency")),e.master&&s.push("master"),s.join(" ")}const hs={},fs=function(e,t){Object(d.isArray)(hs[e])||(hs[e]=[]),hs[e].push(t)},Os=function(e){delete hs[e]},vs=function(){const e=Array.prototype.slice.call(arguments),t=e.shift();hs[t]&&Object(d.each)(hs[t],(function(t){t.apply(null,e)}))};class shard_Shard extends i.a.Component{constructor(...e){super(...e),j()(this,"state",{tooltipVisible:!1}),j()(this,"generateKey",(e=>{const t=this.props.shard,s=Object(d.get)(t,"shard.primary",t.primary)?"primary":"replica",a="UNASSIGNED"===Object(d.get)(t,"shard.state",t.state)?Math.random():"",i=e?Object(d.get)(t,"relocation_node.uuid",t.relocating_node):Object(d.get)(t,"shard.name",t.node);return t.index+"."+i+"."+s+"."+t.shard+a})),j()(this,"toggle",(e=>{if(this.props.shard.tooltip_message){const t="mouseenter"===e.type?"show":"hide",s=this.generateKey(!0);this.setState({tooltipVisible:"show"===t}),vs(s,t)}}))}componentDidMount(){let e;const t=this.props.shard,s=this;t.tooltip_message&&(e=this.generateKey(),fs(e,(function(e){s.setState({tooltipVisible:"show"===e})})))}componentWillUnmount(){let e;this.props.shard.tooltip_message&&(e=this.generateKey(),Os(e))}render(){const e=this.props.shard,t=xs(e),s=function(e){const t=e.split(" ");return t.includes("emergency")?"danger":t.includes("unassigned")?t.includes("replica")?"warning":"danger":t.includes("relocating")?"accent":t.includes("initializing")?"default":t.includes("primary")?"primary":t.includes("replica")?"secondary":void 0}(t),a=t+" "+Object(d.get)(e,"shard.number",e.shard);let i=Object(O.jsx)(u.EuiBadge,{color:s},Object(d.get)(e,"shard.number",e.shard));const n=e.tooltip_message||c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"});return this.state.tooltipVisible&&(i=Object(O.jsx)(u.EuiToolTip,{content:n,position:"bottom","data-test-subj":"shardTooltip"},Object(O.jsx)("p",null,i))),Object(O.jsx)("div",{onMouseEnter:this.toggle,onMouseLeave:this.toggle,className:t,"data-shard-tooltip":n,"data-shard-classification":a,"data-test-subj":"shardIcon"},i)}}j()(shard_Shard,"displayName",c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"}));class unassigned_Unassigned extends i.a.Component{constructor(...e){super(...e),j()(this,"createShard",(e=>{const t=e.primary?"primary":"replica",s="UNASSIGNED"===e.state?Math.random():"",a=e.index+"."+e.node+"."+t+"."+e.state+"."+e.shard+s;return Object(O.jsx)(shard_Shard,{shard:e,key:a})}))}render(){const e=Object(d.sortBy)(this.props.shards,"shard").map(this.createShard);return Object(O.jsx)("td",{className:"monUnassigned","data-test-subj":"clusterView-Unassigned"},Object(O.jsx)(u.EuiFlexGroup,{wrap:!0,className:"monUnassigned__children"},e))}}j()(unassigned_Unassigned,"displayName",c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedDisplayName",{defaultMessage:"Unassigned"}));const ys=e=>{let t="indices",s=e.name;return"node"===e.type&&(t="nodes",s=e.id),ae(`#/elasticsearch/${t}/${s}`)};function Ms(e){return"node"===e.type?[!e.master,e.name]:[e.name]}class assigned_Assigned extends i.a.Component{constructor(...e){super(...e),j()(this,"createShard",(e=>{const t=Object(d.get)(e,"shard.primary",e.primary)?"primary":"replica",s=`${Object(d.get)(e,"index.name",e.index)}.${Object(d.get)(e,"node.name",e.node)}.${t}.${Object(d.get)(e,"shard.state",e.state)}.${Object(d.get)(e,"shard.number",e.shard)}`;return Object(O.jsx)(shard_Shard,{shard:e,key:s})})),j()(this,"createChild",(e=>{const t=e.id,s=["monChild"];"index"===e.type&&s.push("monChild--index");const a=Object(d.get)(this.props.shardStats.indices,t);if(a)switch(a.status){case"red":s.push("monChild--danger");break;case"yellow":s.push("monChild--warning")}const i=Object(O.jsx)(u.EuiLink,{href:ys(e)},e.name),n="master"===e.node_type?Object(O.jsx)(u.EuiIcon,{type:"starFilledSpace",color:"primary"}):null,o=Object(d.sortBy)(e.children,"shard").map(this.createShard);return Object(O.jsx)(u.EuiFlexItem,{grow:!1,className:xs(e,s.join(" ")),key:t,"data-test-subj":`clusterView-Assigned-${t}`,"data-status":a&&a.status},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"xs"},Object(O.jsx)(u.EuiFlexItem,{grow:!1,className:"monChild__title eui-textNoWrap"},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"xs"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},i),Object(O.jsx)(u.EuiFlexItem,{grow:!1},n))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s"},o))))}))}render(){const e=Object(d.sortBy)(this.props.data,Ms).map(this.createChild);return Object(O.jsx)("td",{className:"monAssigned"},Object(O.jsx)(u.EuiFlexGroup,{wrap:!0,className:"monAssigned__children"},e))}}const Es=e=>{let t;return e.data.unassigned&&e.data.unassigned.length?t=Object(O.jsx)(unassigned_Unassigned,{shards:e.data.unassigned}):3===e.cols&&(t=Object(O.jsx)("td",null)),Object(O.jsx)("tr",null,t,Object(O.jsx)(assigned_Assigned,{shardStats:e.shardStats,data:e.data.children}))};class table_body_TableBody extends i.a.Component{constructor(...e){super(...e),j()(this,"createRow",((e,t)=>Object(O.jsx)(Es,ge()({key:`shardRow-${t}`,data:e},this.props))))}render(){return 0===this.props.totalCount?Object(O.jsx)("tbody",null,Object(O.jsx)("tr",null,Object(O.jsx)("td",{colSpan:this.props.cols},Object(O.jsx)("div",null,Object(O.jsx)("p",{style:{margin:"10px 0"},className:"text-center lead"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableBody.noShardsAllocatedDescription",defaultMessage:"There are no shards allocated."})))))):this.props.shardStats&&this.props.rows.length?Object(O.jsx)("tbody",null,this.props.rows.map(this.createRow)):Object(O.jsx)("tbody",null,Object(O.jsx)("tr",null,Object(O.jsx)("td",{colSpan:this.props.cols})))}}j()(table_body_TableBody,"displayName",c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableBodyDisplayName",{defaultMessage:"TableBody"}));const _s=e=>Object(O.jsx)("table",{cellPadding:"0",cellSpacing:"0",className:"table"},Object(O.jsx)(table_head_TableHead,{labels:e.labels,toggleShowSystemIndices:e.toggleShowSystemIndices,showSystemIndices:e.showSystemIndices}),Object(O.jsx)(table_body_TableBody,{filter:e.filter,totalCount:e.totalCount,rows:e.nodesByIndices,cols:e.labels.length,shardStats:e.shardStats})),ks=e=>{const t=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.primaryLabel",{defaultMessage:"Primary"}),color:"primary"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.replicaLabel",{defaultMessage:"Replica"}),color:"secondary"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.relocatingLabel",{defaultMessage:"Relocating"}),color:"accent"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.initializingLabel",{defaultMessage:"Initializing"}),color:"default"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedPrimaryLabel",{defaultMessage:"Unassigned Primary"}),color:"danger"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedReplicaLabel",{defaultMessage:"Unassigned Replica"}),color:"warning"}];return Object(O.jsx)("div",{className:"monCluster"},Object(O.jsx)(u.EuiTitle,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.shardLegendTitle",defaultMessage:"Shard Legend"}))),Object(O.jsx)(u.EuiSpacer,{size:"xs"}),Object(O.jsx)(u.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s"},t.map((e=>Object(O.jsx)(u.EuiFlexItem,{grow:!1,key:e.label},Object(O.jsx)(u.EuiBadge,{color:e.color},e.label))))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(_s,e))},Ss=({nodeSummary:e,metrics:t,logs:s,alerts:a,nodeId:i,clusterUuid:n,...o})=>{const r=[t.node_jvm_mem,t.node_mem,t.node_total_io,t.node_cpu_metric,t.node_load_average,t.node_latency,t.node_segment_count];return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.node.heading",defaultMessage:"Elasticsearch node"}))),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(bs,{stats:e,alerts:a})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:a}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e},o)),Object(O.jsx)(u.EuiSpacer,null)))))),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(logs_Logs,{logs:s,nodeId:i,clusterUuid:n})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(ks,o))))};s(118);const ws=e=>[{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.nameTitle",{defaultMessage:"Name"}),field:"name",width:"350px",sortable:!0,render:e=>Object(O.jsx)("div",{"data-test-subj":"name"},Object(O.jsx)(u.EuiLink,{href:ae(`#/elasticsearch/indices/${e}`),"data-test-subj":`indexLink-${e}`},e))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(t,s)=>Object(O.jsx)(Ue,{showBadge:!0,alerts:e,stateFilter:e=>e.meta.shardIndex===s.name})},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.statusTitle",{defaultMessage:"Status"}),field:"status",sortable:!0,render:e=>Object(O.jsx)("div",{className:"monElasticsearchIndicesTable__status",title:`Index status: ${e}`},Object(O.jsx)(We,{status:e})," ",Object(d.capitalize)(e))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.documentCountTitle",{defaultMessage:"Document Count"}),field:"doc_count",sortable:!0,render:e=>Object(O.jsx)("div",{"data-test-subj":"documentCount"},Ze(e,Ce))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.dataTitle",{defaultMessage:"Data"}),field:"data_size",sortable:!0,render:e=>Object(O.jsx)("div",{"data-test-subj":"dataSize"},Ze(e,Te))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.indexRateTitle",{defaultMessage:"Index Rate"}),field:"index_rate",sortable:!0,render:e=>Object(O.jsx)("div",{"data-test-subj":"indexRate"},Ze(e,we,"/s"))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.searchRateTitle",{defaultMessage:"Search Rate"}),field:"search_rate",sortable:!0,render:e=>Object(O.jsx)("div",{"data-test-subj":"searchRate"},Ze(e,we,"/s"))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.indices.unassignedShardsTitle",{defaultMessage:"Unassigned Shards"}),field:"unassigned_shards",sortable:!0,render:e=>Object(O.jsx)("div",{"data-test-subj":"unassignedShards"},Ze(e,"0"))}],Ts=({clusterStatus:e,indices:t,sorting:s,pagination:a,onTableChange:i,toggleShowSystemIndices:n,showSystemIndices:o,alerts:r})=>Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(et,{stats:e,alerts:r})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiSwitch,{label:Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.systemIndicesLabel",defaultMessage:"Filter for system indices"}),checked:o,onChange:e=>n(e.target.checked)}),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(dt,{className:"elasticsearchIndicesTable",rows:t,columns:ws(r),sorting:s,pagination:a,message:Object(O.jsx)("div",null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.noIndicesMatchYourSelectionDescription",defaultMessage:"There are no indices that match your selections. Try changing the time range selection."})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.howToShowSystemIndicesDescription",defaultMessage:"If you are looking for system indices (e.g., .kibana), try checking ‘Show system indices’."}))),search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.elasticsearch.indices.monitoringTablePlaceholder",{defaultMessage:"Filter Indices…"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))));function Cs({status:e}){const t=(()=>{const t=e.toUpperCase();return"OPENED"===t?be.GREEN:"CLOSED"===t?be.GRAY:"FAILED"===t?be.RED:be.YELLOW})();return Object(O.jsx)(xe,{type:t,label:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.statusIconLabel",{defaultMessage:"Job Status: {status}",values:{status:e}})})}const Is=({clusterStatus:e,jobs:t,sorting:s,pagination:a,onTableChange:i})=>Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(et,{stats:e})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(dt,{className:"mlJobsTable",rows:t,columns:Ls,sorting:{...s,sort:{...s.sort,field:"job_id"}},pagination:a,message:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.noJobsDescription",{defaultMessage:"There are no Machine Learning Jobs that match your query. Try changing the time range selection."}),search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.filterJobsPlaceholder",{defaultMessage:"Filter Jobs…"})}},onTableChange:i,executeQueryOptions:{defaultFields:["job_id"]}})))),Ls=[{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.jobIdTitle",{defaultMessage:"Job ID"}),field:"job_id",sortable:!0},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.stateTitle",{defaultMessage:"State"}),field:"state",sortable:!0,render:e=>Object(O.jsx)("div",null,Object(O.jsx)(Cs,{status:e})," ",Object(d.capitalize)(e))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.processedRecordsTitle",{defaultMessage:"Processed Records"}),field:"data_counts.processed_record_count",sortable:!0,render:e=>Object(O.jsx)("span",null,Je()(e).format(Ce))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.modelSizeTitle",{defaultMessage:"Model Size"}),field:"model_size_stats.model_bytes",sortable:!0,render:e=>Object(O.jsx)("span",null,Je()(e).format(Te))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.forecastsTitle",{defaultMessage:"Forecasts"}),field:"forecasts_stats.total",sortable:!0,render:e=>Object(O.jsx)("span",null,Je()(e).format(Ce))},{name:c.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.nodeTitle",{defaultMessage:"Node"}),field:"node.name",sortable:!0,render:(e,t)=>t.node?"id"in t.node?Object(O.jsx)(u.EuiLink,{href:ae(`#/elasticsearch/nodes/${t.node.id}`)},e):Object(O.jsx)("span",null,e):Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.mlJobListing.noDataLabel",defaultMessage:"N/A"})}],Ps=e=>{const{isSufficientlySecure:t,hasPermanentEncryptionKey:s,disabledWatcherClusterAlerts:a}=e;!1===t||!1===s?(()=>{const e=g.a.shims.docLinks.links.alerting.generalSettings;g.a.shims.toastNotifications.addWarning({title:Object(l.toMountPoint)(Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.healthCheck.tlsAndEncryptionErrorTitle",defaultMessage:"Additional setup required"})),text:Object(l.toMountPoint)(Object(O.jsx)("div",null,Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionError",{defaultMessage:"Stack monitoring alerts require Transport Layer Security between Kibana and Elasticsearch, and an encryption key in your kibana.yml file."})),Object(O.jsx)(u.EuiSpacer,{size:"xs"}),Object(O.jsx)(u.EuiLink,{href:e,external:!0,target:"_blank"},c.i18n.translate("xpack.monitoring.healthCheck.encryptionErrorAction",{defaultMessage:"Learn how."}))))})})():!1===a?(()=>{const e=g.a.shims.docLinks.links.alerting.generalSettings;g.a.shims.toastNotifications.addWarning({title:Object(l.toMountPoint)(Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.healthCheck.unableToDisableWatches.title",defaultMessage:"Legacy cluster alerts still active"})),text:Object(l.toMountPoint)(Object(O.jsx)("div",null,Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.text",{defaultMessage:"We failed to remove legacy cluster alerts. Please check the Kibana server log for more details, or try again later."})),Object(O.jsx)(u.EuiSpacer,{size:"xs"}),Object(O.jsx)(u.EuiLink,{href:e,external:!0,target:"_blank"},c.i18n.translate("xpack.monitoring.healthCheck.unableToDisableWatches.action",{defaultMessage:"Learn more."}))))})})():!0===a&&g.a.shims.toastNotifications.addWarning({title:Object(l.toMountPoint)(Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.healthCheck.disabledWatches.title",defaultMessage:"New alerts created"})),text:Object(l.toMountPoint)(Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.healthCheck.disabledWatches.text",{defaultMessage:"Review the alert definition using Setup mode and configure additional action connectors to get notified via your favorite method."})))})};var Fs=s(33);function Ns(e){var t,s,a,i;return null!==(t=e.response)&&void 0!==t&&t.status&&-1!==(null===(s=e.response)||void 0===s?void 0:s.status)?Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,null===(a=e.body)||void 0===a?void 0:a.message),Object(O.jsx)(u.EuiText,{size:"xs"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.httpErrorMessage",defaultMessage:"HTTP {errStatus}",values:{errStatus:null===(i=e.response)||void 0===i?void 0:i.status}}))):Object(Fs.formatMsg)(e)}const Ds=()=>{var e;const{services:t}=Object(l.useKibana)(),s=Object(r.useHistory)();return Object(a.useCallback)((e=>{var a,i;if(403===(null===(a=e.response)||void 0===a?void 0:a.status))s.push("/access-denied");else if(404!==(null===(i=e.response)||void 0===i?void 0:i.status)||Object(d.includes)(window.location.hash,"no-data")){var n;null===(n=t.notifications)||void 0===n||n.toasts.addDanger({title:Object(l.toMountPoint)(Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.requestErrorNotificationTitle",defaultMessage:"Monitoring Request Error"})),text:Object(l.toMountPoint)(Ns(e))})}else{var o;const s=Ns(e);null===(o=t.notifications)||void 0===o||o.toasts.addDanger({title:Object(l.toMountPoint)(Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.requestFailedNotificationTitle",defaultMessage:"Monitoring Request Failed"})),text:Object(l.toMountPoint)(Object(O.jsx)("div",null,s,Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(u.EuiButton,{size:"s",color:"danger",onClick:()=>window.location.reload()},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.requestFailedNotification.retryButtonLabel",defaultMessage:"Retry"}))))})}}),[s,null===(e=t.notifications)||void 0===e?void 0:e.toasts])},Rs=()=>{const{services:e}=Object(l.useKibana)(),t=Ds();return{shouldShowAlertsModal:function(e){const t="true"===window.sessionStorage.getItem("ALERTS_MODAL_HAS_BEEN_SHOWN"),s="true"===window.localStorage.getItem("ALERTS_MODAL_DECISION_MADE");return Object.keys(e).length>0?(window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),!1):!t&&!s},enableAlerts:async function(){try{var s;const t=await(null===(s=e.http)||void 0===s?void 0:s.post("../api/monitoring/v1/alerts/enable",{}));window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),Ps(t)}catch(e){await t(e)}},notAskAgain:function(){window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true")},hideModalForSession:function(){window.sessionStorage.setItem("ALERTS_MODAL_HAS_BEEN_SHOWN","true")}}},zs=()=>{const e=Rs(),{navigateToApp:t}=Object(l.useKibana)().services.application,[s,i]=Object(a.useState)(!1),n=()=>{i(!1)},o=Object(O.jsx)(u.EuiButtonEmpty,{iconSide:"right",iconType:"arrowDown",onClick:()=>{i(!s)}},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.dropdown.button",defaultMessage:"Alerts and rules"})),r=[{name:c.i18n.translate("xpack.monitoring.alerts.dropdown.createAlerts",{defaultMessage:"Create default rules"}),onClick:()=>{e.enableAlerts(),n()}},{name:c.i18n.translate("xpack.monitoring.alerts.dropdown.manageRules",{defaultMessage:"Manage rules"}),icon:"tableOfContents",onClick:()=>t("management",{path:"/insightsAndAlerting/triggersActions/rules"})}],d=[{id:0,title:c.i18n.translate("xpack.monitoring.alerts.dropdown.title",{defaultMessage:"Alerts and rules"}),items:r}];return Object(O.jsx)(u.EuiPopover,{panelPaddingSize:"none",anchorPosition:"downLeft",button:o,isOpen:s,closePopover:n},Object(O.jsx)(u.EuiContextMenu,{initialPanelId:0,panels:d}))},As=i.a.createContext({}),Bs=({children:e})=>{const{services:t}=Object(l.useKibana)(),{setHeaderActionMenu:s}=Object(a.useContext)(As);return Object(a.useEffect)((()=>{if(s)return s((s=>Object(l.toMountPoint)(Object(O.jsx)(l.KibanaContextProvider,{services:t},e))(s))),()=>{s(void 0)}}),[e,s,t]),null},Vs=({title:e,pageTitle:t,tabs:s,getPageData:i,product:n,children:o})=>{!function(e,t){var s;const{services:a}=Object(l.useKibana)();let i=Object(d.get)(e,"cluster_name");i=i?`- ${i}`:"",t=t?`- ${t}`:"",null===(s=a.chrome)||void 0===s||s.docTitle.change(c.i18n.translate("xpack.monitoring.stackMonitoringDocTitle",{defaultMessage:"Stack Monitoring {clusterName} {suffix}",values:{clusterName:i,suffix:t}}))}("",e);const{currentTimerange:p}=Object(a.useContext)(E.Context),[m,g]=Object(a.useState)(!1),[b,j]=Object(a.useState)(!1),x=Object(r.useHistory)(),[h,f]=Object(a.useState)(!1),v=Ds(),y=Object(a.useCallback)((e=>(f(!1),e)),[f]);Object(a.useEffect)((()=>{j(!0),null==i||i().then(y).catch((e=>{v(e),f(!0)})).finally((()=>{g(!0),j(!1)}))}),[i,p,y,v]);const M=e=>x.location.pathname===e;return Object(O.jsx)("div",{className:"app-container","data-test-subj":"monitoringAppContainer"},Object(O.jsx)(Bs,null,Object(O.jsx)(zs,null)),Object(O.jsx)(k,{pageTitle:t,onRefresh:()=>{b||(j(!0),null==i||i().then(y).catch(v).finally((()=>{j(!1)})),$(I.d.MetricbeatMigration)&&z())}}),s&&Object(O.jsx)(u.EuiTabs,null,s.map(((e,t)=>{return Object(O.jsx)(u.EuiTab,{key:t,disabled:Us(n),title:e.label,"data-test-subj":e.testSubj,href:(s=e.route,x.createHref({pathname:s})),isSelected:M(e.route)},e.label);var s}))),Object(O.jsx)("div",null,h?null:i&&!m?Object(O.jsx)(pe,null):o))};function Us(e){const t=D();if(!$(I.d.MetricbeatMigration))return!1;if(!t.data)return!1;if(!e)return!1;const s=t.data[e]||{};return 0===s.totalUniqueInstanceCount||0===s.totalUniqueInternallyCollectedCount&&0===s.totalUniqueFullyMigratedCount&&0===s.totalUniquePartiallyMigratedCount}function $s(e){return e.cluster_uuid===T.W&&(e.cluster_name="Standalone Cluster"),e}const Gs=async({clusterUuid:e,timeRange:t,fetch:s,ccs:a,codePaths:i})=>{let n="../api/monitoring/v1/clusters";e&&(n+=`/${e}`);const o=await s(n,{method:"POST",body:JSON.stringify({ccs:a,timeRange:t,codePaths:i})});return o.map($s)};function qs(e,t,s){var i;const{services:n}=Object(l.useKibana)(),o=null===(i=n.data)||void 0===i?void 0:i.query.timefilter.timefilter.getBounds(),[r]=Object(a.useState)(o.min.toISOString()),[c]=Object(a.useState)(o.max.toISOString()),[u,d]=Object(a.useState)([]),[p,m]=Object(a.useState)(!1),g=Ds();return Object(a.useEffect)((()=>{!async function(){try{var t;if(null!==(t=n.http)&&void 0!==t&&t.fetch){const t=await Gs({timeRange:{min:r,max:c},fetch:n.http.fetch,clusterUuid:e,codePaths:s});d(t)}}catch(e){g(e)}finally{m(!0)}}()}),[g,e,t,n.http,s,r,c]),{clusters:u,loaded:p}}const Hs=[T.j],Ws=({staticLoadingState:e})=>{const{clusters:t,loaded:s}=qs(null,void 0,Hs),a=c.i18n.translate("xpack.monitoring.loading.pageTitle",{defaultMessage:"Loading"});return e?Object(O.jsx)(Vs,{title:a},Object(O.jsx)(pe,null),";"):Object(O.jsx)(Vs,{title:a},!1===s?Object(O.jsx)(pe,null):Ks(t))},Ks=e=>e&&e.length?1===e.length?Object(O.jsx)(r.Redirect,{to:"/overview"}):Object(O.jsx)(r.Redirect,{to:"/home"}):Object(O.jsx)(r.Redirect,{to:"/no-data"}),Js=[T.l],Ys=()=>{var e,t,s;const i=c.i18n.translate("xpack.monitoring.license.licenseRouteTitle",{defaultMessage:"License"}),{setIsDisabled:n}=Object(a.useContext)(E.Context);Object(a.useEffect)((()=>(n(!0),()=>{n(!1)})),[n]);const o=Object(a.useContext)(v),r=o.cluster_uuid,u=o.ccs,[d,p]=Object(a.useState)([]),{services:m}=Object(l.useKibana)(),g=null===(e=m.uiSettings)||void 0===e?void 0:e.get("dateFormat:tz"),b=null===(t=m.application)||void 0===t?void 0:t.getUrlForApp("management",{path:"stack/license_management/upload_license"}),j=Object(a.useCallback)((async()=>{var e;const t=null===(e=m.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();let s="../api/monitoring/v1/clusters";r&&(s+=`/${r}`);try{var a;const e=await(null===(a=m.http)||void 0===a?void 0:a.fetch(s,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:t.min.toISOString(),max:t.max.toISOString()},codePaths:Js})}));p(function(e){return e.map(Qs)}(e))}catch(e){}}),[u,r,null===(s=m.data)||void 0===s?void 0:s.query.timefilter.timefilter,m.http]);return Object(O.jsx)(Vs,{title:i,pageTitle:"",getPageData:j},function(e,t,s){if(e.length){const a=e[0],i=a.isPrimary,n=a.license;let o=null==n?void 0:n.expiry_date_in_millis;void 0!==o&&(o=function(e,t){return Se.a.tz(e,t||Se.a.tz.guess()).format("LL LTS")}(o,t));const r=Date.now()>o;return Object(O.jsx)(ce,{isPrimaryCluster:i,status:n.status,type:n.type,isExpired:r,expiryDate:o,uploadLicensePath:s})}return null}(d,g,b))};function Qs(e){return e.cluster_uuid===T.W&&(e.cluster_name="Standalone Cluster"),e}function Xs(e){if("green"===e.status)return c.i18n.translate("xpack.monitoring.cluster.health.healthy",{defaultMessage:"Healthy"});const{product:t,status:s}=e;if("es"===t){if("yellow"===e.status)return c.i18n.translate("xpack.monitoring.cluster.health.replicaShards",{defaultMessage:"Missing replica shards"});if("red"===e.status)return c.i18n.translate("xpack.monitoring.cluster.health.primaryShards",{defaultMessage:"Missing primary shards"})}return"kb"!==t||"yellow"!==s&&"red"!==s?"N/A":Object(O.jsx)(u.EuiText,null,c.i18n.translate("xpack.monitoring.cluster.health.pluginIssues",{defaultMessage:"Some plugins may be experiencing issues. Please check "}),Object(O.jsx)(u.EuiLink,{href:`${g.a.shims.getBasePath()}/status`},"the Kibana status page"),".")}function Zs(e){const t={green:"success",yellow:"warning",red:"danger"}[e.status]||"n/a";return Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiHealth,{color:t,"data-test-subj":"statusIcon"},Object(O.jsx)(Xs,e))))}const ea=({extras:e})=>void 0===e?null:Object(O.jsx)(u.EuiFlexItem,{grow:!1},e);function ta(e){const t={elasticsearch:"logoElasticsearch",kibana:"logoKibana",logstash:"logoLogstash",beats:"logoBeats",apm:"apmApp"}[e.url];return Object(O.jsx)("div",{"data-test-subj":`clusterItemContainer${e.title}`},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiIcon,{type:t,size:"l"})),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,null,Object(O.jsx)("h2",null,e.title))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},e.statusIndicator),Object(O.jsx)(ea,{extras:e.extras})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),e.children,Object(O.jsx)(u.EuiSpacer,{size:"xxl"}))}function sa({usedBytes:e,maxBytes:t}){return e&&t?Object(O.jsx)("span",null,Object(O.jsx)(u.EuiText,null,Ye(e,t))):e?Object(O.jsx)("span",null,Object(O.jsx)(u.EuiText,null,Xe(e,"byte"))):null}function aa({usedBytes:e,maxBytes:t}){return e&&t?Object(O.jsx)("span",null,Object(O.jsx)(u.EuiText,null,Qe(e,t)),Object(O.jsx)(u.EuiText,{color:"subdued",size:"s"},Ye(e,t))):Object(O.jsx)(u.EuiText,null,"0")}function ia({setupModeEnabled:e,setupModeData:t,children:s,...a}){return e&&0===Object(d.get)(t,"totalUniqueInstanceCount",0)?s:Object(O.jsx)(u.EuiLink,a,s)}function na({setupModeData:e,badgeClickLink:t,productName:s}){if(!e)return null;const{totalUniqueInstanceCount:a,totalUniqueFullyMigratedCount:i,totalUniquePartiallyMigratedCount:n}=e,o=a>0&&(i===a||n===a),r=n>0,l=Object(d.get)(e,"detected.mightExist")||Object(d.get)(e,"detected.doesExist");let p=null;if(0===a)if(l){const e=c.i18n.translate("xpack.monitoring.setupMode.tooltip.detected",{defaultMessage:"No monitoring"});p=Object(O.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.mightExist",{defaultMessage:"We detected usage of this product. Click to start monitoring."})},Object(O.jsx)(u.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=c.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsage",{defaultMessage:"No usage"});p=Object(O.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsageDetected",{defaultMessage:"We did not detect any usage. Click to view {identifier}.",values:{identifier:ut(s,!0)}})},Object(O.jsx)(u.EuiBadge,{color:"hollow",iconType:"flag",href:t,onClickAriaLabel:e},e))}else if(o)if(r){const e=c.i18n.translate("xpack.monitoring.euiTable.isPartiallyMigratedLabel",{defaultMessage:"Self monitoring is on"});p=Object(O.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.disableInternal",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}. Click to view {identifierPlural} and disable self monitoring.",values:{identifierPlural:ut(s,!0)}})},Object(O.jsx)(u.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=c.i18n.translate("xpack.monitoring.euiTable.isFullyMigratedLabel",{defaultMessage:"Metricbeat monitoring"});p=Object(O.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.allSet",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}.",values:{identifierPlural:ut(s,!0)}})},Object(O.jsx)(u.EuiBadge,{color:"secondary",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=c.i18n.translate("xpack.monitoring.euiTable.isInternalCollectorLabel",{defaultMessage:"Self monitoring"});p=Object(O.jsx)(u.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.monitoring.setupMode.tooltip.oneInternal",{defaultMessage:"At least one {identifier} isn’t monitored using Metricbeat. Click to view status.",values:{identifier:ut(s)}})},Object(O.jsx)(u.EuiBadge,{color:"danger",iconType:"flag",href:t,onClickAriaLabel:e},e))}return Object(O.jsx)(u.EuiFlexItem,{grow:!1,"data-test-subj":"monitoringSetupModeMetricbeatMigrationTooltip"},p)}function oa(e,t,s){if(!e)return!1;const a=U(s),i=t.find((t=>e[t]&&e[t].find((e=>e.states.length>0))));return a||i}function ra(e){switch(e){case"warn":return"warning";case"debug":return"hollow";case"info":return"default";case"error":return"danger"}}function la(e){return e.logs.enabled?Object(O.jsx)(u.EuiDescriptionList,{type:"column"},e.logs.types.map(((e,t)=>Object(O.jsx)(a.Fragment,{key:t},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.logTypeTitle",defaultMessage:"{type}",values:{type:Object(d.capitalize)(e.type)}})),Object(O.jsx)(u.EuiDescriptionListDescription,null,function(e){return Object(O.jsx)(u.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"xs"},e.levels.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{grow:!1,key:t},Object(O.jsx)(u.EuiToolTip,{position:"top",content:ca[e.level]||ca.unknown},Object(O.jsx)(u.EuiBadge,{color:ra(e.level)},Xe(e.count,"int_commas")))))))}(e))))),0===e.logs.types.length?Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.noLogsFound",defaultMessage:"No logs found."}):null):Object(O.jsx)(u.EuiDescriptionList,null,Object(O.jsx)(At,{reason:e.logs.reason}))}const ca={info:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.infoLogsTooltipText",{defaultMessage:"The number of information logs"}),warn:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.warnLogsTooltipText",{defaultMessage:"The number of warning logs"}),debug:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.debugLogsTooltipText",{defaultMessage:"The number of debug logs"}),error:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.errorLogsTooltipText",{defaultMessage:"The number of error logs"}),fatal:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.fatalLogsTooltipText",{defaultMessage:"The number of fatal logs"}),unknown:c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.unknownLogsTooltipText",{defaultMessage:"Unknown"})};const ua=[T.G,T.N,T.F],da=[T.H,T.J,T.U,T.V,T.P,T.R,T.K,T.Q],pa=[T.M];function ma(e){const t=e.cluster_stats||{},s=t.nodes,n=t.indices,o=e.setupMode,r=e.alerts,l=i.a.useContext(he),p=()=>ae("#/elasticsearch"),m=()=>ae("#/elasticsearch/nodes"),{primaries:g,replicas:b}=(e=>{const t=Object(d.get)(e,"total",0);let s=Object(d.get)(e,"primaries","N/A"),a="N/A";return"N/A"!==s&&(a=Xe(t-s,"int_commas"),s=Xe(s,"int_commas")),{primaries:s,replicas:a}})(Object(d.get)(e,"cluster_stats.indices.shards",{})),j=Object(d.get)(o.data,"elasticsearch"),x=$(I.d.MetricbeatMigration)?Object(O.jsx)(na,{setupModeData:j,productName:T.p,badgeClickLink:m()}):null;let h=null;if(oa(r,da,l)){const e=da.map((e=>r[e]));h=Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(Ve,{alerts:e}))}let f=null;if(oa(r,ua,l)){const e=ua.map((e=>r[e]));f=Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(Ve,{alerts:e}))}let v=null;if(oa(r,pa,l)){const e=pa.map((e=>r[e]));v=Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(Ve,{alerts:e}))}return Object(O.jsx)(ta,ge()({},e,{url:"elasticsearch",title:"Elasticsearch"}),Object(O.jsx)(u.EuiFlexGrid,{columns:4},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:o.enabled,setupModeData:j,href:p(),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.overviewLinkAriaLabel",{defaultMessage:"Elasticsearch Overview"}),"data-test-subj":"esOverview"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.overviewLinkLabel",defaultMessage:"Overview"}))))),f),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.healthLabel",defaultMessage:"Health"})),Object(O.jsx)(u.EuiDescriptionListDescription,null,Object(O.jsx)(u.EuiHealth,{color:{green:"success",yellow:"warning",red:"danger"}[t.status],"data-test-subj":"statusIcon"},Object(O.jsx)(Xs,{status:t.status,product:"es"}))),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.versionLabel",defaultMessage:"Version"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esVersion"},e.version||c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esUptime"},Xe(Object(d.get)(s,"jvm.max_uptime_in_millis"),"time_since")),(()=>{if(e.ml){const t=ae("#/elasticsearch/ml_jobs");return Object(O.jsx)(i.a.Fragment,null,Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(ia,{setupModeEnabled:o.enabled,setupModeData:j,href:t},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jobsLabel",defaultMessage:"Machine learning jobs"}))),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esMlJobs"},Object(O.jsx)(ia,{setupModeEnabled:o.enabled,setupModeData:j,href:t},e.ml.jobs)))}return null})(),e.showLicenseExpiration?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.licenseLabel",defaultMessage:"License"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esLicenseType"},Object(O.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiLink,{href:ae("#/license")},Object(d.capitalize)(e.license.type))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiText,{size:"s"},void 0===e.license.expiry_date_in_millis?"":Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.expireDateText",defaultMessage:"expires on {expiryDate}",values:{expiryDate:(y=e.license.expiry_date_in_millis,Se.a.tz(y,Se.a.tz.guess()).format("LL"))}})))))):null))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(u.EuiLink,{"data-test-subj":"esNumberOfNodes",href:m()},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:Xe(Object(d.get)(s,"count.total"),"int_commas")}}))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},x,h))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskAvailableLabel",defaultMessage:"Disk Available"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esDiskAvailable"},Object(O.jsx)(aa,{usedBytes:Object(d.get)(s,"fs.available.bytes",Object(d.get)(s,"fs.available_in_bytes")),maxBytes:Object(d.get)(s,"fs.total.bytes",Object(d.get)(s,"fs.total_in_bytes"))})),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esJvmHeap"},Object(O.jsx)(aa,{usedBytes:Object(d.get)(s,"jvm.mem.heap.used.bytes",Object(d.get)(s,"jvm.mem.heap_used_in_bytes")),maxBytes:Object(d.get)(s,"jvm.mem.heap.max.bytes",Object(d.get)(s,"jvm.mem.heap_max_in_bytes"))}))))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:o.enabled,setupModeData:j,href:ae("#/elasticsearch/indices"),"data-test-subj":"esNumberOfIndices","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.indicesCountLinkAriaLabel",{defaultMessage:"Elasticsearch Indices: {indicesCount}",values:{indicesCount:Xe(Object(d.get)(n,"count"),"int_commas")}})},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.indicesCountLinkLabel",defaultMessage:"Indices: {indicesCount}",values:{indicesCount:Xe(Object(d.get)(n,"count"),"int_commas")}}))))),v),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.documentsLabel",defaultMessage:"Documents"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esDocumentsCount",className:"eui-textBreakWord"},Xe(Object(d.get)(n,"docs.total",Object(d.get)(n,"docs.count")),"int_commas")),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskUsageLabel",defaultMessage:"Disk Usage"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esDiskUsage"},Xe(Object(d.get)(n,"store.size.bytes",Object(d.get)(n,"store.size_in_bytes")),"byte")),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.primaryShardsLabel",defaultMessage:"Primary Shards"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esPrimaryShards"},g),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.replicaShardsLabel",defaultMessage:"Replica Shards"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"esReplicaShards"},b)))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:o.enabled,setupModeData:j,href:p(),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.esPanel.logsLinkAriaLabel",{defaultMessage:"Elasticsearch Logs"}),"data-test-subj":"esLogs"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.logsLinkLabel",defaultMessage:"Logs"})))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),la(e)))));var y}const ga=[T.L];function ba(e){const t=e.setupMode,s=e.alerts,a=i.a.useContext(he),n=t.enabled&&Object(d.get)(t.data,"kibana.detected.doesExist",!1);if(!e.count&&!n)return null;const o=Object(O.jsx)(Zs,{status:e.status,product:"kb"}),r=()=>ae("#/kibana/instances"),l=Object(d.get)(t.data,"kibana"),p=$(I.d.MetricbeatMigration)?Object(O.jsx)(na,{setupModeData:l,productName:T.z,badgeClickLink:r()}):null;let m=null;if(oa(s,ga,a)){const e=ga.map((e=>s[e]));m=Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(Ve,{alerts:e}))}return Object(O.jsx)(ta,ge()({},e,{statusIndicator:o,url:"kibana",title:c.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.kibanaTitle",{defaultMessage:"Kibana"})}),Object(O.jsx)(u.EuiFlexGrid,{columns:4},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:t.enabled,setupModeData:l,href:ae("#/kibana"),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkAriaLabel",{defaultMessage:"Kibana Overview"}),"data-test-subj":"kbnOverview"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column","data-test-subj":"kibana_overview","data-overview-status":e.status},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.requestsLabel",defaultMessage:"Requests"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnRequests"},e.requests_total),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeLabel",defaultMessage:"Max. Response Time"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnMaxResponseTime"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeDescription",defaultMessage:"{maxTime} ms",values:{maxTime:e.response_time_max}}))))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(u.EuiLink,{href:r(),"data-test-subj":"kbnInstances","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkAriaLabel",{defaultMessage:"Kibana Instances: {instancesCount}",values:{instancesCount:e.count}})},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkLabel",defaultMessage:"Instances: {instancesCount}",values:{instancesCount:Object(O.jsx)("span",{"data-test-subj":"number_of_kibana_instances"},e.count)}}))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},p,m))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.connectionsLabel",defaultMessage:"Connections"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnConnections"},Xe(e.concurrent_connections,"int_commas")),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"kbnMemoryUsage"},Object(O.jsx)(aa,{usedBytes:e.memory_size,maxBytes:e.memory_limit})))))))}const ja=[T.O];function xa(e){const{setupMode:t}=e,s=e.node_count||0,a=e.queue_types||{},n=e.alerts,o=i.a.useContext(he);if(!s&&!t.enabled)return null;const r=()=>ae("#/logstash/nodes"),l=Object(d.get)(t.data,"logstash"),p=$(I.d.MetricbeatMigration)?Object(O.jsx)(na,{setupModeData:l,productName:T.D,badgeClickLink:r()}):null;let m=null;if(oa(n,ja,o)){const e=ja.map((e=>n[e]));m=Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(Ve,{alerts:e}))}return Object(O.jsx)(ta,ge()({},e,{url:"logstash",title:c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.logstashTitle",{defaultMessage:"Logstash"})}),Object(O.jsx)(u.EuiFlexGrid,{columns:4},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:t.enabled,setupModeData:l,href:ae("#/logstash"),"data-test-subj":"lsOverview","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.overviewLinkAriaLabel",{defaultMessage:"Logstash Overview"})},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column","data-test-subj":"logstash_overview"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsEventsReceived"},Xe(e.events_in_total,"0.[0]a")),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsEventsEmitted"},Xe(e.events_out_total,"0.[0]a"))))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(u.EuiLink,{href:r(),"data-test-subj":"lsNodes","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkAriaLabel",{defaultMessage:"Logstash Nodes: {nodesCount}",values:{nodesCount:s}})},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkLabel",defaultMessage:"Nodes: {nodesCount}",values:{nodesCount:Object(O.jsx)("span",{"data-test-subj":"number_of_logstash_instances"},s)}}))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},p,m))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsUptime"},e.max_uptime?Xe(e.max_uptime,"time_since"):0),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"lsJvmHeap"},Object(O.jsx)(aa,{usedBytes:e.avg_memory_used,maxBytes:e.avg_memory}))))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:t.enabled,setupModeData:l,href:ae("#/logstash/pipelines"),"data-test-subj":"lsPipelines","aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.pipelineCountLinkAriaLabel",{defaultMessage:"Logstash Pipelines (beta feature): {pipelineCount}",values:{pipelineCount:e.pipeline_count}})},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.pipelinesCountLinkLabel",defaultMessage:"Pipelines: {pipelineCount}",values:{pipelineCount:Object(O.jsx)("span",{"data-test-subj":"number_of_logstash_pipelines"},e.pipeline_count)}}))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiIconTip,{content:c.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.betaFeatureTooltip",{defaultMessage:"Beta feature"}),position:"bottom",type:"beaker","aria-label":"Beta feature"}))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withMemoryQueuesLabel",defaultMessage:"With Memory Queues"})),Object(O.jsx)(u.EuiDescriptionListDescription,null,a[T.C.QUEUE_TYPES.MEMORY]||0),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withPersistentQueuesLabel",defaultMessage:"With Persistent Queues"})),Object(O.jsx)(u.EuiDescriptionListDescription,null,a[T.C.QUEUE_TYPES.PERSISTED]||0))))))}function ha(e){const{setupMode:t}=e,s=Object(d.get)(e,"beats.total")||0;if(0===s&&!t.enabled)return null;const a=Object(d.get)(t.data,"beats"),i=$(I.d.MetricbeatMigration)?Object(O.jsx)(na,{setupModeData:a,productName:T.b,badgeClickLink:ae("#/beats/beats")}):null,n=Object(d.get)(e,"beats.types",[]).map(((e,t)=>[Object(O.jsx)(u.EuiDescriptionListTitle,{key:`beat-types-type-${t}`,"data-test-subj":"beatTypeCount","data-test-beat-type-count":e.type+":"+e.count},e.type),Object(O.jsx)(u.EuiDescriptionListDescription,{key:`beat-types-count-${t}`},e.count)]));return Object(O.jsx)(ta,ge()({},e,{url:"beats",title:c.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.beatsTitle",{defaultMessage:"Beats"})}),Object(O.jsx)(u.EuiFlexGrid,{columns:4},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:t.enabled,setupModeData:a,href:ae("#/beats"),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.overviewLinkAriaLabel",{defaultMessage:"Beats Overview"}),"data-test-subj":"beatsOverview"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.totalEventsLabel",defaultMessage:"Total Events"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"beatsTotalEvents"},Ze(e.totalEvents,"0.[0]a")),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.bytesSentLabel",defaultMessage:"Bytes Sent"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"beatsBytesSent"},Ze(e.bytesSent,"byte"))))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(u.EuiLink,{href:ae("#/beats/beats"),"aria-label":c.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.instancesTotalLinkAriaLabel",{defaultMessage:"Beats Instances: {beatsTotal}",values:{beatsTotal:s}}),"data-test-subj":"beatsListing"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.beatsTotalLinkLabel",defaultMessage:"Beats: {beatsTotal}",values:{beatsTotal:Object(O.jsx)("span",{"data-test-subj":"beatsTotal"},s)}}))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},n)))))}const fa=e=>{if(!g.a.shims.isCloud||!e)return!1;let t=!1;return e.forEach((e=>{const[s,a]=e.split("."),i=Number(s);(i>7||7===i&&Number(a)>=13)&&(t=!0)})),t},Oa=e=>e?c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmFleetTitle",{defaultMessage:"APM & Fleet server"}):c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmTitle",{defaultMessage:"APM server"});function va(e){const{setupMode:t,versions:s}=e,a=Object(d.get)(e,"apms.total")||0;if(0===a&&!t.enabled)return null;const i=fa(s),{link:n,aria:o}=((e,t)=>{const s=Object(O.jsx)("span",{"data-test-subj":"apmsTotal"},t),a={};return e?(a.link=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.agentServersTotalLinkLabel",defaultMessage:"APM & Fleet Servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesAndFleetsTotalLinkAriaLabel",{defaultMessage:"APM and Fleet server instances: {apmsTotal}",values:{apmsTotal:s}}),a):(a.link=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.serversTotalLinkLabel",defaultMessage:"APM servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesTotalLinkAriaLabel",{defaultMessage:"APM server instances: {apmsTotal}",values:{apmsTotal:s}}),a)})(i,a),r=(e=>e?c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewFleetLinkLabel",{defaultMessage:"APM & Fleet server overview"}):c.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewLinkLabel",{defaultMessage:"APM server overview"}))(i),l=()=>ae("#/apm/instances"),p=Object(d.get)(t.data,"apm"),m=$(I.d.MetricbeatMigration)?Object(O.jsx)(na,{setupModeData:p,badgeClickLink:l(),productName:T.a}):null;return Object(O.jsx)(ta,ge()({},e,{url:"apm",title:Oa(i)}),Object(O.jsx)(u.EuiFlexGrid,{columns:4},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(ia,{setupModeEnabled:t.enabled,setupModeData:p,href:ae("#/apm"),"aria-label":r,"data-test-subj":"apmOverview"},r))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.processedEventsLabel",defaultMessage:"Processed Events"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"apmsTotalEvents"},Ze(e.totalEvents,"0.[0]a")),Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventLabel",defaultMessage:"Last Event"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"apmsBytesSent"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventDescription",defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+Oe()(e.timeOfLastEvent),T.c)}}))))),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h3",null,Object(O.jsx)(u.EuiLink,{href:l(),"aria-label":o,"data-test-subj":"apmListing"},n)))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},m))),Object(O.jsx)(u.EuiHorizontalRule,{margin:"m"}),Object(O.jsx)(u.EuiDescriptionList,{type:"column"},Object(O.jsx)(u.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.memoryUsageLabel",defaultMessage:"Memory Usage (delta)"})),Object(O.jsx)(u.EuiDescriptionListDescription,{"data-test-subj":"apmMemoryUsage"},Object(O.jsx)(sa,{usedBytes:e.memRss})))))))}function ya(e){const t=e.cluster.cluster_uuid===T.W;return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.overview.heading",defaultMessage:"Stack Monitoring Overview"}))),t?null:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(ma,ge()({},e.cluster.elasticsearch,{version:e.cluster.version,ml:e.cluster.ml,license:e.cluster.license,setupMode:e.setupMode,showLicenseExpiration:e.showLicenseExpiration,alerts:e.alerts})),Object(O.jsx)(ba,ge()({},e.cluster.kibana,{setupMode:e.setupMode,alerts:e.alerts}))),Object(O.jsx)(xa,ge()({},e.cluster.logstash,{setupMode:e.setupMode,alerts:e.alerts})),Object(O.jsx)(ha,ge()({},e.cluster.beats,{setupMode:e.setupMode,alerts:e.alerts})),Object(O.jsx)(va,ge()({},e.cluster.apm,{setupMode:e.setupMode,alerts:e.alerts}))))}const Ma=Object(a.createContext)({}),Ea=c.i18n.translate("xpack.monitoring.metricbeatMigration.migrationStatus",{defaultMessage:"Migration status"}),_a=c.i18n.translate("xpack.monitoring.metricbeatMigration.monitoringStatus",{defaultMessage:"Monitoring status"});function ka(e){return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiCallOut,{color:"warning",iconType:"help",title:Object(O.jsx)(u.EuiText,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetup",defaultMessage:"If security is enabled, {link} might be required.",values:{link:Object(O.jsx)(a.Fragment,null," ",Object(O.jsx)(u.EuiLink,{href:e,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetupLinkText",defaultMessage:"additional setup"})))}}))}))}function Sa(e){return e.isInternalCollector||e.isNetNewUser?{title:e.isNetNewUser?_a:Ea,status:"incomplete",children:Object(O.jsx)(u.EuiCallOut,{size:"s",color:"warning",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.isInternalCollectorStatusTitle",{defaultMessage:"No monitoring data detected, but we’ll continue checking."})})}:e.isPartiallyMigrated||e.isFullyMigrated?{title:Ea,status:"complete",children:Object(O.jsx)(u.EuiCallOut,{size:"s",color:"success",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusDescription",{defaultMessage:"Metricbeat is shipping monitoring data."})))}:null}function wa(e,t){if(!e||!e.isFullyMigrated){let s="";if(e){const t=ve(e.lastInternallyCollectedTimestamp||e.lastTimestamp,T.c);s=c.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.partiallyMigratedStatusDescription",{defaultMessage:"Last self monitoring was {secondsSinceLastInternalCollectionLabel} ago.",values:{secondsSinceLastInternalCollectionLabel:t}})}return{title:Ea,status:"incomplete",children:Object(O.jsx)(u.EuiCallOut,{size:"s",color:"warning",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusTitle",{defaultMessage:"Data is still coming from self monitoring"})},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusDescription",{defaultMessage:"It can take up to {secondsAgo} seconds to detect data.",values:{secondsAgo:t.secondsAgo}})),Object(O.jsx)("p",null,s))}}return{title:Ea,status:"complete",children:Object(O.jsx)(u.EuiCallOut,{size:"s",color:"success",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusDescription",{defaultMessage:"We are not seeing any documents from self monitoring. Migration complete!"})))}}const Ta="beat";const Ca="setMonitoringUrl",Ia="enableMetricbeat",La="disableInternal";function Pa(e,t,s,i,n){switch(e){case T.z:if(s===Ia)return function(e,t,{esMonitoringUrl:s}){const i=g.a.shims.docLinks.links.monitoring.monitorKibana,n=g.a.shims.docLinks.links.metricbeat.install,o=g.a.shims.docLinks.links.metricbeat.start,r=ka(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Kibana"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Kibana x-pack module in Metricbeat"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable kibana-xpack"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Kibana monitoring metrics from http://localhost:5601. If the local Kibana instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(O.jsx)(zt,null,"hosts"),file:Object(O.jsx)(zt,null,"modules.d/kibana-xpack.yml")}}))),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(O.jsx)(zt,null,"metricbeat.yml")}})),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:o,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Sa(e)]}(t,0,n);if(s===La)return function(e,t){let s=null;return e.isPrimary&&(s=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartWarningTitle",{defaultMessage:"This step requires you to restart the Kibana server"}),color:"warning",iconType:"help"},Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartNote",defaultMessage:"Expect errors until the server is running again."})))))),[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Kibana monitoring metrics"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.description",defaultMessage:"Add this setting to {file}.",values:{file:Object(O.jsx)(zt,null,"kibana.yml")}}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.kibana.collection.enabled: false"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.note",defaultMessage:"For {config}, leave the default value of ({defaultValue}).",values:{config:Object(O.jsx)(zt,null,"monitoring.enabled"),defaultValue:Object(O.jsx)(zt,null,"true")}}))),s)},wa(e,t)]}(t,i);case T.p:if(s===Ia)return function(e,t,{esMonitoringUrl:s}){const i=g.a.shims.docLinks.links.monitoring.monitorElasticsearch,n=g.a.shims.docLinks.links.metricbeat.install,o=g.a.shims.docLinks.links.metricbeat.start,r=ka(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Elasticsearch"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Elasticsearch x-pack module in Metricbeat"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleInstallDirectory",{defaultMessage:"From the installation directory, run:"}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable elasticsearch-xpack"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module collects Elasticsearch metrics from {url}. If the local server has a different address, add it to the hosts setting in {module}.",values:{module:Object(O.jsx)(zt,null,"modules.d/elasticsearch-xpack.yml"),url:Object(O.jsx)(zt,null,"http://localhost:9200")}}))),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send data to the monitoring cluster"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatDescription",defaultMessage:"Modify {file} to set the connection information.",values:{file:Object(O.jsx)(zt,null,"metricbeat.yml")}})),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:o,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},Sa(e)]}(t,0,n);if(s===La)return function(e,t){return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionDescription",defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics. Set {monospace} to false on each server in the production cluster.",values:{monospace:Object(O.jsx)(zt,null,"xpack.monitoring.elasticsearch.collection.enabled")}}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"curl"},'PUT _cluster/settings\n{\n  "persistent": {\n    "xpack.monitoring.elasticsearch.collection.enabled": false\n  }\n}\n          '))},wa(e,t)]}(t,i);case T.D:if(s===Ia)return function(e,t,{esMonitoringUrl:s}){const i=g.a.shims.docLinks.links.monitoring.monitorLogstash,n=g.a.shims.docLinks.links.metricbeat.install,o=g.a.shims.docLinks.links.metricbeat.start,r=ka(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Logstash"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Logstash x-pack module in Metricbeat"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable logstash-xpack"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Logstash monitoring metrics from http://localhost:9600. If the local Logstash instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(O.jsx)(zt,null,"hosts"),file:Object(O.jsx)(zt,null,"modules.d/logstash-xpack.yml")}}))),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(O.jsx)(zt,null,"metricbeat.yml")}})),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:o,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Sa(e)]}(t,0,n);if(s===La)return function(e,t){return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Logstash monitoring metrics"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the Logstash configuration file ({file}):",values:{file:Object(O.jsx)(zt,null,"logstash.yml")}}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"xpack.monitoring.enabled: false"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart Logstash after making this change."}))))},wa(e,t)]}(t,i);case T.b:if(s===Ia)return function(e,t,{esMonitoringUrl:s}){const i=g.a.shims.docLinks.links.metricbeat.configure,n=g.a.shims.docLinks.links.metricbeat.install,o=g.a.shims.docLinks.links.metricbeat.start,r=g.a.shims.docLinks.links.metricbeat.httpEndpoint,l=e.beatType,d=ka(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as this {beatType}",values:{beatType:l||Ta}}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect {beatType} monitoring metrics from http://localhost:5066. If the {beatType} instance being monitored has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(O.jsx)(zt,null,"hosts"),file:Object(O.jsx)(zt,null,"modules.d/beat-xpack.yml"),beatType:l||Ta}}))),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiCallOut,{color:"warning",iconType:"help",title:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirections",defaultMessage:"In order for Metricbeat to collect metrics from the running {beatType}, you need to {link}.",values:{link:Object(O.jsx)(u.EuiLink,{href:r,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirectionsLinkText",defaultMessage:"enable an HTTP endpoint for the {beatType} instance being monitored",values:{beatType:l}})),beatType:l||Ta}})))}),d)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(O.jsx)(zt,null,"metricbeat.yml")}})),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),d)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:o,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Sa(e)]}(t,0,n);if(s===La)return function(e,t){const s=e.beatType;return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of {beatType}'s monitoring metrics",values:{beatType:s||Ta}}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in {beatType}'s configuration file ({file}):",values:{beatType:s||Ta,file:Object(O.jsx)(zt,null,s,".yml")}}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart {beatType} after making this change.",values:{beatType:s||Ta}}))))},wa(e,t)]}(t,i);case T.a:if(s===Ia)return function(e,t,{esMonitoringUrl:s}){const i=g.a.shims.docLinks.links.metricbeat.configure,n=g.a.shims.docLinks.links.metricbeat.install,o=g.a.shims.docLinks.links.metricbeat.start,r=ka(i);return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as the APM server"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:n,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect APM server monitoring metrics from http://localhost:5066. If the local APM server has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(O.jsx)(zt,null,"hosts"),file:Object(O.jsx)(zt,null,"modules.d/beat-xpack.yml")}}))),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(O.jsx)(zt,null,"metricbeat.yml")}})),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{href:o,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Sa(e)]}(t,0,n);if(s===La)return function(e,t){return[{title:c.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of the APM server's monitoring metrics"}),children:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the APM server's configuration file ({file}):",values:{file:Object(O.jsx)(zt,null,"apm-server.yml")}}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart the APM server after making this change."}))))},wa(e,t)]}(t,i)}return[]}const Fa=new f.Storage(window.localStorage),Na=`${T.X}.mb_migration.esMonitoringUrl`;class flyout_Flyout extends a.Component{constructor(e){super(e),j()(this,"setEsMonitoringUrl",(e=>{Fa.set(Na,e),this.setState({esMonitoringUrl:e})}));let t=Fa.get(Na);t||(t=e.monitoringHosts?e.monitoringHosts[0]:"http://localhost:9200"),this.checkInterval=null;let s=Ca;e.product&&e.product.isPartiallyMigrated&&(s=La),this.state={activeStep:s,esMonitoringUrl:t,checkedStatusByStep:{[Ia]:!1,[La]:!1,userAcknowledgedNoClusterUuidPrompt:!1}}}finishedFlyout(){const{onClose:e}=this.props;e()}renderActiveStep(){const{product:e,productName:t,onClose:s,meta:i}=this.props,{activeStep:n,esMonitoringUrl:o,checkedStatusByStep:r}=this.state;switch(n){case Ca:return Object(O.jsx)(u.EuiForm,null,Object(O.jsx)(u.EuiFormRow,{fullWidth:!0,label:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlLabel",{defaultMessage:"URL of monitoring cluster"}),helpText:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlHelpText",{defaultMessage:"Typically a single URL. If multiple URLs, separate with a comma.\n                The running Metricbeat instance must be able to communicate with these Elasticsearch servers."})},Object(O.jsx)(u.EuiFieldText,{fullWidth:!0,value:o,onChange:e=>this.setEsMonitoringUrl(e.target.value)})));case Ia:case La:const l=Pa(t,e,n,i,{doneWithMigration:s,esMonitoringUrl:o.split(",").map((e=>`"${e}"`)),hasCheckedStatus:r[n]});return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiSteps,{steps:l}))}return null}renderActiveStepNextButton(){const{product:e,productName:t}=this.props,{activeStep:s,esMonitoringUrl:a,userAcknowledgedNoClusterUuidPrompt:i}=this.state;if(!e)return null;let n=!e.isFullyMigrated,o=s!==La;if(s===Ia&&(t===T.p?(o=!1,n=!e.isPartiallyMigrated&&!e.isFullyMigrated):(o=!e.isFullyMigrated,n=!e.isFullyMigrated)),e.isFullyMigrated&&null===e.clusterUuid&&(i||(n=!0)),o){let t=!1,i=null;return s===Ca?(t=!a||0===a.length,i=e.isPartiallyMigrated||e.isFullyMigrated?La:Ia):s===Ia&&(t=!e.isPartiallyMigrated&&!e.isFullyMigrated,i=La),Object(O.jsx)(u.EuiButton,{type:"submit",fill:!0,iconType:"sortRight",iconSide:"right",isDisabled:t,onClick:()=>this.setState({activeStep:i})},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.nextButtonLabel",{defaultMessage:"Next"}))}return Object(O.jsx)(u.EuiButton,{type:"submit",fill:!0,isDisabled:n,onClick:()=>this.finishedFlyout()},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.doneButtonLabel",{defaultMessage:"Done"}))}getDocumentationTitle(){const{productName:e}=this.props;let t=null;return e===T.z?t=g.a.shims.docLinks.links.monitoring.monitorKibana:e===T.p&&(t=g.a.shims.docLinks.links.monitoring.monitorElasticsearch),t?Object(O.jsx)(u.EuiText,{size:"s"},Object(O.jsx)(u.EuiLink,{href:t,target:"_blank"},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.learnMore",{defaultMessage:"Learn about why."}))):null}render(){const{onClose:e,instance:t,productName:s,product:i}=this.props,n=ut(s),o=t&&t.name||rt(s);let r=c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitle",{defaultMessage:"Monitor `{instanceName}` {instanceIdentifier} with Metricbeat",values:{instanceName:o,instanceIdentifier:n}});i.isNetNewUser&&(r=c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitleNewUser",{defaultMessage:"Monitor {instanceName} {instanceIdentifier} with Metricbeat",values:{instanceIdentifier:n,instanceName:o}}));let l=null;return i.isFullyMigrated&&null===i.clusterUuid&&(l=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{color:"warning",iconType:"help",title:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidTitle",{defaultMessage:"No cluster detected"})},Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.flyout.noClusterUuidDescription",defaultMessage:"This {productName} {instanceIdentifier} is not connected to an Elasticsearch cluster so once fully migrated, this {productName} {instanceIdentifier} will appear in the Standalone cluster instead of this one. {link}",values:{productName:s,instanceIdentifier:n,link:Object(O.jsx)(u.EuiLink,{href:"#/overview?_g=(cluster_uuid:__standalone_cluster__)",target:"_blank"},"Click here to view the Standalone cluster.")}})),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiCheckbox,{id:"monitoringFlyoutNoClusterUuidCheckbox",label:c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidCheckboxLabel",{defaultMessage:"Yes, I understand that I will need to look in the Standalone cluster for\n                  this {productName} {instanceIdentifier}.",values:{productName:s,instanceIdentifier:n}}),checked:this.state.userAcknowledgedNoClusterUuidPrompt,onChange:e=>this.setState({userAcknowledgedNoClusterUuidPrompt:e.target.checked})})),Object(O.jsx)(u.EuiSpacer,{size:"s"}))),Object(O.jsx)(u.EuiFlyout,{onClose:e,"aria-labelledby":"flyoutTitle"},Object(O.jsx)(u.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(u.EuiTitle,{size:"m"},Object(O.jsx)("h2",{id:"flyoutTitle"},r))),Object(O.jsx)(u.EuiFlyoutBody,null,this.renderActiveStep(),l),Object(O.jsx)(u.EuiFlyoutFooter,{style:{marginBottom:"64px"}},Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},c.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.closeButtonLabel",{defaultMessage:"Close"}))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},this.renderActiveStepNextButton()))))}}class setup_mode_WrappedSetupModeRenderer extends i.a.Component{constructor(...e){super(...e),j()(this,"globalState",void 0),j()(this,"state",{renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}UNSAFE_componentWillMount(){this.globalState=this.context;const{kibana:e,onHttpError:t}=this.props;V(this.globalState,e.services.http,t,(e=>{const t={renderState:!0},{productName:s}=this.props;if(!s)return void this.setState(t);const a=D();if(!a.enabled||!a.data)return void this.setState(t);const i=a.data[s],n=e?e[s]:null;if(i&&n){const e=function(e,t){for(const s of t)if(-1===e.indexOf(s))return s}(Object.keys(n.byUuid),Object.keys(i.byUuid));e&&(t.newProduct=i.byUuid[e])}this.setState(t)})),B()}reset(){this.setState({renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}getFlyout(e,t){const{productName:s}=this.props,{isFlyoutOpen:a,instance:i,isSettingUpNew:n,newProduct:o}=this.state;if(!e||!a)return null;let r=null;if(o?r=o:i&&Object.keys(i).length&&(r=e.byUuid[i.uuid]),!r){const t=Object.values(e.byUuid);r=t.length&&!n?t[0]:{isNetNewUser:!0}}return Object(O.jsx)(flyout_Flyout,{onClose:()=>this.reset(),productName:s,product:r,meta:t,instance:i,updateProduct:z,isSettingUpNew:n})}getBottomBar(e){return!e.enabled||e.hideBottomBar?null:Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiSpacer,{size:"xxl"}),Object(O.jsx)(u.EuiBottomBar,null,Object(O.jsx)(u.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center","data-test-subj":"monitoringSetupModeBottomBar"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTextColor,{color:"ghost"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.setupMode.description",defaultMessage:"You are in setup mode. The ({flagIcon}) icon indicates configuration options.",values:{flagIcon:Object(O.jsx)(u.EuiIcon,{type:"flag"})}}))))),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiButton,{color:"danger",fill:!0,iconType:"flag",iconSide:"right",size:"s",onClick:()=>A(!1)},c.i18n.translate("xpack.monitoring.setupMode.exit",{defaultMessage:"Exit setup mode"}))))))))}async shortcutToFinishMigration(){await(async()=>{const e=`../api/monitoring/v1/setup/collection/${L.cluster_uuid}/disable_internal_collection`;try{return await P.post(e)}catch(e){throw F(e),e}})(),await z()}render(){const{render:e,productName:t}=this.props,s=D();let a={byUuid:{}};s.data&&(t&&s.data[t]?a=s.data[t]:s.data&&(a=s.data));const i=s.data?s.data._meta:null;return e({setupMode:{data:a,meta:i,enabled:s.enabled,productName:t,updateSetupModeData:z,shortcutToFinishMigration:()=>this.shortcutToFinishMigration(),openFlyout:(e,t)=>this.setState({isFlyoutOpen:!0,instance:e,isSettingUpNew:t}),closeFlyout:()=>this.setState({isFlyoutOpen:!1})},flyoutComponent:this.getFlyout(a,i),bottomBarComponent:this.getBottomBar(s)})}}setup_mode_WrappedSetupModeRenderer.contextType=v;const Da=Object(l.withKibana)((Ra=setup_mode_WrappedSetupModeRenderer,function(e){const t=Ds();return Object(O.jsx)(Ra,ge()({},e,{onHttpError:t}))}));var Ra;const za=(e,t,s,a=!1)=>{const i={url:e,label:t,ignoreGlobalState:a};return s&&(i.testSubj=s),i};function Aa(e,t){const s=c.i18n.translate("xpack.monitoring.breadcrumbs.clustersLabel",{defaultMessage:"Clusters"});let a=[za("#/home",s,"breadcrumbClusters",!0)];return null!=t&&t.inOverview||!e||a.push(za("#/overview",e)),null!=t&&t.inElasticsearch&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(za("#/elasticsearch","Elasticsearch")),"indices"===e.name?t.push(za("#/elasticsearch/indices",c.i18n.translate("xpack.monitoring.breadcrumbs.es.indicesLabel",{defaultMessage:"Indices"}),"breadcrumbEsIndices")):"nodes"===e.name?t.push(za("#/elasticsearch/nodes",c.i18n.translate("xpack.monitoring.breadcrumbs.es.nodesLabel",{defaultMessage:"Nodes"}),"breadcrumbEsNodes")):"ml"===e.name?t.push(za("#/elasticsearch/ml_jobs",c.i18n.translate("xpack.monitoring.breadcrumbs.es.jobsLabel",{defaultMessage:"Machine learning jobs"}))):"ccr_shard"===e.name&&t.push(za("#/elasticsearch/ccr",c.i18n.translate("xpack.monitoring.breadcrumbs.es.ccrLabel",{defaultMessage:"CCR"}))),t.push(za(null,e.instance))):t.push(za(null,"Elasticsearch")),t}(t))),null!=t&&t.inKibana&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(za("#/kibana","Kibana")),t.push(za("#/kibana/instances",c.i18n.translate("xpack.monitoring.breadcrumbs.kibana.instancesLabel",{defaultMessage:"Instances"}))),t.push(za(null,e.instance))):t.push(za(null,"Kibana")),t}(t))),null!=t&&t.inLogstash&&(a=a.concat(function(e){const t=c.i18n.translate("xpack.monitoring.breadcrumbs.logstashLabel",{defaultMessage:"Logstash"}),s=[];return e.instance?(s.push(za("#/logstash",t)),"nodes"===e.name&&s.push(za("#/logstash/nodes",c.i18n.translate("xpack.monitoring.breadcrumbs.logstash.nodesLabel",{defaultMessage:"Nodes"}))),s.push(za(null,e.instance))):"pipeline"===e.page?(s.push(za("#/logstash",t)),s.push(za("#/logstash/pipelines",c.i18n.translate("xpack.monitoring.breadcrumbs.logstash.pipelinesLabel",{defaultMessage:"Pipelines"})))):s.push(za(null,t)),s}(t))),null!=t&&t.inBeats&&(a=a.concat(function(e){const t=c.i18n.translate("xpack.monitoring.breadcrumbs.beatsLabel",{defaultMessage:"Beats"}),s=[];return e.instance?(s.push(za("#/beats",t)),s.push(za("#/beats/beats",c.i18n.translate("xpack.monitoring.breadcrumbs.beats.instancesLabel",{defaultMessage:"Instances"}))),s.push(za(null,e.instance))):s.push(za(null,t)),s}(t))),null!=t&&t.inApm&&(a=a.concat(function(e){const t=c.i18n.translate("xpack.monitoring.breadcrumbs.apmLabel",{defaultMessage:"APM server"}),s=[];return e.instance?(s.push(za("#/apm",t)),s.push(za("#/apm/instances",c.i18n.translate("xpack.monitoring.breadcrumbs.apm.instancesLabel",{defaultMessage:"Instances"}))),s.push(za(null,e.instance))):s.push(za(null,t)),s}(t))),a}const Ba=m()((({history:e})=>{const t=Object(l.useKibana)().services.chrome,[s,i]=Object(a.useState)([]),n=Object(a.useCallback)((e=>{var s,a;if(!t)return;if(!e){var i;const s=null===(i=t.getBreadcrumbs$())||void 0===i?void 0:i.source;s&&s.value&&(e=s.value)}const n=location.hash.split("?")[1];null!==(s=e)&&void 0!==s&&s.length&&0===(null==n?void 0:n.indexOf("_g"))&&(null===(a=e[0].href)||void 0===a?void 0:a.split("?")[1])!==n&&(e.forEach((e=>{var t;const s=null===(t=e.href)||void 0===t?void 0:t.split("?")[0];s&&!e.ignoreGlobalState&&(e.href=`${s}?${n}`),delete e.ignoreGlobalState})),t.setBreadcrumbs(e.slice(0)))}),[t]),o=Object(a.useCallback)(((e,t)=>{const s=Aa(e,t);i(s),n(s.map((e=>({text:e.label,href:e.url?e.url:void 0,"data-test-subj":e.testSubj,ignoreGlobalState:e.ignoreGlobalState}))))}),[i,n]);return Object(a.useEffect)((()=>{e.listen(((e,t)=>{n()}))}),[e,n]),{generate:o,update:n,breadcrumbs:s}})),Va=async({alertTypeIds:e,filters:t,timeRange:s,clusterUuid:a,fetch:i})=>{const n=`../api/monitoring/v1/alert/${a}/status`;return await i(n,{method:"POST",body:JSON.stringify({alertTypeIds:e,filters:t,timeRange:s})})},Ua=({alerts:e})=>{const[t,s]=Object(a.useState)(!1),i=Rs(),n=()=>{s(!1),i.hideModalForSession()},o=[{id:"create-alerts",label:c.i18n.translate("xpack.monitoring.alerts.modal.yesOption",{defaultMessage:"Yes (Recommended - create default rules in this kibana space)"})},{id:"not-create-alerts",label:c.i18n.translate("xpack.monitoring.alerts.modal.noOption",{defaultMessage:"No"})}],[r,l]=Object(a.useState)("create-alerts");Object(a.useEffect)((()=>{i.shouldShowAlertsModal(e)&&s(!0)}),[i,e]);return t?Object(O.jsx)(u.EuiModal,{onClose:n},Object(O.jsx)(u.EuiModalHeader,null,Object(O.jsx)(u.EuiModalHeaderTitle,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.modal.title",defaultMessage:"Create rules"})))),Object(O.jsx)(u.EuiModalBody,null,Object(O.jsx)(u.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description",defaultMessage:"Stack monitoring comes with many out-of-the box rules to notify you of common issues around cluster health, resource utilization and errors or exceptions. {learnMoreLink}",values:{learnMoreLink:Object(O.jsx)(u.EuiLink,{href:g.a.shims.docLinks.links.monitoring.alertsKibana,target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description.link",defaultMessage:"Learn more..."}))}})),Object(O.jsx)("div",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.modal.createDescription",defaultMessage:"Create these out-of-the box rules?"}),Object(O.jsx)(u.EuiSpacer,{size:"xs"}),Object(O.jsx)(u.EuiRadioGroup,{options:o,idSelected:r,onChange:e=>{l(e)},name:"radio group"})))),Object(O.jsx)(u.EuiModalFooter,null,Object(O.jsx)(u.EuiButtonEmpty,{onClick:()=>{i.hideModalForSession(),n()},"data-test-subj":"alerts-modal-remind-later-button"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.modal.remindLater",defaultMessage:"Remind me later"})),Object(O.jsx)(u.EuiButton,{onClick:()=>{"create-alerts"===r?i.enableAlerts():i.notAskAgain(),n()},fill:!0,"data-test-subj":"alerts-modal-button"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.alerts.modal.confirm",defaultMessage:"Ok"})))):null},$a=[T.g],Ga=()=>{var e;const t=Object(a.useContext)(v),s=Object(a.useContext)(Ma),{services:i}=Object(l.useKibana)(),n=t.cluster_uuid,o=t.ccs,[r,u]=Object(a.useState)([]),[d,p]=Object(a.useState)({}),[m,g]=Object(a.useState)(!1),{generate:b}=Object(a.useContext)(Ba.Context);let j=[];const x=c.i18n.translate("xpack.monitoring.cluster.overviewTitle",{defaultMessage:"Overview"}),h=c.i18n.translate("xpack.monitoring.cluster.overview.pageTitle",{defaultMessage:"Cluster overview"});m&&(j=[{id:"clusterName",label:r[0].cluster_name,testSubj:"overviewTabsclusterName",route:"/overview"}]);const f=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=i.http)&&void 0!==t&&t.fetch&&n){const e=await Gs({fetch:i.http.fetch,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},ccs:o,clusterUuid:n,codePaths:$a});u(e);const t=await Va({fetch:i.http.fetch,clusterUuid:n,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});p(t),g(!0)}}),[o,n,null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter,i.http]);return Object(a.useEffect)((()=>{r&&r.length&&b(r[0].cluster_name)}),[r,b]),Object(O.jsx)(Vs,{title:x,pageTitle:h,tabs:j,getPageData:f},Object(O.jsx)(Da,{render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(ya,{cluster:r[0],alerts:d,setupMode:e,showLicenseExpiration:s.showLicenseExpiration}),a)}),Object(O.jsx)(Ua,{alerts:d}))};s(127);const qa=({isSupported:e,children:t})=>e?t:"-",Ha=e=>{const{alertsMeta:t={enabled:!0}}=e.cluster.alerts;if(t.enabled)return Object(O.jsx)("span",null,e.children);const s=c.i18n.translate("xpack.monitoring.cluster.listing.unknownHealthMessage",{defaultMessage:"Unknown"});return Object(O.jsx)(u.EuiToolTip,{content:s,position:"bottom"},Object(O.jsx)(u.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))},Wa="viewedStandaloneCluster",Ka=(e,t,s,a)=>{e.$evalAsync((()=>{t.cluster_uuid=s,t.ccs=a,t.save(),window.history.replaceState(null,null,"#/overview")}))},Ja=(e,{title:t,text:s})=>{e.$evalAsync((()=>{g.a.shims.toastNotifications.addWarning({title:t,text:s,"data-test-subj":"monitoringLicenseWarning"})}))},Ya=(e,t)=>{Ja(e,{title:Object(l.toMountPoint)(Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.warningMessageTitle",defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+t+'"'}})),text:Object(l.toMountPoint)(Object(O.jsx)(a.Fragment,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.noMultiClusterSupportMessage",defaultMessage:"The Basic license does not support multi-cluster monitoring."})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.infoMessage",defaultMessage:"Need to monitor multiple clusters? {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getLicenseInfoLink:Object(O.jsx)(u.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))))})},Qa=(e,t)=>{const s=`${g.a.shims.getBasePath()}/app/management/stack/license_management/home`;Ja(e,{title:Object(l.toMountPoint)(Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.warningMessageTitle",defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+t+'"'}})),text:Object(l.toMountPoint)(Object(O.jsx)(a.Fragment,null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.invalidInfoMessage",defaultMessage:"The license information is invalid."})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.infoMessage",defaultMessage:"Need a license? {getBasicLicenseLink} or {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getBasicLicenseLink:Object(O.jsx)(u.EuiLink,{href:s},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getBasicLicenseLinkLabel",defaultMessage:"Get a free Basic license"})),getLicenseInfoLink:Object(O.jsx)(u.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))))})};class listing_Listing extends a.Component{constructor(e){super(e),this.state={[Wa]:!1}}renderStandaloneClusterCallout(e,t){return t.get(Wa)?null:Object(O.jsx)("div",null,Object(O.jsx)(u.EuiCallOut,{color:"warning",title:c.i18n.translate("xpack.monitoring.cluster.listing.standaloneClusterCallOutTitle",{defaultMessage:"It looks like you have instances that aren't connected to an Elasticsearch cluster."}),iconType:"link"},Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{onClick:()=>e(T.W),"data-test-subj":"standaloneClusterLink"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutLink",defaultMessage:"View these instances."}))," ",Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutText",defaultMessage:"Or, click Standalone Cluster in the table below"})),Object(O.jsx)("p",null,Object(O.jsx)(u.EuiLink,{onClick:()=>{t.set(Wa,!0),this.setState({[Wa]:!0})}},Object(O.jsx)(u.EuiIcon,{type:"cross"})," ",Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutDismiss",defaultMessage:"Dismiss"})))),Object(O.jsx)(u.EuiSpacer,null))}render(){const{angular:e,clusters:t,sorting:s,pagination:a,onTableChange:i}=this.props,n=Object(d.partial)(Ka,e.scope,e.globalState),o=Object(d.partial)(Ya,e.scope),r=Object(d.partial)(Qa,e.scope),l=!!t.find((e=>e.cluster_uuid===T.W));return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPageContent,null,l?this.renderStandaloneClusterCallout(n,e.storage):null,Object(O.jsx)(dt,{className:"clusterTable",rows:t,columns:(p=e.showLicenseExpiration,m=o,g=r,[{name:c.i18n.translate("xpack.monitoring.cluster.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"cluster_name",sortable:!0,render:(e,t)=>t.isSupported?Object(O.jsx)(u.EuiLink,{href:ae("#/overview",{cluster_uuid:t.cluster_uuid}),"data-test-subj":"clusterLink"},e):t.license?Object(O.jsx)(u.EuiLink,{onClick:()=>m(t.cluster_name),"data-test-subj":"clusterLink"},e):Object(O.jsx)(u.EuiLink,{onClick:()=>g(t.cluster_name),"data-test-subj":"clusterLink"},e)},{name:c.i18n.translate("xpack.monitoring.cluster.listing.statusColumnTitle",{defaultMessage:"Alerts Status"}),field:"status","data-test-subj":"alertsStatus",sortable:!0,render:(e,t)=>Object(O.jsx)(qa,t,Object(O.jsx)(Ha,{cluster:t},Object(O.jsx)(Ue,{alerts:t.alerts.list})))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.nodesColumnTitle",{defaultMessage:"Nodes"}),field:"elasticsearch.cluster_stats.nodes.count.total","data-test-subj":"nodesCount",sortable:!0,render:(e,t)=>Object(O.jsx)(qa,t,"number"==typeof e?Je()(e).format("0,0"):0)},{name:c.i18n.translate("xpack.monitoring.cluster.listing.indicesColumnTitle",{defaultMessage:"Indices"}),field:"elasticsearch.cluster_stats.indices.count","data-test-subj":"indicesCount",sortable:!0,render:(e,t)=>Object(O.jsx)(qa,t,Je()(e).format("0,0"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.dataColumnTitle",{defaultMessage:"Data"}),field:"elasticsearch.cluster_stats.indices.store.size_in_bytes","data-test-subj":"dataSize",sortable:!0,render:(e,t)=>Object(O.jsx)(qa,t,Je()(e).format("0,0[.]0 b"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.logstashColumnTitle",{defaultMessage:"Logstash"}),field:"logstash.node_count","data-test-subj":"logstashCount",sortable:!0,render:(e,t)=>Object(O.jsx)(qa,t,Je()(e).format("0,0"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.kibanaColumnTitle",{defaultMessage:"Kibana"}),field:"kibana.count","data-test-subj":"kibanaCount",sortable:!0,render:(e,t)=>Object(O.jsx)(qa,t,Je()(e).format("0,0"))},{name:c.i18n.translate("xpack.monitoring.cluster.listing.licenseColumnTitle",{defaultMessage:"License"}),field:"license.type","data-test-subj":"clusterLicense",sortable:!0,render:(e,t)=>{const s=t.license;if(!e)return Object(O.jsx)("div",null,Object(O.jsx)("div",{className:"monTableCell__clusterCellLicense"},"N/A"));if(s){const t=()=>s.expiry_date_in_millis<Oe()().valueOf()?Object(O.jsx)("span",{className:"monTableCell__clusterCellExpired"},"Expired"):Object(O.jsx)("span",null,"Expires ",Oe()(s.expiry_date_in_millis).format("D MMM YY"));return Object(O.jsx)("div",null,Object(O.jsx)("div",{className:"monTableCell__clusterCellLicense"},Object(d.capitalize)(e)),Object(O.jsx)("div",{className:"monTableCell__clusterCellExpiration"},p?t():null))}return Object(O.jsx)(u.EuiLink,{onClick:()=>g(t.cluster_name)},Object(O.jsx)(u.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))}}]),rowProps:e=>({"data-test-subj":`clusterRow_${e.cluster_uuid}`}),sorting:{...s,sort:{...s.sort,field:"cluster_name"}},pagination:a,search:{box:{incremental:!0,placeholder:e.scope.filterText}},onTableChange:i,executeQueryOptions:{defaultFields:["cluster_name"]}}))));var p,m,g}}const Xa=[5,10,20,50],Za={pageSize:20,initialPageSize:20,pageIndex:0,initialPageIndex:0,pageSizeOptions:Xa,totalItemCount:0};function ei(e){const t=new f.Storage(window.localStorage),s=(i=e,e=>{const t=e.get(T.X)||{},s=Object(d.get)(t,[i,"sort"]);return{page:Object(d.get)(t,[i,"page"]),sort:s}});var i;const n=(e=>(t,{sort:s,page:a})=>{const i=t.get(T.X)||{};return Object(mt.set)(i,[e,"sort"],s||void 0),Object(mt.set)(i,[e,"page"],a||void 0),t.set(T.X,i),i})(e),o=s(t),[r,l]=Object(a.useState)((e=>{const t=Za;return e&&(t.initialPageSize=e.size,t.pageSize=e.size,t.initialPageIndex=e.index,t.pageIndex=e.index),{...t,pageSizeOptions:Xa}})(o.page)),c=Object(a.useCallback)((e=>{e!==r.totalItemCount&&l({...r,totalItemCount:e})}),[l,r]),[u,p]=Object(a.useState)(o.sort||{sort:{field:"name",direction:T.q}}),[m,g]=Object(a.useState)(""),b=({page:e,sort:s,queryText:a})=>{l({...r,initialPageSize:e.size,pageSize:e.size,initialPageIndex:e.index,pageIndex:e.index,pageSizeOptions:Xa}),p({sort:s}),n(t,{page:e,sort:{sort:s}}),g(a)};return{getPaginationRouteOptions:Object(a.useCallback)((()=>r&&u?{pagination:{size:r.pageSize,index:r.pageIndex},...u,queryText:m}:{}),[r,m,u]),getPaginationTableProps:()=>({sorting:u,pagination:r,onTableChange:b}),updateTotalItemCount:c}}const ti=c.i18n.translate("xpack.monitoring.cluster.listing.pageTitle",{defaultMessage:"Cluster listing"}),si=c.i18n.translate("xpack.monitoring.cluster.listing.tabTitle",{defaultMessage:"Clusters"}),ai=e=>e.reduce(((e,t)=>({...e,...t.alerts&&t.alerts.list||{}})),{}),ii=()=>{var e;const t=Object(a.useContext)(v),s=Object(a.useContext)(Ma),{services:i}=Object(l.useKibana)(),[n,o]=Object(a.useState)([]),{update:c}=Object(a.useContext)(Ba.Context),{getPaginationTableProps:u}=ei("clusters"),{sorting:d,pagination:p,onTableChange:m}=u();Object(a.useEffect)((()=>{c([{"data-test-subj":"clusterListingBreadcrumb",text:si}])}),[c]);const g=[{id:"clusters",label:si,testSubj:"clusterListingTab",route:"/home"}],b=Object(a.useCallback)((async()=>{var e,s;const a=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(s=i.http)&&void 0!==s&&s.fetch){const e=await Gs({fetch:i.http.fetch,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()},ccs:t.ccs,codePaths:["all"]});o(e)}}),[t.ccs,null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter,i.http]);return t.save&&1===n.length&&(t.cluster_uuid=n[0].cluster_uuid,t.save()),Object(O.jsx)(Vs,{tabs:g,title:ti,pageTitle:ti,getPageData:b},1===n.length&&Object(O.jsx)(r.Redirect,{to:{pathname:"/overview"}}),Object(O.jsx)(listing_Listing,{clusters:n,angular:{scope:{$evalAsync:e=>e(),filterQuery:""},globalState:t,storage:{get:e=>window.localStorage.getItem(e),set:(e,t)=>window.localStorage.setItem(e,t)},showLicenseExpiration:s.showLicenseExpiration},sorting:d,pagination:p,onTableChange:m}),Object(O.jsx)(Ua,{alerts:ai(n)}))};function ni(e,t){return t.search=e.location.search,t}function oi(e,t){return"string"==typeof e?{pathname:e,state:t}:e}const ri=({path:e,component:t,codePaths:s,fetchAllClusters:i,unsetGlobalState:n=!1})=>{const o=Object(a.useContext)(v),l=i?null:o.cluster_uuid,c=Object(r.useLocation)(),{clusters:u,loaded:p}=qs(l,void 0,s),m=U(void 0,o),g=function(e,t,s=!1){const a=(()=>{const s=Object(d.find)(e,{cluster_uuid:t.cluster_uuid});if(s)return s;const a=Object(d.first)(e);return a&&a.cluster_uuid?a:null})();return a&&a.license?(t.cluster_uuid=s?void 0:a.cluster_uuid,t.ccs=s?void 0:a.ccs,t.save&&t.save(),a):null}(u,o,n);if(p&&!g&&!m)return Object(O.jsx)(r.Redirect,{to:"/no-data"});if(p&&g){if("license"!==c.pathname&&"home"!==c.pathname&&li(g.license))return Object(O.jsx)(r.Redirect,{to:"/license"});const e=g.isSupported||1===u.length;if("/home"!==c.pathname&&!e)return Object(O.jsx)(r.Redirect,{to:"/home"})}const b=t;return p?Object(O.jsx)(r.Route,{path:e},Object(O.jsx)(b,{clusters:u})):Object(O.jsx)(Ws,{staticLoadingState:!0})},li=e=>{const{expiry_date_in_millis:t}=e;return void 0!==t&&(new Date).getTime()>=t};class enabler_Enabler{constructor(e,t){j()(this,"http",void 0),j()(this,"updateModel",void 0),this.http=e,this.updateModel=t}async enableCollectionInterval(){try{this.updateModel({isCollectionIntervalUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_interval",{method:"PUT"}),this.updateModel({isCollectionIntervalUpdated:!0,isCollectionIntervalUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionIntervalUpdated:!1,isCollectionIntervalUpdating:!1})}}async enableCollectionEnabled(){try{this.updateModel({isCollectionEnabledUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_enabled",{method:"PUT"}),this.updateModel({isCollectionEnabledUpdated:!0,isCollectionEnabledUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionEnabledUpdated:!1,isCollectionEnabledUpdating:!1})}}}const ci=[T.l],ui=[{message:c.i18n.translate("xpack.monitoring.noData.checker.clusterSettings",{defaultMessage:"Checking cluster settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/cluster"},{message:c.i18n.translate("xpack.monitoring.noData.checker.nodesSettings",{defaultMessage:"Checking nodes settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/nodes"}],di=()=>{const e=c.i18n.translate("xpack.monitoring.noData.routeTitle",{defaultMessage:"Setup Monitoring"}),{services:t}=Object(l.useKibana)(),[s,i]=Object(a.useState)(!1),[n,o]=Object(a.useState)({errors:[],checkMessage:null,isLoading:!0,isCollectionEnabledUpdating:!1,isCollectionEnabledUpdated:!1,isCollectionIntervalUpdating:!1,isCollectionIntervalUpdated:!1}),{update:u}=Object(a.useContext)(Ba.Context);u([{"data-test-subj":"breadcrumbClusters",text:"Clusters",href:"#/home",ignoreGlobalState:!0}]);const d=Object(a.useContext)(v),p=Ds();V(d,t.http,p);const m=Object(a.useCallback)((e=>{o((t=>{const s={...t};return Object.keys(e).forEach((t=>{Array.isArray(s[t])?s[t].push(e[t]):s[t]=e[t]})),s}))}),[o]),b=Object(a.useCallback)((async()=>{let e;try{const e=await async function(e){var t,s;const a="../api/monitoring/v1/clusters",i=null===(t=e.data)||void 0===t?void 0:t.query.timefilter.timefilter.getBounds(),n=i.min.toISOString(),o=i.max.toISOString();return function(e){return e.map(pi)}(await(null===(s=e.http)||void 0===s?void 0:s.fetch(a,{method:"POST",body:JSON.stringify({css:void 0,timeRange:{min:n,max:o},codePaths:ci})})))}(t);if(e&&e.length)return void i(!0)}catch(t){t&&503===t.status&&(e={property:"custom",message:t.data.message})}e?m({reason:e}):await function(e,t,s){const a=async e=>{s({checkMessage:e.message});const{found:i,reason:n,error:o,errorReason:r}=await async function(e,t){try{const s=await t.fetch(e.api,{method:"GET"}),{found:a,reason:i}=s;return{found:a,reason:i}}catch(e){return{error:!0,found:!1,errorReason:e.body}}}(e,t);if(o){if(s({errors:r}),e.next)return a(e.next)}else{if(i)return s({reason:n,isLoading:!1,checkMessage:null});if(e.next)return a(e.next)}s({reason:null,isLoading:!1,checkMessage:null})},i=(e=>e.map(((t,s)=>{const a=e[s+1];return void 0!==a&&(t.next=a),t})))(e);return a(i[0])}(ui,t.http,m)}),[t,m]),j=new enabler_Enabler(t.http,m);return Object(O.jsx)(Vs,{title:e,getPageData:b},s?Object(O.jsx)(r.Redirect,{to:"/home"}):Object(O.jsx)(ne,ge()({},n,{enabler:j,isCloudEnabled:g.a.shims.isCloud})))};function pi(e){return e.cluster_uuid===T.W&&(e.cluster_name="Standalone Cluster"),e}const mi=({cluster:e,...t})=>{const s=[{id:"overview",label:c.i18n.translate("xpack.monitoring.esNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/elasticsearch"},{id:"nodes",label:c.i18n.translate("xpack.monitoring.esNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/elasticsearch/nodes"},{id:"indices",label:c.i18n.translate("xpack.monitoring.esNavigation.indicesLinkText",{defaultMessage:"Indices"}),route:"/elasticsearch/indices"}];return e&&gi(e.license)&&s.push({id:"ml",label:c.i18n.translate("xpack.monitoring.esNavigation.jobsLinkText",{defaultMessage:"Machine learning jobs"}),route:"/elasticsearch/ml_jobs"}),null!=e&&e.isCcrEnabled&&s.push({id:"ccr",label:c.i18n.translate("xpack.monitoring.esNavigation.ccrLinkText",{defaultMessage:"CCR"}),route:"/elasticsearch/ccr"}),Object(O.jsx)(Vs,ge()({},t,{tabs:s,product:"elasticsearch"}))},gi=e=>Object(d.includes)(T.E,e.type);function bi(){const{services:e}=Object(l.useKibana)(),t=Object(r.useHistory)(),{handleTimeChange:s}=Object(a.useContext)(E.Context),[i,n]=Object(a.useState)(0),[o,c]=Object(a.useState)(!1),u=Object(a.useRef)(o),d=e=>{u.current=e,c(e)};Object(a.useEffect)((()=>{const e=()=>{u.current?d(!1):n((e=>e>0?e-1:0))};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]);return{onBrush:({xaxis:t})=>{var a;const{to:o,from:r}=t,l=null===(a=e.uiSettings)||void 0===a?void 0:a.get("dateFormat:tz"),c=ji(l),u=Oe()(r-c),p=Oe()(o-c);s(u.toISOString(),p.toISOString()),d(!0),n(i+1)},zoomInfo:{zoomOutHandler:()=>t.goBack(),showZoomOutBtn:()=>i>0}}}const ji=e=>{if("Browser"===e)return 0;return 1*Oe.a.tz(e).utcOffset()*60*1e3},xi=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{zoomInfo:i,onBrush:n}=bi(),{services:o}=Object(l.useKibana)(),{generate:r}=Object(a.useContext)(Ba.Context),u=s.cluster_uuid,p=s.ccs,m=Object(d.find)(e,{cluster_uuid:u}),[g,b]=Object(a.useState)(null),[j,x]=Object(a.useState)(!1),h=()=>{x(!j)},f=c.i18n.translate("xpack.monitoring.elasticsearch.overview.title",{defaultMessage:"Elasticsearch"}),y=c.i18n.translate("xpack.monitoring.elasticsearch.overview.pageTitle",{defaultMessage:"Elasticsearch overview"});Object(a.useEffect)((()=>{m&&r(m.cluster_name,{inElasticsearch:!0})}),[m,r]);const M=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/elasticsearch`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));b(i)}),[p,u,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(O.jsx)(mi,{title:f,pageTitle:y,getPageData:M,"data-test-subj":"elasticsearchOverviewPage",cluster:m},Object(O.jsx)("div",{"data-test-subj":"elasticsearchOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,shardActivity:a,logs:o}=e||{},r=a&&(e=>e.filter((e=>j||"DONE"!==e.stage)))(a);return Object(O.jsx)(Yt,{clusterStatus:t,metrics:s,logs:o,cluster:m,shardActivity:r,onBrush:n,showShardActivityHistory:j,toggleShardActivityHistory:h,zoomInfo:i,"data-test-subj":"elasticsearchOverviewPage"})})(g)))},hi=({instance:e,...t})=>{const s=[];return e?s.push({id:"overview",label:c.i18n.translate("xpack.monitoring.beatsNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/beats/beat/${e}`}):(s.push({id:"overview",label:c.i18n.translate("xpack.monitoring.beatsNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/beats",testSubj:"beatsOverviewPage"}),s.push({id:"instances",label:c.i18n.translate("xpack.monitoring.beatsNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/beats/beats",testSubj:"beatsListingPage"})),Object(O.jsx)(Vs,ge()({},t,{tabs:s,product:"beats"}))};function fi({latestActive:e}){const t={last1m:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1MinuteLabel",{defaultMessage:"Last 1 minute"}),last5m:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last5MinutesLabel",{defaultMessage:"Last 5 minutes"}),last20m:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last20MinutesLabel",{defaultMessage:"Last 20 minutes"}),last1h:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1HourLabel",{defaultMessage:"Last 1 hour"}),last1d:c.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1DayLabel",{defaultMessage:"Last 1 day"})},s=e.map((({range:e,count:s})=>({range:t[e],count:s})));return Object(O.jsx)(u.EuiBasicTable,{items:s,columns:[{field:"range",name:""},{field:"count",dataType:"number",name:""}]})}function Oi({latestVersions:e}){return Object(O.jsx)(u.EuiBasicTable,{items:e,columns:[{field:"version",name:""},{field:"count",dataType:"number",name:""}]})}function vi({latestTypes:e}){return Object(O.jsx)(u.EuiBasicTable,{items:e,columns:[{field:"type",name:""},{field:"count",dataType:"number",name:""}]})}function yi({stats:e,alerts:t}){const{total:s,types:a,stats:{bytesSent:i,totalEvents:n}}=e,o=[{label:c.i18n.translate("xpack.monitoring.beats.overview.totalBeatsLabel",{defaultMessage:"Total Beats"}),value:Ze(s,"int_commas"),"data-test-subj":"totalBeats"}];return o.push(...a.map((({type:e,count:t})=>({label:e,value:Ze(t,"int_commas"),"data-test-subj":"typeCount","data-test-type-count":`${e}:${t}`})))),o.push({label:c.i18n.translate("xpack.monitoring.beats.overview.totalEventsLabel",{defaultMessage:"Total Events"}),value:Ze(n,"0.[0]a"),"data-test-subj":"totalEvents"}),o.push({label:c.i18n.translate("xpack.monitoring.beats.overview.bytesSentLabel",{defaultMessage:"Bytes Sent"}),value:Ze(i,"byte"),"data-test-subj":"bytesSent"}),Object(O.jsx)(He,{metrics:o,alerts:t,"data-test-subj":"beatsSummaryStatus"})}function Mi({latestActive:e,latestTypes:t,latestVersions:s,stats:a,metrics:i,alerts:n,...o}){const r=[i.beat_event_rates,i.beat_fail_rates,i.beat_throughput_rates,i.beat_output_errors].map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Rt,ge()({series:e},o))))));return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.beats.overview.heading",defaultMessage:"Beats Overview"}))),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(yi,{stats:a,alerts:n})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,function(e,t,s){if(t&&t.length>0)return Object(O.jsx)(u.EuiFlexGroup,{wrap:!0},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.beats.overview.activeBeatsInLastDayTitle",defaultMessage:"Active Beats in last day"}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(fi,{latestActive:e})),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5BeatTypesInLastDayTitle",defaultMessage:"Top 5 Beat Types in last day"}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(vi,{latestTypes:t})),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5VersionsInLastDayTitle",defaultMessage:"Top 5 Versions in last day"}))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(Oi,{latestVersions:s})));const a=c.i18n.translate("xpack.monitoring.beats.overview.noActivityDescription",{defaultMessage:"Hi there! This area is where your latest Beats activity would show up, but you don't seem to have any activity within the last day."});return Object(O.jsx)(u.EuiCallOut,{title:a,iconType:"gear","data-test-subj":"noRecentActivityMessage"})}(e,t,s)),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGroup,{wrap:!0},r))))}const Ei=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{zoomInfo:i,onBrush:n}=bi(),{services:o}=Object(l.useKibana)(),r=s.cluster_uuid,u=s.ccs,{generate:p}=Object(a.useContext)(Ba.Context),m=Object(d.find)(e,{cluster_uuid:r}),[g,b]=Object(a.useState)(null),j=c.i18n.translate("xpack.monitoring.beats.overview.routeTitle",{defaultMessage:"Beats - Overview"}),x=c.i18n.translate("xpack.monitoring.beats.overview.pageTitle",{defaultMessage:"Beats overview"});Object(a.useEffect)((()=>{m&&p(m.cluster_name,{inBeats:!0})}),[m,p]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/beats`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));b(i)}),[u,r,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(O.jsx)(hi,{title:j,pageTitle:x,getPageData:h},Object(O.jsx)("div",null,null===(f=g)?null:Object(O.jsx)(Mi,ge()({},f,{onBrush:n,zoomInfo:i}))));var f};function _i({summary:e,metrics:t,...s}){const a=[t.beat_event_rates,t.beat_fail_rates,t.beat_throughput_rates,t.beat_output_errors,t.beat_memory,t.beat_cpu_utilization,t.beat_os_load,t.beat_handles],i=[{label:c.i18n.translate("xpack.monitoring.beats.instance.nameLabel",{defaultMessage:"Name"}),value:e.name,"data-test-subj":"name"},{label:c.i18n.translate("xpack.monitoring.beats.instance.hostLabel",{defaultMessage:"Host"}),value:e.transportAddress,"data-test-subj":"host"},{label:c.i18n.translate("xpack.monitoring.beats.instance.versionLabel",{defaultMessage:"Version"}),value:e.version,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.beats.instance.typeLabel",{defaultMessage:"Type"}),value:e.type,"data-test-subj":"type"},{label:c.i18n.translate("xpack.monitoring.beats.instance.outputLabel",{defaultMessage:"Output"}),value:e.output,"data-test-subj":"output"},{label:c.i18n.translate("xpack.monitoring.beats.instance.configReloadsLabel",{defaultMessage:"Config reloads"}),value:Ze(e.configReloads,"int_commas"),"data-test-subj":"configReloads"},{label:c.i18n.translate("xpack.monitoring.beats.instance.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(e.uptime,"time_since"),"data-test-subj":"uptime"}],n=[{label:c.i18n.translate("xpack.monitoring.beats.instance.eventsTotalLabel",{defaultMessage:"Events total"}),value:Ze(e.eventsTotal,"int_commas"),"data-test-subj":"eventsTotal"},{label:c.i18n.translate("xpack.monitoring.beats.instance.eventsEmittedLabel",{defaultMessage:"Events emitted"}),value:Ze(e.eventsEmitted,"int_commas"),"data-test-subj":"eventsEmitted"},{label:c.i18n.translate("xpack.monitoring.beats.instance.eventsDroppedLabel",{defaultMessage:"Events dropped"}),value:Ze(e.eventsDropped,"int_commas"),"data-test-subj":"eventsDropped"},{label:c.i18n.translate("xpack.monitoring.beats.instance.bytesSentLabel",{defaultMessage:"Bytes sent"}),value:Ze(e.bytesWritten,"byte"),"data-test-subj":"bytesWritten"},{label:c.i18n.translate("xpack.monitoring.beats.instance.handlesLimitSoftLabel",{defaultMessage:"Handles limit (soft)"}),value:Ze(e.handlesSoftLimit,"int_commas"),"data-test-subj":"handlesLimitSoft"},{label:c.i18n.translate("xpack.monitoring.beats.instance.handlesLimitHardLabel",{defaultMessage:"Handles limit (hard)"}),value:Ze(e.handlesHardLimit,"int_commas"),"data-test-subj":"handlesLimitHard"}];return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(He,{metrics:i,"data-test-subj":"beatSummaryStatus01"})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(He,{metrics:n,"data-test-subj":"beatSummaryStatus02"})),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e},s)),Object(O.jsx)(u.EuiSpacer,null))))))))}const ki=({clusters:e})=>{var t;const{instance:s}=Object(r.useParams)(),i=Object(a.useContext)(v),{services:n}=Object(l.useKibana)(),{generate:o}=Object(a.useContext)(Ba.Context),{zoomInfo:u,onBrush:p}=bi(),m=i.cluster_uuid,g=i.ccs,b=Object(d.find)(e,{cluster_uuid:m}),[j,x]=Object(a.useState)({}),[h,f]=Object(a.useState)(""),y=c.i18n.translate("xpack.monitoring.beats.instance.routeTitle",{defaultMessage:"Beats - {instanceName} - Overview",values:{instanceName:h}}),M=c.i18n.translate("xpack.monitoring.beats.instance.pageTitle",{defaultMessage:"Beat instance: {beatName}",values:{beatName:h}});Object(a.useEffect)((()=>{b&&o(b.cluster_name,{inBeats:!0,instance:h})}),[b,h,o]);const E=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${m}/beats/beat/${s}`,o=await(null===(t=n.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));x(o),f(o.summary.name)}),[g,m,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(O.jsx)(hi,{title:y,pageTitle:M,getPageData:E,instance:s,"data-test-subj":"beatDetailPage"},Object(O.jsx)("div",{"data-test-subj":"monitoringBeatsInstanceApp"},Object(O.jsx)(_i,{summary:j.summary,metrics:j.metrics,onBrush:p,zoomInfo:u})))},Si=({...e})=>{const t=[{id:"overview",label:c.i18n.translate("xpack.monitoring.apmNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/apm"},{id:"instances",label:c.i18n.translate("xpack.monitoring.apmNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/apm/instances"}];return Object(O.jsx)(Vs,ge()({},e,{tabs:t,product:"apm"}))};function wi({status:e,availability:t=!0}){const s=(()=>{if(!t)return be.GRAY;const s=e.toUpperCase();return be[s]||be.YELLOW})();return Object(O.jsx)(xe,{type:s,label:c.i18n.translate("xpack.monitoring.apm.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function Ti({alerts:e=null,stats:t}){const{name:s,output:i,version:n,uptime:o,timeOfLastEvent:r}=t,l=[{label:c.i18n.translate("xpack.monitoring.apm.instance.status.nameLabel",{defaultMessage:"Name"}),value:s,"data-test-subj":"name"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.outputLabel",{defaultMessage:"Output"}),value:i,"data-test-subj":"output"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.versionLabel",{defaultMessage:"Version"}),value:n,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(o,"time_since"),"data-test-subj":"uptime"},{label:c.i18n.translate("xpack.monitoring.apm.instance.status.lastEventLabel",{defaultMessage:"Last Event"}),value:c.i18n.translate("xpack.monitoring.apm.instance.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+Oe()(r),T.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(O.jsx)(He,{metrics:l,alerts:e,IconComponent:({status:e})=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.apm.instance.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(O.jsx)(wi,{status:e})}})),"data-test-subj":"apmDetailStatus"})}const Ci=(e,t)=>e.map(((e,s)=>Object(O.jsx)(u.EuiFlexItem,{style:{minWidth:"45%"},key:s},Object(O.jsx)(Rt,ge()({},t,{series:e}))))),Ii=({stats:e,metrics:t,seriesToShow:s,title:a,summary:i,...n})=>{if(!t)return null;const o=null!=i&&i.version?[null==i?void 0:i.version]:e.versions,r=(e=>{const t={};return e?(t.title=c.i18n.translate("xpack.monitoring.apm.metrics.topCharts.agentTitle",{defaultMessage:"APM & Fleet Server - Resource Usage"}),t.heading=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.apm.metrics.agentHeading",defaultMessage:"APM & Fleet Server"}),t):(t.title=c.i18n.translate("xpack.monitoring.apm.metrics.topCharts.title",{defaultMessage:"APM Server - Resource Usage"}),t.heading=Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.apm.metrics.heading",defaultMessage:"APM server"}),t)})(fa(o)),l=[t.apm_cpu,t.apm_os_load],{config:d}=i||e;return l.push(d.container?t.apm_memory_cgroup:t.apm_memory),Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,r.heading)),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Ti,{stats:e})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(u.EuiTitle,null,Object(O.jsx)("h3",null,r.title)),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiFlexGroup,{wrap:!0},Ci(l,n))),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiTitle,null,Object(O.jsx)("h3",null,a)),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiFlexGroup,{wrap:!0},Ci(s,n)))))},Li=c.i18n.translate("xpack.monitoring.apm.overview.panels.title",{defaultMessage:"APM Server - Metrics"});function Pi(e){const{metrics:t}=e,s=[t.apm_responses_valid,t.apm_responses_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_requests,t.apm_transformations],a={...e,title:Li,seriesToShow:s};return Object(O.jsx)(Ii,a)}const Fi=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{zoomInfo:i,onBrush:n}=bi(),{services:o}=Object(l.useKibana)(),r=s.cluster_uuid,u=s.ccs,{generate:p}=Object(a.useContext)(Ba.Context),m=Object(d.find)(e,{cluster_uuid:r}),[g,b]=Object(a.useState)(null),j=c.i18n.translate("xpack.monitoring.apm.overview.routeTitle",{defaultMessage:"APM server"}),x=c.i18n.translate("xpack.monitoring.apm.overview.pageTitle",{defaultMessage:"APM server overview"});Object(a.useEffect)((()=>{m&&p(m.cluster_name,{inApm:!0})}),[m,p]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/apm`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));b(i)}),[u,r,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(O.jsx)(Si,{title:j,pageTitle:x,getPageData:h,"data-test-subj":"apmOverviewPage"},g&&Object(O.jsx)(Pi,ge()({},g,{onBrush:n,zoomInfo:i})))};function Ni({alerts:e,stats:t}){const{apms:{total:s},totalEvents:i,timeOfLastEvent:n}=t,o=[{label:c.i18n.translate("xpack.monitoring.apm.instances.status.serversLabel",{defaultMessage:"Servers"}),value:s,"data-test-subj":"total"},{label:c.i18n.translate("xpack.monitoring.apm.instances.status.totalEventsLabel",{defaultMessage:"Total Events"}),value:Ze(i,"0.[0]a"),"data-test-subj":"totalEvents"},{label:c.i18n.translate("xpack.monitoring.apm.instances.status.lastEventLabel",{defaultMessage:"Last Event"}),value:c.i18n.translate("xpack.monitoring.apm.instances.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+Oe()(n),T.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(O.jsx)(He,{metrics:o,alerts:e,IconComponent:({status:e})=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.apm.instances.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(O.jsx)(wi,{status:e})}})),"data-test-subj":"apmDetailStatus"})}function Di(e,t,s){const i=s?{name:c.i18n.translate("xpack.monitoring.apm.instances.cgroupMemoryUsageTitle",{defaultMessage:"Memory Usage (cgroup)"}),field:"cgroup_memory",render:e=>Ze(e,"byte")}:{name:c.i18n.translate("xpack.monitoring.apm.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>Ze(e,"byte")};return[{name:c.i18n.translate("xpack.monitoring.apm.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(e,s)=>{let i=null;if($(I.d.MetricbeatMigration)){const e=Object(d.get)(t,"data.byUuid",{})[s.uuid]||{},a={uuid:s.uuid,name:s.name};i=Object(O.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(O.jsx)(ls,{setupMode:t,status:e,instance:a,productName:T.a}))}return Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiLink,{href:ae(`#/apm/instances/${s.uuid}`),"data-test-subj":`apmLink-${e}`},e),i)}},{name:c.i18n.translate("xpack.monitoring.apm.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:c.i18n.translate("xpack.monitoring.apm.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>Ze(e,"","/s")},{name:c.i18n.translate("xpack.monitoring.apm.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>Ze(e,"byte","/s")},{name:c.i18n.translate("xpack.monitoring.apm.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>Ze(e,"0")},{name:c.i18n.translate("xpack.monitoring.apm.instances.lastEventTitle",{defaultMessage:"Last Event"}),field:"time_of_last_event",render:e=>c.i18n.translate("xpack.monitoring.apm.instances.lastEventValue",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:ve(+Oe()(e),"since")}})},i,{name:c.i18n.translate("xpack.monitoring.apm.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}function Ri({apms:e,alerts:t,setupMode:s}){const{pagination:a,sorting:i,onTableChange:n,data:o}=e;let r=null;$(I.d.MetricbeatMigration)&&(r=Object(O.jsx)(us,{setupModeData:s.data,useNodeIdentifier:!1,productName:T.a}));const l=Object(d.uniq)(o.apms.map((e=>e.version))).map((e=>({value:e})));return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.apm.instances.heading",defaultMessage:"APM Instances"}))),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Ni,{stats:o.stats,alerts:t})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,r,Object(O.jsx)(dt,{className:"apmInstancesTable",rows:o.apms,columns:Di(0,s,o.cgroup),sorting:i,pagination:a,setupMode:s,productName:T.a,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.apm.instances.filterInstancesPlaceholder",{defaultMessage:"Filter Instances…"})},filters:[{type:"field_value_selection",field:"version",name:c.i18n.translate("xpack.monitoring.apm.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:n,executeQueryOptions:{defaultFields:["name"]}}))))}const zi=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{services:i}=Object(l.useKibana)(),{generate:n}=Object(a.useContext)(Ba.Context),{updateTotalItemCount:o,getPaginationTableProps:r}=ei("apm.instances"),u=s.cluster_uuid,p=s.ccs,m=Object(d.find)(e,{cluster_uuid:u}),[g,b]=Object(a.useState)({}),j=c.i18n.translate("xpack.monitoring.apm.instances.routeTitle",{defaultMessage:"{apm} - Instances",values:{apm:"APM server"}}),x=c.i18n.translate("xpack.monitoring.apm.instances.pageTitle",{defaultMessage:"APM server instances"});Object(a.useEffect)((()=>{m&&n(m.cluster_name,{inApm:!0})}),[m,n]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/apm/instances`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));b(n),o(n.stats.total)}),[p,u,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,o]),{pagination:f,sorting:y,onTableChange:M}=r();return Object(O.jsx)(Si,{title:j,pageTitle:x,getPageData:h,"data-test-subj":"apmInstancesPage"},Object(O.jsx)(Da,{productName:T.a,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(Ri,{setupMode:e,apms:{pagination:f,sorting:y,onTableChange:M,data:g}}),s)}))},Ai=c.i18n.translate("xpack.monitoring.apm.instance.panels.title",{defaultMessage:"APM Server - Metrics"});function Bi(e){const{metrics:t}=e,s=[t.apm_requests,t.apm_responses_valid,t.apm_responses_errors,t.apm_acm_request_count,t.apm_acm_response,t.apm_acm_response_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_transformations],a=e.summary,i={...e,title:Ai,seriesToShow:s,stats:a};return Object(O.jsx)(Ii,i)}const Vi=({clusters:e})=>{var t;const{instance:s}=Object(r.useParams)(),i=Object(a.useContext)(v),{services:n}=Object(l.useKibana)(),{generate:o}=Object(a.useContext)(Ba.Context),{zoomInfo:u,onBrush:p}=bi(),m=i.cluster_uuid,g=i.ccs,b=Object(d.find)(e,{cluster_uuid:m}),[j,x]=Object(a.useState)({}),[h,f]=Object(a.useState)(""),y=c.i18n.translate("xpack.monitoring.apm.instance.routeTitle",{defaultMessage:"{apm} - Instance",values:{apm:"APM server"}}),M=c.i18n.translate("xpack.monitoring.apm.instance.pageTitle",{defaultMessage:"APM server instance: {instanceName}",values:{instanceName:h}});Object(a.useEffect)((()=>{b&&o(b.cluster_name,{inApm:!0,instance:h})}),[b,h,o]);const E=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${m}/apm/${s}`,o=await(null===(t=n.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));x(o),f(o.apmSummary.name)}),[g,m,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(O.jsx)(Vs,{title:y,pageTitle:M,getPageData:E,"data-test-subj":"apmInstancePage"},Object(O.jsx)(Bi,{summary:j.apmSummary||{},metrics:j.metrics||{},onBrush:p,zoomInfo:u}))},Ui=({...e})=>{const t=[{id:"overview",label:c.i18n.translate("xpack.monitoring.kibanaNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/kibana",testSubj:"kibanaOverviewPage"},{id:"instances",label:c.i18n.translate("xpack.monitoring.kibanaNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/kibana/instances",testSubj:"kibanaInstancesPage"}];return Object(O.jsx)(Vs,ge()({},e,{tabs:t,product:"kibana"}))};function $i({status:e,availability:t=!0}){const s=(()=>{if(!t)return be.GRAY;const s=e.toUpperCase();return be[s]||be.YELLOW})();return Object(O.jsx)(xe,{type:s,label:c.i18n.translate("xpack.monitoring.kibana.statusIconLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function Gi({stats:e,alerts:t}){const{concurrent_connections:s,count:a,memory_limit:i,memory_size:n,requests_total:o,response_time_max:r,status:l}=e,u=[{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.instancesLabel",{defaultMessage:"Instances"}),value:a,"data-test-subj":"instances"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:Ze(n,"byte")+" / "+Ze(i,"byte"),"data-test-subj":"memory"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.requestsLabel",{defaultMessage:"Requests"}),value:o,"data-test-subj":"requests"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.connectionsLabel",{defaultMessage:"Connections"}),value:s,"data-test-subj":"connections"},{label:c.i18n.translate("xpack.monitoring.kibana.clusterStatus.maxResponseTimeLabel",{defaultMessage:"Max. Response Time"}),value:Ze(r,"0","ms"),"data-test-subj":"maxResponseTime"}];return Object(O.jsx)(He,{metrics:u,status:l,alerts:t,IconComponent:({status:e})=>Object(O.jsx)($i,{status:e}),"data-test-subj":"kibanaClusterStatus"})}const qi=({data:e})=>{const{zoomInfo:t,onBrush:s}=bi();return e?Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Gi,{stats:e.clusterStatus})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGroup,null,Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_cluster_requests,onBrush:s,zoomInfo:t})),Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_cluster_response_times,onBrush:s,zoomInfo:t})))))):null},Hi=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{services:i}=Object(l.useKibana)(),{generate:n}=Object(a.useContext)(Ba.Context),[o,r]=Object(a.useState)(),u=s.cluster_uuid,p=Object(d.find)(e,{cluster_uuid:u}),m=s.ccs,g=c.i18n.translate("xpack.monitoring.kibana.overview.title",{defaultMessage:"Kibana"}),b=c.i18n.translate("xpack.monitoring.kibana.overview.pageTitle",{defaultMessage:"Kibana overview"});Object(a.useEffect)((()=>{p&&n(p.cluster_name,{inKibana:!0})}),[p,n]);const j=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/kibana`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));r(n)}),[m,u,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http]);return Object(O.jsx)(Ui,{getPageData:j,title:g,pageTitle:b},Object(O.jsx)(qi,{data:o}))},Wi=(e,t)=>[{name:c.i18n.translate("xpack.monitoring.kibana.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if($(I.d.MetricbeatMigration)){const i=Object(d.get)(e,"data.byUuid",{}),n=Object(d.get)(s,"kibana.uuid"),o=i[n]||{},r={uuid:n,name:s.name};if(a=Object(O.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(O.jsx)(ls,{setupMode:e,status:o,instance:r,productName:T.z})),o.isNetNewUser)return Object(O.jsx)("div",null,t,a)}return Object(O.jsx)("div",null,Object(O.jsx)(u.EuiLink,{href:ae(`#/kibana/instances/${s.kibana.uuid}`),"data-test-subj":`kibanaLink-${t}`},t),a)}},{name:c.i18n.translate("xpack.monitoring.kibana.listing.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"isOnline",width:"175px",sortable:!0,render:()=>Object(O.jsx)(Ue,{showBadge:!0,alerts:t})},{name:c.i18n.translate("xpack.monitoring.kibana.listing.statusColumnTitle",{defaultMessage:"Status"}),field:"status",render:(e,t)=>Object(O.jsx)(u.EuiToolTip,{content:e,position:"bottom"},Object(O.jsx)(u.EuiHealth,{color:t.availability?"success":"subdued","data-test-subj":"statusIcon"},Object(d.capitalize)(e)))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.loadAverageColumnTitle",{defaultMessage:"Load Average"}),field:"os.load.1m",render:e=>Object(O.jsx)("span",null,Ze(e,"0.00"))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.memorySizeColumnTitle",{defaultMessage:"Memory Size"}),field:"process.memory.resident_set_size_in_bytes",render:e=>Object(O.jsx)("span",null,Xe(e,"byte"))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.requestsColumnTitle",{defaultMessage:"Requests"}),field:"requests.total",render:e=>Object(O.jsx)("span",null,Xe(e,"int_commas"))},{name:c.i18n.translate("xpack.monitoring.kibana.listing.responseTimeColumnTitle",{defaultMessage:"Response Times"}),field:"response_times.average",render:(e,t)=>{var s;return e?Object(O.jsx)("div",null,Object(O.jsx)("div",{className:"monTableCell__splitNumber"},Xe(e,"int_commas")+" ms avg"),Object(O.jsx)("div",{className:"monTableCell__splitNumber"},Xe(null==t||null===(s=t.response_times)||void 0===s?void 0:s.max,"int_commas")," ms max")):null}}],Ki=e=>{const{clusterStatus:t,alerts:s,setupMode:i,sorting:n,pagination:o,onTableChange:r}=e;let l=null;const d=e.instances||[];if($(I.d.MetricbeatMigration)){const e=d.reduce(((e,t)=>{var s,a;return{...e,[null!==(s=null===(a=t.kibana)||void 0===a?void 0:a.uuid)&&void 0!==s?s:""]:t}}),{});d.push(...Object.entries(i.data.byUuid).reduce(((t,[s,a])=>(e[s]||t.push({kibana:{...a.instance.kibana,status:be.GRAY}}),t)),[])),l=Object(O.jsx)(us,{setupModeData:i.data,useNodeIdentifier:!1,productName:T.z,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null};return i.data.totalUniqueInstanceCount>0||(e.shouldRender=!0,e.componentToRender=Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiCallOut,{title:c.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Kibana instance detected"}),color:"warning",iconType:"flag"},Object(O.jsx)("p",null,c.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following instances are not monitored.\n                        Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(O.jsx)(u.EuiSpacer,{size:"m"}))),e}})}const p=d.map((e=>{var t,s;return{...e,name:null===(t=e.kibana)||void 0===t?void 0:t.name,status:null===(s=e.kibana)||void 0===s?void 0:s.status}}));return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.kibana.instances.heading",defaultMessage:"Kibana instances"}))),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Gi,{stats:t,alerts:s})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),l,Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(dt,{className:"kibanaInstancesTable",rows:p,columns:Wi(i,s),sorting:n,pagination:o,setupMode:i,productName:T.z,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.kibana.listing.filterInstancesPlaceholder",{defaultMessage:"Filter Instances…"})}},onTableChange:r,executeQueryOptions:{defaultFields:["name"]}}))))},Ji=({clusters:e})=>{var t;const{cluster_uuid:s,ccs:i}=Object(a.useContext)(v),{services:n}=Object(l.useKibana)(),{generate:o}=Object(a.useContext)(Ba.Context),{updateTotalItemCount:r,getPaginationTableProps:u}=ei("kibana.instances"),p=Object(d.find)(e,{cluster_uuid:s}),[m,g]=Object(a.useState)({}),[b,j]=Object(a.useState)({}),x=c.i18n.translate("xpack.monitoring.kibana.instances.routeTitle",{defaultMessage:"Kibana - Instances"}),h=c.i18n.translate("xpack.monitoring.kibana.instances.pageTitle",{defaultMessage:"Kibana instances"});Object(a.useEffect)((()=>{p&&o(p.cluster_name,{inKibana:!0})}),[p,o]);const f=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),o=`../api/monitoring/v1/clusters/${s}/kibana/instances`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&s){var l;const e=await(null===(l=n.http)||void 0===l?void 0:l.fetch(o,{method:"POST",body:JSON.stringify({ccs:i,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));g(e),r(e.kibanas.length);const t=await Va({fetch:n.http.fetch,alertTypeIds:[T.L],clusterUuid:s,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});j(t)}}),[i,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,r]);return Object(O.jsx)(Ui,{title:x,pageTitle:h,getPageData:f},Object(O.jsx)("div",{"data-test-subj":"monitoringKibanaInstancesApp"},Object(O.jsx)(Da,{productName:T.z,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(Ki,ge()({alerts:b,instances:m.kibanas,setupMode:e,clusterStatus:m.clusterStatus},u())),s)})))};function Yi({stats:e}){const{transport_address:t,os_memory_free:s,version:a,uptime:i,status:n}=e,o=[{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"transportAddress"},{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.osFreeMemoryLabel",{defaultMessage:"OS Free Memory"}),value:Ze(s,"byte"),"data-test-subj":"osFreeMemory"},{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.versionLabel",{defaultMessage:"Version"}),value:a,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.kibana.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(i,"time_since"),"data-test-subj":"uptime"}];return Object(O.jsx)(He,{metrics:o,status:n,IconComponent:({status:e})=>Object(O.jsx)($i,{status:e}),"data-test-subj":"kibanaDetailStatus"})}const Qi=({data:e,alerts:t})=>{const{zoomInfo:s,onBrush:a}=bi();return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Yi,{stats:e.kibanaSummary})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:t}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_requests,onBrush:a,zoomInfo:s}),Object(O.jsx)(u.EuiSpacer,null)),Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_response_times,onBrush:a,zoomInfo:s}),Object(O.jsx)(u.EuiSpacer,null)),Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_memory,onBrush:a,zoomInfo:s}),Object(O.jsx)(u.EuiSpacer,null)),Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_average_concurrent_connections,onBrush:a,zoomInfo:s}),Object(O.jsx)(u.EuiSpacer,null)),Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_os_load,onBrush:a,zoomInfo:s}),Object(O.jsx)(u.EuiSpacer,null)),Object(O.jsx)(u.EuiFlexItem,{grow:!0},Object(O.jsx)(Rt,{series:e.metrics.kibana_process_delay,onBrush:a,zoomInfo:s}),Object(O.jsx)(u.EuiSpacer,null))))))},Xi=({clusters:e})=>{var t;const{instance:s}=Object(r.useParams)(),i=Object(a.useContext)(v),{services:n}=Object(l.useKibana)(),{generate:o}=Object(a.useContext)(Ba.Context),u=i.cluster_uuid,p=i.ccs,m=Object(d.find)(e,{cluster_uuid:u}),[g,b]=Object(a.useState)({}),[j,x]=Object(a.useState)(""),[h,f]=Object(a.useState)({}),y=`Kibana - ${j}`,M=c.i18n.translate("xpack.monitoring.kibana.instance.pageTitle",{defaultMessage:"Kibana instance: {instance}",values:{instance:j}});Object(a.useEffect)((()=>{m&&o(m.cluster_name,{inKibana:!0,instance:j})}),[m,j,o]);const E=Object(a.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${u}/kibana/${s}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&u){var o;const e=await(null===(o=n.http)||void 0===o?void 0:o.fetch(i,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));b(e),x(e.kibanaSummary.name);const t=await Va({fetch:n.http.fetch,alertTypeIds:[T.L],clusterUuid:u,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});f(t)}}),[p,u,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(O.jsx)(Vs,{title:y,pageTitle:M,getPageData:E},Object(O.jsx)("div",{"data-test-subj":"kibanaInstancePage"},Object(O.jsx)(Qi,{data:g,alerts:h})))},Zi=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{showCgroupMetricsElasticsearch:n}=Object(a.useContext)(Ma),{services:o}=Object(l.useKibana)(),[r,u]=i.a.useState(!1),{generate:p}=Object(a.useContext)(Ba.Context),{getPaginationRouteOptions:m,updateTotalItemCount:g,getPaginationTableProps:b}=ei("elasticsearch.nodes"),j=s.cluster_uuid,x=s.ccs,h=Object(d.find)(e,{cluster_uuid:j}),[f,y]=Object(a.useState)({}),[M,E]=Object(a.useState)({}),_=c.i18n.translate("xpack.monitoring.elasticsearch.nodes.routeTitle",{defaultMessage:"Elasticsearch - Nodes"}),k=c.i18n.translate("xpack.monitoring.elasticsearch.nodes.pageTitle",{defaultMessage:"Elasticsearch nodes"});Object(a.useEffect)((()=>{h&&p(h.cluster_name,{inElasticsearch:!0})}),[h,p]);const S=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${j}/elasticsearch/nodes`;if(null!==(t=o.http)&&void 0!==t&&t.fetch&&j){var i;u(!0);const e=await(null===(i=o.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:x,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...m()})}));u(!1),y(e),g(e.totalNodeCount);const t=await Va({fetch:o.http.fetch,clusterUuid:j,alertTypeIds:[T.H,T.J,T.U,T.V,T.P,T.Q],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});E(t)}}),[null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http,j,x,m,g]);return Object(O.jsx)(mi,{title:_,pageTitle:k,getPageData:S,"data-test-subj":"elasticsearchOverviewPage",cluster:h},Object(O.jsx)("div",{"data-test-subj":"elasticsearchNodesListingPage"},Object(O.jsx)(Da,{productName:T.p,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(ms,ge()({clusterStatus:f.clusterStatus,clusterUuid:s.cluster_uuid,setupMode:e,nodes:f.nodes,alerts:M,isLoading:r,showCgroupMetricsElasticsearch:n},b())),a)})))},en=(e,t)=>{const s="xpack.monitoring.data",i=()=>{const e=window.localStorage.getItem(s);let t={};try{t=e&&JSON.parse(e)||{}}catch(e){throw new Error("Monitoring UI: error parsing locally stored monitoring data")}return t},n=t=>{const a=i();a[e]=t,window.localStorage.setItem(s,JSON.stringify(a))},o=(()=>{const t=i();if(Object(d.has)(t,e))return t[e]})();o||n(t);const r=o||t,[l,c]=Object(a.useState)(r);return[l,e=>{n(e),c(e)}]},tn=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{generate:i}=Object(a.useContext)(Ba.Context),{services:n}=Object(l.useKibana)(),{getPaginationTableProps:o}=ei("elasticsearch.indices"),r=s.cluster_uuid,u=s.ccs,p=Object(d.find)(e,{cluster_uuid:r}),[m,g]=Object(a.useState)({}),[b,j]=en("showSystemIndices",!1),[x,h]=Object(a.useState)({});Object(a.useEffect)((()=>{p&&i(p.cluster_name,{inElasticsearch:!0})}),[p,i]);const f=c.i18n.translate("xpack.monitoring.elasticsearch.indices.routeTitle",{defaultMessage:"Elasticsearch - Indices"}),y=c.i18n.translate("xpack.monitoring.elasticsearch.indices.pageTitle",{defaultMessage:"Elasticsearch indices"}),M=Object(a.useCallback)((()=>j(!b)),[b,j]),E=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/elasticsearch/indices`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&r){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",query:{show_system_indices:b},body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(e);const t=await Va({fetch:n.http.fetch,clusterUuid:r,alertTypeIds:[T.M],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,r,b,u]);return Object(O.jsx)(mi,{title:f,pageTitle:y,getPageData:E,"data-test-subj":"elasticsearchOverviewPage",cluster:p},Object(O.jsx)("div",{"data-test-subj":"elasticsearchIndicesListingPage"},Object(O.jsx)(Da,{productName:T.p,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},e,Object(O.jsx)(Ts,ge()({clusterStatus:m.clusterStatus,indices:m.indices,alerts:x,showSystemIndices:b,toggleShowSystemIndices:M},o())),t)})))};function sn({stats:e,alerts:t={}}){const{dataSize:s,documents:i,totalShards:n,unassignedShards:o,status:r}=e,l=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(O.jsx)(Ue,{alerts:t,showOnlyCount:!0})},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalTitle",{defaultMessage:"Total"}),value:Ze(s.total,"0.0 b"),"data-test-subj":"dataSize"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.primariesTitle",{defaultMessage:"Primaries"}),value:Ze(s.primaries,"0.0 b"),"data-test-subj":"dataSizePrimaries"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.documentsTitle",{defaultMessage:"Documents"}),value:Ze(i,"0.[0]a"),"data-test-subj":"documentCount"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalShardsTitle",{defaultMessage:"Total shards"}),value:Ze(n,"int_commas"),"data-test-subj":"totalShards"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.unassignedShardsTitle",{defaultMessage:"Unassigned shards"}),value:Ze(o,"int_commas"),"data-test-subj":"unassignedShards"}];return Object(O.jsx)(He,{metrics:l,status:r,IconComponent:({status:e})=>Object(O.jsx)(a.Fragment,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indexDetailStatus.iconStatusLabel",defaultMessage:"Health: {elasticsearchStatusIcon}",values:{elasticsearchStatusIcon:Object(O.jsx)(We,{status:e})}})),"data-test-subj":"elasticsearchIndexDetailStatus"})}const an=({indexSummary:e,metrics:t,clusterUuid:s,indexUuid:a,logs:i,alerts:n,...o})=>{const r=[t.index_mem,t.index_size,t.index_search_request_rate,t.index_request_rate,t.index_segment_count,t.index_document_count];return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(sn,{stats:e,alerts:n})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:n}),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e},o)),Object(O.jsx)(u.EuiSpacer,null))))),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(logs_Logs,{logs:i,indexUuid:a,clusterUuid:s})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(ks,o))))},nn=e=>{const{pageType:t,id:s,...a}=e,i=[{id:"overview",label:c.i18n.translate("xpack.monitoring.esItemNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:`/elasticsearch/${t}/${s}`},{id:"advanced",testSubj:"esItemDetailAdvancedLink",label:c.i18n.translate("xpack.monitoring.esItemNavigation.advancedLinkText",{defaultMessage:"Advanced"}),route:`/elasticsearch/${t}/${s}/advanced`}];return Object(O.jsx)(Vs,ge()({},a,{tabs:i,product:"elasticsearch"}))};function on(e,t){function s(e){const s=Object(d.get)(Object(d.find)(t,(t=>{return s=t,Object(d.includes)(s.node_ids,e.relocating_node);var s})),"name");if(s){if("INITIALIZING"===e.state)return c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingFromTextMessage",{defaultMessage:"Relocating from {nodeName}",values:{nodeName:s}});if("RELOCATING"===e.state)return c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingToTextMessage",{defaultMessage:"Relocating to {nodeName}",values:{nodeName:s}})}const a=Object(d.get)(e,"state",Object(d.get)(e,"shard.state"));return Object(d.upperFirst)(a.toLowerCase())}return e.map((e=>{const a=t[e.node];return e.nodeName=a&&a.name||null,e.type="shard",e.tooltip_message=s(e),e}))}function rn(){return function(e,t){const s=Object(d.reduce)(on(e,t),(function(e,s){return e=function(e,t){const s=t.index;return e[s]||(e[s]={id:s,name:s,children:[],unassigned:[],unassignedPrimaries:!1,type:"index"}),e}(e,s),e=function(e,s){const{node:a,index:i}=s;if(!s.node||null===s.node)return e[i].unassigned.push(s),s.primary&&(e[i].unassignedPrimaries=!0),e;let n=Object(d.find)(e[i].children,{id:a});return n||(n={id:a,type:"node",name:t[a].name,node_type:t[a].type,ip_port:t[a].transport_address,children:[]},e[i].children.push(n)),n.children.push(s),e}(e,s),e}),{}),a=Object(d.values)(s);return Object(d.sortBy)(a,(e=>[!e.unassignedPrimaries,/^\./.test(e.name),e.name]))}}const ln={index:[{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.nodesLabel",{defaultMessage:"Nodes"})}],indexWithUnassigned:[{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedLabel",{defaultMessage:"Unassigned"})},{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedNodesLabel",{defaultMessage:"Nodes"})}],node:[{content:c.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.indicesLabel",{defaultMessage:"Indices"}),showToggleSystemIndicesComponent:!0}]},cn=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{generate:i}=Object(a.useContext)(Ba.Context),{services:n}=Object(l.useKibana)(),{index:o}=Object(r.useParams)(),{zoomInfo:u,onBrush:p}=bi(),m=s.cluster_uuid,g=s.ccs,[b,j]=Object(a.useState)({}),[x,h]=Object(a.useState)(ln.index),[f,y]=Object(a.useState)([]),[M,E]=Object(a.useState)({}),_=Object(d.find)(e,{cluster_uuid:m});Object(a.useEffect)((()=>{_&&i(_.cluster_name,{inElasticsearch:!0,name:"indices",instance:o})}),[_,i,o]);const k=c.i18n.translate("xpack.monitoring.elasticsearch.index.overview.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Overview",values:{indexName:o}}),S=c.i18n.translate("xpack.monitoring.elasticsearch.index.overview.pageTitle",{defaultMessage:"Index: {indexName}",values:{indexName:o}}),w=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${m}/elasticsearch/indices/${o}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&m){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));j(e);const t=rn();y(t(e.shards,e.nodes));e.shards.some((e=>"UNASSIGNED"===e.state))&&h(ln.indexWithUnassigned);const r=await Va({fetch:n.http.fetch,alertTypeIds:[T.M],filters:[{shardIndex:o}],clusterUuid:m,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});E(r)}}),[null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,m,o,g]);return Object(O.jsx)(nn,{title:k,pageTitle:S,getPageData:w,id:o,pageType:"indices"},Object(O.jsx)(Da,{productName:T.p,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(an,ge()({setupMode:e,labels:x,alerts:M,onBrush:p,indexUuid:o,clusterUuid:m,zoomInfo:u,nodesByIndices:f},b)),s)}))},un=({indexSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.index_1,t.index_2,t.index_3,t.index_4,t.index_total,t.index_time,t.index_refresh,t.index_throttling,t.index_disk,t.index_segment_count,t.index_latency];return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(sn,{stats:e,alerts:s})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:s}),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e},a)),Object(O.jsx)(u.EuiSpacer,null))))))))},dn=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{generate:i}=Object(a.useContext)(Ba.Context),{services:n}=Object(l.useKibana)(),{index:o}=Object(r.useParams)(),{zoomInfo:u,onBrush:p}=bi(),m=s.cluster_uuid,g=s.ccs,[b,j]=Object(a.useState)({}),[x,h]=Object(a.useState)({}),f=Object(d.find)(e,{cluster_uuid:m});Object(a.useEffect)((()=>{f&&i(f.cluster_name,{inElasticsearch:!0,name:"indices",instance:o})}),[f,i,o]);const y=c.i18n.translate("xpack.monitoring.elasticsearch.index.advanced.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Advanced",values:{indexName:o}}),M=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${m}/elasticsearch/indices/${o}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&m){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));j(e);const t=await Va({fetch:n.http.fetch,alertTypeIds:[T.M],filters:[{shardIndex:o}],clusterUuid:m,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,m,o,g]);return Object(O.jsx)(nn,{title:y,getPageData:M,id:o,pageType:"indices",pageTitle:o},Object(O.jsx)(Da,{productName:T.p,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(un,{setupMode:e,alerts:x,indexSummary:b.indexSummary,metrics:b.metrics,onBrush:p,zoomInfo:u}),s)}))};function pn(e){return Object(d.some)(e.children,{primary:!0})}const mn=({clusters:e})=>{var t,s,i,n;const o=Object(a.useContext)(v),{generate:u}=Object(a.useContext)(Ba.Context),{zoomInfo:p,onBrush:m}=bi(),[g,b]=en("showSystemIndices",!1),[j,x]=Object(a.useState)({}),{node:h}=Object(r.useParams)(),{services:f}=Object(l.useKibana)(),[y,M]=Object(a.useState)({}),E=o.cluster_uuid,_=Object(d.find)(e,{cluster_uuid:E});Object(a.useEffect)((()=>{var e;_&&u(_.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==y||null===(e=y.nodeSummary)||void 0===e?void 0:e.name})}),[_,u,null==y||null===(t=y.nodeSummary)||void 0===t?void 0:t.name]);const k=o.ccs,[S,w]=Object(a.useState)([]),C=c.i18n.translate("xpack.monitoring.elasticsearch.node.overview.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Overview",values:{nodeName:null==y||null===(s=y.nodeSummary)||void 0===s?void 0:s.name}}),I=c.i18n.translate("xpack.monitoring.elasticsearch.node.overview.pageTitle",{defaultMessage:"Elasticsearch node: {node}",values:{node:null==y||null===(i=y.nodeSummary)||void 0===i?void 0:i.name}}),L=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=f.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${E}/elasticsearch/nodes/${h}`;if(null!==(t=f.http)&&void 0!==t&&t.fetch&&E){var i;const e=await(null===(i=f.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({showSystemIndices:g,ccs:k,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));M(e);const t=function(e,t){let s={};Object(d.some)(e,(function(e){return"UNASSIGNED"===e.state}))&&(s.unassigned={name:"Unassigned",master:!1,type:"node",children:[]}),s=Object(d.reduce)(on(e,t),(function(e,s){const a=Object(d.get)(s,"node.name",s.node||"unassigned"),i=Object(d.get)(s,"index.name",s.index);e[a]||function(e,t,s){t.type="node",t.children=[];const a=function(e){return"true"===(e.attributes||{}).master?"master":"normal"}(t);"normal"!==a&&"data"!==a||(e[s]=t)}(e,t[a],a);let n=Object(d.find)(e[a].children,{id:i});return n||(n={id:i,name:i,type:"index",children:[]},e[a].children.push(n)),n.children.push(s),e}),s);const a=Object(d.values)(s);return Object(d.sortBy)(a,(function(e){return["Unassigned"!==e.name,!e.master,e.name]})).map((function(e){return"Unassigned"===e.name&&(e.unassignedPrimaries=e.children.some(pn)),e}))};w(t(e.shards,e.nodes));const n=await Va({fetch:f.http.fetch,alertTypeIds:[T.H,T.U,T.V,T.Q,T.J,T.P],filters:[{nodeUuid:h}],clusterUuid:E,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});x(n)}}),[null===(n=f.data)||void 0===n?void 0:n.query.timefilter.timefilter,f.http,E,h,g,k]),P=Object(a.useCallback)((()=>{b(!g)}),[g,b]);return Object(O.jsx)(nn,{title:C,pageTitle:I,getPageData:L,id:h,pageType:"nodes"},Object(O.jsx)(Da,{productName:T.p,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(Ss,ge()({alerts:j,labels:ln.node,nodeId:h,clusterUuid:E,onBrush:m,zoomInfo:p,toggleShowSystemIndices:P,showSystemIndices:g,nodesByIndices:S},y)),s)}))},gn=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{generate:i}=Object(a.useContext)(Ba.Context),{services:n}=Object(l.useKibana)(),{getPaginationTableProps:o}=ei("elasticsearch.mlJobs"),r=s.cluster_uuid,u=s.ccs,p=Object(d.find)(e,{cluster_uuid:r});Object(a.useEffect)((()=>{p&&i(p.cluster_name,{inElasticsearch:!0})}),[p,i]);const[m,g]=Object(a.useState)({}),b=c.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.routeTitle",{defaultMessage:"Elasticsearch - Machine Learning Jobs"}),j=c.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.pageTitle",{defaultMessage:"Elasticsearch machine learning jobs"}),x=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/elasticsearch/ml_jobs`,i=await(null===(t=n.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g({clusterStatus:i.clusterStatus,jobs:i.rows.map((e=>{var t;return"ml"in e&&null!==(t=e.ml)&&void 0!==t&&t.job?{...e.ml.job,node:e.node,job_id:e.ml.job.id}:e}))})}),[u,r,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(O.jsx)(mi,{title:b,pageTitle:j,getPageData:x,"data-test-subj":"elasticsearchOverviewPage",cluster:p},Object(O.jsx)("div",{"data-test-subj":"elasticsearchMLJobsListingPage"},Object(O.jsx)(Da,{productName:T.p,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},e,Object(O.jsx)(Is,ge()({clusterStatus:m.clusterStatus,jobs:m.jobs},o())),t)})))},bn=({nodeSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.node_gc,t.node_gc_time,t.node_jvm_mem,t.node_cpu_utilization,t.node_index_1,t.node_index_2,t.node_index_3,t.node_index_4,t.node_index_time,t.node_request_total,t.node_index_threads,t.node_read_threads,t.node_cgroup_cpu,t.node_cgroup_stats,t.node_latency];return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(bs,{stats:e,alerts:s})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:s}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e},a)),Object(O.jsx)(u.EuiSpacer,null))))))))},jn=({clusters:e})=>{var t,s,i,n;const o=Object(a.useContext)(v),{generate:u}=Object(a.useContext)(Ba.Context),{zoomInfo:p,onBrush:m}=bi(),[g,b]=Object(a.useState)({}),{node:j}=Object(r.useParams)(),{services:x}=Object(l.useKibana)(),h=o.cluster_uuid,f=o.ccs,[y,M]=Object(a.useState)({}),E=Object(d.find)(e,{cluster_uuid:h});Object(a.useEffect)((()=>{var e;E&&u(E.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==g||null===(e=g.nodeSummary)||void 0===e?void 0:e.name})}),[E,u,null==g||null===(t=g.nodeSummary)||void 0===t?void 0:t.name]);const _=c.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Advanced",values:{nodeName:null==g||null===(s=g.nodeSummary)||void 0===s?void 0:s.name}}),k=c.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.pageTitle",{defaultMessage:"Elasticsearch node: {nodeName}",values:{nodeName:null==g||null===(i=g.nodeSummary)||void 0===i?void 0:i.name}}),S=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=x.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${h}/elasticsearch/nodes/${j}`;if(null!==(t=x.http)&&void 0!==t&&t.fetch&&h){var i;const e=await(null===(i=x.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:f,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));b(e);const t=await Va({fetch:x.http.fetch,clusterUuid:h,alertTypeIds:[T.H,T.U,T.V,T.Q,T.J,T.P],filters:[{nodeUuid:j}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});M(t)}}),[f,h,null===(n=x.data)||void 0===n?void 0:n.query.timefilter.timefilter,x.http,j]);return Object(O.jsx)(nn,{title:_,pageTitle:k,getPageData:S,id:j,pageType:"nodes"},Object(O.jsx)(bn,{nodeSummary:g.nodeSummary,alerts:y,metrics:g.metrics,onBrush:m,zoomInfo:p}))};s(136);function xn(e){return Math.floor(e/1e3)+"s"}const hn=e=>{const[t,s]=Object(a.useState)({});return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.heading",defaultMessage:"CCR"}))),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiPageContentBody,null,(()=>{const{data:i,alerts:n}=e,o=i;let r={initialPageSize:5,pageSizeOptions:[5,10,20]};o.length<=r.initialPageSize&&(r=!1);return Object(O.jsx)(u.EuiInMemoryTable,{className:"monitoringElasticsearchCcrListingTable",columns:[{field:"index",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.indexColumnTitle",{defaultMessage:"Index"}),sortable:!0,render:(i,{shards:n})=>{const o=!!t[i];return Object(O.jsx)(u.EuiLink,{onClick:()=>((i,n)=>{const o={...t};if(o[i])delete o[i];else{let t={initialPageSize:5,pageSizeOptions:[5,10,20]};n.length<=t.initialPageSize&&(t=!1),o[i]=Object(O.jsx)(u.EuiInMemoryTable,{items:n,columns:[{field:"shardId",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.shardColumnTitle",{defaultMessage:"Shard"}),render:e=>Object(O.jsx)(u.EuiLink,{href:ae(`#/elasticsearch/ccr/${i}/shard/${e}`)},e)},{render:()=>null},{field:"alerts",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(t,s)=>Object(O.jsx)(Ue,{showBadge:!0,alerts:e.alerts,stateFilter:e=>e.meta.shardId===s.shardId})},{field:"syncLagOps",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"}),render:(e,t)=>Object(O.jsx)("span",null,e,"  ",Object(O.jsx)(u.EuiIconTip,{size:"m",type:"iInCircle",content:Object(O.jsx)(a.Fragment,null,Object(O.jsx)("span",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.leaderLagTooltip",defaultMessage:"Leader lag: {syncLagOpsLeader}",values:{syncLagOpsLeader:t.syncLagOpsLeader}})),Object(O.jsx)("br",null),Object(O.jsx)("span",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.followerLagTooltip",defaultMessage:"Follower lag: {syncLagOpsFollower}",values:{syncLagOpsFollower:t.syncLagOpsFollower}}))),position:"right"}))},{field:"syncLagTime",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(O.jsx)("span",null,xn(e))},{field:"opsSynced",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(O.jsx)(u.EuiTextColor,{color:"danger"},e)}],executeQueryOptions:{defaultFields:["shardId"]},sorting:!0,pagination:t})}s(o)})(i,n)},i," ",o?Object(O.jsx)(u.EuiIcon,{type:"arrowUp"}):Object(O.jsx)(u.EuiIcon,{type:"arrowDown"}))}},{field:"follows",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.followsColumnTitle",{defaultMessage:"Follows"})},{field:"alerts",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(e,t)=>Object(O.jsx)(Ue,{showBadge:!0,alerts:n,stateFilter:e=>e.meta.followerIndex===t.index})},{field:"syncLagOps",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"})},{field:"syncLagTime",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(O.jsx)("span",null,xn(e))},{field:"opsSynced",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",sortable:!0,name:c.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(O.jsx)(u.EuiTextColor,{color:"danger"},e)}],items:o,pagination:r,executeQueryOptions:{defaultFields:["index","follows"]},sorting:{sort:{field:"index",direction:"asc"}},itemId:"id",itemIdToExpandedRowMap:t})})()))))},fn=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{generate:i}=Object(a.useContext)(Ba.Context),{services:n}=Object(l.useKibana)(),o=s.cluster_uuid,r=Object(d.find)(e,{cluster_uuid:o}),u=s.ccs,[p,m]=Object(a.useState)({}),[g,b]=Object(a.useState)({});Object(a.useEffect)((()=>{r&&i(r.cluster_name,{inElasticsearch:!0})}),[r,i]);const j=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.title",{defaultMessage:"Elasticsearch - Ccr"}),x=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.pageTitle",{defaultMessage:"Elasticsearch Ccr"}),h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/elasticsearch/ccr`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&o){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(e);const t=await Va({fetch:n.http.fetch,alertTypeIds:[T.F],clusterUuid:o,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});b(t)}}),[u,o,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(O.jsx)(mi,{title:j,pageTitle:x,getPageData:h,"data-test-subj":"elasticsearchCcrPage",cluster:r},Object(O.jsx)(Da,{productName:T.p,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},e,Object(O.jsx)(hn,{data:p.data,alerts:g}),t)}))};function On({stat:e,formattedLeader:t,oldestStat:s,alerts:a={}}){const i=e.follower_index||Object(d.get)(e,"follower.index"),n="number"==typeof e.shard_id?e.shard_id:Object(d.get)(e,"follower.shard.number"),o=e.operations_written||Object(d.get)(e,"follower.operations_written"),r=e.failed_read_requests||Object(d.get)(e,"requests.failed.read.count"),l=s.operations_written||Object(d.get)(s,"follower.operations_written"),u=s.failed_read_requests||Object(d.get)(s,"requests.failed.read.count"),p=[{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.alerts",{defaultMessage:"Alerts"}),value:Object(O.jsx)(Ue,{alerts:a,showOnlyCount:!0})},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.followerIndexLabel",{defaultMessage:"Follower Index"}),value:i,"data-test-subj":"followerIndex"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.shardIdLabel",{defaultMessage:"Shard Id"}),value:n,"data-test-subj":"shardId"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.leaderIndexLabel",{defaultMessage:"Leader Index"}),value:t,"data-test-subj":"leaderIndex"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.opsSyncedLabel",{defaultMessage:"Ops Synced"}),value:Ze(o-l,"int_commas"),"data-test-subj":"operationsReceived"},{label:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.failedFetchesLabel",{defaultMessage:"Failed Fetches"}),value:Ze(r-u,"int_commas"),"data-test-subj":"failedFetches"}];return Object(O.jsx)(He,{metrics:p,"data-test-subj":"ccrDetailStatus"})}function vn(e){var t;const{services:s}=Object(l.useKibana)(),i=null===(t=s.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),{metrics:n,stat:o,timestamp:r,oldestStat:d,formattedLeader:p,alerts:m}=e;return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(On,{stat:o,formattedLeader:p,oldestStat:d,alerts:m})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:m}),Object(O.jsx)(u.EuiSpacer,{size:"m"}),o.read_exceptions&&o.read_exceptions.length>0?Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(u.EuiTitle,{size:"s",color:"danger"},Object(O.jsx)("h3",null,Object(O.jsx)(u.EuiTextColor,{color:"danger"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.errorsTableTitle",defaultMessage:"Errors"})))),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiBasicTable,{items:o.read_exceptions,columns:[{name:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.typeColumnTitle",{defaultMessage:"Type"}),field:"exception.type"},{name:c.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.reasonColumnTitle",{defaultMessage:"Reason"}),field:"exception.reason",width:"75%"}]})),Object(O.jsx)(u.EuiHorizontalRule,null)):null,Object(O.jsx)(u.EuiFlexGroup,{wrap:!0},(()=>{const e=[n.ccr_sync_lag_ops,n.ccr_sync_lag_time].map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Rt,{series:e})))));return Object(O.jsx)(a.Fragment,null,e)})()),Object(O.jsx)(u.EuiHorizontalRule,null),Object(O.jsx)(u.EuiAccordion,{id:"ccrLatestStat",buttonContent:Object(O.jsx)(u.EuiTitle,null,Object(O.jsx)("h2",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.latestStateAdvancedButtonLabel",defaultMessage:"Advanced"}))),paddingSize:"l"},Object(O.jsx)(a.Fragment,null,Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h2",null,Ie(r,i))),Object(O.jsx)(u.EuiHorizontalRule,null),Object(O.jsx)(u.EuiCodeBlock,{language:"json"},JSON.stringify(o,null,2))))))}const yn=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{services:i}=Object(l.useKibana)(),[n,o]=Object(a.useState)({}),{index:u,shardId:p}=Object(r.useParams)(),{generate:m}=Object(a.useContext)(Ba.Context),g=s.cluster_uuid,b=Object(d.find)(e,{cluster_uuid:g});Object(a.useEffect)((()=>{b&&m(b.cluster_name,{inElasticsearch:!0,name:"ccr",instance:`Index: ${u} Shard: ${p}`})}),[b,m,u,p]);const j=s.ccs,[x,h]=Object(a.useState)({}),f=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.title",{defaultMessage:"Elasticsearch - Ccr - Shard"}),y=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.pageTitle",{defaultMessage:"Elasticsearch Ccr Shard - Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(d.get)(n,"stat.follower.index",Object(d.get)(n,"stat.follower_index")),shardId:Object(d.get)(n,"stat.follower.shard.number",Object(d.get)(n,"stat.shard_id"))}}),M=c.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.instanceTitle",{defaultMessage:"Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(d.get)(n,"stat.follower_index"),shardId:Object(d.get)(n,"stat.shard_id")}}),E=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${g}/elasticsearch/ccr/${u}/shard/${p}`;if(null!==(t=i.http)&&void 0!==t&&t.fetch&&g){var n;const e=await(null===(n=i.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:j,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));o(e);const t=await Va({fetch:i.http.fetch,alertTypeIds:[T.F],clusterUuid:g,filters:[{shardId:p}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[j,g,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,u,p]);return Object(O.jsx)(Vs,{title:f,pageTitle:y,getPageData:E,"data-test-subj":"elasticsearchCcrShardPage"},Object(O.jsx)(Da,{productName:T.p,instance:M,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},e,Object(O.jsx)(vn,ge()({},n,{alerts:x})),t)}))};function Mn({stats:e,alerts:t}){const{node_count:s,avg_memory_used:a,avg_memory:i,events_in_total:n,events_out_total:o}=e,r=[{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:s,"data-test-subj":"node_count"},{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:Ze(a,"byte")+" / "+Ze(i,"byte"),"data-test-subj":"memory_used"},{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:Ze(n,"0.[0]a"),"data-test-subj":"events_in_total"},{label:c.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:Ze(o,"0.[0]a"),"data-test-subj":"events_out_total"}];return Object(O.jsx)(He,{metrics:r,alerts:t,"data-test-subj":"logstashClusterStatus"})}class overview_overview_Overview extends a.PureComponent{render(){const{stats:e,metrics:t,...s}=this.props,a=[t.logstash_cluster_events_input_rate,t.logstash_cluster_events_output_rate,t.logstash_cluster_events_latency];return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Mn,{stats:e})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e},s)),Object(O.jsx)(u.EuiSpacer,null))))))))}}const En=({cluster:e,instance:t,pipelineId:s,pipelineVersions:a,tabsDisabled:i,...n})=>{const o=[];if(!i)if(t||s){if(t){var r,l,u;o.push({id:"overview",label:c.i18n.translate("xpack.monitoring.logstashNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/logstash/node/${null===(r=t.nodeSummary)||void 0===r?void 0:r.uuid}`}),o.push({id:"pipeline",label:c.i18n.translate("xpack.monitoring.logstashNavigation.instance.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:`/logstash/node/${null===(l=t.nodeSummary)||void 0===l?void 0:l.uuid}/pipelines`,testSubj:"logstashNodeDetailPipelinesLink"}),o.push({id:"advanced",label:c.i18n.translate("xpack.monitoring.logstashNavigation.instance.advancedLinkText",{defaultMessage:"Advanced"}),route:`/logstash/node/${null===(u=t.nodeSummary)||void 0===u?void 0:u.uuid}/advanced`,testSubj:"logstashNodeDetailAdvancedLink"})}}else o.push({id:"overview",label:c.i18n.translate("xpack.monitoring.logstashNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/logstash"}),o.push({id:"nodes",label:c.i18n.translate("xpack.monitoring.logstashNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/logstash/nodes"}),o.push({id:"pipelines",label:c.i18n.translate("xpack.monitoring.logstashNavigation.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:"/logstash/pipelines"});return a&&a.length,Object(O.jsx)(Vs,ge()({},n,{tabs:o,product:"logstash"}))},_n=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{zoomInfo:i,onBrush:n}=bi(),{services:o}=Object(l.useKibana)(),r=s.cluster_uuid,u=s.ccs,p=Object(d.find)(e,{cluster_uuid:r}),{generate:m}=Object(a.useContext)(Ba.Context),[g,b]=Object(a.useState)(null),j=c.i18n.translate("xpack.monitoring.logstash.overview.title",{defaultMessage:"Logstash"}),x=c.i18n.translate("xpack.monitoring.logstash.overview.pageTitle",{defaultMessage:"Logstash overview"}),h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/logstash`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));b(i)}),[u,r,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);Object(a.useEffect)((()=>{p&&m(p.cluster_name,{inLogstash:!0})}),[p,g,m]);return Object(O.jsx)(En,{title:j,pageTitle:x,getPageData:h,cluster:p},Object(O.jsx)("div",{"data-test-subj":"logstashOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,logs:a}=e||{};return Object(O.jsx)(overview_overview_Overview,{stats:t,metrics:s,logs:a,onBrush:n,zoomInfo:i})})(g)))};class listing_listing_Listing extends a.PureComponent{getColumns(){const e=this.props.setupMode,t=this.props.alerts;return[{name:c.i18n.translate("xpack.monitoring.logstash.nodes.nameTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(t,s)=>{let a=null;if($(I.d.MetricbeatMigration)){const t=Object(d.get)(e,"data.byUuid",{}),i=Object(d.get)(s,"logstash.uuid"),n=t[i]||{},o={uuid:i,name:s.name};a=Object(O.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(O.jsx)(ls,{setupMode:e,status:n,instance:o,productName:T.D}))}return Object(O.jsx)("div",null,Object(O.jsx)("div",{"data-test-subj":"name"},Object(O.jsx)(u.EuiLink,{href:ae(`#/logstash/node/${s.logstash.uuid}`),"data-test-subj":`nodeLink-${s.logstash.uuid}`},t)),Object(O.jsx)("div",{"data-test-subj":"httpAddress"},s.logstash.http_address),a)}},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"isOnline",width:"175px",sortable:!0,render:()=>Object(O.jsx)(Ue,{showBadge:!0,alerts:t})},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.cpuUsageTitle",{defaultMessage:"CPU Usage"}),field:"cpu_usage",sortable:!0,render:e=>Object(O.jsx)("span",{"data-test-subj":"cpuUsage"},Qe(e,100))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.loadAverageTitle",{defaultMessage:"Load Average"}),field:"load_average",sortable:!0,render:e=>Object(O.jsx)("span",{"data-test-subj":"loadAverage"},Xe(e,"0.00"))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.jvmHeapUsedTitle",{defaultMessage:"{javaVirtualMachine} Heap Used",values:{javaVirtualMachine:"JVM"}}),field:"jvm_heap_used",sortable:!0,render:e=>Object(O.jsx)("span",{"data-test-subj":"jvmHeapUsed"},Qe(e,100))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.eventsIngestedTitle",{defaultMessage:"Events Ingested"}),field:"events_out",sortable:!0,render:e=>Object(O.jsx)("span",{"data-test-subj":"eventsOut"},Xe(e,"0.[0]a"))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.configReloadsTitle",{defaultMessage:"Config Reloads"}),sortable:!0,render:e=>Object(O.jsx)("div",null,Object(O.jsx)("div",{"data-test-subj":"configReloadsSuccess"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsSuccessCountLabel",defaultMessage:"{reloadsSuccesses} successes",values:{reloadsSuccesses:e.reloads.successes}})),Object(O.jsx)("div",{"data-test-subj":"configReloadsFailure"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsFailuresCountLabel",defaultMessage:"{reloadsFailures} failures",values:{reloadsFailures:e.reloads.failures}})))},{name:c.i18n.translate("xpack.monitoring.logstash.nodes.versionTitle",{defaultMessage:"Version"}),field:"version",sortable:!0,render:e=>Object(O.jsx)("span",{"data-test-subj":"version"},Xe(e))}]}render(){const{stats:e,alerts:t,sorting:s,pagination:a,onTableChange:i,data:n,setupMode:o}=this.props,r=this.getColumns(),l=n.map((e=>({...e,name:Object(d.get)(e,"logstash.name","N/A"),cpu_usage:Object(d.get)(e,"process.cpu.percent","N/A"),load_average:Object(d.get)(e,"os.cpu.load_average.1m","N/A"),jvm_heap_used:Object(d.get)(e,"jvm.mem.heap_used_percent","N/A"),events_out:Object(d.get)(e,"events.out","N/A"),version:Object(d.get)(e,"logstash.version","N/A")})));let p=null;return $(I.d.MetricbeatMigration)&&(p=Object(O.jsx)(us,{setupModeData:o.data,useNodeIdentifier:!0,productName:T.D})),Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(Mn,{stats:e,alerts:t})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),p,Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(dt,{className:"logstashNodesTable",rows:l,setupMode:o,productName:T.D,columns:r,sorting:{...s,sort:{...s.sort,field:"name"}},pagination:a,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.logstash.filterNodesPlaceholder",{defaultMessage:"Filter Nodes…"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))))}}const kn=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{services:i}=Object(l.useKibana)(),n=s.cluster_uuid,o=s.ccs,{generate:r}=Object(a.useContext)(Ba.Context),u=Object(d.find)(e,{cluster_uuid:n}),[p,m]=Object(a.useState)({}),[g,b]=Object(a.useState)({}),{getPaginationTableProps:j}=ei("logstash.nodes"),x=c.i18n.translate("xpack.monitoring.logstash.nodes.routeTitle",{defaultMessage:"Logstash - Nodes"}),h=c.i18n.translate("xpack.monitoring.logstash.nodes.pageTitle",{defaultMessage:"Logstash nodes"}),f=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${n}/logstash/nodes`;if(null!==(t=i.http)&&void 0!==t&&t.fetch&&n){var r;const e=await(null===(r=i.http)||void 0===r?void 0:r.fetch(a,{method:"POST",body:JSON.stringify({ccs:o,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(e);const t=await Va({fetch:i.http.fetch,alertTypeIds:[T.O],clusterUuid:n,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});b(t)}}),[o,n,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http]);return Object(a.useEffect)((()=>{u&&r(u.cluster_name,{inLogstash:!0})}),[u,r]),Object(O.jsx)(En,{title:x,pageTitle:h,getPageData:f,cluster:u},Object(O.jsx)("div",{"data-test-subj":"logstashNodesPage"},Object(O.jsx)(Da,{productName:T.D,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(listing_listing_Listing,ge()({stats:p.clusterStatus,metrics:p.metrics,data:p.nodes,setupMode:e,alerts:g},j())),s)})))};var Sn=s(145),wn=s.n(Sn);function Tn(e){return wn()(e)>=T.C.MAJOR_VER_REQD_FOR_PIPELINES}const Cn={grid:{show:!1,margin:4,hoverable:!0},colors:["#3b73ac"],series:{shadowSize:0,lines:{lineWidth:2},highlightColor:"#3b73ac",points:{radius:2}}};function In(e=[]){const t=[];return t.push(e),t.push({data:[Object(d.last)(e)],points:{show:!0,radius:2,fill:1,fillColor:!1}}),t}class sparkline_flot_chart_SparklineFlotChart{constructor(e,t,s,a,i){j()(this,"render",(()=>{this.flotChart=Tt.a.plot(this.containerElem,this.data,this.options)})),j()(this,"setupBrushHandling",(e=>{this.options.selection={mode:"x",color:"#9c9c9c"},Tt()(this.containerElem).off("plotselected"),Tt()(this.containerElem).on("plotselected",((t,s)=>{e(s),this.flotChart.clearSelection()}))})),j()(this,"setupHoverHandling",(e=>{const t=Tt()(this.containerElem),s=Object(d.debounce)(((s,a,i)=>{if(null===i)return e();e({xValue:i.datapoint[0],yValue:i.datapoint[1],xPosition:i.pageX-window.pageXOffset,yPosition:i.pageY-window.pageYOffset,plotTop:t.offset().top,plotLeft:t.offset().left,plotHeight:t.height(),plotWidth:t.width()})}),T.n,{leading:!0});t.off("plothover"),t.on("plothover",s)})),this.containerElem=e,this.data=In(t),this.options={...Cn,...i},Object(d.isFunction)(s)&&this.setupBrushHandling(s),Object(d.isFunction)(a)&&this.setupHoverHandling(a),this.render(),window.addEventListener("resize",this.render)}update(e){this.flotChart.setData(In(e)),this.flotChart.setupGrid(),this.flotChart.draw()}shutdown(){this.flotChart.shutdown();const e=Tt()(this.containerElem);e.off("plotselected"),e.off("plothover"),window.removeEventListener("resize",this.render)}}s(151);class sparkline_Sparkline extends i.a.Component{constructor(e){super(e),this.makeSparklineFlotChart=this.makeSparklineFlotChart.bind(this),this.onHover=this.onHover.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.handleSparklineRef=this.handleSparklineRef.bind(this),this.state={tooltip:void 0}}UNSAFE_componentWillReceiveProps({series:e,options:t}){Object(d.isEqual)(t,this.props.options)||(this.sparklineFlotChart.shutdown(),this.makeSparklineFlotChart(t)),Object(d.isEqual)(e,this.props.series)||this.sparklineFlotChart.update(e)}makeSparklineFlotChart(e){this.sparklineFlotChart=new sparkline_flot_chart_SparklineFlotChart(this.chartElem,this.props.series,this.props.onBrush,this.onHover,e)}onHover(e){this.setState({tooltip:e})}renderTooltip(){if(!1===this.props.tooltip.enabled)return;if(!this.state.tooltip)return;const e={tooltipContainer:{top:this.state.tooltip.yPosition-18},tooltip:{height:36,width:220},leftCaret:{width:6},rightCaret:{width:6}},t=this.state.tooltip.plotLeft+this.state.tooltip.plotWidth/2;return this.state.tooltip.xPosition>t?(e.rightCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition-226-10):(e.leftCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition+10),Object(O.jsx)("div",{className:"monSparklineTooltip__container",style:e.tooltipContainer},Object(O.jsx)("i",{className:"fa fa-caret-left monSparklineTooltip__caret",style:e.leftCaret}),Object(O.jsx)("div",{className:"monSparklineTooltip",style:e.tooltip},Object(O.jsx)("div",{className:"monSparklineTooltip__yValue"},this.props.tooltip.yValueFormatter(this.state.tooltip.yValue)),Object(O.jsx)("div",{className:"monSparklineTooltip__xValue"},this.props.tooltip.xValueFormatter(this.state.tooltip.xValue))),Object(O.jsx)("i",{className:"fa fa-caret-right monSparklineTooltip__caret",style:e.rightCaret}))}handleSparklineRef(e){this.chartElem=e,this.chartElem?this.makeSparklineFlotChart(this.props.options):this.sparklineFlotChart&&this.sparklineFlotChart.shutdown()}render(){return Object(O.jsx)("div",null,Object(O.jsx)("div",{className:"monSparkline",ref:this.handleSparklineRef}),this.renderTooltip())}}class pipeline_listing_PipelineListing extends a.Component{tooltipXValueFormatter(e,t){return Oe()(e).format(t)}tooltipYValueFormatter(e,t,s){return Ze(e,t,s)}getColumns(){const{onBrush:e,dateFormat:t}=this.props;return[{name:c.i18n.translate("xpack.monitoring.logstash.pipelines.idTitle",{defaultMessage:"ID"}),field:"id",sortable:!0,render:e=>Object(O.jsx)(u.EuiLink,{"data-test-subj":"id",href:ae(`#/logstash/pipelines/${e}`)},e)},{name:c.i18n.translate("xpack.monitoring.logstash.pipelines.eventsEmittedRateTitle",{defaultMessage:"Events Emitted Rate"}),field:"latestThroughput",sortable:!0,render:(s,a)=>{const i=a.metrics.throughput;return Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(d.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(O.jsx)(u.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"eventsEmittedRate"},Ze(s,"0.[0]a",i.metric.units)))}},{name:c.i18n.translate("xpack.monitoring.logstash.pipelines.numberOfNodesTitle",{defaultMessage:"Number of Nodes"}),field:"latestNodesCount",sortable:!0,render:(s,a)=>{const i=a.metrics.nodesCount;return Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(d.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(O.jsx)(u.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"nodeCount"},Ze(s,"0a")))}}]}renderStats(){if(this.props.statusComponent){const e=this.props.statusComponent;return Object(O.jsx)(e,{stats:this.props.stats})}return Object(O.jsx)(Mn,{stats:this.props.stats})}render(){const{data:e,sorting:t,pagination:s,onTableChange:a,upgradeMessage:i,className:n,...o}=this.props,r=t||{field:"id",direction:"asc"};"name"===r.field&&(r.field="id");const l=this.getColumns();return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,this.renderStats()),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(pt,ge()({className:n||"logstashNodesTable",rows:e,columns:l,sorting:r,message:i,pagination:s,search:{box:{placeholder:c.i18n.translate("xpack.monitoring.logstash.filterPipelinesPlaceholder",{defaultMessage:"Filter Pipelines…"})}},onTableChange:a},o)))))}}const Ln=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{onBrush:i}=bi(),{services:n}=Object(l.useKibana)(),o=Object(l.useUiSetting)("dateFormat"),r=s.cluster_uuid,u=s.ccs,p=Object(d.find)(e,{cluster_uuid:r}),[m,g]=Object(a.useState)(null),{getPaginationTableProps:b,getPaginationRouteOptions:j,updateTotalItemCount:x}=ei("logstash.pipelines"),h=c.i18n.translate("xpack.monitoring.logstash.pipelines.routeTitle",{defaultMessage:"Logstash Pipelines"}),f=c.i18n.translate("xpack.monitoring.logstash.pipelines.pageTitle",{defaultMessage:"Logstash pipelines"}),{generate:y}=Object(a.useContext)(Ba.Context),M=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/logstash/pipelines`,i=await(null===(t=n.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...j()})}));g(i),x(i.totalPipelineCount)}),[u,r,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,j,x]);Object(a.useEffect)((()=>{p&&y(p.cluster_name,{inLogstash:!0})}),[p,m,y]);return Object(O.jsx)(En,{title:h,pageTitle:f,getPageData:M,cluster:p},Object(O.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},(e=>{if(null===e)return null;const{clusterStatus:t,pipelines:s}=e||{},a=e?function(e){if(!Array.isArray(e)||0===e.length||e.some(Tn))return null;return"Pipeline monitoring is only available in Logstash version 6.0.0 or higher."}(t.versions):null;return Object(O.jsx)(pipeline_listing_PipelineListing,ge()({className:"monitoringLogstashPipelinesTable",onBrush:e=>i({xaxis:e}),stats:t,data:s},b(),{upgradeMessage:a,dateFormat:o}))})(m)))};function Pn(e,t=0,s=null){const a=[];return e.forEach((e=>{a.push(...e.toList(t,s))})),a}class list_List{constructor(e,t,s,a){this.inputs=e,this.filters=t,this.outputs=s,this.queue=a}static fromPipeline(e){const{inputStatements:t,filterStatements:s,outputStatements:a,queue:i}=e;return new list_List(Pn(t),Pn(s),Pn(a),i)}}s(160);function Fn(e,t){switch(e.typeString){case"plugin":return function(e,t){const s=e=>Ze(e,"0.[00]a","ms/e"),a=Array.isArray(e.stats.millis_per_event.data)&&e.stats.millis_per_event.data.length>0?Object(d.last)(e.stats.millis_per_event.data)[1]:null,i="input"===e.pluginType?null:Object(O.jsx)(u.EuiTableRow,{key:"events_latency"},Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsLatencyLabel",defaultMessage:"Events Latency"})),Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(O.jsx)(sparkline_Sparkline,{series:e.stats.millis_per_event.data,options:{xaxis:e.stats.millis_per_event.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:s}}))),Object(O.jsx)(u.EuiTableRowCell,null,s(a))),n=e=>Ze(e,"0.[0]a","e/s"),o=Object(O.jsx)(u.EuiTableRow,{key:"events_out_rate"},Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedRateLabel",defaultMessage:"Events Emitted Rate"})),Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(O.jsx)(sparkline_Sparkline,{series:e.eventsPerSecond.data,options:{xaxis:e.eventsPerSecond.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:n}}))),Object(O.jsx)(u.EuiTableRowCell,null,n(e.latestEventsPerSecond))),r=e=>Ze(e,"0a","events"),l=Array.isArray(e.stats.events_in.data)&&e.stats.events_in.data.length>0?Object(d.last)(e.stats.events_in.data)[1]:null,c="input"===e.pluginType?null:Object(O.jsx)(u.EuiTableRow,{key:"events_in"},Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(O.jsx)(sparkline_Sparkline,{series:e.stats.events_in.data,options:{xaxis:e.stats.events_in.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:r}}))),Object(O.jsx)(u.EuiTableRowCell,null,r(l))),p=r,m=Array.isArray(e.stats.events_out.data)&&e.stats.events_out.data.length>0?Object(d.last)(e.stats.events_out.data)[1]:null,g=Object(O.jsx)(u.EuiTableRow,{key:"events_out"},Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(O.jsx)(u.EuiTableRowCell,null,Object(O.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(O.jsx)(sparkline_Sparkline,{series:e.stats.events_out.data,options:{xaxis:e.stats.events_out.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:p}}))),Object(O.jsx)(u.EuiTableRowCell,null,p(m)));return Object(O.jsx)(u.EuiTable,null,Object(O.jsx)(u.EuiTableBody,null,i,o,c,g))}(e,t);case"if":return Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForIfDescription",defaultMessage:"There are currently no metrics to show for this if condition."}));case"queue":return Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForQueueDescription",defaultMessage:"There are currently no metrics to show for the queue."}))}}function Nn(e){switch(e.typeString){case"plugin":return function(e){return e.hasExplicitId?Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.vertexIdDescription",defaultMessage:"This {vertexType}'s ID is {vertexId}.",values:{vertexType:e.typeString,vertexId:Object(O.jsx)(u.EuiBadge,null,e.id)}})):Object(O.jsx)("div",null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.specifyVertexIdDescription",defaultMessage:"This {vertexType} does not have an ID explicitly specified. Specifying an ID allows you to track differences across pipeline changes. You can explicitly specify an ID for this plugin like so:",values:{vertexType:e.typeString}})),Object(O.jsx)(u.EuiCodeBlock,null,e.name," ",'{\n  id => "mySpecialId"\n}'),Object(O.jsx)(u.EuiSpacer,null))}(e);case"if":return function(e){const t=`if (${e.subtitle}) {\n  ...\n}`;return Object(O.jsx)("div",null,Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.conditionalStatementDescription",defaultMessage:"This is a conditional statement in your pipeline."})),Object(O.jsx)(u.EuiCodeBlock,null,t),Object(O.jsx)(u.EuiSpacer,null))}(e);case"queue":return Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.structureDescription",defaultMessage:"This is an internal structure used by Logstash to buffer events between inputs and the rest of the pipeline."}))}}function Dn({vertex:e,onHide:t,timeseriesTooltipXValueFormatter:s}){return Object(O.jsx)(u.EuiFlyout,{size:"s",onClose:t},Object(O.jsx)(u.EuiFlyoutHeader,null,Object(O.jsx)(u.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},function(e){return Object(O.jsx)(u.EuiIcon,{type:e.iconType,className:"lspvDetailDrawerIcon"})}(e)),Object(O.jsx)(u.EuiFlexItem,null,Object(O.jsx)(u.EuiTitle,null,Object(O.jsx)("h2",null,function(e){switch(e.typeString){case"plugin":return`${e.title} ${e.pluginType}`;case"if":case"queue":return e.title}}(e)))))),Object(O.jsx)(u.EuiFlyoutBody,null,Object(O.jsx)(u.EuiText,null,Nn(e),Fn(e,s))))}function Rn({iconType:e,title:t}){return Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"baseline"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiIcon,{type:e})),Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiTitle,{size:"s"},Object(O.jsx)("h4",null,t))))}s(169);function zn(){return Object(O.jsx)("div",null,Object(O.jsx)(Rn,{iconType:"logstashQueue",title:"Queue"}),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(u.EuiText,{className:"monPipelineViewer__queueMessage"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.queue.noMetricsDescription",defaultMessage:"Queue metrics not available"})))}class Statement{constructor(e){const{id:t,hasExplicitId:s,stats:a,meta:i}=e;this.id=t,this.hasExplicitId=s,this.stats=a,this.meta=i,this.vertex=e}}class Element{constructor(e,t,s,a){this.id=e,this.statement=t,this.depth=s,this.parentId=a}}class plugin_element_PluginElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}class plugin_statement_PluginStatement extends Statement{constructor(e){super(e);const{pluginType:t,name:s}=e;this.pluginType=t,this.name=s}toList(e,t){return[new plugin_element_PluginElement(this,e,t)]}static fromPipelineGraphVertex(e){return new plugin_statement_PluginStatement(e)}}s(178);function An(e){return e?"arrowRight":"arrowDown"}function Bn(e){const{collapse:t,expand:s,id:a,isCollapsed:i}=e;return Object(O.jsx)(u.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center",className:"monPipelineViewer__collapsibleStatement"},Object(O.jsx)(u.EuiFlexItem,{key:a,grow:!1},Object(O.jsx)(u.EuiButtonIcon,{"aria-label":"collapse",color:"text",iconType:An(i),onClick:()=>{i?s(a):t(a)},size:"s"})),e.children)}class if_element_IfElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}var Vn=s(34),Un=s.n(Vn);s(187);function $n({className:e,warning:t,value:s}){const a=Un()("monPipelineViewer__metric",e);let i;return i=t?Object(O.jsx)(u.EuiBadge,{color:"warning",className:e},s):Object(O.jsx)(u.EuiText,{size:"s",color:"subdued",className:a},Object(O.jsx)("span",null,s)),Object(O.jsx)(u.EuiFlexItem,{className:"monPipelineViewer__metricFlexItem",grow:!1},i)}s(196);function Gn(e,t){return"input"===e?function({latestEventsPerSecond:e}){return[Object(O.jsx)($n,{key:"eventsEmitted",className:"monPipelineViewer__metric--eventsEmitted",value:Ze(e,"0.[00]a","e/s emitted")})]}(t):function(e){const{latestMillisPerEvent:t,latestEventsPerSecond:s,percentOfTotalProcessorTime:a}=e;return[Object(O.jsx)($n,{key:"cpuMetric",className:"monPipelineViewer__metric--cpuTime",warning:e.isTimeConsuming(),value:Ze(Math.round(a||0),"0","%",{prependSpace:!1})}),Object(O.jsx)($n,{key:"eventMillis",className:"monPipelineViewer__metric--eventMillis",warning:e.isSlow(),value:Ze(t,"0.[00]a","ms/e")}),Object(O.jsx)($n,{key:"eventsReceived",className:"monPipelineViewer__metric--events",value:Ze(s,"0.[00]a","e/s received")})]}(t)}function qn({statement:{hasExplicitId:e,id:t,name:s,pluginType:a,vertex:i},onShowVertexDetails:n}){const o=Gn(a,i),r=()=>{n(i)};return Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",className:"monPipelineViewer__pluginStatement",gutterSize:"none",justifyContent:"spaceBetween"},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiButtonEmpty,{"aria-label":s,className:"monPipelineViewer__plugin",color:"primary",flush:"left",iconType:"dot",onClick:r,size:"xs"},Object(O.jsx)("span",null,s))),e&&Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiBadge,{onClick:r,onClickAriaLabel:c.i18n.translate("xpack.monitoring.logstash.pipelineStatement.viewDetailsAriaLabel",{defaultMessage:"View details"})},t)))),o&&Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiFlexGroup,{gutterSize:"s"},o)))}s(205);function Hn(e,t){return Object(O.jsx)(u.EuiFlexItem,{grow:!1,key:"statementName"},Object(O.jsx)(u.EuiButtonEmpty,{"aria-label":e,color:"text",size:"xs",onClick:t,flush:"left"},Object(O.jsx)("span",{className:"monPipelineViewer__conditional"},e)))}function Wn(e,t,s,a){const i=()=>{a(s)};return e?function({condition:e},t){return[Hn("if",t),Object(O.jsx)(u.EuiFlexItem,{key:"ifContent",grow:!1},Object(O.jsx)(u.EuiCodeBlock,{fontSize:"s",paddingSize:"none",transparentBackground:!0},e))]}(t,i):Hn("else",i)}function Kn(e){const{depth:t}=e.element;return Object(O.jsx)("li",{className:"monPipelineViewer__listItem"},Object(O.jsx)("div",{className:"monPipelineViewer__spaceContainer"},function(e){const t=[];for(let s=0;s<e;s+=1)t.push(Object(O.jsx)("div",{key:`spacer_${s}`,className:"monPipelineViewer__spacer"}));return t}(t)),function({collapse:e,element:t,element:{id:s,statement:a,statement:{vertex:i}},expand:n,isCollapsed:o,onShowVertexDetails:r}){if(a instanceof plugin_statement_PluginStatement)return Object(O.jsx)(qn,{statement:a,onShowVertexDetails:r});const l=Wn(t instanceof if_element_IfElement,a,i,r);return Object(O.jsx)(Bn,{expand:n,collapse:e,isCollapsed:o,id:s},l)}(e))}class statement_list_StatementList extends i.a.PureComponent{constructor(e){super(e),j()(this,"expand",(e=>{const t=new Set(this.state.collapsedIds);t.delete(e),this.updateCollapsedElement(t)})),j()(this,"collapse",(e=>{const t=new Set(this.state.collapsedIds);t.add(e),this.updateCollapsedElement(t)})),j()(this,"updateCollapsedElement",(e=>{const{elements:t}=this.props,s=function(e,t){const s=new Set;return e.forEach((({id:e,parentId:a})=>{(t.has(a)||s.has(a))&&s.add(e)})),s}(t,e);this.setState({collapsedIds:e,collapsedChildIds:s})})),j()(this,"elementIsCollapsed",(e=>this.state.collapsedIds.has(e))),j()(this,"renderStatement",(e=>{const{id:t,parentId:s}=e,{onShowVertexDetails:a}=this.props;return this.state.collapsedIds.has(s)||this.state.collapsedChildIds.has(s)?null:Object(O.jsx)(Kn,{key:t,element:e,collapse:this.collapse,expand:this.expand,isCollapsed:this.elementIsCollapsed(t),onShowVertexDetails:a})})),this.state={collapsedIds:new Set,collapsedChildIds:new Set}}render(){const{elements:e}=this.props;return Object(O.jsx)("ul",{className:"monPipelineViewer__list"},e.map(this.renderStatement))}}function Jn({iconType:e,headingText:t,elements:s,onShowVertexDetails:a}){return s.length?Object(O.jsx)("div",null,Object(O.jsx)(Rn,{iconType:e,title:t}),Object(O.jsx)(u.EuiSpacer,{size:"s"}),Object(O.jsx)(statement_list_StatementList,{elements:s,onShowVertexDetails:a})):null}class pipeline_viewer_PipelineViewer extends i.a.Component{constructor(){super(),j()(this,"renderDetailDrawer",(()=>this.props.detailVertex?Object(O.jsx)(Dn,{vertex:this.props.detailVertex,onHide:()=>this.props.setDetailVertexId(void 0),timeseriesTooltipXValueFormatter:this.props.timeseriesTooltipXValueFormatter}):null)),this.state={detailDrawer:{vertex:null}}}render(){const{inputs:e,filters:t,outputs:s,queue:a}=this.props.pipeline;return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPageContent,{verticalPosition:"center",horizontalPosition:"center",className:"monPipelineViewer"},Object(O.jsx)(Jn,{iconType:"logstashInput",headingText:c.i18n.translate("xpack.monitoring.logstash.pipelineViewer.inputsTitle",{defaultMessage:"Inputs"}),elements:e,onShowVertexDetails:this.props.setDetailVertexId}),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(zn,{queue:a}),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(Jn,{iconType:"logstashFilter",headingText:c.i18n.translate("xpack.monitoring.logstash.pipelineViewer.filtersTitle",{defaultMessage:"Filters"}),elements:t,onShowVertexDetails:this.props.setDetailVertexId}),Object(O.jsx)(u.EuiSpacer,null),Object(O.jsx)(Jn,{iconType:"logstashOutput",headingText:c.i18n.translate("xpack.monitoring.logstash.pipelineViewer.outputsTitle",{defaultMessage:"Outputs"}),elements:s,onShowVertexDetails:this.props.setDetailVertexId}),this.renderDetailDrawer())))}}function Yn(e,t){return e&&e.pipelineStage===t}class else_element_ElseElement extends Element{constructor(e,t,s){const{id:a}=e;super(`${a}_else`,e,t,s)}}function Qn(e,t,s,a){e.forEach((e=>{let i=e;for(;Yn(i,a)&&i!==s;)t.push(Zn(i,a)),i=i.next}))}function Xn(e,t,s,a){t.forEach((t=>{e.push(...t.toList(s,a))}))}class if_statement_IfStatement extends Statement{constructor(e,t,s){super(e);const{name:a}=e;this.condition=a,this.trueStatements=t,this.elseStatements=s}toList(e,t){const s=[],a=new if_element_IfElement(this,e,t);s.push(a);const i=e+1;if(Xn(s,this.trueStatements,i,a.id),this.elseStatements.length){const a=new else_element_ElseElement(this,e,t);s.push(a),Xn(s,this.elseStatements,i,a.id)}return s}static fromPipelineGraphVertex(e,t){const s=[],a=[],{trueOutgoingVertices:i,falseOutgoingVertices:n}=e,o=e.next;return Qn(i,s,o,t),Qn(n,a,o,t),new if_statement_IfStatement(e,s,a)}}class pipeline_queue_Queue extends Statement{static fromPipelineGraphVertex(e){return new pipeline_queue_Queue(e)}}function Zn(e,t){switch(e.typeString){case"plugin":return plugin_statement_PluginStatement.fromPipelineGraphVertex(e,t);case"if":return if_statement_IfStatement.fromPipelineGraphVertex(e,t);case"queue":return pipeline_queue_Queue.fromPipelineGraphVertex(e,t);default:throw new Error(`Unknown vertex class: ${e.typeString}`)}}class Vertex{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get name(){return this.json.config_name}get id(){return this.json.id}get subtitle(){return this.id}get incomingEdges(){return this.graph.edgesByTo[this.json.id]||[]}get incomingVertices(){return this.incomingEdges.map((e=>e.from))}get outgoingEdges(){return this.graph.edgesByFrom[this.json.id]||[]}get outgoingVertices(){return this.outgoingEdges.map((e=>e.to))}get meta(){return this.json.meta}get stats(){return this.json.stats||{}}descendants(){const e=[],t=[],s=[this],a={};for(;s.length>0;){s.pop().outgoingEdges.forEach((i=>{t.push(i);const n=i.to;!0!==a[n.id]&&(e.push(n),a[n.id]=!0,s.push(n))}))}return{vertices:e,edges:t}}get hasExplicitId(){return Boolean(this.json.explicit_id)}}class queue_vertex_QueueVertex extends Vertex{get typeString(){return"queue"}get title(){return"queue"}get iconType(){return"logstashQueue"}get next(){return this.outgoingVertices}}function eo(e){const t=e.getVertices().filter((e=>"filter"===e.pipelineStage)),s=e.hasQueueVertex?t.find((e=>e.incomingVertices.every((e=>e instanceof queue_vertex_QueueVertex)))):t.find((e=>0===e.incomingVertices.length));if(!s)return[];const a=[];let i=s;for(;Yn(i,"filter");)a.push(Zn(i,"filter")),i=i.next;return a}class Pipeline{constructor(e,t,s,a){this.inputStatements=e,this.filterStatements=t,this.outputStatements=s,this.queue=a}static fromPipelineGraph(e){const t=function(e){return e.getVertices().filter((e=>"input"===e.pipelineStage)).map(Zn)}(e),s=eo(e),a=function(e){return e.getVertices().filter((e=>"output"===e.pipelineStage&&!e.incomingVertices.some((e=>"output"===e.pipelineStage)))).map((e=>Zn(e,"output")))}(e),i=function(e){return e.hasQueueVertex?Zn(e.queueVertex):null}(e);return new Pipeline(t,s,a,i)}}class plugin_vertex_PluginVertex extends Vertex{get typeString(){return"plugin"}get name(){return this.json.config_name}get title(){return this.name}get pluginType(){return this.json.plugin_type}get isInput(){return"input"===this.pluginType}get isFilter(){return"filter"===this.pluginType}get isOutput(){return"output"===this.pluginType}get isProcessor(){return this.isFilter||this.isOutput}get latestMillisPerEvent(){return Object(d.get)(this.stats,"millis_per_event")}get percentOfTotalProcessorTime(){return Object(d.get)(this.stats,"percent_of_total_processor_duration")}get eventsPerMillisecond(){return this.isInput?this.stats.events_out_per_millisecond:this.stats.events_in_per_millisecond}get eventsPerSecond(){if(!this.eventsPerMillisecond.hasOwnProperty("data"))return 1e3*this.eventsPerMillisecond;const e={...this.eventsPerMillisecond};return e.data=this.eventsPerMillisecond.data.map((([e,t])=>[e,1e3*t])),e}get latestEventsPerSecond(){if(!this.eventsPerSecond.hasOwnProperty("data"))return this.eventsPerSecond;const e=this.eventsPerSecond.data.length;return this.eventsPerSecond.data[e-1][1]}isTimeConsuming(){const e=2*(1/this.graph.processorVertices.length);return this.percentOfTotalProcessorTime>e}isSlow(){const e=this.graph.processorVertices.length;if(0===e)return 0;const t=this.graph.processorVertices.reduce(((e,t)=>e+t.latestMillisPerEvent||0),0)/e,s=this.graph.processorVertices.reduce(((e,s)=>{const a=(s.latestMillisPerEvent||0)-t;return e+a*a}),0)/e,a=Math.sqrt(s);return(this.latestMillisPerEvent-t)/a>2}get iconType(){switch(this.pluginType){case"input":return"logstashInput";case"filter":return"logstashFilter";case"output":return"logstashOutput";default:throw new Error(`Unknown plugin type ${this.pluginType}! This shouldn't happen!`)}}get next(){return(this.outgoingEdges[0]||{}).to}}class if_vertex_IfVertex extends Vertex{get typeString(){return"if"}get name(){return this.json.condition}get iconType(){return"logstashIf"}get title(){return"if"}get subtitle(){return this.name}get trueEdge(){return this.outgoingEdges.find((e=>!0===e.when))}get trueEdges(){return this.outgoingEdges.filter((e=>!0===e.when))}get falseEdge(){return this.outgoingEdges.find((e=>!1===e.when))}get falseEdges(){return this.outgoingEdges.filter((e=>!1===e.when))}get trueOutgoingVertex(){return this.trueEdge?this.trueEdge.to:null}get trueOutgoingVertices(){return this.trueEdges.map((e=>e.to))}get falseOutgoingVertex(){return this.falseEdge?this.falseEdge.to:null}get falseOutgoingVertices(){return this.falseEdges.map((e=>e.to))}get next(){const e=this.trueOutgoingVertex?this.trueOutgoingVertex.descendants().vertices:[],t=this.falseOutgoingVertex?this.falseOutgoingVertex.descendants().vertices:[];return e.unshift(this.trueOutgoingVertex),t.unshift(this.falseOutgoingVertex),Object(d.intersection)(e,t)[0]}}function to(e,t){const s=t.type;switch(s){case"plugin":return new plugin_vertex_PluginVertex(e,t);case"if":return new if_vertex_IfVertex(e,t);case"queue":return new queue_vertex_QueueVertex(e,t);default:throw new Error(`Unknown vertex type ${s}! This shouldn't happen!`)}}class Edge{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get id(){return this.json.id}get from(){return this.graph.verticesById[this.fromId]}get fromId(){return this.json.from}get to(){return this.graph.verticesById[this.toId]}get toId(){return this.json.to}}class boolean_edge_BooleanEdge extends Edge{get when(){return this.json.when}get isTrue(){return!0===this.when}get isFalse(){return!1===this.when}}class graph_Graph{constructor(){this.json=null,this.verticesById={},this.edgesById={},this.edgesByFrom={},this.edgesByTo={}}getVertexById(e){return this.verticesById[e]}getVertices(){return void 0===this.vertexCache&&(this.vertexCache=Object.values(this.verticesById)),this.vertexCache}get queueVertex(){return this.getVertices().find((e=>e instanceof queue_vertex_QueueVertex))}get processorVertices(){return this.getVertices().filter((e=>e.isProcessor))}get edges(){return Object.values(this.edgesById)}update(e){this.json=e,e.vertices.forEach((e=>{const t=this.verticesById[e.id];if(void 0!==t)t.update(e);else{const t=to(this,e);this.verticesById[e.id]=t}})),e.edges.forEach((e=>{const t=this.edgesById[e.id];if(void 0!==t)t.update(e);else{const t=function(e,t){const s=t.type;switch(s){case"plain":return new Edge(e,t);case"boolean":return new boolean_edge_BooleanEdge(e,t);default:throw new Error(`Unknown edge type ${s}! This shouldn't happen!`)}}(this,e);this.edgesById[e.id]=t,void 0===this.edgesByFrom[t.from.json.id]&&(this.edgesByFrom[t.from.json.id]=[]),this.edgesByFrom[t.from.json.id].push(t),void 0===this.edgesByTo[t.to.json.id]&&(this.edgesByTo[t.to.json.id]=[]),this.edgesByTo[t.to.json.id].push(t)}})),this.annotateVerticesWithStages()}get startVertices(){return this.getVertices().filter((e=>0===e.incomingEdges.length))}get endVertices(){return this.getVertices().filter((e=>0===e.outgoingEdges.length))}get hasQueueVertex(){return!!this.queueVertex}annotateVerticesWithStages(){this.annotateInputStageVertices(),this.annotateOutputStageVertices(),this.annotateFilterStageVertices()}annotateInputStageVertices(){this.hasQueueVertex&&this.startVertices.forEach((e=>e.pipelineStage="input"))}annotateOutputStageVertices(){if(1===this.endVertices.length&&this.endVertices[0]instanceof queue_vertex_QueueVertex)return;if(this.endVertices.every((e=>"filter"===e.pluginType)))return;const e=[...this.endVertices];for(;e.length>0;){const t=e.shift(),s=t.incomingVertices,a=s.some((e=>e instanceof plugin_vertex_PluginVertex&&"filter"===e.pluginType)),i=s.some((e=>e instanceof queue_vertex_QueueVertex)),n=0===s.length;if(!(a||i||n))e.push(...s);else{t.pipelineStage="output";t.descendants().vertices.forEach((e=>e.pipelineStage="output"))}}}annotateFilterStageVertices(){const e=[];for(this.hasQueueVertex?e.push(...this.queueVertex.outgoingVertices):e.push(...this.startVertices);e.length>0;){const t=e.shift();t.pipelineStage||(t.pipelineStage="filter",e.push(...t.outgoingVertices))}}}class config_Config{constructor(){this.graph=new graph_Graph}update(e){this.json=e,this.graph.update(e.graph)}}class pipeline_state_PipelineState{constructor(e){this.config=new config_Config,this.update(e)}update(e){this.config.update(e.representation)}}const so=e=>{const{pipelineHash:t,pipelineVersions:s,onChangePipelineHash:a}=e;return Object(O.jsx)(u.EuiFlexGroup,null,Object(O.jsx)(u.EuiFlexItem,{grow:!1},Object(O.jsx)(u.EuiSelect,{value:t,options:s.map((e=>({text:c.i18n.translate("xpack.monitoring.logstashNavigation.pipelineVersionDescription",{defaultMessage:"Version active {relativeLastSeen} and first seen {relativeFirstSeen}",values:{relativeLastSeen:e.relativeLastSeen,relativeFirstSeen:e.relativeFirstSeen}}),value:e.hash}))),onChange:a})))},ao=({clusters:e})=>{const t=Object(r.useRouteMatch)(),{hash:s,id:i}=t.params,n=Object(a.useContext)(v),{services:o}=Object(l.useKibana)(),u=n.cluster_uuid,{minIntervalSeconds:p}=Object(a.useContext)(Ma),m=Object(l.useUiSetting)("dateFormat"),[g,b]=Object(a.useState)(null),j=n.ccs,x=Object(d.find)(e,{cluster_uuid:u}),[h,f]=Object(a.useState)({}),[y,M]=Object(a.useState)(void 0),{updateTotalItemCount:E}=ei("logstash.pipelines"),_=c.i18n.translate("xpack.monitoring.logstash.pipeline.routeTitle",{defaultMessage:"Logstash - Pipeline"}),k=c.i18n.translate("xpack.monitoring.logstash.pipeline.pageTitle",{defaultMessage:"Logstash pipeline: {pipeline}",values:{pipeline:h.pipeline?h.pipeline.id:""}}),S=Object(a.useCallback)((async()=>{var e;const t=s?`../api/monitoring/v1/clusters/${u}/logstash/pipeline/${i}/${s}`:`../api/monitoring/v1/clusters/${u}/logstash/pipeline/${i}`,a=await(null===(e=o.http)||void 0===e?void 0:e.fetch(t,{method:"POST",body:JSON.stringify({ccs:j,detailVertexId:y||void 0})})),n=a;n.versions=n.versions.map((e=>{const t=ve(e.firstSeen,T.c),s=ve(e.lastSeen,T.c),a=2*p,i=Date.now()-e.lastSeen<=1e3*a;return{...e,relativeFirstSeen:c.i18n.translate("xpack.monitoring.logstash.pipeline.relativeFirstSeenAgoLabel",{defaultMessage:"{relativeFirstSeen} ago",values:{relativeFirstSeen:t}}),relativeLastSeen:i?c.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenNowLabel",{defaultMessage:"now"}):c.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenAgoLabel",{defaultMessage:"until {relativeLastSeen} ago",values:{relativeLastSeen:s}})}})),f(n),E(a.totalNodeCount)}),[j,u,o.http,E,y,p,s,i]);Object(a.useEffect)((()=>{h.pipeline&&b(new pipeline_state_PipelineState(h.pipeline))}),[h]);const{generate:w}=Object(a.useContext)(Ba.Context),C=Object(a.useCallback)((e=>{M(e?e.id:null)}),[]);Object(a.useEffect)((()=>{void 0!==y&&S()}),[y,S]);const I=Object(a.useCallback)((()=>{window.location.hash=ae(`#/logstash/pipelines/${i}/${s}`)}),[i,s]);return Object(a.useEffect)((()=>{x&&w(x.cluster_name,{inLogstash:!0,page:"pipeline"})}),[x,h,w]),Object(O.jsx)(En,{tabsDisabled:!0,title:_,pageTitle:k,getPageData:S,cluster:x},Object(O.jsx)("div",null,Object(O.jsx)(so,{pipelineVersions:h.versions,onChangePipelineHash:I,pipelineHash:s})),Object(O.jsx)("div",null,g&&Object(O.jsx)(pipeline_viewer_PipelineViewer,{pipeline:list_List.fromPipeline(Pipeline.fromPipelineGraph(g.config.graph)),timeseriesTooltipXValueFormatter:e=>Oe()(e).format(m),setDetailVertexId:C,detailVertex:h.vertex?to(null,h.vertex):null})))};class beats_listing_listing_Listing extends a.PureComponent{getColumns(){const e=this.props.setupMode;return[{name:c.i18n.translate("xpack.monitoring.beats.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if($(I.d.MetricbeatMigration)){const t=Object(d.get)(e,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(O.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(O.jsx)(ls,{setupMode:e,status:t,instance:i,productName:T.b}))}return Object(O.jsx)("div",null,Object(O.jsx)(u.EuiLink,{href:ae(`#/beats/beat/${s.uuid}`),"data-test-subj":`beatLink-${t}`},t),a)}},{name:c.i18n.translate("xpack.monitoring.beats.instances.typeTitle",{defaultMessage:"Type"}),field:"type"},{name:c.i18n.translate("xpack.monitoring.beats.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:c.i18n.translate("xpack.monitoring.beats.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>Ze(e,"","/s")},{name:c.i18n.translate("xpack.monitoring.beats.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>Ze(e,"byte","/s")},{name:c.i18n.translate("xpack.monitoring.beats.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>Ze(e,"0")},{name:c.i18n.translate("xpack.monitoring.beats.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>Ze(e,"byte")},{name:c.i18n.translate("xpack.monitoring.beats.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}render(){const{stats:e,data:t,sorting:s,pagination:a,onTableChange:i,setupMode:n}=this.props;let o=null;$(I.d.MetricbeatMigration)&&(o=Object(O.jsx)(us,{setupModeData:n.data,useNodeIdentifier:!1,productName:T.b}));const r=Object(d.uniq)(t.map((e=>e.type))).map((e=>({value:e}))),l=Object(d.uniq)(t.map((e=>e.version))).map((e=>({value:e})));return Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiScreenReaderOnly,null,Object(O.jsx)("h1",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.beats.listing.heading",defaultMessage:"Beats listing"}))),Object(O.jsx)(u.EuiPanel,null,Object(O.jsx)(yi,{stats:e})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(u.EuiPageContent,null,o,Object(O.jsx)(dt,{className:"beatsTable",rows:t,setupMode:n,productName:T.b,columns:this.getColumns(),sorting:s,pagination:a,search:{box:{incremental:!0,placeholder:c.i18n.translate("xpack.monitoring.beats.filterBeatsPlaceholder",{defaultMessage:"Filter Beats..."})},filters:[{type:"field_value_selection",field:"type",name:c.i18n.translate("xpack.monitoring.beats.instances.typeFilter",{defaultMessage:"Type"}),options:r,multiSelect:"or"},{type:"field_value_selection",field:"version",name:c.i18n.translate("xpack.monitoring.beats.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:i,executeQueryOptions:{defaultFields:["name","type"]}}))))}}const io=({clusters:e})=>{var t;const s=Object(a.useContext)(v),{services:i}=Object(l.useKibana)(),{generate:n}=Object(a.useContext)(Ba.Context),{updateTotalItemCount:o,getPaginationTableProps:r}=ei("beats.instances"),u=s.cluster_uuid,p=s.ccs,m=Object(d.find)(e,{cluster_uuid:u}),[g,b]=Object(a.useState)({}),j=c.i18n.translate("xpack.monitoring.beats.routeTitle",{defaultMessage:"Beats"}),x=c.i18n.translate("xpack.monitoring.beats.listing.pageTitle",{defaultMessage:"Beats listing"});Object(a.useEffect)((()=>{m&&n(m.cluster_name,{inBeats:!0})}),[m,n]);const h=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/beats/beats`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));b(n),o(n.stats.total)}),[p,u,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,o]);return Object(O.jsx)(hi,{title:j,pageTitle:x,getPageData:h},Object(O.jsx)("div",{"data-test-subj":"monitoringBeatsInstancesApp"},Object(O.jsx)(Da,{productName:T.b,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(O.jsx)(he.Provider,{value:{setupModeSupported:!0}},t,Object(O.jsx)(beats_listing_listing_Listing,ge()({stats:g.stats,data:g.listing,setupMode:e},r())),s)})))};function no({stats:e}){const{http_address:t,events:s,reloads:a,pipeline:i,queue_type:n,version:o,uptime:r}=e,l=[{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"httpAddress"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:Ze(s.in,"0.[0]a"),"data-test-subj":"eventsIn"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:Ze(s.out,"0.[0]a"),"data-test-subj":"eventsOut"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.configReloadsLabel",{defaultMessage:"Config Reloads"}),value:a.successes,"data-test-subj":"numReloads"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.pipelineWorkersLabel",{defaultMessage:"Pipeline Workers"}),value:i.workers,"data-test-subj":"pipelineWorkers"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.batchSizeLabel",{defaultMessage:"Batch Size"}),value:i.batch_size,"data-test-subj":"pipelineBatchSize"}],u=[{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.versionLabel",{defaultMessage:"Version"}),value:o,"data-test-subj":"version"},{label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:Ze(r,"time_since"),"data-test-subj":"uptime"}],d=[...l];return n&&d.push({label:c.i18n.translate("xpack.monitoring.logstash.detailStatus.queueTypeLabel",{defaultMessage:"Queue Type"}),value:n,"data-test-subj":"queueType"}),d.push(...u),Object(O.jsx)(He,{metrics:d,"data-test-subj":"logstashDetailStatus"})}const oo=({clusters:e})=>{var t;const s=Object(a.useContext)(v),i=Object(r.useRouteMatch)(),{services:n}=Object(l.useKibana)(),o=s.cluster_uuid,{zoomInfo:p,onBrush:m}=bi(),g=s.ccs,b=Object(d.find)(e,{cluster_uuid:o}),{generate:j}=Object(a.useContext)(Ba.Context),[x,h]=Object(a.useState)({}),[f,y]=Object(a.useState)({}),M=c.i18n.translate("xpack.monitoring.logstash.node.advanced.routeTitle",{defaultMessage:"Logstash - {nodeName} - Advanced",values:{nodeName:x.nodeSummary?x.nodeSummary.name:""}}),E=c.i18n.translate("xpack.monitoring.logstash.node.advanced.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:x.nodeSummary?x.nodeSummary.name:""}}),_=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/logstash/node/${i.params.uuid}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&o){var r;const e=await(null===(r=n.http)||void 0===r?void 0:r.fetch(a,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));h(e);const t=await Va({fetch:n.http.fetch,alertTypeIds:[T.O],clusterUuid:o,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});y(t)}}),[g,o,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,i.params.uuid]),k=Object(a.useMemo)((()=>x.metrics?[x.metrics.logstash_node_cpu_utilization,x.metrics.logstash_queue_events_count,x.metrics.logstash_node_cgroup_cpu,x.metrics.logstash_pipeline_queue_size,x.metrics.logstash_node_cgroup_stats]:[]),[x.metrics]);return Object(a.useEffect)((()=>{b&&x.nodeSummary&&j(b.cluster_name,{inLogstash:!0,instance:x.nodeSummary.host,name:"nodes"})}),[b,x,j]),Object(O.jsx)(En,{instance:x,title:M,pageTitle:E,getPageData:_,cluster:b},Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,x.nodeSummary&&Object(O.jsx)(no,{stats:x.nodeSummary})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:f}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},k.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e,onBrush:m,zoomInfo:p},x)),Object(O.jsx)(u.EuiSpacer,null)))))))))},ro=({clusters:e})=>{var t;const s=Object(r.useRouteMatch)(),i=Object(a.useContext)(v),{services:n}=Object(l.useKibana)(),{generate:o}=Object(a.useContext)(Ba.Context),p=i.cluster_uuid,m=i.ccs,g=Object(d.find)(e,{cluster_uuid:p}),[b,j]=Object(a.useState)({}),[x,h]=Object(a.useState)({}),{zoomInfo:f,onBrush:y}=bi(),M=c.i18n.translate("xpack.monitoring.logstash.node.routeTitle",{defaultMessage:"Logstash - {nodeName}",values:{nodeName:b.nodeSummary?b.nodeSummary.name:""}}),E=c.i18n.translate("xpack.monitoring.logstash.node.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:b.nodeSummary?b.nodeSummary.name:""}});Object(a.useEffect)((()=>{g&&b.nodeSummary&&o(g.cluster_name,{inLogstash:!0,instance:b.nodeSummary.host,name:"nodes"})}),[g,b,o]);const _=Object(a.useCallback)((async()=>{var e,t;const a=`../api/monitoring/v1/clusters/${p}/logstash/node/${s.params.uuid}`,i=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=n.http)&&void 0!==t&&t.fetch&&p){var o;const e=await(null===(o=n.http)||void 0===o?void 0:o.fetch(a,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()},is_advanced:!1})}));j(e);const t=await Va({fetch:n.http.fetch,alertTypeIds:[T.O],clusterUuid:p,timeRange:{min:i.min.valueOf(),max:i.max.valueOf()}});h(t)}}),[m,p,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,s.params]),k=Object(a.useMemo)((()=>b.metrics?[b.metrics.logstash_events_input_rate,b.metrics.logstash_jvm_usage,b.metrics.logstash_events_output_rate,b.metrics.logstash_node_cpu_metric,b.metrics.logstash_events_latency,b.metrics.logstash_os_load]:[]),[b.metrics]);return Object(O.jsx)(En,{instance:b,title:M,pageTitle:E,getPageData:_,cluster:g},Object(O.jsx)(u.EuiPage,null,Object(O.jsx)(u.EuiPageBody,null,Object(O.jsx)(u.EuiPanel,null,b.nodeSummary&&Object(O.jsx)(no,{stats:b.nodeSummary})),Object(O.jsx)(u.EuiSpacer,{size:"m"}),Object(O.jsx)(js,{alerts:x}),Object(O.jsx)(u.EuiPageContent,null,Object(O.jsx)(u.EuiFlexGrid,{columns:2,gutterSize:"s"},k.map(((e,t)=>Object(O.jsx)(u.EuiFlexItem,{key:t},Object(O.jsx)(Rt,ge()({series:e,onBrush:y,zoomInfo:f},b)),Object(O.jsx)(u.EuiSpacer,null)))))))))},lo=({clusters:e})=>{var t;const s=Object(a.useContext)(v),i=Object(r.useRouteMatch)(),{services:n}=Object(l.useKibana)(),o=s.cluster_uuid,u=s.ccs,{onBrush:p,zoomInfo:m}=bi(),g=Object(d.find)(e,{cluster_uuid:o}),{generate:b}=Object(a.useContext)(Ba.Context),{getPaginationTableProps:j,getPaginationRouteOptions:x,updateTotalItemCount:h}=ei("logstash.pipelines"),[f,y]=Object(a.useState)({}),M=c.i18n.translate("xpack.monitoring.logstash.node.pipelines.routeTitle",{defaultMessage:"Logstash - {nodeName} - Pipelines",values:{nodeName:f.nodeSummary?f.nodeSummary.name:""}}),E=c.i18n.translate("xpack.monitoring.logstash.node.pipelines.pageTitle",{defaultMessage:"Logstash node pipelines: {nodeName}",values:{nodeName:f.nodeSummary?f.nodeSummary.name:""}}),_=Object(a.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/logstash/node/${i.params.uuid}/pipelines`,r=await(null===(t=n.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...x()})}));y(r),h(r.totalPipelineCount)}),[u,o,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,x,h,i.params.uuid]);return Object(a.useEffect)((()=>{g&&f.nodeSummary&&b(g.cluster_name,{inLogstash:!0,instance:f.nodeSummary.host,name:"nodes"})}),[g,f,b]),Object(O.jsx)(En,{instance:f,title:M,pageTitle:E,getPageData:_,cluster:g},f.pipelines&&Object(O.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},Object(O.jsx)(pipeline_listing_PipelineListing,ge()({className:"monitoringLogstashPipelinesTable",onBrush:p,zoomInfo:m,stats:f.nodeSummary,data:f.pipelines,statusComponent:no},j(),{upgradeMessage:co(f.nodeSummary.version)}))))};function co(e){return!Array.isArray(e)||0===e.length||e.some(Tn)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher."}var uo=s(214),po=s.n(uo);const mo=()=>{const{services:e}=Object(l.useKibana)(),[t,s]=Object(a.useState)(!1);po()((()=>{!async function(){var t;if(null!==(t=e.http)&&void 0!==t&&t.fetch)try{var a;const t=await(null===(a=e.http)||void 0===a?void 0:a.fetch("../api/monitoring/v1/check_access"));s(t.has_access)}catch(e){s(!1)}}()}),5e3);const i=c.i18n.translate("xpack.monitoring.accessDeniedTitle",{defaultMessage:"Access Denied"});return t?Object(O.jsx)(r.Redirect,{to:"/home"}):Object(O.jsx)(u.EuiPanel,{paddingSize:"m"},Object(O.jsx)(u.EuiCallOut,{title:i,color:"danger",iconType:"alert","data-test-subj":"accessDeniedTitle"},Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.accessDenied.notAuthorizedDescription",defaultMessage:"You are not authorized to access Monitoring. To use Monitoring, you need the privileges granted by both the `{kibanaAdmin}` and `{monitoringUser}` roles.",values:{kibanaAdmin:"kibana_admin",monitoringUser:"monitoring_user "}})),Object(O.jsx)("p",null,Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.accessDenied.clusterNotConfiguredDescription",defaultMessage:"If you are attempting to access a dedicated monitoring cluster, this might be because you are logged in as a user that is not configured on the monitoring cluster."})),Object(O.jsx)("p",null,Object(O.jsx)(u.EuiButton,{href:"../app/home"},Object(O.jsx)(S.FormattedMessage,{id:"xpack.monitoring.accessDenied.backToKibanaButtonLabel",defaultMessage:"Back to Kibana"})))))},go=(e,t,{element:s,history:a,setHeaderActionMenu:i},n)=>{const r=a.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))}));return o.a.render(Object(O.jsx)(bo,{core:e,plugins:t,externalConfig:n,setHeaderActionMenu:i}),s),()=>{o.a.unmountComponentAtNode(s),r()}},bo=({core:e,plugins:t,externalConfig:s,setHeaderActionMenu:a})=>{const i=function(){const e=Object(x.createHashHistory)({hashType:"slash"}),t=e.push,s=e.replace;return e.push=(s,a)=>t.apply(e,[ni(e,oi(s,a))]),e.replace=(t,a)=>s.apply(e,[ni(e,oi(t,a))]),e}();return Object(O.jsx)(l.KibanaContextProvider,{services:{...e,...t}},Object(O.jsx)(Ma.Provider,{value:s},Object(O.jsx)(y,{query:t.data.query,toasts:e.notifications.toasts},Object(O.jsx)(As.Provider,{value:{setHeaderActionMenu:a}},Object(O.jsx)(E.Provider,null,Object(O.jsx)(Ba.Provider,{history:i},Object(O.jsx)(r.Router,{history:i},Object(O.jsx)(r.Switch,null,Object(O.jsx)(r.Route,{path:"/access-denied",component:mo}),Object(O.jsx)(r.Route,{path:"/no-data",component:di}),Object(O.jsx)(r.Route,{path:"/loading",component:Ws}),Object(O.jsx)(ri,{path:"/license",component:Ys,codePaths:["all"],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/home",component:ii,codePaths:["all"],fetchAllClusters:!0,unsetGlobalState:!0}),Object(O.jsx)(ri,{path:"/overview",component:Ga,codePaths:["all"],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/ml_jobs",component:gn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/ccr/:index/shard/:shardId",component:yn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/ccr",component:fn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/indices/:index/advanced",component:dn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/indices/:index",component:cn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/indices",component:tn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/nodes/:node/advanced",component:jn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/nodes/:node",component:mn,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch/nodes",component:Zi,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/elasticsearch",component:xi,codePaths:[T.j],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/kibana/instances/:instance",component:Xi,codePaths:[T.k],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/kibana/instances",component:Ji,codePaths:[T.k],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/kibana",component:Hi,codePaths:[T.k],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/beats/beat/:instance",component:ki,codePaths:[T.i],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/beats/beats",component:io,codePaths:[T.i],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/beats",component:Ei,codePaths:[T.i],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/logstash/nodes",component:kn,codePaths:[T.m],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/logstash/node/:uuid/advanced",component:oo,codePaths:[T.m],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/logstash/node/:uuid/pipelines",component:lo,codePaths:[T.m],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/logstash/node/:uuid",component:ro,codePaths:[T.m],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/logstash/pipelines/:id/:hash?",component:ao,codePaths:[T.m],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/logstash/pipelines",component:Ln,codePaths:[T.m],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/logstash",component:_n,codePaths:[T.m],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/apm/instances/:instance",component:Vi,codePaths:[T.h],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/apm/instances",component:zi,codePaths:[T.h],fetchAllClusters:!1}),Object(O.jsx)(ri,{path:"/apm",component:Fi,codePaths:[T.h],fetchAllClusters:!1}),Object(O.jsx)(r.Redirect,{to:{pathname:"/loading",search:i.location.search}})))))))))}}])]);