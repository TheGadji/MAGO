(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[2],{31:function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"f",(function(){return x})),s.d(t,"e",(function(){return d})),s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return p}));var a=s(0),i=s(4),l=s(1),n=s(6),o=s(8),r=s(19),u=s(18);s.d(t,"d",(function(){return u.a}));const c=()=>[{text:a.i18n.translate("visTypeXy.interpolationModes.straightText",{defaultMessage:"Straight"}),value:l.d.Linear},{text:a.i18n.translate("visTypeXy.interpolationModes.smoothedText",{defaultMessage:"Smoothed"}),value:l.d.Cardinal},{text:a.i18n.translate("visTypeXy.interpolationModes.steppedText",{defaultMessage:"Stepped"}),value:l.d.StepAfter}],x=()=>[{value:l.f.Full,text:a.i18n.translate("visTypeXy.thresholdLine.style.fullText",{defaultMessage:"Full"})},{value:l.f.Dashed,text:a.i18n.translate("visTypeXy.thresholdLine.style.dashedText",{defaultMessage:"Dashed"})},{value:l.f.DotDashed,text:a.i18n.translate("visTypeXy.thresholdLine.style.dotdashedText",{defaultMessage:"Dot-dashed"})}],d=()=>[{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.horizontalText",{defaultMessage:"Horizontal"}),value:o.LabelRotation.Horizontal},{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.verticalText",{defaultMessage:"Vertical"}),value:o.LabelRotation.Vertical},{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.angledText",{defaultMessage:"Angled"}),value:o.LabelRotation.Angled}],b=()=>[{value:i.Fit.None,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.none",{defaultMessage:"Hide (Do not fill gaps)"})},{value:i.Fit.Zero,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.zero",{defaultMessage:"Zero (Fill gaps with zeros)"})},{value:i.Fit.Linear,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.linear",{defaultMessage:"Linear (Fill gaps with a line)"})},{value:i.Fit.Carry,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.carry",{defaultMessage:"Last (Fill gaps with the last value)"})},{value:i.Fit.Lookahead,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.lookahead",{defaultMessage:"Next (Fill gaps with the next value)"})}],p=()=>({legendPositions:Object(u.a)(),positions:Object(u.a)(),chartTypes:[{text:a.i18n.translate("visTypeXy.chartTypes.lineText",{defaultMessage:"Line"}),value:n.ChartType.Line},{text:a.i18n.translate("visTypeXy.chartTypes.areaText",{defaultMessage:"Area"}),value:n.ChartType.Area},{text:a.i18n.translate("visTypeXy.chartTypes.barText",{defaultMessage:"Bar"}),value:n.ChartType.Histogram}],axisModes:[{text:a.i18n.translate("visTypeXy.axisModes.normalText",{defaultMessage:"Normal"}),value:l.a.Normal},{text:a.i18n.translate("visTypeXy.axisModes.percentageText",{defaultMessage:"Percentage"}),value:l.a.Percentage},{text:a.i18n.translate("visTypeXy.axisModes.wiggleText",{defaultMessage:"Wiggle"}),value:l.a.Wiggle},{text:a.i18n.translate("visTypeXy.axisModes.silhouetteText",{defaultMessage:"Silhouette"}),value:l.a.Silhouette}],scaleTypes:Object(r.a)(),chartModes:[{text:a.i18n.translate("visTypeXy.chartModes.normalText",{defaultMessage:"Normal"}),value:l.c.Normal},{text:a.i18n.translate("visTypeXy.chartModes.stackedText",{defaultMessage:"Stacked"}),value:l.c.Stacked}],interpolationModes:c(),thresholdLineStyles:x(),fittingFunctions:b()})},53:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return $}));var a=s(9),i=s.n(a),l=s(29),n=s(14),o=s(13),r=s.n(o),u=s(0),c=s(17),x=s(28),d=s(31),b=s(7);const p=Object(d.c)();function j({chart:e,setChart:t}){const s=Object(a.useCallback)(((e,s)=>{t(e,""===s?void 0:s)}),[t]);return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(x.SwitchOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.series.showLineLabel",{defaultMessage:"Show line"}),paramName:"drawLinesBetweenPoints",value:e.drawLinesBetweenPoints,setValue:t}),Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(x.SelectOption,{disabled:!e.drawLinesBetweenPoints,label:u.i18n.translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:p,paramName:"interpolate",value:e.interpolate,setValue:t})),Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(x.NumberInputOption,{disabled:!e.drawLinesBetweenPoints,label:u.i18n.translate("visTypeXy.controls.pointSeries.series.lineWidthLabel",{defaultMessage:"Line width"}),paramName:"lineWidth",step:.5,min:0,value:e.lineWidth,setValue:s}))))}function m({chart:e,setChart:t}){return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(x.SwitchOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.series.showDotsLabel",{defaultMessage:"Show dots"}),paramName:"showCircles",value:e.showCircles,setValue:t}),Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(n.EuiFormRow,{label:u.i18n.translate("visTypeXy.controls.pointSeries.series.circlesRadius",{defaultMessage:"Dots size"}),fullWidth:!0,display:"rowCompressed"},Object(b.jsx)(n.EuiRange,{"data-test-subj":"circlesRadius",value:e.circlesRadius,min:1,max:10,step:1,fullWidth:!0,disabled:!e.showCircles,showInput:!0,compressed:!0,onChange:e=>{t("circlesRadius",Number(e.currentTarget.value))}})))}var v=s(6);const y=Object(d.a)();function g({chart:e,index:t,valueAxes:s,changeValueAxis:l,setParamByIndex:o}){const r=Object(a.useCallback)(((e,s)=>{o("seriesParams",t,e,s)}),[o,t]),c=Object(a.useCallback)(((e,s)=>{l(t,e,s)}),[l,t]),d=Object(a.useMemo)((()=>[...s.map((({id:e,name:t})=>({text:t,value:e}))),{text:u.i18n.translate("visTypeXy.controls.pointSeries.series.newAxisLabel",{defaultMessage:"New axisâ€¦"}),value:"new"}]),[s]);return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(x.SelectOption,{id:`seriesValueAxis${t}`,label:u.i18n.translate("visTypeXy.controls.pointSeries.series.valueAxisLabel",{defaultMessage:"Value axis"}),options:d,paramName:"valueAxis",value:e.valueAxis,setValue:c}),Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(x.SelectOption,{id:`seriesType${t}`,label:u.i18n.translate("visTypeXy.controls.pointSeries.series.chartTypeLabel",{defaultMessage:"Chart type"}),options:y.chartTypes,paramName:"type",value:e.type,setValue:r})),Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(x.SelectOption,{id:`seriesMode${t}`,label:u.i18n.translate("visTypeXy.controls.pointSeries.series.modeLabel",{defaultMessage:"Mode"}),options:y.chartModes,paramName:"mode",value:e.mode,setValue:r}))),e.type===v.ChartType.Area&&Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(x.SelectOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:y.interpolationModes,paramName:"interpolate",value:e.interpolate,setValue:r})),e.type===v.ChartType.Line&&Object(b.jsx)(j,{chart:e,setChart:r}),(e.type===v.ChartType.Area||e.type===v.ChartType.Line)&&Object(b.jsx)(m,{chart:e,setChart:r}))}function O({seriesParams:e,...t}){return Object(b.jsx)(n.EuiPanel,{paddingSize:"s"},Object(b.jsx)(n.EuiTitle,{size:"xs"},Object(b.jsx)("h3",null,Object(b.jsx)(c.FormattedMessage,{id:"visTypeXy.controls.pointSeries.series.metricsTitle",defaultMessage:"Metrics"}))),Object(b.jsx)(n.EuiSpacer,{size:"s"}),e.map(((e,s)=>Object(b.jsx)(n.EuiAccordion,{id:`visEditorSeriesAccordion${e.data.id}`,key:s,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:0===s,buttonContent:e.data.label,buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":u.i18n.translate("visTypeXy.controls.pointSeries.seriesAccordionAriaLabel",{defaultMessage:"Toggle {agg} options",values:{agg:e.data.label}})},Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(g,r()({index:s,chart:e},t)))))))}var A=s(21);s(15);function T({axisLabels:e,axisFilterCheckboxName:t,setAxisLabel:s}){const l=Object(a.useCallback)(((e,t)=>{s(e,Number(t))}),[s]),o=Object(a.useMemo)(d.e,[]);return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(n.EuiTitle,{size:"xxs"},Object(b.jsx)("h3",null,Object(b.jsx)(c.FormattedMessage,{id:"visTypeXy.controls.pointSeries.categoryAxis.labelsTitle",defaultMessage:"Labels"}))),Object(b.jsx)(n.EuiSpacer,{size:"s"}),Object(b.jsx)(x.SwitchOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:e.show,setValue:s}),Object(b.jsx)(x.SwitchOption,{"data-test-subj":t,disabled:!e.show,label:u.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.filterLabelsLabel",{defaultMessage:"Filter labels"}),paramName:"filter",value:e.filter,setValue:s}),Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(x.SelectOption,{disabled:!e.show,label:u.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.alignLabel",{defaultMessage:"Align"}),options:o,paramName:"rotate",value:e.rotate,setValue:l})),Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(A.a,{disabled:!e.show,value:e.truncate,setValue:s}))))}const h=Object(d.d)();function f({axis:e,onPositionChanged:t,setCategoryAxis:s}){const i=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};s(i)}),[s,e]),l=Object(a.useCallback)(((e,s)=>{i(e,s),t(s)}),[i,t]),o=Object(a.useCallback)(((t,s)=>{const a={...e.labels,[t]:s};i("labels",a)}),[e.labels,i]);return Object(b.jsx)(n.EuiPanel,{paddingSize:"s"},Object(b.jsx)(n.EuiTitle,{size:"xs"},Object(b.jsx)("h3",null,Object(b.jsx)(c.FormattedMessage,{id:"visTypeXy.controls.pointSeries.categoryAxis.xAxisTitle",defaultMessage:"X-axis"}))),Object(b.jsx)(n.EuiSpacer,{size:"s"}),Object(b.jsx)(x.SelectOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.positionLabel",{defaultMessage:"Position"}),options:h,paramName:"position",value:e.position,setValue:l,"data-test-subj":"categoryAxisPosition"}),Object(b.jsx)(x.SwitchOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.showLabel",{defaultMessage:"Show axis lines and labels"}),paramName:"show",value:e.show,setValue:i}),e.show&&Object(b.jsx)(T,{axisLabels:e.labels,axisFilterCheckboxName:`xAxisFilterLabelsCheckbox${e.id}`,setAxisLabel:o}))}var S=s(1);const M=u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minErrorMessage",{defaultMessage:"Min should be less than Max."}),E=u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minNeededScaleText",{defaultMessage:"Min must exceed 0 when a log scale is selected."});function C(e){return null==e}function w({scale:e,setScale:t,setMultipleValidity:s}){const{min:l,max:o,type:r}=e,c=[];(function(e=null,t=null){return null===e||null===t||t>e})(l,o)||c.push(M),r===S.e.Log&&(C(l)||l<=0)&&c.push(E);const d=!c.length,p=Object(a.useCallback)(((e,s)=>{t(e,""===s?null:s)}),[t]);return Object(a.useEffect)((()=>(s("yExtents",d),()=>s("yExtents",!0))),[d,s]),Object(b.jsx)(n.EuiFormRow,{error:c,isInvalid:!!c.length,fullWidth:!0,display:"rowCompressed"},Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(x.NumberInputOption,{"data-test-subj":"yAxisYExtentsMin",isInvalid:!!c.length,label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minLabel",{defaultMessage:"Min"}),step:.1,paramName:"min",value:C(l)?"":l,setValue:p})),Object(b.jsx)(n.EuiFlexItem,null,Object(b.jsx)(x.NumberInputOption,{"data-test-subj":"yAxisYExtentsMax",label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.maxLabel",{defaultMessage:"Max"}),step:.1,paramName:"max",value:C(o)?"":o,setValue:p})))))}function L({axisScale:e,setMultipleValidity:t,setValueAxis:s,setValueAxisScale:l,disableAxisExtents:n=!1}){const o=u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.minNeededBoundsMargin",{defaultMessage:"Bounds margin must be greater than or equal to 0."}),r=!e.defaultYExtents||!e.boundsMargin||e.boundsMargin>=0,c=Object(a.useCallback)(((e,t)=>l(e,""===t?void 0:t)),[l]),d=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};i.defaultYExtents||delete i.boundsMargin,s("scale",i)}),[e,s]),p=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};i.setYExtents||(delete i.min,delete i.max),s("scale",i)}),[e,s]);return Object(a.useEffect)((()=>(t("boundsMargin",r),()=>t("boundsMargin",!0))),[r,t]),Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(x.SwitchOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBoundsLabel",{defaultMessage:"Scale to data bounds"}),paramName:"defaultYExtents",value:e.defaultYExtents,setValue:d}),e.defaultYExtents&&Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(x.NumberInputOption,{error:!r&&o,isInvalid:!r,label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.boundsMargin",{defaultMessage:"Bounds margin"}),step:.1,min:0,paramName:"boundsMargin",value:e.boundsMargin,setValue:c})),Object(b.jsx)(x.SwitchOption,{"data-test-subj":"yAxisSetYExtents",label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.setAxisExtentsLabel",{defaultMessage:"Set axis extents"}),paramName:"setYExtents",value:e.setYExtents,setValue:p,disabled:n}),e.setYExtents&&!n&&Object(b.jsx)(w,{scale:e,setScale:l,setMultipleValidity:t}))}const X=Object(d.a)();function F({axis:e,index:t,valueAxis:s,onValueAxisPositionChanged:l,setParamByIndex:o,setMultipleValidity:r}){const c=Object(a.useCallback)(((e,s)=>o("valueAxes",t,e,s)),[o,t]),d=Object(a.useCallback)(((e,a)=>{const i={...s.title,[e]:a};o("valueAxes",t,"title",i)}),[s.title,o,t]),p=Object(a.useCallback)(((e,a)=>{const i={...s.scale,[e]:a};o("valueAxes",t,"scale",i)}),[s.scale,o,t]),j=Object(a.useCallback)(((e,a)=>{const i={...s.labels,[e]:a};o("valueAxes",t,"labels",i)}),[s.labels,o,t]),m=Object(a.useCallback)(((e,s)=>{l(t,s)}),[t,l]);return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(x.SelectOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.positionLabel",{defaultMessage:"Position"}),options:X.positions,paramName:"position",value:e.position,setValue:m}),Object(b.jsx)(x.SelectOption,{id:`valueAxisMode${t}`,label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.modeLabel",{defaultMessage:"Mode"}),options:X.axisModes,paramName:"mode",value:e.scale.mode,setValue:p}),Object(b.jsx)(x.SelectOption,{id:`scaleSelectYAxis-${e.id}`,label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleTypeLabel",{defaultMessage:"Scale type"}),options:X.scaleTypes,paramName:"type",value:e.scale.type,setValue:p}),Object(b.jsx)(n.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(x.SwitchOption,{label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.showLabel",{defaultMessage:"Show axis lines and labels"}),"data-test-subj":`valueAxisShow-${e.id}`,paramName:"show",value:e.show,setValue:c}),e.show?Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(x.TextInputOption,{"data-test-subj":`valueAxisTitle${t}`,label:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.titleLabel",{defaultMessage:"Title"}),paramName:"text",value:e.title.text,setValue:d}),Object(b.jsx)(T,{axisLabels:e.labels,axisFilterCheckboxName:`yAxisFilterLabelsCheckbox-${e.id}`,setAxisLabel:j})):Object(b.jsx)(n.EuiSpacer,{size:"xs"}),Object(b.jsx)(n.EuiHorizontalRule,{margin:"s"}),Object(b.jsx)(n.EuiAccordion,{id:`yAxisOptionsAccordion${e.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:!1,buttonContentClassName:"euiText euiText--small",buttonContent:u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.customExtentsLabel",{defaultMessage:"Custom extents"}),"aria-label":u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.toggleCustomExtendsAriaLabel",{defaultMessage:"Toggle custom extents"})},Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(L,{axisScale:e.scale,setMultipleValidity:r,setValueAxisScale:p,setValueAxis:c,disableAxisExtents:"percentage"===e.scale.mode}))))}function P(e){const{addValueAxis:t,removeValueAxis:s,seriesParams:l,valueAxes:o}=e,r=Object(a.useCallback)((e=>{const t=o[0].id===e.id;return l.filter((s=>s.valueAxis===e.id||t&&!s.valueAxis)).map((e=>e.data.label)).join(", ")}),[l,o]),x=Object(a.useMemo)((()=>u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.removeButtonTooltip",{defaultMessage:"Remove Y-axis"})),[]),d=Object(a.useCallback)((e=>Object(b.jsx)(n.EuiToolTip,{position:"bottom",content:x},Object(b.jsx)(n.EuiButtonIcon,{color:"danger",iconType:"cross",onClick:()=>s(e),"aria-label":x,"data-test-subj":"removeValueAxisBtn"}))),[s,x]),p=Object(a.useMemo)((()=>u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.addButtonTooltip",{defaultMessage:"Add Y-axis"})),[]),j=Object(a.useCallback)((e=>{const t=r(e);return Object(b.jsx)(i.a.Fragment,null,e.name," ",Object(b.jsx)(n.EuiToolTip,{content:t},Object(b.jsx)(i.a.Fragment,null,t)))}),[r]);return Object(b.jsx)(n.EuiPanel,{paddingSize:"s"},Object(b.jsx)(n.EuiFlexGroup,{gutterSize:"none",justifyContent:"spaceBetween",alignItems:"baseline"},Object(b.jsx)(n.EuiFlexItem,{grow:!1},Object(b.jsx)(n.EuiTitle,{size:"xs"},Object(b.jsx)("h3",null,Object(b.jsx)(c.FormattedMessage,{id:"visTypeXy.controls.pointSeries.valueAxes.yAxisTitle",defaultMessage:"Y-axes"})))),Object(b.jsx)(n.EuiFlexItem,{grow:!1},Object(b.jsx)(n.EuiToolTip,{position:"bottom",content:p},Object(b.jsx)(n.EuiButtonIcon,{iconType:"plusInCircleFilled",onClick:t,"aria-label":p,"data-test-subj":"visualizeAddYAxisButton"})))),Object(b.jsx)(n.EuiSpacer,{size:"s"}),o.map(((t,s)=>Object(b.jsx)(n.EuiAccordion,{id:`yAxisAccordion${t.id}`,key:t.id,"data-test-subj":`toggleYAxisOptions-${t.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:!1,buttonContent:j(t),buttonClassName:"eui-textTruncate",buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":u.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.toggleOptionsAriaLabel",{defaultMessage:"Toggle {axisName} options",values:{axisName:t.name}}),extraAction:1===o.length?void 0:d(t)},Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(n.EuiSpacer,{size:"m"}),Object(b.jsx)(F,{axis:t,index:s,valueAxis:o[s],onValueAxisPositionChanged:e.onValueAxisPositionChanged,setParamByIndex:e.setParamByIndex,setMultipleValidity:e.setMultipleValidity}))))))}var V=s(4);const N=e=>[V.Position.Top,V.Position.Bottom].includes(e);function k(e,t="id"){return(s,a)=>{const i=e.length;if(a[t].substr(0,i)===e){const e=parseInt(a[t].substr(i),10);e>=s&&(s=e+1)}return s}}const z=(e,t)=>{const s=Object(l.upperFirst)(e)+"Axis-";return`${s}${t.reduce(k(s,"name"),1)}`};function I(e){switch(e){case V.Position.Bottom:return V.Position.Top;case V.Position.Top:return V.Position.Bottom;case V.Position.Left:return V.Position.Right;case V.Position.Right:return V.Position.Left;default:throw new Error("Invalid legend position.")}}function B(e,t,s){return e===t?s:I(s)}function _(e){switch(e){case V.Position.Bottom:return V.Position.Left;case V.Position.Top:return V.Position.Right;case V.Position.Left:return V.Position.Bottom;case V.Position.Right:return V.Position.Top}}var Y=s(23);const R="ValueAxis-";function $(e){const{stateParams:t,setValue:s,aggs:o,vis:r,isTabSelected:u}=e,c=Object(a.useCallback)(((e,a,i,l)=>{const n=[...t[e]];n[a]={...n[a],[i]:l},s(e,n)}),[t,s]),x=Object(a.useCallback)((e=>{const a=[...t.categoryAxes];a[0]=e,s("categoryAxes",a)}),[s,t.categoryAxes]),[d,p]=Object(a.useState)({}),[j,m]=Object(a.useState)({}),v=Object(a.useCallback)((e=>{const a=e||t.seriesParams;let i=!1,n=!1;const r={...d},u={...j},c=t.valueAxes.map(((e,t)=>{let s,c="";const x=[];if(a.forEach(((s,a)=>{if(0===t&&!s.valueAxis||s.valueAxis===e.id){const e=o.bySchemaName("metric")[a];x.push(e)}})),1===x.length&&(c=x[0].makeLabel()),d[e.id]!==c&&""!==c){const t=Object(l.get)(j,`${x[0].id}.type`),a=Object(l.get)(j,`${x[0].id}.field`),o=Object(l.get)(x,"[0]type.name",""),b=Object(l.get)(x,"[0]params.field.name",""),p=t!==o,m=a!==b;u[x[0].id]={type:o,field:b},r[e.id]=c,n=!0,0!==Object.keys(d).length&&(p||m||""===e.title.text||d[e.id]===e.title.text)&&c!==e.title.text&&(s={...e,title:{...e.title,text:c}},i=!0)}return s||e}));i&&s("valueAxes",c),n&&(m(u),p(r))}),[o,d,j,s,t.seriesParams,t.valueAxes]),y=Object(a.useCallback)(((e,a)=>{const i=N(a),l=[...t.valueAxes],n=z(a,l),[o]=t.categoryAxes;if(N(o.position)===i){const t={...o,position:_(o.position)};s("categoryAxes",[t]);const i=l[e].position,n=l.map((({position:t,...s},l)=>({...s,position:l===e?a:B(t,i,a)})));s("valueAxes",n)}else l[e]={...l[e],name:n,position:a},s("valueAxes",l)}),[t.valueAxes,t.categoryAxes,s]),g=Object(a.useCallback)((e=>{const a=N(e);if(t.valueAxes.some((({position:e})=>N(e)===a))){const e=t.valueAxes.map((({position:e,...t})=>({...t,position:_(e)})));s("valueAxes",e)}}),[s,t.valueAxes]),A=Object(a.useCallback)((()=>{const e=t.valueAxes.reduce(k(R),1),a=Object(l.cloneDeep)(t.valueAxes[0]);return a.id=R+e,a.position=I(a.position),a.name=z(a.position,t.valueAxes),s("valueAxes",[...t.valueAxes,a]),a}),[t.valueAxes,s]),T=Object(a.useCallback)((e=>{const a=t.valueAxes.filter((t=>t.id!==e.id));s("valueAxes",a);let i=!1;const l=t.seriesParams.map((t=>e.id===t.valueAxis?(i=!0,{...t,valueAxis:a[0].id}):t));i&&s("seriesParams",l),t.grid.valueAxis===e.id&&s("grid",{...t.grid,valueAxis:void 0})}),[t.seriesParams,t.valueAxes,s,t.grid]),h=Object(a.useCallback)(((e,t,s)=>{let a=s;if("new"===s){a=A().id}c("seriesParams",e,t,a),v()}),[A,c,v]),S=r.type.schemas.metrics[0].name,M=t.valueAxes[0].id;return Object(a.useEffect)((()=>{const e=Object(Y.a)(o,t.seriesParams,S,M);e&&s("seriesParams",e),v(e)}),[M,s,t.seriesParams,v,o,S]),u?Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(O,{changeValueAxis:h,setParamByIndex:c,seriesParams:t.seriesParams,valueAxes:t.valueAxes,vis:r}),Object(b.jsx)(n.EuiSpacer,{size:"s"}),Object(b.jsx)(P,{addValueAxis:A,removeValueAxis:T,onValueAxisPositionChanged:y,setParamByIndex:c,setMultipleValidity:e.setMultipleValidity,seriesParams:t.seriesParams,valueAxes:t.valueAxes}),Object(b.jsx)(n.EuiSpacer,{size:"s"}),Object(b.jsx)(f,{axis:t.categoryAxes[0],onPositionChanged:g,setCategoryAxis:x})):null}}}]);