(window.visTypeTimelion_bundle_jsonpfunction=window.visTypeTimelion_bundle_jsonpfunction||[]).push([[2],{28:function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function c(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],s=n[l]||0,u="".concat(l," ").concat(s);n[l]=s+1;var d=c(u),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(a[d].references++,a[d].updater(f)):a.push({identifier:u,updater:p(f,t),references:1}),r.push(u)}return r}function s(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function h(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,g=0;function p(e,t){var n,r,i;if(t.singleton){var o=g++;n=m||(m=s(t)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=s(t),r=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=c(n[r]);a[i].references--}for(var o=l(e,t),s=0;s<n.length;s++){var u=c(n[s]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=o}}}},29:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(l," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,c,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=["#01A4A4","#C66","#D0D102","#616161","#00A1CB","#32742C","#F18D05","#113F8C","#61AE24","#D70060"]},31:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(3),i=n(22),o=n.n(i);const a={};[["ms","milliseconds","millisecond"],["s","seconds","second","sec"],["m","minutes","minute","min"],["h","hours","hour"],["d","days","day"],["w","weeks","week"],["M","months","month"],["quarter"],["y","years","year"]].forEach((e=>{const t=o.a.normalizeUnits(e[0]),n=o.a.duration(1,t).asMilliseconds();[].concat(t,e).forEach((e=>{a[e]=n}))}));const c=new RegExp("^(\\d+(?:\\.\\d*)?)?\\s*("+Object(r.keys)(a).join("|")+")$");function l(e){const t=e.match(c);if(t){if("M"===t[2]&&"1"!==t[1])throw new Error("Invalid interval. 1M is only valid monthly interval.");return parseFloat(t[1]||"1")*a[t[2]]}}function s(e,t,n,r,i){if("auto"!==r)return r;const o=function(e){switch(!0){case e<=500:return"100ms";case e<=5e3:return"1s";case e<=7500:return"5s";case e<=15e3:return"10s";case e<=45e3:return"30s";case e<=18e4:return"1m";case e<=45e4:return"5m";case e<=12e5:return"10m";case e<=27e5:return"30m";case e<=72e5:return"1h";case e<=216e5:return"3h";case e<=864e5:return"12h";case e<=6048e5:return"24h";case e<=18144e5:return"1w";case e<36288e5:return"30d";default:return"1y"}}((t-e)/n),a=l(o),c=l(i);return void 0!==a&&void 0!==c&&a<c?i:o}const u="MMMM Do YYYY, HH:mm:ss.SSS"},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(22),i=n.n(r),o=n(2);function a(e){return t=>function(t){const n=t.match(/(\d+)(ms|s|m|h|d|w|M|y|)/);if(null===n||null===n[1]||null===n[2])throw new Error(o.i18n.translate("timelion.panels.timechart.unknownIntervalErrorMessage",{defaultMessage:"Unknown interval"}));const r=i.a.duration(Number(n[1]),n[2]),a=e.get("dateFormat:scaled");for(let e=a.length-1;e>=0;e--){const t=a[e];if(!t[0]||r>=i.a.duration(t[0]))return t[1]}return e.get("dateFormat")}(t)}},54:function(e,t,n){switch(window.__kbnThemeTag__){case"v7dark":return n(55);case"v7light":return n(57);case"v8dark":return n(59);case"v8light":return n(61)}},55:function(e,t,n){var r=n(28),i=n(56);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},56:function(e,t,n){(t=n(29)(!1)).push([e.i,".timChart{height:100%;width:100%;display:flex;flex-direction:column}.timChart .chart-top-title{font-size:12px;font-size:.75rem;line-height:1.5;flex:0;text-align:center;font-weight:700}.timChart .chart-canvas{min-width:100%;flex:1;overflow:hidden}.timChart .legendLabel{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;line-height:normal}.timChart .legendColorBox{vertical-align:middle}.timChart .ngLegendValue{color:#DFE5EF;cursor:pointer}.timChart .ngLegendValue:focus,.timChart .ngLegendValue:hover{text-decoration:underline}.timChart .ngLegendValueNumber{margin-left:4px;margin-right:4px;font-weight:700}.timChart .flot-tick-label{font-size:12px;color:#98A2B3}.timChart__legendCaption{color:#DFE5EF;white-space:nowrap;font-weight:700}\n",""]),e.exports=t},57:function(e,t,n){var r=n(28),i=n(58);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},58:function(e,t,n){(t=n(29)(!1)).push([e.i,".timChart{height:100%;width:100%;display:flex;flex-direction:column}.timChart .chart-top-title{font-size:12px;font-size:.75rem;line-height:1.5;flex:0;text-align:center;font-weight:700}.timChart .chart-canvas{min-width:100%;flex:1;overflow:hidden}.timChart .legendLabel{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;line-height:normal}.timChart .legendColorBox{vertical-align:middle}.timChart .ngLegendValue{color:#343741;cursor:pointer}.timChart .ngLegendValue:focus,.timChart .ngLegendValue:hover{text-decoration:underline}.timChart .ngLegendValueNumber{margin-left:4px;margin-right:4px;font-weight:700}.timChart .flot-tick-label{font-size:12px;color:#69707D}.timChart__legendCaption{color:#343741;white-space:nowrap;font-weight:700}\n",""]),e.exports=t},59:function(e,t,n){var r=n(28),i=n(60);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},60:function(e,t,n){(t=n(29)(!1)).push([e.i,".timChart{height:100%;width:100%;display:flex;flex-direction:column}.timChart .chart-top-title{font-size:12px;font-size:.85714rem;line-height:1.14286rem;flex:0;text-align:center;font-weight:700}.timChart .chart-canvas{min-width:100%;flex:1;overflow:hidden}.timChart .legendLabel{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;line-height:normal}.timChart .legendColorBox{vertical-align:middle}.timChart .ngLegendValue{color:#DFE5EF;cursor:pointer}.timChart .ngLegendValue:focus,.timChart .ngLegendValue:hover{text-decoration:underline}.timChart .ngLegendValueNumber{margin-left:4px;margin-right:4px;font-weight:700}.timChart .flot-tick-label{font-size:12px;color:#98A2B3}.timChart__legendCaption{color:#DFE5EF;white-space:nowrap;font-weight:700}\n",""]),e.exports=t},61:function(e,t,n){var r=n(28),i=n(62);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},62:function(e,t,n){(t=n(29)(!1)).push([e.i,".timChart{height:100%;width:100%;display:flex;flex-direction:column}.timChart .chart-top-title{font-size:12px;font-size:.85714rem;line-height:1.14286rem;flex:0;text-align:center;font-weight:700}.timChart .chart-canvas{min-width:100%;flex:1;overflow:hidden}.timChart .legendLabel{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;line-height:normal}.timChart .legendColorBox{vertical-align:middle}.timChart .ngLegendValue{color:#343741;cursor:pointer}.timChart .ngLegendValue:focus,.timChart .ngLegendValue:hover{text-decoration:underline}.timChart .ngLegendValueNumber{margin-left:4px;margin-right:4px;font-weight:700}.timChart .flot-tick-label{font-size:12px;color:#69707D}.timChart__legendCaption{color:#343741;white-space:nowrap;font-weight:700}\n",""]),e.exports=t},65:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var r=n(5),i=n(24),o=n.n(i),a=n(8),c=n.n(a),l=n(3),s=n(20),u=n(11),d=n(31),f=n(32),h=n(30);const m="ACTIVE_CURSOR_TIMELION",g=o()({}),p="data-series-id";function b(e,t){return n=>{let r=0;const i=n<0;for(n=Math.abs(n);n>=e&&r<t.length;)n/=e,r++;return`${Math.round(100*n)/100*(i?-1:1)}${t[r]}`}}function v(){return{bits:b(1e3,["b","kb","mb","gb","tb","pb"]),"bits/s":b(1e3,["b/s","kb/s","mb/s","gb/s","tb/s","pb/s"]),bytes:b(1024,["B","KB","MB","GB","TB","PB"]),"bytes/s":b(1024,["B/s","KB/s","MB/s","GB/s","TB/s","PB/s"]),currency:(e,t)=>e.toLocaleString("en",{style:"currency",currency:t&&t.options&&t.options.units.prefix||"USD"}),percent(e,t){let n=Object(l.get)(t,"tickDecimals",0)-Object(l.get)(t,"options.units.tickDecimalsShift",0);return n<0?n=0:n>20&&(n=20),(100*e).toFixed(n)+"%"},custom(e,t){const n=function(e,t){const n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,r=""+Math.round(e*n)/n;if(null!=t.tickDecimals){const e=r.indexOf("."),i=-1===e?0:r.length-e-1;if(i<t.tickDecimals)return(i?r:r+".")+(""+n).substr(1,t.tickDecimals-i)}return r}(e,t);return(t&&t.options&&t.options.units.prefix)+n+(t&&t.options&&t.options.units.suffix)}}}function x(){function e(e){const t=[];let n,r=2,i=e.delta||0,o=0,a=0;for(;Math.abs(i)>=1024;)o++,i/=1024;for(;r<=1024&&!(i<=r);)r*=2;e.tickSize=r*Math.pow(1024,o);const c=(l=e.min||0,(s=e.tickSize)*Math.floor(l/s));var l,s;do{n=c+a++*e.tickSize,t.push(n)}while(n<(e.max||0));return t}return t=>e(t)}n(54);var C=n(4);const w="<br>";function j({interval:e,seriesList:t,renderComplete:n,onBrushEvent:i}){const a=Object(u.useKibana)(),[b,j]=Object(r.useState)((()=>Object(l.cloneDeep)(t.list))),[O,y]=Object(r.useState)(),[k,_]=Object(r.useState)(null),[M,E]=Object(r.useState)((()=>new Map)),[L,S]=Object(r.useState)(null),[B,D]=Object(r.useState)(),[N,T]=Object(r.useState)(),[F,V]=Object(r.useState)(),[z,A]=Object(r.useState)(),R=Object(r.useCallback)((e=>{null!==e&&y(e)}),[]),I=Object(r.useCallback)((e=>{null!==e&&_(e)}),[]);Object(r.useEffect)((()=>()=>{k&&o()(k).off("plotselected").off("plothover").off("mouseleave")}),[k]);const U=Object(r.useCallback)(Object(l.debounce)((({currentTarget:e})=>{const t=Number(e.getAttribute(p));L!==t&&(S(t),j((e=>e.map(((e,n)=>(e.color=n===t?M.get(e):"rgba(128,128,128,0.1)",e))))))}),50),[M,L]),W=Object(r.useCallback)((e=>{const t=Number(e.currentTarget.getAttribute(p));D(t),U(e)}),[U]),H=Object(r.useCallback)((({currentTarget:e})=>{const t=Number(e.getAttribute(p));j((e=>e.map(((e,n)=>(n===t&&(e._hide=!e._hide),e)))))}),[]),$=Object(r.useCallback)((e=>{if(O&&Object(l.get)(e,"[0]._global.legend.showTime",!0)){const e=o()('<caption class="timChart__legendCaption"></caption>');e.html(w),A(e);const t=o()(O);t.find("div.legend table").append(e),V(t.find(".ngLegendValueNumber"));const n=o()(O).find(".ngLegendValue");n&&(n.click(H),n.focus(W),n.mouseover(U)),(B||0===B)&&t.find("div.legend table .legendLabel>span").get(B).focus()}}),[B,O,H,W,U]),q=Object(r.useCallback)(((t,r)=>{if(O&&O.clientWidth>0&&O.clientHeight>0){const i=function(e,t,n,r=0,i){const o=t.getBounds(),a=Object(d.b)(o.min&&o.min.valueOf()||0,o.max&&o.max.valueOf()||0,n.get("timelion:target_buckets")||200,e,n.get("timelion:min_interval")||"1ms"),l=Object(f.a)(n)(a);return{xaxis:{mode:"time",tickLength:5,timezone:"browser",ticks:Math.floor(r/(7*l.length+45)),tickFormatter:e=>c()(e).format(l)},selection:{mode:"x",color:"#ccc"},crosshair:{mode:"x",color:"#C66",lineWidth:2},colors:h.a,grid:{show:i,borderWidth:0,borderColor:null,margin:10,hoverable:!0,autoHighlight:!1},legend:{backgroundColor:"rgb(255,255,255,0)",position:"nw",labelBoxBorderColor:"rgb(255,255,255,0)",labelFormatter(e,t){const n=document.createElement("span"),r=document.createElement("span"),i=document.createElement("span");return n.setAttribute("class","ngLegendValue"),n.setAttribute(p,`${t._id}`),r.appendChild(document.createTextNode(e)),i.setAttribute("class","ngLegendValueNumber"),n.appendChild(r),n.appendChild(i),n.outerHTML}}}}(e,a.services.timefilter,a.services.uiSettings,null==k?void 0:k.clientWidth,r),s=function(e,t){const n=e.map(((e,n)=>{const r=Object(l.cloneDeep)(Object(l.defaults)(e,{shadowSize:0,lines:{lineWidth:3}}));if(r._id=n,e.color){const t=document.createElement("span");t.style.color=e.color,r.color=t.style.color}return e._hide&&(r.data=[],r.stack=!1,r.label=`(hidden) ${e.label}`),e._global&&Object(l.mergeWith)(t,e._global,((e,t)=>null==e?t:null==t?e:void 0)),r}));return Object(l.compact)(n)}(t,i);i.yaxes&&i.yaxes.forEach((e=>{if(e&&e.units){const t=v();e.tickFormatter=t[e.units.type];["bytes","bytes/s"].includes(e.units.type)&&(e.tickGenerator=x())}}));const u=o.a.plot(o()(O),s,i);T(u),n(),$(u.getData())}}),[O,null==k?void 0:k.clientWidth,n,a.services,e,$]),Y=Object(s.useResizeObserver)(k);Object(r.useEffect)((()=>{q(b,t.render&&t.render.grid)}),[b,q,t.render,Y]),Object(r.useEffect)((()=>{const e=[],n=t.list.map(((t,n)=>{const r={...t};if(!r.color){const e=n%h.a.length;r.color=h.a[e]}return e.push([r,r.color]),r}));j(n),E(new Map(e))}),[t.list]);const G=Object(r.useCallback)((()=>{null!==L&&(S(null),D(null),j((e=>e.map((e=>(e.color=M.get(e),e))))))}),[M,L]),K=Object(r.useCallback)((e=>{G();const t=N.getAxes();if(e.x<t.xaxis.min||e.x>t.xaxis.max)return;const n=N.getData();z&&z.text(c()(e.x).format(Object(l.get)(n,"[0]._global.legend.timeFormat",d.a)));for(let t=0;t<n.length;++t){const r=n[t],i=r.lines.show&&!r.lines.steps,o=Object(l.get)(r,"_meta.precision",2);if(r._hide)continue;const a=r.data.find(((t,n)=>n+1===r.data.length||(i?e.x-t[0]<r.data[n+1][0]-e.x:e.x<r.data[n+1][0])))[1];if(F)if(null==a)F.eq(t).empty();else{let e=a.toFixed(o);const n=r.yaxis.tickFormatter;n&&(e=n(Number(e),r.yaxis)),F.eq(t).text(`(${e})`)}}}),[N,F,G,z]),J=Object(r.useCallback)(Object(l.debounce)(K,50,{maxWait:50,leading:!0,trailing:!1}),[K]),P=Object(r.useCallback)((()=>{z&&z.html(w),Object(l.each)(F,(e=>{o()(e).empty()}))}),[z,F]),Q=Object(r.useCallback)((e=>{N.setCrosshair(e),J(e)}),[N,J]),X=Object(r.useCallback)(((e,t)=>{N&&(Q(t),g.trigger(m,[e,t]))}),[N,Q]);Object(r.useEffect)((()=>{const e=(e,t,n)=>{N&&Q(n)};return g.on(m,e),()=>{g.off(m,e)}}),[N,Q]);const Z=Object(r.useCallback)((()=>{N&&(N.clearCrosshair(),P())}),[N,P]),ee=Object(r.useCallback)(((e,t)=>{i({gte:t.xaxis.from,lte:t.xaxis.to})}),[i]);Object(r.useEffect)((()=>{k&&o()(k).off("plotselected").on("plotselected",ee)}),[k,ee]),Object(r.useEffect)((()=>{k&&o()(k).off("mouseleave").on("mouseleave",Z)}),[k,Z]),Object(r.useEffect)((()=>{k&&o()(k).off("plothover").on("plothover",X)}),[k,X]);const te=Object(r.useMemo)((()=>Object(l.last)(Object(l.compact)(Object(l.map)(t.list,"_title")))||""),[t.list]);return Object(C.jsx)("div",{ref:I,className:"timChart"},Object(C.jsx)("div",{className:"chart-top-title"},te),Object(C.jsx)("div",{ref:R,className:"chart-canvas"}))}}}]);