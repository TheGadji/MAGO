(window.tileMap_bundle_jsonpfunction=window.tileMap_bundle_jsonpfunction||[]).push([[4],{25:function(t,e,o){"use strict";function n(t,e,o){e&o?t[0]=(t[0]+t[1])/2:t[1]=(t[0]+t[1])/2}function i(t,e){return!(!e||!t)&&(!(e.top_left.lat>t.top_left.lat||e.top_left.lon<t.top_left.lon)&&!(e.bottom_right.lat<t.bottom_right.lat||e.bottom_right.lon>t.bottom_right.lon))}o.r(e),o.d(e,"convertToGeoJson",(function(){return s})),o.d(e,"geoContains",(function(){return i}));const l={1:[5009400,4992600],2:[1252300,624100],3:[156500,156e3],4:[39100,19500],5:[4900,4900],6:[1200,609.4],7:[152.9,152.4],8:[38.2,19],9:[4.8,4.8],10:[1.2,.595],11:[.149,.149],12:[.037,.019]};function s(t,{geohash:e,geocentroid:o,metric:i}){let s,u=1/0,a=-1/0;if(t&&t.rows){const l=t,c=e?l.columns[e.accessor]:null;if(c){const t=l.columns[i.accessor],d=o?l.columns[o.accessor]:null;s=l.rows.map((o=>{const i=o[c.id];if(!i)return!1;const l=function(t){const e=[16,8,4,2,1];let o=!0;const i=[],l=[];i[0]=-90,i[1]=90,l[0]=-180,l[1]=180;let s=90,r=180;return[...t].forEach((t=>{const u="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(t);for(let t=0;t<5;t++){const a=e[t];o?(r=r/=2,n(l,u,a)):(s=s/=2,n(i,u,a)),o=!o}})),i[2]=(i[0]+i[1])/2,l[2]=(l[0]+l[1])/2,{latitude:i,longitude:l}}(i);let s;if(d){const t=o[d.id];s=[t.lon,t.lat]}else s=[l.longitude[2],l.latitude[2]];const f=[[l.latitude[0],l.longitude[0]],[l.latitude[0],l.longitude[1]],[l.latitude[1],l.longitude[1]],[l.latitude[1],l.longitude[0]]],m=[l.latitude[2],l.longitude[2]];null!=e&&e.params.useGeocentroid&&(s[0]=r(s[0],l.longitude[0],l.longitude[1]),s[1]=r(s[1],l.latitude[0],l.latitude[1]));const g=o[t.id];return u=Math.min(u,g),a=Math.max(a,g),{type:"Feature",geometry:{type:"Point",coordinates:s},properties:{geohash:i,geohash_meta:{center:m,rectangle:f},value:g}}})).filter((t=>!!t))}else s=[]}else s=[];const c={featureCollection:{type:"FeatureCollection",features:s},meta:{min:u,max:a,geohashPrecision:null==e?void 0:e.params.precision,geohashGridDimensionsAtEquator:null!=e&&e.params.precision?(d=e.params.precision,l[d]):void 0}};var d;return e&&e.accessor&&(c.meta.geohash=t.columns[e.accessor].meta),c}function r(t,e,o){return t>o?t=o:t<e&&(t=e),t}}}]);