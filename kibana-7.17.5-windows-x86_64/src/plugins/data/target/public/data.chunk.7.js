(window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[]).push([[7],{118:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var n=a(19),o=a.n(n),r=a(107),s=a.n(r),i=a(4),u=a.n(i),l=a(13),c=a(28),d=a(119),m=a(2),p=a(20),f=a(0);const g="data.noDataPopover";function h({showNoDataPopover:e,storage:t,children:a}){const[n,o]=Object(i.useState)((()=>Boolean(t.get(g)))),[r,s]=Object(i.useState)(!1);return Object(i.useEffect)((()=>{e&&!n&&s(!0)}),[n,e]),u.a.createElement(l.EuiTourStep,{onFinish:()=>{},closePopover:()=>{s(!1)},content:u.a.createElement(l.EuiText,{size:"s"},u.a.createElement("p",{style:{maxWidth:300}},f.i18n.translate("data.noDataPopover.content",{defaultMessage:"This time range doesn't contain any data. Increase or adjust the time range to see more fields and create charts."}))),minWidth:300,anchorPosition:"downCenter",anchorClassName:"eui-displayBlock",step:1,stepsTotal:1,isStepOpen:r,subtitle:f.i18n.translate("data.noDataPopover.subtitle",{defaultMessage:"Tip"}),title:f.i18n.translate("data.noDataPopover.title",{defaultMessage:"Empty dataset"}),footerAction:u.a.createElement(l.EuiButtonEmpty,{size:"xs",flush:"right",color:"text","data-test-subj":"noDataPopoverDismissButton",onClick:()=>{t.set(g,!0),o(!0),s(!1)}},f.i18n.translate("data.noDataPopover.dismissAction",{defaultMessage:"Don't show again"}))},u.a.createElement("div",{onFocus:()=>{s(!1)}},a))}var E=a(16);const y="data.autocompleteFtuePopover";function b({isVisible:e,storage:t,children:a}){const n=Object(c.useKibana)().services.docLinks.links.query.autocompleteChanges,[o,r]=Object(i.useState)((()=>Boolean(t.get(y)))),[s,d]=Object(i.useState)(!1);return Object(i.useEffect)((()=>{!o&&e&&d(!0)}),[o,e]),u.a.createElement(l.EuiTourStep,{onFinish:()=>{},closePopover:()=>{d(!1),r(!0)},content:u.a.createElement(l.EuiText,{size:"s",style:{maxWidth:"300px"}},u.a.createElement(E.FormattedMessage,{id:"data.autocompleteFtuePopover.content",defaultMessage:"We changed how autocomplete works to improve performance. {learnMoreLink}",values:{learnMoreLink:u.a.createElement(l.EuiLink,{href:n,target:"_blank",external:!0},f.i18n.translate("data.autocompleteFtuePopover.learnMoreLink",{defaultMessage:"Learn more."}))}})),minWidth:300,anchorPosition:"downCenter",zIndex:4002,anchorClassName:"eui-displayBlock",step:1,stepsTotal:1,isStepOpen:s,subtitle:"",title:f.i18n.translate("data.autocompleteFtuePopover.title",{defaultMessage:"Autocomplete is now faster!"}),footerAction:u.a.createElement(l.EuiButtonEmpty,{size:"xs",flush:"right",color:"text","data-test-subj":"autocompleteFtuePopoverDismissButton",onClick:()=>{t.set(y,!0),r(!0),d(!1)}},f.i18n.translate("data.autocompleteFtuePopover.dismissAction",{defaultMessage:"Don't show again"}))},u.a.createElement("div",{onFocus:()=>{d(!1)}},a))}const P=Object(c.withKibana)(d.default);function S(e){const[t,a]=Object(i.useState)(!1),[n,r]=Object(i.useState)(!1),d=Object(c.useKibana)(),{uiSettings:f,storage:g,appName:E}=d.services,y=e.query&&e.query.language,S=u.a.useMemo((()=>y&&f&&g&&E?Object(p.o)(f,g,E,y):void 0),[E,y,f,g]);function v(t){S&&e.query&&S.add(e.query.query),t.preventDefault(),D({query:e.query,dateRange:k()})}function k(){const t=f.get(m.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS);return{from:e.dateRangeFrom||t.from,to:e.dateRangeTo||t.to}}function F(t){e.onChange({query:t,dateRange:k()})}function R(e){r(e)}function T({start:t,end:n,isInvalid:o,isQuickSelection:r}){a(o);const s={query:e.query,dateRange:{from:t,to:n}};r?e.onSubmit(s):e.onChange(s)}function w({start:t,end:a}){const n={dateRange:{from:t,to:a}};e.onRefresh&&e.onRefresh(n)}function D({query:t,dateRange:a}){e.timeHistory&&e.timeHistory.add(a),e.onSubmit({query:t,dateRange:a})}function j(e){D({query:e,dateRange:k()})}function x(e,t=!1){const a=o.a.parse(e,{roundUp:t});return a?a.toISOString():e}function I(){return Boolean(e.showDatePicker||e.showAutoRefreshOnly)}const q=s()("kbnQueryBar",{"kbnQueryBar--withDatePicker":e.showDatePicker});return u.a.createElement(l.EuiFlexGroup,{className:q,responsive:!!e.showDatePicker,gutterSize:"s",justifyContent:"flexEnd"},function(){if(Boolean(e.showQueryInput&&e.indexPatterns&&e.query&&g))return u.a.createElement(l.EuiFlexItem,null,u.a.createElement(b,{storage:g,isVisible:n},u.a.createElement(P,{disableAutoFocus:e.disableAutoFocus,indexPatterns:e.indexPatterns,prepend:e.prepend,query:e.query,screenTitle:e.screenTitle,onChange:F,onChangeQueryInputFocus:R,onSubmit:j,persistedLog:S,dataTestSubj:e.dataTestSubj,placeholder:e.placeholder,isClearable:e.isClearable,iconType:e.iconType,nonKqlMode:e.nonKqlMode,nonKqlModeHelpText:e.nonKqlModeHelpText,timeRangeForSuggestionsOverride:e.timeRangeForSuggestionsOverride})))}(),function(){const{from:e,to:t}=k(),a=Object(l.prettyDuration)(x(e),x(t),[],f.get("dateFormat"));return u.a.createElement("div",{"data-shared-timefilter-duration":a,"data-test-subj":"dataSharedTimefilterDuration"})}(),u.a.createElement(l.EuiFlexItem,{grow:!1},function(){const a=e.customSubmitButton?u.a.cloneElement(e.customSubmitButton,{onClick:v}):u.a.createElement(l.EuiSuperUpdateButton,{needsUpdate:e.isDirty,isDisabled:t,isLoading:e.isLoading,onClick:v,"data-test-subj":"querySubmitButton"});return I()?u.a.createElement(h,{storage:g,showNoDataPopover:e.indicateNoData},u.a.createElement(l.EuiFlexGroup,{responsive:!1,gutterSize:"s"},function(){if(!I())return null;let t;e.timeHistory&&(t=e.timeHistory.get().map((({from:e,to:t})=>({start:e,end:t}))));const a=f.get(m.UI_SETTINGS.TIMEPICKER_QUICK_RANGES).map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))),o=s()("kbnQueryBar__datePickerWrapper",{"kbnQueryBar__datePickerWrapper-isHidden":n});return u.a.createElement(l.EuiFlexItem,{className:o},u.a.createElement(l.EuiSuperDatePicker,{start:e.dateRangeFrom,end:e.dateRangeTo,isPaused:e.isRefreshPaused,refreshInterval:e.refreshInterval,onTimeChange:T,onRefresh:w,onRefreshChange:e.onRefreshChange,showUpdateButton:!1,recentlyUsedRanges:t,commonlyUsedRanges:a,dateFormat:f.get("dateFormat"),isAutoRefreshOnly:e.showAutoRefreshOnly,className:"kbnQueryBar__datePicker"}))}(),u.a.createElement(l.EuiFlexItem,{grow:!1},a))):a}()))}S.defaultProps={showQueryInput:!0,showDatePicker:!0,showAutoRefreshOnly:!1}}}]);