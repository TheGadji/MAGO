(window.advancedSettings_bundle_jsonpfunction=window.advancedSettings_bundle_jsonpfunction||[]).push([[2],{19:function(e,t,n){"use strict";var s,i=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function o(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},s=[],i=0;i<e.length;i++){var a=e[i],c=t.base?a[0]+t.base:a[0],d=n[c]||0,l="".concat(c," ").concat(d);n[c]=d+1;var u=o(l),g={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(r[u].references++,r[u].updater(g)):r.push({identifier:l,updater:f(g,t),references:1}),s.push(l)}return s}function d(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var i=n.nc;i&&(s.nonce=i)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var r=a(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function g(e,t,n,s){var i=n?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var a=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function h(e,t,n){var s=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var p=null,m=0;function f(e,t){var n,s,i;if(t.singleton){var a=m++;n=p||(p=d(t)),s=g.bind(null,n,a,!1),i=g.bind(null,n,a,!0)}else n=d(t),s=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<n.length;s++){var i=o(n[s]);r[i].references--}for(var a=c(e,t),d=0;d<n.length;d++){var l=o(n[d]);0===r[l].references&&(r[l].updater(),r.splice(l,1))}n=a}}}},20:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",s=e[3];if(!s)return n;if(t&&"function"==typeof btoa){var i=(r=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(c," */")),a=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var r,o,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,s){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(s)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);s&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},31:function(e,t,n){"use strict";const s=n(32),i=n(33),a=n(34);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function c(e,t){return t.decode?i(e):e}function d(e){return Array.isArray(e)?e.sort():"object"==typeof e?d(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function l(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,s)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=n):s[e]=n};case"bracket":return(e,n,s)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==s[e]?s[e]=[].concat(s[e],n):s[e]=[n]:s[e]=n};case"comma":case"separator":return(t,n,s)=>{const i="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===n?n:c(n,e);s[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const i of e.split("&")){let[e,r]=a(t.decode?i.replace(/\+/g," "):i,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:c(r,t),n(c(e,t),r,s)}for(const e of Object.keys(s)){const n=s[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=g(n[e],t);else s[e]=g(n,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const n=s[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=d(n):e[t]=n,e}),Object.create(null))}t.extract=u,t.parse=h,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],s=function(e){switch(e.arrayFormat){case"index":return t=>(n,s)=>{const i=n.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[o(t,e),"[",i,"]"].join("")]:[...n,[o(t,e),"[",o(i,e),"]=",o(s,e)].join("")]};case"bracket":return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,[o(t,e),"[]"].join("")]:[...n,[o(t,e),"[]=",o(s,e)].join("")];case"comma":case"separator":return t=>(n,s)=>null==s||0===s.length?n:0===n.length?[[o(t,e),"=",o(s,e)].join("")]:[[n,o(s,e)].join(e.arrayFormatSeparator)];default:return t=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:null===s?[...n,o(t,e)]:[...n,[o(t,e),"=",o(s,e)].join("")]}}(t),i={};for(const t of Object.keys(e))n(t)||(i[t]=e[t]);const a=Object.keys(i);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const i=e[n];return void 0===i?"":null===i?o(n,t):Array.isArray(i)?i.reduce(s(n),[]).join("&"):o(n,t)+"="+o(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,s]=a(e,"#");return Object.assign({url:n.split("?")[0]||"",query:h(u(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:c(s,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const s=l(e.url).split("?")[0]||"",i=t.extract(e.url),a=t.parse(i,{sort:!1}),r=Object.assign(a,e.query);let c=t.stringify(r,n);c&&(c=`?${c}`);let d=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(d=`#${o(e.fragmentIdentifier,n)}`),`${s}${c}${d}`}},32:function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},33:function(e,t,n){"use strict";var s="%[a-f0-9]{2}",i=new RegExp(s,"gi"),a=new RegExp("("+s+")+","gi");function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],r(n),r(s))}function o(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(i),n=1;n<t.length;n++)t=(e=r(t,n).join("")).match(i);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var s=o(n[0]);s!==n[0]&&(t[n[0]]=s)}n=a.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),r=0;r<i.length;r++){var c=i[r];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},34:function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},35:function(e,t,n){switch(window.__kbnThemeTag__){case"v7dark":return n(36);case"v7light":return n(38);case"v8dark":return n(40);case"v8light":return n(42)}},36:function(e,t,n){var s=n(19),i=n(37);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};s(i,a);e.exports=i.locals||{}},37:function(e,t,n){(t=n(20)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #FFCE7A}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F66}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #FFCE7A;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),e.exports=t},38:function(e,t,n){var s=n(19),i=n(39);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};s(i,a);e.exports=i.locals||{}},39:function(e,t,n){(t=n(20)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F5A700}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #BD271E}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #F5A700;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),e.exports=t},40:function(e,t,n){var s=n(19),i=n(41);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};s(i,a);e.exports=i.locals||{}},41:function(e,t,n){(t=n(20)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F3D371}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #F86B63}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #F3D371;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),e.exports=t},42:function(e,t,n){var s=n(19),i=n(43);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};s(i,a);e.exports=i.locals||{}},43:function(e,t,n){(t=n(20)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{padding-left:8px;margin-left:-8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #FEC514}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #BD271E}@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none){.mgtAdvancedSettings__field{min-height:1px}.mgtAdvancedSettings__fieldRow{min-height:1px}}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width: 574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #FEC514;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}\n",""]),e.exports=t},45:function(e,t,n){"use strict";n.r(t),n.d(t,"mountManagementSection",(function(){return w}));var s=n(2),i=n.n(s),a=n(15),r=n.n(a),o=n(16),c=n(3),d=n(5),l=n(12),u=n(0),g=n.n(u),h=n(31),p=n(4),m=n(1);const f=()=>Object(m.jsx)("div",null,Object(m.jsx)(p.EuiCallOut,{title:Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},Object(m.jsx)("p",null,Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or experimental. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))));var v=n(18),b=n(11),y=n(17),x=n(21),j=n(44);class form_Form extends s.PureComponent{constructor(...e){super(...e),g()(this,"state",{unsavedChanges:{},loading:!1}),g()(this,"getSettingByKey",(e=>Object.values(this.props.settings).flat().find((t=>t.name===e)))),g()(this,"getCountOfUnsavedChanges",(()=>Object.keys(this.state.unsavedChanges).length)),g()(this,"getCountOfHiddenUnsavedChanges",(()=>{const e=Object.values(this.props.visibleSettings).flat().map((e=>e.name));return Object.keys(this.state.unsavedChanges).filter((t=>!e.includes(t))).length})),g()(this,"areChangesInvalid",(()=>{const{unsavedChanges:e}=this.state;return Object.values(e).some((({isInvalid:e})=>e))})),g()(this,"handleChange",((e,t)=>{const n=this.getSettingByKey(e);if(!n)return;const{type:s,defVal:i,value:a}=n,r=Object(j.getEditableValue)(s,a,i);if(t.value===r)return this.clearChange(e);this.setState({unsavedChanges:{...this.state.unsavedChanges,[e]:t}})})),g()(this,"clearChange",(e=>{if(!this.state.unsavedChanges[e])return;const t={...this.state.unsavedChanges};delete t[e],this.setState({unsavedChanges:t})})),g()(this,"clearAllUnsaved",(()=>{this.setState({unsavedChanges:{}})})),g()(this,"saveAll",(async()=>{this.setLoading(!0);const{unsavedChanges:e}=this.state;if(Object(b.isEmpty)(e))return;const t={};let n=!1;Object.entries(e).forEach((([e,{value:s}])=>{const i=this.getSettingByKey(e);if(!i)return;const{defVal:a,type:r,requiresPageReload:o,metric:c}=i;let d=s,l=!1;switch(r){case"array":d=d.trim(),d=""===d?[]:d.split(",").map((e=>e.trim())),l=d.join(",")===a.join(",");break;case"json":const e=Array.isArray(JSON.parse(a||"{}"));d=d.trim(),d=d||(e?"[]":"{}");case"boolean":if(c&&this.props.trackUiMetric){const e=d?`${c.name}_on`:`${c.name}_off`;this.props.trackUiMetric(c.type,e)}default:l=d===a}o&&(n=!0),t[e]=l?null:d}));try{await this.props.save(t),this.clearAllUnsaved(),n&&this.renderPageReloadToast()}catch(e){this.props.toasts.addDanger(c.i18n.translate("advancedSettings.form.saveErrorMessage",{defaultMessage:"Unable to save"}))}this.setLoading(!1)})),g()(this,"renderPageReloadToast",(()=>{this.props.toasts.add({title:c.i18n.translate("advancedSettings.form.requiresPageReloadToastDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."}),text:Object(y.toMountPoint)(Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(p.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(m.jsx)(p.EuiFlexItem,{grow:!1},Object(m.jsx)(p.EuiButton,{size:"s",onClick:()=>window.location.reload()},c.i18n.translate("advancedSettings.form.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"})))))),color:"success"})})),g()(this,"renderCountOfUnsaved",(()=>{const e=this.getCountOfUnsavedChanges(),t=this.getCountOfHiddenUnsavedChanges();return Object(m.jsx)(p.EuiTextColor,{className:"mgtAdvancedSettingsForm__unsavedCountMessage",color:"ghost"},Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.form.countOfSettingsChanged",defaultMessage:"{unsavedCount} unsaved {unsavedCount, plural, one {setting} other {settings} }{hiddenCount, plural, =0 {} other {, # hidden} }",values:{unsavedCount:e,hiddenCount:t}}))})),g()(this,"renderBottomBar",(()=>{const e=this.areChangesInvalid();return Object(m.jsx)(p.EuiBottomBar,{"data-test-subj":"advancedSetting-bottomBar"},Object(m.jsx)(p.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:!1,gutterSize:"s"},Object(m.jsx)(p.EuiFlexItem,{grow:!1,className:"mgtAdvancedSettingsForm__unsavedCount"},Object(m.jsx)("p",{id:"aria-describedby.countOfUnsavedSettings"},this.renderCountOfUnsaved())),Object(m.jsx)(p.EuiFlexItem,null),Object(m.jsx)(p.EuiFlexItem,{grow:!1},Object(m.jsx)(p.EuiButtonEmpty,{color:"ghost",size:"s",iconType:"cross",onClick:this.clearAllUnsaved,"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"advancedSetting-cancelButton"},c.i18n.translate("advancedSettings.form.cancelButtonLabel",{defaultMessage:"Cancel changes"}))),Object(m.jsx)(p.EuiFlexItem,{grow:!1},Object(m.jsx)(p.EuiToolTip,{content:e&&c.i18n.translate("advancedSettings.form.saveButtonTooltipWithInvalidChanges",{defaultMessage:"Fix invalid settings before saving."})},Object(m.jsx)(p.EuiButton,{className:"mgtAdvancedSettingsForm__button",disabled:e,color:"secondary",fill:!0,size:"s",iconType:"check",onClick:this.saveAll,"aria-describedby":"aria-describedby.countOfUnsavedSettings",isLoading:this.state.loading,"data-test-subj":"advancedSetting-saveButton"},c.i18n.translate("advancedSettings.form.saveButtonLabel",{defaultMessage:"Save changes"}))))))}))}setLoading(e){this.setState({loading:e})}renderClearQueryLink(e,t){const{clearQuery:n}=this.props;return e!==t?Object(m.jsx)(p.EuiFlexItem,{grow:!1},Object(m.jsx)("em",null,Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:e-t,clearSearch:Object(m.jsx)(p.EuiLink,{onClick:n},Object(m.jsx)("em",null,Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}}))):null}renderCategory(e,t,n){return Object(m.jsx)(s.Fragment,{key:e},Object(m.jsx)(p.EuiSplitPanel.Outer,{hasBorder:!0},Object(m.jsx)(p.EuiSplitPanel.Inner,{color:"subdued"},Object(m.jsx)(p.EuiFlexGroup,{alignItems:"baseline"},Object(m.jsx)(p.EuiFlexItem,{grow:!1},Object(m.jsx)(p.EuiTitle,null,Object(m.jsx)("h2",null,Object(x.d)(e)))),this.renderClearQueryLink(n,t.length))),Object(m.jsx)(p.EuiSplitPanel.Inner,null,t.map((e=>Object(m.jsx)(j.Field,{key:e.name,setting:e,handleChange:this.handleChange,unsavedChanges:this.state.unsavedChanges[e.name],clearChange:this.clearChange,enableSaving:this.props.enableSaving,dockLinks:this.props.dockLinks,toasts:this.props.toasts}))))),Object(m.jsx)(p.EuiSpacer,{size:"l"}))}maybeRenderNoSettings(e){return this.props.showNoResultsMessage?Object(m.jsx)(p.EuiCallOut,{color:"danger",title:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.form.noSearchResultText",defaultMessage:"No settings found for {queryText} {clearSearch}",values:{clearSearch:Object(m.jsx)(p.EuiLink,{onClick:e},Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.form.clearNoSearchResultText",defaultMessage:"(clear search)"})),queryText:Object(m.jsx)("strong",null,this.props.queryText)}}))}):null}render(){const{unsavedChanges:e}=this.state,{visibleSettings:t,categories:n,categoryCounts:i,clearQuery:a}=this.props,r=[],o=!Object(b.isEmpty)(e);return o?document.body.classList.add("kbnBody--mgtAdvancedSettingsHasBottomBar"):document.body.classList.remove("kbnBody--mgtAdvancedSettingsHasBottomBar"),n.forEach((e=>{t[e]&&t[e].length&&r.push(e)})),Object(m.jsx)(s.Fragment,null,Object(m.jsx)("div",null,r.length?r.map((e=>this.renderCategory(e,t[e],i[e]))):this.maybeRenderNoSettings(a)),o&&this.renderBottomBar())}}class advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement extends s.Component{constructor(...e){super(...e),g()(this,"shouldComponentUpdate",(e=>e.queryText!==this.props.queryText))}render(){const e=Object.values(this.props.settings).map((e=>e.map((e=>e.ariaName)))),t=[...e];return Object(m.jsx)(p.EuiScreenReaderOnly,null,Object(m.jsx)("div",{role:"region","aria-live":"polite","aria-label":c.i18n.translate("advancedSettings.voiceAnnouncement.ariaLabel",{defaultMessage:"Advanced Settings results info"})},Object(m.jsx)(p.EuiDelayRender,null,this.props.queryText?Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:e.length,optionLenght:t.length}}):Object(m.jsx)(d.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.noSearchResultScreenReaderMessage",defaultMessage:"There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{sectionLenght:e.length,optionLenght:t.length}}))))}}const S="query";class advanced_settings_AdvancedSettings extends s.Component{constructor(e){super(e),g()(this,"settings",void 0),g()(this,"groupedSettings",void 0),g()(this,"categoryCounts",void 0),g()(this,"categories",[]),g()(this,"uiSettingsSubscription",void 0),g()(this,"unregister",void 0),g()(this,"initSettings",this.mapConfig),g()(this,"initGroupedSettings",this.mapSettings),g()(this,"onQueryChange",(({query:e})=>{this.setUrlQuery(e.text)})),g()(this,"clearQuery",(()=>{this.setUrlQuery("")})),g()(this,"onFooterQueryMatchChange",(e=>{this.setState({footerQueryMatched:e})})),g()(this,"saveConfig",(async e=>{const t=Object.entries(e).map((([e,t])=>this.props.uiSettings.set(e,t)));return Promise.all(t)})),this.settings=this.initSettings(this.props.uiSettings),this.groupedSettings=this.initGroupedSettings(this.settings),this.categories=this.initCategories(this.groupedSettings),this.categoryCounts=this.initCategoryCounts(this.groupedSettings),this.state=this.getQueryState(void 0,!0),this.unregister=this.props.history.listen((({search:e})=>{this.setState(this.getQueryState(e))}))}init(e){this.settings=this.initSettings(e),this.groupedSettings=this.initGroupedSettings(this.settings),this.categories=this.initCategories(this.groupedSettings),this.categoryCounts=this.initCategoryCounts(this.groupedSettings)}initCategories(e){return Object.keys(e).sort(((e,t)=>e===x.a?-1:t===x.a||e>t?1:e===t?0:-1))}initCategoryCounts(e){return Object.keys(e).reduce(((t,n)=>(t[n]=e[n].length,t)),{})}componentDidMount(){this.uiSettingsSubscription=this.props.uiSettings.getUpdate$().subscribe((()=>{const{query:e}=this.state;this.init(this.props.uiSettings),this.setState({filteredSettings:this.mapSettings(p.Query.execute(e,this.settings))})}));const{hash:e}=window.location;""!==e&&setTimeout((()=>{var t;const n=e.replace("#",""),s=document.getElementById(n);let i=0;const a=null===(t=document.getElementById("globalHeaderBars"))||void 0===t?void 0:t.getElementsByClassName("euiHeader");a&&Array.from(a).forEach((e=>{i+=e.offsetHeight})),s&&(s.scrollIntoView(),window.scrollBy(0,-i))}),0)}componentWillUnmount(){var e,t,n;null===(e=this.uiSettingsSubscription)||void 0===e||null===(t=e.unsubscribe)||void 0===t||t.call(e),null===(n=this.unregister)||void 0===n||n.call(this)}getQuery(e,t=!1){try{const n=t?Object(x.c)(e):null!=e?e:"";return p.Query.parse(n)}catch({message:e}){return this.props.toasts.addWarning({title:v.c,text:e}),p.Query.parse("")}}getQueryText(e){var t,n;return null!==(n=(null!==(t=Object(h.parse)(null!=e?e:window.location.search))&&void 0!==t?t:{}).query)&&void 0!==n?n:""}getQueryState(e,t=!1){const n=this.getQueryText(e),s=this.getQuery(n,t),i=this.mapSettings(p.Query.execute(s,this.settings));return{query:s,filteredSettings:i,footerQueryMatched:Object.keys(i).length>0}}setUrlQuery(e=""){const t=l.url.addQueryParam(window.location.search,S,e);this.props.history.push({pathname:"",search:t})}mapConfig(e){const t=e.getAll();return Object.entries(t).map((([t,n])=>Object(x.f)({def:n,name:t,value:n.userValue,isCustom:e.isCustom(t),isOverridden:e.isOverridden(t)}))).filter((e=>!e.readOnly)).sort(x.b)}mapSettings(e){return e.reduce(((e,t)=>{const n=t.category[0];return(e[n]=e[n]||[]).push(t),e}),{})}render(){const{filteredSettings:e,query:t,footerQueryMatched:n}=this.state,s=this.props.componentRegistry,i=s.get(s.componentType.PAGE_TITLE_COMPONENT),a=s.get(s.componentType.PAGE_SUBTITLE_COMPONENT),r=s.get(s.componentType.PAGE_FOOTER_COMPONENT);return Object(m.jsx)("div",null,Object(m.jsx)(p.EuiFlexGroup,{gutterSize:"none"},Object(m.jsx)(p.EuiFlexItem,null,Object(m.jsx)(i,null)),Object(m.jsx)(p.EuiFlexItem,null,Object(m.jsx)(v.b,{query:t,categories:this.categories,onQueryChange:this.onQueryChange}))),Object(m.jsx)(a,null),Object(m.jsx)(p.EuiSpacer,{size:"m"}),Object(m.jsx)(f,null),Object(m.jsx)(p.EuiSpacer,{size:"m"}),Object(m.jsx)(advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement,{queryText:t.text,settings:e}),Object(m.jsx)(form_Form,{settings:this.groupedSettings,visibleSettings:e,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,showNoResultsMessage:!n,enableSaving:this.props.enableSaving,dockLinks:this.props.dockLinks,toasts:this.props.toasts,trackUiMetric:this.props.trackUiMetric,queryText:t.text}),Object(m.jsx)(r,{toasts:this.props.toasts,query:t,onQueryMatchChange:this.onFooterQueryMatchChange,enableSaving:this.props.enableSaving}))}}n(35);const _=c.i18n.translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"}),O=[{text:_}],C={text:c.i18n.translate("advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:c.i18n.translate("advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"},A=({match:e,location:t})=>({pathname:"/",search:l.url.addQueryParam(t.search,S,null==e?void 0:e.params.query)});async function w(e,t,n,s){t.setBreadcrumbs(O);const[{uiSettings:i,notifications:a,docLinks:c,application:l,chrome:u}]=await e(),g=l.capabilities.advancedSettings.save,h=null==s?void 0:s.reportUiCounter.bind(s,"advanced_settings");return g||u.setBadge(C),u.docTitle.change(_),r.a.render(Object(m.jsx)(d.I18nProvider,null,Object(m.jsx)(o.Router,{history:t.history},Object(m.jsx)(o.Switch,null,Object(m.jsx)(o.Route,{path:"/:query"},(e=>Object(m.jsx)(o.Redirect,{to:A(e)}))),Object(m.jsx)(o.Route,{path:"/"},Object(m.jsx)(advanced_settings_AdvancedSettings,{history:t.history,enableSaving:g,toasts:a.toasts,dockLinks:c.links,uiSettings:i,componentRegistry:n,trackUiMetric:h}))))),t.element),()=>{u.docTitle.reset(),r.a.unmountComponentAtNode(t.element)}}}}]);